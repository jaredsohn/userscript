// ==UserScript==
// @name           Sb5
// @namespace      Streak
// @homepage       http://userscripts.org/scripts/show/130424
// @include        *apps.facebook.com/kingdomsofcamelot/*
// @include        *kingdomsofcamelot.com/*main_src.php*
// @include        *kingdomsofcamelot.com/*fbLoginButton.php*
// @include        *kingdomsofcamelot.com/*standAlone.php*
// @include        *kingdomsofcamelot.com/*platforms/kabam*
// @include        *kingdomsofcamelot.com/*acceptToken_src.php*
// @include        *kingdomsofcamelot.com/*helpFriend_src.php*
// @include        *facebook.com/connect/uiserver.php*
// @include        *facebook.com/*/serverfbml*
// @include        *facebook.com/dialog/feed*
// @include        *facebook.com/dialog/stream.publish*
// @include        *facebook.com/dialog/apprequests*            
// @include        *kabam.com/*

// @icon  http://images2.layoutsparks.com/1/205171/Ying-Yang-Dragon-Metal.jpg

// @description  Customised bot&tools
// ==/UserScript==



var Version = 'sb5';
// These switches are for testing, all should be set to false for released version:
var DEBUG_TRACE = false;
var DEBUG_SEARCH = false;
var ENABLE_TEST_TAB = false;
var DISABLE_BULKADD_LIST = false;
var ENABLE_GM_AJAX_TRACE = false;
var SEND_ALERT_AS_WHISPER = false;
var DEBUG_BUTTON = true;
var DEBUG_TRACE_DRAG = false;
var DEBUG_TRACE_AJAX = false;
var DISABLE_POST_KNIGHT_SKILLS = false;
var DISABLE_POST_DEFENSES = false;
var ENABLE_SEARCH_TAB = false;
var ENABLE_TEST_TAB = false;
var TEST_WIDE = false;
var TEST_WIDE_CITIES = 7;
var History=[];
var ENABLE_SEARCH_TAB = false;
var ENABLE_WILDS_TAB = false;
var ENABLE_KNIGHTS_TAB = false;
var ENABLE_INFO_TAB = false;

// end test switches

var MAP_DELAY = 1300;
var DEFAULT_ALERT_SOUND_URL = 'http://thorastur.99h.com.ar/powerkoc/fliegeralarmsire.mp3';
var SWF_PLAYER_URL = 'http://thorastur.99h.com.ar/dewplayer/alarmplayer.swf';
var DETECT_LEVEL_FS = false;

var URL_CASTLE_BUT = "data:image/png;base64,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";
var URL_CASTLE_BUT_SEL = "data:image/png;base64,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";
// var URL_CASTLE_BUT = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAXCAMAAAGkBsQ5AAABa1BMVEX%2F%2F8X%2F98X%2F973%2F97X%2F77X%2F7633773%2F76X377X3763%2F5q3%2F5qX%2F5pz35q335qX%2F3pz%2F3pT33pz%2F1pT%2F1oz%2F1oT31pT31oz%2FzoT%2Fznv3zoT%2FxXv%2FxXP%2FxWv3xXv3xXP%2FvWv%2FvWP3vWv3vWP%2FtWP%2FtVr%2FtVLmvWv3tWP3tVr3tVL%2FrVL%2FrUrmtWP3rVL3rUrvrVL%2FpUrvrUr%2FpULmrVrmrVL3pUr3pULmpUL3nDrepULWpVLWpUrmnDrFpUK1pVrOnDqcnFKcnEqMnEp7lHN7lGtzlGNrlGtjjEpajFpShFJSe2NChEJKe1o6hDohjDFCc1oZjDEhhDEQjDEAlDEpezoZhDEhezoQhDEAjDEpczoZezoIhDEhc0IhczoAhDEZczoIezEhazoAezEhY0IAczEAcykIazEhWkIAazEAaykIYzEhUkIAYzEAWjEAUjEAUikASjEASikAQjEAQikAOjEAOikAMTEAMSkAKSlOGAcLAAAACXBIWXMAAAsSAAALEgHS3X78AAABVklEQVQYGQXBPW4TYRiF0ee%2B3x2DRSxRIFJTGIkVUFDQIbEDlkE5%2B8kWWEKKIBSB5AohXBGUSAaCIdgz3x%2FnaARztjS3RSPodPkmfuzReLbOh1fm72a4h3kxyWgE8NXPz8%2F%2FhC%2FzRXLM3cmeqvGDl7Mfa9ztT9pvp3%2FDOpjOr7Yft9PXjPHxE%2Bl6p4SJqSq5RsL4EAtZaUAjAABoBADAt%2Fty8ovVnhQ%2Bfx%2BbDTfXQ9Bz5H7IdWGV9k588NJWrQiXjMkdly6Fo9beRap29F4QJBxTE%2Bo9bF7XuUpJsp8BAGjcATSgADOQWRsfLu8WT0%2B33wcePknfJj%2B6j3Hb17m5HQsr1%2Fm4aGBEbtp8uXPWzcSBlhYYXKunObLoOyU1jFH02oVRZNFJQ2CCko26MIrC3MAEpRdcSVkYFYzBuaAuQFFAgzFBK0GVZhYoaUYYVm8b0IAGNDr8B8ZXpEbZNGQ6AAAAAElFTkSuQmCC";
// var URL_CASTLE_BUT_SEL = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABUAAAAXAgMAAAHuttyYAAAACVBMVEX%2F%2F%2F8AOjEAKSnbo5E5AAAACXBIWXMAAAsSAAALEgHS3X78AAAAW0lEQVQI12NYwdAAhCsYOICwQQGEpiYwrGpgCHRgcIChUAeGqaERDBMZJRgmMCDwqlUrgHgBQ2hoAIMjiwAYOzBgxyA1ILVTQ4GggWEKK4MIK4JiYGAgiYKYAgBFlyWR9CCfyAAAAABJRU5ErkJggg%3D%3D";
var CHAT_BG_IMAGE = "data:image/gif;base64,R0lGODlhagHQAvcAAP%2F%2F5v%2F%2F1v%2F33v%2F31vf35v%2F3zvf33v%2F3xff31vf3zv%2Fv3u%2F33v%2Fv1v%2Fvzvfv1vfvzvfvxffvvffmzu%2Fmvebmvffere%2Feve%2Fete%2Fere%2Fepebevebeteberd7evd7ete%2FWpebWtd7Wtd7Wrd7WpdbWrd7Ord7OpdbOrdbOpdbFpc7FtdbFnM7FnMXFrc7FlM69rc69nM69lM69jMW9nMW9lMW9jL29nL29lM61jMW1nMW1lMW1jL21nMW1hL21lL21jMWtlLW1lL2tnL2tlL2thL2te7WthL2le72lc7WlhL2la7Wle7Wlc7Wla62le62lc7Wce7Wcc62chLWca6WcjK2cc6WchK2ca62cY6Wcc6Wca6WUhK2Ua6WUa6WUY5yUY5yMa5yMY5yMWpSMa5SMY5SMWoyMY5SEa5SEY4SEe4yEY4yEWoyEUpx7Uox7Wox7UoR7WoR7UoRzUntzY4RzSntzUntzSnNzSntrSmtrY3NrSmtjOhlrzmNaSjpjhBljxRljvRljtRlarRlapRlSnBlSlBlKjBlKhBlKexlCexlCcxlCa0o6CCE6Uhk6Yxk6WkopAEIpADopABAxQjEpEDEpCCEpMRkpMTohADEhACkhCDEZACkZACEZCCEZACEQABkQABkIABAIABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAAagHQAgAI%2FgB1NGgAB02XJUaWKFziZEmShRAVOplIcSIUKA4fLsG4EUqVj1kqNpQosmJEJ1VGSvx4saXLlwxLTvxYReFHmSgnkqRJkabPn0CrvGypE2fFlEZLCl3I8SJEKCirZJmKNGlJIxRJjoza0CREq0eVBq0KNqdIpFo7ehQ61OVYLTSnZoGbUUoSJ0yeNJlR4EGdOGsCC37jRvAaN4gDI37DuDHjOI3dOHYcR46cyZgzI94cmfMby6BBZ34Tp7Tp0ocZFx79GPNp03LsjLZcGjRk1ZJZE278%2Bvbj3qZVH0482rQdO8DjbEZ8OnHwNaU9q9ZNOvnpzryTvzEcuLRr4MWt%2Fgev%2FpoOHdPm0zOWszkOm%2Fc3HjxY42QGChQmRNw%2FQaL%2FiRP7%2FYeCCAT%2BR6B%2B9yUYoIAKmuCgCSVEWMKDD5aAH4UOXkghCvz15yEJCoYoIgoT3gehCSRieKKEEkIogoQj3pcChx7%2Bx99%2FH%2F7H4o4RoohCCjNyaOOCAIb4YX8xJriCggDqGGGRIloo4oYaVgjjiBnGmGWSCdqIoopbhljhg1yWaeYKQJZwwoEjjHBDAgmoYcQGfRVg550DFJCnnQP0ead88tkJ56AJCEoonAUMpOiddiraAKOQRsrooZQOmqiji17qqKaLYurpp54WUGilk3IKaqiMNuAnpIiuKiqi%2F68W2uhAktYKKa13nqorpolemmukj9p6a6278kqqsH8%2B8CcEyhZwwAGMPgCBnQI1sIYRIDQAQbGbcmqqow%2BAGm64npKL6bjncituA%2BiiO1C77MYL77i5BtuXueqCqum37ALq77%2F%2B5vvuv%2F0GPLDBBhfbLr6KAkxwwacCKnC6706M67f1OhtBBBAcwOwADjgwA7tygJGEDjrkoPLKKvuwsg8w5wCzD0MMMXMOKKO8MhApsywzD0AHLfTQQc88NMxBDwHE0kwD4fPLM0dtdNRAU0200DPXXDPNWnettNc8s8yz1DPPYHYOVZNt9NE%2B6KB0z27rvDLKRa9dddBo86C21f5D5%2B3D1XjnMMPKgO8NeN12H6643joA0TXPTXstueQ%2FDPFDD5gXofkPlQuRgwQSwOGGGmecAcbpqIOxhRVWSCEF663DLrsVW9Re%2B%2By45667FVTsrvvrwPsu%2FPC2F7867Lfvfjztt9vOfPLD0%2F588dFXb73yy%2Bee%2FfXcd8%2B98eCHD%2F4ZcMxRRx1zwHHGEkQwQQcj8O%2FRRx8vMOBAHX2Iov%2F%2B%2FPfv%2F%2F8ADKAAB0jAAhrwgAhMoAIXyMAGOvCBEIygAxmhhyUUgQ3wy%2BALDKCAOeRPgiAMoQhHSMISmvCEKEzh%2Fxixhh6IIYOMaIEBDOBBFdrwhjjMoQ53yEMJsrAK7%2F6DXwsIQIAa9vCISEyiEpfIRAMyogtV2AP8XkBEIzbxiljMoha3%2BMA9ZGENU1RABz%2FIxTKa8YxoZCIZjBDGMYLijXCMoxznSMc62vGOeMyjHvfIxz768Y%2BADKQgB0nIQhrykG%2FcQxQZ8QIxehCRkIykJCdJyUpa8pKYzCQoGMGFNjByho%2FUpChHScpSmvKUqBRkF7gQQ0f2IZWwjKUsZ0nLWuIxCzuIIQdDacte%2BvKXwAwmIHGpSzcK85jITKYyY0nMFrhymdCMpjSnWchmPpOa2MymNrNpTWNu85vgDGcvs9CDVnpTnOhMpzozmQUimNODnYinPOdJz3ra8574zP%2BnPvfJz376858ADahAB0rQghr0oAhNqDzJ%2Bc4%2BKPShEI2oRCdK0Ypa9KIYjWc34ZnRjnr0oyANqUhHStCNOpSkKE2pSlfK0pbmk6HOHKNLZ0rTmtr0piUtZyNlitOe%2BvSnQE0pQ3fK0aAa9ahITWpBh%2BpKpTr1qVCFKlN5GtWqWvWqM4UpKE%2BK1a569asZbacuachVsJr1rGgtqTtlSFZNuPWtcI2rXOdK17ra9a54zate98rXvvr1r4ANrGAHS9jCGvatYmWrBw%2FL2MY69rGQjaxkJ0vZyro1C0Uo5mIty9nOevazoA2taAOLWc32YbSoTa1qV8va1t61CkdoqGv%2BZ0vb2tr2toGFrWxxy9ve%2Bva3qdUtUU8L3OIa97jIHaxwXZnc5jr3uc9d7hihS93qWre20t3sdbfL3e5aVrcx9SAlxkve8pr3vOhNr3rXy972uve98I2vfOdL3%2Fra9774za9%2B90veKhQBEuHVA38HTOACG%2FjACE6wghfM4PFC4QgAdqSAG0zhClv4whjOsIbt%2B%2BAIj3HDIA6xiEdM4hKztwpIgIQKXNmISbj4xTCOsYxnTOMa2%2FjGOM6xjnfM4x77%2BMdADrKQh0zkIhf5EpagxBVSTNQ88OHJUI6ylKdM5Spb%2BcpYzrKWt8zlLnv5y2AOs5jHTOYym%2FnMUH5Cilv%2BsIAF5CEPf4iznOdM5zrb%2Bc54zrOe98znPvv5z4AOtKAHTehCG%2FrQiE60nO0CCRsgwM1%2BAISkJ03pSlv60pjOtKY3zelOe%2FrToA61qEdN6lKb%2BtSoTrWqJ22FJEBiBgPoYKRXTeta2%2FrWuM61rnfN614DwgpLgAQMBCDrQBj72MhOtrKXzexmO%2FvZ0I62tKdN7Wpb%2B9rYzra2t83tbnv72A2BxE7T4AdBmPvc6E63utfN7na7%2B93wjre8503vetv73vjOt773ze9%2B%2B%2FvcRoiCh8n974Ib%2FOAIT7jCF87whjvc3EaA8LjzMIiKW%2FziGM%2B4xjfO8Y57%2FOMgD7nIR07%2F8pKb%2FOQoT7nKV87ylls8CRIXYxryQIia2%2FzmOM%2B5znfO8577%2FOdAD7rQh070ohv96EhPutKXzvSm2zzi4pY5zZ1O9apb%2FepYz7rWt871rhPCCEyWeiHGTvaym%2F3saE%2B72tfO9ra7%2Fe1wj7vc5073utv97njPu973TnawR10BMzeE4AdP%2BMIb%2FvCIT7ziF8%2F4xjv%2B8ZCPvOQnT%2FnKW%2F7ymM%2B85gcP9Q12MA%2BbD73oR0%2F60pv%2B9KhPveoFnxAAgzIPh4i97GdP%2B9rb%2Fva4z73ud8%2F73vv%2B98APvvCHT%2FziG%2F%2F4yE%2B%2B7I3ABNfTMA%2BIiL70p0%2F96lv%2F%2BtjPvva3z%2F3u%2Fnv%2F%2B%2BAPv%2FjHT%2F7ym%2F%2F86E%2B%2F9Jn%2F9znkIRHwj7%2F850%2F%2F%2Btv%2F%2FvjPv%2F73z%2F%2F%2B%2B%2F%2F%2FABiAAjiABFiABniACBh%2FftdICOB%2BivCAEBiBEjiBFFiBFniBGJiBGriBHNiBHviBIBiCIjiCJFiCJniCEAhzABYy7rcILviCMBiDMjiDNFiDNniDOJiDOriDPNiDPviDQBiEQjiERFiERviCKtgCDtCAeXCETviEUBiFUjiFVFiFVniFLpgEUKBibeZ%2BjvCFYBiGYjiGZFiGZniGaJiGariGbNiGbviGcBiHcjiHdFiHdniHYPgDUBAJKvB6j%2FCHgBiIgjiIhFiIhniIiJiI%2F4q4iIzYiI74iJAYiZI4iZRYiZZ4iYAoBcHGAyEDB1SgAgAQiqI4iqRYiqZ4iqiYiqq4iqzYiq74irAYi7I4i7RYi7Z4i7iIix1gA1kQASk2AwLQAHjQBSeQi8Z4jMiYjMq4jMzYjM74jKi4i13wASmWAwMgjGggAtC4jdzYjd74jeAYjrlIAjfgBRmgBJDgA9qCB2WgjeL4jvAYj%2FI4j%2FTIiiJQA1iQAVMACT8gLXZABu5YjwI5kARZkAZJixsQA1dQAQLnAwnwAHZQBiNwkBRZkRZ5kfOYkAspcDdQABAQkROJkSI5kiRZkre4ATRwBR8gcDXgkSBpkjAZkzI5k%2F%2F3yAUfsI80wAASgAfZOJM%2B%2BZNAWZAj0ANecJOvNgA72ZNBuZRM2ZTcOJRFuY868AAMwJMo4JRYmZVaeYscIAMqmWJTWZVkcJVbWZZmeZameAEKuZKQMJXCOJZoGZdyqZVqqZINuS14AJdzuZd86ZMXgAM2KXA7gJdlQJZ9eZiIiZEbsAM2mWKD%2BZaGmZiSOZkCuZhXgAGOuS3%2FGJmU2ZmeCY4b4JUVkJkNsJmfeZqouY0XIJoC9wN98Y8BmZqyOZu5CAIxEJjp%2BJpKSZu82ZuxaJt2mZsPgAdrEJu%2BeZzIaYq2iZs%2B0BfEaZzJGZ3IqZFs2ZzDWZzSmZ3JqZEY0JD%2Fzomd2hmevAmc3RkJ1mkHagCd4rmenUmeU2Ce8mEHu8me9EmZ7mme7FIHYxAC9dmfk8kBMeAF5amOfrGf%2Fnmgh9mVRRkF%2BFmg%2FImgECqXobmgkfAD%2BUkGDxqhGlqWCrqSFXqhGbqhIuqUAEqhBKqfITqiKgqUtimgDHqiBrqiMvqTLZoBL5qfMTqjOgqTCUmhNCAfepCjOzqkIjmhHvqjDxCkKUqkTHqQG1ADPgqkQtqkVEqQTxqlSTqlVbqlGQmlRxoueKClXDqm4nil1BgJPyqMYkqmbNqNZsoEaAqma9qmdOqMZsqgaaqkdbqn3Gik7%2BkD8lEHGMqnhGqnNaCS%2F3AKqH7RjoXaqMr4pJeZqIHKqI5aqbm4mpEKn4uqnpbaqa%2BIqQM6qZzqqaSqiqD6oqJaqqrqihdwqB6qqHVAqas6q6jYqpkKq7JKq7o6ipCKmXGapAC5q8IqipD6AXCKpHoQrMMqrMV6rECqrMuqq72KBL%2Bal6MarZ36pFXgq0iKB19wrdhaqdNard8arrRqmRjgrMJYrua6qugKpyOzruDaroTKATuAqJFQLYLqAfSqqnV5k%2Fk6ELHKr%2F1KqnWZrgHbAPtasAarkAirr2RAsAxrqdwJpxArsRPrqKGZqRebsZYKqhYrsBHrsZW6mlpgrAm7sCTbqKtZlCFbmuy6sv%2BEOgEKmQEvawcxK7N7SrOXSa3Vogc5q7N0agEOC5bycQfQKrRDW7Rt%2BazzqrRMSrQ927TASgJQW6dS66tTWbVXS6c8251Um6xP27U6%2BrUNKaVWS7ZkSp4phqxzqrZDSp4Cl6ZhuqRwy6Ry%2B6t6erdbmrdua7d8u6PciafSsreB26SDG6cQYLiHS6TcSa0zIKWA27gr%2Brjm6ZxqMLmUO6IJ2ZiXO5yZu7mOe5u%2Bap14ELqiK7gxoAUIa7qom7ozapusm6jscrqaC7sQ2qKtW7uvi7sq2qMoS6C267syCry0C7q3S7z9abyaKqjJq7z0Camj2ZYgCr2ce6ijGbB%2BMaj%2F1ruh4yoQftG73Yug38su6Pm846ud5QuR4pu%2B%2FWmrZwq%2BddC%2B7kuftqq11Vu%2FB2oBh4qZ1Mu%2B6Ku%2F0xkDWOC%2F4Hu%2BAuyfPWrA5ku%2FCay%2BAUqN%2F4vADxy9AcrAAFzBFlzAYLmODqzB26mQ0ysQEDC8ICyeGjnC67gGAXzCqZmQHBy23OvC2QnD3PqsLUzDn2nDbRsujKvDAxzDefq2QCybC9zDDfDDRdybwEutQ5zDSyyZTay3MxzFTHzBPQysUGzFh5nCEAarVczFsjkB9zi1YLzFYjyXE8AB%2FUutZ5zGvLmxpRuoYQzHp3mwbkzHaGzHaInHzVvHfNyZfvzGgYya%2F3Kcx9u7x4W8lZYbuUmKBsW4yJ%2FJtvkqpSUgyZNctNVKxJg8l8CZAZAruZ3cnjUbylmqyKPMlJ%2FsxOFiB5ycyme5ynFammCAyrDMogQMyrPsyrZ8yz5pm%2FnIysJYy76MmBqZAU0QCY6sxMUcl5%2BczMsMyM0cy7mczG47ttPclC36AdYspdiczUsJAl4KzU4Lzp4cwaycpd9szjQawd08zL3MziIpuyi7tc4rz2gpzldgs9p7z%2Fhslvp8pCIbz%2F9ckeIcmGiavwWtlQHtxAq90FhJyfJrBgQN0QWZuDSQnxRt0VkJAl5ZnjTQF3Ww0RztlPpcno7MyyVt0hHMoCn9yv8rTZK669LxCdMxPc%2BkS9MQadM3fZHLidI1XdE9HY%2FbbMrMPNQmOcXLzNNI7aTorMyi3NQzCcM2qrdMLdVWGsHOOpxXjdUCuc3kPJzE7NUwCdZQLdZCTdbdaNaRC89qbZJmTbdj%2FdYjuc3vKddpTdfPaNezXLd6XdcBqo%2Bfi6J%2FjdPm%2BKci3dWFHY4g4AKHPdiKvdjfuAErkI%2BI7aCSbZGUbdmf%2B495ndnISNn7fNevKc2gTY%2BiLdjN%2BZGmfdrymNqJWtqf7dq4uAEscKv%2B%2BMG0DY8aoMnn2dq7LY4akJKlm9izHdy0ONw9C9nHjdyyqAH9G9uJ7Nz1CN24Pd3UPY%2F%2Fyl3cmJ3d8tjby92cDSAHY6AB3i2PX%2BvGieLX5w2PNLut6p3Ekd3eufjecyzfzU3fqmjfeYzf%2Bi2O%2FA2f%2Fv3f4Njb8C3gR03gzjjc2xrbA67g3bjdDs7eEM6Nyo2yIY3dFb6Ntm2OxyrSwL3hx6gBLCCg8GrcIr6NJG7iaAri%2BZ3iALDiCJvh%2FgzjzagBMODhv1rjNr6MOK7jNB7iPV6LP87PND7fQ66KRe7EiY2xST7iKWnkKP7kyajcUr7TL57iF%2F7hrJ3lIq4BOoCvId3lVF7lYQ6wGa7SZQ7lKkna3b3muWjl76kDTQ7nxsjgGDDnIrvOdo6KFZuwsNnntU0D%2F6yLqhCZq4I%2Bi4m7tYGe6LXYqwyaA%2BYr5I7u5%2FeKsCMDkSNb6Yp%2B6ccqsk7O6ax6qPwMsXwu6gBgAV7pofK76aj%2BqQ4rcK0e6q9uqrFOvQrr6rXOinLMoLO%2B6664sVWNpCoL7KuolgiNpDh76qJOtDa51XcQtMZ%2BijyL4a0s7dNeiuldyVqc7aqYtT7LLneA5IkO7pEg6afs7alo7pK%2BuJQO7H%2Fe7smatupuitQZsu5O7%2FVOiouuLfO%2B7%2FYe69r77wDP7wIv6Q0w7vpe8ACQtyRM8Awfig5fuO%2B%2B6xPv7l6%2B4f2O8RFPrJpMwp7d8aFouSCv296et6ttByws8g2%2Flv%2Fqjbwsn7ium%2FEVLvOYS%2FMQ3rkDevMxf5uvqps4r%2BBG%2BqKyHfMyIKAvz%2BMMH5oczNws35ULmWKE3PHTmo7%2BiAZBT%2BBPGsxWX8Imn%2B1bD8q5%2BZFYH%2FP4qMvnWfYiP67WqfQFb7m%2FnfX%2F%2FbhdL59yr98JybpSLx88eff0fcRW%2F8h%2B396Ar6h6oPZUj8WBf%2FiDf94pvPeC3%2FNRv%2FiIH%2FE6n8WM3%2FNcANJ9kflrT7pSbycJru6Xn5sFMPreXviJgvpg%2F9TWmayN792de6YZ7vkdj8eQMOZ9L%2FkYAGFjHvIdv8arHvrbuwEiL%2FxmHNRP75W6TOzkLugc4AL7jMhqTvXSP8f%2BWB7z18%2Fk2f%2F5y92tz9%2FncF%2B4lb%2F0mvyji4sGl%2Bz92M%2F60265f8v7Rh3%2Bdg7%2Fchr72Q2ctN%2FKcx3x%2Bg8QTCL5eNDADpgQABQuZNjQ4UOIESVOpFjR4kWMGTVu5NjR40eQIUNuiHEFg0AaDx7gGZNQ5EuYMWXOpFnT5k2cEEmaRBJphko9LXMOJVrU6FGkSUXuPOnzAQQ9alwqpVrV6lWsWSmCiKHlg0CCD4JO1VrW7Fm0aTly9fI1UsqVZMiqpVvX7l2qIGi0FTijgFi5eAUPJlw4pN62Pf0CnmvY8WPIhdl%2B6AnXjtDImTVvPssVS4YpA1VebszZ9GnUNtmCFv3%2BgHRq2LFlg0ScAWXBOphn7%2Bbd2yGIHV5sv8Wt2%2Fdx5KmBf65cvHRy6NEly2BOvEHu59K1b08LgjqG5g%2BwcydfHq33z02Iizdu3v17pOhZ%2F2SfHf59%2FDHlh6Y%2FPv9%2FAGGSTz368EAoQAQTXCuGz%2FhTyUD7FJRwQgBWc3Cl9ijUcMLJLmQpwg1DvK9Dp8TKUEQU8SNJuAvHSvHF%2F0j6TIn1giIBRhzhm4xGuGzM8cfydizRRSCLlM7CEj80csnkJiPwwROZlFK5GNpSz7Iop9RyMxLDem1LME9DMiz%2FwjQzszH%2FKvNMNg1Ls74245SsStbIzFJOPM0CYYUGW1szT0D%2Fz9qAzzoTgDNQRM3SYIUrWLvB0D8TlZSqRRsNzQdI75x005yYAms0TTkVlSamesIUAjvQAHFUVl%2FSoCTwInkU1cBatdWmV0361LVQb%2FV1Iw1oaDS8L381NqRgG72N11WPdVaiYLUYzsten7XWoWinBbXZa7sFIFtTcTvQW3KhFTaDygq4btxy222IAliXLdZdeieId7156W3XXl1by1ffcoVtilpuAb412YG3NdjdZIfDsuCFWW2YCUkIjrjcbCl%2B%2BGJyX5UWJXUj5fhYj9H1KeQxQBi5Ww1g%2BPgtNatdmdOWX4ZL5JkPdtlhlXDOuVWPP7gyZoh%2FDjRat2gg2miS%2FmnwCuRDmfZ1YpijltpWhJeto9arbd2ghn5TorXortvcYIewn7KD67JH%2FdqkKNbbmuy2zXwbg7hvlrlus2moAu%2BKC5Jjb77PJOnvuAm6ju3CJT0cbz%2FVEKFxTrmCeyAIXCNjcson1QvuwHnlvPNEP4c8pesIJ31K0%2FN2bvXSBXadWdgRvXv2f2s3G%2BzTQd1Ad0DP7jcsPBgHnk3hYw1Lj82Px3MDGrhQ%2FsHmnY8z1%2Bmttt5M7MOrowsPtm%2Bz%2B6q%2FD1%2F8M8lXWnv0tWyZp6qLH739Ld9vav2o5qd%2FSg1Y0LViNanhfPtzHwu0cL%2B%2F4EEqBKyfAREoljXQjYET6t8B%2FqGWvwnyz4HLwmAGmUQSCxKHAfLz4AerdL8HjHAM%2BithjjyGQhWysIUw6t%2F%2FlNaAoMhwhimqIQZCc0Mi7dCFLmuKXxqgJCEOUTi3OaLqkvifV7Xlh0Bx4hPxE8UPTNFEErTie7CoRQh18UVR9OF6wihGFLXMC2WkQQNoh0YRRZE1bXwjHDf0RXxV0Y7kwaMOFLZHDckxNH7EEBcBKZ0X%2FtCNxTPkIaFjvx%2F%2BRQ%2BqciQFiRhJsVCykgoq2RQksT47LHCTCULS%2BuogylEGqJRqMl4qR9SVpPWsla58DwhjyT5aerEkPHsAHPSYS97k6pa%2BbCQwY2OBXS6LmMbEDzLT%2FsYAXw6Qme5xZqxSAs0x%2FG6a76lmeJa5TWrCypu%2FBCdq1KeSb5aTj%2BJcDxzYpc7tvLA5DXBnMeGJpr1YswENcEMXtHlP7dSmJzpwYz0Bup3JoKQBEIgDOQ8amRVl0ScLbeiNHhqdFc3HjRW9KEbpNEh1NdSeHSUMkgjaSzBIk6S9QVIOGPCAhqp0pbvJaGhcisuZxqamJfJZTlGzAf8NZwb77KlPTQNUZUkiB0R1qFHvUsGvKJWpI3WqWqCq0NRRtapoqZlbTlqHd27VnC6L6lfBJ9bYXFUSOghZFjSAVtj0MFwFgIMRKADX1MhTVgkogBuMgNe8wpJifinAGn4A%2F1hzClYShDUsYk8TNI09oABqOKxjOWO%2FKGBCaZOtrGU1g1lMDJWznt0MZhfbgNGSNjP2G%2BwABkBZ1a42Bn9DwmJdC9vYQuZVfzvCWhvAANzm1jHY6y1BgNtZ4RaGuIFrQHCTW1JYFbcgavDBc90UXeZS17pzOqB0m1vd7Q4mBF0BzyehpNXw3oRqFkvvU88VLoM0tb05oRpckDhfujQsPPfFb1r06y%2F59rcmyaKMaNaFXgHDJFcmA2WAEyyTc9bxwWaJAROyl7sJW4VfCZNwhrGy4XB12MNWIR97R4wV7MnLwSf%2BCPa0iGEWH8XFeURwjDWy4L4szcZVqZnJZjAA9v6obMeU2hnUijpk9cJAWXJbMZIxAlm5zdLJOIGyKaU8ZVw5LWk6xnJR%2FmvKJnd5IvVFWY3FDJGsle%2FKZ46JBnSwZKWNjc1DcTOc1bbmOYvkcxm4Us%2FCnOeG7NmTYDYzoBXiYgA2YHCFNrTlMKAeH6hLDng2tEcc3WfxVK%2FSM5mxlzS9af0IzJMmBrWARG2dI5f6xueKZFZVrZ8385nGr1Ywq2dNa5EgbIrxZTSg68xhRuJazzTAQvaCLWzaCCxctNIhsp98Lzv1Os8pto4cwursG%2B9SMWXGtkcWvG0Rd%2Fsi9lMM9aQ9Z9ZGggdADuW52VzBk0hi3eJBpbgzAm%2BK6f%2BA3fW297g3ONGV8LvfFcH3kCQ38Hv%2Fmz5RKQHCn71GJvLX4WOmU2QLAOOJN0QDLrCgeZvo7jMXHHUSzzia%2F31DkpccW0TMMQ7%2FvOmaFVFdQVQ5mqt0S5rXHFs312LOdc4QPNIgc3q49s8PfcIpourllQ76QjFec0G%2BxelLN3TQ1UZ1X%2FM8En5UOsjF3MenpNzondy6G5nn9S73WJGMMfpDYo5JBaIdy1w54KD%2F0u62%2F6Yrc7y7wNtOd4laWe5TrjIrB%2B9kYS5r0XnXeEluKVLGAz2Z64F85I%2B%2B5KHScwxvtfy32DnUXo5Bpm0nH%2Bhj2nnPw48%2Blbd8hFkf%2BQhHE%2FX%2Bem0jPVM6e%2FJWZp%2FuHL3REaPPB%2FTz8EgOwV4cVtAuDH%2FIiEkaRVeI%2Boj2xfkWtfxOTT8G6kd%2BRWzcaNF9%2F9Gyw9T7P1%2BNQmGK9TwjqT%2Fon7Mty%2B3qzu%2FENh5PdcaROn9C1n%2FiSC3wV9nPZv7TPfEYP52zpXxzI7BSvh3bACUrKwQkQKjzn%2F5DwCzovZ8jt7KjpyS4q87DQIIqLOSCvQYcLNRqLNy7gqiCgX0ywQ4cwdNKrRZEwSnAhA90LtiDlRkULRtkvBSzrdcaAtRLPcoIrdsCwhMsrx8DLiPsQHGyLSUMwuXKAQf4riB0tN7igekCr86zwuzSQsvjQsXRLtT%2FA0OVEMMtzD0DM8MvJKKB2ic1FEGesC1%2BCkEeVDIkBDI4oMO8AwE7rK0f6yU9%2FLsm%2FMM8DMLxOqDaWh83CMTvsyE3ekPG24kPyCw6gsS8sxfE0ay%2FsMS2u4DZwoAl%2BKRH9MLIE4EeaItQrERSZDxTbIvMqsEgCMLbwQQfQC01iEXU44DgmERatEVG%2FLkNkAG40SzJKkTUu4AaWKMoMK8BMMb4%2B7yCcMbqc7wlcAp6wsVnRMFQpA84wMbqkwGvWMafuEZZrIEDyqyfaEZv1D5zvAB0fAB1lEVYoUR43MG8E4EY4AJeTInX%2BkWdczTXGQC%2FksfLQZ2BHMN8xBtiFMi%2F%2F0JIfQxINWjIM3zIhbTHtsNHiuRHizQ6jNxHN%2FTHmsNIDDgCqXuAjfw5DkjIuCGkk9S5lJSeVyxDkFS5l1RIlpzJkqvJmDTJdWQ8naTBMuzJvHtJXjwpTuTIZNzHv3CDJfzCpJxBRWzKyAOBp%2FykpZRKxvMOKbLK4MNJ%2B%2BM5rlxEedxKRfTK%2FeM5TezKscyitBRL6EPLG3LLM4Q4WlQJufxCGeCLulRL1BOBpGQCWlxKs3Q4fEwMTZzDKrw5wIxLrNzDE1pMdWHKxFwjJDhMyXxL4UjEqwxCXRSDD1iCwETMXNwBzwTNSJtDzrM8ESDNzwzNuyxF1jyCwOTLzltNz%2F%2FsrbIMQlO8zbYcTIQzgR64TasUzc4zgSJggw%2FAzcj0zYEzzjf4ACJgrtdkvBVggufsgdCZzrxjFDr4ABwYTu00ugngTu%2B0yr5iTnsbzyugAxP4zs0Kz58bTyxgz%2B9UHPjUOXvxAjxoz7okzsizlzDYA%2F6sRRA8xhUQAwHFgUw4qfusOQuQgTIQ0BhY0BVET3GzANLczxjoTxb8T9IUUBnoxeay0G6zFwRtTwqFwcjzxBPFARr0ReiTgRMlgkwgrKP8x%2BBkzyjYBBV8ADQgUWy7ACJgAzEwATTgBKF7AMNKzT1EgSVggyX4ADz4BKGjwi80gTBYgxUoAUag0gIoADT%2F8AEmFU8Q0IEw%2BIEUAANK%2BIQfgAAIIIMf4EDfmAA6nYCFkFOlsFOQwFOLqFM0G1OGoAAK8NNA1QA%2BfQhBTVRFTdQJGFRH1QANaFRJHdQ6pVMLoABIrdRK1QALsFM6hVRQBdVP5VRStQBOtQBUTVUL2IANUFVVnYBVvQBX7dRU%2FR0LAIENAAEQmAANKNMu0IESAIMuDYU4WwMjQIEQCIENSNZk1VVdDQERiFYRSFZpZdZoBQForVYR8ABu9QBWZVVmZVUPCIFxZVZzzVVsNVdqldZrRddv3QB2lVYTmFcUMAER4AARGIFoJddu7dZ1jdYSiFd2RQGCZdcSKIETSNgT%2FwhYaT1YEyBYFDhYhEXYhD3YhIVYjI3YEkCBFOhYjyXYj%2BXYFMDYjgVZjz3ZkBXZEzDZjIXYlDVZFkBZj2UBmk0BmqVZkGWBnG1ZnkWBFViBjP1ZoR3ZkSXYFWCBo%2F3ZjhVapm1ap3Xam41apG3am12BGNiBGtiBHTjaGXCCJAABH2CEURgFYj2AwjICGmCBGVBbGqCBGYABuIWBGJjbuW1bu73ZGUhbFoABqbVbv50BwM1btw1cwSXcuIUBv01cxU3cGsharM3aHugBIpjcHtDayn1cv%2FUBzfWBHfgBzyUCz%2FVcrd2BySUCIzAC0C3d0j1dI%2FjcH1DdJYhd1k0C1P9VXda9XdpFXSOIXd693SXI3dPlXd6lXeEt3iW4Xd8V3t29XSdoXuSd3SQwXuXd3eMN3ue93uuN3SLY3uKNXtml3iUogvAN3u%2BV3uIVX%2FE93iIwgvU13fXdXvgVXid4Ai3ogi8Igy5Ygh8Agx9omT4IhU8YBVEQugDwq%2BbNAgRO4CyogirIAi3QAgZ%2B4C54YC1QYASm4ApG4Al%2BYAvuYA%2F%2BYAZWYAzuAhIm4REmYS%2FQAi8IAzEQgzB4YS%2BI4RKeYfv9Ahv%2BAjLIYR0mgxfu4TAggzIoAx8eYiJ%2B4RwO4iDeYSLO4R5mYiPeYR5u4ij%2B4SLugiLGXxrO4hKuXy3eYAxTzuAvpuAJXmAHDmEEroLmfYInaF42doIqUOM1ZmM4nmMGZmMGvuM7hmM3ZmA1xmM%2F5uM5juM1ll8n4F04jmArLoM1YIMyWGMYGIAf6NKxFQVRCAgAOw%3D%3D";
var URL_PROVINCE_MAP = "data:image/gif;base64,R0lGODlhxgLEAvcAAP%2F%2F%2F%2Ff%2F%2F%2Fv%2F8%2Ff3%2F%2Ff39%2Ff37%2F%2F%2Fpe%2F39%2F%2F%2FnO%2F37%2F%2F%2FlPf%2FnPf%2FlPHv9%2B%2Fv7%2F%2F3lO%2Fv5ubv7%2Ff3lPf3jO%2Fm7%2B%2F3jO%2F0lPfvlObm7%2Bb3jObm5u%2FvjN7m5ubvlObvjN7e5t3whN7e3ubmjObmhNbe1tbb3t7mjN7mhNbmhNbW1t7ehM7W1tTfe9TchM7O1s7OztbWe8XOzsXOxc7We8XWesXFzsXFxc7Oe73FxcXOe8XOc73Oc7XFtb69xdHYAL29vbW9vb3Fc7bGa7XFc7W1vbW1tbXSALW9a6rCY629a6yurq3KALXFAJjCWq21Y6uza6W1Y7W9AJy1Y6Okpa29AJ%2BtY621CJytWq21AJq9AKWwG5ucnJylWpSlWo2oUoylWpytAJSUlHyrSoyUlI%2BcWoycUoyUc4SeUoStAIyMlIyMjIyUUoSMjI2gAYSUUoSUSoSEjHuUSoSEhICEe3OhAHuEhHuMSoSUAHKOQnOMSmKYNHuUAHl7fHOEQmuSAGuEQnOMAHJzc3OEAGt7Omh7Qnt8AGN7Ompralp7Omt7AGNzOlpzOltzMVJ3MmN3AF9rOmFiY2trAEp6AFJrMUpsMSx%2BG1JrGVlbWmdjACh%2FAkprCEpjMUprAEpjKUJjKUJdQkpjCFBRU0hjAEJbOkJjCEJaKUdSRTpaOkJaGTpaKUJSOjpaIUpKSjpSOkJKSjFfBUJKQgB3ADpSITFSMR9eGDFSIQhrCAhrAEBBQzFQGTFSCClSGQBrADFSADFKIRlbBAhjAClKISlKGTg8OQBjAAhdCClKCCBLGAhaAEI6AClCGQBaABtKCCFCIQhSCCFCGSlBBwhSACFCEBlCISFCCCFCAC8xMgBSABlCEAhKCCA5GSE6EANKABk6EAhCCCkxABE7CBA6ECcpKQBCCAFAAAg6CBIwEAA6CBAxCCEhKQgxCB4hIQAxCAIxAAgpCAgpABkZIQApCBkZGQApABAZGQAhCAAhABAQGRAQEAAZAAgQEAgIEAgICAAICAAACAAAACwAAAAAxgLEAgAI%2FgABCBxIsKDBgwBCHAqlhgDChxAhFglEkY8DACkWhnEYsSNBG6xeCCSwJdShFCNLnvTIUuAhOQOnUAw0x%2BELSKG2tOyoQU4oSD9GjjFZQijRnRGLXArF5iKALTPlOLSBcwrSg0qWWhVINdRWAF2%2FXjXIgU%2BoQBoEpph5SKQDn2jHQpwSqiiAH5cuKRmIV6%2FchxouqRH4YmYglA7M8onw16AaiofCCFR6KejkvJb%2FEngc6JBOAmwg6wSQtXLjggTC%2FBQJQEOgUHKcuobt9DRXnBsBEJADeStdSDZsC1RyyLBIhQw5Im%2FYmLhhlBMrXswYKrfwgQ6GyWPFj8%2F1iJf4%2Fq2DJ06DA2vwuMO8%2FsIaP8th%2BLlaVx5A%2FPn1hRMI5C%2FUQFfiyWONAxqIkw4u%2FEhmGwGs6BOKOPj0AIAc%2FLACzzAXUciKPBgKpwQ%2F1nAHiUDD7LMOhwSEQB%2BCYl314TAsYkQeLvvslcKM%2FOxlW3b0hHIPLg085Y88J%2B51iD6s3MMKR8LdiI9IL9BjzTD4BPXCPVNW%2BR0Ah%2FwzIgBsDHliUJfgwwo%2Bl1ynATz4nJjmD%2FgMYw0%2BwcEpJ52NaSBPm%2FSMqCefIxahj5z0sGYbJA6us44GDNLDyj6H6OaKo5BeZ4OUrvwzWAr40LMOPYEAMAU%2FuIizDkq28eHpOvi8R4B2%2F9x5l9123TUWyKqtBhfeeOWdlx4%2F631XRD%2BSsbJObVsSRIA1oTjQwEVK9KNTqcj%2BFQY9ewa17DCk9WPVlN2OdloIVKIpkAPpQNLAs0%2F1s9eUTP5VQjqh2tAdAeLg0m4R%2BOq7hbvCHSJOCACEIk8Eegay7kVquJpvYyURoAE9aVJogwPrsDIhPxdnLFwIXgEQCD8oHbJOCM9KLE%2BadXB8HYP6yCNSIPikoGeaNNu88ndK4KNPpABcUl7KnEZ6SM3C2aDPFgQ4cBEk9GhQNABQS40P0HL1sM8Uz16k9RRNX3SJPFLrE6ptL5gNViAh2AvT2A64HTTZwo2dVh1WFcFPEf4pA8BKOgTIvaDTL6wT6bDFrkMA4n6nU%2B1OYb8AT6jLNstutNOK83hjDQcViD6GJjtQCBxewjYAfLh8NKqnvURhUKSnuQI%2BaO38Au1Js1JEOv4BMDsul%2FCR1upzp7WjQ0TwM0YIV4PFjxrMRyr4aQ0wBkCpgZt5SWxB00OwsZvvpAEc9%2Bhk9%2FXiEHA%2Btd%2F1AONF80EC3F3AhnudGutA8mTjF1ljDYOOA4D%2F4vUXDaQrf7oZhjjkJ5JoSeZfOjrNFvYRikvkRk66yder%2FtevxoSBghYMgH0cZEHdgAtjGrPNFp6nhtxAcGMveKHFbNOAfCmBD8GZEJouoRMHPOxmW%2F4SWFrY8B6R1axzIgPdoTSXkNKdrmXBId53Uhec1ElIdASBE7Pi5IDPzYwfodOMfYo4tRJczYyR4tSXTuMQjPVOCfsYRijwgQsCQOIeRdEf62wTAmss6gX78A4g%2BfCCWsVAbd%2BRQz9gskJchIKCBAjFogpGt8bI4R%2FDSAv4%2FLYoY2kSHsbj4zqWBgAfruNBhWKc3gaDNnpMIQz7U6BDqCWnICkwSLa5xDBU5Kd18G48KZiCt0QlLeF8jhUICgS%2BuLWt8zBzgH85EjJrJU0E8aGDNeSWbdRgIlzQo44NKwIA1NCPH4yBH0AY595sUyApzWkvZQrFMJ7nAHj4RwMeY%2F8PPhTEh31UEYxURJ3LGqO00WhxjhjyYhLDeJqABhSL2LnYOP1RBD4oMRD7YKi1yIiPERWNeR7t6HcwcMpzSZQP%2FejB0fKID7vwcU7iVFqoYhBIQNYLkcJR5CXaaAOHHAKMlwAlJUMpFw38QBxL2iT4PMlJ6y1oLVUKwAsIprRDAEF5AFglDXGBi55U6VXpA4ACsyMOW4b1NFPAhxJCAI9LOIAAU6VfHaJlFWGKK0%2BsmU8fn4khcG2LgDsJgUgIgItjCVY3hQ3Bw3yozdOowR%2BhEqYS4iNOcv6AsuoU52kMeLIGgOuwnrWGijS2phQas5IOBSMUUefP1k2ylBJ97A3%2BL6rE74ShH%2BmUIkRLSbCs%2BmMKDQsO1HornPgEBYiArIMDbBfIkZaUtwKZgj9mKxJJErWA2kknANBIvzBooHk%2FeN79%2BLFGB3xAIGko59EIxj65HJZq%2BNAAJOiGwfmmRU6AvYoDYnCRQl5TA0G6WSFhIswWjaWQ9ICHPOhBjx9Isn%2Fc2iS4bBOKfpyIHmhKkUOiF17J3FazmzWeHrGHQvQ1LZ9FFbH3NGC8S9CjBBisZ%2B%2FQ6g%2FJFDIM0dpLP4MJsH5qFCnLsoZAHkQg4xmrj%2FoKwT3WyEZmDeScQVmvcbmEtL%2F4ME3n6m0R%2FLGF%2BEjojsRNGj%2FQAs3dPmUfYXDAT1%2F%2B0IPuFGgY%2BZXLlK%2BXjhCQU5y4qPOdnds7NehjCg4oUwiiBT0UNyaS%2FDiEDX6QgiBrIKD%2Be%2FRAT1MEfIijCD%2F4AQH4gI8iOGBDGvjXFlKws7%2B42AZ9TN9tpxClEa261WI%2BRE9%2BSzpIOGBUasBYV%2FXITjXIAQ5zPEQIKFQEG%2BCO2MY%2B22mUIAc58IFDSjD2IRxw2y3oKRQaMFiY%2FyLJqQ7wcz3QG0zALe7G%2FC0Fih1GA0KRDnSLA85Hs8GHWHmaEjhKA3dOgT4goQHs6Zvf7W2dPoqg2CXhQrQp8JiLeXzXxnCK3vYis5AjroEyyyVtCnqKPtK8ZnsJD15bsmPM8GH%2FYNH1Wx%2Bj9I76Rh5B4ajhH5Ypgjzk4SCHyJzmoYjzWK4tEHK1CR8wWXfM5JGZxoRXH%2Frgxz8ilVZ57AMSDmn603W%2BE1z0o1X9iFoKIMQqyTgAF51aRw7lYoN04GPBVuk3Pu6xDpGone0%2FBvIh9gEPCl4Eo6xixUVg6XRl368fKOkjPiwd%2BDkRfksO6JNuICEeB2UoZvoI1ml%2BMPOZi3PrgxctRiCED83%2F5ebygEdQQC%2F6zQ8%2Bk%2FeD%2FE6TuCcFfW5PDf9LCuYU%2BqBM4R4zFztYPkXH8F2lCP%2BIoMj3ZJXhk3zZwR%2FIyVOum0uwXHQEUIIaxm7mUgI3M9FXQwySVQIl%2FoTyBWMA9EDAL%2F7vLG7sGgDu2G89hrgjZdBKiL8SWBMDNSiBSfW%2F%2F3WAIH8l8Ks1W5AG6%2FdKe%2BReXcY6DnCA2KGAwmJ%2FTPIDalB%2BANADagBi35ECSiAbXUZcoRYG27YgRcAai%2BOAfFGBW5ICYRAGrPMBYWBto9OC1zUWKKiCAzGDrBMCMLglFKh%2Fk6EGRVcEPrglHcg6L9CCxIWCW%2BB7V6EB3qcs0jd22Ud97tWE2HF9AxGF1ZeFWriFXNiFXviFYBiGYjiGZFiGZniGaJiGariGbNiGbviGcBiHcjiHdIhFXQSGKSB5XKgG7rdbwvOFd%2FiFU9Bye9iHEPWHXvgC%2F%2FTWhfEHhnz4hY8GhoMGhjYghVsYCEoIUZiohRpgWl1oA1jmhUABhqwQg1nYiY6YcV04il%2FICh%2BYhUXAZHu4iFzIil0YAp7IhT8gi1uoBrSohQySiVhUigsyBZERPqj4hVQBhrbYhdgGiLnYi6rIhYdQdFwYCq9YfT%2BANV2YgmBYjV8IMmC4jWDojV4YjK1oikiROtagD6tnEMnohcv4hc14jepoZp%2BWit9ojVuIjV9Ijl9ojl4Ijl4ojv%2FIjVwokFyIjl5IjHkiDzk3MpbYGtGohfMoivyohc%2Fohfn4hS20j2Doj14IkF4YBmogAAIwkBlZfQY5kgi5hQq5hQzZhf8O%2BRfhBROYcxAdmYi8qIWKRor3uFs72Y3TuIWHcEVeuJFdSJJE%2BY1IyYXZBoYqVY5FqYWsgEs0GZQeoQQ1llX1UwJFEJZhOQXDIANmeZZomZZquZZsuZZb8AltGZdyOZcywEN0eZd4KQOPwAN52ZdtyQOt4JeCqZaBwAeDeZhmSQhbgJiHeQpFwJiCGQaXAJmCaQZmQJl%2BaUGYmZdKcAqbmZeS%2BZl4SRGieZetwJelKZewoJUdwZWSUW5FcAiyOZvdoA62eZu4mZu6uZu8uZvecAvu0JvCOZzD6Q7A4A3EmZzKiZtMYAzBuZzQ2ZvlwAvRWZ276Q7I4AzPaZ3cGQ%2F%2FYAAK8cCd4qkOvFAO48md2UAM23meyxkPgAAI4cme0Gmc2SCf0Tmd9gmd8UAKbRCf%2BUmc7uAM2vmfykmdBJqczSCMEXGT3VKVABAM6oAOEjqhFFqhFnqhGGqh3mALGdqhHvqh6AAM2QCiJEqiERoFxhChJbqiGVoOt8CiMIqhxeAMMVqjE%2BqdmuAONmqjt1AOO1qj2QAMPxqj7gmfQwqjInqkLOqiSrqi7qAJYBAPTVqixVAMU1qiPXqlH6oOCTouELlpk0YQCdAMKqqlHbqhZvqhSZqmHYqiZcqmFcqkcCqjNDqnFuoOYJCjdmqhWbqnFBqkfkqhRSqlgSqha1qo%2F3JaqE8KBjpaqOggoI4qoX0aqFyqoBExMu34jgUxpm%2Fqp2gaqYdaqG7qqIlaqDMaqXiqp446qYEKqI46qKA6oqT6oo66qI1aqJAaqay6p5W6IFsACbmGEJwaqZ%2FqqKEaqKOKqLTqqKdaq3l6q4G6q3vqqoUKq8Yqq8qKqlAKrX6aq6vqo4Xaq1k4rI5arIV6rH6arIFaqoHarIr6rLoKroVKrYFqreeKreu6rIFqq5HqrYUqrXMqrtVHroVqroGKrnuqrn7Krn7qrvsKr98aqfTqp%2FZ6sPi6sPrqp%2FzqqP4arfLqpwJrZgQbqAbrpwhrpwq7pwy7pw6rsRD7rx%2Frp%2F8Tu6cVa7IXq7IZu6cbi6t1GrHh2qXjSqbEyqGxGqnokLJ2urJ22rI6%2B7IeK7FC%2BqrvSaj3GqlKC6c7G6gd66cAC6chu1sj66lEe61Gi7RzerVwyrR2mqrcuqddC6cza6c1u6cnC6dom6ZZ2609C7OO%2BrUQFbZ7WrJ0e7MJm6KzarRqO6dsG69QG6lza6d1y6Z3a6Z5u6db67Yxa6d%2Bi0WAa6eCC7mEi7KGm62RmrhY67Rcm7l2Grdz%2BrhzGrlpOrlaWrl2erl2%2BrZpurmi07lz%2BrmvG7pzarZ2m7Msu7cuq6p866isC6euC6ewa6aye6W0O6e2O6e4a6a6myy8C6f%2Fvuu8wAunwiu5xLu0xtu0yPu0yhu11Tq1RXu4tbqt%2FVq%2BmNu3QDuwQluuY1u1kRq%2BsTu%2Bc2q6bLq4Pjuv6luv7Eu27quo8Mux8nu7quu19Suy91uw%2BWuxZTu6%2BYq4DXy655u6jSu1RorApKvAjBq%2FRnu9Wpq9W7K9bNq9bPq8Zsq%2F0Ou%2FabvBAYy685u%2BjnvA%2BjvC%2B7rAPHvCD8ymKvwdLJymLpymMKylMqyl0XulAIy3OOzAH7y%2BIdzDGfy%2BJczAQky%2FlnoaR2ymSWymS3ylTXylTzylUUy5U2y9Q8ymy8umzfvC39u%2F2rrFQcy44RoMCaCFYaylY6ylZTylZzyl%2F2ncpGs8u20MpyispXGcpnOsxHU8w3fctrVrw2zayFOqDnzsxxNMshVssxfcqUlLw2yayNK7yJn8xmn6yGYayWQ8yU5sypQLxFqLyWmqyU3KyV%2FcGH98pYF8pYPcpIXcpIespKg8pQKcvAS8w1dswQn8w3h8y138s738F788pcE8pcOspMWspMd8pMncpMuMvs0MwlQLzT6ssbast9VMqREMtp8stkbbzUf6zUcazkM6zkpazh6sw%2Bjcvuuss%2B1subhsprqspEV8HdncpNvcpPY8pPg8pPr8o%2Fx8pP6cw%2BdsxeksytHMztPsznoMz9csFw2tpA%2BtpBH9oxP9oxW9o%2F8XPaQZTcUAzdECncUkbMnUe9BamtBHutDCcdJHmtJHutI72tI7%2BtI2GtM%2FOtNuXMUG%2FMwePdBrW9CX%2FM4gG89%2FO8%2BBG8qDO8of3bA8rcyqnMusbKaurKWwLMiyjMa0PLtWvdNYzatazblc7bleDbpgTdXki6pljdBn7cgFTLE8rM44Lc06DafVy8iBvcnBUNJjIdRDStRDatQ2itQ2qtQ1ytQ76tSMDdWELdVfHdZVHdIGPdeaW9e7e9e9m9e%2Fu9eH3a5jTc5%2F3dONPaVpfaVrLcxtbchvLb1xrdiz3aQ%2BPaRAbRuS%2FaOU%2FaOWXaOYXaOaHaOcbaOevcqgTbOFPdX%2FsU3Qpn3VI53VkH0Vyb2jy72jzR2jzx2j0Q2j012j1W3W1y232T3afI21wc2mi23d1uzJpIzX9dzbhIzBGKvBft3BGt2qg43doq3XpK24952m%2BQ3f%2Bx20%2Fd3a%2Fw3bA166w43RtX2lxT2kuT2lu83NAA7Ov63MD26mEQ7YXszfQ3vh%2ByvgOEvgzmrgNL3RUd3R9L3dpZ3Y%2BL3hR%2FrhO8rJfUzhL37TyCrjpUzj72rjT13TOY7kM67FPg7hQD6kQm6jxw3GrM29ru29GD7lzHrlnd3hU5rlNhriTTriEF3i%2BXzi5JziWrritt3iRo6%2FMO6o6Q2j682i7R2j783iUB7a%2FzrO4PUdwHJ%2BpXTu4bet0J0MZAQQ6QTBKA8x3jZa3jZ63jC650sK54hM5tRt5sTd6Eqq5krK5irt5hTt6Rid6FO66GdO6sat2g8BY%2F4jDlYBMgJigWLa5S385XQc5kuu4QVe5YKO44Qu5cOe0yb83XR9zR%2FiSK4AT%2FjABtaQDqZo6TWK6TWq6SzK6Sva5yv65zAa6HU%2B6Ape6K%2Fd4Pbd3XLt7Kl9zXJAD40mEEAkWQdBAL6OxMAuycJ%2BtqwuzqDu3qKupGgOpAku3wu%2B7oeOt67epLA%2B6nbeEmUiDuJwTWnjHeE1GGHjNAQCoeUQ8iI%2F8iRf8iZ%2F8iSPDtnAoSjf8v8u7%2FLoYAsj%2BvI0X%2FMi35zqYPM67%2FI9uvM%2BX%2FLoUKXo8PNEH%2FLqkKc5X%2FREfwveoPQ%2Fr%2FIs7%2FQ7zw7vyQ5Sv%2FMxP%2FNXb%2FO%2FufU6rw5QmvRe%2F%2FJBb6VjX%2FM9f%2FYuv%2BW6IU9hAAnE4l%2FOMweiwgp2f%2Fe2wAu3sPd83%2Fd%2B%2F%2FeAH%2Fh%2FHwuxIPiGf%2FiIfwuEn%2FiMz%2Fh6bwSZoPeNP%2FmCzwuFT%2FmYD%2FiLn%2Fmcv%2Fe8kAWSIPmdn%2FmbP%2FqYX%2FqmP%2Fm8QAd0IPqp3%2Fio%2F%2FqJH%2Fuyf%2Fi8IAlZ4Pq1f%2Fi0v%2FuCHwu67%2FuAzwuVUOSQU0oZUwP6oPH1E%2BnOLzEQKrH9HstGi%2FPsnrb%2BVtq3SK%2Br3hDfc0r1gMAOyt67Af%2BjYA8GFY79kQoOBw%2BjvLwTDRBtGeSKikdXB6HtMcrtMertKwruJQoQ5W6hI1jQ4EGECRUmLOZs4UOIEd2B0eQu4kWMBW%2BVy9gRYjZgHkUmjAcIULyRKQsCy6ZSpUCXKd1pAmMxpkhnDm%2BK3Lizo7pmDgAMJVrUKAAH4tL9UMNPDQBc64qEkhfiKIAEzdT57OjNFteOLMFmjGJs61iIMNFGbLgW4sSKbh%2F2lKsQZF2FJU%2FiTSiW70G1fwvOrCnYYE7DBukaBir06mMARcThuwepAYAa1vTJC%2FM469nEXhOvbDkaXVnQggMnbjv%2BGq7NxIsN3x2tF%2BVov4lXCyYM2zBi07L%2FNoYM2YGNFEWPW%2FWs1bRo07kTox69W3DrxK%2BDcxxNO7Ht6KV1D3RN07dg4KOF8yVe3P17op%2Bffw1v%2BrTZ6uRHYzesXT33xLwzDDzcxDPMOr56My292AAUrD34ImwuNcGgK9A%2B6sazjz%2FeKDrvr%2FX4ElAwAhOTTjX9%2BjNvQZ3%2BGw1CCWOMz7nRLDTRQMMyPDBFwzj8y78GTRvxrxINO%2FEvBPFScDQGDQuxLhhljFG%2BGum70DQdUdywxf483E7IkGoz6bYbTUuyriUTa1KwJ%2BWKUsoIqQzNyjKxxE9D03xM0EsXuwvzuzH%2F68vPtDR%2F49JJB4cLCk4p5TTMRiNxFCxLl9RxJx5M4%2FmQoDPr0vOgS%2BM5K1QKMwISUTBNKxIjUlM6kq9O3SoUvUPZTJS9RRmdksY57XuVL0plEiaPKq64goxN1Ck1Vrc%2BLUgdO6qoohR3uumiWGFKvejUtTKFrc2EtF2oVYOGfNatVSPqpgxsxYXo17qYRWvWkdTJVFN3CVozIXJvEq7fsd7UtThHb1L2YIQRRscbYtzJN9yY4D1I4ZuCFckdQ0RAYGOOg1jlPHnRcpYgdWYwwIA%2F4nlGAgMQkOVhhbgdqxs3yCBjkbPANcjSbjJSxxCbJ0nNXHTcCSecbgP1uZsN%2Flr2BOa%2BJIWVxx9XVMnSWuKwmYw%2BglF2oX13ppmMM7CBOiLZfra5lLM9EnjgCblyp48cgrD77rtzICOcJGgIIluMlK0lYqkRcmeTHHK4YieLO3LnD44RkCDyE55JLeSxRkZHnRw2JkTlDRBQoJa2DZJZ7k02NkCEbrbSmWSagzCH1SNOLoNMdIZU1pAZAB8r3YfU6UZjBNgeyS%2Bo81X%2BLOu%2BXqh0fq2uFx03Jo%2Fcgi7CETfsZ6WxoOVUoFco7RxOTnmtt%2BE%2BqmCX4rmi5cgjNyCHcDzY2JNNEVInmCNmIHxbQ5xsBuJDSOMClwrriaBrmzgCx64AG3WwgxfuoGBq%2Fi7lMAo6zF6islQGSYYpCGIKNBS8hk4ueMFndQ4Bn3tG6EZHwNP5xB1ViNwiLPI6ddSiBQZogamcsDE34G5EwmugBHwHFuA9b3gbM97OPPisJwLDGyhpnahMV0EK9sxhOxNVFVNjL%2BF1g4KBuVQ4uhGOCnJReJYiYNGkNxIacsx6CDBAFfLHPZJhw34ICN9OyGc%2B3HElfeorCvtUEo8uiE4BCuCYAhjAyCCEo2kIwF9E1LGJ7%2FnPJRIbjCE2NsCK3UkmUNiYCGoxDzYGoWUt6FnRuoEIMTzBDZvQHkHCsYg%2FEEIYf4DCH7CxiT%2F48hmEgEIZNrG5ZwRzESTzRDCb%2FohLPdDCYZuwwxN6SYnNbU6FLHQh6UYSQ4O1MHJBcB2ALAVC0MxjEp%2Bk4BU1tUWCuOOHCAgiydxBjmWksWjC2JgFnmFFJCotcEssngUXkYQncAFpm%2FPEE56QPXQQgxZu0IEJgtAFWdhEHWdwaCkmkYQT5MANrSPZM8gQhBMEIQ7P0KgwTnqCExwhDtjgRTw3UYUZnKAFUEBELZFJ0Zi6wXLffGNH4pEHjt1gEbX4wwk4RgkIXvAa1wAVFjGlx42lQlP4mhgFuQpFDaqDF%2B2A58%2B60IWnQRGdlcoVIQnGq3DWQq6TsF4f5FoLYZgDEXowhOU26DAOAnQei%2Fgkpuxp%2F5OvHrZolloGOaK6FX1i7JNtNIgBLSlOes5jMKWYpTBItokWxG8GtXCYMBjQshmobhNJaBkZRAA%2FBNhRGAowgBGVpUoDkDOHdGQALcyRhPgh4Aja45znQCc6b16MT2iJRx82xkjJka4nypJFH6T1B09sTh2pSCQCTGCItG5lE8SapU%2FlCUSUqAMbk%2FBCE8qwiFw4LBh5YIDk%2BrAIswV0L0sjXhPj6QmOUQsd8ajCyZJAQT3sUY5u2ErJWqYC2nJMB0hzxyqcGjkTpMJhviAebFlQid0tgI6whUKDa6GC%2BKkguY4r6kAvPIRwiGoetbDAxrpgE3c8YxFkqEI0tyi8Rf4YYhPPsAOypLHHVKTCDV1YBElJFo5JxKELhhCGRmthCEPU4pZN%2BMIkfOqJRSzCd%2B4QBiKuZYhg5O8ig3QrVuBqMGXFIxjWmwQqlRWOOHihDFUWxlkJgY0%2BJEFvGf3ZEDbmgS64QXvhIAROZ8CFPEjjLOoIhyGgMIM9K6IJXRDa5roR6BlUgRC1lCwCQBkTy0JEHbmw3iZ808EGI5BjClYBn2tMOXTMs5S35qM7grAxQ6hsjx6QRjwIsbEdcKPAhw7dxmxY3BUe94XfXC5aUouAMlz7dhuhdBUmd7KNQSHGUICtAY7gsFoYOnIt0HDR5hnEHIaWjoc2xDz6ANusUv%2BWJAJdM0H9SzIdbOx2wrvwJOIhawRsIAgKDja0E34EeSPAhuFQoQeOAINPxjiOOciDa%2BmIhHhgQ2PY6wMp6TgJo11bBUe48Ax8aqoWb4uwTISNO%2FLQ2Qb%2FgXgbk0AXtFsLOopA3h4QhsYUcO2NtUDAOUR6wvuwFQKfLAgB59hwlVU%2BlN0mDwpGgAXi0EY2u9WQBquF9WwIu0l64uB0bAHWN7aBUsyDtRwzwAbMqELYtsCv3fi16jzwWgMMXBjyBncOLFfqU7sk1Q85XD%2BPqL%2B%2BV0AP3VhEjesYD2HcWgKE6EMe5M7zRYRDFnu0gz0gF1t7pI5jm%2Fg8AvRwDShYQAL%2BhjhaA2Mrqm1Ke8WOq7bcAIwABtSiDBs7QTd4UY7HtUwCiWOkAbpgD3LT%2FQjxkEbEeW1KS707Ht1AseQqYD27%2FwHffNQ3QpKoEOH1l0LGTjoa14mAFqARuKau8jPmH39oe0AW83iGCTZW%2BpkzJXtABxrYGJTru6%2Bzh1Q4gjNoBHdIBeILH3twgypwg1qIh5lTgWewh2e4NlfzCHq5iOYiPif7oC1yh2PjOV6rAsGZIzq6gm5QMAVoNvgzm26QNwagwTy4lDjqpzkiBIehupR5HI6xAF5DuXppqza7irGLiRwyO40iKLWDQI5pAaQLgnmoAhHjuR56H8mZgRloPjv%2FEJW5g7%2BmKwP%2BG7ocCJ06uhRPMrXyuw%2FKKjULeLydKbuNQQRiUId5SEEPwIZnuDU0xKD5mz57mScumIfMQ4ATQIfu2pg4QAeN2QBacIhuWAV0eIZN6LsqwD3jEqdpU664YK4r2JggcAdZMDtiQD6TKz17IAQLwLQcGj5GnAStKkXJibRJ2KMhOEQgUkARkAAVoAVbGD3JWYVkmpzNm4QS3InzCxd%2FoxB1EIZmKwV7iKMu4L9mWwSUcAdfsB5qUSEo0Cx3sL08uEZTrIVSkAVcPAN7sD1GTII%2F8IV22MNFTLoq6Ct7sJc4cgJZKIVaiCMyCCSJiDmJoEVyeh5q%2FKRU%2F3gGXEQAg8NDBFCBReACT4jBpEuFbiAE6zlHN9gYFdDIPmCk4iMwjiGDZ6gEFgg3URHC7SOeKhAGYWAtA9AkkQg7QmrCSpHIs%2FM04plCjjmDzemuHBAe54I%2FmVQHN5iBDViEebCH7kqCGbMeO7CUPtjCMrAHpGJEYZgHY5SAU3rDxFOJxXseifxAg0Ajh6HCDaCpzVnE0QlEYMOx%2BauneOACG%2FPEBUiFgPOAGjsC1TuCEnrALsgBXrs9aOMm5IKh3tsJ9SIeQrCHeOi7IDg%2BdzC5DTiCPEiFKrMIdWKnaiGeOEClz4yuedA%2BdMCGYPAFb6iERSCeRbAHYZgcfyLIm%2F94Rv2JRsMxuTJAB6eSAK2iwjo8C%2B7bmJRRoTEsGiHYmHPsu%2BBCgCCIB0yKHwnYARBTBzIIrg0gg24wyec0ACiwTcYzyLeYv1Mcl9MTAWHQFG7YgY1xgnjAQwlgPYfBKgSoN3t5go05N6qrJ3TwQHScyM0hhjNgSXUQQnv4PdahoGCogjw4piR0jCVkwjfziSd0tij8ybVLOEmLhzcUAWwYrMmCrBzrhlTog2tLAnughFIiLnSQt6ycvyt4hlqwv43pA3sQyzgsS%2FSbzRslE3eYhBbogk5Qh1U4NLdUB1Cs0VszBLpErwHDxS7QlI%2BMLfupAlI6gVacKjv4Nvjrvk7%2FTEzdY8xRBItSk4A8MISD4rlKQL6Z4xgGaAFFs5SZ6yElrbFpIzgDtAftU5ZJqIIWYBmOMbhv7Do7dEZ%2BsyTdBJX3m4H3K8oKY6Th9LTu%2BxwVclLlZE576DsPUAGYaoEWUIESc4da4IKd%2ByTtmoQhoEE6coMA3QBPPQEVUAETKAM1ixnyfIh4sAOQbMY4s5c42JgkuI1r0IPJwkN%2FajD7XAXIOsoJuzARmNUW2MYABSVi8AIDRdCtVIFaspd2itAJjRu0uFCJy9D72dA%2FVJZVUMb1nDmbRIdFQKl5E1Z7CFZGJLV3e4e%2BW6RFUh0uyNHJCiV9O9CNoQExOpjaWR3R%2F%2BO5Vagpd%2FAEdpVLBECEJ6UnlHCfvDTSydkARsIynpMcWbgGWqixBbBAdaDFMM29JSXTW00Jgn3OjWkCdigaQug%2B6RuwOkWmbmowdOg%2BSuBT9OqGBjqZ5bs1QqXNQ73NRFU1glqFecigNAqH0JIAjEOAPnAYgiIEVIoHT9hCDbtUi3CH5USAc8TFJKA0dEiFGkWaZxCGTsAGT4gDFSqeTFTHZ5iEMpC3GcBYBCixo5GrM7qYXF2IeDg92xqMMgiCPlhPez0wgijWY0VaZUUyyHrDZ4VZbAtQJ7CIa81W47SHAp3Ibn0nl1XCcJ2ROAwXnjRXSkJXs1k1pMVAVN0cWv9EAIujOhWt0hOopXjQT3pSB3mTgA0YXg%2Fwy6zUUYF1CRTsGGEIB2yo3U4kKCSwhWrpuwFaRLAclbq8WCm9DaQLvlqor4JFB8i13W6QTNtL2U%2FcWWorUwtFOJg9AbO5FGHgrByYI9bL2TvdGEpIr4VEgE0AWnrK0ZYRAT0AsWs7WkNN3YPAzYkhqAedBAmW4FIYMHt9O8Bxh%2Fk7gVLohlpQIRjQHrDNVLK1h5mzALXrhhmwABXoqxOYnEmwB3ugsY1hKtkzgQ20h6OcAXeYuQ3Yv2dQAQtogT9oWcMZXPSTSHgrmmewnzqq1xFFB24Qg43JAVKV3M2xzw%2BMhyqVne7%2Fi4NU8ARP2IRS4EzvHMiIwta%2BbcnPfT%2FWUZZnKANC6ISFchvTPV03Y%2BCJWV3Y0VAqTNcLrUPZhcMcqzEJ%2BIPz5VUEUNH32wCWqhb%2Fy9z5K4NweAZsqIVgeAYxQl5UEyWXNbmuawEFE4HDu2AWkFcDxDxDTi4NhlK%2BnVIL5hj%2FCYcLQ4A4iIdrqIQH2M9F8F3EVFn2FUUjBsHu8oAyOOZj7sEmg4IcEAFPyIcZIx5EMOGk%2B5priyRRwUUQjYd3C1AyaIdlCIY9ikhlVAZ1mB39Ek%2F0I6jnHCByFS6NQjgJ8ADrsQBXgzZMFVvmRIlrk4AgCF7Smj8LCAKQQlUaZkS7%2F2m2MQyHa1O47tuA3dsWJEY%2FeIyDnhEGdZO40ty8S1mFDBC4qYQ%2Fc5hcYeVDbIBRe5i%2FcbQHvhuCPcvCjUHjzl3jl%2F2DeVhXYJuHeRC%2FhGvGwLnj09XJq%2BFjnzzXP35dZF3PN2SlZygF2gyGfbS9Yf3fI3gG%2FuGYrKzSGTjfZ2gBEQiCVJgHTlY8T54eUI4cERCwzcFL1eG5r5vGCGPlhL2dASswA7iC9JIF1cHrGYIf0sqJ2lGduqMj%2F3GwrFuZlnmZ9h1m%2FrIxycwU4DXF%2F3ywNC0Ddh1kf04CdEhBU0sCpLMDCurm7jJgPYg4g7tHHdCBiI4JBxYbVpUfUFIHeP%2FsyaJBBK5DABEwuM0xGQMAwqLBrTHcLsIr4GfDhr4DN0YEsR7eI%2BROAuIKBsLrJyQEwYkOl2CIZNxmyqq7MxVSgCA4gj0i5StGgKLMIwUTqe5jgLB%2BUyjoA%2FdMuGeAaQSQaTUOz5pGib6zgCM4AuuxI3DF40KqUMck6vQzaiRtQUOVTo4xgRkIhluT07k9sHgoA%2FjZABdEw2BoNlGVN0f20IDt5DjcikUYgllVAUyrsmdRB0pIAhSY1SeoJHWQBiytgqHanJKDgrNDQSiAAkwVni7Y8WQ5nB3vTXRoiG6oAmklg1r4cRpXyh3Hn27gAiiISZY10wDaGLQkiHg4A7%2F%2FroUOm9cyUJZ7rDsxql3YqoJ4okkMp0Hla1VRKUCO6SOuaO20XARCwDI8xzJCmASCmAdafGODkKgbhwI3QHGCmARCIASv2ZxNSHRvMsodLyZDFx5DwNId%2F7OaYuI8iPQqWKZJS6ZIt0DGBpXq5pdaqOXIMbwGG7zgsgCU262anDTvkRwPwLeqXGu64zmUiwdycz6UIIYuOBn7xrqUmcaIk%2BUat2MJBfA8Rh%2Bgo6OeFJ60WzsDsABJg3UEqDKRU50N6IbQPRkeCrrWCQeTOxkd6LvbcQdE6ADB7jobwpiTaYEdLWuVcJijobBScRhbOBp4iidNmRgRepaAH4yB%2FyuC%2F2iIOwsHc8Cgfy%2Bagb%2BgNgKnbwq0JPC5iRGGJxCCJHBKYaiCExABkD%2BCTtucRfBqEbC6S3oCEwD5IMCZBsuDJNh4CvKEGQD5GciDj0oCBtuuZhaB3tHjAVtaiYBaorcI4bm2GzsIKQqVxCoafXL6fj%2BntVIrbwkMqQehrvKWiC91fnmGM%2FDqERABjitB4bGDmhcBFJAC0kImJ0iCMIedKqj4VUgCmzeESUOHPOj5k%2F9AdfiDmPdtXjCEmH86pYz5ZNknLlABkB%2FSZFd2Zkdd9CGyOIiDFTMHPBADO8iWZ5j8PkAa9bKDOMiD1tmuJ7CbLrCcPLCbI%2FiDZJr8Z0AHMf8arzgwBHSII98m1cQ1%2FbXPocmn%2FeQVJOdRiHLgheC%2FDp0ofjRpTCd8oq7iBXZosGrpBum3FNMxo1aKpzBqnVfTp63oBmagXlgjGdg%2FI6AP%2Bv2SoZOyWbUmDTOhmgTh%2BnAxGunXImm0COkvhmvwjaePpwoKIzQCCHQCBbpD1%2B2guoICE7pTJ%2FAWQ4foIg5MGO5guIYDN3LsWLGZAwAiR5IsafIkSgAJmkn06PKlx3gyWwokRyyeQ3UyFQqUGa9iw4QOg7pr6G7msxY5jniyZ69bCwQINikUqk5oxZ0wt26MYowm17Bcy90Sa1ZsMWdn1750B0YTT7ZyH5bbePWqx7v%2BHfWGVZcN2Eu8c2HGAwTo5%2BCO7oIYkIqgClh0wLIlnku2slx3msDETcw3MDpnatcKzlva5a26fT%2FPVQcyJezYJ1dGxszVmy3bLtV189B4gxs7M6RuEFZbt0uvx5F3vMwc7ejnW93Clc41tfWtf7MTNoxYtzs3M2bkyBMu8mTuL52rV7y5c3uBouN7xE7%2FY0jZ%2BmPTvr8Rt3ru9OGYAY1JhQd88Snnn0DsMZgWgwS9lWB79jG4XYSFHfZcSxp1lF6EDt6nGWcRhhYdgxbe51p%2B%2B7loUn8RAqieOps8cQKOJxyhhzcmorMggyLeB2GE1FGonor3Ycight%2F5B2KQZRX%2B%2BZ6J85mYZHwsvrglSTEyOGOA7hx0kDvEUGYikP4JSR%2BRDBp5pWoXApahdyZCqaaUblIZoZURYtmellxy6aV%2FYAKq153%2BpXnfmvG16d%2Bbfsbp35L%2BNWnnmVGaSOKR3PWZ4qT0BSroi4TeZ%2BiTmTK4KH2NtvfoiBPCaWKl910aYaKt5gnpngx%2B6t%2BfNL5GaqksmYjqfbnSx2p8rqoHK32RgkrrnEzWiauqjO46Yq%2F%2B%2FXpfsNyNSqx%2BptKHLH3KKvhViNsOiWKs1UlKrYm3Mqiues5mx2mV8IIbapbDkluusTLmhqmPzLanb3bQxictsADHVyt99qZqIsPS8cunv%2FT%2BhZvduCgVEUoIIhEQRih8aGAyyiqjZG586MaHr3oK5%2Bsumx23B%2FG%2F9NK5IbYY47xzt%2Fd967HEwraIkg3p4JOCSHXwg8s9rhAAAB9T48PK1TAW%2FOXBQaPJrqYmOryzrPNGSHF8Fiebra6bFk3f0fF9bF3IJalBDz3yQO3AOqwAoAY%2FPwAuuByFz%2FZ1oWHfC%2FeyZOPp49kBpj3t2tVaeu3jQstdIsc%2B3i1d3iSFIschTwPwwj6BAABEP2GksA8fABTBTxgnBdBMp9l5o%2FmTPY7du3QZS1e35aAQL93o0rHdntvpQr7w0AGCArqvOle4qcAnhcSH6j%2FwIwcANoxvPvn%2B4pP%2Fwhbttx8GLaLJPz%2F99dt%2F%2F%2F3FxII%2F%2F%2F3770ws0vK%2FARKQCb8gIAL9t78EMtB%2BtrBFAyMov2xkQRLZkKAEA4jBCOpvgw3MBh3ocEEPJlCDJERgB09IwGxIIgsjVOH%2FHghDAi5whv6jRQJkAz6oqQ8APeAHHNAHgB7%2BQA5GNCIfioGMYjCxiU58IhSjKEUoAiOAU7wiFrMYC2BksYtedKIRMvHFMWqRjGaU4i1uccY1NtEZFVwGG9loxTie0RZzpOMYnRFCZ%2BDRjLGwRR%2F9GMgxLqOFfBykF9OIyC%2FecZFTRAYOdai6F%2BjDdUXoxxZSUEnbYRIlvDsW8JIlvAj%2BeWV5z6meepDHHbcob1aZqxfngue5Il3PlMxRJXdQua%2FuoWSHAHCAOIbhgEDw4wUECOYw9%2FGCxS2HOzJrD824YzPuGO85lVvl5SLmM2sBrXPt%2BpwtkYPL7DSPOaUrSSD6ATUAhAEf69gHJEQSBn28M57MPJbjLja2Zlqnmsy55r6y2bNX%2FsxJb5ulnrDnLe0hKWni4uVJXjCFFv2gDlPo2hDncNGXMe5U%2BTzoPr9pNoYGVF6YkxMsu6nPsiU0nLoZp3XKiZxzDsxr%2FLTOM9UTzexMMzv%2BRA5ArcMzpG1zcyoFKUt5pVCjkZScDgUZRGt6T4P5aKfW6Wk%2Fddmwpmr%2FTKBEJSg3DSo9hCrVpbaBKfOeireoSrUkMGtPTrljVelgtXhatU5Qu2pSbYLVqGKd2fRuBs5%2BiU6tpGNrW0fyVvXENTtzfU5dn%2FNT3eT1OUO1m2GdF8q2xRKpk5vSUunG1bRGiKaJVUlHz%2FXRsYY0qf6pLHMuW6HMPud56okeYMnKrdDGB62npO1MEXvaxTpztblt7WcjBFvkyLahRbVVZ1nr2mjNrbej%2FW1phZtY4vrOuNAMbM0kpy3KXZe5XsXscysW3eNO92HVbY9vmSNT3Zh2u6mNmXd1Cl5pijduI93UeWebXs4eVbrJLSthXemf%2BraVuzjNr1z3y9P%2BNuuu%2FtJZLngC7Ny%2BQrfA7D3wbs2KmfgiZ762YbBUHSydxlrnscyJLHMmaxsM26a5uQQucmzLHdx%2BV7fU5S18y1tiHJ9Yuw2%2BL1wh7FgJX5XC1CMvgPc6UJQWFGEibWmC1bZgI6cYyYxVcouZTFcnC%2Fa%2FRdLwjQcMvfX2%2BMoIDp2CV8Tlmqr4OSyWjouRA2PkyBgzNMaMjZ2q5tuyWb8%2Bdi%2BQUylk3ZgYMyims5eLW1UxQ5bM1LSwNRcNaDQLmsPq9XCb20u0RHtK05hpdGUePbA6M%2BfOz8mzbvasmz5X5s%2BVCXRMiWwbHWeHx4Z2c4izfFI5L%2B20bo10dyedMEv7FNP%2F%2FjR1YnBNWk8T%2BK%2BhBvGPRVwZEjNa16me86qR%2FWBlI3e8ZnYTp3M96B0XOsKHHrW2E8Nt26DaM%2BAmF6uR42rmwNo2srYNrRNj62ine9pUDquVRR2g9yq6sNkttrEVK%2B4VgxnPlH4xs7MK5TNL%2BasH92vCsY3oeA9m3qf2tr0hHnHU3pTi5CZlxu26cXR3HL3UXjOof63wVTK81A5nkKrxPXE7V%2FzVF9dzzCXrbKBCezDSxu7NCZ1zdwM728Lm65ZVHvF862bfyOk3Zv6NmYAPZuBOLzjUP95ha%2Btc5PC%2B%2BpSJvXKb4vPlq0p6jJdO2abP5enyRXlieG0dX1N95%2Fvq%2Fnl2TF6Zeg8m6MTium28rhuwV0bslSH7XMzed7T%2Ffd29bveS371wUiee73NhfGvu%2Ffiht7ro%2FD56rPHOZ73P2PRs8fuQPT940IdZ9DwnvXUUnxjUy8XxpII8ZiRvG8onxvKJwbxcNJ8Zzuc%2B6uyeeuirPnK4e1zuc%2B8S6%2FXt%2Bq%2FD3t%2BynzXt%2FWz7teC%2B27qXDuGzb3ihIj74618L8dlifEEhvzLKxwzzDYbzDQb0sYX03R71uZ%2F1fR729Z72vR2caZn3fZ9I9F9i%2FF9lBOBcDKBlpF%2Bt3Z9ZtB%2B9Ad5gCB788Z7F%2Bd7hAd%2FxgKBZ5B9pqN7xhV%2FXjd%2FklV%2FYnR%2FA%2F3mgwLlgWIjgyb3fc8SfA86fxtRfC%2F5c1lGgxLUc0dmdoujg2PFg2fkgVwDh4pHgXJjgEKKg0akg%2FbHgcwjfYMDgWezfoNBg5Nng8uFg5Unh5VFh5lnhdCTgCAohcxBhCj7g6JHcXJDh6Wmh%2Fskg%2F6lh8rEhALph88Hh88lh9NEhTGDh8AkiW3BhHnrh64HhEYrhLUEiTJihWaDhlljgYGBgYmigXHCgXBTgWhwg%2B9lhEC7g7jXgHhqhZSHhGHriS4CiWIhisThh60HhfagiW7DiWbjiWUhiGVLiWlgicujhF%2FLh7%2FmhXACiXPBiXxgZAYQARhGANzZA12yj1rFc3f%2BFXBQCI%2FrNHKTAYhbi4TNiIvlp4i1yojjpImowYygaGR%2F4jUjYgDWIgziswxQAQArgAj2IgxJwFDrWoDBGzkJOoTrGCzWyBTaGhTPqBjRmojSu4ESuhTVSJD72onA5AB%2FoAz2s0xbwQyhAQij8AACEgjyEwTCsw8rQHVWZ4zAyIgE6ogHao2Kw4yS6I0bC4w3KY2zhYicq4QSeBExaw0mKxCGsQwg0gEiEwD3E0xT0Q0KaBAGwxF18JViGpViOJVl6AzGQJVqmpVqqAzF4w1q%2BJVyqg3LEJV2OZTnwQl3mZViKhl72pU6AASjghF%2FmJS%2BUw2DmZTac5WHSZZMsJl3%2FmoljxuVdRiZcxsP1CCZlqiVfZuZaFiZnqqVwqcEL%2BBIA4AI%2BpMM68AEBmE8dDBE%2FqAEAEIAGzOZshkAtUANu5qZu7iZv9qZv9uYvZMJvDidxFic1ZMIvGKdyLic1MIEuMCd0%2FiYzCGd0Vudu%2FkJyWqd2doMVOIJ2fmcmMMN3Wucv2MJ4Vmc33MEddMN5RqctZGd7Lud0xid0OoIVsCd9Kid25udyhid%2FGmctjONI%2BFIDsAIrTAEkYJIQic8cAMAUGCiEhoIVMAGFVqiFXiiGZqiGaqgRbKiHfiiIMkGHhiiJligT%2BICJpuiHjqiKtqiFGgGLumiLRoEP%2BEAUyKiM%2F8Yojqqoju4oidKojfoojwppi%2FYokXookN7okZIojC5piRqpk2poAUjSOo2EBshDKCwoP7CB9wSDj2QDIlaGLSjiYDCBMZgIOPBkKxaDiajDWzzkqYEDrYRp4xkGnIopmcpFmrbpZtypwLHplchphOij6jjAFtjAL8EDyeDDIThoPwykTX7JZn2YqPyITloGL%2FjIR55FPABmR55FYQqlbWRkPIZIpoIW2%2FmciYQq0BlZIOgD1GgAPIhDERDTFpSmQOKCPJRMpDZOQ66Ln3ZgREYLUC6jqGIGqRblRobhp5rFpp5FRW4Fg8nBOqxTEVgDPsiDaq7OMLgTpPaqR%2F1qe%2F8Q41oYo1kgYwgWayAea2UkaxsaJXMhZT0qpaho49I4QArUpMnka0qQ4lyY4mCgIluQ61mYK3REWbOKRbRqx6RKXarKn9v1IffZ3BIyITnepNjAXLCuopoeo09yhDKuqyyeIC1Goy0eJT2%2B1MdyxMIGBiGm4cbKBcDOhcCuBcGahcGGBbqKRcheY0iKxUWOKlG%2B67JuYsKGxbO%2B4M9yhS%2B6iL%2FKLJ0GbJ6m4qVy7LA%2BjLr6LLsmhrsmIryCh7yqLL0GjIDaV8yyxczKRc2exc2KRc5yxc7%2BYNaC5NYORtdm4NSWa8fybNie1cpuRMvuxsuOoiH6X9TSbN7abNUW497%2FHizHHe11LC1XBC2yDq3XFu08Qu5WJK3CSi5MNO1%2BPC3aHq7aJi7bLq7eXi3a1JyAjWwXlqxGnmy8pqzfji2gDO4vlmPG3t3ZFmzj6uzfSgjrbpjafdrDFmHETuPEtm7FMqHorkXassXamkXbhsXbbkXcXuHc4p%2FnwgTltqvl4u3X1ljfjljw0sXDWezFgo24hlfv4uzvwu359izduu4lwm6pyi7Y0q752q7SqO%2FznkX0rsX0ikX1jkX8Yu%2F8bi%2B0du9LfC%2FXhu8pmq7bJnBblO%2B2nS86BG5e4K7TFu4Fkq70UrABo67vqq7lDG%2Ba2e874q%2By6i%2F58m8G%2B%2B9Dle2R%2F72vWQzwWRRwWBzwVlwvTGRvHapwpxVvteFkhQ1WBA5bvdpwl%2BGwWOiwWfAwV%2FgwTADxSwhxJDKw0tbtXNztBI8voGGwvGkwB%2B%2BFB4cuCJeiCBMwCfewCcMvCmMTEasbCw%2BlCxMtDI%2BxDJcxDYNMMOSQxQZwDrfxDr9xFcdxBc9xSWnuJzqwS0Cw3Uqw1IrxrZFxyZkxJO9FMDgxpEFxWEixWFDxVljxelhwFi9wHRscpTTs9R1vLSYvRy4v8S7l9xFyFBvyFCNyKSuy9aKyS2hxW3Bx53qxXIBxJWMuyjryS3BuWJwxR4AuwYDybejyKPMyTJiyS2BxMKsyM9%2BjMf%2BzBTIjriVHGyb%2FoSan7yCv8b9ac1iQcjb7MgIzslAR8zNvckdI8hdTMjkr8%2Bx%2Bs0c4c%2BSqs%2FOyM9S2L39R8xUDs0cIs0vQL%2FeG81qMc%2BmWs9OdczWmc6t6crgpNEyI8jtj80tos0dwc0N7c5wpiSszICybrCwzKy2vcPNSIC6HsjtzBTyPtDz%2FMEN3hEN7BEQ3sERzKj9XtD%2FvL0B3hEBvBTTbRRpPs%2B56k8Ye9d4hbErThz4fc1GPsEX3HUazxVI%2Fcml1MgAb9Ogi9IR59Db3NEf89E%2Buctq1ckq1dOy%2BtNHGdBHb8tzVdDWjdZOpdUmz9Ua4Ncja80DfsdDm8eX%2F7vEl93Em%2F%2FFacbTQAbZHgDROi3Ry7PRC07NeJTXL4jNHZLU4b7Ubd3VmfLVHavRM37JZQ%2B9Nb0VOZzZlc4RJ%2BzRKS6BKzzUSPxloefZGhPUugjZ%2BlPVsc4RlwzZmewRJN4dgDwRhb0RQdzFiV65iiy9V87FvDwRwg%2FNGE3dUrxTvXrf6WTVuY%2FVKzyJd569dZy5e2%2FFq73VrC%2FBrw0RsK7dmnzJnW5ZhM7VwD4RoTzRpH7Jp3x5qn8V210d%2FT0QgezfGSnV4M%2FYHkjcTm7du7665YdkSY51erxxfb8Vx03dyd8Ry03ZzC8RzD0R0F%2FN0g291h7F4m7NjozNkH5Zk%2F69ecf%2FHfL9EfYv4fa91fsfWfov1ikdwiyczhF90jGf0jHPIgq%2FzjQ%2FEh%2Bt4iHPEiG9Ebbf1bU%2F4xJw3yab3C6%2F3Mrc3KzcxbGgAH7jCJbgkADSAHLjCIfAqm7s5r4Kravn1mD05Olz5YGe5hud2lVm4f2F49iy5OSEWAZhmKIgDPSBq1rCCPOACVRKTo%2BMCRoEfnqNDlLvEjlN5jwf2j5sXXHfekE9ykffzkXt1koO1am%2B4SKRAarqmHBzO4BQO4ITCrKv5sV16pnvEpndFpzP3p2dYqFefEeOcl%2BsxmP%2BzmMc1maeEA1yNEmDS7NTOD8TOtNsO7pxEV2a3QPxOVf%2BN0t1xu55r9wK3UnlveYU7%2BIVDSi0tu6hDipGlAEBqgBChj5aSjxJcgr7vuy3wwgP9O8AHvMAPPMEP%2FC38UcEnvMIvfCzcwsI%2FPMQDfBgBQ8RXvMIjvMVnvMDHAsZrvMcTQwURg8ePvB2R%2FMhzvMlrPDGEkMinvMU3vMtnfMfH%2FMITQwu1PM0%2FPMrnPMTPPM8TPDBUgiCnRAo4pUuKT2v%2BEBvcOwBowAs8%2FdPjwDF4A9VXvdVfPdZnvdZnvTPcwtZ%2FPdiHvTfcgjOIvdmfvTc4J9qv%2FdZnQyywPdxjPRPFPd17wzmAgSTUPd3HQjboPdw7gy34Pdufwx7swTkI%2Ftr%2BQxDio73bLz7aSwIYHL7ji%2F3cT77Y873lh%2F0uDP1JhIA1rIOaa5IlSfsmRfutcmV85zCXx%2FI5vrgfn5m5a3l7%2FDdRl7pRn%2Fppp3pqE3pwjSMBsAI%2FBEIPFEEJANMwaMCrGlMwacAh6MMy0Tl%2B2Xml4fm4mzifx52fIxygJ3Fvuzuxszq264M%2B8MM%2FuM4UZOs%2BNCoAbAH6qz%2F0J5n0Yxz1lzg6nLjwcvsGJzg60L5ZUDRXAwQ6gQMJFjR4EGHBcrcSNnT40J0mMO4eVrQ40Jmzixsf3irHEaRBdc0cADB58mQIJUVYKklh0oYaJQROxpyJEmWCZupC9hzozZZPocD%2Bsgn1GcUYT6McFy4NWUyj043uwGiiKPWiR6wXswHbajEeIEDxvlYkWvZhU7QNI05c2zDj24Za5YokiRNvXr17TepUWrcgUMAHzw4uiPSvYbWGB0JlPJCq1ccC6T7uOhld2LGYCz9ezLjt1cdxMVc2PLIkX9WrT%2FrFLJhzUcyIJ39m7HhyZNGMTRu%2BPFkz2cmdGdseHBoz6cm9AaNm%2FZyv68mwh8ueTNszQ8y4H%2Bsu%2FXHy78fBY2M2Dhj5ZOWPmdd1Dh0%2BTumPqT8mzhh7ce2TuYOuutuw9uoSjzHyqjNvP9AkAnCw9XgDj7H34ptwPsbqY%2Bw%2Bw%2FJTLMHbouruv%2B%2F%2FMCPQMAPts04%2FzNIb7UP2IDztrgkp3Om1oMqbLanaOjSsP8O8W%2B5F37wCTizhTkRQxQWTa%2FHBySSUEboKDbvQsAwH23Cw8wDr8bgQgRxxyPGKvDG7JN1Sj8kAg2wuRiijpHE6Gw%2FEMbGN1HEHT3fqbEhLoe7UU6A%2F%2F%2BISJEEt%2BtFFMDEzca0%2F8eTJyrrOM7SsFRlzUE0n23STNSkHo3KwSOvC8tBuPNkEVWEATWtHo9TBBtVS0FHnGVRrUYpQO4NJdc%2BDEH1LnWCFFVAuEgdj9Ks7a0XVE2ncIQZFDkVaNhW0LG1UWJ4w7SnbiohtdFNOVfP0InfiOTeebh2CTZ1z%2F3stS1S5SHUoWEJUQABfBDaoQph3CeqzJ3c2wfeEcOKJwwAEkrgq13KPwDcPI9nyslF3nikF41KE4WVNwIwFDFms1AnHDRHyRUCELmzxBsmC3PkD3xz89elatLpJBeNu0Nk2JFlynpmyjuV6Utzo4ASpG0P%2BWPqPVGqpJZhgGxJMnVSWpgRop%2BKll0GL5m1InS5OPlmEVLr%2Bt1WhBCbYYDcMMGBhgRq2SJ0gIJY4oV%2BT7aYMk%2FPdAIljsv7q47pCdkqdboYYO18UBNfRIHcIwVeHwTmq%2Bat48sg3Dnd45iicFvCd5GyCvkWL6KL1IvehqhlXAAELqujGX8HicduAI%2F5Kx2rrvEnuHKSvEXLHjXxTtiOHfGcI5y9BlVpI2EBXnfVRke6UWqC1ESg4HkNMMKELhp3JE%2FtApb5%2BoGD1rPvuivT%2B6mHGEVDhGculKlyuw5dSJ4l8W3DjDKLDVxUS4zyCRI965Ttg9Q5SDl5MDx2So5z9yqWkoenAf%2Bb43EZCN7rdBU1TqVGd0SiYvlTID18GEALzEGI73OkOML07iDo2MQMDXAFvFRGeSISxAXwF4RnuEhsCDEC6WalDGJNYRC3qp46FYEMYwpiVLyZxqzthYxKbwMZu3BGOVSyxG1fRXsES5wtfPGMg1%2FhFLRaxiWeEQzTPEEb9qCjFCIYjFf6TCGL8IuY%2Bin3FHYvI1w7skAe74St8C1zfAc8HqOihL32P%2Bstl1KfAtehPbQNDpMHi0Y1DIsAXPOEJGycRjC0OBIpSpNUkSkE7Rj6DEpMQBhxdho1KLEKKYpwcAipXKQuuxR2pgF2%2BJnGNqCAwfeVTHwQ7iAAjRhKCHkEgJFEXrhHihXX0OiG%2BoOAGN3TBbwgwxFXudC48CcYdhghCENwgSkeaq3nxgCD6KOUyYpADgtR75%2FTscYWEdcEeJdxhQeJhB3xZIBjk7MYM2CmLO9ViBxbAlwQ68IVulIMYVbCABf5wBAkgQAJOeIYdTIAvEYwze4uYwUcl0AJCUGSMBv6zw0ahQBF1xAEEH41dCxahp260wAItiINELUCJeCyiBR%2Fd1wzaB5E%2FbuV2MUMXOoLwNhVABh3CQNUbRdONZ9QPG55Ao1fHuolaZA8dy%2BKqQLJBDHdI41SrCGMJOYJJmkEBXy1gYQRX0QIkxKF%2B7pjESicqgj5krwsb%2FYMTJDo%2FrGVPGFDwwEFzMAml8MQOJ4CdBXLQ0wjuspeA%2FCVa4sGFsT3BmOggq84IIo2vmuOOWhVrBAXSzGfeSRpbxd4twvHVMIZDFp6YazVFeM28ZBNs20SAJ%2BwRj3nUwocIqAJMTZWHOExCFt4gxqyekYpU5GJkODMbNgyRh2pRpBR2wP%2FlVbqBsVvVghB%2FsGIkn9GIOBhCFrMK1MVKUb9aLG2%2BteifwpxGwYESxB1OmOABaZcuJJ6AcQbogjqIMWAinuxeCZvoKu5kCPnZAU%2Ba5J7bFIYnDzNOAqVwRzfCSUQPdIMSKERAH50qGdIaFGWbyMw8StGEL9ghUJPIQXQ30AJDiDIJHRBBHCC8gU2UoQMeyANTJWCHeVBiyPgq8h944o1KPGGyIDVBGVx5yTGVRYBdwJs57hksTzR2bC%2BNRxUOqmEt90sdtSgp44CnjiugmHQS5CVdITLaZD3DZAqowmYrcQ139MECG9ABZAzRgQ3MgHaEACq%2BPFBZntgWpqtIgt%2F%2BNjAEs6GDF5TYQAe6UMOPioDMhKaXNY3bmqPZSbmbuEo8MIiAmgbyXvlagBAq0a7iKSwe2PChCv6wZ1%2Bn4pMbWESwagG7HMRBpxJIQv1mZQ47hBkBC5hBJ8iiOXyVwQnZLsPIIHyyuF3kwJCJXxnw9hd3IMwAPJ3EE35IYQUjct%2FG%2B0MedPqHeTwjulWYxBAlIIx4iLht%2BEoCWWzo60kYot1x6GS7ERCEIVzBHUxFmSEWsYN80dgh75NKIE82AzdsIhzEaAdMO6HTsZGOfWOrxZ8RMExnpsLmJ9M1M1CQL5sfAbZm3sxWEhdszxbkLO5IQsKOsIhF9Brkc84XFBb%2Bni9DkKXXHjgDIUQugVQ8PF9emAReEbC8eIBW1mwx9FYELQJhtFsMjvaFTnU9q0MC9MRjk4AnuihAnKeixRMdZ6o5rQA7G6AMHwxJ6mrdl1tfxHX4Yq5zZeG3KjwXzvkyQE2jimxsTJYBKB7bBp7hjlqkPuhETIKwoGDnfFmgE%2BbaHEgZZ9kW507yBIn3rLrRbjfkMH3CWIQdVtHcSZgUG8T4t%2B7soUkELKK58auCPfrww3nYwx4D%2FkP12Vb6uKVCD2JQhz2kji%2BNFx9fuhtZLXSK%2FXkII8won5iN18J2DDdhFWzqCBJmBgzBXgZITz5JB3RAd%2BiMYJIA0waQlwz%2BUIA%2BT5NaQGP6APYcSumQz0%2Foz4MMojBqwRDiABuaa%2FdkRus6rl3UQeQIwR5KYaIoYR7iIRxEDgrswQGhYBmaK3kQoBPsAe586UxQ5wcBigzwBQQ0gn8GKF1AUAIcquKGQGnajd5sq5OCzQPKwA60UBiIIcYOKg80La%2FCoSwor%2FKQKyEyDwGOoAu4oAqi6%2FrsAccwsBaGaMQkLtnCTASqaHHwZQdkwRB0ahKeS6c2wBBWwf9KYR4ECV%2BEwBMmod30ytwGSBYWIbrIwB0Q4Qd14A8sayOGz%2B%2FwBeRcZlXcYR58gRCqgLD05RikD1%2BOTx2C4aMsoF%2FiIQmlyx5Mq%2B3%2FuuAKuuAHn4D8tifiSiwznKES7AAKVGCY3q%2FdPOuoCMaV3OGQ9C9vnorpuiGxGMcCjEgW%2FqALngH8cvEJEhBflidxVvAEgggb0OG%2FukAY7GEeyiD%2B5uH5UKYPoiaL7KgDD81vXsqeZIPz8mAZh0kFHZAMyEIdeg0Gj01mBCIeYGZ%2BwqHXdKAJuKALBCgPhHDBRKsIkwUEEaAUYnAB8KUR8OQeReAZ5uEM%2Bg0dSiEPuiAc5NEBr9Dw7OHEBq8GhcFvygAM8wX77MERPQAb4g4h0LDW1PAolSvCnGBWwoGNcmEewkEi89D0wswNwE8ibZEsgq0QQ3IR5kFPRK4Mwu%2BH%2F%2B4pHlahsSbBHnavBSJoHthOzexhiAAq%2BIQvR8Di3x6SIMawibABCj4qYQ7xFf9NFkHQFttliLZviIjobRImd4bRKhcmmETnbXgPAZxR82DKEWfgsqrRA10GG0UGFYPhD5bxZPQqguJBGAyBFXWqpnLODhRyBXFIv1CRBKsgqepxFVJvolqg1fSrH9GMFI0kcdxAD5iB2h7mMhvrIBFJIX8QBhdTOARLy2oh0RxTwySMIweNCO8SJOKBHrdHGKRBGIJt9kZGgI4MBvAFGl3vD66gFW1ydHQw%2FnZtiITgJxHAA5pom0SgzESG1tLw8uiGKfNFAWCNhdzMDbKs%2FI5t4v9OD190rRJPgHZsyxBjh9vEE1%2BcIB5ecBmKghpjsS1%2FiCLiYYhUkOfULHjysiIK6qASKnt8IfUsABHoMmE2oNU2AXY2oDBj8Qlr8RYXcxfP0Q3KoAy8yQ0WAe2I0fzi4Rn2bAbyYBWOTTMRoO9Ybnum8Q%2BtcXhG0ynCARtKwRMMZsU2QQjyxaiewaMuzDdj85D%2BQDhWkN4CpRbiJ2F8U3e8QQxir%2BMCNHPOjOnYTq%2BUIh7u0QQCsKrmxw2sJmbaxQFZVB2k0x4c0lC7b3ueIdh2QAyQVEkLcQg9EjztBP5AagNONdtu5WA6tBOkkdpygAEuU6fo05nsge2ODyKP7QT%2FGA8BVFMdZBBlABVxBjQpC7Qi2NANlGgRUsFZRMmTHBNlHlQPJRQBUqFddi8IggVDEXNDjw0KXBBfFCFEM8MwS5QFI%2BjEPDMeVjQ0E0IU80ynciCIbDB%2Blgsd2o0t7SEMfRQWEeAwhVQxB8gexvMIwA8n%2F0CsYsr85kGTiBL8%2Fm02S7Xv1GEVdIoGk63dvNRXwNRVnkGAmHRWoLSx%2FsAd0rRXyWAThghO8aUP5hQhhcMcek0FumASCNYdxmEZhAF55HDGRnUj7CpgHNHXOMljtQwbEDMe7SEOHnUFJZVSNckCGNEGfzAH%2F80LenAelqYUDCZU6W7unEJLZYzekMiH%2F0QgfhIycdqz7dzAE46NVtmS7aYLIsczCPZTBczwV01KWPeHWI1LKWdIuTxBLBcpe6qAAOXrHidzD%2FHFWisxW9VzdDK04XgCFzv0Q%2FGFEMYVHUTODsw1W9H1HNuFXVuUgojHf66gDEQOAZ4gcfyGDG5GgIiyX%2F81doZ0gDLUX4NhESTgbcYP4hYWaicBG%2F6gsY5PYkXjB09gWT9JYyOHY42imTBNnq6MEJ%2BBpWoB%2FMZzZRGgZSHyZWeFFmPHF%2BwhH5a2Dd2BEvQAZQ%2BOEkTu3coCaLnFwmagC7qA4%2BJgHlYhX%2F6gGyYhup4TAZwWcztJgFQgDwyhXtnyxCxAD3Q2X%2F9SYR66FiswZ39MtshUAINbILosFFJPJgqDBVhZD%2FzY7m3tQSJV8lwWCpHsFm%2BBFUCNcob69pr%2BViRyrWvA9fryQSil9SoZ91r7DXKdCXfdoAZLNSvZbgZsgRzs4R6Xy3N5Ip1Cd10RKaA4QhQDpTFPxgBmILAMt%2FGMbhcqjIjGttpAakjfpgrkaTx7Ll9yAI5%2Bl8QidM8UgGeDYMX8JveyZxNiT6eaVzT5L3OOrVfjYBG4YIO7QRhGNhw2Yc%2B2t3sz43vhlWXDoRPQcxcTRgVKAYoOCVdJS1Cz8ZPGBgm8gSd%2BMFr9x2AiNToxF08owU8zU2oWFTMRwAnaRSL50mv%2FP1IqJBkBuCwcflkdhLan3METTuZz8xakJqEbFiHMEhILg8E5Se6QJGAVWHhWXHhvXUWGR4iGC4IN%2B04kRC4IBDHY7vZJqbVxsVVbDQ93JeAKDMHkQKoWHq4kEYAFvECjfigz1Bl02y5gt6cL2ikUXZRu1KELT0Z2uC1xLMwCuuAIPKADDCGjOqADQGwWRcADTqBfiIeiE0kd3ADcJGAImsgTPMAD3M4OKHq6BMvZZuAPTuCk32gGTLoU7G0RnK2bIJpk%2FQiQmY4iZYwQ4sEcRE4BOK5XI%2BiQHnkFE7K2VNeodcAddgEE8sUDdMoCOGw4z1AbwQ1l1sAWigKJVFcE%2F9xgpstmHsiAos9AACHaswQmB2zOpcgpsuCsoWknnaLsCGDYV77WKFa1dpunG4LtcTfX62yqVCXgqUfGK%2FEEUxmnD9yBV%2B%2F2mjktm%2F1km1Wnmw%2FIhn2lDGzvZGShUt%2FmCJItutL5bR43HCCsiHD3wvIFxCIIx8ZGBVQ1D04big3hbTwzkLYThuCNoMvFVFBlE1SledDhVIa7i74KG26hG1yLtdABG6ShHQVitSBjWcwKe8JBGqSBtXqLu7OHFhoBVcKoud8IurfbDBGMWkbmGaQhvWvMZ%2B3kGaqAqxEABVBKHTxBgPgzDlTAAjzg7I5AscQosSzADcgpFZxtrIFKBP%2BCgRwq4QbGZgaeyZOXDnUsRrjd6FlkI3GEu%2FXK2wyb%2B7upG72xahWEO4wWaBfEG7uVQrtHXFTLIhxyYKNKkSBuZ6NEQFUhLajKjKXz5QQyywLoZ3M3KksNYb97FaVSbaOWZ1ZSYaNUoLJ9Ain91lhbpxZmQMutdYbCoQyqWgJUwBC4YAZYICz%2FQMsjz5O0%2FFY2UcsnTB3MAQJnwBPiAQQ3wA6SSgJMYKcDZROGwAIkQAJE4Aq4LZDeHIoHawa%2BNXGgINAlIJF8W9YcJZ%2Byp3qEBXoUCJmOqIDIx5uVqXyQwdEcCXs2HZouy35UjjSfYRJafRI8wRbYIX36t9VV5av%2FnkFnbv25Vcu31NvVW%2B%2BrZqmtzKEUXH1r4%2FtnP%2FnCPb0zHEWUSl3TLUmfKh0dHIiBkkmv91qXpULXD6IYaEGOuvvWXYbVW91Zgj3Xv%2Bq9uygSs4iW0IG3xr225D1ZLrtoMrtQLCYYgmGuvCFMPrAW3XvfTwnB3KESaCEYWo%2BCgkUYgmGWrPi3AQNg3mJugOl5dzlP8IRjFInUUb1O1AWaOh4dKMnTDUfZQyVasiRt5IKCXcXUBcIZHK2ApN3ZOd18Pj7j%2F0Kaoj3b7aK4Ks%2FWeh5sEMjfEQdpQb4giMEbqP1Ypf0hrtgpJn4tKt5aLh4tTgct8Oct4hdeUl7iV%2F4t%2Flr%2BLTboLbC%2B3n8e6AEA350CVAqljCfXIWSoLKB%2BKaQeLai%2BUqy%2BLMyecP69RE4%2BhrxeUsAemPhaLsh%2BLfheQNEe6Nd%2BKdqeI%2FLMAyxgBLitIeT%2BK%2BjeKOy%2BLPAekPT%2BKxQfK7Q%2BqzFE8OWC83MZ2Y0C8a9eaIDF3sXF8Y0C8jnCHOj98k9fXiJ%2B8DEDHTyf7kB%2FK0T%2Ffvz%2BWAC%2FLjAfK1J%2Fgg1%2F7NNkMIifbxmfQIX%2BImo%2F8p1eBHX%2FLTRfKJgfK4B%2FgoUfK6R%2FKUi%2Fwtt1LZRfKsAfbJ1%2FLVp%2F718fXKi%2FWK3fIrB%2F%2Fbl%2FLbzfJwCi3C10BAsaPIgwocKExZwt%2FnwIMaI7MJrcRbyIseCtchk7QswGzKPIhPEAAYo3MmVBYNlUqhToMqU7TWAsxhTpzOFNkRt3dlTXzAGAoUSLGj2KNCmABM3U%2BezozdbTjiynZoxizKlViDC3RmzoFeLEimEf9iyrECRahSVPrk1Y9e3BrnILzqxZ12DOvAbP5gUqVCmACC9KFNWAWAOBoQ5eaFDKVCvfqHxXtqyMDqvkunT5gq081iZfv3nVVm6LsnJcvp3r3hWddy9m0nIBC56SDt%2B9Q4ttrJMnD98UADas4YO3JWlkzJQxr%2BaruXLrup%2F5hp7NsbJpvqidX2Y9EDRN2HVlV6b91nbSEPesFTnU%2F294GH2H%2BASyQQDXOiWs5IVAulxlzan2HXRZSRdeZdXldd152fG1XV7dEYjZdG%2B9hpl5oz1Yl3pIhRBIEQC8wM8cAByyTgqPAVACPocAMEV8SBHQFHMheYdZZgeCl6OGroEBCnlyofdWhHVNyNdznCXI4HgZ6uRgZR4Kxgc%2FIuKiDzz4QEKADfzUAcAP%2FLABgAYpnHnmC8eU402bbr4JZ5xyzhmnMxvRiWeeeQrkjJ5%2B%2FvkmE7qwCWiheMZiaKJyllNMMYQqCuk5FD0KqaKxZFNppc7YQmmmgJ6zByDneJpoObb0Saqh2fCSqqHl0DRqq38y6qisgCJqq5%2Fl7JKAYP9DhcHPJQQQcAkkQPDRzxheyhFmiTCGAm20tvBiS7XWXottttpum20ssXALbrji2uLtuOaea4sRmVCLbrva3vKtu%2FJiW%2B689hKThSTs2itvLLfwO2%2B9ALdLDB10EDOwuwInbC68DKPLiyRZIPywuQtXHK6%2FGIvLSyW9CgZsKIER5QA8oXgJpphqzFijgDdSiFl0PD6J2URBYoe\ZkXIhmZeSclm4FoaV%2BVgXkWhNedQU%2B4SyWJlyiKiBPJewBwkAW%2FSjBIAtTyYVjjHvmBfQay34I1lRaveyhCallmSBS9bs5NBQbihlUEqFsM4%2BrlwSyhQOpIMcJPxkHYo8agyzzor%2BRgXIdY4%2ByyVz2EzmRbZcDdKNNmY81%2FX4WmKXJTRfRA%2FJYW12J6WEONasns7KNuAijzhjDJVCf%2B4pt3VeA7adY%2BRvY1b5hRQJ%2BZbRaOn81uZydY7W52GFHtvceRkfFtJFDYt900NpMPL22h%2FFuO5dw1yZ7z9PTp30lg%2BPc%2Banre31zNbFLbr6pNfdva%2F6CxZ%2BXbv37La6mO8tzgtL8ILGvrNBKG1Hgh%2F5JAc3vMgtR9TzivX2h8Gi9E8u%2F%2BNcACEHtt8pyH4INBvmFqg5B%2FIOQREk3lpGV7zSped0GayhBnPnv%2FGtsHwhPF%2BODoiWy01PhkVi4M5UCMAKoe9C9Iv%2FHgWJeDQa2tCGG3xLB5f3wbcM0HNLfAsQQZfAE5bGiMlDogeV2EKate8vUpxiBqu4liu%2BhXlo2WLzujg2EgYxjEPMGRnXorw5ZvGOaZzgGjvURjfuD45okeNa6FgWO5algF754vP4WDQoHu%2BPaAnkIwc5STyCronl0SNaKriVCyqSfzjkoA6T%2BLXN%2BBB4prykCfvoPu6YEYtoFI8E6%2FdE%2FK2yhowsiyPRAsmwSDIslNyKJb0ixEz6MYVueaAIm%2FRLJx7SdPkbJitl6UrHgTKSPSSgKMvyzK1E8365VFs1dwhBX7oQLTBcCyqtokpvgq%2BVVnzlGWPJQlrWDJPsROH7%2Ft4JS%2Flhc55lqecpNVm9ROpTa%2BDspzh7V04u%2FrCW0CRoDKd5ULYlNJ7zy2Ypg8mXfE6UKMUMyzHLkkyvLNMrzbRKOq2yzo%2B2s4EI%2FadCXUNKuTi0LPecikpXuhR%2BxtGfvAToT9M30FtKc6dH7GlTn8pEkwqVo14p6lOOutKWeuWlYYnpVma6lZpO5aZTyak9IRoW5AFyl4LsZUkZGpahhsWrPgHrRMW6FbJ6xaxWQatV1PoUtj7FrQ8FqS6tWteA3lWNCkRkN5F6w4ou9aJOJalnuIpTj77Vse4UqU89C1StvkWvXYVrKiWK2aEA1iqC3Qphp2LYqSDWJ4r1CWOJ%2Furarci1k3T9pF0XSlkxcjO2uNNsI5kaWR46l5nnNCBo2yraxlK1jJA1rmSRa8jKLpe5%2B5yuS6HrXel%2Bl3LXXWx2gUtanpr2qqi1XFBX296n8HUnftXnbKdSW6vc9im5fcpud9Lbnfx2r8G1ynDL4klkjpOm1VXnfV%2BYX5%2Fs9yb99eZ%2FnxLgqQzYJwX2yYFvkuCbLLi18a3qfKNb36zi1Sus3cqGY9LhYX7YJyF%2Byoh3UuKdnDgmKY7Jim3c4Kk8OCwRhumE01phnF6YnhneyY1dkuNV7ngnPfbJj28S5JsM2SVFdsmRrXJllyzZK00u65MPG%2BW2TrmhVb5JmlOS%2F2VFbvkmXd7Jl2MS5piMWSVlVsmZp3LnlKx5K20e7Jt1G%2BfFzjmvdY5JokWSZzfuOSZ9vsmfXRJolww6JYWWyXsZ3GLuvji9MQ7apGlcaZdc2iOZnuKmXdLpmHxaJaF%2BSaQTG2tTS7WgY6TmqiV83NTOeCs1RnOS%2Bwrb2N5aJbl2ya5T0uuUjHokpR7JofX7bJ8s2iqNtu2jDfxrBb%2Ba2cFOyax%2FEm3MTjsl1VbJtUeS7ZFsWyTdFsm3NRzunYx7KuUW8LlNnG4Vr9sqzUZ0wHEcb6TOeyT1Tsm9RZJvkezbI%2F32yL%2Bt%2FPCYDPwpBRfxwYWccCMvfCoNB7cwybs4pf4%2Bl7PqxaoX2%2B3vU7N4u3PtLrLXa1%2FVYhilbLwscycukoqP5OIeybhHNt6Rjnfk43YOuZo5CeHi%2FtzmQVz5U1oO8JfDnKUyNyZ6t24g80J5o1FdtrNT3fNjOznZQXc7y3HOE6vjOeJhLft5aZ52oMtF6hmhuqX1rmisM1nrcxe8q4VOZaJbduyZZc7ZG1%2FzVuex7duUy8h9UnIfn1zMKTez130CdpCLnfJI94jSRcL0jji9I1DPCOExYnhZI34kn99J6L08ekGX3tCn30nqq776o4TgEMO4RAoYw4fmPx8ADgiE9JtrecDnZfYZqT1Gbn%2BR3Kvk3R3p%2FU1%2B7%2Bfgi%2F56%2BDIp%2Fk2Of%2FjkXw8X94DEOqzxmEDs4xLrGIZQDrF%2F8OB%2FFJV98RN4XIcW4CcROodkcEdcPod5mjdKkEdnkjdeSIEBkDAcctAPL%2BAA6xAKABAG%2FfADJROCI0gEBCggl%2BdmGKV2cMZ2oMGAb8dzDyh3Leh4XUeBlGaBM2R0RfEDw4ALjbEPfNAsYeACRQgARcAPs3MUNOIO6iCFU0iFVWiFV4iFVegO3kAMUZiFXwiGX%2BgOxOANXhiGZ4iG6hAF1GCGaeiGWMgLbyiHV%2BgOOdGGcyiH8QAk8YCHfagOvFAOfjiHW9iFgpiHa2OIbziGZZiIblgOcdiIaRgPoAAGfP4YiWdYh85wh5eYhZDIiWDoDhGnAeLADysjJsyyLMvSLMwyBdECLZdgBVQgi7NIi7Voi7eIi7i4BLnIi73oi1Swi78ojMNIBT7ABMSIjLwYjMnIjLS4BMvYjMxoBT5gBNFojdVojc34jNnYjD7gA7HIjcgIjeE4jONIjr5oBN94juVojuuYi%2B3ojrdoBQWgPyEgB%2FugBCjTLGqgiqdYJmiSJqigCwNJkAVpkAeJkAmJkK%2BQCQrpkA8JkbqQCa8QkRVpkbrABKBwkRvpkA3JkR9pkJngkSAJksZABZjwDSmpkivJki3pki%2FpktAAkzNJkzVpkzeJkyt5B21gDCRJkv8T6ZMgyZBB%2BZHGkAhW0JNEuZEiqZQcOZJNWZGo8IMO8AOPEQL4EAhXGQhL2A9bUAL6sJVK0JUss4mfqIVcWJZmOYWLmJZqKYVr2JZu6YluaYWZGJdmqYfJ8A97yZd96Zd%2FCZiBKZiDSZiFaZiHiZiFGQknQZd0SIZ3%2BYmP2JhXOImVOJlaaIeXWYVzqZnuoA0%2FmAL6MDVy4A9hQACrUwKHgA8vcJrWEAKQgA8uoIKNY4Dbl1GEJFAyqJeJyZu96Zu%2FCZy%2FuZg36Gh0J2PJhUtFJxh1gA%2F0sDRCoQT0gA9gORRTIJ3UOZvio30CdJuhFIPWAQa7GZzjSZ7laZ6DOZz%2FtTlLkxVeyuWDvmIDW1AE2vMCW%2FADRVGf94l9K7idIPSCkPadDBKe50mgBWqgvZme1rSe4AVMnbcWtUZFfjdWLFicnXVN7DVQ4nmgG8qhHJqg8HShdYecU6WclCdbEhpYFGpuLpiDCYh3UzegHSqjM2qeHzpSIXqc7Zmck2eiSfWfAKaiBseiCIhOL1p4MUqjSaqkiWmjp4Wjj2d3X2ekGUF%2BGAGhxISitBWkJjekElikGbqkYSqmgtmk9PWkOhilqDelGFGlF3Glb5SlQNqfWtSd1BWgP6KhY6qnYVqmMHamE5imxremF9GmEfGmGNR6ULGlotelf%2Fqlurmnkcqn%2FxCIg0QKTe4XE%2FCne%2FJHXomaEa%2FnEbF3FXVKYXe6Pnkqqam6oX3Kao56qTsIaz34oHz3V3EKYosKfI26oBgKqarqq6tKqRVqqRYGq%2Bwmq1H0g%2FJmqzyGq%2Bmnq%2BZkqsKDqr9KrePJqmjnqsQaqO83qBFRqBBxqIu0rFzWrJ6mfqBGqmuXm%2BA5rdXqrggarCvaos%2BDqS6hqeO3e7RGq%2F41rnxWrrp2rryWrjC4rgLaru%2BKsIZ5rRGYrVJWrAzXrRDxrQ8RrvrjqRgBqlQRsNg2sABasHiasCHLmwtbqV76qtuaqRFrFvkKb8kqcf3Kaf9qbRuLbx2LbtGKQAcrsjvbl%2F8kK6wmq60jSmwXyHowi2sya280i3E2i3A4u0c6y7M867PyOqwOi7L2qrILMbELoQ7B8DEmerEXkbEZIaoYwX0Y4X0XoYBigaRR67Y9G69COq8nK7Q69RfB4LJ996O3OqdrcbYXkbZfkbUJMRFQ%2B7YJO7VyW7Vy9rB3d6xlUbG%2BErYRMbYYUbYX8bcREbgQsbYPUbiHC7r%2FkLhcOrdBq6MkyqNga7TUhrQWp7RNx7Qo57RgZLihW62jy6ila7V1O1opta8etrr01rpL97qyF7ukN7uXVLu2%2B6u4m6u6y7hXqxL36m4smxGR%2B00FqKD%2BCb1rNbgI8bnMG7XO66zd61v%2F9Tq934sQW6sQ2AsZwUtxwwt7xTuqeyu7H3uq4ju%2BcUu6iytpjSuljxtReVur9kuufVtHxyt8ydtRy6u%2Fkkq%2B5mqcUMq72lWiqmvA%2ForA5JTB68fA6tS2D4ywEQywE4ymFQxfKYW3Peqj2gui3NnBvvbBoeXAIqynJDyzJgyoKIxqvkvA%2FBrDrLvByqTAHoy%2F0mrDIYvDSavD9ArAairAFvS7Oga%2FSSe%2FoUq%2FZlvEMnzEOZvEiMu%2Fueu%2F5%2FvEghrFr%2FXDwBvEwjvEMrXF2sZ%2BpKa%2BBhG%2BX%2ByuS%2By6TUy3pzu079mjkwsRlXsRlxsRmcsVccxtc2wXIWzHvorHxKvH%2F6bboOLlxxjswjcKw%2BbLW4pMEHXcyM0bxs87xupWxtx6xvg0xVpWxa53xRr7rBrVxU%2F7ybcbyuU7ygpXyil7ykbltSwMyA8hyBFByBBhyA%2BxuQ%2FRuQvhybOcqo88v5G8u3xst6lbtGscv218Vm%2Bsb4jMb5yMDsvMzJHqzFgMzdHLwzt3wdV8yU6aybeMYt4MzuF8w7UswZqMy9KbEtQ7EuybEF37terMn%2BrJve5MZPDMyPI8puPsyvascrmMtbv8Vb0sGEUgB1PQNA6gBBk9Bf8RJhX9PZUX0NtLp9b8dNzMcQZdwwgNrMRJtUAbzZPsnrOarIHAD%2BsgmovBhPzAD%2F%2F%2FkBxboA95UzXZmUPYXFjarHEmHXUordIQTM8lzNCm59DpC9HQ9oMaYA2H4ACHwA8vAABycA9KEAM9wD3iMAwaoH9cXV7rbKbt7NI2pdRLvacKTbZZrLlIjXvom8%2FejA78jBAq5QAE4ACXAA%2F%2FwX9bsAWP8QLUWQRjiRTNgM8Up3hl5Q0Y9dgl3SNvDdcJ3dTWNtlPbWiUWNkeoc88UTMR5wDWwA9hAACnqQ%2FigA%2FiUAL9yA%2BoGAa1XdtqQAvIkBO7zdu97du%2FDdy%2FXQyxENzFbdzH7QyxAAzIzdzN7QxL8ArOLd3BPdwNMd3Xzdu3cAvYzd05kQUpndnnGQl00N3%2F3K3c5X3dw43e1y0x6z3d2u3ezl3d8d3ctPDPSOEAWxAK4sCaW%2BA3SrAP9zHbq0gctn3buU3fzK3eCY7c583gxw3dD27cCy7hwQ3fFR7c3x3eCU3eGA7cDu7hvU3hIc7b7U3ivX3hJ54T863iOWHfghEYKcAPW0kUDbAOrJDYRrjYqt3YoQ0VkT1Ync1DPo62do0Row2j4L3h5CnXlivkbb1YoH3ONlbaP%2FgC4gAHS8gPfKABw2CEL%2BAiH8gKAKAG%2FKCfMUfSrEzUuGXUlh3LtLvkk8rSigvlZEzkR67XfH0Q%2BeQArqAP%2FZEOKUAAocAPrCAO8MDVNI0L9OAKH32i%2F2muqGtOYG1Oe0autpgd5zTa5INM14dcSDC9o0R7FBEgB6FwCNPnAKV%2BCGhNAGkQCoGgOGiu1n7K1g3r1mCa6Um66cLc6cZs6WKB1yOB5B2h5wbhvvtJmyLtt5Tefb%2FOuZie6x266xAxzAtxzAoBPSfloMjqy6sc6QI90p5NaNAe7SsN7rjJnqCOuqIOc7%2B8EMFM7b3%2BEMVs7c6OzORe7gY67Q9R7Qpx7YQb7DiR59ZrpamsZ97%2Bqa0816%2BM7p%2BF6%2FnuoZvNxOLubQEv2gPPqUeH8Bir8JYr7wthyFZoEJIphSpBhQQxhff%2B8BB%2FoHJdhQsRUyePDim%2FzZ%2BuTZQs0%2F%2FdDukJL%2Bkkxux20Q21IPS18AxRSBCmIvTCoBLCIPTdoA7hMPThsBBkow7kUfXYpeQsf5jjbBFDXwvdYPQIkUzqgA1C%2FwxOEQxCL%2FVHbfN7LvNub8DDTrElv9cE76YGr2njWvXuwPcGDO8PQQzkcOeY%2B%2FNO0QctIAGJLwEeUAVnP%2FOVwAALcATbqg45sAALYAjx8AwbwAASUAuaVR3qEA%2B14AZOP%2FOj%2FwdYr%2FXmjmPqQAgzoPgS0AJxYPoHkUzucAWX7wbxEA4tsAASsAmB%2Bu%2Fge19RKAzHHwxnDxvhIAzJL%2FD9HPY%2BIQ3BEAzdUPcZL222WvXPMAndPwnCEP1i2%2FH%2F%2FSwZ3aAHjTAJa2%2BbO%2B8OXYAA7w%2F%2F738CwiCFlfD%2BQkD5M%2FD%2Bmf8MFoAAACGhljp0BQ0WLOasoLpubjZIkKaOoR0LMAgexJhR40F3YJL9AxlS5EiSJU2eRJlS5UqWLVVGAhRv40yN6sogwJkT5wxhFw0Cy0azoDsnOMvEC6cC5yR3QjWWu%2BVU6lSD7jSBaXpQ4qQgFiR83RBkUVZ3hr4e8TnVmUKM7sIRepaWas0gX8feKjdX70Z1zRwAABxY8GDChQ0DSNBMLk2CcUTotAClJ1VvtvbudSesSiqJtXBKiHtZNLooxhaPVlcqZwsybnTk7OJOXSWcQppK5CsxrboZ%2FjgNxXtmAYHA3bgTDk2F0wM2dfEWGUCQA%2Fdojh5dXseeXfv27TBlUncXJ%2BcGKFxM5Eyym5i36Rh1u4NiFGmLpbLbL7yvGyq66bjv4z9tLquw0iqcKnRCsAyC4ukDpyACnGmtjDbJAYGBqMOoNwTuygtDvfr66zARRyQsMQjdCycJBHMSYZWsnKrMQ6HU%2BWMDAzqRrRYGELAgNBmnKu1Evdz5AycVwpknHnWOgM6DbmarbR50aqkFnRetROeZUlLpBkv%2BNPwtuOEu5M8dbEqpxZxr2EpNAQQ8ECYcdQjZKZxwfuzoI%2B725LNPP1Pyjjp1hNkAJx2CiSeebo7IqRSC%2FyTqphJPugnnSome4dKe%2BBA4Khz6ENgkHmG4lM2gbk496NRuoAoH1SlraZVSjFTFcMAr3ekiJwl04GIGN%2Btj0MHiAlTHnTW1ElOCXOTSzan%2FNByLl%2F8%2BFNI9v0jElkQTp3LnitXi6KNCnHIwRyt37NPKG2LKfLS%2FUhc6d7Fi4zVInXA8wKkUJXXkMa5iT5uXWXenzSjIH9GJJw%2FlNmlunlSqqIIMOWlD4IhJZvhqBkIuUmcSHfBVQAQdKHkUTOCEI85KT5J4TIIWmqBFNi4eQyDkJLro4DMTdJDTwzz%2FBDpoobELdLTwcNpAGLJq8WCGLgZSpxaWaxahhT8ucqeUI%2F4KNaGMIOTz1KitETiBjCfVeaYFE1TwRaJSTDAhB2yI%2BQPuPJKQwIIWTjBhBuasrNuEIGq96kV1PMkpiIGUnEQ4A2ZAuEEEHhyKISrl9KnYcGqphBYv1QkG5SrrdaebWnxBOC07rRw0GC%2FRgXYeW1Y52yA777R99YJWR7vK2zNHR%2FeFrs22%2BMK2dVYWCXCCoptE1fEWJ4b529wQQ1Lp6aJndqkEHWGuD%2BcZX3y5s5bry3xmkUWUJv2ZTQzZRBj%2BgpeF5vWj3tECbMIpxRCo6x3UIiaRPYMIY3z8MV8punEljRgMT5vICQNyEAdPoMMe87gNxUQgAejkZCzu2MTyEP5EHN745mRjKtYihIOgGTwjHjnoIAIex6ScGEAEPauVdYa2Qx728B9FE407huAgBspPSWg7wYoQYIgcFQonMeTUfGpYwyPw5xnLU8BAQIgTEcwtDk3KiQ6cyBQrMQoBsQFP4QwSj1y9SRjfQcc83GCCI0gsWJN71CaCYAIFSEAFRyjFbbrRhRYsTwQ56EOlFsHHmp2gBbIoliyqoAIGWGAGZYiIlRahAhX8YRI5sIAFcmCIi2ioD2VAAQNEAIXQQI%2BTTLRXEDjpiXjUogUqqEIePCCBGbTAl5u4TTBmoIJHcox4xkMmYJAnFHeQgYuZtGIOnvCHuLjDExjLiQW6cP%2B2I%2BTNITjpAxm%2BYoduOqgWdqCZBeLwKGxwAV%2BfmUEq5hFCXW3gGfzagB0%2BJQEo9AxtT1ihBIaQi9vUxQKTeIIIW0BKmjjwR%2Bo4EIJYQ1D%2BUAwBIrBDHJyYBNnsADpB6AM6ceIGJZksWbXIjBNFEIcuiPAI7siDuCQQhDLYQUMbOEIVcJdDPfnQpz%2FlDhAvo46vIYCk7qlKF6DTAjHgQVxJUJIZJeCGmOakU59iQBX6oCKcLOKExLEmTk4wNztkMwge8MSmqiCbZxQqZUZT4%2B4%2BVYXv6MZe7pDJHR%2BUNRFCJhVuKSqCumCPP0DRAKWYRyneqROeNKewCFAKFD3RFA3%2BOW41EXHH1wxgByWFI4kIoEQtkSbCE%2FTGAHS1kuRO8KThhSiZyFwmTTKLk5cWCK%2BdcaJODHAUoq6oFG2UoU5ymxNguqMKUDRSNzaB3Hvu6Ik1jI06pKEhnaggezvAiQWgqCwIOVRG9urCCnXigbFAaTibsIc9FIaAGRCkE3GAgjTSG1G6lnCJX62FHMXqi3nMwyz5skct3OQkd8xjEeM6F550CFQGN3glQv0QNmjWBzhmJDV26EIqrtGOA1cMOO8kRH%2Bf8c6rMi9R6HgqfouFOLKRNSeGmIf8JsFFbMTDEOPyWVzR9k4mFqQbzwCyNIAcDr1KJAjQmUEcykCzMtj%2Fo8Mz2EQlmpBd9%2BXATQrIgeIkrJwyVEGEPItHkcTqhjI4kQsyoe4MxAAFEcbGHULASR46qxRQ1dK57O1ah1dbLDgjIA5wBNFrkxnbmajjNQjg7EyaaQADjGwTXH1pbw11hRygI6IIIEMnuMAiQhhihWWYRy20i4A8vE%2BE2Asv89xgOueeAH5DREALzBGPMkDHBITwmAyhIJvAVuG9CwAnAw%2FiXRkVuBZ3O09O9kwxJxXrxtFZUKgX0QVsIuAKJTXhSd0hLjdIyUpFjYM9UjFgzD5bOgf7mYPVve6RQHgu9oLBSCtspXe5wx7PmIQYduBEFaCDxfZcUFGiGDYEkPGO%2Fv0%2B6YrF6uI3nc1en5rEPMyY6DQSiD%2BqwclkrUSGDnjA4x7YgCfsITnKTYIMSXhGejeNacLuZBO0uEYfFjEpdyTrjfEo60XlGQ9CiHASLR9OKdIbvfbatwXdIMY8bkK2BfZZzvaic6j4hYD0ALkbNJvEh4cDyXodU9DZInRN2grOeWNEGJP4gzDsMScjVaqoLSCy8yIqnVCLMA%2FpbSNH%2BbcIQtgDOBrSFzo%2Bm4q1T90QFyzF8iQQp89OIh%2F2EIZwRLDAokonUUU96kaIjaHNpYLIpZsErDc0D4rB3dnj6kw5ofOra9s3TKLbNk4QkZV4CNwN4ib36aGN7gWz2%2FcN%2Fna3gIpa24PAD3PdgILjYniEebadIPABG8Sb4g5K4KQFWRKdwltMjJzrwCe0xkkVulEoC0ym4lkB3Qp7HI%2FjIgi9JF%2FQvScRByE4kQz2mHFOKqADN%2BRXIpFHIUkDtYKIB1hrMjGDHCt5NsixLzKIh1tQh1TYEQWQJ6ebM%2Bmxs646IuPCiSuwh2fzPq3wuq%2FTFsWYCg05iraoN3dIBTtIgs9CABOgPBPjD%2FbDiS5QkoSLBzfAiSdoinmQhkXgAjFqlNKhmcnCHx7JHjFhgGAQBixKAiiAgoTCiVSIh6LCQSvhqsxrINN4qG7QgeX5A5lojqsbKdKjrekzN4IQFxW4%2FoJF2JTWMynY0xBC%2BA53MKPbG7c3KTfU472e%2Br1A9Kngowpc4SLWshLPiLVNmAel4hEkQIRncwJ7gKCLYq142JQSK7jp6zCEy76w2r6cIz4EWh4VkBy0yDGLs5fPSkF3mCMVGAHiGjlh%2BadCYbSccEB1AC5d4QL%2BAEASOjQ7JMBMBDrKcYcn%2B5Kucge8MEMEQCwLhDoM5Je3codOEKsUwYkxFEHXIsESrBYrgbUguBJzKIO088UhukUnWq3ZIrXvsMEzUpJfXBweRAAfVIc8UL6vyBcjzLgcyR9%2F%2BcVguKInYrQYssKi0kZ32MKyM4jNQw1xObp4MLYV%2BgM0RADb%2F1BABFuFAXuGebCHNpLDbBMdTDSUYhGVd0IEhxkw5ymLcZFIBQNEQZTJoSFEbmExa0MYpIA1gcCGMVqGdlAEnEiCuluKeVAHc%2FgUTewCo7SHiLKNZAmGAsu%2FseK%2BNNSK15CAdyIjwrE4%2FuAqFWCt1UkO6ZnFyQEssaoCQ6DHXIyHTbiCQtIJO5RHiRAXbbSSJzCKYnw%2BZLSvo4DAsXPGeYDGpJDGHQG4g6jDx0ia3RjBbjyMsNMIV1SOZyALjDuoeXgCW3ODVJjKGWxHAowoHByU7NvBHpwHa6StRVAGMwqkZkRCfumR%2F0MZJ8SimooDO8iD3KRMhJQJhZS3mXBI0f9ImJyYATvYBDegs%2FJrB4rByJaMDhb8jElAh06gGdGcwzGJh%2FxDACighEXQkBHABhZ0kw0QIOcUgUkwhJ0Cj96byfb8k5qcCnXYlMnBTeq6gnkQEwTog2WghXiLNTkpKhXYhGe4NE2UAEIQBorIRuCwv25IBQ2hSlG8FTphkb%2FhyhehPvSYtURxB8kBlbIMgnhYhezKr4%2BUj1qYBDtAKVrQAzqrghhDGWFIkk2RDrx6Bpr5A73UpJ1IRjziBQNDGhfqsz4wymaUOsP0EYQRj4tyk12zFm50zMc0QWdZBecaghqLB2kQFwaohfEDsA8UK8%2BUM9C8wXgkTXp8AntYOub%2FkxI6%2B6tmJDx3gE2ARBlfaMZFeDxhoKpNeBLe1MLf1DwvfChzEALkygk3kA3mVEPUG7HP%2BBTmkY3rfACouTSdkIDyGlFlQ4ex5CIcWs%2BYdM9QDaqYwBCGED2Jyp4%2B4yXxmrwtyiad6BQ6y67LMrLx%2BJWLYrhRtCKaQYC1Kra4Wggzio44UMtDI0uSi4extABPSA06G6wkWCphcIZiMCMygNGa%2BYNFcJ%2BcqAJP8ISi8oCOFDNj5EvqKgNboASaSQ921IFnwAbgOlIEOMyFCB2dGIsnjVJv5JalizUouAI6MwAcBMwycB%2BaOQG3izN3DE0zRaHSrEc1tb5a0AwPUhSa%2F4ECO2iufpHNMWlE6BCBRVgFJrGh8PRT3zQqhiyI4BQNtKmC4bqodaqos1DDr%2FC%2BY1whA9iAMtglFWCOMJQARPiwvPkfndUJFJg96gms8kMHMzKAI%2FlGZmJPUZVaoiHVUu2GKxCv4WClR7GlJ5KASfoKZi2LxcoBcZoqpIABCRiBbxqXYHgUT4BBC0BOPyKrr%2BAojGCjnNC4VLQUYaAuJTqCjiQ5M4lFHvlbHYgHShChDUCBd7IAlCLMIqxUnfgDvBKzEDxGHrUvnMiAX5GAQJJMpBkuqRvPJC0jZUPEroPSfC2RKXUW6FEiAwiCs4GCDsraHrlCRhtThDmugI1HLP9anDNgtKHEuOEYNRnqFOoygAH6DIAE3syQVZ2ApdcwAAr7UwPgwoIR1IP5v0WwHkPQ1qwoB1s4nWcwlfGRH1%2BMREPoCQOCFe8ZnycJh2DwhWDYqZrzXvgphmuol27I31SgHvQ8n2KL2qk14Aer2lLNjPw1BEjKHGzwXj1wEfGpBWwYiu8BXzsZn0wyoJ4IBuuZBE%2BVLu%2B9nw4uB17ohvExXwBSOutTz%2FNzj4bg1c%2FQgUWQiDATlrK42Q3ogkIRgTdahE%2FpoBYgo9DdR3QoM504AUJoChzGox1lrx4lpPFgYv7ABmOlOjOSuuWZ16HoMEwru0BjXSl92vnJg0e9KLP%2FeZRFYZE8OAITOM95gAK4qWIrKQO4QVS0URsVcFuYgpvosoN3WgAomCMTeAJNopkFiB%2B%2BaQF%2FSZu16eNaqIucUIEeU4cngJse6xa46QNha8jtPZgyORd6KYgTbhYAyZxRbheOOeVTJp1RRga2gBdSnpd38ZkCPuBcNgn4%2FJBRtuVXXgZv4A9XrmW7YuVHUWX3SGb9gEBX9h58%2BzSUxQxgrRfgWIQ%2FwGb%2F%2BZx7ktih8AVs%2FgNfkNNakIUnAb0%2FwAM8WIQFqhdKwOZFuJNi%2BZ53Zmf%2BkAYqSV%2FLOZ2C8AVyDgds0ANsjsp6CYdr%2FgNmfQZZ6FJ7oZL3xY94KN693cYx%2FybjIXHQUsBoabBlgkgFjKbMWLmTcGAGWygX2zmVnaKV3TnpC8ZoqElptGnpgrAFZugSU3GVYa4FjCYVk5YVle7pQC3jH9mPUJ6K4yBqp0g3XVbqk%2BDlo0YHoHBqoRhq9wiC3OriC%2BULvOJQgWmP5nieYU5lY7mGX7YSDjWXrdYKYm5lu%2BKFdlCSjNDqVQagtMCGZxCGQ6u0mmhMilYm16UKYwaYtTYIdbGwYUnrtO6Prj5lYsgGw0bs%2F4BsIVHZqJ7qqN4Io7bsyMTlpV7qpj5qqM7sp4iKjGC%2FDpKAHsMTag5tg5CQ1c4IvCg2XcqtOsZXvm7doP6RGHFtjADt3f%2F%2BZNz2kMr2bcz27aTm7OMGCc8m6t72beFeiGnrgs0EbtlSbddubd8uCNj2mUmIIScotL3ma8gMbd3G7qcOivImDVB2bed2beLebeNGbs5W7lBm7t1m7xr86lC2FfS%2BbuzW7lKtBYhJS0%2BtbdsWDPHObPLG7vre7cl26vsObfd2bfiOb6We74Nh8NWGcMve7%2FLub9%2F%2B71JNlJf87tW1bQS3bAX37QxfbQc%2F6g23bAlfbQqv8Fy%2B8B9h8cyGcafucOz%2B8N0OcdcWYwMPDBSPahXf7RzPbBcn6h13ahkPbRqvcQO%2BcRlRcsoebezucd%2F%2BcdcO8tUeciJHDL%2FebSR37Sv%2Fj2omD2UnP2ooz2wpn3KprXIPQfMXz%2FLiru7V7vLV%2FvLQDnMiN3KnNvPVrvOjVvODYXOidnMO3%2Bw4D9U5x5BCX%2FM7f%2B88D%2B09D%2B0%2Bz%2Bw%2FN%2FBAP%2BpBD21JD%2BVDF2pK3%2B1Fj2o4d3T3hHTqEPVSR%2B8t321Mz2xNt2xOP3Eyd21Qz%2BxX%2FxFSl5FED2VU5%2FFGX%2FWZbPXR8PXgNvUZt%2FTMpnXLtvWoxnXCSIEUCAwHeAENEAxt53bD8HSi5nXLXnYPAXZmR290IPajVvVjl8lkF41ypw5hT%2B2u5HJZ9u8O8e1qF4wXkAdWAAwbsAZ8gIctCPiBL3hw1%2FXVHveolnfqOHcM%2F6H3H1l3om53dw9EeL%2BMhxeNiedb%2FsZ3ENf33eZ3wCAAVugHgAcAXFgHJWAFeQiBlW%2F5l4%2F520bvhndqjheNiJ%2F3Zl%2FtitdvY8f439P4vdD5vfB4rPbwkAfykRdy8A4MNZAHeAD4EMAHSAAAJeiHKdAAfDgEAJiCrT%2BehR9vy0Dvo98Lnh%2BNpMcQoP%2FDoZ%2FaotcLtJ8Ltocre591pvdypwdzqAeAF6CHMBgGgLcBfuADAPgBflCDF%2BCHOkB8fmCDwnAAt715sy9vup8Lte94n49wvY9yoYf7dZP7ucD8qbD7lX32GC%2BGdJ92pwYdEwcMB8CFSwCAwX98OQCAwpcD3f5%2F%2FDkAe1YA%2FuC3BV64heI3%2FuNH%2FuRX%2FuVP%2FliIBeaH%2FuiX%2Fltw%2Fum3%2Fuu%2FBSPIBOLH%2Fu5f%2Fuf3%2FvBH%2FuoX%2F%2FLnhSwA1dAXxEigA%2B4v%2F%2FAn%2F%2Ff3%2FviXf%2BznBUnIAvev%2F%2Bun%2F%2F23foCIdWsgwYIGDyJMeJBXpQQAHkKEGIZfoDDprE2xwY8PgB%2F81LzgV6fjRwAENKBEGSJYuZYuX8KMKXOmzGy2aOLMqbOcrWw7fwItx8RY0KI0vd0yqhQmuGLFwC2Nqg5Msn9Wr2LNqnUr165ev4INK3Ys2EiA2EVdCq5n2qVI2ypVpwmMOrhFmz61W%2FSWN71BjzmIKJjPPXn06P7hG5ZCHiQAU%2Fop0YCv8RbIgh8SaKYOHefOnj%2BDDi0atDdbo0%2BjTo0OWDbVrl%2Bji2JsM%2Bzaocvdsq0bdDFnu3%2Bjc0eVLPHixo8jR242HvDdrJvrxg3dtru57qbXduYbO%2Byk3F2raxb48kMHIc6LG6YBQCh6aoatW9%2F%2Bfbr1lxNo%2Fu66tH7Xz%2FunJhttAIomHYGn9XbgaMJVlZyDD0IY4VfLKSjafxV%2BZiCGnlUHxnUbeqYdiJ95NyI64Y1HXkShNAZACKzIY00RD5UAo4wq4jfgiPyZyNmFJgrYo4YmJtgjgxIimaSSxVHY448gDglihx%2BaKGKP6JQ4IooqCkYAAf8RafAlmGKSl%2BOVPDrZ2pVBmhgliEWaeOSSc9JZ5z9Nmvjkhm5iOOWVVvaYJYhbclmooffl1yOaearZI5sj8okhnCPKaaellyaH54h6Yhipgn72CKiJgm5I6KGnFmqmoqZdySmGj0KZ25WTSjkcprfiKpamILqqoKcHglrldoGW06OpqCIrmKomLrppo0DOJqSsPdK6YaW5YpvtVbtu2OuBvxIY7Iiijkgqhscmm%2B6yO7Ka5pWxRdvmtEQOS6mt2uKbK7cYeksguACKCyK5IJpbIbrpIrsuiM3y%2BuyIsO4574jV9nlvvhdbum%2BF%2FQL4b38BbzjwhgUreDDCpyq8IcP%2F3ToMIsSdSvxmvbU2iLHNdGqsIMf9eawfyBiKjCHJB5p8sqEpY7gyvy1v%2BHKFPetHcYXX3ly1hDkfuLN%2BUHP3c4VBVzg0gUUbzSXSFSq9MdOvxgtpzBtK%2FanFVtPtINYEav0d19h5rSDYCooNINlll5kos%2B0y%2Bq7Tvr4t6czWzl235EwCwpy70l7Z94F%2FHxh4f4MTrqzh7L6b93eLf9t4hXEDG%2Fnkr4d1N4CmY7f3dJoTyDmBnusHeugQna1g2jqvXSHq%2FqquIOvhug6781zJ3h%2Ft09kOHe4A6g4g79%2F5%2FjsAwR84fNbFK3h8x8kfuDzAzT%2Ff%2FraVt0o%2B8plb9%2Bfj%2FiMXa2L3v4NPoPh4y49A5uMZ%2Bgikvo%2Bxz33ti55%2Bpged6jXnev3JXn%2B2x539ha5%2FAPrf7AIIoAFurYAAOqDPEqhA5zHwOw5sDgSBI0H9UFA%2FFsQOBgmnwf5wUHoe7A8I9SbC%2FpDwO1Q7oQJTyJ0VAqeFv3nhd2L4nRlOp4Zlu6F%2BctjAHeqnh9xR4m%2BC2DUTEnFyRsQOEn%2FDRd0wkTtO5A4UoSNFo1HxO1ZUIRZP17ZYvcuLfANjGOs2xumUcTdnpE79QnU%2FoeVPS%2BLx3qHiyJ05HrGO3NFi7X4YtUPKrWZ9dN8foRPI6Fiya4UU1rva2Jw3nsyR2IEkGSWJHUpS%2Fy%2BU3NHj7fi4yap1sjmftM0ga5NG7KwRO6YEDioRpsrpsBKQrpwOLB8oS%2BzQ0nq2vKXNcgmcXdaml7D55XSCOZ1h%2FqaY6hrdwhDnLMXdMWJ5xGTrNElN2FnzN9iEjTZfw03oeBM64NyNOJN1TOgk05PLhE4zWfjM6UQzgtN8Z77i6ZyBJvGgERzluNjZuUQOapGMTBU5VWbOhqFTR%2BqclUXX506GSs6hupnna%2Brpmns2J5%2FN2adu%2BpmwjibtoywLKeZImrmFojRbKrUNS13jUtXAFDgyBQ5NbWNTVP2zOQHVJUSBU9CIrvOnJw2q1YZam6Kq5qipSepvlvqbptbmqf4owynadLo0nsorq0YCKldx5VXYgDU1YkUNWXdj1t2gFTZqbSRbhedWtcHVbXKNE13riqm7viavqNnrafqqm7%2FqJrCvGezRChu%2BwxIvsXj06Vy36liMQdY%2FVRWkRF1IUYGVVHsYLZVGN4ojz%2FoPtOMT7UipFdsSmva0DYXf5eJqpNeG7LcynO25amtbRInUo6Vb7W6uasbWAiehLmyscOuUWtVI9jSUXRBygabcJzLXYM59bkSiCpypXpO6urEuaxdrr%2BB2V6jETVxP41Ter52Xjekt2XrZ%2BxD3%2Fga%2B8pSvbegLSvvSLL%2B43O85%2B0up%2F%2FotwMIcMNEKbGAE70bBD%2F7lLcwgDDn8StiuFAaphaWE4c1p%2BJscHpuH2Qti3Yh4pQyujYN5id0uxlihKE7xY1e80xZb68W5C%2FJMZyy4Gj%2F3xrbJMVF3DJseZ%2FPHu9HuErlLZCR9NzXhHc14RWNZ22DWNpoFD5Qh4oBQHIJGkLgEnX8AAAcEYhiXSMFto5vT6ZL4aVrWDZd3M8Qv68vIb0Vyn5SMPSYz1cmfa%2FND%2BPAPVjzkMesQxzqmAIBD6OMS8BhGitqL2w3qFoCBZpyJKzZkRHtX0Yhl9NQcPUFIn1XSvaP0D%2B6BD0wDgA%2FyCIGXAKABeYQCAGHoBxEK5%2Be2AnpN6SwxaRn7aljPKcyoGf9zgQbtS1vDENeA1TX32uwAa1zCGsAOBbJDoQQA2GAfHCkCP8ZAngBMIx763je%2F%2B%2B3vfwP83%2BcgRsALbvCDx4MY40A4wxsejyhQw%2BESDzg7eDHxi%2FfbHde4hjsw7vF6eBnbdhNEPTyOcXcsY%2BEmvzg7CL7yidcDFGAo%2BcsdrnGO11zivGBHzh0%2BjVJfJhDi0MAwME0Aa6wDEtbQRxE0IgeSPP0Hcpj61Odwh6tjPeta3zrXu971NqDB62IfO9nvgIY2lD3tar%2BDD9C%2B9rd7Pexwn7vW0SB3utN9D20vBN%2F77ve%2FAz7wgh884Qtv%2BMMjPvGGxwIT9oB3vJ%2F98ZCX%2FNz%2F9wAGHzie8m%2B3u%2BbhfvfOp70NBeASEfAxhhBYAxfrCcF6UnCPSzgd6gB4wRZqb3tBJCL3ut8973vv%2B9%2F73g90AD7xi2%2F8RPjBD8dfPvMTgfnmQ5%2F4w48%2B9Xmf%2FOpjPxGOYEIbHOH974M%2F%2FOIfP%2FnH74fyoz%2F96vf%2B%2Bdfv%2FvdjwQqOyH71r09%2F6k%2F%2F%2Fs13RBuYMH%2F9N5%2F9ASDz5d8AHp8gjJ6KBMI%2FGAZikFoKrIcDrEMopAA%2BBAIAKEE%2FbAF5ZEY8uMMHgmAIiuAIkmAJjuDAmWAKquAKuoPCseALvqAHQpwHwmANmmDF2WAOluDG6WAPgiDIkUI9%2BKAP7twQ9uA4%2FxCDEepgPQACySlhDqbcE9ogDkohDMbczFUhDPJgFrKgOhQhF6pgPGgD0EWEDYTBGV6EEpSAPLCCBkwBP8jB0VlDCUACPriAs51JqnXQqqVOq00NGGgClZQLuX1HNgDDlcQDIMhaaNHap4BbE4lbZhEiDVHaQ6TeQ7ABPsjDrwXGFCCGPlwgHq5KtDnKtAmaH8pNIF7JmrmGISKiIloOfxmXf3mI%2FZTSJEZRJcLbC0AE7RUBmdCenfVZHpIitDxbH1abvagisVyJK%2FZIIi7ibjUisDyiGkWimuGiG%2Bki%2F5waDumhDvHh%2FCRjrSzjqGQjdDijiUBjLFbYLF5YLRrSLf8ayzZmUDdW0TdeUTieDyq2TjkOYjMe4jPCYvxcSZmFxpllxzXWBiumBmdx1DF%2BVjE%2BjCmy2jhCjj8SzDk2RzqOyDoS5DSGSzUCk0J2h0aGEz3akD3KET7SkT4SED8yD0biD0C%2BYjSqGkgCjEh2E0m%2BBkOihkOajUo%2BEktGkkuGEEyuj0wiEk0KpE3uIU5%2BjE7iE0%2B6hk%2BeBlAO4yh%2BZClC5D5aZMUoZdiY5G9wJIh4ZHEp1nHBIymt4ljWFEpOkVCuElG2klH6EFIiUFgCjlvqRlluyFnKYlrSoiDCljzqD1zCkVwiE10qk11ukbfVRqGhESAS5kz2iF9iCGC2o2D%2FvmNlmpdhKhIZfphiAhRjCpRjVhJelpBeXhRTquNAouVoDaYttuU8iqaNkaZUmSZVoWYsqaYQUWZtXmZAvqZTgiNU%2BoxUxhRVqoZVjgZWiuLhSKTLUCQy%2BtZPsebu8KVtYGaFaCaLuaOLrWVFgWZG3WaU5eZ77WZ89aYz%2FeYXZadsuWZHwmZgymZn0iYzHuZ52paU1QaVfZWVvQaW0RNkwoZkUkdw6qeJdKeCfOeRhWeSjWdhCmdoGhh0EeNWGiNyXhJ2eqZYzqdZ1udm3qd4fmiGlWepBINDXKipdSWqTWfTVKc4XudcxWcFbWdtNOiBPOiiRWijTWhypei5rGiL%2F7pohsYmdb7oUX7lH97ocoXoX44oeHKmieanOdqmkQJPeibYei5YexrUe%2B7Rk6JXlGbmlEJolUroicLYkKoXf26Uf8IGgOKVgLoGgbaUgb4GgvqSgmLpcNYkO1Jpia7plf7jfmrpgXFpiHnpiEnbkt5lk6Yim2qnmXonmvqomgIppT6amxIYnDKSnL4GnUaWnaoGnhqVnroGn26Tnx4qgxInfRpnPnKoKAXpZ1aoeSbq9ywqjjWqjoEpVklqP3Iqjlqqg2LqrP1ord0qgHlqh4Gq94jqfvxqlQXrdYlpLZGpgB0rjyYrIy6rIzYriuYqbUUrN0LqSsYo26Rrag5rTP8WK5QCalMKapoS6qYaakZmaaJOq2qQqmpda329a1LGa5nOa3HWa6beK7MWrDU%2BK42daz2261yuq%2FHMqFfWKGNt64Z1K4H0qLJqKsPmq2VaKL%2F26pRVa4AG7IMNbF42LMcerKwmLMgurLi%2B7E4%2B7JNFbEpO7GJWbPlc7Eu27GrerD7lKGzsqMd%2BqzSGKzWOa5uWa3PtbFz2bGn%2B7IGgalipqmqwqj25qr7GrIjOakvWKt8op1IxZ2o4p2hAJ4ZqZZLKaNUKa8YqY9E2WccCyMeCa8ja7MguJaKarNyq59UKUNAyKd2So91GGt72h94yLd86reKWVdqixtqGhjoUaeD%2FIql9KmnZQhPlLsjXkuyIJG3eLu1NNm1IPu2S5eyksaiW9mtq%2FCt4mWqAGG6kIu5FSu64Ma5%2BOC7qQq7q7u5lge5oWC5otK3oCG6XEu4H3e5jZqs0bayM9e53%2FO5Tpm5Orm6nRu2b7mrsosbsilntokbW6tXWpkbXvpTo%2Fi2sBqqG1mzk%2Bi2I6k%2FmqogDKMEU5G8IPITUTQGZ%2BC%2BZKO%2FmkmjnZu8IFe9Bsi%2F9ui%2B9wm9v4Wc8du%2BnFgq98QM%2F%2FMMGboE%2BrMM%2BtMgGd3CLuK10PnDcei5CJTBoCMf0Gm31csf1HucBJ%2Bf23lrr7hp%2FqgE%2BKMEL2IAGNIA1qEcg8MML%2FxBAemhAIOwDL44w6ZQwu54wdKgvUi3wXrowdsAwrcqwEJ3t5NpwufEnJKxD7bWeBQJAEWhgCYBiGWsgB57sf8ZqAZtwFkPiT4HC8GJjFU%2FHFZOtHJstDYdbF18QlB2dPogDPohDCmjESPQAP7BB7HnE02nAC0iyJOPAMXjDJWNyJmvyJnNyJ3OyM%2FCFJ4vyKJPyLTgDKaNyKmcyE%2BiCKrvyKGdDLLzyLHcyMBQDLeMyJp8DGEhCLvtyLGSDL%2BOyM9iCMNPyOezBHpyDMc%2ByLZwyM7tyLEPzK0sCGCzzNKeyU2CzKgPzNqMyYHAJAWzBFDhAEezDIcSe0zkyHGIgnf%2B58yXYAi%2FYwjzTcz3b8z3jcz7f8y3Egj778z8DtC0IREATdEHbghFkAjAY9ELrcz8z9EPbcyw4NERDNDFkgSQQA0VT9ERrNEPzAkd3dEETAx3QQUaH9EIP9EmjtEobNDFIQhaYNEsHtETLdEGDdE3nMzA0xKk4QDqwwgvoA0cQQT%2BEQQrImxqHARvbsRuXjjeg01Ln6bukWavW8QQrSOk27ulib%2FACjMxB9WtMdXdkDpSFwDBwxAvgwyFIIKapAT%2F8wFoDABu4dXQyMdw6MR9%2Froda9YFgte9qdQxzdVT68Rzvtc6GcyjwAyuIAzzwIh%2FwAy7QAy58iWPjwj24ggD%2Fb%2BnyMmrz8tDzumvuguVXV%2BXRvkZfW%2B9fY3Fgz7Boq0ZY9yRpq8bgOAAbwJkSE0AYhEIg2AcBjEFu28cSlxNnZ5Fn%2B%2BbQAicL323YSunYFuUTu9ZgO2xhT9rUJqZm%2B6pw25F1Z1n0KhRyL65ynylz16VzL9EW%2B1UKg8bxfkbyHunbcm4cq3aH2ihrqy1sq4ZpvzBq73F82yp9o4Zrj%2Fa%2Bwm4bz2nK1unK%2Bhh3b5d35xoeQ4ceNzdeW495Ey8gUyJ1pxKBj6qBlyqCb7dxw6d%2Fn4Z6fwZ%2BW7F%2BRzh%2F97GIjwaAN6d9%2FyRiZrh2%2FyeHA%2ByjkjeQ6fWCku4bL%2FfM7m38%2Fwrv%2FFIx4A44jRc4dk8ScbsniI8pi4sGiXuGiecxio%2B3hE8UdI%2BkhecihhuThlOrkr8Sk4epk2srlIeGlHcGlT%2B4lTdmjqMRhaMZepMIjF%2BljH85km%2B4mDMTmc8tvez4nzYwwjZxRc6mBPO4uX4vmPurjdOuh7MtCf6LOnwgkkfxWE1xa4L3pYo3eFR6aHDbbaBvZcl5QnK5Nnr5OOl5mBc60K56Z6hDOCzCEwyBEAzBEfwBNvDCT5ZBEARBKdD4pfNVphPIF36gvrnDq0%2B5j4c3kAPHFfg6sINGqIOGQaqwnI8gRP4VpSf7awu4kYpqsofDuKNDPEQXgI57ODw6jv9%2FzDPkAALAe7wjwAnoQVeqAAIYwCIstbBXFrH3DjYgQRIIfBJAQR78wSJgg4izeXNA%2BGvce75XJrVnyKiTl5YjrzpsQhcMfBcA%2B7OZlTtMgsDHAaSq%2BYnguarTEDoQQhCoQMvngB0k%2FGfkmDssQstDwYtK%2FGeYrzo8wwzIuwdIgLwvgrO3ALxPwr7TeWesMJp7hjoIQ9DLe7ybwCY4O3AsPHA0vGsUPQIc%2FbQ%2FizpAJNg35MV3xpCAvbJzyBbHOhREPbxXwTP4mVnFgx0YgAEEQbyWPHtndhR1wxG0PQK0wCYI4swTArznAM6T72nsvBDEexKkwjPUQhx4ALyLgDD%2BbEbHJXuyM8fWd33H6RtnIHtwaL5IqYO5U%2Fo1bIfn64jqHzfTw%2FozWMDfw7sFCD6AXP1vZL1qcH7Etwalo4MwwH23w%2Fp1CEM4JPvZc8bZg%2F0zhMNmUDrPBz86SMfzP4MwdIPvDzk%2FhUMS%2FLy8B4FoyL0dwPsR4L2dP%2BfJ%2B1OvqkM3BEG8W4AOTD68e4Dld4Y3AIPYXyXyckjhI8DhrzdAoBM4EFi2gQLVHVQ4MOFChw8FRjHWEGLFh%2Bo8IdBYxZ07dermTZKgsUy8bnHI5AnGJYcbYTM0TvJIiEyZMsK6uSHTB92iKjrIlKLorlacJDnIVLr28Q8ZMpMaqqP5lKL%2BRavo3IHR5O5q16vqnlkgWcqToSojEajoRlFdvI%2FxuDKM51Zdx7h1PcJFlw2YV78W4wECFO9v1xYx4x4s6C5YmRkWRATpEy5qODs5LLQgUytIjip1L%2BcwBGVDi0Um4%2BTw4CHIInTlbqmzrNrCiSCGPha%2B6k4TmMSF49nRiGCIJ2ybcgwndBeuu2vXfqPD27aqu7l1684TjuBIYuvTFcam6%2FZgW712yetG2MwBAPfv4ceXP58%2BgATNqqp3tx1BFWFgy9DIgCvicoccW7oJp6OoFqwrHAU%2F4mqtAgnRKIeoCEtwQYGAIWdBjyZkqMEMO1IvoolMfCieODSyIJjqjrD%2BUB1pLDAgs%2BFKgQmBSezpQ8Au1BEGAQNOiNEAjRbIgyt3FhFrOAagCCceKAwwYIaEwNpgSEOiSzGrrVIsDCwnDbGno3kMGW6RAmux44gj3JhEOumEcSPOVKo4whDKwvEpiDJc4ytM3QIbbFCHDtuxyw47EWG44Y6gTLYYBbRSASvbquJIJw34A50gHtUoiXJ4QYfSUMnI71CseuuyK3W6OUFU7OKRxlEJuljSlz6SCKIJMUrxTpg%2FnjjCDlkS%2B8POVf7485k8NOpOOnUmcSOILgjpJjF1eClqCDg9yU2dWuzc06wk8nhGVa%2FUYa%2B%2Bd%2BGd7751%2FYJVBVE9ks4dIRD%2BMOEzrDyRggURWjBWUlne7KOWKlqYgYwE%2B8ghskUScqdCBC7EqpYuJIYhiTKw%2BYgWJI5wQhg7dIjMU%2BlqeTOPbsiY4YQnoDJRInpNdCcJGRWKxw2NTggHGw9CncGcRDfxxMlI3RHGSQREmAGtE9ZyWiMRYFBAozjmKUUjCWqpaxGg11oVK61cNXuhMTVaDiF0EuVIujKejlZddyapcgZHEbAAG2l0CPUIZohRu6tCCTMcbsQWIoYWWfvOczgo2vpjuB04Hu7CeK4YboMTPOjGx8ihcBIPYrxGwIM%2BfBouFZxzblW%2FSXD0jhBCagkHq0m0fFSCP5Y0hOjhJHCjoRb%2BjkzUAEIs5y5fKIr2hKuEvKgbgSsmXOTIDUAdTgSh1Gu3vXjJh3feMDEaTiaGgimlbLzRejQIBTfRyIMNjtQoiCCqHI5Li2WkjlXw7VE5wIY7KqG1tAxpOGXoSP0Q0ALk5Q8BwFPPzQynjsAhAAqJGwiTvlaLbgxPBZ2YBMUSVYbeReojVsPYM9yRJgQoIBXzIINGhqAtkUAtZBuMA1yeoJEuePBQX0qb4hASlrZ5B3oImAFWRtc3AuagG%2FGA4HAMwJHuSaAFThJCX5BYEcQhMVHrU8gyxGA%2FT8zDHSzSSCfckRzuoGMe6JDj5jqHgA2kohulCMe9EFAme9DOicD%2BuJgKPEFHO8RhEt1AIm98ox8ZUq06%2BQLL8Ag2PKoRxUkiUIEC14QOHRHvWdHqSIA0ogJM3g2VeuSbASgHwuGcAHIISALsKiK%2B8u2SPufzEgQ3oK7yiGtoGqGBE7qHgFpYkXi9UiACTpCE3umgLRe7kDlmkDwnCAEtp6kEA4bTAifwzQLCYOZwgpAEJz3xgihSmwY10kGFAFCPOBleHMzElcMoAC0woAydnHQadRRTAatQh47iIA1hPENHpbDHdi7UjVsFS21GDONFlIgAtwmEcxq50jOGlwSc%2FAEtebDHFWeQijysghL2E4on%2BFaJI4ZxjIorY5eIwQKS1PEjPkT%2FB9%2FgiI54NA%2BPGnGCW%2BKRipEoIA%2BLWIQhtJQBW6TiUTMjxDPmgUv9yI5QqMzYRTbRAg%2FMQFu0qIAeYbgzBARBGuoYHTtHaYdN%2FHA7R4jHM3pHiIF2Lw%2FzqAVauvAMbPwsJvMYWzwdWQWyadUhuuTlY9%2Fjy5xtJ2j0AssVgrADYNgjHnKcxDyuWKZwQK4Fz7AHtHgYD2sOtAudMa09KPWHeHxTf%2BEYJFpScU4EkMEdPdJIMBm7EAy%2Bs3tfHYjPgCa04ZlxcY%2FaQNgAigCwfQSkM5QFNnonAe1KQIGEiIcwtCQBX2TEiYqz6EXXltGNClWxTsSb%2FWAIkvbewB1X%2FKx1%2FtoLhW48IxztjcNMkVhTw920cTTQCJcE4g4nbO2nGgFfDGXUUQQMESstxSIFESDTLoSqb10IIyQBDJF4tNe4DDHxfvsYhwxoJJGQW8R%2BhXGrF%2BnIrh0JTrRCArRnPKMbzQvCPNzYgmm5g1JQsMdhxduRTixWN46F7GMlqx%2FKlo0hbJnLMSpBiCr0rg8nTW5dKFUSdchCa8FUbQDjMY9u1GIRXTCBRrhgD9oG0i0EXcU5FVALj9SizMIszHDNhty%2B%2Fac83btSMRHwuoEk6lFCwJLVJPCiS1oXuzO0wKUtsIEKWOCHRNZIHlDpBiIWEW3oTa%2BT1ivhGQj6q%2B%2BFJjog%2FijeigVRuhuwNVquMGpTC1Uwuj4UgRWS0wMnTmcM5htF4yHDok6YMPX9mg50kAMd7C8HlYDLJKBAwAOHuDAg1k%2FzRNDWgzyIPGCJQxC0RMFJBAMtmbY1KN2hIy4k7sbcsYcbJWDrDayz2NejtxthIEu11AWClGyyu54MZfyEydnWZQs2aoEVOlXhzf3TyB%2B8DE3KeBoBdnALn9F6ZoxRtwuftPiE5QxOBGzCI3id4Z0hKIK1CLDPwVUIoFflDvIiwAkjat5u5yGN4SlaIIkyTe%2FWFCSxRJq6RCsoOgC5CGwIQxmVoAWPsXLYGdzLAtCtaKl3zRD1bmuDRvZqQ9yx%2F%2BRXQ1AF%2F3QHrRmw3e1SOOzH7TUZY8LZuczFHcTgFwez6g6Jtg0dkOuCmeJBqWVTWB3BEEs54fKMSdQCG7wQRioWIUJPxAFyR7C5V7ytG1lKYBWJiUcXWtAFoTyD0SpAwooR4IlaEE%2Fu2l0TQuld13trJO61D51az5B7jbRAHVpPcMGp%2FBcnJ7x8UW7yKtBiCA%2FGgwwLyEEewAJICwzBDjrCeME3TimPj6vPIs%2BYDo4kAR24YQhCTLl0%2F5Oll5%2BzsjRH6%2BcHgnOzJfMJ7jsZWjxAGNxB6DSC6JprEezhhiKIMiBN0qqLhuahiW7JHmTBA4okbOxFfvBvN8Cu7tgmkP%2ByCiQ8AS0IwR5kqO0SYh4I60rYzu1o7QqeIReEQRZqgRZsoe4OQsDUJlGw5Q980AcXgRj0AEnKoBZSof1CLo8koAxKob1GTsLoTpREZS0UkAZsIY8MqCOaKFfMi6vExOX87S2EgWgMIAnsgbBaYBPM4RpQQI%2BkAdEM4RmCoRZKoRawTkdCSah072JmQBiCQRhWQRaCQV3OLiHiYcE46Mg0AgaOj8nEBOGYr%2FkWblB0pLSQKhjIcAfeoXlYQKbsYYO%2B78s4bvxAzsysKR4I6XvUwR64wP1oSwLiz%2BUKiv5mbhVqTjf071Aab3iuJn7obEaGjiLK6Lv4hmsasOlmKLf%2FrmgHuACQVCBkhKqVAonb%2FuK8PDCj7EAOg4EQIEcEYOivhOgjBmhrMg4FoSiVTCscdKAFdgARqDHQ7s6mOExARMAWsuFUVO7TPGIM5%2FEJ84juZAmaWkCB4oAYlMZ%2BcgCQFKULI0k%2FWlGIcCIVYOBrKGEekJAM7MEeKAGcJCBY5KgL5sEeSuEEZqAKQgYP46Le7KoWOHITMpIMVCAH%2BkC39EodDCH6FBEBGBErkG8DpQMSIzFenE%2F0ZMiJFgHzGA0BNwwBdoAY6mGHKijjKmsUP678rGkemqft%2FIpvDu8VY1FLZrEn7Q%2B4cNGdMkgWRulRREAPsIRGjsQAT6BK1iQe%2F%2Fog%2FYRBSDTCF6irRhKtLgiLgfpFFqJCqexH3AzHGsPuA%2BWOeNxROpywYZzkGc%2FJHMGCbzQjmWQKBzkqHgesH9PCFryhG6DAFz1ASTgqFeQIY5Zyc9orCtXBDsSif5aQVPBmePrHAoznkbxQTLohNSXgBPIRCqxDATfADeKAgHikKIWADGTFAHLAHKQQAfJQJT2CUjagC5JgJJaHK7pHAWZAajTiBqrosHay4QzuEccnKIVyEtFHGn3xMyBMI3bACZ6my8APzDSCFK3SQuIhdZyoCnixKznyK%2BdPLG3x%2FsrSJ3ejGwgBCqBt2vLgGEpFILrBDuzEz9ChD%2BwEA0%2FCTv88oUPdABor9EIrhhKe4EG9gBZ%2B46CM6h39AjF3LUh8US0RIXHAIpmGwwRYDm%2BqRAT%2BqcI4ZTjwYBk0czMNRXFSYROUdEmXtBTs8SNSwULd4A9gCCFk4RmEwRM8YRN6wqM%2BohaU1OsSrE3sxA2CBTawYljK9A8E8MN28ws3SHBmrhZs0wAUYMUMwOPQoYkAUwT0DG7kMiXjoEqCYB%2BVJ3%2BAhE50KlRy4G60xwBUoBENIHR8cvnUsz6GssnUwQ2sRwKqQFLCoYmqRAJgwgCC4Jx8tC6EoEp%2BaMy%2B5hmGSm8%2BYimrRAECx0rQIYE0wgGdRBmvZuaoqm8w1C9y0Wym4yP%2F6gJNP%2Bg6DsI60sM8yGPvmpVZE8wj6uIanAEh3AG00IISXBT0OjAxu0EMvsApzJUMrmpFzWERguA7W6JKx8Up4kB3PghPvnMGaGYcwEgzddBY7eJf7aIgEGLv8iXBhMACPOAIpMEe1KG95AY8FAJayUNZ64JgFXQ33lRMwoEQhuBej8A1ogJhvvMIGqESnKIme6Jdv7MM%2FMwOnEIwEWITThZLnqEMcuA7dQBlpcMW8EBlc8AOyiZeycAOECIY5JVe0fNS1%2FNiF4Io4qAKrqAKyuB1KiMPpKAJphYbnEpOnmFrEcITnIpDnWoRGNCpuPQjzKIKuqAT%2BsSpusEWEMFt%2FwWibaUOLLYWOgdqbJH2L4oVvZS1SIshW8clCbZs%2BH70MMO17niBHfbOYh3CWiPEyvQiYiG3IwSlSPs17AS2ItzBDfLnBJxglPLQL%2F4WB0MvRbADWesiYpHVOaAjPbBCdQsWK6h1YCdXX2RXIRZXdiV3W%2FjORCxVaeUjU4HXWWtXW8mBGOjCLvSlRLR1dpm3eb2DYLGiRDrEeavVkqJXem3GLOuudHEwcKUjGC5FTb4VXMGkSG%2BhHIp0L%2FYVBzN31zYXIgYqNSnICdQDfMPudHHQGbK1fde3SINXeOGDeNHLG26wfedXM%2Fv2ovQ37MQXVvYmanDjomA07AK4SC%2BXX%2F85EwcX%2BCL6BAre5AiqgBLmpDAe2NT4t%2B78t33RIYNxcIAJ2D0M%2BKIQ2IU%2FuO4aOIxS2NTEl0K7wZHO90UTF4PZV4Pft%2B7i19RyuLEAFntR%2BBbad4XDroUB%2BIhjGChnuIDZEwdvWIENon13GIl6GL1%2BeFqYtisueNdgGAc3GH47uO6a2NTK2E0bUjOtWH2x2AO1eItpuIvr7ouLdI5NbYwVp47D6IxNt4jZeI%2Fr7o2VOI41N4w1E5EZcojDJI81s40Ts4%2F9uIbDSJA1k5DRy5ANx5IVR5Hrbo1NjZPDDpLDbonRi5R5WIqLlIp3TZNx0JVNTYZnGJSRSJQ9mJIZ2Hv%2Fww6VDUeV95eRW9mRXzmJY1mS5ZeYv9eWNROXTU2X646X0cuXH6sB3gWYFUeY5ZiaddiYdw2Z1UaZd42V0Yub0QuWd02WL4qWydiaTTdjc%2Fl%2F9ViAPfk9UoAVXAEXcKEIACCgCbqgAUADIEEcXMEGegmQw46cJ9mFTVlt1Nls2FmFmfmdnXnX5NnU6DmM7PmQ8XmV9Tmb%2BXmTP7qb%2F9k9poAfrGEYrEEJAGALZJqmbRoS8CEQxMEa0pOL01g3KHqaLRqd6fik626j0cudLwqeLyqk0WukkaikT1mp2zml0Uubjdifg1o%2BAkEeQgA%2BAmEdNOA9NEAeLuGm%2B8Ggh1ei%2F3etqJnYnMPuos0mo1eFqS24o5%2B6peMZmudZmue6ffF6ULB5q1d6l%2F06jLyZFehhGIYhDNzDsSFbsm2AH%2FgAAICAH9SAPpoBk1PEGwBbfr3hqEE7f7F6n6cYDEDhtNUDqsNIqi%2BKqhUHGEq7SAub4UDhjvs3sbd5il%2BaAHDBGviAFfhhCgiApvnAFfhBCS5bDgDgB%2FhhDgCgCA7hurHbFoBhu7m7u737u8E7vMHbFmJBvM37vNEbGGLhFtK7vd0bGIwgE4rhvelbvMu7vvHbu2PhvvM7v5chCyRhvvs7v2NBuwccv2%2BBvw%2F8vZeBDuhgGRa8vtc7wumbvCn8vYtBEv%2ByAMIvvL33u8PdW8FB3LxpIQHexQHaI61DAQBQHAA%2BQK2fO7r5AbpLoAhs3MaVgBayYcd5vMd9%2FMeBPMiB3BluQciN%2FMiRPBtuoRiSvMmdPBuY4BWefMqF3Bligcqx%2FMe3O8u5PBvGAcC9ocuzPBacQcyxvBjs0cynfBz2YA%2FGQc2n3BaYHM6d3Mrp3Mm9QcPf%2FM6TfMv5PMnJ%2FM%2BRvMTrowF%2BoARYfB1YgQAOPdFDIQXw4RAAQAn6YQrmgwA%2Bu31FG4dvu0glwrWj2IW5mqNb%2B4rbV7ZpSrBnma6Teop3G9QLY9Sb%2BZZfmgPkYRheIAw4O61xfQw4O7nFwQYuAR%2F%2FUkBe4NrU5HrVj3qo%2FyK3w0SvP4yvwwi2kQjVA0zV65nV%2FTa1m1qrL0rWPdqr32UL5AEf8OES2oPczR3dq3sd9AEfOtvYmf0vkj3blx23ud2MfbudpR2JqF1xrF1xaNtwrBqj892OYf0vwL2vxf1dQqAIIPo9Hj4G4EMDiuAFMPXYDziBB1nbSxmpt92Fof2R%2Bl1x%2Ft1wAt5wBl5tCv6uD143eZuF972RG96PhVrTOX6UPf6i7HpVnD1FRt68St5wTl5tUl5tVt5sWt7nX%2F6S23fhp32xkcibhVecDafeSXrnw6jnD%2BXnTSToETd9WfrUR3uqsT3rCbvpD9Pbwwjq%2Fv1d6hWH6pXW6tUG66ta65GI6wfF69UD7L9O7BWb7Ns36Vdl6bte7SuK7ZHI7U0e7jPopQmY7s3G7msb7xVH78OE73XD783GqaNe8DH37O8%2B7adY8RWH8Yne8d8J8qte420454f53isZ8dd55pt66NWm6M3m6OHxSHWe9G%2FZ9A0H9XNf9Y2V9efe9UMZ9stZ9nFQ8wuD83MO981G91eF91eF8A%2FF8Pee9nNO%2BNWG%2BKvf%2BFdF7i9V8leF8gne8g0H81ME%2Bv9C%2BkkN8LeZ%2FK%2B%2F7Gdb9Csf%2BK8Z%2FM0GIJw5Q0ewoMGDCBMqTHir3MKHECGqa%2BYAgMWLGDNq3MgRQIJm%2FuoiihxZ0JstkigjAsuWsqXCKMZCupyJrtwtmjiLDcTp0h0YTe54umwotGU2YEVTxgMEKF5SlCufkrQpdaQ7TWCCVo0ocKtIol4XTqzYsaxZjR9lhlVocu3DqG5fxoyLkCpdhDrvHvQJVK9BsH7RHQ1McGlTwujgBrYb%2BGpWxF0RA9Y79qzls2kRt0WsODBMtXoZB85LmK%2FWwJP1DiZs2CnhzqFvlsZ62m9kwqnpVr7Me2Nmwptfs0T8mbBov6Qb%2F6ytNzfd1YFbcx6%2BWHZj2pB34nYYeHfv7xZ%2FBw4eGLbe4tURo0vu17Rk7oGh%2B5UuHPHxu46Z372NGj5liuAF%2FiieX%2BT5Zd5d6Pl1313s6eXedojJpxd95VGnoHXtYUcYf34555Z3AfI2oF4F6nUgXQnGpl6D%2BC33XoRIscaUaxXah6GDGgbGYXP%2B3QViiJaNeFeJd50YV4p3LUgXi3Q92B%2BMiFFooIUqzvbYhto92R2AQIoIkmYnTaceknQpGReTcTnZYY93SXiXlCZSmeSN%2BOVoW5ZrEvZjl2UJSReRdBnpFplxmekWmm6pySOUMh5Wn3F0NmmnXjve5eFae%2FLJkZ9xARqXoGsR6pahayG6lqKWsvlcjNHNKCakiOWXnXqXhpWppmh9CVyYjxIm6lqkhmVqWKjSVWtYbtIFZ5Fy%2FpYZaZqT7ofnoluShWufuo7Ha43EzZUeYsN6VWxcx3qVbFzLBtpsoc8mGi1dlRqr6odcXtsRp2556haoYf0aVrBehbvVuG6Vu9W5bqX76bqjtnvqu3HFS%2B68mNZrr2%2FZErjtlGN6e%2BGK0zbpIoSEIbyWwvsyDKzDxELslsQFU2yrxRdnhO9a%2Bq7Fr1f%2BegXwVgJXRfBaBldlclgo66zyvyyL6%2FJaMBMts1e31nxzWDmHtfNWPW%2F1c1VBSzV0WEVLdbRXSWu9tM9ND%2Fx0WFGTPfVWVV98tVdZe7V1VV1X9bVUYT81tldlP3X2VmnrvbbXbQv9tldxEz53VXXbe%2FdW%2F3lvtbdUfUv191OBJzX4VoUndXhViWu%2BuN%2BNi%2F34VpGTPrlUlV97eVWZV7X5U50%2F9XlSoRc1elWlF3W6VKnrvrrnrQv%2BelWxEz%2F7U7XjertUuUu1e1K9J%2FV7UcELNbxUxQt1%2FFPJa7%2B8782L%2FrxU0ZM%2FfVLVa3r9U9k%2FtX1R3Rf1vVDh48n4nlI%2BnpwvKenT3%2Fq81z7hve8p8SPg%2FIpSPz7dLyn5S8r%2BhNI%2FofyPJwHEyQCTUkCcHLAoCdTgAv3XQPE9MCkRJOEEhVLBLl2wKBksygZ50kGefDAnIUvTyLQUH1bNx1W9%2BpiV9AOvIE5MTzSr2UVuKJQcCmWHOOkhTv5%2BSJMQ0mSERSkhTU4olBTqcIUebKEAX1iUGIZxhjypIZCoyBMr8gSLNNEiTbg4Ey%2FOBIxCEeNMyMgTM14RjT5UowjZKBQ3BhKOOJFjiOiIEzviBI8z0eNM%2BOgSP%2FZkiHkqmREnhERufes6V9KRE2MGRWtJESOUpIklaYJJl2jSJZxsiSdbAkieCNIlhMSJIe%2BIyC0q8ouM5IkjfQlJmlTuBXXgwwouooRAhMFa1dyCK2GZMRJtLE4dA82cQBYrUFKriFEqJcdgtcRZvahaZSkCPdYhD3m8AABh2Ic49HEJAuBTn%2Fz0Z67EOaRvMiuc7CTMLlPSS5z80iijfJM6wf6Z0Ayl8k60auZMqkaAYVjDAS%2FAhRIIIA5cOIAP%2FLABSU2KUhtgjKB%2FMqi6EHrK0aySWOZMFaNa5ShTKhGVTIzYTeXWyo6kAB%2BHsEERKvICfQQCAEXoxxZS4FSo9iMMGyFAM%2BKhjq569atgDatYxwpWd4yDGO4gq1rXulZ3EGMcaWWrXOfa1ShQg6t0zetY08oLvfpVrO64xjXi%2BtfC1gMMoMBrYQvLi3IQdrF5NStaIfvXegBCEPWgrF%2FdClfNRrYcvHisZ9kaD1CAIbOjnWtgB5tauvZVtK0VazymsU2M2AAf4hDHPYahARvwQw4A6AE%2F4OBb4P7gtwAIwQ%2BWu%2F%2FcIlgCFNCNrnSnS93qWre6mpDEdbfL3e6CQhLa9a54x%2BsDR4z3vNzNribQy97qgre98I0uKZgACFLEN76SWO992%2Fve%2FbKXFGAAg339i97%2BEni82T3weUmxhygMWMHeNTCE05vfCXvXEgXoiA30YY0QAGEfciguAIor4uMCVwmQSHGKDxHgFrv4xTCOsYxnDIYs0PjGOKaxjXPM4x6DwQdW8LGQdTzkIsM4Czs2spJ9wAQlOznJTh4ykqNsZB%2F4gMpFnjKWhQzlLeeYCVf2co%2B1LOYcd7nMM9ZChjnyAnxAAgAkvQRVnxrVMKRgH3ywKlY1EoCtuuPPgA60oAdN6EL%2BD%2FocaDW0ohfN6Lcy%2BtGQ%2FnM83GHXSUf60oZmR2gxzWlCC7bToAb0YUlRj1CHmhfsMDWox7EMVXfasph1NaeXAVdZX5odibY1pOth2lLrGtKf%2FjWkUS1sRsdDG7W9iAOs8dGjHsIB63AFAeSQUmizYtopfSmY1FPLltyyJblMyUJR0lCaPDQlwaTJMC9ZzD0e84%2FJxMkyHapRl9RtC%2FpMBzzuSe1h4OPaAKgDP%2FwdCoHarJsF5Xa78%2BixKil0qAPLqbx2esSerrOmOLoopSAuu6LGExKBuCectwAJOWjAIgQguck3hfCYKpymP7VpOftCMnQ2ikYXj3nGg%2Foyjkv%2Fz%2BOv5CZMOyXThcHc4TIvjcSfKMp0WpyiGK%2BTxqWVUaAHPTwtJ%2FrLuzX0lZFT6TQnol%2FSPZN103LhuHx3T%2BJNk3mbu94tkaSAsp6voqfs6OMEl88Ft3RWNv3mr4q6pKbexKrD8%2BpTpDvO7K40vDvr68o\JeyhtzlOcQ13nUuc51PYuQatfPZYzmeVMup2Sb6ck3CgZN0nKPZNzo4TsLjH76NEObrXzku0zcXvr4Z4SuYMH9C4RvUtIjxLTowT1JFG9VfouNYqT8ukHrejO3Vnz%2FyRbisBvifBbQnySGH8qttcl54XHfKL%2BvfKBx%2FzgNQ%2B38b%2FR80HPfkq2n5Luj%2BT7%2FiNB%2FkiULxLWD4X36BZRyjJR0Sd40EJ4QmV4fuF73yF%2FKEF%2FUEF73tZwefdwM8d%2BkuN8EgV9MyV9mUd9YucjUfRKDkgSEEgS9icS%2BCcS%2BicS%2FBcR%2FtcSrkcSsNcSsjd8Enh84UduuOcSuvd%2F8EeCioc1jKc2jscukNce5ZeB51dxlleA6neAGAg77vdIQYh9Q4g3Rag4R9gwSeggS9hxTfh8T9iBBuguCNhzCmh9iJd4Xbd4W%2BcrFPh4eneB70R5Tph%2BSDd9WLKGInh9VpOFmLOFqtOFXleHYDeFPzeGG1iGRueB6weCk0cZwZAAbYh1b0iEcegZc4iEiBh5iig%2F%2Fxo4gBz4iGf4MGm4eX6oG5V4iR4hiLhDiMpjiEzzhS0ieec0dgKILgRohlGIhqEIQVXITHoSDIBoN7CIPbKoPrTINrYoMrioU4xIio54d5AohZKYi3%2FoiiU4Eic4EikYESsYES0YES8IETGYEjM4EjWoFL1oir%2BIisEIQ8NIb1cYiJmohZvoF%2BMIEeUIEef4EOmIEusoEu2IEjfIfTkIfrHSgy3xgzIIgCTBgL3RjSLxjSIRjhDRjw%2Fxjw8RkAsxkCRRkBFxkCSRkPW3kPm3g6vnkCkBkeookSNBkV6Sj4O4j%2BfRiV74iUoYjRM3jbxYitZ4ii2Tiu23inFBk5dhkf8RgZEqoZL3p5OHaIGJeIe66HTV2HjXCIzZKI0LOIJYaJOxiJMIIpW1yJNg6JNMh4dkqIcVaFHz2Eb1%2BHb3iIxiqYxkiSJm6YxoeYtxaYVAmTDvOJTxWJR%2FqUxzuXvFeIyWk4z4s4wK1IyM84xCpJZ%2Bx5aN6JZ0CFRd%2BZNfyZi245gYBJkqJJmsQ5mJEoaLiJnUqJmeyJl9aJXbeIlMCRFOCREa%2BRAcuRAeuRAgqRAiORIkCREmORIoGYE20pBGCTmJCYSH14a1%2BRC3%2BRZQqYJ7OZl9CY2HaY%2BBeTKDqZVE6TTLSYVISS%2BgaT2iiUOkeUamyTyoeSqqKYrdiTTfaYT%2FWymPnbmWbEib6VlF63lI7ck%2B74lTltl884k29cmF92mY%2BXmZ%2Bwmd%2FVlH%2F0lMAcpAAyou8dl5B4o4CVqICyqe29l2zRmRxWiJ%2FHmXj5mXR3Kdp5mdlRmiirmhqNOhs%2FihbjOe0DOiMVmXjYmio6mig8Ki7umiqVmg5seaQZmV9hmeNwqjPqijBCmTIqGUQRKhlTSh7FahLHShEWekTIikgimU4FmYINqgBrqArVgWBGADKoVyIfCmJUAWGvADKXAvVipLWHp2WppGXCo0GSpDo5ikrrmTsKlK5VkxxxgCuIAP%2BsAKFfED8oAP%2BMAPWwAAP5AO%2BkAPezZQ2zaoQeqj%2F3xKpPDppWIIpt4ppktKpk1qpkf6oBtxCfRQBGGAD5U6q3ygBnLwAh0lDj8QCvRQAtq2K0AaKkI6k2J1EB%2FUVX00EMqalk5KojKKPDTKjDbqODgKP1A6klIaEVXDAfLwZhoQAhUBCevwAsAKAM4GAErQD1MQrNoyrP1SrCLRDfRar%2FSKDpNGEP8TDvQaDj5YDP3ak8%2B6o9GKPtMamdXqOtcqjIc6M4B4W7gwDOvAB%2F40DPsQqaHgACWGXATQsR6rAcEAquaTp7OnHkwgrxABDkEgAifQsi1rAjRQBZ0QEt%2BjDlAgAiJgCKB6DXqAs0cgsvb2E0DrUN4QqG7BDkzBDv%2BeijUsOZNYMbRdVAyIAQ7DKRZgGVz4sA5TMAeUSgCHkFRy0A9ssLFzAABTwApom7a2wAu30LZu%2B7ZwG7dyO7dxGwuxQLd4m7d6ewt2u7d%2B67dsawSZwLZ%2Fi7e8YAsogACKu7iMqwe80LeF27a8sAMIYABiQLiFGwt6YAAGwAK8gLmRG7m8kAWSALqhe7p8e7eou7qQu7qnywt0QAem67p%2F27q0m7mqe7uFywuSkAWzq7t5a7vAu7ex8LvDK7e8UAkmuhFNdQkAAG2hgBHQ61t5BgT8oAZw5gDaq70gqw7l8L3gG77iO77kW77iKxgnYb7qu77riw62wBLsG7%2FyC77%2FJ%2Bu986u%2B6gAOLaC4FoCzOKsAiusBz2AT4etV5vtVQaC4eMAO49tVBezADsGzPmu%2FD0zB94u%2FQnvBGky%2Bt1C0G%2FzBDpEN6QvCG4y0gMDAJKzB7gu%2FKXy%2F6OANN9HCF6wOTyvDLlwMUmvD90sUOhy%2F6mCMHaEB0fa88AAJGhAI7aoB8nAJGkAPb7YF%2FaAEWXWnoUeyOLinD7G%2FCHAF5tCvhiABijsJ6iAbaSUNz4ANf3YQ6uAO2PAM4TAPCYwAfeAUf7bG6PAMz%2BBV7tANz9ANWuEMxWAO4eCv6LDGaRUUeGzHovOn71ewCHSwpZmwzrOw9NiwVHO1AHAI%2FHAIl8AP%2F0rQAOIgD2oQCvtQBAAQCvjAB9YgDifHqcK6tPEKtQihxV0wD12VVicQxmPcVYuQBB6wASLwBKVwGu5QC0kgAhswA4sQx30wD6sQBEEQB6kQBBvgAUkgDOFQBiewASqQBwRxDY0AzV2wxnkAzaUwCTlQzUcwzItMqqt5lYCXRHv4gbFZfbPJEQ5wCOkgDmNgES%2FACutgDZWaXJewDsPwAywny8FnxQqJxQtBy%2BowyN1ACGAsAb6gDn1VBYyruBLQByGhDqkgAotrAAgAxnJsD5uguBsgASStuC2QA5y7uHkQWJtrADOgDvFQBSSdA5W7uBsgDAqNDsH5FdtakrsYpv9KqqBMaq0DixIwGaU8%2BrwGZxEOMNXPGwB2GtTzx9Ap6dAKocXcrAIqINIl%2FQfuAFp%2FsLgtUAW5rLibEBQzwL9VUAUbsLh9gNKLawFQcAQA7NJVoMUtYA48q7g5gNNX4NNVIASLGwfPOtQRUbULUZwicZwoWJ3%2B2LT955JOna3CWdQPQaWYQcULDa88g7IQocUbrbgiMAlnbQttDQVv%2FAxxjQA54A6pYNKLMA%2FzsAkLoLh3ndKKawj24A48jQAm8Ax4jQAW8AzcoAeEbdj86wnz4A5xDAWNzciAaar0iapKrapMzapf6qqfJ9rax9XIyXVSocUncAQ74AEeYNIIkNv%2FlcC%2FtRAU8QDcy70ILl3IBDHbv63SeewOSaC4UMBVtQDGG8Dczk3b0I0AQWDfbkDg1%2B3O8qndCMrdHrrUCtvUJPHU2hrV6KnVD2jele3VCUHL9qAO0oANtTDbMFAO840AItANHy0MFlDSwqDfCHDTBEHdvp3cJxAOazzgCBAHBo7gCv7c8XDYCNAFThEPZSDh5Efh9vZVBVEuVl7IXhV3koWVsIydhYpRsqkbmNyjnSrPOSni6EDLTtFV89AHKo0NMe4B2FDjNy4BOa64PF7IzAzkNC7gimvk6nDgCJDgza3kTO7k%2BBrlCGDdU87hBuEO4bAKqVDpz5BW6HAs6vAM%2F5UO1OogDJ2Oop%2BeCp5QCV5OP1tOnTaS6vRsqGOelGUemmrujSQOjpa9kaadxYr7BcP9Z%2FPA6Bsg5329CbY8D2ld6N0wCQF86eqADR7w48B9An9O5IJO6Ia%2B4IW95Iqr6FAu5eKD3dy6CDPAAIvrAV1w6cfiDoaguGUQD9re5EltEPHQBdse79KK4QQxyISMEJteC7UgDLg5HGs86wpRDrbg77Ww79hIGWu8I6me5QkB8Y%2Ft2VZ7nvZjpYYMaBKfENO5EEZiyASPf1osBItgCIawCFxg0jkADrYw2y2wCcIwCWRd4M9Q1whQBd2ADfQO7Yor7UMe6Ede6EnO4O%2FO7f%2BM7ujfTuUzGeGpbdyp0FjouO4I0O5Fb%2B%2BFcQWcywVW%2F8gY%2Fukz0AIzkMcI0e03r3lRIel%2FUAsEXxe2INIMkAprjxCyohfCEAzB0CDdYPcAf8d2%2FwwL8Qx23w0f%2FpyIR0cqPgmIPwmUIAx47MfSWesZuS6fPgmLAPd8k%2BsP3fSMuwiaRgnwDd8iANTusPMyTtY8jwA%2BD%2BhFHvTXjuj1vujeLkDgHpJwrtJV4AazveO2AB%2B3DBrqzu7unuiKVRAQr8dlIAIecAa1MfAE0az3Hu%2BDDsB4TlBQzrlIrxAroQ6bENelEPcGYfA2b%2FmR2CSTIAHmLwbXEOmLYP45sOjmr%2FX%2BCSHg5p8H9g7ZER%2FrIV52hNDS%2FLsBFgAQKv64Q1fQoEFvtg4uZNjQ4cODwLI5dIfIAIIZEDU%2BjGJM3UaQBlUgIFmypAdC6srdUrdopMkcqT4WvFLSwIkjCAzksbeJpIhu6twdMWDATTx1tUhKeMZNz8UZ6uJVKdolHrp4ZYo6IRgSojswmrp61ajumQiSOYLFu9qFpAE97NAJ7VbKkzR1M90ZIlmGbU0EXdxJe9bNYLdnhQ8%2Fk4buWTBaCgsSrLUJm7twicORBRkPEKCrG5NKQGBB2MyD7txYsMBlbF7YBSV280Ay1diCsRfmNci7oe6C5Wy12LBhFWrYqHcD9%2Br%2BThMY3JzJuoNSEsQv1O4WkYSB1S2CKqEXugtC0o54jbfKSWd%2FUF0zBwDkz6df3%2F59%2FAASNFNONt4fkwJEwI7%2BEJKsPQQloggRklpAkCOPHmSok0kqtLDCTZ4haCV03OnGEDJCXCSc19SZJMQ4nhGmwtOewTC3VCr05aNuLDTHGVoq9GQuWSqs5aOkKjxOwsnCik5CdwBEQAJZQlMHGxVyIKOScj5y4wSSPEjCF4L26usvksgQRgQPZgjKHS466EAwdaRpwQMRnnGjAw%2FKIEgdT3IgTQQyzlCTkCMf9Aw0kEYr7bSGpAkmmGdy8zCVUmQh0R2JlEELgU3CMWeycIL%2BKQUv1MLpphsS0alFUtzykqaUYEpFRzhhFt1sLnWEKaWURlP1sJRaSCzwq%2BcCJXI3YSwwCZGxtCMpo3i%2BC485d5JgrQ%2F0aC2Ql%2FVy821Yh96LLz9ww7Vvv187I2QpKK64IgjSlsxlprzckTeh3ngTCkjf7u1N3gLj3XYyYryZi1%2BD3KFkhhmuUE4od8oFqSOH2ZN3YoobDu4WR9mKx%2BLxNI7XYoZfI3gyedEpxpmRGUZuZCLBEovbgqZalqFnpMIWneoCPOFHLxHwKx7AulCnBZI8weylFkjcDoEW1OGCJC423qTdktqlFmasPqu221pIM61Ad%2BwwwQQyGu6GCxX%2BFFiyhS6eWaYREdRGAM5NGv6jBWNFSGJI7UQQwQ5CZpBAghYM6codYaBAy4IW8phLuBlM2FmoTXTYgKQNZjAE3me4WFwFN8KJeLxgsXYoHjsCDCK7pZn97gp7upEFm22fqaUWbPY1VZaglLNF07xs99V09%2BAT93hxyW0vnnMR2KCbedhqHoE%2FrvKwFkMMqeUYYgyyvRZ0hFmkV2FqmRGdUrSnVXxKNEztmVIISaUb8cLxpRJaPPTEkBln6uZ2YRQsHKsghCc0NDqHQIx4GuHQAjVyMgd%2BxUhYc4cTSCKY3RTkFuzgy5LKYIjyIOAIUungz4JmjzKQxA32KAUDllL%2Fi3kA5gz2%2BI5V0BFCD%2FThDzkoydVgNqit%2FaZrhypQVooChaskQUAGOEIxGnERmywChQKygEx6hhYoImABk2hYMIgWIMEI53IISEU8PGEsARnOLDMQ0BNEFxLnQCeCuQkHG0VIGgn8aDKt8w5JqhCHtIkACrW40xVa0AJAzSUccZiBBRRggiPcZi7CYIEKoCCMJIiAASooQ1Ac6C3khRI%2FymMP8zBXs7nQhiR5QIohVNAuCXhADJNJggQs0IXaLMAQOojlJEIogScIowtoFMHmDOKG2jSIEDCSwAKS0IdLSaAKotPO4HIwmU7kQG4b6MIbOaPAOTKkgeFkCATJOZ4J%2FsIsHC%2Fxi0PUkxOf5cMe5sBSHudRQjAFxh6eIIkOwmaSzRGNAamg4QXnMUQESHEe0jABSXzILSAWaohfY0hWSAKFeZSiQZ6ohR3kVolVDKFdOjiCLFLRLij8AZ46wEoHEaACO7hhjM8KYQv6UIZ2TaIdtkhmKuaRszLUohQhXJ07AHOCPKyGJAOBY%2Bnm6A6fLEkWX2xnh%2FjYLJIYK4si4Fl5DHCeJ%2B1AQBLoQ8NqobYNeCCLBqiCsIgESlHGdT6klI4pnQe9eMxjakvtiYCWKi94mqQUbFSABLLovADlUSgpFJAdGpaKrArIDfLiozvOKKAkmAOBCwHnOS%2Fm2YWY%2FxO0HUont9QRwraOp2G8wAaWEACFMsT2JZOwBz6BZtBuLO4ZSpRbFYbougvaY2kn8ORQHBpEBEVUNBNF1EIs%2Blp7TIIkAglGSyaRClt4wxyXWkX0qnBRe9hjaLa5Z5aCMQ97AKYK8zip84SRj3ykDjw77Wk8dHBRSiDmD6wyy%2BUkkAr4ShcBq2uqHJ%2BaMyHMgwwkIe5HlIWRPi4rDl1o1wiNOyCkKHFJSSiDay2winggFAFXsIMdN4BK4sFVrnGlK2fsKoEyxGHCY1RALeLhhIsEYROb4CECkgDYkhwBCkdAhx0lEIdOaBgBIliEIZLZh4OikQydwOmh4gHZBi1iEv4vyYFQ%2BFhkkhxhE4QY4yLcmsAIjXacoxUtaF125rp%2BFyMLM8QipMHaSxWlKG8hRG2%2FdNvAbEzOeRhJEHg4AzeQ5AxsqaE9GISAG8wkHolGwEOHpdyyMLeIjMWoL6hGuC4YjRjZyC1JSkGQHg8hpiVepZ8R0GWsMDYH7hCwCGQcB8C0ABw8JS8ZsriBIOThGRvjp%2FPcIGMyoBXFGokjnCVklmRKEaFmturMsLrkZ8xjHvK1wFrgaYeDyo2V8XjGF50Q4naRIR72aG%2BNNysdFa84lC32z%2FT8SoaPrMgOz7CHOxh7BCC%2FOi%2BGsWMS0EuJkig0hDyJA0mCEF57yPkP7P5dik%2Ft0TwaeHlZliWJCcIR3g5CwdmcTTNo1wzaNnv2zRTMQ1aD0RWz7EkP4LhUErrAhS6EqAuLKK%2FP8mkVWi%2BLNHZIoQWwtACZXLsLws0S7ToET0sTCdMQMRRFnctppOQBjSYJQnZLjYBTf10ne9YJ7DoI6werQB1KGvueDbABbPCajO54RghN0gEoF7vtUGTKZps9x%2F9gThjmqCNJhODgqzrrKv0t2jy%2BbQ8lqeCN8ehDg9Dh6SWdmvGKXWC85X08envFrgLygBt481g7DOEEcgP4hY8yFzBTb2MClkB1T%2BtQewiBwVDgvR27QPG5nensGsdIzzzAeyiEUPLfLP%2B5Z9XBC4%2B5R2NIMV3Kz7lymKkD8yKkXxJLogd19NgO8nRHHhaBKtsGDSliJ6PeEdBgpR%2B0XRM%2F6BijLqGpP6TqzT3Ic0WuDnuQkxwYI50QA3L4ulNbp2WpAt5TlyowhJ5DOwFrmg7aAOSrgiuoAjLYtZ6SClqDgrQpiRPTqNKAAgbEwCroAk%2FaiL%2Bbox6TgBM4ARVAI8V6MOAascVDQMczD3toOB87nKWRAGEQBq%2Bpmc3ToxQzns%2BbN%2F5YnuY5sj%2Fogz4wIJgTBh7aMzRqvW8TDzsys6BjGtG5vUqbh%2Ft6Cz3TiRy4sizBi57pMhvsmb3TiROYFa%2ForOubhCZwQC7%2FmoxJwMAMnIR3CwnrIyfsgxnVKIkZIIM4KMMBs4V2oDQLWIRn8EF7Sr8Lsh45e7%2FMIMDUUrqrKEMYswPXqjTkWh6tkagijJ7pcwf%2FC7FFsAOee4ZNCKEdOEDuih54IoN8iB5DmARfIJHh65AJNBEGA0B7qIVF%2BBTh6MBJQIROMhWtKxrMM43wEh8D2hSQaMHOKwWq8Su%2FsMEIu4IcvBRP2MEB6UGHk7Th6hSvOY0jDESy8LwlBJfQCwm7eh5V5JiCCKEcyANZoDQtNA8uJAkvnMAwDCEoC6EjyAM7sIM86APzcwcs8wA2HL437KATaEiHhEhDkA47JCcjeguuoCUo%2FzKAOChF9hjEcCpE01IHwBAQFRAGbCm3qimJsomHDlI3mQm0aiOJH1MHsSKJPYyHp0GAqFGHVNg6knAhUsSa%2FOMaPLqCEJlKMoBATqOhixCB%2BemGnGkCW1QhRBCG5tmARfiQpfAEV5NAy5OGZOIC2%2FmiJzgHuUuFcBCBouACbKgLY1GA2yjDIxCGZxCCi8gBOmQ2p1ogNFkKD1jMxUSjE5CGeEi8BukGVtyrPIqHx6M9GJKXnAkCd9C0d%2Bw8JZzH5GnCUhrLZeuNZ9hLXwivfwu48zCILpQXg8wLhLQHSksCiJMxSZTINRQKi2wdqFrD8JoENzAEWfDI5gNJSvuJ3v95hmQSSKxRyacqrexDhzi4lKXYEndQD3cIhh7LKnzrEERgjclyh2GyADuZJBGYFnmJA9ZogeIiA9b4AoLYJ8uxgL8pw%2FsTlFNcrm40CSaaoteaB2FIJgnYABqsBG9whyGwiUlAhy9yHrUxgCRoqWVxMAGTvCQpCQuApVJgh7mcBx90ng1olyQQCkqApa3bw2w8TNOBtjDpBmmQhm0oBj0oiT6TzIsqHzu6pgs7D2y4lBmYhFJYMJKAQNB8Bv9CwhgdTdKkR9OsK9Tsl9VUoWdYhEsJSAyTTYKkzQY5SIeaB1lol6BqHgMgBOCjSOBMC%2BKLinCAgTArBUowgSOCR3T%2F%2BMhwmrQAMZrhNInYdBSK%2BQ2KWRh3uIZrGNTrs04KwoYL%2BZGPUA%2FYKwUL4T%2FEUAx0uFTD8J7E2NRLdbqCQIzIaBPkTAVG6YbcWyWUrKv%2FzLQTHRxYhVUowM3BaSt3KIXw%2FIlFWIZsqKaSmLhaeNCqqQLa2YvB0QENHZwZ2Iwkic6X4iLhOIHBkSRkCpAhQKW%2BMQkPYKoCGzmJcanbgI1rKIYfBcdry6p22SJ5EdbzgMMAgYK8WNK9dFKskccoHZcpdbE%2FuIi%2BcwhGJMAlox%2FdM0nx%2BKKCnC4x3YmN6YLD8skOwbINqMgMfbDuoLUARQATSM2HWc49bU6B5FNADQ3E%2F7GDJLA5T9iWvEiFMyjZMlgFkEmFP8ADSpiEJ6gCQFzUl%2FmkQjUISRVUfdQWeGEO4EgO91CHbCAGuhujJzAMT7gUSvBWe2xVjQiHWFkUq7XamlEURpkM9MmeXtQQBUHK7JmERsmLTvBamfCfRQmgUF3bgsnSsb2MV7GFqp0Vumuy7EkF2JsMF8me3pwOGK1X3RuwhXCGa0idwooRa0NSMpjQDTCcp1NVq5rQ0uimeCWNDXBH6FwSes0%2BKL3X%2B6jHbFwEyYEBjc0NX7A7gcgBGSyFqRgbbkUHIRgbLoKqsQmCMISCsVGjRWqorFLBeI1BM%2FGysUlRWhsbIhPGFpAbCf%2FQAZdVTjzFP0qTVhGyzSVxrUCVqQB5AlRSh27IxKUog7kISQ8gDQOANUJk1HPq2dHKBmCYCyUTgRBcMrxwSqkti%2BTIX3z5l5CxGAUZGJbZ2XrhX%2F4V4JUQWgF2jwTu1gi6nVpITWdwhv%2B5HWmY4GCYi%2B8RFUP4gz8QhrEonwfWixrhYEPw4JkIh0q4nVkJBwcuzHr9XNCtD9EFCVEZFapDh1VIhflxh2ywBVJBhxouzBrGxkz94YII4twgNx02VX3sBltgBoMwh1GZFSk24g4JhyUGn%2BjNU44FPEobAqI5MWyojRYIoXaVryWJTtzNiyuAIgsgQMEAWZtgJZyFWpj%2FYV%2FQct%2B5wAa7g6IW2IQthoinJKf%2FVTOMGa0OCdx6ZQ50iGBr2V%2BgjZeNWRgEZoufRQdeIOBALhQYjuG5yld4%2B5duiQ1vIAbk6BdKpuTlYGR1GLWifeWiZWSy0FMvvqic2QQBqwILGhADRaMkqIVuYCwEyIN50LsuAMyc%2Ba95aM4g8AQ7qK46RmR0wGPP0mNF8oQ4cANtngTKJJ5BDqdCNrlDHi1tBC1HlmZqJid79WT9AOVzohdpDmfQouUIAtkqUJJsJglC2GU7gLyfuAypeIJ%2BUjA35Q07KgPcFLxJVjn1Jad0JidrHphV3GRBvt9zkudzOrnrU2RyOmdEfug5%2F1pnT57hCIJnRMboc6JnBwJZKJCFBUAAHeChPNKwfpYvgIuZDpqBCvqSmMnNhH4pb2LonB0tkJ6jiAatb54jlA4njSZEjg4njybqbAEtkY5hknYgkx6tpQ4nlV4gkHUCdMASBVAbFUAHmrYHmwbCjQOq0ABZ3ZzeFRRqO%2BaWoo6go%2FaspI6grY6gpl7Jp56jqAatuhbNb2FnGXZncspq0NrrCOpqb%2FZpJUMAJzDHfm45CPuIZV6WnTwCkRXWWaW0jEBklvSswV6guz6nvHYgxl6gvn6qv46gwCbtqXa%2BTmbnq14gxfas1V4gxzYdt7YHy%2Barb5uHVRA3oViFZEJoJf%2BJRNpsF0P4aSQS7YYOp9ImntMGSYsm5IlA5NaOoHL2rNhe39k%2Bp6oG3dsmnty%2B6O1G5N52ytzMqJIYKMyUzsHFiCAYoxPI2i9iAB3gpbQIB5ae65aZ7jmqbtO57j3NbnBeb3GW5u8%2Bp%2FB26PFW59oeacQOp%2FTWbmnmYoquK61gonj4ujmMhyAoipP0XrsTwbrpkFWg3GX5ESOyUAFHEgKPIAPHGgQHPAVXagb3rO52oAfvaGfY8Bs3rQq36gufowxf8A1vb0NsBCSAgj7ICzvgvTzIizzgvT1Uh3D4gyBQARVIxFx4DWywgxwAc0QrrkWoAiTAgxl%2FkNEWb2nO8Xr%2F3nG97vGMHmc3e20HinDqnvBwKu97PW%2FTWXIeb%2FIuDmno0wtLngy2WBkuZ9b%2BEAog3gzqcxREdfAad6Ai5xY6X2k7V208J6cfR0w%2BXyA%2FL3BAD%2BkjN%2B8kL%2BkD0epRJycnh5lSXyDq9O5NX6BOH5ZP9%2BpQX6DdNp1bN50gh%2BohR%2BdVjyCRdoAfePZnTwH5eIEt%2BAH6oHZrH6VXx%2BpYX%2BxZ5%2BpE52s9R7lkJ%2BddJ55eJ5Jf9%2BZgJ55hx5pip6BTJ55Ut%2FFl%2F6QK%2FwF%2F4Ad%2BwId%2BOAQAUIJ7uAd9CAT5mIKBL3ht73D2MPQ7R3SG54x4n85yd7NzN510l5B19%2B12N513%2F7f1cd9oAxuteuf0eyfs%2FNAAJVCCIggFerABArAGawiBQ9CHF4j5mYcEfHiB0N123O523f72Oap1bpl4mMl1IL94rMn4B9l4%2ByWUkxZ6BzL6YTl2wK54wT75JCzs%2FAgBeJADAEgBfAD4IuiHLQgBfDB4JTD7%2ByCAZnjzB%2FGG941ngZHmjoD79qD6YSl54gELUMD79mB6BHH6H%2Bp4rPn4og95QgSFkTdnrCdtB291ALgEcYiPHuCHOQCAy1cDG%2BAHsP8BzweAF5gC0if9LaCFCE591V991m9913f9YoiF15992q99Z4iFk7F93d99JniFbNh94Kd92Q9%2B4m99W7CF4v9P%2FtTPhiyQhN9X%2FuQffugv%2FmLghekv%2FmygAzp4%2FusHfl7I%2Fe4HfukPf9vPBknIAu4n%2F9o%2FfvXf%2FfFv%2F9fPBlpIgHARezWQD9AH%2B86Xg%2F0HgPwHCAA%2F%2BBAkGKgYsmIKFzJs6PAhRIfAYkWsaPFisVi2MHLsWMxIJo8iK1IcabIhr1snVxZblkXSMpYnYwGTadJWSZsel9GhE1OnR41APU4c2nGZpCw%2FjV7kxYspx5xQIyKjlQAA1qxaAajBlwJrDH58BPIL80IsgCL8xmzN2swdurhy59Kta%2FduXW%2FA8PLt6xcdMG9%2FBxNGF8UY3MKK795a7LiuM2ePJ6NzBwZUYsr%2Bi2%2BV0%2Bw4217PiuMBAhRPtOLAqAuXa7x6sDtQYDK%2F7hu59mDXuPm6a%2Bag7VZW1ghg1QAvFIAw%2FX44kIdcORDgCZqp293Xmy3rfYFl0873cHXvdVuLv1tMcnm6ljXRTo%2BOs%2Fu5oOPLJW2aflzu%2BNGRx%2B9O02z73bYffPSp4xtwWTmwDnJZHbLPJesM89sh%2BlwCz4TSUbcfdvsB1t1%2B4OHXH37n7bdee%2BkVSN98%2BNl3Gn76jahbfP8FiN%2BA%2BK3o3oG%2FJQiAA5BsoZUDfAxzyVdAGolkgtOFR1%2BH%2B8mIn4j0kUifif6BwR6BneHXIn0vSgmilTS6Z2OK5eVI347p9fj%2BI5xxavhkfFHGSCZ9VcZ3ZXxZ0odil%2FuBGZ%2BYd%2B7HZ3poCoiejl7G96ackcbpJIfZjemhnu4hmp6fNW6Zpnhtpjeoe4XSN%2BWeZiYKIKjerRmfqOJBKimtbVGKn52n4hlfpultWl6nZ34a6JehhVkajLoeqmp5iuLIKJuO8ohgrdVmdSuUlhoaojF0%2BsossNAKy2WjghpLKLKXzngiq4t6GKt3s1pbK7Z1aqsst96W96t4wSY6bLnF7mdqfKhqCq53ztL3qnvwaifvvJLW616uBe%2FqXq%2F7Iuydv80CHK25A6e7bZns3riwuA1L6ya1EdM6cXoVu2cwxt2uu1%2FH4gH%2FGjCL55Y6Mr4l%2B9fus%2B%2BuXB7ELk%2B6Ia73WoypzUKXmLLH5IIssItAP33zn0SjbDR%2BSSv9I8zlyZwezellLB6%2FHFOt88ewHl0eqekRPPPFGpvcqnYMqzh3vC2PvbS%2BZjuNN9SFe9e2djknHLfKIWd9H8mp7u0usY8KPjjZTGfrYdrlrb34xo2%2F%2FbjVckt%2BLOVBWz70yfH5XZ7D1onN%2BVZli3d2eaGLN7p2jFvnuHY7X92zyK1vLXWNXst%2Bune173Y77td6bi%2FoeYse9etTnwj536ujqzziXDcfu3uzhwr4w5tXn%2Fv1FB%2BOtva%2Fc3%2Bwh8RbZ7zqWLOe7PK6dz6%2BWUd9%2FtFjn%2B3c9z7rKc47vBOP77wDPOsIbzf62w3%2FIue%2F8QGwfMw7k%2FPSBz3tSA831Huf7hw4v97VT4L3%2B1b%2BRohB8NEOgdapW3nuRr9lXa5omZuWjxZoq%2FjFbIUQbKF2JribCuLmgrjJYPg2%2BDPy7dB8IERfegxIQhuaUIFCTKF2HuidCCbxhXrDmQyfSMP1iW%2BKHaziB1eFRTWlETclrM0JqwdG64hRO2S0jhJxw8TaOLE2UKxhG%2B2mNQ8K8IoE3I0WrXPH1%2BQRd3vcTR%2Bt88fdBLI2g3xNIV9zSDZKUZFUZCEPYfdI3ERyN5NcTSU5d0ncZHI3m8RNJ1%2FzydWEcjWj%2FjxgInO4SDg2Uo6rrE0r7chFPHpxgbOsTS1xc8va5HI1u0RNL1Hzyy0GUzw6RKUVjYk5ngFRiHOqVPYSF05O1VGUawRmKYV5yiOmsmtzFE8ya%2FNK1MRycM98TTRrM83XVBM11xRNNkWzTUkuszY49OYwwRnHZoUwi%2B18zT5F08%2Bx%2FXM1AX3NQFdTUNEc1DMJ9cxCXdnQ1zzUO9%2Bk5zp1VlE6gs1AzUQhEQ2XznzFtF8X1eY7uRlPiM5zjEhcYukwOFN8%2FhQ1GfXMRpXWUdR8dDUhRc1IPVNSzZxUMylVZjddGlGYTlSm93RVU0XzVM1E1WVTFU1VUXNV0WRVM1ul%2F0xXKfNVfa50NS3VzkuNWs8BjvN45TQn%2FBoYRiMKlqdl9en3UqdB5E3ujRItJkXP2re0ematlGlrxN7qmbiKZq6eqStl7jqZvE5mrxjtK2r%2Bap3A%2BvGogkzqE5eK1ppqLoiIxYpoNUNaz5hWM6idjGofw9rHuHY1nqWMbHdDW03a1pO4NaRuN8vbw%2F4WuDndHWNrq87Hui2yx3xtWAE71saSd3%2FZLSBnNfPcx4B2XsGlzHA1U1zKHPcxyXXMch3TXKfCVjTRxc10bVldXV5XlO%2BFZHwpM1%2FH1Nda951Mfimz38n01zH%2FXUyAFzNgtRbYMweuTYKluWBrNtiXD2ZlhP4nM%2BHFVLhaF35Mhiez4cd0eDEfVkyIFTPizpZYMyd%2BTYoFumKDtlibL0ZmjB8zY8VQLwWXuPKVh5QCSFw5FD8AUiCOlKQhKpaP4aXueDEbLvP%2B0D1HXk2SQbpkkjZZoU9%2BTT7Ra1PfbsUG4vjzOv4xlin0Ix3iWIcSAFChCGWIzOhUF5XMyLY6IzTKIg4qQ9M72%2FWKt6fFu%2FNq8uzcIk%2FmhAQggANYkSE%2ByCMExAGABpyTnH4UATgE%2BK4KdxrpMt82hmwmp5t9ZkrLklXNCQM1akRN4LDdFCtT0MeXARAK57Ai0TZAi1rSACQNcJvbJWjGPNwh7nGTu9zmPje6zf7tDV6ku93ufrc7iOENeNO73u5gAjXiYe99o1sdvFAHvwNe7mVEQ%2BAGd0c9wCAKfR884LwoR8MDzg1iRJzf9ShNPSq%2Bb2JwQ%2BP2Lge7yw1wj587HqIAQ8ZJDu9rXMPjI3%2B3v1%2B%2Bb5nbex7NJoA1GoTzdEBiGPoowrXlQBahT4EVRj%2B6OVrxiVGM4hNOf%2FonVHGKpbei6U5XRSumDnWot0IVXof6Kbw%2BC1pInelWP8UpRuF1prci62k3%2Byfargq1Nx3rbm97062uClrM4utPP4Xcrb71q6tdFVdvO%2BLRXnWnmz3sWtjE1AUP9a%2BPAu1PH0XXB%2F90rPud8VI%2FBS3ezv50xqfd61NPvNnr3vXCO73tis%2F60q9OC7Ib%2FvKAX7zmo856qiP%2B7mlfutlb0QZGKF3ym5%2F7JyzP%2BMznnvOdVzvaQz%2F30S%2B99Gu3u%2BibDvi5h731d8%2B83sfe%2Berjnfpb97rfMd97xf8%2B9a0YxCCKr%2Fm1Jx%2F5S8e68Tff9eejfe99F331Md31uV7qJR%2FedV%2FUud3tUV%2Fl0R7UVR4BNh%2F6ed76bV%2FeBd8gaIH8DR7dUZ3VqR3uceD%2B1V71hR0lUELZUd%2FbDaDbwZ36CeDhfR%2FcJZ%2F0bd3t%2FZ7mFR7ygWDvQeAHsl2zqUWiYUUIaAAAlAA9XELQDR1waAArdNeP2AAkQP5hghxCtFHhVoSCEWIhkTwhF2qFGoTBF2qFFY5hVmihGQrEIaRhcohhGpahGYZAg5ihDYxFGm7BkKQhK%2FAZFrLCFv7IIcDDFhJAChjhgoRCCuBDIACAEvRDHm5FqrGhFLIhJFzhGKKhGUZiGoYhG8KhGWLiGP7AGqZhGLihGXriF8ohG4oiG4aBGrDhHurhH9raMOBCVoSAPLBCCEwBP8gBzlnDlnlFE3ohHU5hGlYiG4LiF2qiGXLiG1riF4ZCCKQhK5KiKY4hKnKhKlLjKJphKaYhAcSiGfohnDSHMWJFV8gDPsSiEtADPuiDHbaFE0riOY4hMqahMnIhM46hM%2F%2BeIjRyoTRyYyte4xdmIxZuoxlWozcSJBaGIx9SITn%2BCAHYwJhhxQtsQRG8GgCkwBb8Y1bMYxpO4jF6JBXmIxbu4xf2IzaSJBQGZEJ24xh%2B4zOmIUKGIkx%2BoUyOoUPKIhZqACxI4iVQIkt2V0SOoQbY4ia%2B4kjC4jSaYRHUY0oqpRne4xiGADGGIlRyoRpI5RcSAC48JBTCwix2lw2woQOUZRq%2BwFhyoQ1o5BiiZRw2JR2uJRa2ZRo6wAuwYQjI5Ri%2BAFh210Tq5RSs4lD%2BFly%2BpVv%2BlgbYAF8C5l7u5atpwA80JucwZlZM5GFiZmIOTgj0wKsRwF5qgKsR4Q98wPv%2FnKUNBNFEroBWTGRevk8K%2FEAJKMhjjiYAhMAP0KW1pEAPzGIJ5KZW%2FKZuRsxZviYRhqaPFKcQEcBkZkUKpKZW8OZfusxz3uJjJidFnmZtOid0cud0SooDbCeQPOYfvkB34o5mfmQPzKZ6ViTn4KZcimZoZoV5bmbEgGZt%2Bshi8qVkUma1NEBthsBv4GcRRmZzCtEPpIM%2ByANDmpMS3AM%2BvGOiFcE6LOgjco4S9CJWOEAovGMo%2FAaHeuh31ooD4MI6%2BMgWRGiEftkUyIM%2BIBruvIA1RKg15KUT6gM%2BXMJv3GiONgDnEEAgRCg9CB1XqOg95OUWuOg6RIfLAGmEikOt%2FyUHPeiDOERbGExpleLOD4hDhB4CcWgAl%2BIDPyxiCPgcPnjp%2B8iBP7ihHNwDlaKlHLyjONTA%2B4TAOgzHRq5DhGpoClgDjsbj4ByCiqbDb%2FDBOwIjVhiqPiCq0kCCiorDbzjqk%2F5GkOrDMLiny4QALkQoOfqZPtCDUnoqqFaPGqijPAymtEWopZ6ao%2BoDLpjm4BTBPkSoOo7FD1SoPOThrVqo0mQoreLDHDCiO0poWuDqhf7oMFQpK7QaFRoqH6iBHKTAL%2F6AiQ4niY4BPWhocpTFFvDDK4ZBWYArVyrNC%2BACP0AqVhyCPMgBtApoOgzDDyTriEbKpirBFOADcsgBP%2F9sgRo4IgDoK7%2F6a6z%2BAyTYQCjoQ15GiBywgRxwWy5u6TDYp6T8QD%2FwgZ8Nw206B8RmrJeJQ8RyDi6kQw8EQj8k2g%2FoAyRAa60JqhLwAT9EaWVmqxi%2BQI7e6hPS7CXY7PtcQj%2FgqRLowyGoQR182SXQQxEcAj8cZpMOgzVAqxpMJD8cQhEkIQBcm9RSbZNawzBA6xicmtZyLXOOaRHgQ1ZGzCXggxKk6JCY6A%2Bc7VewrdtyTg%2FsQ8EOQ8Q6gDjgArSKYYbOwbMt4uCkgByw66ZmZLL%2BwLJqAAEc7rL6p6QILuHiw5fVAT48a7ROa7XCpiICAKENYXeFAjA2ZViMxRb%2F0BrnbIGF4AORhsKJEoA4PCHrOgABpMNVugze2i26AgAuXGpT%2FgA%2FaBsbJO3gEEAY5KHW6q44AIk8BCUuiAOqLS%2FnvAAfTGPp1towsEIJbGEjDmYgIKzLSCZxMC3n9sNgCmoIbK%2BiCePgvEBeToE%2FJFoY4EMRJAnOYWwiAu7gNECy4oMYKketXYI8OEDpRgcAw%2BrgJKk44Gmc%2FkCSLMgThgWRjk2sHUIKQABW6GtZssI6EAAGA4AGz2uC4GIgpICPiDAJJ%2Bo%2B5KUr5K7SxFpQimZ43sMUFoEjaoAMp4XAjk2QknARbqTqnnD6TiPTSuy8aMA6jEUK6MMidm4JKPH4%2F3pupq7D6oauRe4D6Zpu9fguG6SFt0Kh6%2BKDOkICAdAw3%2FZDg1qLDdjAC%2BiD0C0unlqDNTjAELsxEdMKASiBA0TIb2CAnqqjlxLaYG6BP6Aq7qgFH9QvADRA3jrA8eItUqInLghirIFx5c5arfUrzEZMCgyDPNRa8H4ZBqcBP4DyKFcPHyQhcUACP6jjpRoHcsTaHI4NH4jDvYqhy8YAAHRvCvDBPpRlIKQw56SAPKgB6BJHKKwyPrxqCNxwIpattfiuPNwDgwKAo36Fo4aAoFozPrDnvAABMsPDkHizOoIzNd%2FDNBat49YKze7uEQNADVhx1fbiC8DztQGqy0wb6%2F%2FiQvsiM4yGgiB68DpYa7VAAqECgDe%2FolqEwbUhdBePzSWgK85RshgnNCPmMOfQ8Cv6bgQjVpAEgg2QLEaacUWf8bzMcxvDcfjG8RADANOCcKTELqxdgsUeQskCMgAIMiEPzg%2FIgzVogCLbousOQwTkbSJrbR3XCgFcQlncZijIgRSOMrjWWhpgscsYbDvr65cFbw%2BoQSmzwXKYst3mpRzk7L1eAizD2nFwzg8YbQrsw5AEAj%2FkJS9Lr%2FfCtdLOSzjCrjUkasFuwT4cQgmQ7UbSgzNXi8FugQ1sagg46mwKaglAwj1oM6bSCuIiNid3ZihYdqsB8DRe8%2BDYAD6swxT%2FAOzoxjMfnMVY2AA8D84xQ4ISJPAYh8IU%2FIA1BLQGG%2BG0CTStJCKRqkVG%2Fy7FMvQWK80K4INSdnQdOiIZczFJz4tG43BzL5AGEDbFlvGxkus%2BEOkcGzUuDEf9HnWtwHR0KiL6li4UK81Oi8NXIDLeukIDNDJR%2FyjPbjRWBF31AsAnc44c9IMNgGt06OsLKAcRAEAdCG%2F1nLVWNG8KMEjGBuXYeCU8yIGgssIPdHD3loCF44NxukyGXoIc1PbTagXTCvMUJuJNHvD77nA5a0A2UzM9pHOtmLdWhIE%2FHC0%2BnLM86LacrHFQzu4lrPEiXhsbJPEi9oC2OrT3Bu%2BG77cN%2F1yIEbrCieIOG6iv78IBFyM2P2zxcisN5XLzR1L371b0dStNYE%2Bh%2F0JhCARCrZl4YC8iVxemOmc3VgCwBjhAWtO5nccya0d5CpThtdXBWQgdH3jv%2Bt7pmGkwAdjwFCK6Bgg25yCtVL7AIeQlEJhxdaevl1dLEVzCbIbBPxQBDQ8JJNCDBoS6i8M4eAYtkKwDLnCwUra0%2BKL28JooPMiDO8JB50rbibpvorGujsfJFsDDOtQ6PlhDCdSBGAa1IwtEP4xrxBytEY7BcoDrlzUvAfRrtbOwtShBIBghthdBt%2BM3f3N1Wa60BLP6qps19HZucwSlTQ%2BOy4LyPqQAtxcqP%2F%2BswKB%2FhTU88uC4wsf68Boqx2SeqSWPze7eopoDfJtzBT%2F0wAKFAj3UQQK7dMQYxzqoASvgg8O7wrpOfPXEQD8QaYer8mCOPD%2Fk9J7%2FRgrcgzikAS7QwwssrhSzOnjLSTj2gziEgiusYbdy2cveND%2F4fCZzOD%2BsIyvggg2swKKOgTXAg4D%2BmRzImsv4Li7IwTqIQ50ncB3cwwtrPdf%2FKC7Ao1KL4THzAdIKnb4GQsZvuO3WuVr4op0Og6FOYQhgyNz%2FaLc1r%2BLiQnarshjCNR%2FggjxM9rb%2FAyuowZ02QArQAy647CIufuOPqdJMwT%2BEAuJHLOVbvoQQwDoDPu7A9SH%2BkDwAnC0f1LYRkr7pRy89WIPVt7qnX0KpPqEN6EMoQDru2LmDA0AAsMKQejzvy4HHf688nKMRX3zGfxnHA38cL1AIPDTS1yUr5O0QpkAovC7bj00K4MIjMr01sMEAYEUawDEb1DytBMKHYsUPrDAuROkLVD8ico4T4oL8D8MUcjAcu6H9W0N004oa4IIrAAQuXMN%2BACiCSxyrHgAA2GAl7lIIhhMpVrQ4ccowcaFeMLThCqLEhiAjXjR5kmEISOKsqSEAQMMhlnJeNggkbtgUlDtNpsClhOEPhJA0MAQytChPpRMDXUq5suUAAA5kDgO6lOcWjZdSMFSi8ZADr2CtxWK9GGZrVwBoIZYYKy5QWbMmHQSyZm0MQw0rcRWEydfvXJMHIXYloMaaOEgitYrj81LwRQ2swlAMcUmcKxspMWuOTJEDri0UHYr7ybBEqIQdP%2B%2FUALn13NcVZ8dW6iDpRNy2lQbgAFsvb6Ua5OotLvwigdwMlSNvTvH5xOjIYR4nTvs4dejLAUzXjh289t3bK3pvPV43d%2FTUr1OsPfG9c%2FXzv5uMDxP49%2Fu1AwIAOw%3D%3D";
var URL_HOSPITAL ="data:image/png;base64,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";

var IMGether = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAMAAAAM7l6QAAAAA3NCSVQICAjb4U/gAAAC/VBMVEX///9XamIzaXVATU8kUFobPkkvOjwPKTcKHykzanszaXUqY3UiXXAoWmcyTl0pT1onTVlSXV9SUUgZS2YPKTcQJTBOjqIhbpInVGQbPkkYMTk7c4EzantkWk8qY3UiR1QoOD0QJTBqtMtEg5QweI11ZFAxcYI5bnszantJSkISM0UPKTcQJTBUpMSLhXhHip09iZ0pT1ojQ0oZKzAQJTA6gpp4alQqY3UpT1onTVk8Q0IQKDMPIigKHymWjHtBf5IqY3VATU8YMTmcj4FAe452bFUzaXUhXnkPKTcweI0nVGQxcYIyWWxSUUgnTVkbPkkvOjwoOD0QKDMzaXVJSkIkUFoiR1QjQ0oZNz0QKDOk//+F+ftr//+P9fXh2tNx9vdY9/hu6+xC8/XSyL076etu29rRwq5T4eNR19pW09C9sqHAsZxQzM4d1NYtx8iyo5NKvNiwo460oIQ5vsImvb4SwsU0uLdJsMljqrmrl3tTprmelIJAq6Zwlo+WjHuZinAopadAnqQSq7CLhXiUg2gnnJ6OgmuWf11EkpMRnJ8flpWLe2GEemtjgIB6emuEdl+LdVwljI+UcVJ8dWRYfXJzc2ljc22CaU5Ad4V4alQjf34weI0TgoZuaVt5ZlBkamRNcWw7c4E+c3V1ZFBXamIxcYJ3YUU5bntrYk1iZVIpcHI8aWwzaXVJY2spa4Q3ZnJqWUVkWk8zZmZpWkhkWUkRbnJZWlM2YmEqY3VcWEtVWFNLWFdjUDkiXXAfYFxXUEFSUUgoWmc8V1AyVls/VExYTD9JT0whWllTTDpITUtbSjInVGQ1Uk1QSkBATU9JSkJMRzonTVlDRTtKQjomSlM/Q0EZS2ZIQTEwRkI8Q0JEPzEoRks6PjpCPC8jQ0pGOio4PDk6OjEbPkkvOjwxNzMfO0M5NCooOD0zMzMZNz0wMCkjMTQsLykSM0UYMTkqLCgYLjQlKCMZKzAbKSwPKTciJSEgJSIQKDMQJTAPIigWISITHyIKHykRGRwKFx2a99rCAAAA/3RSTlMAEREREREREREiIiIiIiIiIjMzMzMzRERERERVVVVVVVVVZnd3d3d3d3d3d3eIiIiIiIiIiJmZmZmZmZmZmaqqqqqqu7u7u7u7zMzd3d3d3d3d3e7u7u7u7u7////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////PalB0AAAACXBIWXMAAAsSAAALEgHS3X78AAAAHHRFWHRTb2Z0d2FyZQBBZG9iZSBGaXJld29ya3MgQ1M1cbXjNgAAAuVJREFUKJGN03k8k3EcB3Aduu9T931fuu/7PnVfiERaihgVUpRGyBJrjuaIaki2Wo4cG3JsWjuMaW3y0/a0PWZPU81mePUghfzR59/36/fP9/P5GRj8b7pNWLhh6/YVM4Z1hUM3Hw12PHfmvHsAaf+cXp2wx5ryAhLO3cHhJi6AEMU8OLmDDjpULeXQiN6OF93x8QwO50v10nY65KSqVkzD+9+yO++ECyaliDXfa9f90T6Ha3UIg4TH45zsXHGBUQXZKo2ubn4br9dpqz++pZIIgTjXm4SknHt3M0r1uh8jWnWktklfySx/k5WTGJ0Y44e19SKkizWN2l2tvKWuSSPnP3GxMjW3vmzvibEQUBn8UkSnGNusA4+r9ErACbjjgTltWxjsE2LhlZLOEMu/V6xu5vE5CqUUsBnv31FvmNnnepMwbsx0diVABPv6orw8rQoAwJZdsC2MDTJz5sRisUw6F0BK3vNxKG8qFsBSMb8ca5XwgHTJMhrv51JaJAQA5oVOQ3nHizypHH3+yAPnQ7x0Ns41/HYJVwQAlBe6COVtzz+J+Bw+h01/HR9nY55NCQrK50qEAJFFLEB5Y7IMSAGDzk6ne2BMbULIfq/yhZBExJeFTkV5drECliNyLpUc6X3f1Ncn7jGTK4KgEmlV8iiUjXjf1DCiBHRyZKSvZZJ/akK+UALB4nrFnu4oG5qoGpVqBHApYfHYq5SwvIzMzxAMI3rF4pajzqtr+qlWwxI6+Yl16sOiDDILgpVwY51gcAv3PtXQiGgQQOc7e7KIlNjMIgiBNTrZqt+FTtE21EuVQBLuXEmhEJ+xhBCk1skO9GwrfJm24SsHEni+Y4XRnlGKSkRoXTyjv2ta+6Om4kMuI59GiqXQ6ELkm+rEpPZbnFtWVqMojyK4OwRQP1ZUKUzGdFzy8J1ZaU9fxrhdd8uJeHpsiWHnb2AweuXeCLdrV64d2T29/z/YnAETZxobzzLq1yV2mV/IiZTN2LdnjAAAAABJRU5ErkJggg%3D%3D";
var IMGdeleteButton = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAADBElEQVQ4jWWTTWhTeRTFf+8jk7zXNB+tKLjINGkHhUawLuxKDKG6yaJBkBIorbMJDLgYSgvtqqmbBy0UC+JCBLN04aLBlWhXSmuxKS0MozKFjGjbKG2av8lQY97/vVlI40w9mwv3cs893HOvwjFYltUFpIHBY6UCsDg1NfX3f5PKseacz+eb7u3tJRaLYds2UkqklJRKJba2tmg2mzOTk5O5Hwgsy3oQiURupNNp3MNDKqurfNndRdo2SiiE59w5vqoqKysr7O/v5ycmJn5tEViWlYtEItNDQ0N8fPaMnXweWwhcKXGlBClRfD68166hXbxIsVhECDEzNjaWUyzL6vL5fKVsNkv1+XPe373LqVQKsb7OP2/e4EpJW3c3wb4+dh8+RMlksPv62NzcxHGcqA6k4/E47uEhO/k8p1IpurJZ7HqdP27eBMchfucOut+PU6uxff8+jVu3CIfDVCqVtA4MRqNRKqur2EIg1tex63V0v5/47dugKOh+P7YQVJ88wX33Dr1YJNjfjxBiUAWwbZsvu7s4jQYfHz9mJZHArlbRQyH0YBBbCP5Mp2m+fYvX68Ws1TAMA1VV0QGklHz99InKixcgJebp06B8d1gBfvJ4cH0+AFTTRBoGmqahHhG4hoFr2wTPn6f/6dPWZCkEWjDIL48eEb5wgTbTxB+NthSoQKFUKtGWTKK1t9N5+TKeUKgl+6/r15GfP6MFAnRcukT7yZO0X72KEAJN0wrawMBAWQjxe/fZsygdHZRnZ3FqNd7PztJ4/RqlWqX58iXa9jZKoYB3fBz3zBk2NjZwHOc3bWlpqZpMJpWDg4PEz4kEzokTVO7dQ+7soOs6Hl1HEwLlwwe84+N4UymWl5ep1WozIyMji61Nzc3NPejs7LzR09NDo1JBe/UKs17HNAz8sRj+K1fwhEKsra2xt7eXz2Qy30/5CPPz8zmPxzMdDocJBAKYpolhGBiGgRCCcrmMlHJmeHj4x2c6wsLCQpeiKGlN0wZVVf1m1bdYUFV1cXR09H/v/C/d00mWl+s9twAAAABJRU5ErkJggg%3D%3D";

// - RESSOURCE
var IMGgold16 = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA3pJREFUeNpUkztsHFUUhv/7mPes17PrN7ZxsGMwQhGJhESkUEBDJB5yh4glGkSF6FKkTENDAVEkGgRSRChAoYl4CQmQQAmxggjgYDtxnBg/1jGxd7zjncfOnZl7GZsG/uZW57/nnP87JG9+h30RwqCET5qrvyrTexSmzQHWDV59HKBVqPgmkuYiWkufQhUZpCQwuqdAlFIHBihi3P3zJ7B8HYP9XUcgNk8W4e1JKAwqKUPmTswrY/SS5KOLjdlzSPxlOAPH/jXI0xD35y7AD4LuYW3+Ha78mSRo2sxkYIyBUA2U29Ar/R2t/uS5duSd3bnzfUopAd3/nBsWaNHpHs6/+RoieSPak7bkLpjRBRgVuL01KG6gvbNh5knzjFcPLxfUq0eR2DcQuPTJx2Tx2sX3QazjaeTDclPoDivSVOwkoqYK9ErdHURt4iiK1gKyOHredf23IRVoY3kWV748/9LYWPepNC7yIOpg834B7o6lllMP0NmGyvf8QprrIHWh9x5DtHYdA+NTr/UOD06yk0d7aL+98u7UxJBXFJHt2IpAM9FVtbSktVXL0pxkaWLnhTIMQytkuqURuVXG1qUF+cQtvrK2M2Rl8hABqrpNE6p5gWd5PWlGU6X3WZryJTecRDHCoyjhedyBTFI4cg3+lhinfTU25Fh6XyZi7cHfwmhs5JW8cFiU1VgsHGXaeiGE3AsjK6BmFdzyVBjup76JLAklX1re86sk6RBNwdILHgStSqtxC7Zj2Nvru+ADFS2O5QjnAfJd8SCLN3rqdUryVIIqsUtPnJhaX91s3wsjwDQJHn7EhsgISBlttadaLtqAYVuo1HtVEoVVwyQ0CdUBpa5DrtHjL86kjx0ZvXxzoVkSoWF3K8LQAEEeBciKHEpl4Ewibe8SjfgGg4Ru10qwsqt77fwqJdYknn3l7Ic3FprX/XI2w9bR9hPotChbzNBuxeWbw3VLKilDlupwqyS6t5KcNnRNHJA4cvi51jPTb506f2Hpx9sbEQzHgkjLNMsCr66DUlkeUAHXZoDO7y6s9Ly8uZHMVlz+n2Mq9e0Xn5sXP3jv1SHnr5knJuynDw1aTldFK8eQcm0Hc/Or9LMXpl//KFq7sc3Cn+GNPvV/g32lIsWVH77ic7/9cliJ7RF0QqfQncYfdxq/c2mJN6cfgstbIIzCro3jHwEGAKjZsv5FZjjAAAAAAElFTkSuQmCC";
var IMGgold30 = "data:image/png;base64,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%3D";
var IMGfood18 = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAYAAAEhyb7BAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA/ZJREFUeNpi/P//PwMMsKjJC07zYvibqeLOx8CILAMQQHAOS5ah8P+fLIwIaYAAACoA1f8BSD4/AS7e3OogAf0U4vX3ytwTErkABAQHAIBaHP/TpUv/0qhb/ykgEHICCMVEsNZcEaFjBm/eWTLIy37azMuzkplfg2POOx5WBvZ/P9hVHbiMWT5+Y7xbGqeoLKVlwPD6wSUGDDMAAgCUAGv/A0s9PgAL9/YALh4bACsfGlzq+/7lPQkI9xUiIgA9Ix4A+fj6AAFJFRXrZfj3FPv29ADpCAoA4QH/ADURCQDy8vsA/fHzAPkAAAAExfj0S/sfAclMOiEANicRADsUIAAXIzMA6OLWAOTe1QDByejnAQYGCAD+/wAA/f39Hkw8GpZCLAYf+QQR+LXG68XFz+R6/v389gIIw5HYAIuasBCDkaAAg1xYANOLuYvadr15VyEoKsogrKnFwHvuDMOh/4wMTHwMDMGOX7/+fN/R/yrm16/ykP//34UxMz5kfvdmsYUg77a///6zMs5nYPj/kp+XQYuJieGhAA+D7NuPDLt+fmGw5RVm4H3zlqFSSf44y3xDPgYJTg6Gz+9+MbB+fMtwVoiTQYhTgOGGAgeDkIYGg+DOl3tYWP8y/RAVZOIwd5dhkJYUY+CVVGdg4RJieHzrOMPZs3cZLjz+PYPp9P0/Pj/+MjB8/fKH4evnTwzfv74Fsj8z/P/5nYGbm53h8/c/zxg5ObmAYfSPQYCXpTDGRTxBXZaD6fprnlcrt9/s+fr1x/Yv338zEBVOAAFaJWOetqEoCh/7Pb/EcZwmaUJSFBC0qkQBIaATqtRuTJUqdegf6MLOxkpZO3UDCdStaztXVSSkCoGQgAYhUpFSFayEJDaOE8f2s933Exg40x3O1b33fPdOpruIvn75Cqe1E6Rkoi0U8s8PTasZFwq5ZbO1OZfWnn72w/Xjy6uvi/kcvaTUyBZLbVYa4eOujfbJKeoKw03AIb1berE2f7C3sbQwjerFP1SsW4xNPcauqAdDDwQxynoaaiaNun0LEkfgXoiKF2DmoQ7yZBIrf5pvCUv1P3oSH639vsZ134WgCbXVRUdMmSOAG8bIej6KtgOIZtPjKItQv4tz/jKgkRtAKSd1qZhPvZ99JG8lEzKmJjMoFRJ4NqGhMqJDEmtHSIBly2CaDsoduJYJKXDAhwPsH7fQaFjx9q7zRrb78Rcf6nmSAkOXC7MAHUhwugPYRltkF4IFfUS2hV6PIeQJGE0HF1c9gAeoW7Ta9dVvhBDqG1bw6cyINls24ASYoLKkP1AlZDQGRSEgioKkJn40k4Prh+hYrv+z1v6188P8UD3qrEbc4/eGX8Y96T/usq59TykzoQAAAABJRU5ErkJggg==";
var IMGfood30 = "data:image/png;base64,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";
var IMGwood30 = "data:image/png;base64,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";
var IMGstone30 = "data:image/png;base64,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%3D";
var IMGiron30 = "data:image/png;base64,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%3D";
var IMGastone30 = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAMAAAAM7l6QAAAAA3NCSVQICAjb4U/gAAAC/VBMVEX///9XamIzaXVATU8kUFobPkkvOjwPKTcKHykzanszaXUqY3UiXXAoWmcyTl0pT1onTVlSXV9SUUgZS2YPKTcQJTBOjqIhbpInVGQbPkkYMTk7c4EzantkWk8qY3UiR1QoOD0QJTBqtMtEg5QweI11ZFAxcYI5bnszantJSkISM0UPKTcQJTBUpMSLhXhHip09iZ0pT1ojQ0oZKzAQJTA6gpp4alQqY3UpT1onTVk8Q0IQKDMPIigKHymWjHtBf5IqY3VATU8YMTmcj4FAe452bFUzaXUhXnkPKTcweI0nVGQxcYIyWWxSUUgnTVkbPkkvOjwoOD0QKDMzaXVJSkIkUFoiR1QjQ0oZNz0QKDOk//+F+ftr//+P9fXh2tNx9vdY9/hu6+xC8/XSyL076etu29rRwq5T4eNR19pW09C9sqHAsZxQzM4d1NYtx8iyo5NKvNiwo460oIQ5vsImvb4SwsU0uLdJsMljqrmrl3tTprmelIJAq6Zwlo+WjHuZinAopadAnqQSq7CLhXiUg2gnnJ6OgmuWf11EkpMRnJ8flpWLe2GEemtjgIB6emuEdl+LdVwljI+UcVJ8dWRYfXJzc2ljc22CaU5Ad4V4alQjf34weI0TgoZuaVt5ZlBkamRNcWw7c4E+c3V1ZFBXamIxcYJ3YUU5bntrYk1iZVIpcHI8aWwzaXVJY2spa4Q3ZnJqWUVkWk8zZmZpWkhkWUkRbnJZWlM2YmEqY3VcWEtVWFNLWFdjUDkiXXAfYFxXUEFSUUgoWmc8V1AyVls/VExYTD9JT0whWllTTDpITUtbSjInVGQ1Uk1QSkBATU9JSkJMRzonTVlDRTtKQjomSlM/Q0EZS2ZIQTEwRkI8Q0JEPzEoRks6PjpCPC8jQ0pGOio4PDk6OjEbPkkvOjwxNzMfO0M5NCooOD0zMzMZNz0wMCkjMTQsLykSM0UYMTkqLCgYLjQlKCMZKzAbKSwPKTciJSEgJSIQKDMQJTAPIigWISITHyIKHykRGRwKFx2a99rCAAAA/3RSTlMAEREREREREREiIiIiIiIiIjMzMzMzRERERERVVVVVVVVVZnd3d3d3d3d3d3eIiIiIiIiIiJmZmZmZmZmZmaqqqqqqu7u7u7u7zMzd3d3d3d3d3e7u7u7u7u7////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////PalB0AAAACXBIWXMAAAsSAAALEgHS3X78AAAAHHRFWHRTb2Z0d2FyZQBBZG9iZSBGaXJld29ya3MgQ1M1cbXjNgAAAuVJREFUKJGN03k8k3EcB3Aduu9T931fuu/7PnVfiERaihgVUpRGyBJrjuaIaki2Wo4cG3JsWjuMaW3y0/a0PWZPU81mePUghfzR59/36/fP9/P5GRj8b7pNWLhh6/YVM4Z1hUM3Hw12PHfmvHsAaf+cXp2wx5ryAhLO3cHhJi6AEMU8OLmDDjpULeXQiN6OF93x8QwO50v10nY65KSqVkzD+9+yO++ECyaliDXfa9f90T6Ha3UIg4TH45zsXHGBUQXZKo2ubn4br9dpqz++pZIIgTjXm4SknHt3M0r1uh8jWnWktklfySx/k5WTGJ0Y44e19SKkizWN2l2tvKWuSSPnP3GxMjW3vmzvibEQUBn8UkSnGNusA4+r9ErACbjjgTltWxjsE2LhlZLOEMu/V6xu5vE5CqUUsBnv31FvmNnnepMwbsx0diVABPv6orw8rQoAwJZdsC2MDTJz5sRisUw6F0BK3vNxKG8qFsBSMb8ca5XwgHTJMhrv51JaJAQA5oVOQ3nHizypHH3+yAPnQ7x0Ns41/HYJVwQAlBe6COVtzz+J+Bw+h01/HR9nY55NCQrK50qEAJFFLEB5Y7IMSAGDzk6ne2BMbULIfq/yhZBExJeFTkV5drECliNyLpUc6X3f1Ncn7jGTK4KgEmlV8iiUjXjf1DCiBHRyZKSvZZJ/akK+UALB4nrFnu4oG5qoGpVqBHApYfHYq5SwvIzMzxAMI3rF4pajzqtr+qlWwxI6+Yl16sOiDDILgpVwY51gcAv3PtXQiGgQQOc7e7KIlNjMIgiBNTrZqt+FTtE21EuVQBLuXEmhEJ+xhBCk1skO9GwrfJm24SsHEni+Y4XRnlGKSkRoXTyjv2ta+6Om4kMuI59GiqXQ6ELkm+rEpPZbnFtWVqMojyK4OwRQP1ZUKUzGdFzy8J1ZaU9fxrhdd8uJeHpsiWHnb2AweuXeCLdrV64d2T29/z/YnAETZxobzzLq1yV2mV/IiZTN2LdnjAAAAABJRU5ErkJggg%3D%3D";

// - TROOP IMAGES
// -- SMALL
var IMGsmallSupplyTroop = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAF17LrMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABNdJREFUeNpifPnqHQ83+8uXL5i+fn53JdeFjZmR4dr1S6qCvO5aigABxPj169cvXz4zOhupm4qJMPUtXHnnBwNAADE/e/bMwEjfRltQVETcTl+P5dOnd5umT3n38A63uqrwlzsAAQBQAK//Ae7u8AgJCPj49vTz8/v7+gT///2Zh2n7/P731tpml68C3d/bCN7iHgoQ/wMPBAQDBBQUE6zAz++3ylYzHv4A/gL5+PgCCwz8AgTR/hMA//8CAJsAZP8B6ursAwMCBgYF8vX2rqieMjQ5KisuAQIE+Pj2//7+AeLj4tjY2Mu5n+fo7/b6/RMPCu3l7VEsIszm9XCTnAL19PIlJCL/3eNdFANICPn21t5FJB2Wqrf58+37/PoB1dbRAwMDDQ4QTzMz/Pz7/v7+AwQDLRII5/r+p8rTBP//AP7+/tPS0hoKAPn+BhYKAwf++oTAzAICAgIAAAIANgHJ/gHs7O8HBwYDAwEAAQL8+/v6+vj5+fr7+/r9/fwAAAAC///9/Pz7BwcHtbexrqid/Pz+BgYGDhERCQgKCgoMAefn5/3+/YuEeCkeDgABAdbV2/P2CgDf0oKxwAECAgQDAwFuZVs8NCW6vswZFxL7/QA7Dv3qGBYICgoEAgMC+Pj3+Pb8ubrOnDkX4sjNTCIc4O733PgHAgEB/v7+AdnZ1d/j4/mhgQgLDfXw7qnX9AcMChH46WunvQ8ODgQAAQEA+vqKudMJCAcZDAbf/QZBDgEgFg/k4uIJKCcC/v79ISMkZIaN7ff+0er48+nuzubwxuXzBAD+AwIEAgAAAAECAcq5tfT9//b8+wQA/niXnNfi6gkMDQMDAgT+/v4FBQLn29kiEQgQBwUUCQKumZe74uf8+fr//wAClEw2oU0EYRje2Z3dTVqTtElbTZP+JFatFGo9FNIKSupBEKRSwSKIx6CCF8GjeBV7VqFYf5DgxUgxVRARRUlaUam0KLS2idGmapKmSTbd3ezM7vi1mcN8DMMw3zzvMyiXLyKOAUEgvzPzoggvEqjFIFDLpLqmUkrr7GENt20fQ1A5DNsIMYArYN5ml+c+Jl9NR0k1JwnQFVN1anO0nhy74O3omo5GZYyOnzrtbmkhhDDGUDabxRjI1aYmb1eLmS6vWxZ5aprlUtXtdinKVr5Q/pFab1aVO1fPzn1dji+sR27d3eP1mSbBhNZ4Xl5aXpqfTexulpI/fykl/WiPl1RKsfS/Vr8XMebA0sjg4OtE+tv31NCZ8+2dnUSvIZDVMAxikEAwGDjYt5D4MN7na/egbD5TUEj4QPfoifDs58VU+vfMm6TN5SrWtFAgaBETVBIAzKXLEQ4x2SYzTc+9jTNN2dJqmxrJK1AK9+LvVktVwbGLR0IjLR9rwy9jsabefl9HJ9yKwU2AratqKDxyePj904cPnj1+BN8cC7xmkKJqVv4U1v5uDHjsfo89p1suuyTj7QghDMyAvAXAESVUQEg1aBXLDZRwhBKTYSwWNsrnLkb4amnmxXOn02lgcZRjWMQQJEhkcTsDgtwExKuL+8WaAzNCqchzPR77kX1tn55MDQyF7ie/DI+NX7s50dt/yCIG6IB5xNdzlyR5LZPJp1a63Q6TQyWdVgwTrNjrbgj5m+YnJxolfOX6DXAL2qxL9R9U125Fu3Cr0QAAAABJRU5ErkJggg==";
var IMGsmallMilitiaman = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAF17LrMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABJVJREFUeNoAHgDh/wHp6u7h3tUUFhoC9PPtBa2ECwsMBPj593Ct0ATAQAKI8evXb58/f2KWlZE8d+QQY6Ke2MNf3AABACAA3/8A5+fn8PDwQSkX7u/v5ubmAvHx7WY7KUYfGEU0LP///QIAUACv/wHu7vAJCgnu7On9/v/7+/oC+/v59vX0d1hIBgYHCAgKAvX184JROu7s8////wYGBgIDBQO73vL8/v4GCAX4+PYE+vv8FRkY//jyPiojOTQvAgCbAGT/Aerq7AMDAgUGBQcICWY9GxQYJ3ygsvj39v7+/gICAgT5+fYBAQEAAQl9ZltDOULS9Qj9/PsBAQEGBgcDAwME9PTyBQUEcVpU+OvmEx0Q1OHtm5MbXGVm/v7+/f0BAv7//fr+/wDp3Q8sNszl8Pr8/6ujnz0oIdTLwgEDBAIA/wHv6+kRDgvbysMMBgQJBwQD//5fTkZ/b2m1q6QCcED+Lg0DURy/vCTN5ZqmpYs46CR1qCB0EQcHi7sgBf8ABzc3t07+L04OLiKdJGCpg6A4KcFBsbQSigFpml5yP3zndsf3fXnv87Fms9TzXFwDtj26u+nsdrMsQ2YpBSEE0IYwL3120oPX6OnxAcDGu3yfMRaAECUOSinRWDQcsaqPHIhEiGXYMObLZfwet6iKvzilgbFrGWdYB6PWgfPDbjvQ6w3d29/zaFVrUzVttP6dJM2AXT+POReObSst/jeWpomC7ge3uYY0K/JC1sPa4OrSrXhYxRwvVy/DaG2rM88Xk1/uVdyLfv/06AAcA4sxoUFIVQH4YawUcmOlmfykxzut6fgDpFJEis/4bbVRU4tMK1n3Q13KOVeb7e0/AUomm9AmgiiOz+xuukl203y0NgWlrYhXiw1qQRQE8ebBo2ePelEQBBG8xga8BJR6MVj8gIARD4oeFCyepFRII1ITI7Ybm2g2n5vsfPpmexhmmGHe+7/f/z3cbLUxklCopmMVTdcj4WipuFZcuToXk6P0yWt381PTM4QQkCHAHQSdgoCNYirALwEJODwhuJXIJ/7H92/iiYWz564kkOWPPIRVfSqwrqs9QAohtMB0pjBQRogPkXcaDcnlVDyVLRT+ceSNhwgJFGSEb4DaNKFpwwAc1+u1QANo1jvdXu7WddOpLM7PaGHTxda7z2U9NZt9uDp/+IgCrIEELUiOlRYoxvcpLI7Qg1x2r7zRE6GWxxcmI53dRtIKN+rVl8+eSiQZB40iUEr3O8RgXIEGIVtfN52N9Zgdrbn+dtNxB8QjjAhOJYpYYcu24QvlMEp8n5YCBqOhScy4fPv8ifD6Qz1qJqehsf961PWphnAqmVx7tLo4m8jduUFG/ahtA2vArhCAHjgxwQfeKITlUub40ROnqq3uen2v0sM/2cSAsXRiMhS1XpVeXzqduXw+8zh/z9CxZcdweWsT7DXMSP72zf63Lz3D+t7oHjsAE2NAce6Yt8dc6KFDcfvgXLrstIbNPwYWfW98v/BCmYa10IdScXfHYZqRMGQ6NkEF6oyo0yeAlDDujX2X0sqP37+2a223s3zh4qdqc2n5zH94inh4Fb0rUAAAAABJRU5ErkJggg==";
var IMGsmallScout = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAF17LrMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABNhJREFUeNoAHgDh/wHp6u4LCgbx8fAC9PPtZ31mBAQFAvn598u5xfT08gKI8evXb5++fGS4dPWyopEqQ2BS2NHDewACACAA3/8A5+fn8PDw+vr6c1RJMEAyANfY1So7KU5kS5ybk+bm5AIAUACv/wHu7vAJCQnh4uEPEQ328/QE+/v5AgL/lG5dF0RP0trOAN3d2z1LOSYnIMXGxOvr6wK8xsP//AYJHBIgHyD4+PYEt7y59d7gAgL/+Pn1CAcKAgCbAGT/Aerq7AMDAgUGBQMDAgUGB49pVc3L1t34/Rs+KWVTZAL5+fb39/X08/Ll6Oc2Ozjv6/LE6fAGJhdDM0ZBO0MB19fUCwoKRVRLJSYgHykd0rfFFiooloOU/f7+AgIBAgMCAVFkXFRNT8LBxdfQ2vgKCQfu9vf49/7+/f7+/gL7/PtzZm24zMQH/wbg4uf+BQPg0tHo6OUCAgEHBwcCADYByf4B7OzvBwcFAwMDAQH/AAECz87MKSss9vX1+vn4//7+Av///fz9/P8A/v7+/2xqZgLJr4lyb0pYSoyciwoLDQL8/Pv9/Pz7+vv5+fhDQ0b9+vo+UlLt7fPExsjp6ucE/Pz7/v78AwMKjpuawKyoC/j53AS5HyIdsZ6uAwQCAvv7+v79/U9fWPH33/b38rzl6A0ODbqntf7//f7+/gT6+/nS2dn9/fPY1N06Wkkf1t5/dYXv8O4DAwP+/v0CCwkKdIByLCYw39ve3dne2MnQIB8hAQEB/v7++/v6AuTp6f3//vv+AxcdF/Lu8+j4+vX18/7+/gAAAAMDAwITEBD///8L/wDu2eT/8PhJMjW/s6z39/b7+/sDAwMB3dzYTWBX/O/y+AMACxEMBAQEAdrlvtDS//4B////AtRQLaFNRFH0vfk0k2mtsZUkNTFNbPNpjV8qGuIHqSCoC4VuRAQXInQhNK1IobjpThDdiSi4qJ+9FCvVIlFLaKktJkXNRJsmpJrGSWLSjOlMMjPP9yIeuIsH99zfOTz4SyxCgCgMGuJiFA5IAYRYlp2ZeXNnfAwq0ukz5/0+7++fme96ve9wcK/bzxnwBWRG12oQZwMEIWZDgNdFKiJlwfSrlydcFueOgx/mImcvXnka+fg2PGWafNFEU1wLN3xthGlsQHRtyKtBCBiaxsqtriRtTtf7SFiUQWy90Hc04PB2Ort2akDf4/bfHByxWWwwlUpiAgAkOM4wH43ef/ygLOUpwOiZbFXRan/kbxvlTo/N1+0euhoKHgnggUk37JZEIk6ICPDN/MNnExNPHnl73N27uywd7Uuzn4pCOod0U9uW/sCp0GBI1er/d4SYzOA3QzN49KFbo9HYnMvjqlbUyedTB47vs3nsoljYli8FDgVvXB+WlRq2FCQA/4B74xr0+N3bi8vzvT3+gXOXhPhXpGtpIfVlSaCMXDqXd/AtqqZrap1kY20QIpZFRCOYK+QTK4Khmd/l9IRfT5u28lazmTfy8qZcLVe2W6ylDWlViBG71GqapuGeDAFL4S/CbjGfPNYvlSoLnxfF7Lq8VsT/THY5Ka0VoapDAxWffXdvbLQoZiFDk/NA4i+WZYg5ZEW5fGGg17efk6pGtl5uAhllk3W0a60s5FmdgQvpH6i1zdph5znOaOQ5A9fozPwFDKNyVLW6RokAAAAASUVORK5CYII=";
var IMGsmallPikeman = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAF17LrMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABLNJREFUeNoAHgDh/wHp6u4LCgbp6ukC9PPth3Bu1s/MBP7//fXZw6rSxwIAFQDq/wH19fbz8/IC6uvp/Pz7A+HMyhoWCQIAIADf/wHn5+cJCQkBAQH4+Pji4+IC8PHuTRsgZzU7AQMB3MzEAojx3bsPHJwcP398//L505evn1l+//7Jzg4kf7OysYtycTF9/fpZXV1z0+rV////Z2PnBOr/6MXItbSt+9+/P0A5pv1rFyVMKrBwNS2302VmZgIIAJsAZP8B6ursAwMCBgYFAQMC/vz9/Pz8+vr6////8PHxDg0LAvn59vf39fj49l1dYFxfaf///v7+/QEBAOvl4hAREwLz9PH19vHt6+sZ//gyEv8DBAP8/fv8/Pzm3dj4+fcCAwICaU1TY0FF/M3e17zMUh4k7evpAwYGzLqz/v7+BP8BAkhMOw0lMxT56AMND7ehqdDAvzJBQyExNwMCAgKI8c2b9+zsrMxMzAyM/yHu+vnzJ5C+dOmKjo4Wy///f//8ZWRiZvz/nwFoGtDNzCDA8f7jJ05ObhZgmDIyMf7+xQA06vfvX0AFDAwMLCysv75+BhoGkgb65OGrV6fO3DTUU5CTlQf6Cuh+QW5mbm5ukI5fv34cOHTk/N5NuZFxTCxMYAOYeHj4gXYx/f7z8z8jAxeQ+exO35zpv3/+BLvmFycH258/P5mA1rRlFR7qmcL64ldjaPztCxeAdv//x8DJzf3r9x+md+/eX7985ifDf4Yfv/g42JZPm8LAxPj41tUvnz4BHcv0+N79thk9bBLsDsWhdiGWympyS1traqICmNk4mZlZmHavW/nowcvbH77YO1vfufnQLjBC2dxuyt7jGvoGQC8ABBjjq9fvGBn+A40BhgwwZplAkcwEDBwGoAuRwH9wVAI1vHrzbsWy5QmJsbw8fCz//v5iZGQCuhVIAnUzABMrA1DpP6DfgACogQEGgOYDEynQcG1dHX5+/l+/frOApUGhAzQXGLasbGz37j+8cP6itJS4ibHxH7BmoDuAdoLTJvun1y9+vXnKw8MHTM0swNAGSjAwgDAnJ8fp0xdzMjNtXPw+vv9w4dLFlKSkHz9+grQDXQYCTB8/fBAQFgZpYGQCav4F0vj/PwsL8/MXn04eOSonLCz34ZaslCQzF8fDBw/EJMT+/f0PMR3owm/v3/AK8AEzzd+/f5iA0QbMGyysLD///l88ccrWjl4NFs5nr76u3nti04Lln9+9YefgZGJiYAYH599/f759/sTByQXMd79+/wIGAhCydhSWhatqPNtzyFxJ48/L999vPmV794315esa/4hsD7/v378DgwNkFTPr//9/ePkE/vz5Cwx9oE6md2/eMLMz1s7qeC3AfPD59Q/sP7/8+/bny+fvnAyKpur+MR53r55///btmW1rq73M1nQ3Pr1/i4OTk4WVlQWYuc4c3q+mIsnGza9tYv6QmTG1JFXHVG9W/6wDm7epy+jdv/+chYlp67y51y9e8UtK1mFk0Ldz+fP7JysLC8v7dx9fPn1oaqR+/eqdlx/fP3nx6sjB40LionoWZvLKilfPXg9JyxIQEXOISGVhZnn9/MnJvduB8QRMwsD0BACAN3dEJH9vCAAAAABJRU5ErkJggg==";
var IMGsmallSwordsman = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAF17LrMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABP1JREFUeNoAHgDh/wHo6e7h5OAVEQ8C9fTt6ujrVDw+Avn695eTkBEdGwKI8evXb18+f2L++vNPfkUFi7ur/cP7dwACACAA3/8A5ubm8fDwKyMk8fLy6u7tANnZ1VtVV4qRmlRVVhsXFwIAUACv/wHv7/EJCgjPz88bGhn7+/oC+vr4z9DRoIJ+CQ0NCwwNAvn593d5fQYkLME/Qc7BvwP4+Pvb2dYCBwv+Mi9HUE0A19jTY2VlFBIUMBcW5+flAgCbAGT/Aerq7AICAAYHBw0MDFVUVvby86esqPb29/7+/QICAgHj4+EDAwOZnaEpKSwGAwF3d3M6Pj9R0tPf8/EkeXgC9PTy+fr44+LmamJeHB8fXWFq4Nve0OzqqQkMprrAAv7//vj5+P38+xIXFV1ZWNvZ0iYmI53x8+3e25aVjwL//wD//v5IRTz6+PsmKCjIvLvFyMsSBwWdsq7//fwCADYByf4B7OvvBwgGAwMC/P7+i42Md3Jy8fLy+/v6/f38AAAAAv8A/Pz9+wAA/4yMizMwM5iYmQMDAwYGBwkJCgoKDAT8/PwBAQEIDgy9urv82NROcXICAwMDBwYBAAH49fUE/Pz7AAIBYWVqMjQ3+QkJUE5Smmtr36+u1+Xkj+XmAvz7+n1/g0hJS9bV1CcnJx8aHM6wsgf6+d7+/gH//gL6/PoRExF8eXkTFBYsKioPFRYIBgOS5ucaS1C3tbUCBAQEycHETUlFAggJs7m84+Ti+ycoK0RH6dTNODg3BP38+ysxLR0hH6yNkNTOEDMzMrfLyd7r7nBmYv8AAAL9/v51cWzFycsnIyD9/PzCwcM+QkEH//1RXl4DAgIC/v7+AAEBzr256fD0CwgJMzc5srm8BAQEGRkZAQEBApRQfiFNRXEcv2e7193Z1GqbzeumYkFBbQqVsVJC0yAyIkjoRWoRBLMSYoa9FPhaPURB/1yjMCqJUiHIXryhYqXLOadUarqGNTe3u+3e7W733+nMns55Ofy+v+/n+z0gEmUABhE6lRog79S4mtRo3R6PIsFtJmpw8K3ramcZRYmCoCA8ioysRBwAQCeGK3IO5K8qgKkwtQpAEI3F5n/8/Dz8ob2uxrj6+3vAT5kteZVoAsBklBKASECoQFxR8o5DiN4TmCTT4xNDA0OjNG2zWkcZfunvevlaJJ3mZD6bXo/hsiiJIsPE9VVVZdU7QDC4jASQGs0w/en+3Yc9PTdjCfblM8+ZtlNbqYq+Xvf0jJfjhYsV5gaWuxWPZlVQmxMct+8cO92GSpBD+2Sy/LRvdu/+fQ+euK842lUZrv7IUQtFNTa3VBpNhcU6TBRoMV1EEBwvFpHalVDI/dSNIx1EAREJh9kYk+b4hVm/gTIZd1knvT6W5b76/IwoQVFErUxhmLapxUYU+L6MO2qtdfZ6HHkAIPa6/11gfu5ad7fBZHg/ODDjnWSTCbTqyvISgPLx1tZEIj4xMhJ+00/I0onmpt01tRzHovxDQRScHRd6H9177nnMZzL2+gYxGlz0T1VXllt3bv+1sIAY5FAR4kyxRkNtKjx59hxJatVqHATmfBsMNnAVaDovdWYy2ZwkL36bKjGUkjpdib40lYwfsO1B30AyxZ6/7HR2uSRBzmcIQfvPndQWvuh7NTY2EQytHrQfcl6/sdloZNf+mC2Wki36jzTNc+mGxsMdXS5MxnA0F8f/AYFxas65LOYhAAAAAElFTkSuQmCC";
var IMGsmallArcher = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAF17LrMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABOhJREFUeNoAHgDh/wDp6u709PSpo6EAuLa0cllQ6erpAh0gHQ359YVoXwKI8evXb58/f2KKNFD5/uUjY39PpzQnC0AAACAA3/8A5+fn8fLxtJiR6Ojm6enoBPHx7fP08evgzGpRr+rc0AIAUACv/wHu7vAICQj5+Pf09vT6+fgC+/v5t6yo/Pz7BQMFqJiYA+fHvs2/wOTYzzFARt3V2ADZ2taHcWvWwKpAHx7PyMAE///+vbe9//fxNUI+GSEoAgCbAGT/Aerq7AMDAgYGBQIEA/78/fv7+/r6+/4A/fj6+gL7/AL6+vf6/Pr7/vxeQ0C5kX39/vr+/vwCAAINCArSzc4B29vYzsbGqqSoIwf85eHgHCYe4ej4epCP/QEEAv35ANXW0djZ1OPj3zwdH6d2ZNS+ouDh3vH282hNTOjo5gHV1dAAAQGBQjYKFRUDHCgYB/28uMCbxsjl5OY+RUYCADYByf4B7OzvBwcFAwIDAAH//Pz8+vr6+vr54+fpGBMR/P38Av///fz9/P8B/gABAP7+/v/+//0BAh8bGaulowwMDgL8/Pv9/fz6+/uicWX6+/v+//kFAQEAAAFMVFf5+fcC/f39/v//8/Tz7fTy3s7E/f4D///+AQEBHBwcxLi2Asa2r1oyKGdBO+71/IRxc8esowECAv///wEDAwH+/wIpOjtKZHD2AAoC6eEcEQmVlJ+5p6MGBgNmREBIWVoEBwYJTFlU29veNxsFJUA01+H+m46PkoGDRUtI7+fhBP3+/AMCBCUqJ8m8rxw3Miw4NJ+9uszAwzlEQf//AAT//wACAQCjlJIvJCDFv8sb6fbY1tsPEQ8ZGRQjLC8CAQEAdWFlIBEGB+ra5Nvd8OTd4t3cZHh75+XmAAEBAnRMtSFNRWH4nnPPdnfv7j6cpuVaKikJGTiGLjKCMsPcwljgr34kBf0ToiAo+xGFVD/CQoL6658QohBj+JWtaS2GlCXJKqctN2Taas593a/TO895ORw4vM95n+d5X5TcSCGGYlgsFAsni1Gpcgb4gXeKUmKuqjKFu2rkuUm/38xxrcdPFPMFrKngr7oTGmiFKAMYEmRQpgh9oSjwpFANU8QRIkvKKY9Homj85QuO5zHkgOIQID3V1NXfscvH3M97PROD1xO/oiyGZAlRVHKhhI1VWW3v6kr/SUUWPpF8IZfZSkXm53PpdGX1Lgbri4JlRSE4kXg/NuK92Ed0HGbgdwUhYIVKjBitydW6EJpF72bezPn9wclx6BzRIAL89nbKarE4HNXZjU25mLWUlTe4D1/qv63Tc5oi80bx7eircGC678599G3pCyE62JyB/zj34dndgZ7udgeTi+cL++ptyFw3NDhiLRPj0R82s/GkzxeNfFex7sq9AVCDIAZB60nF0pC0uN1fO70zwbCgbDa3OOuaj+Zy+QfDT8GCrdS/bCYzPPQkNDVx69FDEFXNZsmOJyrogTChGK3HV9eiS2fanFpsOfA6UFlrtwt7K2rqDZKSSq43HGy0W7i2ztOyJOsMAlpc/IxZzAvGcHC2/0KvYBKrdu+hf5NFjTFg6mg8YDCJofFpc03tIZez6UibnuONnL7jXA8MEkEYAePV6MrjGzdd+8s3qMmaXYtlcuevXRWMQuLnckWVze31dXSfZUEbvX5qdMxiFVmWZQj5D9Y5ixOf1nyXAAAAAElFTkSuQmCC";
var IMGsmallCavalry = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAF17LrMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABPlJREFUeNoAHgDh/wDo6u34+Pje3t0ArKyrJCYkDwUCADcdFR8TENXV0gKI8cuXr1++fGaZnx2y9zMH8z9ugWdXLwIEEMOz58/CE+OevXj64sWLl69eMvT2dJtqqMiJCKzP8XVWkwAIAFAAr/8B8fH08vXyDAkJ8/Py+/v6AgkKCHdcVvr7+gkJCwgICQJNLiTg7O4HBgRPOTAAAP8DOS4oxdbc4rus3OXr+PTuAUEuJw8SEADv6wUhKJacoAIAmwBk/wDs7O68tKr///9uZ2nKysnu7u7o6Ojn5+fl5eTn5+YB2dzcXkQ+TzEhyP0MAgQFmJadCQoJlnhqAA4UaXh/AxgZFvfr5xAdJLnCx9zd3vTw7+mukrzM1GtSQ8vd5wQEAQH78e2dsLccFxTq5/VMB+eX1ONWa3Ofz9/mvpUBQSkf4/L5PycY3/L8Qh0O0ePqyt7pLy4tkJ2eEBATAgA2Acn+Aezt8AYFAwcIB+vr6g0MDvv7+vn5+fv7+v39/AAAAAL19fP59/OwtLVnYF8GBgX///8DAwMGBgcJCQoKCgwCDAsKxs7QgYaCNCIc9vf3/v7+AwQEAgICAAEA/v79BGNaWP/m31ckF8DZ22f39gABAr62sAcOEz8+PgIEBQLd19QzJBni9QD8/PzU1dH7//50cXSjg3dMSUYBAQEEBwkL9gsUytbUBQcDgYKF5tTQZ0AvKR0R6hYvAQIBBAIB/gL+/Ovx8f75+Qj94ptlSJS4zLfS4jIu+tfU0QL69POjuMA7MC0D+/pPMyXu9Pfc4+jB2uDW1tbl4N8EAQwPKx4e4t7fcGpis7K24Ozy+QYHsa6qqMXOAP//Agn38gP/+/H29rq0tls0IdDj6/b4+/Pr5gQDBAEAAQKM8e27j48f3+diZ5WUUWRmYnzy4sXZk2du37yckp7Jz8f36xcw+EAAGFz/QOAvMCj//2dgZGQAhenvXz9kZeSZmFguHNn+n+Hf1BnTD8+aIPrjC9BTP38Bw/4PUAcDGABFmEHxywgOUiagESz//v+9cev6h3fv5y1a+WbCFHYODhYV1SPbt7/n4kzLLoJYBVT++N5tEXEJQSHR169eCAkLAx0CMuXi5SsF6amTm+ul//+KN9G3EhL4cfG8HC/nhp37Xr18CnQj0Jov375Onj0v0cNOX1Ha2dJk144twIgG6mXW0tK8cuKEJB+7ugj3n0/vd527cufD96//mZ4/egyMc3d3z46u7pqUWF3OHz/+MRV5mwkrqJ05cUpOWVlcUopJkJ+H/d8v3r/f/n96ff3h40uPXv75/PHjm7dAO6dMmqYgyMt4ftf8bP/f/xh+ff1+8dGLSA1+B1O9wwf2/Pn7m0lSUoaFkx2YHI6/+LHt5gsrY11OZhbOn9+EGf66KIs1hto5aytsPnf78KU7Ylr6/lUTSrZeu3HuNNfHl0tnTWN+e/favYePH3/49vXHDzZ+wV/fgSH8k4+P5+O3HywMDKbKEi8+fN1/9eH3vwxBiamPHj3i4OWx9AhQMTR39PBmNJcTZ+bnZ2VlBaY2HVH2Yzefenu5fv384+mVc2/+Mr14816Qg/Xrj58vP/3QM9LtnTZdSFTq189frGxsLMBsoqul8fXlM6DxIvzcd958+fTl55XL1z8+f6YsJeKkLh1kovz8w4+vf/8z/vvDxcVrbGF149wxZU1dFhZWoGYA57RsVeFoM9MAAAAASUVORK5CYII=";
var IMGsmallHeavyCavalry = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAF17LrMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABPxJREFUeNpiePHy7Y8fP+/du8vM/OdnVnoaPyc3g4+9pYKowN27twACiPHrt2+fP31iZt606pOoNEN1cbEILxdAAAAgAN//AeHY2JulphAPDl1cXAABAAFyaGfGwsEPEA7v7ev79fECAFAAr/8B8fLz4uPiHBoa8/Py+/v6AsDCw5iAfv7//gcHCQgJCgA8IB02MzPz9PNYUU/T0tEAVCMfDQoIJh0bIBMQUkhJARQTEwcHCSAVDx4iHpCYngIAmwBk/wDTxcWTiIL3+ft0bnDi4+Hu7u3o6Ojn5+fl5eTn5+YC4/Hws5qdbSgfEAH9SUNDAQICDA0NbFlVZFpZDg4PAwH7/Nzd3QsICPkWGd/e3RgWGE5IQyUYEg8bId/g3AMWFxUY+ffXAAIIAgLj4eLQzcj//gBzg4Tm7O3mwrQAOyYfGxAMPjQyGRkZj4SCW1FOIRcUQjk30MzH7e7rAgA2Acn+Ad7g4RQSEwACAfLw7A0NEfv7+vn5+fv7+v39/AAAAALSrqrv7eesq6xoZGgDAwL///8DAwMGBgcJCQoKCgwCRmpttrzEsq+s+fLu3Nza/v7+///+BAQEAQAB/v7+BCkaGVEUDGoeGMhGS9za2BYWF7mzr9HT11NUUywvMQL8/f3tAASe7PaysK/m5OTf4N+9t7xWV1mHf34DAwMECAQE2PX49fr8IyUnurm83dfbycXA6OfiGB0jAwMCAgr//iYPDP4CBcrJxhkVFbq5s/n+AAX79RoYGJiVkgBAIBwNCAeOiYgTCwgnGhMzKSUSCwbw8fBHLiSxq6YE4Pz+ExYXure5ChAVFhUO4eTnAgACzszJobrCAQEBAg379SQdHMvRzyUhHlRXWgUGBQACAci9uQcICAEBAQJUUG4hTYZhHP/O3/y2ZdvSFjqjnMbEKZnV1EkMa5mgIEjUjSBddBGBkDd2oC6SboqIIIjspmCRYriamjAdyxMRoYahOyAsbR5m7NvhO2zvd+jdwwvvzfN/4Pn9/++LslzO7x2pMJfWNrtQRAnOzcfCkVBo/d6jhzStAXmIr1AQl1IoGaJUVQRF4Y0Qq2Oe+hp7Xqt/N/yq0lbnHR1R4tuU0QBkmZRlAABshgc2YzgGNZApqkK9UhgRDoemfL6V2dk6TBYzKb399PnrvcNvXgtZsb3zckdXtygI0B/vx/eCmL/a2zf2wdPqch0rK1dkmQj6/c+HHuu12p8SqGE0DUDsn1tEKJrPZrp6OqHlGIZFoxF/4NuvpfnYn79ry8uiyN+83S9wPK5nmFh006pjqoqoUoqYTqSBhqJUaWt3v9RkstpqfOPj8zMz3+eCDQ6nyB6cc7Z+nZja2d1pamkhCAw7TOJAkiJARXBiC8i6DB8XeUbLCELu7YuXk75PhczlpeRyMAkjRDONZx3Rjd8cl8ZOVlfD7UtoEshSlaNp8M5AEY7SfIaWwPTkxOcvoyajAVdRNp062nzRE1g4SLORBV9iY+3Jg/vorRt968FA+B+bzIELzhZMkX6srGp0BjV7wFA4SkA/EU4Q4TcwcHdwf3dPUhW3+4rRYCirOI42223xvURWkqus1kqz2b+4RFIUgaOmQ8WAS0MNRtI5IKVY1nqifOjZ01P2MzmxwB/mF7foSETK4zhZcsQU2YySQLBYLB3u9kttbfUNjd0916AReYFnuSzH5YqNxu3NkK3WDt8W1P4HKVlTIF53zDoAAAAASUVORK5CYII=";
var IMGsmallSupplyWagon = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAF17LrMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABNNJREFUeNoAHgDh/wHp6u4LCgbq6ukDOzs5l3hI9fkFAtfX1PX1A+Xa0AKI8evXb58/f2L0dDTNNX7GrCLwZ987DYAAACAA3/8B4+PkERIQ+/n69vb1qauoBNLFuL2Xcun0/VxEFrrABwIAUACv/wHu7vAICQj5+Pfz8/L7+/oCurq29fPy9/f1Dg8PxdbRAS8mExIJBF85BwT5+EuP2gIzFQAV+ewOCP/W4ffn2coC3u8CABAVutL5t98D2uPtAgCbAGT/Aerq7AUFBAMEAwIDAv78/fz8/Pr6+v///wAA//n6+wQAAf60tbLa4eTj193s8edbPiPSzcUAGzhPUVbh9PUB3+Phdz8fFBcMLh8MERAHutr66/0O4uHoCw0Sj5qgAy0aBurr5gwNCvMEFevo4ubxASITA+f1BR0eHu3r6QHW1tIGBwgDAwPFxcjiv5/vAhF2hZIAAAH9/wEHBQMCADYByf4B7OzvBwcFAwIDAAH//Pz8+vr6+fn5+/v6/v39/wD/BAAA/fz9AQIDAv////7+/v///wMDAwEBBgICAwEAAAL49/fl5eX9/fz6+fgAAwLt6OEDBQXw7uySo5vX4N4Burey3OTr0OHvzsfFRh73ODAmscfcT1JXCBMaEBQVAX1xYrXAxA8PFunp3fn29ZVVDvz4+rPN9I6/8vj18AQaExAzAuEJ/ehqQBDt9g6VxQb1+gTn5/JxYE6IlqIEr6ehKBADz+L3+/v5+fwBeVIe0NHvtPD9JBH/+vz9AjtESPMCEUZXXfkOIQ0UEMzW8tXwA8/q/AIeOP/59AMVCfzu8O/D2vUO//AJBgLl8gbU8xkYDQIH6s83TmQB3NzZ/gAACQcGnY5//e3gV3mYFRIQ/gABCgkJ+ff4AjRNLj9NBHEcn9mZ3W7pa1uxKqXKw5haSSkYEGM0BmKiUUJi4okD0cREbyZevfm3EI1eiFETvVQjYkRpsWsCRegDipYuLd0yLd3XrFO5+D3MTGa+v8vn+x1YVqoQ2BzXxoAQWxEH24iAbVv/6RAapQwlgAAyYszB2dRkgOv1GpsBTIcuy9L/iY1BjoPtJ5ttouhkxVmQU2uFrGGYmBB1KZUCEHV4fGPx2OvZ58kd1fRIMzevYnVr/s2sWlXODY9cnHqY+JBILycjZ6OD8SG35McCDzeLxaV3z+bmXpQNJyFN6O3hsvOb+1as29yDwTtR3S1Qy2g19zVO8K3kK9HrDybvPnaKAo8xZuWQV9eLmYzveDc6qALUDIZQUIOdHVCvlhXif9+KEGcYarXa+gZ19suff+V2nszcu9/VcwYfNMnuxg+XVQ+bOcUEHp1EJLHBawDQy3HP9z9NrvTlmGMRUSpZpvLbyK/AW2OPuvsiDULQQMi9R7ROl00sx+neowm5TKmRq9leryO7S/v89Mawp8tFJQFwttXUrMFov8uur3995TEVXGkYmfQ3y+E/Ibm3iRGbuB2iuRoI1HILgohLRKhs+RYbo+r2qq7pvEDDR07amDcDA9LINJTlZTmdWkt+qqvqhYmpQnHn49uXp9CW0rAR5Nx6aWj66eiVa4V8Prsqk+LPgNfVe3780vgkxqj981jqLHkWJ8uQnUWHE/GiQ+BZuBaApt4ydIPds/oghFmbmLvdKYT+AgnLfBZ/LXvUAAAAAElFTkSuQmCC";
var IMGsmallBallista = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAF17LrMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABPFJREFUeNoAHgDh/wDp6u75+Pfe3t0E9PPt+PX/Cw8ZBODh3493YvMLHAKI8cuXrzcef2AKcjF5dG4zs7i07K/HpwACACAA3/8B5+fnDAwNAAAA+vv6+vn5AuXk4ebn5iAZERoSEsTIzQIAUACv/wHu7vAJCggA/frn5uP/AgYC+/v5/f38/wEB2si5CAgKAv7//eSrUWBdRzsIogYGBgLv7euh0ybJv8v3QLn6+/kCp6inx8CxYEEcOi0l7OzrAgCbAGT/Aerq7AMDAgYGBrO+3avD19nf9HNmQCL3xCY1RQICAQHj4+IFBQWEYj8zKAfe/S8HBgfKyMiBTPwfZ8sA/vwB3d3ako2GJCQozKqJ9/v+EA4G9fb8A/78VWp8NUpeAvv7+WBkar/I2uUOPRwuOShCYggYJFd+n7fcDQUD/wHR0s39/f1QTUwXGxhMSU8EBAT8/fu+ubgZHx4dIB4CADYByf4B7OzvBgYEAwMEBgUC+fn6+fr60tHSIiMi/Pz6AAAABP///f79Au/y9YacxtXd8BcXBjomBy0wDvr49gEBAgHn5+cGBgcDAv4DBQgGBP/3+f329PT///4BAgT///8E/Pz76+3wA7NHm988Ew8H9vr/Pw+/GEicHCYxAwMDAvr6+e3r5u30AWpuaBIeKWBjYd7tBB0R/P7+/v7+/gG2trAaGRxpTTUjGxAIBQH7/gH4+fsaICZ+nLn6+vkE9vPyDigOmrnXOjAoFxEK6fD2jI+RKC4z5eLeDxMXAdvb2MS/ueD/MAi8TM/2NCQwNVcl23ST1lZ6n0w5HwMqKSbu7/GZk3bp5/smEvgS99uXsuLM2uELCvpKSEsCODo57e7uAvj0RFtuG0FnAS1eRlpnDAgCWlRZ7u7sApRMfiFNRXEcP2c7d3dzm1u2TTcL1kxEgvmH8imxbSolBcESNBA0opce6qEeosceih7CCOvJ/jxVpEEOg8r8N1JaaDTS6R3mSPdPt7mr013v2b2ns/xyOPxeDt8f38/3wI3NDAREURRUIiWrYmQCVqO8EilMemYpkhoYXlggZaV//U+vn7RUNWBRIARASCMFMJFI0OyoaAaIQemtfYQgjSeZ4n9xGYNe7TxuLGFRejMeCnytc3dTwPQZ+S9EgzmYJQDG3/bbdr5tq4x8gTXqC0YWihjO/MDxpFhjkhCBW2m3yWKlPIq21FMUBVHM05MX8oFAQINDjkqlq+/Jqa7B6vZHYyu2yjP3hMMt0dRynXUd5SIyRNQLHojjltQaDcctvHn1ci+XdWl+e5yGnFo/HZaZ/I7rtBmKcm57l2CBBfu4qtPmuUOkAgByseJ+/7jv/VB3T2+57cjE549To0Orq5HF5T9aNaNmaCMlsSDR226319TW3rh7f25yxGyxNLZcwFhA5RXWnitXucUgIQVBdbSh6wH69Cy5Fo7mSJmWnD3XgVWG4ReDly82N3X0vfsSUhzyNNZXYHGvuLvfP5FOpejmKkY58Lg/AapA4juOzXddu5laCwNJSO/i9vOdH54/xDpHKDDpbO8xn2i73euhZBWsmrU7jglCfnpqOr6xmQi+lhhJX908OjkXFQ0/YzALTOsZscl7i4vEVnigYYm7vnTcP6bT6eBiKEhjo5BlmczOzPI8TxF4L3lLNNoDJJQl/Zq0CNlsNhaLms1mg8Ho8420trb9A3aoatJSywboAAAAAElFTkSuQmCC";
var IMGsmallBatteringRam = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAF17LrMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABNdJREFUeNoAHgDh/wDp6u739/je3t0C9PPtgGtP4OLgAVRIOvn9Ac/HxQKI8cuXb1+/fGKx1RL5wq3AJMbHYaomBhAAIADf/wDn5+fa2dYnGw7Jqn7m5ucA3d3bOigSb3FrGhEG1NbRAgBQAK//Ae7u8AoLCfn5+vHw7vv7+gL7+/k2JRJ3g4gHBgYICAoE/v7+CAQFs56ODgHzGR4ZAV1URSIH76/N6Pb3/rvAwgTd3+TjCQwuLCseExAODxACAJsAZP8B6ursAwMCCgwLfnBn3NrVHxkPf5Wt+Pb2/v79AgICAvn59vj49oN4a9HEtg364vMMKsuIJP3/AQYGBwoKCwHX19Pn5uV+aVb7AALg6/oCAgAiKCoDAgUMDAgtLi8AhHtuMiALUjkT2sq24uLdh4J4JxwLKh0KfFMa5+rrBB8pMXWJmt3Wz/YGF+vj5Tg+RCovNRQVFcjBvAoIBQIANgHJ/gHs7O8HBwUDAwIDAwT8+/v3+Pn5+ff7+/r9/fwAAAAC///9/P39397bYlVHUUEzzc/KAwICBgYHCQkKCgoMAvz8+wIBAXZqXdnTzTwZ656psAUICwICAQAAAf7+/gL8/Pv6+/nw5d4FBQZYOQ8WDQvLtpQCAQIJCQkLDAsE+/v6s6+pBQUGCQb9Xa0O5eKbx8Mkixwyv8HDTUpPBAABAKSYjgEAAB8OB9DY2/78+zs7NXFuc/7++khCRgL+///49O/y9vkoRl9GTFAHBQS2rq1OUEy4usEfISIBMhYADhYWHhIFianKAAD9PTEkAgQF/vv/u7OeBxw8ATgiDgoNDw4QDvT9CBkaGPf189vPymJtdgD78lhoeARvh5fl3to7QUYMCwzr6+sCAgHx8/ELCQoRDgoBAAAClEx2IU1GYRw/591539d9zxk6IZd9rMhIK6PLoC+ii5DCDBnhTVCUXowiUOgmSgmCwJuuigi9sYuE7iLQECRtFiHFpm5trtXamLrNuXfnnPecnun/6nDgeTj8f7+Ds7k1jGSNHRQHheg6BoxGhVLKKPiyqVntVBIpdmJClVIiDKMIEWFSjBW4wVjaXK7nw0OvR0egEWbKPU7q7npk8zQ97jkunX6EGMY122BSbkepbTM5hGjaxPjLyTcvdvt8DS6Hy2G/fb5RKRdYemnm1c3S+h8L0eF9qqbqul4H1tpsOJGIwyYoPJVaDd0KGhs5lZAyF72nW3c5+PdkxWPFRMVpvePyteCB1oC/pbVYLP7LpJuafHhpOQLoBJIjD0OR+U9uh73MxIkWfSHFVtcoUrCK5b4jHYcDe7+EFwNtB+OxeKVSPnvmXP/dUE0th9M5+XZ8cXbKbrPmN6nfi7+tZOeSzKYpqtXKQbyfkUKxXCqUXHb7s6dP5j8vRCGRHyT5a/nju7GZ6SmiqhRJzra6g/cv9D1g1S0LsYwOD72fGNN0g/6NCMqzmQzfSHT39CJ4rJC4v+9KePpDrsJ8Xk+jQ+xvqGs+1qmpBMAJzrO/48VCvlplWGDJeX6zqnA6cG8wcGlAMEqS2XXibT7V1pmLhvOV0sWrg25PfTqdjsVihmEIclTUI6Lg6NfZ68Ebh9pP3gl2zSWMdo1QaeJYPIq2o9Q+FwFqGCkAA+wHMKZp7siBQQMpLRYLWMQZB75w/g/gTEKDnDUYsgAAAABJRU5ErkJggg==";
var IMGsmallCatapult = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAF17LrMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABOJJREFUeNoAHgDh/wHp6u4LCgjq6+cE9PPt//8PCwkBBPf39aR0PMX6OQIAFQDq/wH19fX09fcC6urm/v39A9C+rv31yAIAIADf/wDn5+fw8PDs7u+sdjnm5uYE8vLvjm5NIz1VFiE7AwQBAgBQAK//Ae7u8An3tfkMTvPy7vr6+gL7+/n5DVB7aFUHCQsICAoE8/Tl9/cRFRT3/fr8BgYGBNzX2gQC+CEoQ/8A/vj4+gEwIA0FFyoj/tkmIxhJZYcCAJsAZP8B6ursAwMCAfLlB7JH/k6tsrjBQA7HAkOb/v36AgICBPn59gEBAQIIEvtYzQEB/OTj0vljiQwD9gMDCwQDAwTz8/IKCfr38wQICQ0OERMTCg8IChD7+vcBAfn9/AICAAD+6+37r5eAvsTSpJmG/BAjtqiWBgkPrLfO//37AgQEBFxTSwIbMqynjgMBCJ+blw8dK4B2cNnSqwUGBgJwRDWhEERx/M2bMbMz7ZKWWgeue3agSDnIONjTrlIoFyLnzQlXlIuUg3JVXFlx0y4H+SjRymzaFetjbcmYsW/f+795Xn7XX/0+lWr1Szd0rXyMOoYYAxCY+C4DqcwRQlgIHiD8trOIC9uGIM5Gp0K/9QbDNC3LCmsATKn7LelzH6gqxNmNGxsVpqkG/5A08CAAoDIjYBTrm4hEo4wxQzexqmmMUSQ8hsOyZMHJd9ljdcKxQngQQgrHDGqex7EWUlQ1l9mNRNuRXEllnFN5CAbKN9cW7i+Prk4P7y6yM4Nx368CNEpjWQSHLIt8vjw/Fnv77R7bHh6fdU72auT3oVjR5Kptrc2Z/YMSacpuzVeeHM9/rbjvq0vL+ZKbSiWwYVqTc+ly8TrelxiYXsnd/oxMrX8Qnkx2c0b/BOiRWmKaCqLozOvr47W0WFtoCYU2Fku/GoKiWExRaiQNukET3Zho4sKVa2OixuiCnYkL46q6cFUXbFQWkiixGEirECkUilQLLfRjWvqjfb8ZpyQ6mzvJzbnnnnMuzOULEGCSnYxV4dgMCPpVLiAMTiHLOJbEajGLy9tUWw+mFRiJCGFiJcZke1IBzGQyREcTLKMYVokaRdyoQ4VGrP5R0tzko3u98nWH+XDHpeeKjj5J5P7hm48m6oiZCFEIQYSqEMoxQ2MSFqvN82Iqv5/dSdZ05yb0NiTyTQoZIWrykgujeZ4jO2CAIajKmi2WkpH7adA0k8vs2vrbJibf6zqdXKMGIBCFEi3XASAnkP9gBGAZwnZJIiPJnzQYZat6aX6q/iuv0hyvVgSiEwOqhWEpqiEIhLxpE4ytrQg8H12cSfwIm1uB2joAFQzm8H4dvn39wnfew5Urbu+o0Wrv7DJznBxjQosPPIMURhLLsmd91zaS1U9fF90nLmiN3mH/rXajVavVG5yj3+Op9HJYq7FwgmpvrxaaWyBXDw58gqux5XKpNP3mWTYR9V68HJzbNXTbvTYmFv1sMB39+bt+SM55xq5E3gX8V29MLyS2shWX0zU2ZNF1WcgUWSQ8H/wQunn7zspOIZlc24xH0h+3Rs6cZuj2b7Mvyw3umGd4cPz6/YdPN+Lreod7e3XW43psZFtoSZJODXlUD5702eyBV4FcarO7x9Tvuyup1UUOWQdGeIH/EloqFgrpXBkp1SddbmPvEZPVQbL+C++/X6ay5VtxAAAAAElFTkSuQmCC";
// -- 30x30
var IMGmiddleSupplyTroop = 'data:image/jpeg;base64,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dmVjdG9yRGF0YWJvb2wBAAAAAFBnUHNlbnVtAAAAAFBnUHMAAAAAUGdQQwAAAABMZWZ0VW50RiNSbHQAAAAAAAAAAAAAAABUb3AgVW50RiNSbHQAAAAAAAAAAAAAAABTY2wgVW50RiNQcmNAWQAAAAAAADhCSU0D7QAAAAAAEAEsAAAAAQABASwAAAABAAE4QklNBCYAAAAAAA4AAAAAAAAAAAAAP4AAADhCSU0EDQAAAAAABAAAAHg4QklNBBkAAAAAAAQAAAAeOEJJTQPzAAAAAAAJAAAAAAAAAAABADhCSU0nEAAAAAAACgABAAAAAAAAAAI4QklNA/UAAAAAAEgAL2ZmAAEAbGZmAAYAAAAAAAEAL2ZmAAEAoZmaAAYAAAAAAAEAMgAAAAEAWgAAAAYAAAAAAAEANQAAAAEALQAAAAYAAAAAAAE4QklNA/gAAAAAAHAAAP////////////////////////////8D6AAAAAD/////////////////////////////A+gAAAAA/////////////////////////////wPoAAAAAP////////////////////////////8D6AAAOEJJTQQAAAAAAAACAAc4QklNBAIAAAAAABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOEJJTQQwAAAAAAAOAQEBAQEBAQEBAQEBAQE4QklNBC0AAAAAAAYAAQAAAB44QklNBAgAAAAAABAAAAABAAACQAAAAkAAAAAAOEJJTQQeAAAAAAAEAAAAADhCSU0EGgAAAAADWQAAAAYAAAAAAAAAAAAAAB4AAAAeAAAAEgB0AHIAbwBvAHAAXwB0AHkAcABlAHMAXwBuAGUAdwBfADUAMAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAHgAAAB4AAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAQAAAAAAAG51bGwAAAACAAAABmJvdW5kc09iamMAAAABAAAAAAAAUmN0MQAAAAQAAAAAVG9wIGxvbmcAAAAAAAAAAExlZnRsb25nAAAAAAAAAABCdG9tbG9uZwAAAB4AAAAAUmdodGxvbmcAAAAeAAAABnNsaWNlc1ZsTHMAAAABT2JqYwAAAAEAAAAAAAVzbGljZQAAABIA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IHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjAtYzA2MCA2MS4xMzQ3NzcsIDIwMTAvMDIvMTItMTc6MzI6MDAgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IFdpbmRvd3MiIHhtcDpDcmVhdGVEYXRlPSIyMDExLTA5LTIzVDExOjIwOjI0LTA3OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDExLTA5LTIzVDExOjI3OjMzLTA3OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAxMS0wOS0yM1QxMToyNzozMy0wNzowMCIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiBkYzpmb3JtYXQ9ImltYWdlL2pwZWciIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MjU5NzI5QjQxMUU2RTAxMTgzQUJFN0FDQTA2RDcwN0EiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6REFBMThGMTMwREU2RTAxMTgzQUJFN0FDQTA2RDcwN0EiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpEQUExOEYxMzBERTZFMDExODNBQkU3QUNBMDZENzA3QSI+IDxwaG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+IDxyZGY6QmFnPiA8cmRmOmxpPnV1aWQ6NDJFN0EwQzFCRjBGREYxMUEyN0VENjFBRkQ1MDgxNkM8L3JkZjpsaT4gPHJkZjpsaT51dWlkOjUxNDA0MDRDMTkyOEUwMTE4QkU3RDJDMkU2RjJBNDgzPC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDowODA1NEVGM0Y5ODdFMDExQjk3NEFGRDA2NDZBNzkyMzwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6MDg1M0YxN0I5MUFERTAxMUExMTRDQkM0NTJGRjRBNDI8L3JkZjpsaT4gPHJkZjpsaT54bXAuZGlkOjA5QTdEODNEMTJCM0UwMTE5MzkxQTY2QzYyODg1ODdGPC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDoxOUZDODEwMUZEQTdFMDExODZFMjk1MUE1MDNFMURGRTwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6MjhCRjk1NzdGREFCRTAxMTk0M0ZDRTY1MTg2MjBFMTk8L3JkZjpsaT4gPHJkZjpsaT54bXAuZGlkOjJCQkY5NTc3RkRBQkUwMTE5NDNGQ0U2NTE4NjIwRTE5PC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDoyRkJGOTU3N0ZEQUJFMDExOTQzRkNFNjUxODYyMEUxOTwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6MzhCQTg0MDIzRUIzRTAxMUEzRDVBMzc5MTc0QjE5RDQ8L3JkZjpsaT4gPHJkZjpsaT54bXAuZGlkOjRFNDcwMDk3QzdCM0UwMTE5MzkxQTY2QzYyODg1ODdGPC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDo2OTJCREQwRDAzRTZFMDExODNBQkU3QUNBMDZENzA3QTwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6REQ3REE4MjQ2QUFFRTAxMUExMTRDQkM0NTJGRjRBNDI8L3JkZjpsaT4gPHJkZjpsaT54bXAuZGlkOkVDQjI3RjJEMjNBOEUwMTE5NERFRUMxNDY4NzZCRkEyPC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDpGOUU2QkU5NkE3MjhFMDExOTBBOENFM0EyNDM5QkNEMjwvcmRmOmxpPiA8L3JkZjpCYWc+IDwvcGhvdG9zaG9wOkRvY3VtZW50QW5jZXN0b3JzPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOkRBQTE4RjEzMERFNkUwMTE4M0FCRTdBQ0EwNkQ3MDdBIiBzdEV2dDp3aGVuPSIyMDExLTA5LTIzVDExOjIwOjI0LTA3OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ1M1IFdpbmRvd3MiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOkM4MDRDQjE3MTFFNkUwMTE4M0FCRTdBQ0EwNkQ3MDdBIiBzdEV2dDp3aGVuPSIyMDExLTA5LTIzVDExOjIzOjEwLTA3OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ1M1IFdpbmRvd3MiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjI0OTcyOUI0MTFFNkUwMTE4M0FCRTdBQ0EwNkQ3MDdBIiBzdEV2dDp3aGVuPSIyMDExLTA5LTIzVDExOjI3OjMzLTA3OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ1M1IFdpbmRvd3MiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNvbnZlcnRlZCIgc3RFdnQ6cGFyYW1ldGVycz0iZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL2pwZWciLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImRlcml2ZWQiIHN0RXZ0OnBhcmFtZXRlcnM9ImNvbnZlcnRlZCBmcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvanBlZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MjU5NzI5QjQxMUU2RTAxMTgzQUJFN0FDQTA2RDcwN0EiIHN0RXZ0OndoZW49IjIwMTEtMDktMjNUMTE6Mjc6MzMtMDc6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDUzUgV2luZG93cyIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MjQ5NzI5QjQxMUU2RTAxMTgzQUJFN0FDQTA2RDcwN0EiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6REFBMThGMTMwREU2RTAxMTgzQUJFN0FDQTA2RDcwN0EiIHN0UmVmOm9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpEQUExOEYxMzBERTZFMDExODNBQkU3QUNBMDZENzA3QSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8P3hwYWNrZXQgZW5kPSJ3Ij8+/+IMWElDQ19QUk9GSUxFAAEBAAAMSExpbm8CEAAAbW50clJHQiBYWVogB84AAgAJAAYAMQAAYWNzcE1TRlQAAAAASUVDIHNSR0IAAAAAAAAAAAAAAAEAAPbWAAEAAAAA0y1IUCAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA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%3D';
var IMGmiddleMilitiaman = 'data:image/jpeg;base64,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AExlZnRVbnRGI1JsdAAAAAAAAAAAAAAAAFRvcCBVbnRGI1JsdAAAAAAAAAAAAAAAAFNjbCBVbnRGI1ByY0BZAAAAAAAAOEJJTQPtAAAAAAAQASwAAAABAAEBLAAAAAEAAThCSU0EJgAAAAAADgAAAAAAAAAAAAA/gAAAOEJJTQQNAAAAAAAEAAAAeDhCSU0EGQAAAAAABAAAAB44QklNA/MAAAAAAAkAAAAAAAAAAAEAOEJJTScQAAAAAAAKAAEAAAAAAAAAAjhCSU0D9QAAAAAASAAvZmYAAQBsZmYABgAAAAAAAQAvZmYAAQChmZoABgAAAAAAAQAyAAAAAQBaAAAABgAAAAAAAQA1AAAAAQAtAAAABgAAAAAAAThCSU0D+AAAAAAAcAAA/////////////////////////////wPoAAAAAP////////////////////////////8D6AAAAAD/////////////////////////////A+gAAAAA/////////////////////////////wPoAAA4QklNBAAAAAAAAAIABzhCSU0EAgAAAAAAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4QklNBDAAAAAAAA4BAQEBAQEBAQEBAQEBAThCSU0ELQAAAAAABgABAAAAHjhCSU0ECAAAAAAAEAAAAAEAAAJAAAACQAAAAAA4QklNBB4AAAAAAAQAAAAAOEJJTQQaAAAAAANZAAAABgAAAAAAAAAAAAAAHgAAAB4AAAASAHQAcgBvAG8AcABfAHQAeQBwAGUAcwBfAG4AZQB3AF8ANQAwAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAeAAAAHgAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABAAAAABAAAAAAAAbnVsbAAAAAIAAAAGYm91bmRzT2JqYwAAAAEAAAAAAABSY3QxAAAABAAAAABUb3AgbG9uZwAAAAAAAAAATGVmdGxvbmcAAAAAAAAAAEJ0b21sb25nAAAAHgAAAABSZ2h0bG9uZwAAAB4AAAAGc2xpY2VzVmxMcwAAAAFPYmpjAAAAAQAAAAAABXNsaWNlAAAAEgAAAAdzbGljZUlEbG9uZwAAAAAAAAAHZ3JvdXBJRGxvbmcAAAAAAAAABm9yaWdp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ICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXA6Q3JlYXRlRGF0ZT0iMjAxMS0wOS0yM1QxMToyMDoyNC0wNzowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAxMS0wOS0yM1QxMToyNzoyMy0wNzowMCIgeG1wOk1vZGlmeURhdGU9IjIwMTEtMDktMjNUMTE6Mjc6MjMtMDc6MDAiIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgZGM6Zm9ybWF0PSJpbWFnZS9qcGVnIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOkEyRTk4MTc0MTFFNkUwMTE4M0FCRTdBQ0EwNkQ3MDdBIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkRBQTE4RjEzMERFNkUwMTE4M0FCRTdBQ0EwNkQ3MDdBIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6REFBMThGMTMwREU2RTAxMTgzQUJFN0FDQTA2RDcwN0EiPiA8cGhvdG9zaG9wOkRvY3VtZW50QW5jZXN0b3JzPiA8cmRmOkJhZz4gPHJkZjpsaT51dWlkOjQyRTdBMEMxQkYwRkRGMTFBMjdFRDYxQUZENTA4MTZDPC9yZGY6bGk+IDxyZGY6bGk+dXVpZDo1MTQwNDA0QzE5MjhFMDExOEJFN0QyQzJFNkYyQTQ4MzwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6MDgwNTRFRjNGOTg3RTAxMUI5NzRBRkQwNjQ2QTc5MjM8L3JkZjpsaT4gPHJkZjpsaT54bXAuZGlkOjA4NTNGMTdCOTFBREUwMTFBMTE0Q0JDNDUyRkY0QTQyPC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDowOUE3RDgzRDEyQjNFMDExOTM5MUE2NkM2Mjg4NTg3RjwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6MTlGQzgxMDFGREE3RTAxMTg2RTI5NTFBNTAzRTFERkU8L3JkZjpsaT4gPHJkZjpsaT54bXAuZGlkOjI4QkY5NTc3RkRBQkUwMTE5NDNGQ0U2NTE4NjIwRTE5PC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDoyQkJGOTU3N0ZEQUJFMDExOTQzRkNFNjUxODYyMEUxOTwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6MkZCRjk1NzdGREFCRTAxMTk0M0ZDRTY1MTg2MjBFMTk8L3JkZjpsaT4gPHJkZjpsaT54bXAuZGlkOjM4QkE4NDAyM0VCM0UwMTFBM0Q1QTM3OTE3NEIxOUQ0PC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDo0RTQ3MDA5N0M3QjNFMDExOTM5MUE2NkM2Mjg4NTg3RjwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6NjkyQkREMEQwM0U2RTAxMTgzQUJFN0FDQTA2RDcwN0E8L3JkZjpsaT4gPHJkZjpsaT54bXAuZGlkOkREN0RBODI0NkFBRUUwMTFBMTE0Q0JDNDUyRkY0QTQyPC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDpFQ0IyN0YyRDIzQThFMDExOTRERUVDMTQ2ODc2QkZBMjwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6RjlFNkJFOTZBNzI4RTAxMTkwQThDRTNBMjQzOUJDRDI8L3JkZjpsaT4gPC9yZGY6QmFnPiA8L3Bob3Rvc2hvcDpEb2N1bWVudEFuY2VzdG9ycz4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpEQUExOEYxMzBERTZFMDExODNBQkU3QUNBMDZENzA3QSIgc3RFdnQ6d2hlbj0iMjAxMS0wOS0yM1QxMToyMDoyNC0wNzowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpDODA0Q0IxNzExRTZFMDExODNBQkU3QUNBMDZENzA3QSIgc3RFdnQ6d2hlbj0iMjAxMS0wOS0yM1QxMToyMzoxMC0wNzowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpBMUU5ODE3NDExRTZFMDExODNBQkU3QUNBMDZENzA3QSIgc3RFdnQ6d2hlbj0iMjAxMS0wOS0yM1QxMToyNzoyMy0wNzowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjb252ZXJ0ZWQiIHN0RXZ0OnBhcmFtZXRlcnM9ImZyb20gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCB0byBpbWFnZS9qcGVnIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJkZXJpdmVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJjb252ZXJ0ZWQgZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL2pwZWciLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOkEyRTk4MTc0MTFFNkUwMTE4M0FCRTdBQ0EwNkQ3MDdBIiBzdEV2dDp3aGVuPSIyMDExLTA5LTIzVDExOjI3OjIzLTA3OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ1M1IFdpbmRvd3MiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkExRTk4MTc0MTFFNkUwMTE4M0FCRTdBQ0EwNkQ3MDdBIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkRBQTE4RjEzMERFNkUwMTE4M0FCRTdBQ0EwNkQ3MDdBIiBzdFJlZjpvcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6REFBMThGMTMwREU2RTAxMTgzQUJFN0FDQTA2RDcwN0EiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPD94cGFja2V0IGVuZD0idyI/Pv/iDFhJQ0NfUFJPRklMRQABAQAADEhMaW5vAhAAAG1udHJSR0IgWFlaIAfOAAIACQAGADEAAGFjc3BNU0ZUAAAAAElFQyBzUkdCAAAAAAAAAAAAAAABAAD21gABAAAAANMtSFAgIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEWNwcnQAAAFQAAAAM2Rlc2MAAAGEAAAAbHd0cHQAAAHwAAAAFGJrcHQAAAIEAAAAFHJYWVoAAAIYAAAAFGdYWVoAAAIsAAAAFGJYWVoAAAJAAAAAFGRtbmQAAAJUAAAAcGRtZGQAAALEAAAAiHZ1ZWQAAANMAAAAhnZpZXcAAAPUAAAAJGx1bWkAAAP4AAAAFG1lYXMAAAQMAAAAJHRlY2gAAAQwAAAADHJUUkMAAAQ8AAAIDGdUUkMAAAQ8AAAIDGJUUkMAAAQ8AAAIDHRleHQAAAAAQ29weXJpZ2h0IChjKSAxOTk4IEhld2xldHQtUGFja2FyZCBDb21wYW55AABkZXNjAAAAAAAAABJzUkdCIElFQzYxOTY2LTIuMQAAAAAAAAAAAAAAEnNSR0IgSUVDNjE5NjYtMi4xAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABYWVogAAAAAAAA81EAAQAAAAEWzFhZWiAAAAAAAAAAAAAAAAAAAAAAWFlaIAAAAAAAAG+iAAA49QAAA5BYWVogAAAAAAAAYpkAALeFAAAY2lhZWiAAAAAAAAAkoAAAD4QAALbPZGVzYwAAAAAAAAAWSUVDIGh0dHA6Ly93d3cuaWVjLmNoAAAAAAAAAAAAAAAWSUVDIGh0dHA6Ly93d3cuaWVjLmNoAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAGRlc2MAAAAAAAAALklFQyA2MTk2Ni0yLjEgRGVmYXVsdCBSR0IgY29sb3VyIHNwYWNlIC0gc1JHQgAAAAAAAAAAAAAALklFQyA2MTk2Ni0yLjEgRGVmYXVsdCBSR0IgY29sb3VyIHNwYWNlIC0gc1JHQgAAAAAAAAAAAAAAAAAAAAAAAAAAAABkZXNjAAAAAAAAACxSZWZlcmVuY2UgVmlld2luZyBDb25kaXRpb24gaW4gSUVDNjE5NjYtMi4xAAAAAAAAAAAAAAAsUmVmZXJlbmNlIFZpZXdpbmcgQ29uZGl0aW9uIGluIElFQzYxOTY2LTIuMQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAdmlldwAAAAAAE6T+ABRfLgAQzxQAA+3MAAQTCwADXJ4AAAABWFlaIAAAAAAATAlWAFAAAABXH+dtZWFzAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAACjwAAAAJzaWcgAAAAAENSVCBjdXJ2AAAAAAAABAAAAAAFAAoADwAUABkAHgAjACgALQAyADcAOwBAAEUASgBPAFQAWQBeAGMAaABtAHIAdwB8AIEAhgCLAJAAlQCaAJ8ApACpAK4AsgC3ALwAwQDGAMsA0ADVANsA4ADlAOsA8AD2APsBAQEHAQ0BEwEZAR8BJQErATIBOAE+AUUBTAFSAVkBYAFnAW4BdQF8AYMBiwGSAZoBoQGpAbEBuQHBAckB0QHZAeEB6QHyAfoCAwIMAhQCHQImAi8COAJBAksCVAJdAmcCcQJ6AoQCjgKYAqICrAK2AsECywLVAuAC6wL1AwADCwMWAyEDLQM4A0MDTwNaA2YDcgN+A4oDlgOiA64DugPHA9MD4APsA/kEBgQTBCAELQQ7BEgEVQRjBHEEfgSMBJoEqAS2BMQE0wThBPAE/gUNBRwFKwU6BUkFWAVnBXcFhgWWBaYFtQXFBdUF5QX2BgYGFgYnBjcGSAZZBmoGewaMBp0GrwbABtEG4wb1BwcHGQcrBz0HTwdhB3QHhgeZB6wHvwfSB+UH+AgLCB8IMghGCFoIbgiCCJYIqgi+CNII5wj7CRAJJQk6CU8JZAl5CY8JpAm6Cc8J5Qn7ChEKJwo9ClQKagqBCpgKrgrFCtwK8wsLCyILOQtRC2kLgAuYC7ALyAvhC/kMEgwqDEMMXAx1DI4MpwzADNkM8w0NDSYNQA1aDXQNjg2pDcMN3g34DhMOLg5JDmQOfw6bDrYO0g7uDwkPJQ9BD14Peg+WD7MPzw/sEAkQJhBDEGEQfhCbELkQ1xD1ERMRMRFPEW0RjBGqEckR6BIHEiYSRRJkEoQSoxLDEuMTAxMjE0MTYxODE6QTxRPlFAYUJxRJFGoUixStFM4U8BUSFTQVVhV4FZsVvRXgFgMWJhZJFmwWjxayFtYW+hcdF0EXZReJF64X0hf3GBsYQBhlGIoYrxjVGPoZIBlFGWsZkRm3Gd0aBBoqGlEadxqeGsUa7BsUGzsbYxuKG7Ib2hwCHCocUhx7HKMczBz1HR4dRx1wHZkdwx3sHhYeQB5qHpQevh7pHxMfPh9pH5Qfvx/qIBUgQSBsIJggxCDwIRwhSCF1IaEhziH7IiciVSKCIq8i3SMKIzgjZiOUI8Ij8CQfJE0kfCSrJNolCSU4JWgllyXHJfcmJyZXJocmtyboJxgnSSd6J6sn3CgNKD8ocSiiKNQpBik4KWspnSnQKgIqNSpoKpsqzysCKzYraSudK9EsBSw5LG4soizXLQwtQS12Last4S4WLkwugi63Lu4vJC9aL5Evxy/+MDUwbDCkMNsxEjFKMYIxujHyMioyYzKbMtQzDTNGM38zuDPxNCs0ZTSeNNg1EzVNNYc1wjX9Njc2cjauNuk3JDdgN5w31zgUOFA4jDjIOQU5Qjl/Obw5+To2OnQ6sjrvOy07azuqO+g8JzxlPKQ84z0iPWE9oT3gPiA+YD6gPuA/IT9hP6I/4kAjQGRApkDnQSlBakGsQe5CMEJyQrVC90M6Q31DwEQDREdEikTORRJFVUWaRd5GIkZnRqtG8Ec1R3tHwEgFSEtIkUjXSR1JY0mpSfBKN0p9SsRLDEtTS5pL4kwqTHJMuk0CTUpNk03cTiVObk63TwBPSU+TT91QJ1BxULtRBlFQUZtR5lIxUnxSx1MTU19TqlP2VEJUj1TbVShVdVXCVg9WXFapVvdXRFeSV+BYL1h9WMtZGllpWbhaB1pWWqZa9VtFW5Vb5Vw1XIZc1l0nXXhdyV4aXmxevV8PX2Ffs2AFYFdgqmD8YU9homH1YklinGLwY0Njl2PrZEBklGTpZT1lkmXnZj1mkmboZz1nk2fpaD9olmjsaUNpmmnxakhqn2r3a09rp2v/bFdsr20IbWBtuW4SbmtuxG8eb3hv0XArcIZw4HE6cZVx8HJLcqZzAXNdc7h0FHRwdMx1KHWFdeF2Pnabdvh3VnezeBF4bnjMeSp5iXnnekZ6pXsEe2N7wnwhfIF84X1BfaF+AX5ifsJ/I3+Ef+WAR4CogQqBa4HNgjCCkoL0g1eDuoQdhICE44VHhauGDoZyhteHO4efiASIaYjOiTOJmYn+imSKyoswi5aL/IxjjMqNMY2Yjf+OZo7OjzaPnpAGkG6Q1pE/kaiSEZJ6kuOTTZO2lCCUipT0lV+VyZY0lp+XCpd1l+CYTJi4mSSZkJn8mmia1ZtCm6+cHJyJnPedZJ3SnkCerp8dn4uf+qBpoNihR6G2oiailqMGo3aj5qRWpMelOKWpphqmi6b9p26n4KhSqMSpN6mpqhyqj6sCq3Wr6axcrNCtRK24ri2uoa8Wr4uwALB1sOqxYLHWskuywrM4s660JbSctRO1irYBtnm28Ldot+C4WbjRuUq5wro7urW7LrunvCG8m70VvY++Cr6Evv+/er/1wHDA7MFnwePCX8Lbw1jD1MRRxM7FS8XIxkbGw8dBx7/IPci8yTrJuco4yrfLNsu2zDXMtc01zbXONs62zzfPuNA50LrRPNG+0j/SwdNE08bUSdTL1U7V0dZV1tjXXNfg2GTY6Nls2fHadtr724DcBdyK3RDdlt4c3qLfKd+v4DbgveFE4cziU+Lb42Pj6+Rz5PzlhOYN5pbnH+ep6DLovOlG6dDqW+rl63Dr++yG7RHtnO4o7rTvQO/M8Fjw5fFy8f/yjPMZ86f0NPTC9VD13vZt9vv3ivgZ+Kj5OPnH+lf65/t3/Af8mP0p/br+S/7c/23////uAA5BZG9iZQBkQAAAAAH/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQECAgICAgICAgICAgMDAwMDAwMDAwMBAQEBAQEBAQEBAQICAQICAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDA//AABEIAB4AHgMBEQACEQEDEQH/3QAEAAT/xAGiAAAABgIDAQAAAAAAAAAAAAAHCAYFBAkDCgIBAAsBAAAGAwEBAQAAAAAAAAAAAAYFBAMHAggBCQAKCxAAAgEDBAEDAwIDAwMCBgl1AQIDBBEFEgYhBxMiAAgxFEEyIxUJUUIWYSQzF1JxgRhikSVDobHwJjRyChnB0TUn4VM2gvGSokRUc0VGN0djKFVWVxqywtLi8mSDdJOEZaOzw9PjKThm83UqOTpISUpYWVpnaGlqdnd4eXqFhoeIiYqUlZaXmJmapKWmp6ipqrS1tre4ubrExcbHyMnK1NXW19jZ2uTl5ufo6er09fb3+Pn6EQACAQMCBAQDBQQEBAYGBW0BAgMRBCESBTEGACITQVEHMmEUcQhCgSORFVKhYhYzCbEkwdFDcvAX4YI0JZJTGGNE8aKyJjUZVDZFZCcKc4OTRnTC0uLyVWV1VjeEhaOzw9Pj8ykalKS0xNTk9JWltcXV5fUoR1dmOHaGlqa2xtbm9md3h5ent8fX5/dIWGh4iJiouMjY6Pg5SVlpeYmZqbnJ2en5KjpKWmp6ipqqusra6vr/2gAMAwEAAhEDEQA/AN2nBV0YkChmRfyL2Fl+t+Tfj6fX24z1Neq0pivWrz/OV+cHZvXnzvwHTOC+Se/OlevNj/Fqn7IxmK63z9ZtavzPc+d3Fvf+F/3nyiY2socnQvtzbMCU9DUQ5KJ3YqtJJJPYRjz1d7rFebOthusttbLIpcR0q5JaiNgkqaDAofmB1J3t3tuz38e8DdrOOWTw2CFyaLhcrQ011JoSD6AE162AulM/ld+dHdNbu3Ll8buTcG6uqOvdx53P4yKGDHZvM5raOIyeTyuPhpgIIqTIVtTJLGqWQI4AAAA9yDbM0ttbyMasyKT9pAr1HNyix3NxGnwK7AfYCQP5dLr+FUoYH7Ji5N9VjpHGr6aL/j27pHp0z5df/9DZ5+VXyai+Mnxr7r76khgrpur+utxboxGMqpJFpszuSCjan2thJniYSiPNbkqaSk/b9f73p5t7RzTiGKaZj2opb9gr/Pp+1t3u7q1tIhWSWRUH+2YCv5Vr9g60auwvkVuv5Gdbdmdx9x9h1+/u2BvLam4JqbMwYloMdlsJVy5TadXtZ5qOaHD7b2Vlqwxw40xrSSwO8ZDiR2aAbvf+YH5vsjcgNaSKxU0qEA/AF+YHzPmc9Zabdyjytb8j7itidN5G6CQGlZf+GFuIZScEU9B20ptt/wAkr5f9hfL74QbY3p2xSYaLevX+89xdQV+U27g8ZtzCbhodmUmGlwmWo8HhFhwuJkXD5aCnlho4KalDwFookVgonrb52uLZHIpj7MUHl5enWLW9WaWO4TQRmq8eNfMg588ivVyq10f2sik86FsbcfqH0P8AW3tdUdFPX//RP3/P27Ay22PhNtvaeJp4pafszunaW2s0JvKwbG7f25vDsSmpo0inifzVWd2bRLdlkj8Ye4DFT7CnMszRbPNpJAd0QmoFATU/bwp9h6GPIVvHccz2uoAmKKSRQRWrABVHy+OoPqB1ph7mpB0Z2H2v1Lu/IYav3lUf3Hr5aunq2rcmKPM7Nwe5Y0x9PR1NalRTzU+dSMLIrKzINYUhR7DG67JdSz7YttC5iij4ADSSwBqTxFD51B9OPUkbDzVYLZbu93NGs88xyzHWoQldNOBqBioIPn5dWd/ykv50WW/l4VI6K7T2ZFvn4u9g7tqd3T5balLF/pG663HlMbjcXnM1hS00FHvXAzDEUslZjZzDWQIGkppmI+1kEsF/LZKA6ViUDUpwR9nz+RwacRx6AO57XDuUzzQS0maug1qjCvqP8I/MefW8VR/NL4wZH47Zb5YUHcm16z4/YGjhnzm/KQ5SeDEy1GSx+Fp8Vk8FFj33NRbhmzGUpqVMbJRLXNUVEaCLU6gnS7haNbPeLJWBRU4NR8itK1yMU/lnoHmxuhdLZmKlwTQCoofzrpp860+fX//SNx/P4yW5E6M6IxB23JNtCXvDH5B93x5XGr9tuqLr/sWjoNv1GDlZMoyVOCqq6sWqUSUtqZ4pPHKYBKB+canY5gcR6lNfmDgeuc0PyyepC9swg5ohYGs3hOAPOh01b0wQoIrUhsA0NNPycZCm3HumPcLY7JdgtunK/wAaqMulBT7ijDUmP8wmTINFk/s4sSYDFoVkMQOm49h2/wDrnu0ZhOh8JMJrI4Y+Co+2vyr1IO1futNuKx/TOvjSUL6Aaasnvo1KZFPnTpHbeyWAx+3N1/x7buNz2Smiw9H1ytdV4ikpKbdE+ZeKhy/3WRyuPaMY+jTzTQpT1K1ETsk6xIHb2YyAl7ch6MFJYZyvpwp8XAkinlXokmaEWd6k0dULjQykYbzpQ6q6cmikUOaHq03467Q2LR/ysv5hG+v9LHaWX79zQ6Exb9H7Z253NS9bbNxWM+SnViUe5+zt6U+1qfpLMdn7ny01U2FparIz11HR07GnT7ueojh9BHCLe+ZbljfF1qAHx3rQtilKcATSnnTolu5WN7tSNaxjbRG+li0dSPDaoXOoAeZpUn+lx//Z';
var IMGmiddleScout = 'data:image/jpeg;base64,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Z1BzAAAAAFBnUEMAAAAATGVmdFVudEYjUmx0AAAAAAAAAAAAAAAAVG9wIFVudEYjUmx0AAAAAAAAAAAAAAAAU2NsIFVudEYjUHJjQFkAAAAAAAA4QklNA+0AAAAAABABLAAAAAEAAQEsAAAAAQABOEJJTQQmAAAAAAAOAAAAAAAAAAAAAD+AAAA4QklNBA0AAAAAAAQAAAB4OEJJTQQZAAAAAAAEAAAAHjhCSU0D8wAAAAAACQAAAAAAAAAAAQA4QklNJxAAAAAAAAoAAQAAAAAAAAACOEJJTQP1AAAAAABIAC9mZgABAGxmZgAGAAAAAAABAC9mZgABAKGZmgAGAAAAAAABADIAAAABAFoAAAAGAAAAAAABADUAAAABAC0AAAAGAAAAAAABOEJJTQP4AAAAAABwAAD/////////////////////////////A+gAAAAA/////////////////////////////wPoAAAAAP////////////////////////////8D6AAAAAD/////////////////////////////A+gAADhCSU0EAAAAAAAAAgAHOEJJTQQCAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADhCSU0EMAAAAAAADgEBAQEBAQEBAQEBAQEBOEJJTQQtAAAAAAAGAAEAAAAeOEJJTQQIAAAAAAAQAAAAAQAAAkAAAAJAAAAAADhCSU0EHgAAAAAABAAAAAA4QklNBBoAAAAAA1kAAAAGAAAAAAAAAAAAAAAeAAAAHgAAABIAdAByAG8AbwBwAF8AdAB5AHAAZQBzAF8AbgBlAHcAXwA1ADAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAB4AAAAeAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAEAAAAAAABudWxsAAAAAgAAAAZib3VuZHNPYmpjAAAAAQAAAAAAAFJjdDEAAAAEAAAAAFRvcCBsb25nAAAAAAAAAABMZWZ0bG9uZwAAAAAAAAAAQnRvbWxvbmcAAAAeAAAAAFJnaHRsb25nAAAAHgAAAAZzbGljZXNWbExzAAAAAU9iamMAAAABAAAAAAAFc2xpY2UAAAASAAAAB3NsaWNlSURsb25nAAAAAAAAAAdncm91cElEbG9u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NDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzUgV2luZG93cyIgeG1wOkNyZWF0ZURhdGU9IjIwMTEtMDktMjNUMTE6MjA6MjQtMDc6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMTEtMDktMjNUMTE6Mjc6MTAtMDc6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDExLTA5LTIzVDExOjI3OjEwLTA3OjAwIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiIGRjOmZvcm1hdD0iaW1hZ2UvanBlZyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpBMEU5ODE3NDExRTZFMDExODNBQkU3QUNBMDZENzA3QSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpEQUExOEYxMzBERTZFMDExODNBQkU3QUNBMDZENzA3QSIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOkRBQTE4RjEzMERFNkUwMTE4M0FCRTdBQ0EwNkQ3MDdBIj4gPHBob3Rvc2hvcDpEb2N1bWVudEFuY2VzdG9ycz4gPHJkZjpCYWc+IDxyZGY6bGk+dXVpZDo0MkU3QTBDMUJGMEZERjExQTI3RUQ2MUFGRDUwODE2QzwvcmRmOmxpPiA8cmRmOmxpPnV1aWQ6NTE0MDQwNEMxOTI4RTAxMThCRTdEMkMyRTZGMkE0ODM8L3JkZjpsaT4gPHJkZjpsaT54bXAuZGlkOjA4MDU0RUYzRjk4N0UwMTFCOTc0QUZEMDY0NkE3OTIzPC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDowODUzRjE3QjkxQURFMDExQTExNENCQzQ1MkZGNEE0MjwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6MDlBN0Q4M0QxMkIzRTAxMTkzOTFBNjZDNjI4ODU4N0Y8L3JkZjpsaT4gPHJkZjpsaT54bXAuZGlkOjE5RkM4MTAxRkRBN0UwMTE4NkUyOTUxQTUwM0UxREZFPC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDoyOEJGOTU3N0ZEQUJFMDExOTQzRkNFNjUxODYyMEUxOTwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6MkJCRjk1NzdGREFCRTAxMTk0M0ZDRTY1MTg2MjBFMTk8L3JkZjpsaT4gPHJkZjpsaT54bXAuZGlkOjJGQkY5NTc3RkRBQkUwMTE5NDNGQ0U2NTE4NjIwRTE5PC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDozOEJBODQwMjNFQjNFMDExQTNENUEzNzkxNzRCMTlENDwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6NEU0NzAwOTdDN0IzRTAxMTkzOTFBNjZDNjI4ODU4N0Y8L3JkZjpsaT4gPHJkZjpsaT54bXAuZGlkOjY5MkJERDBEMDNFNkUwMTE4M0FCRTdBQ0EwNkQ3MDdBPC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDpERDdEQTgyNDZBQUVFMDExQTExNENCQzQ1MkZGNEE0MjwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6RUNCMjdGMkQyM0E4RTAxMTk0REVFQzE0Njg3NkJGQTI8L3JkZjpsaT4gPHJkZjpsaT54bXAuZGlkOkY5RTZCRTk2QTcyOEUwMTE5MEE4Q0UzQTI0MzlCQ0QyPC9yZGY6bGk+IDwvcmRmOkJhZz4gPC9waG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6REFBMThGMTMwREU2RTAxMTgzQUJFN0FDQTA2RDcwN0EiIHN0RXZ0OndoZW49IjIwMTEtMDktMjNUMTE6MjA6MjQtMDc6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDUzUgV2luZG93cyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6QzgwNENCMTcxMUU2RTAxMTgzQUJFN0FDQTA2RDcwN0EiIHN0RXZ0OndoZW49IjIwMTEtMDktMjNUMTE6MjM6MTAtMDc6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDUzUgV2luZG93cyIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6OUZFOTgxNzQxMUU2RTAxMTgzQUJFN0FDQTA2RDcwN0EiIHN0RXZ0OndoZW49IjIwMTEtMDktMjNUMTE6Mjc6MTAtMDc6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDUzUgV2luZG93cyIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY29udmVydGVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJmcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvanBlZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iZGVyaXZlZCIgc3RFdnQ6cGFyYW1ldGVycz0iY29udmVydGVkIGZyb20gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCB0byBpbWFnZS9qcGVnIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpBMEU5ODE3NDExRTZFMDExODNBQkU3QUNBMDZENzA3QSIgc3RFdnQ6d2hlbj0iMjAxMS0wOS0yM1QxMToyNzoxMC0wNzowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5RkU5ODE3NDExRTZFMDExODNBQkU3QUNBMDZENzA3QSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpEQUExOEYxMzBERTZFMDExODNBQkU3QUNBMDZENzA3QSIgc3RSZWY6b3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOkRBQTE4RjEzMERFNkUwMTE4M0FCRTdBQ0EwNkQ3MDdBIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw/eHBhY2tldCBlbmQ9InciPz7/4gxYSUNDX1BST0ZJTEUAAQEAAAxITGlubwIQAABtbnRyUkdCIFhZWiAHzgACAAkABgAxAABhY3NwTVNGVAAAAABJRUMgc1JHQgAAAAAAAAAAAAAAAQAA9tYAAQAAAADTLUhQICAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABFjcHJ0AAABUAAAADNkZXNjAAABhAAAAGx3dHB0AAAB8AAAABRia3B0AAAC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%3D';
var IMGmiddlePikeman = 'data:image/jpeg;base64,/9j/4QSNRXhpZgAATU0AKgAAAAgABwESAAMAAAABAAEAAAEaAAUAAAABAAAAYgEbAAUAAAABAAAAagEoAAMAAAABAAIAAAExAAIAAAAcAAAAcgEyAAIAAAAUAAAAjodpAAQAAAABAAAApAAAANAALcbAAAAnEAAtxsAAACcQQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzADIwMTE6MDk6MjMgMTE6Mjc6NTcAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAHqADAAQAAAABAAAAHgAAAAAAAAAGAQMAAwAAAAEABgAAARoABQAAAAEAAAEeARsABQAAAAEAAAEmASgAAwAAAAEAAgAAAgEABAAAAAEAAAEuAgIABAAAAAEAAANXAAAAAAAAAEgAAAABAAAASAAAAAH/2P/tAAxBZG9iZV9DTQAB/+4ADkFkb2JlAGSAAAAAAf/bAIQADAgICAkIDAkJDBELCgsRFQ8MDA8VGBMTFRMTGBEMDAwMDAwRDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAENCwsNDg0QDg4QFA4ODhQUDg4ODhQRDAwMDAwREQwMDAwMDBEMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwM/8AAEQgAHgAeAwEiAAIRAQMRAf/dAAQAAv/EAT8AAAEFAQEBAQEBAAAAAAAAAAMAAQIEBQYHCAkKCwEAAQUBAQEBAQEAAAAAAAAAAQACAwQFBgcICQoLEAABBAEDAgQCBQcGCAUDDDMBAAIRAwQhEjEFQVFhEyJxgTIGFJGhsUIjJBVSwWIzNHKC0UMHJZJT8OHxY3M1FqKygyZEk1RkRcKjdDYX0lXiZfKzhMPTdePzRieUpIW0lcTU5PSltcXV5fVWZnaGlqa2xtbm9jdHV2d3h5ent8fX5/cRAAICAQIEBAMEBQYHBwYFNQEAAhEDITESBEFRYXEiEwUygZEUobFCI8FS0fAzJGLhcoKSQ1MVY3M08SUGFqKygwcmNcLSRJNUoxdkRVU2dGXi8rOEw9N14/NGlKSFtJXE1OT0pbXF1eX1VmZ2hpamtsbW5vYnN0dXZ3eHl6e3x//aAAwDAQACEQMRAD8A9JrdqpOeOFTNxa0uAJgTA5PwXCdI6l1yzrLrWVuuublWtfQ59bXGl/u22v3ub+gb/NfmezYlaQCdn0FwBWZQ5oZkP3k7ssNkkae+qn0x/JWkHeKymvA6U+z97N38f922/wBySH//0LP196x1Shn2DCY5mMavUzchkbgx7jU2r+Rv/wA9cPXmZNFlVmLa5l1cGl7BD9Po/wBZdx9ZHPDerOyG7qiwBrWxIArjGe/cdu12Qbne1VMxrbuidN9wx+pNqJr2hri6sB3tf6fqbaXuUciezYxSAiRQPi9Z0rrod0OnP6s5mNbsm/WBMbhtH/CM22bFWHUMY/VM9Qk/ZxZ6pPePtG5Y2RifVh1GFZ1HOe3FADqqG12ag7T6V9jWPf6Tfo1/zfs/PW0B03/mMQHV/Zvs2pj27v8AyXr/APTTtfwYjw9O/wBH/9n/7Qv4UGhvdG9zaG9wIDMuMAA4QklNBCUAAAAAABAAAAAAAAAAAAAAAAAAAAAAOEJJTQQ6AAAAAACdAAAAEAAAAAEAAAAAAAtwcmludE91dHB1dAAAAAQAAAAAUHN0U2Jvb2wBAAAAAEludGVlbnVtAAAAAEludGUAAAAAQ2xybQAAAA9wcmludFNpeHRlZW5CaXRib29sAAAAAAtwcmludGVyTmFtZVRFWFQAAAAUAFwAXABrAGEAYgBhAG0AZABjADEAXABQAGEAbgB0AGgAZQBvAG4AAAA4QklNBDsAAAAAAbIAAAAQAAAAAQAAAAAAEnByaW50T3V0cHV0T3B0aW9ucwAAABIAAAAAQ3B0bmJvb2wAAAAAAENsYnJib29sAAAAAABSZ3NNYm9vbAAAAAAAQ3JuQ2Jvb2wAAAAAAENudENib29sAAAAAABMYmxzYm9vbAAAAAAATmd0dmJvb2wAAAAAAEVtbERib29sAAAAAABJbnRyYm9vbAAAAAAAQmNrZ09iamMAAAABAAAAAAAAUkdCQwAAAAMAAAAAUmQgIGRvdWJAb+AAAAAAAAAAAABHcm4gZG91YkBv4AAAAAAAAAAAAEJsICBkb3ViQG/gAAAAAAAAAAAAQnJkVFVudEYjUmx0AAAAAAAAAAAAAAAAQmxkIFVudEYjUmx0AAAAAAAAAAAAAAAAUnNsdFVudEYjUHhsQHLAAAAAAAAAAAAKdmVjdG9yRGF0YWJvb2wBAAAAAFBnUHNlbnVtAAAAAFBnUHMAAAAAUGdQQwAAAABMZWZ0VW50RiNSbHQAAAAAAAAAAAAAAABUb3AgVW50RiNSbHQAAAAAAAAAAAAAAABTY2wgVW50RiNQcmNAWQAAAAAAADhCSU0D7QAAAAAAEAEsAAAAAQABASwAAAABAAE4QklNBCYAAAAAAA4AAAAAAAAAAAAAP4AAADhCSU0EDQAAAAAABAAAAHg4QklNBBkAAAAAAAQAAAAeOEJJTQPzAAAAAAAJAAAAAAAAAAABADhCSU0nEAAAAAAACgABAAAAAAAAAAI4QklNA/UAAAAAAEgAL2ZmAAEAbGZmAAYAAAAAAAEAL2ZmAAEAoZmaAAYAAAAAAAEAMgAAAAEAWgAAAAYAAAAAAAEANQAAAAEALQAAAAYAAAAAAAE4QklNA/gAAAAAAHAAAP////////////////////////////8D6AAAAAD/////////////////////////////A+gAAAAA/////////////////////////////wPoAAAAAP////////////////////////////8D6AAAOEJJTQQAAAAAAAACAAc4QklNBAIAAAAAABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOEJJTQQwAAAAAAAOAQEBAQEBAQEBAQEBAQE4QklNBC0AAAAAAAYAAQAAAB44QklNBAgAAAAAABAAAAABAAACQAAAAkAAAAAAOEJJTQQeAAAAAAAEAAAAADhCSU0EGgAAAAADWQAAAAYAAAAAAAAAAAAAAB4AAAAeAAAAEgB0AHIAbwBvAHAAXwB0AHkAcABlAHMAXwBuAGUAdwBfADUAMAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAHgAAAB4AAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAQAAAAAAAG51bGwAAAACAAAABmJvdW5kc09iamMAAAABAAAAAAAAUmN0MQAAAAQAAAAAVG9wIGxvbmcAAAAAAAAAAExlZnRsb25nAAAAAAAAAABCdG9tbG9uZwAAAB4AAAAAUmdodGxvbmcAAAAeAAAABnNsaWNlc1ZsTHMAAAABT2JqYwAAAAEAAAAAAAVzbGljZQAAABIAAAAHc2xpY2VJRGxvbmcAAAAAAAAAB2dyb3VwSURsb25nAAAAAAAAAAZvcmlnaW5lbnVtAAAADEVTbGljZU9yaWdpbgAAAA1hdXRvR2VuZXJhdGVk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ZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IFdpbmRvd3MiIHhtcDpDcmVhdGVEYXRlPSIyMDExLTA5LTIzVDExOjIwOjI0LTA3OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDExLTA5LTIzVDExOjI3OjU3LTA3OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAxMS0wOS0yM1QxMToyNzo1Ny0wNzowMCIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiBkYzpmb3JtYXQ9ImltYWdlL2pwZWciIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6Mjk5NzI5QjQxMUU2RTAxMTgzQUJFN0FDQTA2RDcwN0EiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6REFBMThGMTMwREU2RTAxMTgzQUJFN0FDQTA2RDcwN0EiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpEQUExOEYxMzBERTZFMDExODNBQkU3QUNBMDZENzA3QSI+IDxwaG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+IDxyZGY6QmFnPiA8cmRmOmxpPnV1aWQ6NDJFN0EwQzFCRjBGREYxMUEyN0VENjFBRkQ1MDgxNkM8L3JkZjpsaT4gPHJkZjpsaT51dWlkOjUxNDA0MDRDMTkyOEUwMTE4QkU3RDJDMkU2RjJBNDgzPC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDowODA1NEVGM0Y5ODdFMDExQjk3NEFGRDA2NDZBNzkyMzwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6MDg1M0YxN0I5MUFERTAxMUExMTRDQkM0NTJGRjRBNDI8L3JkZjpsaT4gPHJkZjpsaT54bXAuZGlkOjA5QTdEODNEMTJCM0UwMTE5MzkxQTY2QzYyODg1ODdGPC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDoxOUZDODEwMUZEQTdFMDExODZFMjk1MUE1MDNFMURGRTwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6MjhCRjk1NzdGREFCRTAxMTk0M0ZDRTY1MTg2MjBFMTk8L3JkZjpsaT4gPHJkZjpsaT54bXAuZGlkOjJCQkY5NTc3RkRBQkUwMTE5NDNGQ0U2NTE4NjIwRTE5PC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDoyRkJGOTU3N0ZEQUJFMDExOTQzRkNFNjUxODYyMEUxOTwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6MzhCQTg0MDIzRUIzRTAxMUEzRDVBMzc5MTc0QjE5RDQ8L3JkZjpsaT4gPHJkZjpsaT54bXAuZGlkOjRFNDcwMDk3QzdCM0UwMTE5MzkxQTY2QzYyODg1ODdGPC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDo2OTJCREQwRDAzRTZFMDExODNBQkU3QUNBMDZENzA3QTwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6REQ3REE4MjQ2QUFFRTAxMUExMTRDQkM0NTJGRjRBNDI8L3JkZjpsaT4gPHJkZjpsaT54bXAuZGlkOkVDQjI3RjJEMjNBOEUwMTE5NERFRUMxNDY4NzZCRkEyPC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDpGOUU2QkU5NkE3MjhFMDExOTBBOENFM0EyNDM5QkNEMjwvcmRmOmxpPiA8L3JkZjpCYWc+IDwvcGhvdG9zaG9wOkRvY3VtZW50QW5jZXN0b3JzPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOkRBQTE4RjEzMERFNkUwMTE4M0FCRTdBQ0EwNkQ3MDdBIiBzdEV2dDp3aGVuPSIyMDExLTA5LTIzVDExOjIwOjI0LTA3OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ1M1IFdpbmRvd3MiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOkM4MDRDQjE3MTFFNkUwMTE4M0FCRTdBQ0EwNkQ3MDdBIiBzdEV2dDp3aGVuPSIyMDExLTA5LTIzVDExOjIzOjEwLTA3OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ1M1IFdpbmRvd3MiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjI4OTcyOUI0MTFFNkUwMTE4M0FCRTdBQ0EwNkQ3MDdBIiBzdEV2dDp3aGVuPSIyMDExLTA5LTIzVDExOjI3OjU3LTA3OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ1M1IFdpbmRvd3MiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNvbnZlcnRlZCIgc3RFdnQ6cGFyYW1ldGVycz0iZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL2pwZWciLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImRlcml2ZWQiIHN0RXZ0OnBhcmFtZXRlcnM9ImNvbnZlcnRlZCBmcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvanBlZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6Mjk5NzI5QjQxMUU2RTAxMTgzQUJFN0FDQTA2RDcwN0EiIHN0RXZ0OndoZW49IjIwMTEtMDktMjNUMTE6Mjc6NTctMDc6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDUzUgV2luZG93cyIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6Mjg5NzI5QjQxMUU2RTAxMTgzQUJFN0FDQTA2RDcwN0EiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6REFBMThGMTMwREU2RTAxMTgzQUJFN0FDQTA2RDcwN0EiIHN0UmVmOm9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpEQUExOEYxMzBERTZFMDExODNBQkU3QUNBMDZENzA3QSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8P3hwYWNrZXQgZW5kPSJ3Ij8+/+IMWElDQ19QUk9GSUxFAAEBAAAMSExpbm8CEAAAbW50clJHQiBYWVogB84AAgAJAAYAMQAAYWNzcE1TRlQAAAAASUVDIHNSR0IAAAAAAAAAAAAAAAEAAPbWAAEAAAAA0y1IUCAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAARY3BydAAAAVAAAAAzZGVzYwAAAYQAAABsd3RwdAAAAfAAAAAUYmtwdAAAAgQAAAAUclhZWgAAAhgAAAAUZ1hZWgAAAiwAAAAUYlhZWgAAAkAAAAAUZG1uZAAAAlQAAABwZG1kZAAAAsQAAACIdnVlZAAAA0wAAACGdmlldwAAA9QAAAAkbHVtaQAAA/gAAAAUbWVh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%3D%3D';
var IMGmiddleSwordsman = 'data:image/jpeg;base64,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bnRGI1B4bEBywAAAAAAAAAAACnZlY3RvckRhdGFib29sAQAAAABQZ1BzZW51bQAAAABQZ1BzAAAAAFBnUEMAAAAATGVmdFVudEYjUmx0AAAAAAAAAAAAAAAAVG9wIFVudEYjUmx0AAAAAAAAAAAAAAAAU2NsIFVudEYjUHJjQFkAAAAAAAA4QklNA+0AAAAAABABLAAAAAEAAQEsAAAAAQABOEJJTQQmAAAAAAAOAAAAAAAAAAAAAD+AAAA4QklNBA0AAAAAAAQAAAB4OEJJTQQZAAAAAAAEAAAAHjhCSU0D8wAAAAAACQAAAAAAAAAAAQA4QklNJxAAAAAAAAoAAQAAAAAAAAACOEJJTQP1AAAAAABIAC9mZgABAGxmZgAGAAAAAAABAC9mZgABAKGZmgAGAAAAAAABADIAAAABAFoAAAAGAAAAAAABADUAAAABAC0AAAAGAAAAAAABOEJJTQP4AAAAAABwAAD/////////////////////////////A+gAAAAA/////////////////////////////wPoAAAAAP////////////////////////////8D6AAAAAD/////////////////////////////A+gAADhCSU0EAAAAAAAAAgAHOEJJTQQCAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADhCSU0EMAAAAAAADgEBAQEBAQEBAQEBAQEBOEJJTQQtAAAAAAAGAAEAAAAeOEJJTQQIAAAAAAAQAAAAAQAAAkAAAAJAAAAAADhCSU0EHgAAAAAABAAAAAA4QklNBBoAAAAAA1kAAAAGAAAAAAAAAAAAAAAeAAAAHgAAABIAdAByAG8AbwBwAF8AdAB5AHAAZQBzAF8AbgBlAHcAXwA1ADAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAB4AAAAeAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAEAAAAAAABudWxsAAAAAgAAAAZib3VuZHNPYmpjAAAAAQAAAAAAAFJjdDEAAAAEAAAAAFRvcCBsb25nAAAAAAAAAABMZWZ0bG9uZwAAAAAAAAAAQnRvbWxvbmcAAAAeAAAAAFJnaHRsb25nAAAAHgAAAAZzbGljZXNWbExzAAAAAU9iamMA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NU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4wLWMwNjAgNjEuMTM0Nzc3LCAyMDEwLzAyLzEyLTE3OjMyOjAwICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXA6Q3JlYXRlRGF0ZT0iMjAxMS0wOS0yM1QxMToyMDoyNC0wNzowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAxMS0wOS0yM1QxMToyNzo0Ni0wNzowMCIgeG1wOk1vZGlmeURhdGU9IjIwMTEtMDktMjNUMTE6Mjc6NDYtMDc6MDAiIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgZGM6Zm9ybWF0PSJpbWFnZS9qcGVnIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjI3OTcyOUI0MTFFNkUwMTE4M0FCRTdBQ0EwNkQ3MDdBIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkRBQTE4RjEzMERFNkUwMTE4M0FCRTdBQ0EwNkQ3MDdBIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6REFBMThGMTMwREU2RTAxMTgzQUJFN0FDQTA2RDcwN0EiPiA8cGhvdG9zaG9wOkRvY3VtZW50QW5jZXN0b3JzPiA8cmRmOkJhZz4gPHJkZjpsaT51dWlkOjQyRTdBMEMxQkYwRkRGMTFBMjdFRDYxQUZENTA4MTZDPC9yZGY6bGk+IDxyZGY6bGk+dXVpZDo1MTQwNDA0QzE5MjhFMDExOEJFN0QyQzJFNkYyQTQ4MzwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6MDgwNTRFRjNGOTg3RTAxMUI5NzRBRkQwNjQ2QTc5MjM8L3JkZjpsaT4gPHJkZjpsaT54bXAuZGlkOjA4NTNGMTdCOTFBREUwMTFBMTE0Q0JDNDUyRkY0QTQyPC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDowOUE3RDgzRDEyQjNFMDExOTM5MUE2NkM2Mjg4NTg3RjwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6MTlGQzgxMDFGREE3RTAxMTg2RTI5NTFBNTAzRTFERkU8L3JkZjpsaT4gPHJkZjpsaT54bXAuZGlkOjI4QkY5NTc3RkRBQkUwMTE5NDNGQ0U2NTE4NjIwRTE5PC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDoyQkJGOTU3N0ZEQUJFMDExOTQzRkNFNjUxODYyMEUxOTwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6MkZCRjk1NzdGREFCRTAxMTk0M0ZDRTY1MTg2MjBFMTk8L3JkZjpsaT4gPHJkZjpsaT54bXAuZGlkOjM4QkE4NDAyM0VCM0UwMTFBM0Q1QTM3OTE3NEIxOUQ0PC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDo0RTQ3MDA5N0M3QjNFMDExOTM5MUE2NkM2Mjg4NTg3RjwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6NjkyQkREMEQwM0U2RTAxMTgzQUJFN0FDQTA2RDcwN0E8L3JkZjpsaT4gPHJkZjpsaT54bXAuZGlkOkREN0RBODI0NkFBRUUwMTFBMTE0Q0JDNDUyRkY0QTQyPC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDpFQ0IyN0YyRDIzQThFMDExOTRERUVDMTQ2ODc2QkZBMjwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6RjlFNkJFOTZBNzI4RTAxMTkwQThDRTNBMjQzOUJDRDI8L3JkZjpsaT4gPC9yZGY6QmFnPiA8L3Bob3Rvc2hvcDpEb2N1bWVudEFuY2VzdG9ycz4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpEQUExOEYxMzBERTZFMDExODNBQkU3QUNBMDZENzA3QSIgc3RFdnQ6d2hlbj0iMjAxMS0wOS0yM1QxMToyMDoyNC0wNzowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpDODA0Q0IxNzExRTZFMDExODNBQkU3QUNBMDZENzA3QSIgc3RFdnQ6d2hlbj0iMjAxMS0wOS0yM1QxMToyMzoxMC0wNzowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDoyNjk3MjlCNDExRTZFMDExODNBQkU3QUNBMDZENzA3QSIgc3RFdnQ6d2hlbj0iMjAxMS0wOS0yM1QxMToyNzo0Ni0wNzowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjb252ZXJ0ZWQiIHN0RXZ0OnBhcmFtZXRlcnM9ImZyb20gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCB0byBpbWFnZS9qcGVnIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJkZXJpdmVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJjb252ZXJ0ZWQgZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL2pwZWciLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjI3OTcyOUI0MTFFNkUwMTE4M0FCRTdBQ0EwNkQ3MDdBIiBzdEV2dDp3aGVuPSIyMDExLTA5LTIzVDExOjI3OjQ2LTA3OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ1M1IFdpbmRvd3MiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjI2OTcyOUI0MTFFNkUwMTE4M0FCRTdBQ0EwNkQ3MDdBIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkRBQTE4RjEzMERFNkUwMTE4M0FCRTdBQ0EwNkQ3MDdBIiBzdFJlZjpvcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6REFBMThGMTMwREU2RTAxMTgzQUJFN0FDQTA2RDcwN0EiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPD94cGFja2V0IGVuZD0idyI/Pv/iDFhJQ0NfUFJPRklMRQABAQAADEhMaW5vAhAAAG1udHJSR0IgWFlaIAfOAAIACQAGADEAAGFjc3BNU0ZUAAAAAElFQyBzUkdCAAAAAAAAAAAAAAABAAD21gAB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%3D';
var IMGmiddleArcher = 'data:image/jpeg;base64,/9j/4QTZRXhpZgAATU0AKgAAAAgABwESAAMAAAABAAEAAAEaAAUAAAABAAAAYgEbAAUAAAABAAAAagEoAAMAAAABAAIAAAExAAIAAAAcAAAAcgEyAAIAAAAUAAAAjodpAAQAAAABAAAApAAAANAALcbAAAAnEAAtxsAAACcQQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzADIwMTE6MDk6MjMgMTE6MjY6MjcAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAHqADAAQAAAABAAAAHgAAAAAAAAAGAQMAAwAAAAEABgAAARoABQAAAAEAAAEeARsABQAAAAEAAAEmASgAAwAAAAEAAgAAAgEABAAAAAEAAAEuAgIABAAAAAEAAAOjAAAAAAAAAEgAAAABAAAASAAAAAH/2P/tAAxBZG9iZV9DTQAB/+4ADkFkb2JlAGSAAAAAAf/bAIQADAgICAkIDAkJDBELCgsRFQ8MDA8VGBMTFRMTGBEMDAwMDAwRDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAENCwsNDg0QDg4QFA4ODhQUDg4ODhQRDAwMDAwREQwMDAwMDBEMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwM/8AAEQgAHgAeAwEiAAIRAQMRAf/dAAQAAv/EAT8AAAEFAQEBAQEBAAAAAAAAAAMAAQIEBQYHCAkKCwEAAQUBAQEBAQEAAAAAAAAAAQACAwQFBgcICQoLEAABBAEDAgQCBQcGCAUDDDMBAAIRAwQhEjEFQVFhEyJxgTIGFJGhsUIjJBVSwWIzNHKC0UMHJZJT8OHxY3M1FqKygyZEk1RkRcKjdDYX0lXiZfKzhMPTdePzRieUpIW0lcTU5PSltcXV5fVWZnaGlqa2xtbm9jdHV2d3h5ent8fX5/cRAAICAQIEBAMEBQYHBwYFNQEAAhEDITESBEFRYXEiEwUygZEUobFCI8FS0fAzJGLhcoKSQ1MVY3M08SUGFqKygwcmNcLSRJNUoxdkRVU2dGXi8rOEw9N14/NGlKSFtJXE1OT0pbXF1eX1VmZ2hpamtsbW5vYnN0dXZ3eHl6e3x//aAAwDAQACEQMRAD8A9JrdqgM6t0+/Jfh03sfkVzvrB1EfS/zVyPX/AK6dR6RmNrZhF1MEue8EDR0Da9u5u3aua6Z9an4udZnCl03ZJufRqNLAdzane7d9L85NlKmSOMkHy0fVngO0OoWZVVNl/TLHOAbttqcOTS53up/sOY+j/iH1JdC6/hdaxzdjEhzDtsrdy0nUJHJryOuNNJBZg1vqybZ9vqXGo1Yw/et9m939hG9FnCbp/9DtsminIxraLgHV2MLXg+BEFcN9WsnGuyKm3tYK6GllVpbuLnNJpDvU2/ombHM+mtv67u6t+x9nTm2FjnfrVtR/SNqHOxo/SfpHfuLgOkV3WB/o2307Kwa/TFha8l7Q5v6Fr/Tb+fv/ANIoslVRZ8I0Jt7TN+qFVFZ6j07qNuFY1hfTXoWAkbvTZt2v2Oc76H6RErwupM+oVt32icu0DP3SNHC1mb9ON3qez/txUem4dRzzf1fPyGY52/ZMUsvcRo36ORZS1v8A2y31v+LXQt+w/wDNZ5/7Q+tx7v5j7SP7ez0U5ab0F3qNaf/Z/+0MRFBob3Rvc2hvcCAzLjAAOEJJTQQlAAAAAAAQAAAAAAAAAAAAAAAAAAAAADhCSU0EOgAAAAAAnQAAABAAAAABAAAAAAALcHJpbnRPdXRwdXQAAAAEAAAAAFBzdFNib29sAQAAAABJbnRlZW51bQAAAABJbnRlAAAAAENscm0AAAAPcHJpbnRTaXh0ZWVuQml0Ym9vbAAAAAALcHJpbnRlck5hbWVURVhUAAAAFABcAFwAawBhAGIAYQBtAGQAYwAxAFwAUABhAG4AdABoAGUAbwBuAAAAOEJJTQQ7AAAAAAGyAAAAEAAAAAEAAAAAABJwcmludE91dHB1dE9wdGlvbnMAAAASAAAAAENwdG5ib29sAAAAAABDbGJyYm9vbAAAAAAAUmdzTWJvb2wAAAAAAENybkNib29sAAAAAABDbnRDYm9vbAAAAAAATGJsc2Jvb2wAAAAAAE5ndHZib29sAAAAAABFbWxEYm9vbAAAAAAASW50cmJvb2wAAAAAAEJja2dPYmpjAAAAAQAAAAAAAFJHQkMAAAADAAAAAFJkICBkb3ViQG/gAAAAAAAAAAAAR3JuIGRvdWJAb+AAAAAAAAAAAABCbCAgZG91YkBv4AAAAAAAAAAAAEJyZFRVbnRGI1JsdAAAAAAAAAAAAAAAAEJsZCBVbnRGI1JsdAAAAAAAAAAAAAAAAFJzbHRVbnRGI1B4bEBywAAAAAAAAAAACnZlY3RvckRhdGFib29sAQAAAABQZ1BzZW51bQAAAABQZ1BzAAAAAFBnUEMAAAAATGVmdFVudEYjUmx0AAAAAAAAAAAAAAAAVG9wIFVudEYjUmx0AAAAAAAAAAAAAAAAU2NsIFVudEYjUHJjQFkAAAAAAAA4QklNA+0AAAAAABABLAAAAAEAAQEsAAAAAQABOEJJTQQmAAAAAAAOAAAAAAAAAAAAAD+AAAA4QklNBA0AAAAAAAQAAAB4OEJJTQQZAAAAAAAEAAAAHjhCSU0D8wAAAAAACQAAAAAAAAAAAQA4QklNJxAAAAAAAAoAAQAAAAAAAAACOEJJTQP1AAAAAABIAC9mZgABAGxmZgAGAAAAAAABAC9mZgABAKGZmgAGAAAAAAABADIAAAABAFoAAAAGAAAAAAABADUAAAABAC0AAAAGAAAAAAABOEJJTQP4AAAAAABwAAD/////////////////////////////A+gAAAAA/////////////////////////////wPoAAAAAP////////////////////////////8D6AAAAAD/////////////////////////////A+gAADhCSU0EAAAAAAAAAgAHOEJJTQQCAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADhCSU0EMAAAAAAADgEBAQEBAQEBAQEBAQEBOEJJTQQtAAAAAAAGAAEAAAAeOEJJTQQIAAAAAAAQAAAAAQAAAkAAAAJAAAAAADhCSU0EHgAAAAAABAAAAAA4QklNBBoAAAAAA1kAAAAGAAAAAAAAAAAAAAAeAAAAHgAAABIAdAByAG8AbwBwAF8AdAB5AHAAZQBzAF8AbgBlAHcAXwA1ADAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAB4AAAAeAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAEAAAAAAABudWxsAAAAAgAAAAZib3VuZHNPYmpjAAAAAQAAAAAAAFJjdDEAAAAEAAAAAFRvcCBsb25nAAAAAAAAAABMZWZ0bG9uZwAAAAAAAAAAQnRvbWxvbmcAAAAeAAAAAFJnaHRsb25nAAAAHgAAAAZzbGljZXNWbExzAAAAAU9iamMAAAABAAAAAAAFc2xpY2UAAAASAAAAB3NsaWNl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bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzUgV2luZG93cyIgeG1wOkNyZWF0ZURhdGU9IjIwMTEtMDktMjNUMTE6MjA6MjQtMDc6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMTEtMDktMjNUMTE6MjY6MjctMDc6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDExLTA5LTIzVDExOjI2OjI3LTA3OjAwIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiIGRjOmZvcm1hdD0iaW1hZ2UvanBlZyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo5QUU5ODE3NDExRTZFMDExODNBQkU3QUNBMDZENzA3QSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpEQUExOEYxMzBERTZFMDExODNBQkU3QUNBMDZENzA3QSIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOkRBQTE4RjEzMERFNkUwMTE4M0FCRTdBQ0EwNkQ3MDdBIj4gPHBob3Rvc2hvcDpEb2N1bWVudEFuY2VzdG9ycz4gPHJkZjpCYWc+IDxyZGY6bGk+dXVpZDo0MkU3QTBDMUJGMEZERjExQTI3RUQ2MUFGRDUwODE2QzwvcmRmOmxpPiA8cmRmOmxpPnV1aWQ6NTE0MDQwNEMxOTI4RTAxMThCRTdEMkMyRTZGMkE0ODM8L3JkZjpsaT4gPHJkZjpsaT54bXAuZGlkOjA4MDU0RUYzRjk4N0UwMTFCOTc0QUZEMDY0NkE3OTIzPC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDowODUzRjE3QjkxQURFMDExQTExNENCQzQ1MkZGNEE0MjwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6MDlBN0Q4M0QxMkIzRTAxMTkzOTFBNjZDNjI4ODU4N0Y8L3JkZjpsaT4gPHJkZjpsaT54bXAuZGlkOjE5RkM4MTAxRkRBN0UwMTE4NkUyOTUxQTUwM0UxREZFPC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDoyOEJGOTU3N0ZEQUJFMDExOTQzRkNFNjUxODYyMEUxOTwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6MkJCRjk1NzdGREFCRTAxMTk0M0ZDRTY1MTg2MjBFMTk8L3JkZjpsaT4gPHJkZjpsaT54bXAuZGlkOjJGQkY5NTc3RkRBQkUwMTE5NDNGQ0U2NTE4NjIwRTE5PC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDozOEJBODQwMjNFQjNFMDExQTNENUEzNzkxNzRCMTlENDwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6NEU0NzAwOTdDN0IzRTAxMTkzOTFBNjZDNjI4ODU4N0Y8L3JkZjpsaT4gPHJkZjpsaT54bXAuZGlkOjY5MkJERDBEMDNFNkUwMTE4M0FCRTdBQ0EwNkQ3MDdBPC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDpERDdEQTgyNDZBQUVFMDExQTExNENCQzQ1MkZGNEE0MjwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6RUNCMjdGMkQyM0E4RTAxMTk0REVFQzE0Njg3NkJGQTI8L3JkZjpsaT4gPHJkZjpsaT54bXAuZGlkOkY5RTZCRTk2QTcyOEUwMTE5MEE4Q0UzQTI0MzlCQ0QyPC9yZGY6bGk+IDwvcmRmOkJhZz4gPC9waG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6REFBMThGMTMwREU2RTAxMTgzQUJFN0FDQTA2RDcwN0EiIHN0RXZ0OndoZW49IjIwMTEtMDktMjNUMTE6MjA6MjQtMDc6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDUzUgV2luZG93cyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6QzgwNENCMTcxMUU2RTAxMTgzQUJFN0FDQTA2RDcwN0EiIHN0RXZ0OndoZW49IjIwMTEtMDktMjNUMTE6MjM6MTAtMDc6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDUzUgV2luZG93cyIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6OTlFOTgxNzQxMUU2RTAxMTgzQUJFN0FDQTA2RDcwN0EiIHN0RXZ0OndoZW49IjIwMTEtMDktMjNUMTE6MjY6MjctMDc6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDUzUgV2luZG93cyIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY29udmVydGVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJmcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvanBlZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iZGVyaXZlZCIgc3RFdnQ6cGFyYW1ldGVycz0iY29udmVydGVkIGZyb20gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCB0byBpbWFnZS9qcGVnIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo5QUU5ODE3NDExRTZFMDExODNBQkU3QUNBMDZENzA3QSIgc3RFdnQ6d2hlbj0iMjAxMS0wOS0yM1QxMToyNjoyNy0wNzowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDo5OUU5ODE3NDExRTZFMDExODNBQkU3QUNBMDZENzA3QSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpEQUExOEYxMzBERTZFMDExODNBQkU3QUNBMDZENzA3QSIgc3RSZWY6b3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOkRBQTE4RjEzMERFNkUwMTE4M0FCRTdBQ0EwNkQ3MDdBIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw/eHBhY2tldCBlbmQ9InciPz7/4gxYSUNDX1BST0ZJTEUAAQEAAAxITGlubwIQAABtbnRyUkdCIFhZWiAHzgACAAkABgAxAABhY3NwTVNGVAAAAABJRUMgc1JHQgAAAAAAAAAAAAAAAQAA9tYAAQAAAADTLUhQICAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABFjcHJ0AAABUAAAADNkZXNjAAABhAAAAGx3dHB0AAAB8AAAABRia3B0AAACBAAAABRyWFlaAAACGAAAABRnWFlaAAACLAAAABRiWFlaAAACQAAAABRkbW5kAAACVAAAAHBkbWRkAAACxAAAAIh2dWVkAAADTAAAAIZ2aWV3AAAD1AAAACRsdW1pAAAD+AAAABRtZWFzAAAEDAAAACR0ZWNoAAAEMAAAAAxyVFJDAAAEPAAACAxnVFJDAAAEPAAACAxiVFJDAAAEPAAACAx0ZXh0AAAAAENvcHlyaWdodCAoYykgMTk5OCBIZXdsZXR0LVBhY2thcmQgQ29tcGFueQAAZGVzYwAAAAAAAAASc1JHQiBJRUM2MTk2Ni0yLjEAAAAAAAAAAAAAABJzUkdCIElFQzYxOTY2LTIuMQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAWFlaIAAAAAAAAPNRAAEAAAABFsxYWVogAAAAAAAAAAAAAAAAAAAAAFhZWiAAAAAAAABvogAAOPUAAAOQWFlaIAAAAAAAAGKZAAC3hQAAGNpYWVogAAAAAAAAJKAAAA+EAAC2z2Rlc2MAAAAAAAAAFklFQyBodHRwOi8vd3d3LmllYy5jaAAAAAAAAAAAAAAAFklFQyBodHRwOi8vd3d3LmllYy5jaAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABkZXNjAAAAAAAAAC5JRUMgNjE5NjYtMi4xIERlZmF1bHQgUkdCIGNvbG91ciBzcGFjZSAtIHNSR0IAAAAAAAAAAAAAAC5JRUMgNjE5NjYtMi4xIERlZmF1bHQgUkdCIGNvbG91ciBzcGFjZSAtIHNSR0IAAAAAAAAAAAAAAAAAAAAAAAAAAAAAZGVzYwAAAAAAAAAsUmVmZXJlbmNlIFZpZXdpbmcgQ29uZGl0aW9uIGluIElFQzYxOTY2LTIuMQAAAAAAAAAAAAAALFJlZmVyZW5jZSBWaWV3aW5nIENvbmRpdGlvbiBpbiBJRUM2MTk2Ni0yLjEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHZpZXcAAAAAABOk/gAUXy4AEM8UAAPtzAAEEwsAA1yeAAAAAVhZWiAAAAAAAEwJVgBQAAAAVx/nbWVhcwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAo8AAAACc2lnIAAAAABDUlQgY3VydgAAAAAAAAQAAAAABQAKAA8AFAAZAB4AIwAoAC0AMgA3ADsAQABFAEoATwBUAFkAXgBjAGgAbQByAHcAfACBAIYAiwCQAJUAmgCfAKQAqQCuALIAtwC8AMEAxgDLANAA1QDbAOAA5QDrAPAA9gD7AQEBBwENARMBGQEfASUBKwEyATgBPgFFAUwBUgFZAWABZwFuAXUBfAGDAYsBkgGaAaEBqQGxAbkBwQHJAdEB2QHhAekB8gH6AgMCDAIUAh0CJgIvAjgCQQJLAlQCXQJnAnECegKEAo4CmAKiAqwCtgLBAssC1QLgAusC9QMAAwsDFgMhAy0DOANDA08DWgNmA3IDfgOKA5YDogOuA7oDxwPTA+AD7AP5BAYEEwQgBC0EOwRIBFUEYwRxBH4EjASaBKgEtgTEBNME4QTwBP4FDQUcBSsFOgVJBVgFZwV3BYYFlgWmBbUFxQXVBeUF9gYGBhYGJwY3BkgGWQZqBnsGjAadBq8GwAbRBuMG9QcHBxkHKwc9B08HYQd0B4YHmQesB78H0gflB/gICwgfCDIIRghaCG4IggiWCKoIvgjSCOcI+wkQCSUJOglPCWQJeQmPCaQJugnPCeUJ+woRCicKPQpUCmoKgQqYCq4KxQrcCvMLCwsiCzkLUQtpC4ALmAuwC8gL4Qv5DBIMKgxDDFwMdQyODKcMwAzZDPMNDQ0mDUANWg10DY4NqQ3DDd4N+A4TDi4OSQ5kDn8Omw62DtIO7g8JDyUPQQ9eD3oPlg+zD88P7BAJECYQQxBhEH4QmxC5ENcQ9RETETERTxFtEYwRqhHJEegSBxImEkUSZBKEEqMSwxLjEwMTIxNDE2MTgxOkE8UT5RQGFCcUSRRqFIsUrRTOFPAVEhU0FVYVeBWbFb0V4BYDFiYWSRZsFo8WshbWFvoXHRdBF2UXiReuF9IX9xgbGEAYZRiKGK8Y1Rj6GSAZRRlrGZEZtxndGgQaKhpRGncanhrFGuwbFBs7G2MbihuyG9ocAhwqHFIcexyjHMwc9R0eHUcdcB2ZHcMd7B4WHkAeah6UHr4e6R8THz4faR+UH78f6iAVIEEgbCCYIMQg8CEcIUghdSGhIc4h+yInIlUigiKvIt0jCiM4I2YjlCPCI/AkHyRNJHwkqyTaJQklOCVoJZclxyX3JicmVyaHJrcm6CcYJ0kneierJ9woDSg/KHEooijUKQYpOClrKZ0p0CoCKjUqaCqbKs8rAis2K2krnSvRLAUsOSxuLKIs1y0MLUEtdi2rLeEuFi5MLoIuty7uLyQvWi+RL8cv/jA1MGwwpDDbMRIxSjGCMbox8jIqMmMymzLUMw0zRjN/M7gz8TQrNGU0njTYNRM1TTWHNcI1/TY3NnI2rjbpNyQ3YDecN9c4FDhQOIw4yDkFOUI5fzm8Ofk6Njp0OrI67zstO2s7qjvoPCc8ZTykPOM9Ij1hPaE94D4gPmA+oD7gPyE/YT+iP+JAI0BkQKZA50EpQWpBrEHuQjBCckK1QvdDOkN9Q8BEA0RHRIpEzkUSRVVFmkXeRiJGZ0arRvBHNUd7R8BIBUhLSJFI10kdSWNJqUnwSjdKfUrESwxLU0uaS+JMKkxyTLpNAk1KTZNN3E4lTm5Ot08AT0lPk0/dUCdQcVC7UQZRUFGbUeZSMVJ8UsdTE1NfU6pT9lRCVI9U21UoVXVVwlYPVlxWqVb3V0RXklfgWC9YfVjLWRpZaVm4WgdaVlqmWvVbRVuVW+VcNVyGXNZdJ114XcleGl5sXr1fD19hX7NgBWBXYKpg/GFPYaJh9WJJYpxi8GNDY5dj62RAZJRk6WU9ZZJl52Y9ZpJm6Gc9Z5Nn6Wg/aJZo7GlDaZpp8WpIap9q92tPa6dr/2xXbK9tCG1gbbluEm5rbsRvHm94b9FwK3CGcOBxOnGVcfByS3KmcwFzXXO4dBR0cHTMdSh1hXXhdj52m3b4d1Z3s3gReG54zHkqeYl553pGeqV7BHtje8J8IXyBfOF9QX2hfgF+Yn7CfyN/hH/lgEeAqIEKgWuBzYIwgpKC9INXg7qEHYSAhOOFR4Wrhg6GcobXhzuHn4gEiGmIzokziZmJ/opkisqLMIuWi/yMY4zKjTGNmI3/jmaOzo82j56QBpBukNaRP5GokhGSepLjk02TtpQglIqU9JVflcmWNJaflwqXdZfgmEyYuJkkmZCZ/JpomtWbQpuvnByciZz3nWSd0p5Anq6fHZ+Ln/qgaaDYoUehtqImopajBqN2o+akVqTHpTilqaYapoum/adup+CoUqjEqTepqaocqo+rAqt1q+msXKzQrUStuK4trqGvFq+LsACwdbDqsWCx1rJLssKzOLOutCW0nLUTtYq2AbZ5tvC3aLfguFm40blKucK6O7q1uy67p7whvJu9Fb2Pvgq+hL7/v3q/9cBwwOzBZ8Hjwl/C28NYw9TEUcTOxUvFyMZGxsPHQce/yD3IvMk6ybnKOMq3yzbLtsw1zLXNNc21zjbOts83z7jQOdC60TzRvtI/0sHTRNPG1EnUy9VO1dHWVdbY11zX4Nhk2OjZbNnx2nba+9uA3AXcit0Q3ZbeHN6i3ynfr+A24L3hROHM4lPi2+Nj4+vkc+T85YTmDeaW5x/nqegy6LzpRunQ6lvq5etw6/vshu0R7ZzuKO6070DvzPBY8OXxcvH/8ozzGfOn9DT0wvVQ9d72bfb794r4Gfio+Tj5x/pX+uf7d/wH/Jj9Kf26/kv+3P9t////7gAOQWRvYmUAZEAAAAAB/9sAhAABAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAgICAgICAgICAgIDAwMDAwMDAwMDAQEBAQEBAQEBAQECAgECAgMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwP/wAARCAAeAB4DAREAAhEBAxEB/90ABAAE/8QBogAAAAYCAwEAAAAAAAAAAAAABwgGBQQJAwoCAQALAQAABgMBAQEAAAAAAAAAAAAGBQQDBwIIAQkACgsQAAIBAwQBAwMCAwMDAgYJdQECAwQRBRIGIQcTIgAIMRRBMiMVCVFCFmEkMxdScYEYYpElQ6Gx8CY0cgoZwdE1J+FTNoLxkqJEVHNFRjdHYyhVVlcassLS4vJkg3SThGWjs8PT4yk4ZvN1Kjk6SElKWFlaZ2hpanZ3eHl6hYaHiImKlJWWl5iZmqSlpqeoqaq0tba3uLm6xMXGx8jJytTV1tfY2drk5ebn6Onq9PX29/j5+hEAAgEDAgQEAwUEBAQGBgVtAQIDEQQhEgUxBgAiE0FRBzJhFHEIQoEjkRVSoWIWMwmxJMHRQ3LwF+GCNCWSUxhjRPGisiY1GVQ2RWQnCnODk0Z0wtLi8lVldVY3hIWjs8PT4/MpGpSktMTU5PSVpbXF1eX1KEdXZjh2hpamtsbW5vZnd4eXp7fH1+f3SFhoeIiYqLjI2Oj4OUlZaXmJmam5ydnp+So6SlpqeoqaqrrK2ur6/9oADAMBAAIRAxEAPwDdpwVdGJAoZkX8i9hZfrfk34+n19uM9TXqtKYr0FeE+WPx9392VufpXZfae1dy9n7ONfFuPaOOrJZa7HT4mWKDLUq1LU6Y+srMRNOi1cNNNNLSsbSqhBsXruNjJdyWEd0hvFFSgI1AHzI/1evRpLsm72+22+8z7dMm1SuVSUqdDMOIB8/89RxHSjytLBk/LDUwwzU8iOksMiq6TK6kNFIhBDxFSQQbhr8i31Uo4ZdSHz4/Z6dFTKWOlh2f4f8AY6JDtjbK1Wf7Q+KG4spn6Whwi7L7J2DmoJBHX5vovcm7JajLdbTVUtMRU0e2srtjI7WrDF+9FtjKY0GQVLtKaBVDlTwOR+3I+YB8uGkhfn0pYymGOdaCQVQnieGH41DFTh61Mqs/y6//0D4fPr+c78i/hh29jdsYb4xZDN7GXHZirzGf3ZR5rD47XQ7mqMdjp8TufFSZTE1WKr8FTpVmqAcOapYvHBJBKHIrq73FZnjtYoyoFasafn0Mdl2Da9wtlku9wdJSeCBTT5HURn7B5HjUdUj/ABm/mnZjqbuzd3yBpettwvXdjfJjN9r7i6qUZXFU8uO7Go8jDncZsbNfYZSDOPS0mUrFpVr4o5nepZ4lKzXiCFy8VvvD7r4kayxqRIlRqPkatTtFPtxTPUmHaLi+5bt9g0yNBp/SlYEKgXNAuo6qt/DSnp1uP/Br589LfO7r3Ib66tqKygyG2slS4jeO0suadstt+vr6QZDHO0lJLLT1dBkKMkxTIR+5HJGwDIfY8srxLqMfpmOQfhNKj9nl/g6hvetluNmuRDJKssbCqutdJ9RkA1B8uu5Ox8D2R848PUbFyFBPgPjV1nvvq/vHfElfDT7epewu7M91NkdhdJ0NYVEOU31AcBTZOupVlIohXUULD7qqSIPeIslyEQ5jB1fLVQgfaaA/IAeo6Z+meDbjJKtGnZWQeZWPxAX+SjUQMZNaYU9f/9HaI7G2XtPsvrne2wt6Y+iyO1d27Qz+3M/SV6CSCTE5nFVVDWl9Sl4mjp52YOtmRhqWxAPtD5GnoenI20OjjiGB8vI1HHHWqh/LW7L623n2Hseh3/hNi0O1+rcHltrbA3zltoR7ozW6d3bUzGR62oMvRbsGCSm2Ntuh29nMcyjKNVCrnpLxvGVRZ4k5osrY7xOLfWSwD6dJoxSvE/iAr60LKta0FcjLWTdH5OtpS4MKSlSfEAIWUK5GioJ7kelBUB2xSpBxu5/5Re19iYCt+THxk+ZvaHxw3Jhdl128etdmsmIrdnYnN1lHUZxtn7crMUcHupcBmMpkpKSjx0xy8lNJWtFEkgkEBkoW8dzb28zSAMVU19SRxOePlX/L1FUHMk4uZrG529JULlWPnQHiQQaU4kjTw8ulPt3pT5GYP+Qlvze/+l6Ws7x3lh6D5v8A8deroYWxO7qLu/afyf8AvINw0+Liy9VvWpTbWp5KiSZP4tKsKFI0D+6BZht7Ti97CNRNM0qKGvxVCilM1OPKnTr3No/N8Vt+7RpRvA0/h+BoyCvDRVhwpRRXJJPX/9KyT+drX/K1Ph9NgvjVg9+TYLM50Td+726urAvYm0eosRSfdV9FtfD46sTdmRqN25R4KWqmxdLWPR4+OoaVEiYuoe3U7iLJ/wB1IDemgWvAEkDUcgkLxIGTSg49CjlJdgO7I3MclNuVGJH8VAe2pBArwqwoOJ61AfiTt3eO5qfcL7L3/wB7dcxbe2DgazaUOycb23mcF2HXVW/Ns47M4ITdZbV3NXbVw+NoGXIVle6mU5ZaSKGmmYonsG3Ru3uro3aqh10g4k+GAKlqEjvI4DgCPMdTgrWMFhtotohMhH+MljGtJTr0BBIBXRU0r8QDcFNer+vjX05tSs78rd+fMz5b/JDB9ZzU+2n+PnQVfsD5ZZ7NUcEW3dusFxfbW6+mcLianXkWeOjg27RDcVU4pZlqqGrD00h3tsdYi15Ow4doD0pSgAJBXTTI0+pHGtI5365pDFBtO3QlwpDShoBqOpjqKI2oNmhEhORUVGk9XG45ekl/ldZ+aSQv8dn7tppoaOSPdQgh+PA+a+JU0dPJJIm4DgT16rszRyM/2TEFw2qx+Po/oj8H0ev/AGtPE/z/AM/n0Dz+8v3yKB/3p4H+21/T/tr+Vev/2Q%3D%3D';
var IMGmiddleCavalry = 'data:image/jpeg;base64,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b3JEYXRhYm9vbAEAAAAAUGdQc2VudW0AAAAAUGdQcwAAAABQZ1BDAAAAAExlZnRVbnRGI1JsdAAAAAAAAAAAAAAAAFRvcCBVbnRGI1JsdAAAAAAAAAAAAAAAAFNjbCBVbnRGI1ByY0BZAAAAAAAAOEJJTQPtAAAAAAAQASwAAAABAAEBLAAAAAEAAThCSU0EJgAAAAAADgAAAAAAAAAAAAA/gAAAOEJJTQQNAAAAAAAEAAAAeDhCSU0EGQAAAAAABAAAAB44QklNA/MAAAAAAAkAAAAAAAAAAAEAOEJJTScQAAAAAAAKAAEAAAAAAAAAAjhCSU0D9QAAAAAASAAvZmYAAQBsZmYABgAAAAAAAQAvZmYAAQChmZoABgAAAAAAAQAyAAAAAQBaAAAABgAAAAAAAQA1AAAAAQAtAAAABgAAAAAAAThCSU0D+AAAAAAAcAAA/////////////////////////////wPoAAAAAP////////////////////////////8D6AAAAAD/////////////////////////////A+gAAAAA/////////////////////////////wPoAAA4QklNBAAAAAAAAAIABzhCSU0EAgAAAAAAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4QklNBDAAAAAAAA4BAQEBAQEBAQEBAQEBAThCSU0ELQAAAAAABgABAAAAHjhCSU0ECAAAAAAAEAAAAAEAAAJAAAACQAAAAAA4QklNBB4AAAAAAAQAAAAAOEJJTQQaAAAAAANZAAAABgAAAAAAAAAAAAAAHgAAAB4AAAASAHQAcgBvAG8AcABfAHQAeQBwAGUAcwBfAG4AZQB3AF8ANQAwAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAeAAAAHgAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABAAAAABAAAAAAAAbnVsbAAAAAIAAAAGYm91bmRzT2JqYwAAAAEAAAAAAABSY3QxAAAABAAAAABUb3AgbG9uZwAAAAAAAAAATGVmdGxvbmcAAAAAAAAAAEJ0b21sb25nAAAAHgAAAABSZ2h0bG9uZwAAAB4AAAAGc2xpY2VzVmxMcwAAAAFPYmpjAAAAAQAAAAAABXNsaWNlAAAAEgAAAAdz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PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4wLWMwNjAgNjEuMTM0Nzc3LCAyMDEwLzAyLzEyLTE3OjMyOjAwICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXA6Q3JlYXRlRGF0ZT0iMjAxMS0wOS0yM1QxMToyMDoyNC0wNzowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAxMS0wOS0yM1QxMToyNjo0MS0wNzowMCIgeG1wOk1vZGlmeURhdGU9IjIwMTEtMDktMjNUMTE6MjY6NDEtMDc6MDAiIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgZGM6Zm9ybWF0PSJpbWFnZS9qcGVnIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjlDRTk4MTc0MTFFNkUwMTE4M0FCRTdBQ0EwNkQ3MDdBIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkRBQTE4RjEzMERFNkUwMTE4M0FCRTdBQ0EwNkQ3MDdBIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6REFBMThGMTMwREU2RTAxMTgzQUJFN0FDQTA2RDcwN0EiPiA8cGhvdG9zaG9wOkRvY3VtZW50QW5jZXN0b3JzPiA8cmRmOkJhZz4gPHJkZjpsaT51dWlkOjQyRTdBMEMxQkYwRkRGMTFBMjdFRDYxQUZENTA4MTZDPC9yZGY6bGk+IDxyZGY6bGk+dXVpZDo1MTQwNDA0QzE5MjhFMDExOEJFN0QyQzJFNkYyQTQ4MzwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6MDgwNTRFRjNGOTg3RTAxMUI5NzRBRkQwNjQ2QTc5MjM8L3JkZjpsaT4gPHJkZjpsaT54bXAuZGlkOjA4NTNGMTdCOTFBREUwMTFBMTE0Q0JDNDUyRkY0QTQyPC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDowOUE3RDgzRDEyQjNFMDExOTM5MUE2NkM2Mjg4NTg3RjwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6MTlGQzgxMDFGREE3RTAxMTg2RTI5NTFBNTAzRTFERkU8L3JkZjpsaT4gPHJkZjpsaT54bXAuZGlkOjI4QkY5NTc3RkRBQkUwMTE5NDNGQ0U2NTE4NjIwRTE5PC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDoyQkJGOTU3N0ZEQUJFMDExOTQzRkNFNjUxODYyMEUxOTwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6MkZCRjk1NzdGREFCRTAxMTk0M0ZDRTY1MTg2MjBFMTk8L3JkZjpsaT4gPHJkZjpsaT54bXAuZGlkOjM4QkE4NDAyM0VCM0UwMTFBM0Q1QTM3OTE3NEIxOUQ0PC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDo0RTQ3MDA5N0M3QjNFMDExOTM5MUE2NkM2Mjg4NTg3RjwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6NjkyQkREMEQwM0U2RTAxMTgzQUJFN0FDQTA2RDcwN0E8L3JkZjpsaT4gPHJkZjpsaT54bXAuZGlkOkREN0RBODI0NkFBRUUwMTFBMTE0Q0JDNDUyRkY0QTQyPC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDpFQ0IyN0YyRDIzQThFMDExOTRERUVDMTQ2ODc2QkZBMjwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6RjlFNkJFOTZBNzI4RTAxMTkwQThDRTNBMjQzOUJDRDI8L3JkZjpsaT4gPC9yZGY6QmFnPiA8L3Bob3Rvc2hvcDpEb2N1bWVudEFuY2VzdG9ycz4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpEQUExOEYxMzBERTZFMDExODNBQkU3QUNBMDZENzA3QSIgc3RFdnQ6d2hlbj0iMjAxMS0wOS0yM1QxMToyMDoyNC0wNzowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpDODA0Q0IxNzExRTZFMDExODNBQkU3QUNBMDZENzA3QSIgc3RFdnQ6d2hlbj0iMjAxMS0wOS0yM1QxMToyMzoxMC0wNzowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo5QkU5ODE3NDExRTZFMDExODNBQkU3QUNBMDZENzA3QSIgc3RFdnQ6d2hlbj0iMjAxMS0wOS0yM1QxMToyNjo0MS0wNzowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjb252ZXJ0ZWQiIHN0RXZ0OnBhcmFtZXRlcnM9ImZyb20gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCB0byBpbWFnZS9qcGVnIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJkZXJpdmVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJjb252ZXJ0ZWQgZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL2pwZWciLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjlDRTk4MTc0MTFFNkUwMTE4M0FCRTdBQ0EwNkQ3MDdBIiBzdEV2dDp3aGVuPSIyMDExLTA5LTIzVDExOjI2OjQxLTA3OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ1M1IFdpbmRvd3MiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjlCRTk4MTc0MTFFNkUwMTE4M0FCRTdBQ0EwNkQ3MDdBIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkRBQTE4RjEzMERFNkUwMTE4M0FCRTdBQ0EwNkQ3MDdBIiBzdFJlZjpvcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6REFBMThGMTMwREU2RTAxMTgzQUJFN0FDQTA2RDcwN0EiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPD94cGFja2V0IGVuZD0idyI/Pv/iDFhJQ0NfUFJPRklMRQABAQAADEhMaW5vAhAAAG1udHJSR0IgWFlaIAfOAAIACQAGADEAAGFjc3BNU0ZUAAAAAElFQyBzUkdCAAAAAAAAAAAAAAABAAD21gABAAAAANMtSFAgIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA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%3D%3D';
var IMGmiddleHeavyCavalry = 'data:image/jpeg;base64,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eGxAcsAAAAAAAAAAAAp2ZWN0b3JEYXRhYm9vbAEAAAAAUGdQc2VudW0AAAAAUGdQcwAAAABQZ1BDAAAAAExlZnRVbnRGI1JsdAAAAAAAAAAAAAAAAFRvcCBVbnRGI1JsdAAAAAAAAAAAAAAAAFNjbCBVbnRGI1ByY0BZAAAAAAAAOEJJTQPtAAAAAAAQASwAAAABAAEBLAAAAAEAAThCSU0EJgAAAAAADgAAAAAAAAAAAAA/gAAAOEJJTQQNAAAAAAAEAAAAeDhCSU0EGQAAAAAABAAAAB44QklNA/MAAAAAAAkAAAAAAAAAAAEAOEJJTScQAAAAAAAKAAEAAAAAAAAAAjhCSU0D9QAAAAAASAAvZmYAAQBsZmYABgAAAAAAAQAvZmYAAQChmZoABgAAAAAAAQAyAAAAAQBaAAAABgAAAAAAAQA1AAAAAQAtAAAABgAAAAAAAThCSU0D+AAAAAAAcAAA/////////////////////////////wPoAAAAAP////////////////////////////8D6AAAAAD/////////////////////////////A+gAAAAA/////////////////////////////wPoAAA4QklNBAAAAAAAAAIABzhCSU0EAgAAAAAAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4QklNBDAAAAAAAA4BAQEBAQEBAQEBAQEBAThCSU0ELQAAAAAABgABAAAAHjhCSU0ECAAAAAAAEAAAAAEAAAJAAAACQAAAAAA4QklNBB4AAAAAAAQAAAAAOEJJTQQaAAAAAANZAAAABgAAAAAAAAAAAAAAHgAAAB4AAAASAHQAcgBvAG8AcABfAHQAeQBwAGUAcwBfAG4AZQB3AF8ANQAwAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAeAAAAHgAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABAAAAABAAAAAAAAbnVsbAAAAAIAAAAGYm91bmRzT2JqYwAAAAEAAAAAAABSY3QxAAAABAAAAABUb3AgbG9uZwAAAAAAAAAATGVmdGxvbmcAAAAAAAAAAEJ0b21sb25nAAAAHgAAAABSZ2h0bG9uZwAAAB4AAAAGc2xpY2VzVmxMcwAAAAFPYmpjAAAAAQAA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SHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4wLWMwNjAgNjEuMTM0Nzc3LCAyMDEwLzAyLzEyLTE3OjMyOjAwICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXA6Q3JlYXRlRGF0ZT0iMjAxMS0wOS0yM1QxMToyMDoyNC0wNzowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAxMS0wOS0yM1QxMToyNjo1Mi0wNzowMCIgeG1wOk1vZGlmeURhdGU9IjIwMTEtMDktMjNUMTE6MjY6NTItMDc6MDAiIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgZGM6Zm9ybWF0PSJpbWFnZS9qcGVnIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjlFRTk4MTc0MTFFNkUwMTE4M0FCRTdBQ0EwNkQ3MDdBIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkRBQTE4RjEzMERFNkUwMTE4M0FCRTdBQ0EwNkQ3MDdBIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6REFBMThGMTMwREU2RTAxMTgzQUJFN0FDQTA2RDcwN0EiPiA8cGhvdG9zaG9wOkRvY3VtZW50QW5jZXN0b3JzPiA8cmRmOkJhZz4gPHJkZjpsaT51dWlkOjQyRTdBMEMxQkYwRkRGMTFBMjdFRDYxQUZENTA4MTZDPC9yZGY6bGk+IDxyZGY6bGk+dXVpZDo1MTQwNDA0QzE5MjhFMDExOEJFN0QyQzJFNkYyQTQ4MzwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6MDgwNTRFRjNGOTg3RTAxMUI5NzRBRkQwNjQ2QTc5MjM8L3JkZjpsaT4gPHJkZjpsaT54bXAuZGlkOjA4NTNGMTdCOTFBREUwMTFBMTE0Q0JDNDUyRkY0QTQyPC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDowOUE3RDgzRDEyQjNFMDExOTM5MUE2NkM2Mjg4NTg3RjwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6MTlGQzgxMDFGREE3RTAxMTg2RTI5NTFBNTAzRTFERkU8L3JkZjpsaT4gPHJkZjpsaT54bXAuZGlkOjI4QkY5NTc3RkRBQkUwMTE5NDNGQ0U2NTE4NjIwRTE5PC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDoyQkJGOTU3N0ZEQUJFMDExOTQzRkNFNjUxODYyMEUxOTwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6MkZCRjk1NzdGREFCRTAxMTk0M0ZDRTY1MTg2MjBFMTk8L3JkZjpsaT4gPHJkZjpsaT54bXAuZGlkOjM4QkE4NDAyM0VCM0UwMTFBM0Q1QTM3OTE3NEIxOUQ0PC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDo0RTQ3MDA5N0M3QjNFMDExOTM5MUE2NkM2Mjg4NTg3RjwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6NjkyQkREMEQwM0U2RTAxMTgzQUJFN0FDQTA2RDcwN0E8L3JkZjpsaT4gPHJkZjpsaT54bXAuZGlkOkREN0RBODI0NkFBRUUwMTFBMTE0Q0JDNDUyRkY0QTQyPC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDpFQ0IyN0YyRDIzQThFMDExOTRERUVDMTQ2ODc2QkZBMjwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6RjlFNkJFOTZBNzI4RTAxMTkwQThDRTNBMjQzOUJDRDI8L3JkZjpsaT4gPC9yZGY6QmFnPiA8L3Bob3Rvc2hvcDpEb2N1bWVudEFuY2VzdG9ycz4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpEQUExOEYxMzBERTZFMDExODNBQkU3QUNBMDZENzA3QSIgc3RFdnQ6d2hlbj0iMjAxMS0wOS0yM1QxMToyMDoyNC0wNzowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpDODA0Q0IxNzExRTZFMDExODNBQkU3QUNBMDZENzA3QSIgc3RFdnQ6d2hlbj0iMjAxMS0wOS0yM1QxMToyMzoxMC0wNzowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDo5REU5ODE3NDExRTZFMDExODNBQkU3QUNBMDZENzA3QSIgc3RFdnQ6d2hlbj0iMjAxMS0wOS0yM1QxMToyNjo1Mi0wNzowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjb252ZXJ0ZWQiIHN0RXZ0OnBhcmFtZXRlcnM9ImZyb20gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCB0byBpbWFnZS9qcGVnIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJkZXJpdmVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJjb252ZXJ0ZWQgZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL2pwZWciLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjlFRTk4MTc0MTFFNkUwMTE4M0FCRTdBQ0EwNkQ3MDdBIiBzdEV2dDp3aGVuPSIyMDExLTA5LTIzVDExOjI2OjUyLTA3OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ1M1IFdpbmRvd3MiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjlERTk4MTc0MTFFNkUwMTE4M0FCRTdBQ0EwNkQ3MDdBIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkRBQTE4RjEzMERFNkUwMTE4M0FCRTdBQ0EwNkQ3MDdBIiBzdFJlZjpvcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6REFBMThGMTMwREU2RTAxMTgzQUJFN0FDQTA2RDcwN0EiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPD94cGFja2V0IGVuZD0idyI/Pv/iDFhJQ0NfUFJPRklMRQABAQAADEhMaW5vAhAAAG1udHJSR0IgWFlaIAfOAAIACQAGADEAAGFjc3BNU0ZUAAAAAElFQyBzUkdCAAAAAAAAAAAAAAABAAD21gABAAAAANMtSFAg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%3D%3D';
var IMGmiddleSupplyWagon = 'data:image/jpeg;base64,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AAAAQmxkIFVudEYjUmx0AAAAAAAAAAAAAAAAUnNsdFVudEYjUHhsQHLAAAAAAAAAAAAKdmVjdG9yRGF0YWJvb2wBAAAAAFBnUHNlbnVtAAAAAFBnUHMAAAAAUGdQQwAAAABMZWZ0VW50RiNSbHQAAAAAAAAAAAAAAABUb3AgVW50RiNSbHQAAAAAAAAAAAAAAABTY2wgVW50RiNQcmNAWQAAAAAAADhCSU0D7QAAAAAAEAEsAAAAAQABASwAAAABAAE4QklNBCYAAAAAAA4AAAAAAAAAAAAAP4AAADhCSU0EDQAAAAAABAAAAHg4QklNBBkAAAAAAAQAAAAeOEJJTQPzAAAAAAAJAAAAAAAAAAABADhCSU0nEAAAAAAACgABAAAAAAAAAAI4QklNA/UAAAAAAEgAL2ZmAAEAbGZmAAYAAAAAAAEAL2ZmAAEAoZmaAAYAAAAAAAEAMgAAAAEAWgAAAAYAAAAAAAEANQAAAAEALQAAAAYAAAAAAAE4QklNA/gAAAAAAHAAAP////////////////////////////8D6AAAAAD/////////////////////////////A+gAAAAA/////////////////////////////wPoAAAAAP////////////////////////////8D6AAAOEJJTQQAAAAAAAACAAo4QklNBAIAAAAAABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOEJJTQQwAAAAAAAOAQEBAQEBAQEBAQEBAQE4QklNBC0AAAAAAAYAAQAAADY4QklNBAgAAAAAABAAAAABAAACQAAAAkAAAAAAOEJJTQQeAAAAAAAEAAAAADhCSU0EGgAAAAADWQAAAAYAAAAAAAAAAAAAAB4AAAAeAAAAEgB0AHIAbwBvAHAAXwB0AHkAcABlAHMAXwBuAGUAdwBfADUAMAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAHgAAAB4AAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAQAAAAAAAG51bGwAAAACAAAABmJvdW5kc09iamMAAAABAAAAAAAAUmN0MQAAAAQAAAAAVG9wIGxvbmcAAAAAAAAAAExlZnRsb25nAAAAAAAAAABCdG9tbG9uZwAAAB4AAAAAUmdo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AAEBAP/hFPZodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6eG1wTU09Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9tbS8iIHhtbG5zOnN0RXZ0PSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VFdmVudCMiIHhtbG5zOnN0UmVmPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvc1R5cGUvUmVzb3VyY2VSZWYjIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDUzUgV2luZG93cyIgeG1wOkNyZWF0ZURhdGU9IjIwMTEtMDktMjNUMTE6MjA6MjQtMDc6MDAiIHhtcDpNZXRhZGF0YURhdGU9IjIwMTEtMDktMjNUMTE6Mjk6MDctMDc6MDAiIHhtcDpNb2RpZnlEYXRlPSIyMDExLTA5LTIzVDExOjI5OjA3LTA3OjAwIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiIGRjOmZvcm1hdD0iaW1hZ2UvanBlZyIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDoyNjQ1NjhFMzExRTZFMDExODNBQkU3QUNBMDZENzA3QSIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpEQUExOEYxMzBERTZFMDExODNBQkU3QUNBMDZENzA3QSIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOkRBQTE4RjEzMERFNkUwMTE4M0FCRTdBQ0EwNkQ3MDdBIj4gPHBob3Rvc2hvcDpEb2N1bWVudEFuY2VzdG9ycz4gPHJkZjpCYWc+IDxyZGY6bGk+dXVpZDo0MkU3QTBDMUJGMEZERjExQTI3RUQ2MUFGRDUwODE2QzwvcmRmOmxpPiA8cmRmOmxpPnV1aWQ6NTE0MDQwNEMxOTI4RTAxMThCRTdEMkMyRTZGMkE0ODM8L3JkZjpsaT4gPHJkZjpsaT54bXAuZGlkOjA4MDU0RUYzRjk4N0UwMTFCOTc0QUZEMDY0NkE3OTIzPC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDowODUzRjE3QjkxQURFMDExQTExNENCQzQ1MkZGNEE0MjwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6MDlBN0Q4M0QxMkIzRTAxMTkzOTFBNjZDNjI4ODU4N0Y8L3JkZjpsaT4gPHJkZjpsaT54bXAuZGlkOjE5RkM4MTAxRkRBN0UwMTE4NkUyOTUxQTUwM0UxREZFPC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDoyOEJGOTU3N0ZEQUJFMDExOTQzRkNFNjUxODYyMEUxOTwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6MkJCRjk1NzdGREFCRTAxMTk0M0ZDRTY1MTg2MjBFMTk8L3JkZjpsaT4gPHJkZjpsaT54bXAuZGlkOjJGQkY5NTc3RkRBQkUwMTE5NDNGQ0U2NTE4NjIwRTE5PC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDozOEJBODQwMjNFQjNFMDExQTNENUEzNzkxNzRCMTlENDwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6NEU0NzAwOTdDN0IzRTAxMTkzOTFBNjZDNjI4ODU4N0Y8L3JkZjpsaT4gPHJkZjpsaT54bXAuZGlkOjY5MkJERDBEMDNFNkUwMTE4M0FCRTdBQ0EwNkQ3MDdBPC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDpERDdEQTgyNDZBQUVFMDExQTExNENCQzQ1MkZGNEE0MjwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6RUNCMjdGMkQyM0E4RTAxMTk0REVFQzE0Njg3NkJGQTI8L3JkZjpsaT4gPHJkZjpsaT54bXAuZGlkOkY5RTZCRTk2QTcyOEUwMTE5MEE4Q0UzQTI0MzlCQ0QyPC9yZGY6bGk+IDwvcmRmOkJhZz4gPC9waG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6REFBMThGMTMwREU2RTAxMTgzQUJFN0FDQTA2RDcwN0EiIHN0RXZ0OndoZW49IjIwMTEtMDktMjNUMTE6MjA6MjQtMDc6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDUzUgV2luZG93cyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6QzgwNENCMTcxMUU2RTAxMTgzQUJFN0FDQTA2RDcwN0EiIHN0RXZ0OndoZW49IjIwMTEtMDktMjNUMTE6MjM6MTAtMDc6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDUzUgV2luZG93cyIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MjU0NTY4RTMxMUU2RTAxMTgzQUJFN0FDQTA2RDcwN0EiIHN0RXZ0OndoZW49IjIwMTEtMDktMjNUMTE6Mjk6MDctMDc6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDUzUgV2luZG93cyIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY29udmVydGVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJmcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvanBlZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iZGVyaXZlZCIgc3RFdnQ6cGFyYW1ldGVycz0iY29udmVydGVkIGZyb20gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCB0byBpbWFnZS9qcGVnIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDoyNjQ1NjhFMzExRTZFMDExODNBQkU3QUNBMDZENzA3QSIgc3RFdnQ6d2hlbj0iMjAxMS0wOS0yM1QxMToyOTowNy0wNzowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8eG1wTU06RGVyaXZlZEZyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoyNTQ1NjhFMzExRTZFMDExODNBQkU3QUNBMDZENzA3QSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDpEQUExOEYxMzBERTZFMDExODNBQkU3QUNBMDZENzA3QSIgc3RSZWY6b3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOkRBQTE4RjEzMERFNkUwMTE4M0FCRTdBQ0EwNkQ3MDdBIi8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIDw/eHBhY2tldCBlbmQ9InciPz7/4gxYSUNDX1BST0ZJTEUAAQEAAAxITGlubwIQ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%3D';
var IMGmiddleBallista = 'data:image/jpeg;base64,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VW50RiNSbHQAAAAAAAAAAAAAAABCbGQgVW50RiNSbHQAAAAAAAAAAAAAAABSc2x0VW50RiNQeGxAcsAAAAAAAAAAAAp2ZWN0b3JEYXRhYm9vbAEAAAAAUGdQc2VudW0AAAAAUGdQcwAAAABQZ1BDAAAAAExlZnRVbnRGI1JsdAAAAAAAAAAAAAAAAFRvcCBVbnRGI1JsdAAAAAAAAAAAAAAAAFNjbCBVbnRGI1ByY0BZAAAAAAAAOEJJTQPtAAAAAAAQASwAAAABAAEBLAAAAAEAAThCSU0EJgAAAAAADgAAAAAAAAAAAAA/gAAAOEJJTQQNAAAAAAAEAAAAeDhCSU0EGQAAAAAABAAAAB44QklNA/MAAAAAAAkAAAAAAAAAAAEAOEJJTScQAAAAAAAKAAEAAAAAAAAAAjhCSU0D9QAAAAAASAAvZmYAAQBsZmYABgAAAAAAAQAvZmYAAQChmZoABgAAAAAAAQAyAAAAAQBaAAAABgAAAAAAAQA1AAAAAQAtAAAABgAAAAAAAThCSU0D+AAAAAAAcAAA/////////////////////////////wPoAAAAAP////////////////////////////8D6AAAAAD/////////////////////////////A+gAAAAA/////////////////////////////wPoAAA4QklNBAAAAAAAAAIACjhCSU0EAgAAAAAAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4QklNBDAAAAAAAA4BAQEBAQEBAQEBAQEBAThCSU0ELQAAAAAABgABAAAANjhCSU0ECAAAAAAAEAAAAAEAAAJAAAACQAAAAAA4QklNBB4AAAAAAAQAAAAAOEJJTQQaAAAAAANZAAAABgAAAAAAAAAAAAAAHgAAAB4AAAASAHQAcgBvAG8AcABfAHQAeQBwAGUAcwBfAG4AZQB3AF8ANQAwAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAeAAAAHgAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABAAAAABAAAAAAAAbnVsbAAAAAIAAAAGYm91bmRzT2JqYwAAAAEAAAAAAABSY3QxAAAABAAAAABUb3AgbG9uZwAAAAAAAAAATGVmdGxvbmcAAAAAAAAAAEJ0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AGgAbwBwACAAQwBTADUAAAABADhCSU0EBgAAAAAABwAIAAAAAQEA/+EU9mh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8APD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNS4wLWMwNjAgNjEuMTM0Nzc3LCAyMDEwLzAyLzEyLTE3OjMyOjAwICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXA6Q3JlYXRlRGF0ZT0iMjAxMS0wOS0yM1QxMToyMDoyNC0wNzowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAxMS0wOS0yM1QxMToyODo1Mi0wNzowMCIgeG1wOk1vZGlmeURhdGU9IjIwMTEtMDktMjNUMTE6Mjg6NTItMDc6MDAiIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHBob3Rvc2hvcDpJQ0NQcm9maWxlPSJzUkdCIElFQzYxOTY2LTIuMSIgZGM6Zm9ybWF0PSJpbWFnZS9qcGVnIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjI0NDU2OEUzMTFFNkUwMTE4M0FCRTdBQ0EwNkQ3MDdBIiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOkRBQTE4RjEzMERFNkUwMTE4M0FCRTdBQ0EwNkQ3MDdBIiB4bXBNTTpPcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6REFBMThGMTMwREU2RTAxMTgzQUJFN0FDQTA2RDcwN0EiPiA8cGhvdG9zaG9wOkRvY3VtZW50QW5jZXN0b3JzPiA8cmRmOkJhZz4gPHJkZjpsaT51dWlkOjQyRTdBMEMxQkYwRkRGMTFBMjdFRDYxQUZENTA4MTZDPC9yZGY6bGk+IDxyZGY6bGk+dXVpZDo1MTQwNDA0QzE5MjhFMDExOEJFN0QyQzJFNkYyQTQ4MzwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6MDgwNTRFRjNGOTg3RTAxMUI5NzRBRkQwNjQ2QTc5MjM8L3JkZjpsaT4gPHJkZjpsaT54bXAuZGlkOjA4NTNGMTdCOTFBREUwMTFBMTE0Q0JDNDUyRkY0QTQyPC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDowOUE3RDgzRDEyQjNFMDExOTM5MUE2NkM2Mjg4NTg3RjwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6MTlGQzgxMDFGREE3RTAxMTg2RTI5NTFBNTAzRTFERkU8L3JkZjpsaT4gPHJkZjpsaT54bXAuZGlkOjI4QkY5NTc3RkRBQkUwMTE5NDNGQ0U2NTE4NjIwRTE5PC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDoyQkJGOTU3N0ZEQUJFMDExOTQzRkNFNjUxODYyMEUxOTwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6MkZCRjk1NzdGREFCRTAxMTk0M0ZDRTY1MTg2MjBFMTk8L3JkZjpsaT4gPHJkZjpsaT54bXAuZGlkOjM4QkE4NDAyM0VCM0UwMTFBM0Q1QTM3OTE3NEIxOUQ0PC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDo0RTQ3MDA5N0M3QjNFMDExOTM5MUE2NkM2Mjg4NTg3RjwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6NjkyQkREMEQwM0U2RTAxMTgzQUJFN0FDQTA2RDcwN0E8L3JkZjpsaT4gPHJkZjpsaT54bXAuZGlkOkREN0RBODI0NkFBRUUwMTFBMTE0Q0JDNDUyRkY0QTQyPC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDpFQ0IyN0YyRDIzQThFMDExOTRERUVDMTQ2ODc2QkZBMjwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6RjlFNkJFOTZBNzI4RTAxMTkwQThDRTNBMjQzOUJDRDI8L3JkZjpsaT4gPC9yZGY6QmFnPiA8L3Bob3Rvc2hvcDpEb2N1bWVudEFuY2VzdG9ycz4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iY3JlYXRlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpEQUExOEYxMzBERTZFMDExODNBQkU3QUNBMDZENzA3QSIgc3RFdnQ6d2hlbj0iMjAxMS0wOS0yM1QxMToyMDoyNC0wNzowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDpDODA0Q0IxNzExRTZFMDExODNBQkU3QUNBMDZENzA3QSIgc3RFdnQ6d2hlbj0iMjAxMS0wOS0yM1QxMToyMzoxMC0wNzowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDoyRTk3MjlCNDExRTZFMDExODNBQkU3QUNBMDZENzA3QSIgc3RFdnQ6d2hlbj0iMjAxMS0wOS0yM1QxMToyODo1Mi0wNzowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjb252ZXJ0ZWQiIHN0RXZ0OnBhcmFtZXRlcnM9ImZyb20gYXBwbGljYXRpb24vdm5kLmFkb2JlLnBob3Rvc2hvcCB0byBpbWFnZS9qcGVnIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJkZXJpdmVkIiBzdEV2dDpwYXJhbWV0ZXJzPSJjb252ZXJ0ZWQgZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL2pwZWciLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjI0NDU2OEUzMTFFNkUwMTE4M0FCRTdBQ0EwNkQ3MDdBIiBzdEV2dDp3aGVuPSIyMDExLTA5LTIzVDExOjI4OjUyLTA3OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ1M1IFdpbmRvd3MiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPC9yZGY6U2VxPiA8L3htcE1NOkhpc3Rvcnk+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOjJFOTcyOUI0MTFFNkUwMTE4M0FCRTdBQ0EwNkQ3MDdBIiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkRBQTE4RjEzMERFNkUwMTE4M0FCRTdBQ0EwNkQ3MDdBIiBzdFJlZjpvcmlnaW5hbERvY3VtZW50SUQ9InhtcC5kaWQ6REFBMThGMTMwREU2RTAxMTgzQUJFN0FDQTA2RDcwN0EiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+ICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgPD94cGFja2V0IGVu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%3D';
var IMGmiddleBatteringRam = 'data:image/jpeg;base64,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dEYjUHhsQHLAAAAAAAAAAAAKdmVjdG9yRGF0YWJvb2wBAAAAAFBnUHNlbnVtAAAAAFBnUHMAAAAAUGdQQwAAAABMZWZ0VW50RiNSbHQAAAAAAAAAAAAAAABUb3AgVW50RiNSbHQAAAAAAAAAAAAAAABTY2wgVW50RiNQcmNAWQAAAAAAADhCSU0D7QAAAAAAEAEsAAAAAQABASwAAAABAAE4QklNBCYAAAAAAA4AAAAAAAAAAAAAP4AAADhCSU0EDQAAAAAABAAAAHg4QklNBBkAAAAAAAQAAAAeOEJJTQPzAAAAAAAJAAAAAAAAAAABADhCSU0nEAAAAAAACgABAAAAAAAAAAI4QklNA/UAAAAAAEgAL2ZmAAEAbGZmAAYAAAAAAAEAL2ZmAAEAoZmaAAYAAAAAAAEAMgAAAAEAWgAAAAYAAAAAAAEANQAAAAEALQAAAAYAAAAAAAE4QklNA/gAAAAAAHAAAP////////////////////////////8D6AAAAAD/////////////////////////////A+gAAAAA/////////////////////////////wPoAAAAAP////////////////////////////8D6AAAOEJJTQQAAAAAAAACAAo4QklNBAIAAAAAABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOEJJTQQwAAAAAAAOAQEBAQEBAQEBAQEBAQE4QklNBC0AAAAAAAYAAQAAADY4QklNBAgAAAAAABAAAAABAAACQAAAAkAAAAAAOEJJTQQeAAAAAAAEAAAAADhCSU0EGgAAAAADWQAAAAYAAAAAAAAAAAAAAB4AAAAeAAAAEgB0AHIAbwBvAHAAXwB0AHkAcABlAHMAXwBuAGUAdwBfADUAMAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAHgAAAB4AAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAQAAAAAAAG51bGwAAAACAAAABmJvdW5kc09iamMAAAABAAAAAAAAUmN0MQAAAAQAAAAAVG9wIGxvbmcAAAAAAAAAAExlZnRsb25nAAAAAAAAAABCdG9tbG9uZwAAAB4AAAAAUmdodGxvbmcAAAAeAAAABnNsaWNlc1ZsTHMAAAABT2JqYwAA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TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjAtYzA2MCA2MS4xMzQ3NzcsIDIwMTAvMDIvMTItMTc6MzI6MDAgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IFdpbmRvd3MiIHhtcDpDcmVhdGVEYXRlPSIyMDExLTA5LTIzVDExOjIwOjI0LTA3OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDExLTA5LTIzVDExOjI4OjI1LTA3OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAxMS0wOS0yM1QxMToyODoyNS0wNzowMCIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiBkYzpmb3JtYXQ9ImltYWdlL2pwZWciIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MkI5NzI5QjQxMUU2RTAxMTgzQUJFN0FDQTA2RDcwN0EiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6REFBMThGMTMwREU2RTAxMTgzQUJFN0FDQTA2RDcwN0EiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpEQUExOEYxMzBERTZFMDExODNBQkU3QUNBMDZENzA3QSI+IDxwaG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+IDxyZGY6QmFnPiA8cmRmOmxpPnV1aWQ6NDJFN0EwQzFCRjBGREYxMUEyN0VENjFBRkQ1MDgxNkM8L3JkZjpsaT4gPHJkZjpsaT51dWlkOjUxNDA0MDRDMTkyOEUwMTE4QkU3RDJDMkU2RjJBNDgzPC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDowODA1NEVGM0Y5ODdFMDExQjk3NEFGRDA2NDZBNzkyMzwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6MDg1M0YxN0I5MUFERTAxMUExMTRDQkM0NTJGRjRBNDI8L3JkZjpsaT4gPHJkZjpsaT54bXAuZGlkOjA5QTdEODNEMTJCM0UwMTE5MzkxQTY2QzYyODg1ODdGPC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDoxOUZDODEwMUZEQTdFMDExODZFMjk1MUE1MDNFMURGRTwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6MjhCRjk1NzdGREFCRTAxMTk0M0ZDRTY1MTg2MjBFMTk8L3JkZjpsaT4gPHJkZjpsaT54bXAuZGlkOjJCQkY5NTc3RkRBQkUwMTE5NDNGQ0U2NTE4NjIwRTE5PC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDoyRkJGOTU3N0ZEQUJFMDExOTQzRkNFNjUxODYyMEUxOTwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6MzhCQTg0MDIzRUIzRTAxMUEzRDVBMzc5MTc0QjE5RDQ8L3JkZjpsaT4gPHJkZjpsaT54bXAuZGlkOjRFNDcwMDk3QzdCM0UwMTE5MzkxQTY2QzYyODg1ODdGPC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDo2OTJCREQwRDAzRTZFMDExODNBQkU3QUNBMDZENzA3QTwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6REQ3REE4MjQ2QUFFRTAxMUExMTRDQkM0NTJGRjRBNDI8L3JkZjpsaT4gPHJkZjpsaT54bXAuZGlkOkVDQjI3RjJEMjNBOEUwMTE5NERFRUMxNDY4NzZCRkEyPC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDpGOUU2QkU5NkE3MjhFMDExOTBBOENFM0EyNDM5QkNEMjwvcmRmOmxpPiA8L3JkZjpCYWc+IDwvcGhvdG9zaG9wOkRvY3VtZW50QW5jZXN0b3JzPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOkRBQTE4RjEzMERFNkUwMTE4M0FCRTdBQ0EwNkQ3MDdBIiBzdEV2dDp3aGVuPSIyMDExLTA5LTIzVDExOjIwOjI0LTA3OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ1M1IFdpbmRvd3MiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOkM4MDRDQjE3MTFFNkUwMTE4M0FCRTdBQ0EwNkQ3MDdBIiBzdEV2dDp3aGVuPSIyMDExLTA5LTIzVDExOjIzOjEwLTA3OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ1M1IFdpbmRvd3MiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjJBOTcyOUI0MTFFNkUwMTE4M0FCRTdBQ0EwNkQ3MDdBIiBzdEV2dDp3aGVuPSIyMDExLTA5LTIzVDExOjI4OjI1LTA3OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ1M1IFdpbmRvd3MiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNvbnZlcnRlZCIgc3RFdnQ6cGFyYW1ldGVycz0iZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL2pwZWciLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImRlcml2ZWQiIHN0RXZ0OnBhcmFtZXRlcnM9ImNvbnZlcnRlZCBmcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvanBlZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MkI5NzI5QjQxMUU2RTAxMTgzQUJFN0FDQTA2RDcwN0EiIHN0RXZ0OndoZW49IjIwMTEtMDktMjNUMTE6Mjg6MjUtMDc6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDUzUgV2luZG93cyIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MkE5NzI5QjQxMUU2RTAxMTgzQUJFN0FDQTA2RDcwN0EiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6REFBMThGMTMwREU2RTAxMTgzQUJFN0FDQTA2RDcwN0EiIHN0UmVmOm9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpEQUExOEYxMzBERTZFMDExODNBQkU3QUNBMDZENzA3QSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8P3hwYWNrZXQgZW5kPSJ3Ij8+/+IMWElDQ19QUk9GSUxFAAEBAAAMSExpbm8CEAAAbW50clJHQiBYWVogB84AAgAJAAYAMQAAYWNzcE1TRlQAAAAASUVDIHNSR0IAAAAAAAAAAAAAAAEAAPbWAAEA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%3D%3D';
var IMGmiddleCatapult = 'data:image/jpeg;base64,/9j/4QTbRXhpZgAATU0AKgAAAAgABwESAAMAAAABAAEAAAEaAAUAAAABAAAAYgEbAAUAAAABAAAAagEoAAMAAAABAAIAAAExAAIAAAAcAAAAcgEyAAIAAAAUAAAAjodpAAQAAAABAAAApAAAANAALcbAAAAnEAAtxsAAACcQQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzADIwMTE6MDk6MjMgMTE6Mjg6NDAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAHqADAAQAAAABAAAAHgAAAAAAAAAGAQMAAwAAAAEABgAAARoABQAAAAEAAAEeARsABQAAAAEAAAEmASgAAwAAAAEAAgAAAgEABAAAAAEAAAEuAgIABAAAAAEAAAOlAAAAAAAAAEgAAAABAAAASAAAAAH/2P/tAAxBZG9iZV9DTQAB/+4ADkFkb2JlAGSAAAAAAf/bAIQADAgICAkIDAkJDBELCgsRFQ8MDA8VGBMTFRMTGBEMDAwMDAwRDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAENCwsNDg0QDg4QFA4ODhQUDg4ODhQRDAwMDAwREQwMDAwMDBEMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwM/8AAEQgAHgAeAwEiAAIRAQMRAf/dAAQAAv/EAT8AAAEFAQEBAQEBAAAAAAAAAAMAAQIEBQYHCAkKCwEAAQUBAQEBAQEAAAAAAAAAAQACAwQFBgcICQoLEAABBAEDAgQCBQcGCAUDDDMBAAIRAwQhEjEFQVFhEyJxgTIGFJGhsUIjJBVSwWIzNHKC0UMHJZJT8OHxY3M1FqKygyZEk1RkRcKjdDYX0lXiZfKzhMPTdePzRieUpIW0lcTU5PSltcXV5fVWZnaGlqa2xtbm9jdHV2d3h5ent8fX5/cRAAICAQIEBAMEBQYHBwYFNQEAAhEDITESBEFRYXEiEwUygZEUobFCI8FS0fAzJGLhcoKSQ1MVY3M08SUGFqKygwcmNcLSRJNUoxdkRVU2dGXi8rOEw9N14/NGlKSFtJXE1OT0pbXF1eX1VmZ2hpamtsbW5vYnN0dXZ3eHl6e3x//aAAwDAQACEQMRAD8A9GcHPqexjzW5zSGvGu0kfS/sqrWcjp+BY7Isbd6TXPLtRAa2fzv6qILSqfXsttHRsyxwn9EWQdZL/wBE0R/Weo5QiZDJrxQBAIPSW/pXxmQODSpEHb9qL6vdXf1fD9awN3gM3beNzm7nN5d9FamweCq9LwsfBwq8eioVDaC4Du6Buc4n6SvbtEgJDHwkkyo69VExM7AqNjR//9DY+tGQa8nCbj2vF/qCyypj4/RVtse92z/SP+jWq/VLsLKxcb0s22yp2Q11zHXAj0aT6rrD/Kdsr2rJ+tVfSmday7sm2uy40NFGOBaLBb2e17Gijd/XsWP04YX2PIOUXeu4EFr9wa2zZ+je1zA/c3Zt+l7N6il12s1/i9V8em/X7Xvfq1nuoxXs6hkbrCH3NtsslhZvcLGgu+i6mz22f9aWo3rFL+mPz2wfTYHPbPtBI0/Sbfoa/T2rzLNexv1bqo9Jz8oH3ZVb9CzdNm+nbX+j9P2roMBuF/zK6n6dl26ajaXNH71TmNqbPp7dv6N/v/loxvhI0+1R+YF//9n/7QxGUGhvdG9zaG9wIDMuMAA4QklNBCUAAAAAABAAAAAAAAAAAAAAAAAAAAAAOEJJTQQ6AAAAAACdAAAAEAAAAAEAAAAAAAtwcmludE91dHB1dAAAAAQAAAAAUHN0U2Jvb2wBAAAAAEludGVlbnVtAAAAAEludGUAAAAAQ2xybQAAAA9wcmludFNpeHRlZW5CaXRib29sAAAAAAtwcmludGVyTmFtZVRFWFQAAAAUAFwAXABrAGEAYgBhAG0AZABjADEAXABQAGEAbgB0AGgAZQBvAG4AAAA4QklNBDsAAAAAAbIAAAAQAAAAAQAAAAAAEnByaW50T3V0cHV0T3B0aW9ucwAAABIAAAAAQ3B0bmJvb2wAAAAAAENsYnJib29sAAAAAABSZ3NNYm9vbAAAAAAAQ3JuQ2Jvb2wAAAAAAENudENib29sAAAAAABMYmxzYm9vbAAAAAAATmd0dmJvb2wAAAAAAEVtbERib29sAAAAAABJbnRyYm9vbAAAAAAAQmNrZ09iamMAAAABAAAAAAAAUkdCQwAAAAMAAAAAUmQgIGRvdWJAb+AAAAAAAAAAAABHcm4gZG91YkBv4AAAAAAAAAAAAEJsICBkb3ViQG/gAAAAAAAAAAAAQnJkVFVudEYjUmx0AAAAAAAAAAAAAAAAQmxkIFVudEYjUmx0AAAAAAAAAAAAAAAAUnNsdFVudEYjUHhsQHLAAAAAAAAAAAAKdmVjdG9yRGF0YWJvb2wBAAAAAFBnUHNlbnVtAAAAAFBnUHMAAAAAUGdQQwAAAABMZWZ0VW50RiNSbHQAAAAAAAAAAAAAAABUb3AgVW50RiNSbHQAAAAAAAAAAAAAAABTY2wgVW50RiNQcmNAWQAAAAAAADhCSU0D7QAAAAAAEAEsAAAAAQABASwAAAABAAE4QklNBCYAAAAAAA4AAAAAAAAAAAAAP4AAADhCSU0EDQAAAAAABAAAAHg4QklNBBkAAAAAAAQAAAAeOEJJTQPzAAAAAAAJAAAAAAAAAAABADhCSU0nEAAAAAAACgABAAAAAAAAAAI4QklNA/UAAAAAAEgAL2ZmAAEAbGZmAAYAAAAAAAEAL2ZmAAEAoZmaAAYAAAAAAAEAMgAAAAEAWgAAAAYAAAAAAAEANQAAAAEALQAAAAYAAAAAAAE4QklNA/gAAAAAAHAAAP////////////////////////////8D6AAAAAD/////////////////////////////A+gAAAAA/////////////////////////////wPoAAAAAP////////////////////////////8D6AAAOEJJTQQAAAAAAAACAAo4QklNBAIAAAAAABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOEJJTQQwAAAAAAAOAQEBAQEBAQEBAQEBAQE4QklNBC0AAAAAAAYAAQAAADY4QklNBAgAAAAAABAAAAABAAACQAAAAkAAAAAAOEJJTQQeAAAAAAAEAAAAADhCSU0EGgAAAAADWQAAAAYAAAAAAAAAAAAAAB4AAAAeAAAAEgB0AHIAbwBvAHAAXwB0AHkAcABlAHMAXwBuAGUAdwBfADUAMAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAHgAAAB4AAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAQAAAAAAAG51bGwAAAACAAAABmJvdW5kc09iamMAAAABAAAAAAAAUmN0MQAAAAQAAAAAVG9wIGxvbmcAAAAAAAAAAExlZnRsb25nAAAAAAAAAABCdG9tbG9uZwAAAB4AAAAAUmdodGxvbmcAAAAeAAAABnNsaWNlc1ZsTHMAAAABT2JqYwAAAAEAAAAAAAVzbGljZQAAABIAAAAHc2xp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b2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjAtYzA2MCA2MS4xMzQ3NzcsIDIwMTAvMDIvMTItMTc6MzI6MDAgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpzdFJlZj0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlUmVmIyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ1M1IFdpbmRvd3MiIHhtcDpDcmVhdGVEYXRlPSIyMDExLTA5LTIzVDExOjIwOjI0LTA3OjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDExLTA5LTIzVDExOjI4OjQwLTA3OjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAxMS0wOS0yM1QxMToyODo0MC0wNzowMCIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyIgcGhvdG9zaG9wOklDQ1Byb2ZpbGU9InNSR0IgSUVDNjE5NjYtMi4xIiBkYzpmb3JtYXQ9ImltYWdlL2pwZWciIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6MkQ5NzI5QjQxMUU2RTAxMTgzQUJFN0FDQTA2RDcwN0EiIHhtcE1NOkRvY3VtZW50SUQ9InhtcC5kaWQ6REFBMThGMTMwREU2RTAxMTgzQUJFN0FDQTA2RDcwN0EiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpEQUExOEYxMzBERTZFMDExODNBQkU3QUNBMDZENzA3QSI+IDxwaG90b3Nob3A6RG9jdW1lbnRBbmNlc3RvcnM+IDxyZGY6QmFnPiA8cmRmOmxpPnV1aWQ6NDJFN0EwQzFCRjBGREYxMUEyN0VENjFBRkQ1MDgxNkM8L3JkZjpsaT4gPHJkZjpsaT51dWlkOjUxNDA0MDRDMTkyOEUwMTE4QkU3RDJDMkU2RjJBNDgzPC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDowODA1NEVGM0Y5ODdFMDExQjk3NEFGRDA2NDZBNzkyMzwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6MDg1M0YxN0I5MUFERTAxMUExMTRDQkM0NTJGRjRBNDI8L3JkZjpsaT4gPHJkZjpsaT54bXAuZGlkOjA5QTdEODNEMTJCM0UwMTE5MzkxQTY2QzYyODg1ODdGPC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDoxOUZDODEwMUZEQTdFMDExODZFMjk1MUE1MDNFMURGRTwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6MjhCRjk1NzdGREFCRTAxMTk0M0ZDRTY1MTg2MjBFMTk8L3JkZjpsaT4gPHJkZjpsaT54bXAuZGlkOjJCQkY5NTc3RkRBQkUwMTE5NDNGQ0U2NTE4NjIwRTE5PC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDoyRkJGOTU3N0ZEQUJFMDExOTQzRkNFNjUxODYyMEUxOTwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6MzhCQTg0MDIzRUIzRTAxMUEzRDVBMzc5MTc0QjE5RDQ8L3JkZjpsaT4gPHJkZjpsaT54bXAuZGlkOjRFNDcwMDk3QzdCM0UwMTE5MzkxQTY2QzYyODg1ODdGPC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDo2OTJCREQwRDAzRTZFMDExODNBQkU3QUNBMDZENzA3QTwvcmRmOmxpPiA8cmRmOmxpPnhtcC5kaWQ6REQ3REE4MjQ2QUFFRTAxMUExMTRDQkM0NTJGRjRBNDI8L3JkZjpsaT4gPHJkZjpsaT54bXAuZGlkOkVDQjI3RjJEMjNBOEUwMTE5NERFRUMxNDY4NzZCRkEyPC9yZGY6bGk+IDxyZGY6bGk+eG1wLmRpZDpGOUU2QkU5NkE3MjhFMDExOTBBOENFM0EyNDM5QkNEMjwvcmRmOmxpPiA8L3JkZjpCYWc+IDwvcGhvdG9zaG9wOkRvY3VtZW50QW5jZXN0b3JzPiA8eG1wTU06SGlzdG9yeT4gPHJkZjpTZXE+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJjcmVhdGVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOkRBQTE4RjEzMERFNkUwMTE4M0FCRTdBQ0EwNkQ3MDdBIiBzdEV2dDp3aGVuPSIyMDExLTA5LTIzVDExOjIwOjI0LTA3OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ1M1IFdpbmRvd3MiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOkM4MDRDQjE3MTFFNkUwMTE4M0FCRTdBQ0EwNkQ3MDdBIiBzdEV2dDp3aGVuPSIyMDExLTA5LTIzVDExOjIzOjEwLTA3OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ1M1IFdpbmRvd3MiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjJDOTcyOUI0MTFFNkUwMTE4M0FCRTdBQ0EwNkQ3MDdBIiBzdEV2dDp3aGVuPSIyMDExLTA5LTIzVDExOjI4OjQwLTA3OjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ1M1IFdpbmRvd3MiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNvbnZlcnRlZCIgc3RFdnQ6cGFyYW1ldGVycz0iZnJvbSBhcHBsaWNhdGlvbi92bmQuYWRvYmUucGhvdG9zaG9wIHRvIGltYWdlL2pwZWciLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImRlcml2ZWQiIHN0RXZ0OnBhcmFtZXRlcnM9ImNvbnZlcnRlZCBmcm9tIGFwcGxpY2F0aW9uL3ZuZC5hZG9iZS5waG90b3Nob3AgdG8gaW1hZ2UvanBlZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MkQ5NzI5QjQxMUU2RTAxMTgzQUJFN0FDQTA2RDcwN0EiIHN0RXZ0OndoZW49IjIwMTEtMDktMjNUMTE6Mjg6NDAtMDc6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCBDUzUgV2luZG93cyIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6MkM5NzI5QjQxMUU2RTAxMTgzQUJFN0FDQTA2RDcwN0EiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6REFBMThGMTMwREU2RTAxMTgzQUJFN0FDQTA2RDcwN0EiIHN0UmVmOm9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDpEQUExOEYxMzBERTZFMDExODNBQkU3QUNBMDZENzA3QSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8P3hwYWNrZXQgZW5kPSJ3Ij8+/+IMWElDQ19QUk9GSUxFAAEBAAAMSExpbm8CEAAAbW50clJHQiBYWVogB84AAgAJAAYAMQAAYWNzcE1TRlQAAAAASUVDIHNSR0IAAAAAAAAAAAAAAAEAAPbWAAEAAAAA0y1IUCAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA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%3D';
// - WALL TROOPS
// -- 30x30
var IMGmiddleCrossbows = 'data:image/png;base64,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%3D';
var IMGmiddleTrebuchet = 'data:image/png;base64,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%3D%3D';
var IMGmiddleTrap = 'data:image/png;base64,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';
var IMGmiddleCaltr = 'data:image/png;base64,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';
var IMGmiddleSpiked = 'data:image/png;base64,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%3D';

// - MARCH TYPE
var IMGmarchReinforce = 'data:image/jpeg;base64,/9j/4AAQSkZJRgABAgAAZABkAAD/7AARRHVja3kAAQAEAAAAZAAA/+4ADkFkb2JlAGTAAAAAAf/bAIQAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQICAgICAgICAgICAwMDAwMDAwMDAwEBAQEBAQECAQECAgIBAgIDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMD/8AAEQgAEgASAwERAAIRAQMRAf/EAKEAAAMBAAAAAAAAAAAAAAAAAAYHCQgBAAICAwAAAAAAAAAAAAAAAAYHBAUCCAkQAAAFAgAKBQ0AAAAAAAAAAAIDBAUGAQcAERMzYzQ1NjcIMRRkFVXwElJUlCVFRlYXV4cYEQABAgIFBgkICwEAAAAAAAACAQMEBQAREjMGITFBMjQHYaFiEyNTYxQ18FJDRFRkFjZRsSKElFWFVjeXCBj/2gAMAwEAAhEDEQA/AKTxx+hqhJG7cL08UhNz21uLaIFLyOoR2KXpbEla5CH3CHUQE7FcIIh+73w/GWJUZUtQYJKcKqXnxLIHBv8AozBDUlgmoeUb2ZRDoLVSIDUWACiVKqIloTqrJFrcZP7aWm1JFWzIwOJYFIdtBZnLI5NCGifXXp0ouXNXQ4TnxaDloJPeiPqhq1Ss0m3thX8ktpks9fkBow99z9qcK0GxwFlWkCqSmUhr3qYTVQYEaIJJa2Du73VybdXKXN6m+hqw5DkQwUuVBNx14VVEMgrUSVVToxXowHpnFqs0wl0qh5Oys2nqVKK1NtLlUi4U08GirKuiip64u+nLNcSPutuKDav476eGejzmgwFf+jD/AG7K/Gu+6o3Ps2pn7TV7OkP4m92Zv+c0avmZuPipDO9PMC5P1+7XPll4SwXLuHBDUh8xarhOjsltM627EaJ1NaJm0pziaqS1Z4wmNqgkuh6hWIsNMsjoppWTuuNnd5DjiPHCI1KQiBehmFBVfciARLJCokJiFSopopIFlKyRVURImkqR2EMNmeNUiIWSxjjUTDQht2H33RFUbjAQ0ExZFoyQTrRt5DVErSokFJvzcXjujPrFXI5hrcqGi18ETDYEDwQ6rW2458jZ3osyHBuwnTKSyV0bjZdTEscBQYgKCQZJYYPGiLKYeP8AGUJvOYclssiIIsdMw5torQkTD8O4quKDBOESI4KWUcWyJouVFUbSBdnMIaN77h7DkwhX8UvwnNc62NbEXDuoLjkIwT4oTb2oJlZAydAmmzsZT3r/AFfE/HqZ3FqTnr3huo7b7Brmiw1P+CsS+wRF7zOr6TzM+fi4aKr4Pxt+Tzbae7bI/tHUal72etwUjpy26xeLYnEX5X1/ZKXbui9Q7Ngxt6OrJdr8M9Y1bwrrlddy6WW93xaV/MfgUD4xtF16v7j7J2Vmjdu3wynvRuu57y7FzPxHR+hpPNwDcF/NktvNsbuL3P6PlfTwV0AsM/Mcv2vbWNn2i9G47bquXZphb2Dcby/aOGxP4zxjy+7U6Cf3X/Ivl+t0/9k%3D';
var IMGmarchReturning = 'data:image/jpeg;base64,/9j/4AAQSkZJRgABAgAAZABkAAD/7AARRHVja3kAAQAEAAAAZAAA/+ENSWh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8APD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4KPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNC4yLjItYzA2MyA1My4zNTI2MjQsIDIwMDgvMDcvMzAtMTg6MTI6MTggICAgICAgICI+CiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPgogIDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiCiAgICB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iCiAgICB4bWxuczp4bXBSaWdodHM9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9yaWdodHMvIgogICAgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIgogICAgeG1sbnM6SXB0YzR4bXBDb3JlPSJodHRwOi8vaXB0Yy5vcmcvc3RkL0lwdGM0eG1wQ29yZS8xLjAveG1sbnMvIgogICB4bXBSaWdodHM6TWFya2VkPSJGYWxzZSIKICAgeG1wUmlnaHRzOldlYlN0YXRlbWVudD0iIgogICBwaG90b3Nob3A6QXV0aG9yc1Bvc2l0aW9uPSIiPgogICA8ZGM6cmlnaHRzPgogICAgPHJkZjpBbHQ+CiAgICAgPHJkZjpsaSB4bWw6bGFuZz0ieC1kZWZhdWx0Ii8+CiAgICA8L3JkZjpBbHQ+CiAgIDwvZGM6cmlnaHRzPgogICA8ZGM6Y3JlYXRvcj4KICAgIDxyZGY6U2VxPgogICAgIDxyZGY6bGkvPgogICAgPC9yZGY6U2VxPgogICA8L2RjOmNyZWF0b3I+CiAgIDxkYzp0aXRsZT4KICAgIDxyZGY6QWx0PgogICAgIDxyZGY6bGkgeG1sOmxhbmc9IngtZGVmYXVsdCIvPgogICAgPC9yZGY6QWx0PgogICA8L2RjOnRpdGxlPgogICA8eG1wUmlnaHRzOlVzYWdlVGVybXM+CiAgICA8cmRmOkFsdD4KICAgICA8cmRmOmxpIHhtbDpsYW5nPSJ4LWRlZmF1bHQiLz4KICAgIDwvcmRmOkFsdD4KICAgPC94bXBSaWdodHM6VXNhZ2VUZXJtcz4KICAgPElwdGM0eG1wQ29yZTpDcmVhdG9yQ29udGFjdEluZm8KICAgIElwdGM0eG1wQ29yZTpDaUFkckV4dGFkcj0iIgogICAgSXB0YzR4bXBDb3JlOkNpQWRyQ2l0eT0iIgogICAgSXB0YzR4bXBDb3JlOkNpQWRyUmVnaW9uPSIiCiAgICBJcHRjNHhtcENvcmU6Q2lBZHJQY29kZT0iIgogICAgSXB0YzR4bXBDb3JlOkNpQWRyQ3RyeT0iIgogICAgSXB0YzR4bXBDb3JlOkNpVGVsV29yaz0iIgogICAgSXB0YzR4bXBDb3JlOkNpRW1haWxXb3JrPSIiCiAgICBJcHRjNHhtcENvcmU6Q2lVcmxXb3JrPSIiLz4KICA8L3JkZjpEZXNjcmlwdGlvbj4KIDwvcmRmOlJERj4KPC94OnhtcG1ldGE+CiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgCiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAKICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIAogICAgICAgICAgICAgICAgICAgICAgICAgICAKPD94cGFja2V0IGVuZD0idyI/Pv/uAA5BZG9iZQBkwAAAAAH/2wCEAAEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQECAgICAgICAgICAgMDAwMDAwMDAwMBAQEBAQEBAgEBAgICAQICAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDA//AABEIABIAEgMBEQACEQEDEQH/xACZAAACAwAAAAAAAAAAAAAAAAAHCQQFCAEAAgMBAAAAAAAAAAAAAAAABwgEBQYJEAABAwMBAwgHCQAAAAAAAAAFAwQGAQIHCAA2NxFhEhMzFGU4MVFxoTRnCVRkFSU1VRYXWBEAAQIDBQQHBAsAAAAAAAAAAgEDEQQFADESBgchMhMzYVJTY6M0NkFRIgiBsWKTFFQVJTU3Cf/aAAwDAQACEQMRAD8AoNamZtaWDM4yCJuc0SdMTkxygahA/HbNiNEqQFcmqJDB40LePCp6Py8e/t7g9Ubq0XIOEqrUqqm5tstiat5x1JyZmNxmXn226LPM4pbC2MQUVRCHahkioqoirFFOMU91tT8qeiOiut+Rmpw6S47mmgzv7nxXDwPMOiZAuIXGQgqCRJsVGsECSCxWGXynq1jRh3E5rm7MQ+XxsioNmARWRhARIc9HtfyyEFBrKx1+FHQRF6ki9Wuu7y7Ws6Lyt9elSjFafyNcndOabm/MkwUzO8N599kAVs3Qwq02wp4xRs2XQ4hGgohRITFYJFCtZZvLVF1urunOR5dmXojc2zKyk0Tgutsqhi87NCCgauA+y4jQgpqo4RJshxbGpf1frv8A9DYx4efxvcAfxM/ft3O1++/BeFbS+DXO1Yvjct3Vu8Tw7VH4vKP5acu6w/eX+D4ts+axtQDfSBrY0U6nCOKo7lsNFgORQhCNyNqmpfSqRoA8qVhr5z0mQvIceHlXDsU5VsVtQVpy3W221qqmA9f3f02eodcJkXmmXHxVCT4dqNqkFuE7yBVjtSMFt0J/z4oI58oWoOnTdQcp9RnpGQeaVsoEfCdfExMIoTkuqm2LwjBcK7V9imjVv9RiF6zhYrEkOwSLiMaN6h8aF4zlS4s3vlUzCJS9iOtVNxiyJMHIk2WTM3UeNriTu9uu3vtrcpTkv2L+mdBCeyW3nZiccWUnpJ0RYIFHCivKCKq471wRT4Eji2Kt6pvr1mWboGp85pNU6YwFWo1WbR2abdB1HDbYxEI4W4KKK7CPEWCBtRF2Jvvr+en6p1/p9/s59ttH67BaHT7LLP8AqneVF5uRxAh28+9nbO+EHzF9fg/fdhhrB6Bm/Ibzfm+Vvpu951eiNmV+Uf8Avmj+odyY/hfOcg7+47X6LBDCnmbwH5ceG8P4ZcP+GZLd/wCfH2XwXrdiJSfTcndujyPK7icv7HZ9NgLmL1bU+bznPN+f5p8/ve26LOL2k2p7f//Z';
var IMGmarchRaidReset = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAIAAADZrBkAAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjVDNUIwQUFCNjIwRjExRTBBMENEQjUxMEExRDdGNzM2IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjVDNUIwQUFDNjIwRjExRTBBMENEQjUxMEExRDdGNzM2Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6NUM1QjBBQTk2MjBGMTFFMEEwQ0RCNTEwQTFEN0Y3MzYiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6NUM1QjBBQUE2MjBGMTFFMEEwQ0RCNTEwQTFEN0Y3MzYiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5fVjFHAAADdElEQVR42hyTzW8bRRTA38zs2OsvXBMnzRdSUQJtaUQItGmlAqrUE1J7ocChalUJqEqRiihqUcUFCfXAP4CEOCBxgwO9gAoUBRVQWiUYYjvNh5U4TvwR26k/E693Pbs7w9uuVqs3Wv3e+828eeT7m/1xveZKxSgZCAPjRLoALlCmJBB48lBQhJBCUxbkkQPaclmMUmT630pOXX+M5E4HqJKMS2Ag/YRyYEQiRClUOxL5kxfuPHtxc8hXpLgolIqNndr0zV0kSy3CmFeEOqCktMHPQVY6Stgwea0SjQR7wvL+Kkb0h2eWVlY3s5vTN5pIFnZA41IJJXtE94vtGggBEx+WLUtU6q3tHw41NB8dDimlIJp8M7WYzGTWjt1oI7lc51pQaUSV6sSmcORq0e6KUrHSuPNiE9gLgR6VRA3HgRAYzV5KJObTycVj1+thaa/v0IKp2bY8fHXLMMxsNmv+dnzXIodjjsLdOi4IWw3EFGdwqHptfm72n0Ry6qMGx4N0nLHLOaNtLj9aUbOnhYTnhqTogW2B5jhEgXIc4EGVN3wvG7fuP7glbGvygw1HuM1GezGdRpF8j431OaYBNAASTxclJfOa89XdvtJsDINT6st7Mz8n5lLx2NPZjTVk0rY/lx35caZvj4FjYVOB9iRgR+qct032IN1I5gNInnvnXG4zf/fezCtTLyWjp3qCFOer9aKtsJ8MXA0lNUBdv2O/f7axvuZb2AqEpz87GXym1f0rP7+qBwITz1++/d2fV86rfVGLGGBxIAw0q+sdo3BBCyusM7jP+frzLxbOJCKtPzjAr0Y19cvvvn5U6PoABF4EfHvA3n7VcxWSrmf1cpunl9R/5W5rd/Xgfj9m+fvfVKZih7qiGR4ZDnU0Ao4NrgQNE0hFikWPKdbocrt5+0Jw/6D57TfmSNf+5GNMrlKZp1Y3Wj/RwbNjFT/3pNjpE1pt22PqrdBSu3HltUB8yDIFOz7tjp8glS4PczkYF66rGxVYsaLjMaPpcg3RA7tHt9bTc6r63lF/qF/sGQwnoGFylNdBNU3ONTl5cA8gsl3WHe31nLPAwm6ELuRmCubFN/RgXHRMZivaw0sHIF2CsSPxS/ZMNj5iPrwPE4Xq41Egn74bHnC9WaprBH1czxzUkwEloJQkOG8Y4NpVZCxmpjIRrPy/AAMAdwvi78Ck/woAAAAASUVORK5CYII%3D';
var IMGmarchRaidStoppedDesat = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABIAAAASCAIAAADZrBkAAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyBpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBXaW5kb3dzIiB4bXBNTTpJbnN0YW5jZUlEPSJ4bXAuaWlkOjg1OTc1RDUyNjIwRjExRTBBMURFRDA4N0VGRTkxQjQ5IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOjg1OTc1RDUzNjIwRjExRTBBMURFRDA4N0VGRTkxQjQ5Ij4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6ODU5NzVENTA2MjBGMTFFMEExREVEMDg3RUZFOTFCNDkiIHN0UmVmOmRvY3VtZW50SUQ9InhtcC5kaWQ6ODU5NzVENTE2MjBGMTFFMEExREVEMDg3RUZFOTFCNDkiLz4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz7D6+QqAAACSUlEQVR42myTu2tqQRCH1eMriBAxqCSIYiIYMQliY0iwtBfsLW1sjKVNOstb3f/A0sJCgthqo40pLCRpIia+EFHEiK94v+OCEblb7JnZnW/mN7McZSKRUKvVCoVivV7bbDaVSvWzWxiKg4X7+fn568L82S2Mfagw9i5Xg8FAq9X+3S2M35SQ3IkgwVBftVu9Xk8E/FZDTzKZPCSFQhgBHzEEL5dLlcViEST7nmy320IzNvshM5vN5BGQFZKjVColRBKk0+kYwGg0ItcRY7fbZTnb7Xa1Wp2enpI+k8k0m01B0vcRs1gsLi4uCN5sNsp0Oi2aQbHRaKRCJBIJhUL77rlFCB2en5+jQryQ9Pj4yOfk5IQjgr6+vur1Ovm8Xq/Anp6eEOzz+fR6/WQykSQJgWpKY43H4+Fw+PHx4XQ6CY1Go61Wy+FwYNPMfD4nF/vV1RU1wOSR4OMYDIbr62vinp+f2VGVy+VEtWq1SlJ4FFIGRK6GQ6MajYZBlUqlWq0Wj8exuep0OtlsFv3v7+83NzeECeXS7e0ttFKp/P7+hvF4PK+vr41GAwYV+Xz+7e2NqTKCl5eXy8tLSOJlDK3MAOb+/p5SvKbf70ck57RntVrJSIVgMFgoFGhenqTL5UIDTDgcpg52IBBgSCaTidGhgp5xu90uz3N3d1csFs1ms8QYYrEYj1apVEhDcWxksKOTE3Z4+me2ALxhv9+XMfoul8tEuN1uoje7JQYtDFmVJHE1nU7Pzs54LeXDw8Ph78g8Ff9bR3/tPwEGAGlTpvDqhSebAAAAAElFTkSuQmCC';
var IMGmarchAttacking = 'data:image/jpeg;base64,/9j/4AAQSkZJRgABAgAAZABkAAD/7AARRHVja3kAAQAEAAAAZAAA/+4ADkFkb2JlAGTAAAAAAf/bAIQAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQICAgICAgICAgICAwMDAwMDAwMDAwEBAQEBAQECAQECAgIBAgIDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMD/8AAEQgAEgASAwERAAIRAQMRAf/EAJgAAAIDAAAAAAAAAAAAAAAAAAYHAAgJAQABBQEAAAAAAAAAAAAAAAAFAQYHCAkKEAAABQIDBQQLAAAAAAAAAAABAgQFBwMGABI2ETFWNwghIzRlQYETM2QVNRYXZxgRAAIAAgcDCAUNAAAAAAAAAAECAwQAETESBQYHQSIyIWFiEzM0NQhRcVRkNkJScqIjUxQVZRZWFxj/2gAMAwEAAhEDEQA/AMPs5ANkE5APlE+QTlA2QogBqmUR25CiPabcGMu6mqvVGquqzb6PXzU6ny6BrhYB6iaqxXULTV6BtNgpo/C0Wxl0yRzb/Vd1TW033jcd1ovmvSz0xPqelWGQ6wlE7dM0ssyoO4ihtq7K7M2qSAW4KhSqq5Rbi0SLrEZIybg+SsHGoWoAA5K5WWYAszEbrFDa7fJU8ijebZTPHW/WPOetGcX8vHl7djGvXcWxVCRCloYNUSGsVeEKQREZTfdh1UPevMlSPz1e3DMTc9v6D5b2zqfhD6Vy98t8F8LgN/c/6TJ+JfiLB2X3XDxdKzmo/P8AH0T+XY38L/lfaP3j2zj+pxdKiJ+9LviyTI5eG+OW+/VjE+2pIiyJZUTOyGOr3t2ijWKWh5u5nqCiVqraXtTtVBurkA1B4OoKQSKkJVJcNnIT4DhEX9yZhErFlIERoaC6Ir9arIWhbjDlDojRIbn7O7eYBiqsH1vm8R1ezmuVNCIsVs8SklHlsQxSDMNDlZSTik9ZKsQGR5h3XcKjrYZG6ygllYUhS/IM93o/SzKT+vuW9rqVnruTitpLUlBPQpiAJmhjbF6Fsrs9vNRO4SpgTUSlJT2gBgynMJz3mzF824285icQGEvJChqylISGxRcd0LEVFmDMTtqNaicPLhpvlrTnTSUksDwibwrEZgFpsTghmdjRlYq0SO8MkFWILQgCAqEVKtlA3DLpPlBVl1FdurPc2XrvU+kGzwn6+4Z8p9ngxP8Ahsl3Pimu6dh3l+L3z273i9StPlu7HNPgHxHG8M+iveen8zmroVDv9Pr34DUsubdtJhaJT//Z';
var IMGmarchTransporting = 'data:image/jpeg;base64,/9j/4AAQSkZJRgABAgAAZABkAAD/7AARRHVja3kAAQAEAAAAZAAA/+4ADkFkb2JlAGTAAAAAAf/bAIQAAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQEBAQICAgICAgICAgICAwMDAwMDAwMDAwEBAQEBAQECAQECAgIBAgIDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMD/8AAEQgAEgASAwERAAIRAQMRAf/EAHwAAAMBAAAAAAAAAAAAAAAAAAAHCgUBAAIDAQAAAAAAAAAAAAAAAAAHBggJBBAAAAYBAwMFAQAAAAAAAAAAAgMEBQYHAQAICRITk5HhklMWFBEAAgECBAQFBAMAAAAAAAAAAQIDEQQAEgUGISITBzFSkpMWQVGhI5EyCP/aAAwDAQACEQMRAD8A3eSXmv3l1Bu7t7ZttYqmNKVFfM0KPFPEMMkNo2MbmU1/Cp8sfWmPFKwRZpRNRkwLbxFrWp3LH2+7kYBGhAXm92l7PaTvbZ9lvC9nuJmujMRApCIBFPJDRmCs7V6eaqtHStONKmzO6t0SaFrM2jCNU6QTnPMauivUAkAUzUoQ1aV+tAqa15V+XGjo9BJrf0crW1a8sPKZzCus6DF1rNGRMSqWFqox/TXDdB2eOSNWjJwpLJcWNzHkjJYysmZCeAMq3P2W2rFHmtxd2M5DKBE7SoHBI51nzP8ASoyyKCDwxyaXua9nah6UqChOblYqRWqlOH8qSD44rb/XFfYH1xqjXymPzfnDm+PP5TiFnkTYd5FG8j19bwaqoN+nUEnEYgbE1S7EWe5vFstSCqKvjz6qciYU6FuseOQSCGnJwicMpgCwDqCEYDChit1/krvb22XtVpG1rzXNNt92wG7WS2uJlgkrJe3EsYTqlBKWidG/Uz0qQaMrALnvR273Wu8L3VrfTruXRJOiVliQyLRbeJGzZMxSjqw5wtaVHAglmqNw24XeBSdZQaB1U9OihwjcVOs9fEIu9KWjEoOABQ2suHE450KiLI3lEFDMOVuaYYz8CwPpKBkI2l3H7rbQ231INzapp+nxlpHpLNGskqq5P6oixkkAFDSNHZieH2Mb2lsrWtUVJdKtLm5fKigojFUJUf3cAIvGo5yoA8cVM/uR/bn5e+sQ/mTef84vn8WXy4SXn0nfcwzfTg8+j3MHpwefR7mD04//2Q%3D%3D';
var IMGmarchScouting = 'data:image/jpeg;base64,/9j/4AAQSkZJRgABAgAAZABkAAD/7AARRHVja3kAAQAEAAAAUAAA/+4ADkFkb2JlAGTAAAAAAf/bAIQAAgICAgICAgICAgMCAgIDBAMCAgMEBQQEBAQEBQYFBQUFBQUGBgcHCAcHBgkJCgoJCQwMDAwMDAwMDAwMDAwMDAEDAwMFBAUJBgYJDQsJCw0PDg4ODg8PDAwMDAwPDwwMDAwMDA8MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwM/8AAEQgAEgASAwERAAIRAQMRAf/EAJMAAAMBAQAAAAAAAAAAAAAAAAQFCAcJAQACAgMAAAAAAAAAAAAAAAACBQQGAAEHEAABAgMEBQURAAAAAAAAAAABAgMEBQYAETQHITESMjPwYUIUCEHBUmKCohNTY3ODVBVVFlaWEQABAgMFBgQHAAAAAAAAAAABAgMAEQQhMVESBfBBYXGBBpGhseHBIjJCghMU/9oADAMBAAIRAxEAPwCooGW52mUNVJmF2gZPR6n2y+7KKdpyDMvhB4CouauOOuhOgFRCL+a3L0u0hIQ2yVHiozPRMh6x0lymqkZlLcSkDgJDqZn0hrIJ5mBHoKqcz5pSr1BG22o0+wta03Ai4wc1Sm8gjo3aRotj7IYkpTKkg4mzzEFTFNQcgdQoi+VpE8bYG/L8xv2leK6vhobGes3OH7PzrRv2DDjDL+YeUoUV9kBGVfBVy1PYlqtzU0CiDp9Ma85BGSN+jcYdbgw2HWwHEulRWUbYUEnaIGzZ3oOusaefnanfMi+3nFQ7s7df1tkobfyKCkqSCDlCkkKE5XiYtnCPIrs/qyGy1rajIp6IrlU+gQiUxr8WtcRAOpCdhbbiYdsNlgNoS0EK7h0hNybO63uqidbDQbUU780t8JNE7N1JiqXUvvNhZCUgIBAATM/cZkme/dZGAfUc4/v0FiuocNWP+b3t7xNXPasSpsDj+OHvF+zVGI98Y6oMb3R8rvWTN3wa4FmuEiPdK4evVbTkHT/UOcR9/O47l8W0jx2+ETvC/brH/9k%3D';

// VIPS AVATARES
// var imagen = "data:image/png;base64,";

// cab naranja (sin usar)
var IMGvazquez4 = "data:image/png;base64,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";

// robocop (sin usar)
var IMGvazquez2 = "data:image/png;base64,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";

// mascara terror
var IMGmaqui = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAbCAYAAACN1PRVAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAAAd0SU1FB9MHAhINAOpb2ekAAATHSURBVEhLrZZbTBRnFMeXYvStbZqKctmd2Qu7iyyw9wsskKIgAgVlwbpQkMsqCqgUNaTWqMQ2mhItCQEfVJBIKBKtSbVNH8T2oQpVY7a0SYuRli4XKzS4ptYVkf57ZhDayFaJwyQnmZnMnN93bv/vC5CqLXWBgYG6qakp0dwLs698voeiJYuX0HOA6PHkE9HiRYtEAYGv0FPAv7/95/ZZX8QQiWRqa48yJgEKTewck6+wQaq2Qq4wY/PWapxsbUPDsWZkZBYgKEyLYMYEqSoOMpWdN3lEnF8/nG9ldAJEFNkl7kEWYZljUpUZoWwM0lMdGB70YGDgFjweD9zuH3CiuR25zlKwChOZFWw4LUxl9euH862IjH0+jFWZwCh0OHemE5M+LwZ/u42+vj4eCDyB+/sbMFhWQSK3CIeFyXVIX1uAP+6O4U/vKMZGh9Df388DJ3z3MTQ8gJS09QiTUnRCIwtldajZc5AcP8CdoQEMk3kGf8VPP/+ILy5+iepdH0BrXqjIWD1q3j8A3wMvPL/cgvvmdQxS7UZGhlH/SRPEjAZMuAkShYU3Vjm37jO98MKaiaV6vFtYhtHfh/H5+c9wrecavvn6W+Q5i3DkSCOSUrKwnImmmpl548D+Gm1eDSIJNyAuMR297l5kZxfg4IdH8V13DyRsNAzWZFTu2ovc/DLEJ2ZBHRnHd+ZLw7gGiUvMQO9NN95KehsORz7ujAxgY0k5Xn1TSWkzY916F+obTqCgqJxa3/jyMDHB9tceRuvpdoRIIpBfWIL73jFcoXQmJGfjtaAIvL5UjdwNxTh2vBlKjYVEwH/dnlszVm2GRpuIzs5zMMauxBvLVGht64DXew8XLl7A8VMt2Li5HFZ7Kqp370V9YxMpCCmKH3F4Yc24nxS0yra2djQ0NOHo0SaMj4+jq+sy9u3bj3KSr5aW07h0uQvnaQyKN1XSrAmoWahUi2LXDkw+8pFiAPdosItdFdhSsQOtLc1Ym5WDzOxCpGUVQhlpF9b6DMkVqzTCSTXp+PQMJh77aKhv4y4pCf5+hEOHPoZEpsMysW5aRYTMGSfEjMKApcsjqH52XL/Ri4mHf6H7ajd6rvbgVGsH1FFxYEgbxTJuzgQMNQdjlSTGFF2QOBI7a2px9uxXCKNouHdrKH3p64p40PRQLwCMA4rlephsyWhsOkmzZEYwq+WhrvI9MNoyCEhpVC0QjAfS3ra1YjecBWUIIVio1IDUzEI4nFsIbBReMw4yawojDKaVOFzXAJXGThurmWYwDU5SD4mcgwnYPGdqNgOTkTxJpDHII3HOynFRdAboLKuRV7KNVJ9blCAYtwPTlk/NMA3kus6IFdok5Jdsp9RpCZaK/NJtkBJIGIxzwO/AT7sy3EyNYqGZMmNTZQ1UUXbEmFMItp2+474REBlLBxhWaaMu4xwZaeZooyRYCGNASdl7SFrtQLRhFYrpXkz1ZITApGouqtjZWZuBBUv0yNlQSse7KmiiEuAq24kQuQGSeShI1/8e5WilzNM0ykiUGS6NNMDBjB46QzJqP6ojUBVy3nEhWKaHeB6wK8roeP5c96zJ1BRVeCxFZ6NB5iK0URqtfCpDKZWZjlJUVB2g2iUgjFMQ+s6fH+6dMioe/wBK2d8nJK2kTgAAAABJRU5ErkJggg==";

// toro espana (sin usar)
var IMGvazquez4 = "data:image/png;base64,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";

// hellboy
var IMGvazquez = "data:image/png;base64,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";

// hellboy peque
var IMGnacho = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAAewAAAHsABES62twAAAAd0SU1FB9wCCgwDCn63hkkAAAnRSURBVEhLfZYLVI3pGse/7lGSIilEJSpkwqCQMy6VELnfkq4oSnSju93ustXWBQcVEUcUyiXxjcsxs5gYmTExy7Uz7sMxx3EOMxj/83+/k1nWsLTWb73727vv/b/P8z43ndCQEI15hw6fXb16Vbpy5Yr068uXkr6+vtTJykoyMWkjPX36L+nfz55JT54+lV6+eCF97M/UzEzKWBolHTl0SHrw5nfJ1MREesZ3/vn4saSjpyc5ODhI9vb20qtXryRzc3Opd+/ekkThc1kqFRYEBqJP797o3LkzOnbsCBcXF/Tt2xdOvXrBmt+1MzODM5+nBARgRUwM1qSlIistDUnxcdi6eRP2cR1iZ4ce9vbKe7a2tjBv3x5duY4YMQJhYWEICQlBONe1Gg2kRRERshCeP38+ejk6KgJt2rRBt27d0NHSEp06dcI4b2+Ubt6M07UHcFCTh/KgBSgZ74siH2/sCA3FntjlSHByQsqiRRjr64suXbsq+7Rr1w60FKO8vBDI/aMiIxG5ZAmEnrQ0KkpW8cOkSZMUMWNjYxgYGFC0I2x42jX87YJ8HDUJ8Vjdpw9CdXURJEkIJqFkEYkky4yMUfSXUdi+PAZTxo6Bkakp6FY48UDjxo1FID2amJiI5NWrkZ+fDyk0NFReuTIOHh4esKSFQpT3CCsrK1RWVuLsnj1QeQxDkI4OFvD7cLJEiPE5hsTxcwJJ1TdAqklbqLtYI6dfX3zRsyd49xg+ciSmTJmC4OBg5ObmQkM3FxYWQkqIj5fz166Fm5sbGGQwosU6OhJUWVloomuj6YUFFAgjS0g0EaKLW59XcE0hanoi18gIKl5TOg+RyPuNmOCHqvXFCJo2DZFRUdi4YQPWrVsHrVYLqfFLWW5sqMfYMWNgY2ODDnTPwEGD0PzNOWQMGaJYGcFNheBKIoSWkahWYfE5lWjJBlJIVCRZXx8bGVTayf6Y7ueHVcmrUV5WqrhZcfX38nH5YEY64oMXwrV/f1hb01V0ybHCdViop6e4djk3SiIJrSRzFd8F6+ognGsB2UEqSQUpJpmGhsig1YtcXeDPTMiiB0u3bEZ2djbW0sPS4ZpqeR9Pk8WACOA9W3frisN1tSiZGqAEkLBICKXR6lVc44kPsSOWFLbmKq6hntSSGrKLlPD/88zaIYbC02bMUO62uLgYmZlrKEyL3dzd5d2b/oqy8DBEO/XCNEcHVKlVSGZqRVFYWKriJtkkjvjyOaD1MOu5FhFxoJ3k7+QYOUyqSbmJCTY62CN63jxoCgpobQ4tV0OtzhYBLMkpTIEzGWko9h6HJBaMJBdnxDN/V1NIiOZzk2wioriWh/mRXCNXyT/IHX5/kTSTJvINOU0aGKz7afEm5m4mXaxWq1FQkI85s2dTWFdHjl4QiNMsEqcmTkDB+PFIZXAl8aRZdFURhUu5yRZykiKHSJF5e2h5OG1fF+QxXxvEAfi74Ba50XqIxrZtcWbI5ziSkoSszAzkF2jp6kxMnToVkq6hoRyzMAjnZ81C0/x5OLg0EuvpGvWI4Vjb1RalzGvhNrF5jqkJNLOm4sS+3bh2uREtLc2o3VuJLF7PD/z9Pv9PWC8Q4l8xsssHuKFUnYVsCqtpdXR0tFKepc7W1nIsS9m59BQ0xsegYVU8tvBZpEEurdKIe+KmyXRbaa4K9y6cwesnPwFvXwB4id+5bl0Rg6/5Pw8odrdV+GuuaRRe1qc3NqakKNGcmpqKhIQEpYpJ7u4D5Sgm9ykm+tmkWBzjJpsYaEUzpmPNoIGIZV5Hc9O44cNwSz6MZ9cu4/kvP+MNZd+SN7++wL6cNTjFK3nI/7vH4vMT18OknIXkAmtDta8Pg0oFFe9YpFUMm4zk6+srz6GLy1jGTqsycGrpElSGBGM9hTOHDcNSlk6RVis8P8e1fX/D42vNqGOXObetAq9e/BePmi5g+5LFuEhhYfEdrvU21qiY7I0NX4zAGQbpHNZ8P//Jf+RwIq2WWEflGcyz+UFBKKArqhjh1RER2MgOtMZrJBK6d0cUi0EYN5O3lePh+VNoyk7Fg3Mn8fzuVVzavxu72AbvCFez4NSyhapHj8RVuRSnosOQbtcNVhR37ddPaYsistOoI40ePVr2ZkR7jfKC38RJCJ4fiFVhoagpKUZhwBSoundDGu85lhtnuw3AV5o03Dm3H48uHcCt+m3Yu3AOThro4x5/bxbxwA5W4++H73ZpURXgD88+zmjP5iN69DwGrWiJxUVsEo6OjrJTLyc42DugPxuFh6cHPNlRjh6sQ9WKWGiYOlsY2VncOJPk23WnGydid8QC7Jjggz0cGpr4/SVSw4603dcbJ0o3Y0twIEJpZQ8HR8Vit/79MHPmTORkq1FWWgqpbdu2sglPKhCTh2gUYgBYtmwZGqv3Io+1ezc33cv7q+BaLPKYlEm6Sk5fJtdbi0Yl90hj9Vvp0BOxzO8xTEdrWxtlGhk4cKBicSG7k2gWko6Ojkygw6DQp2WGvE893pUx21s+T7d3UTh26umjjgI72xhD5u+Nwq3kJhERfJeIanZeHJBsJzt09RBi0QG9WAldXV3h4+OjpNLWsjKUFBX9v2SKxv8O5RBEPFt2MMeOfA2OsGFUiSZhaUFX+uAuo/7e0KFooWdu87CibAqukwNENIxGEm7TBUM9PTF48GDMYoHKy8mBJi8PfhMmfCj8/iHE6LOLaVbNFDvBEWY/3RffowdK41biUm0tHhxvwP0dFbjLrnOfPbbarb9yDadJGr02hJPIAHd3cKrE3LlzIUYsL85fYnj8wOL3hcVLNSx1WgqWU/Bbih9lXquHe0LL0rdnfQmO1lTj2+Yf8OS33/Bzyy3cTk9FtoMDjCjuwv7eg5OniB2OWAhgXxbPzs7OnxbuQFdWavNxiAGSx41y+XyWwfY9o/c0h8MGdp16jqtn2VgustrdvXFdqWbXW24jgxXKi9nBGV2ZNsPDw5UxV4xYzkw5Jbjet/LPn9NTkiGPGY1yCi+n+5IZXDX8fKQ1kDZxFcPeUOLBTtRQV4dfHj3E29evcPvmDSzmyCtG3Qm8VzFQ2jJrLC0sPm2xOMREf38ciwhXIjWTAZZCC0Sf9mTwCHf++aA9WOk2r9Pi5uXv8PL5c7z+z3OkcTTu3tUOpqbtlPHZkEPhJ+9YbGrLO9nFMlpFazUUE/PURgqLmUvvI8Linc4sGIW5Ofjx0iXUV2xD3uLpmO1hC1tzPeHid1kjffkpVxuIfI5cjH28pxJuuo0vHiJ1ZHBr2n3sfQu6syAnG5qkRMwdYoHM6RZwtVEsfYfEVvqhy97/bvGcOajnfC0qmBC9TFqImLkMP/GuqIJzx49FwGedkORvCSsz/T+E/wftFIHIteGn2wAAAABJRU5ErkJggg==";

// rubia
var IMGyohana = "data:image/png;base64,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";

// amelie (sinusar)
var IMGanna1 = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAABGdBTUEAALGPC/xhBQAAAAlwSFlzAAALEQAACxEBf2RfkQAAAAd0SU1FB9wCChAkFTxGY80AAAr2SURBVEhLfZcJWJV19sffe9/3rlxAwETRxjSnsdF0/LtlKZYO2V9FXNHcxqV/uTyGmpbhAqm5DbgBgiCCCq6IGuJ6LUFwSS1Fi1RUUDFICkFZXOAz57028zj/pxme5/ACv/d3vud8z/ecczEMCO/zd8Xbs8MlN6vy9HaNci/llFJXUqnU1T5R6uvrFKX+sfKfvoxyoOqHBv2bUamTJ2ZNwaQpJrtVqXtUL9c1xebuqag+FqW+iV1xC2itPHxNU5TXlr9zusO2UTTf/j6+E3ti8/XBZvPEYrShGi2Ix/9oAoq4wGwQLKMRk9mEarOhebrj1qwJni1aYW3+CvaWf0Zt9TLGbq/hET4CR9ZUFOva3k7H9uH4LhuEpZU3dosFq2rDophRDab/CmwQQN00o24qmqqianLPasXq7YXvK23xfLUdbm3a4NbhNaxdO2KbFIT7ng9Q3Jf9r7Nx/Gg8+7XBYlGwqJpkqmEQR4pu/yVjYRfhGqOYDmxUDK67qiqZW6x4+L6EtXFz1CaN8e3SmcYBfbGOHYhb8jiUlz98x+nTvz2aQ8Om02UyYdQEUJzp2fx/YIPBIH9/Zvo7LmAJQDXIXQE3C0sm1SxJ2LBbvTBbPDDKz7ZGfnh19sc9OAi3yGAU+0u+TtWmYZdoNblsUI3iRJyJWSTb54FcYM8z8Ftguqb0epvk3KQI5ZK1SSi3GE1YpWQWoxWz2YHq1xJbwNs0CBskbFrtTpPU1CqRqkKz7ljU6gI2iyOjsPC8/Vsgv73rAnWZDqwJsLAm2eu/WwwaFgHVgTXvxtg6tsd9Sm8Us8nhNKpWyUxzvayDuigW+lwgAqyz8MykhvI0/tPkTHVlaRQAoVmeZgle00wujajGZ4FrNgG1eWD2aSICbonbyNdF1ZrJadLFJNG5qNRBn6+tLiBpTVc9f6fmz6gXQeldIMAuhevqFjOKyEwmM5rZjNnLG8ef2mFp3hqPoA7iU9OcujB+T7167XTh6Nm7eTpo3fpVWrzYnGaN/WjZsgUt/9gcH19PzNZnbeft6SlAz8r1vDX0bcDbQX3w7fA/qF5NsfT5s/g0mZwGie5320YXmYAaJeMuXTvw0dT3mTF1ArOnTyA8bDIrloewcvksoiLnsS4ynEPpW9i6MYqQqf9Hvz7v0qldW4IG9GFfRgrT507B5OOBu/sLNAjqKOzZzE7FIlTrdZN6/CuA3yg3mAw09vNi2rSxzJfLixZM4e9Lp7EuZgZpWxdxfN86vs9No/THr7l/M5dHpReou3+NqpJr/HIznwdlRTyuLiYrdy+ZB/cwvF8QjsD2krGH3SmFxiC9qwPr9LrAXQKTmgvwG93bEbFiFosXTOaTkDGMH9WXyRMHsDB0IntT13Ll3GHuXT9JeWEOFbdzqf1ZwCuuQ2UxTyvu8rjiNlAh9pRRQwfjNkoyNvt6ORU3EYbN4hKEKiLTJ5ALVFTsaODOjOljSIyaRfSSyYROG8kHIwbyyQfjGT2sPz17dmHqpLFkH91F5b08qsouUvvrFR6V3+Sx2JOKYupq7nGt4DwnvzrIWwMD8FrYD6VBixedkjVmu/2Z9PWxp7eRUC9rRwTVloS1n7N/cyiZm2ZwYMs8fsjaTsUPJ7h64TiJm9YRGNiLoQP92Z0SSUXxOR7/cpW68ls8rb1DVcUdjh3LIGLNEnZu3cSrg3vglfQeird/K6eptTfuf2iEZrXJVrO62kAxS8Yiqu7dXmfHxoVk7/mcU3u+4ER6BFui5zLxvf4EvN2Lj2d9TPq2eGKXziB13WwuZSfzpCRPKC7hQl4OYyeOZPa8z8g6nUPChhiajeuOY/dolIaTuzg9J3bEL/h1LH/0xSg9Z5V1aHYNejOdurQlNSmU7C8Xcz5zHcfTohg7vDce3j447A1ZOm8WN07vY0dkCFl7l8h5ONUF2Tz86QaJ0csIHtqXr44chcf1JKUm0mzq27Kd3kdpETvG2SLpb3gs+Cs+U7pj79BE9rENN8UNh9WHHgE9WLLsQ47uW8yZ/ZHk7osgfUs466MXsiVuKT+eSqXkYhpn9kaSvHYaSSsnUZbv5NH9W/x0+Til13KpuX1NhFbN1h1bcPi/SMPYUSiOtYOd9g1DUFb9Fffo/jRbNpCGgzpjdvfEbvCg3ZudmDV3LBm7heZ9y/nuSCT5ubFcPZfG3as5lNw8wa83vuLO+XSO7FpGaux0ii4f4FFdKfWVt6i6n89jCYLaR+xOT6VNtyb8IfQtKWXMIKe6ORjjxsEY4oOwJr9Hg5iR2Hq/4ppYikmhbYemLF80jlMHV5OfFc3t8xv5JT+DysKzlBWe4WFRDpV5mXybsZLjKaHc+W4HT55c52lVCVXVRdQ+vEN1XRVxR5IZvaAf3aOCZFYnj3CqGeMxbh2NJSEYQ2IwavIw2qwcxlvDujJkyFsyiQaTHPUx549GcfVEHKV5O6m+8TVPi7/lSel5HhWf4tKhjcSFTWBXxBQeXjlKfbW0U0WRiOwGVP3EhfIC3kwJ4eWY/nTSa2xPec9pypyAtn0MjoThaAlDMG4YQA/5VBKT/BnpSXM4kBpGjk7z0ZXcPJNI2Q9fUl10mvqSS/BrHnknUvhoVC8C/VuR+MUUqm5+Q23Nz9SUX+OJtNYv1YVMyYjAGDtQcIbhJViKI0FqvGs0bpuGY08YhLoxCG19XwatnyBZzmTHqlHsi5tM1o5QctLnk58dRen3X/JAKH56+yJVBSc4m7ma+LARxIQO4uSOhdQUnaSy5i41929SeO8ynx6KovGKoRjWC8UbAzFvGCwzIj7QaUwdgjW2HxYxR9wA2sUOY17yVFLWfMCmZaPZvvp9V+1ydoZz46RknL+fbw6t58DWCL79agN5uTFcOLaCO2fjKLucJjU/R73U9cG9QhZmxeG1XMBWDcMY2Q91dU9UYVRpGBvobJg6mBeShvCnzePomzSNeZvmsCEhhC2rxpG6ajxbV4/jUNIMzu39gqJTSTy4dpDvDscRPj2Y0MDXOTtjLHdiwyi/sJ3KO7lUFRdQ/aCEyJPbaB49FMvq3mhr+mJY+g6WJQFYV/VHmTOil3NJ2BhWpS/mi52LiIifT1LMZ2yLnsm2mMnsWDeeTMk+I2ESX6fO4vsjKyk5v00CSOW7zDjSJgZyuMULnG3hy6VR/hRvWiRb6jTbftyDl96m8f2xrwnEsfgdjAt6YwwLQFvSB2Wk2er8m18jQgb2IHLRhyTFfsbO9XPJ3DCfjPWzSV8/SabRHHL3zOVYykyOp37CmbTPuXRAhJadwt3T2ynavYKC5TO5nbiAsou7Ka+6QsT2MHquDaBp7LtYV/TH9nlfLPN6Yf7kTbE3UHp5W53t3Qy8YFMICPgL8TFzyUhZzOHNYRzZLAEkzSJnz0IuHovgwtHlnN4bTmb8NPbHTqXgYDRleWmUFx+n7ucrPHl4m7qnZZTt3s9Z/0BODunKltn+TFzmT9OFsgrnd8L2cTfcQuQzV0gjx7HgRm74yEIwW1T69uzKntjFkuVSnLvDyd4lM/rgSvJz4ij4ZgOF3yZz/VQix7eFk5Uyj8Kz8VTeOkzNr/kyJEqpvXmds91Gct3YljJPPypfcufWED+iw9rz8ty2aLPfwPppT5QlnmpuaFMv/iL/71g0C+6yJN7t3IbUtZ/KpFrD5WNrXL1bmr9TFv1+an/6mkd3c6m7+w1V17KpLHBC2QWol759WEjuR5/yva0rFVo7yuyv8NjmBw3slPdsypqZnfGb2RHjnO78A+ngLutMYKaOAAAAAElFTkSuQmCC";

// guerrera
var IMGanna = "data:image/png;base64,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";

// marian dibujo animado arale (sin usar)
var IMGanna2 = "data:image/png;base64,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";

// guerrera2
var IMGmarian = "data:image/png;base64,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";

// bruja dibu
var IMGafrica = "data:image/png;base64,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";

// calamar
var IMGatena = "data:image/png;base64,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";

// perro jeringa
var IMGkrit = "data:image/png;base64,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";

// lord vader
var IMGvader = "data:image/png;base64,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";

// gato verde
var IMGarqmario = "data:image/png;base64,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";

// homer
var IMGcabreado = "data:image/png;base64,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";

// marley
var IMGivan = "data:image/png;base64,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";

// Shrek
var IMGshrek = "data:image/png;base64,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";

// Pumuky
var IMGpumuky = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAIAAAC0Ujn1AAAAB3RJTUUH3AMHAQYYN6thegAAAAlwSFlzAAAewQAAHsEBw2lUUwAAAARnQU1BAACxjwv8YQUAAAk3SURBVHjalVYJcBPnFX777706LRlLsiUf+AKMYzA2R0IMSThygGFCSGBMCBma5iKEqyRQIEBDjhI6pNCUXJRkShwSKEk4EkIglADmMMTEB/iUb0m2hGTJkvbQ7nadTtthOp22b3Zmd2d23//9733f9z9MPZAB/3uICDAFMASIBtYlhGIJqZnlcEThoCBQSECJf36L/ksudPtFEsDRgPCEiL+//SStDte5RiAu+T/9+v8ESwDLAEXGeQWTUEvdIKhGENDQPv4t8M3zzf96i5tAEoHwQyIKWD4knCHVKpFZwOTH40ZMwHHGBCj/aodkcFiMXqX60LWbg1J2cToZ6wOCgAQLoIBKgIoDpt1uW6hPHAxRVpccI3By+N49lVI7CwI+GIw60pNvdnhmPJJcUpb7xafni4rs453j/JK/JN0VS4haSsBkQLGhTvyjErenZuJ+P54qPPTV+9+wvdeJTkM2myojgjTRKChmUVzsoNRQ1eprlAtH319T7VbY1OKJdyWYVojfAhAACw9h1x60UNFtqSXJnupw9VwJ+a4Ey3DLCNXYTPLXPG6cpe1AFcmME3NE3cH5ugL3lxc6Az02YzISWd8tieUNRPIwRIWAFCB6CxgcpMRtqePhpKqG5u++rQmGQ2NsdiEmXAoKesY1SmWTFWqYTONKmALFKNJKjM0i7BATfVcCnjh56oQXtxt/uXBqY39lTq5RCvYzeuq2NtJmly3VBcn5cZwRBzDQm74LNBQRXBEPJllSkCxjmFZJBmNkBScBsxi4GpDqWtob6jsaOr2F6SPq3WcLijIJBoEqEqBQgAQwkyAxftG+c+W+u9ImFnTdMoWJJiyydt4S4cQVHHjcYMSjiqRGBU0YKG7QqKBQYkhJP1WbhejS3IJJC+fIDtP5Y3mefspqJCmawNTKbEASkLgs6Ddurs0XLLp2Ltdmj+qZU0L/SIzK6IkmEaiPkNMKRqUls5Ks9lyq1w1KrIxLOBIYFkV5HuQAiOEUXc6Ts1a/+eaHH0830Z0aUWRQNQWnNNTj8/VTM8XhF9nEWYfcmIrGPlHuJYRWvdg1NePOo79rWzzW+vXBUd8fii984AJSaUOanrKe4Xv2QWurSXWmpuX1iX1/OPPS9LKD75yPqhQaIjmmyWzY8OwJkS4fQZGWaUXHA/Wzn6mYWj5TdpqpMRnB4cYuIpw7dcIA7/361PGde3bpKAMWk9S45MrKUMwG2WZq9vdiNBsUQ80tvUufXKlLy9M0qmGGkIdfterdMMf/0F7V1HX91Z2vhJPUuWuW3vuLBUKBY87WlcaRLqcp+cjn+6zDaCLLHLyDxZ8qOT9adHrFabTT1OTOlbgOSphR+9lhr+/lNz+p3HoIUz+1AU4dORppviyOaMwLZ1LTP1om4qRjUjkPnBqoYjksGhDK7rnvauPFeNDn9fXgJzv3f3RssK5jliUt7ZZMy3ATG+Q4bkyEbDTFa7es1kVqmg68h4YKLWOz51dI/bEbGfI9aysISf749d9CoHfDC4sohhRk2P2nL682Jyi8lOVSLFZHD4PWVX40Ln+MNUrweipeksmSlE0kumk5W9WXsMzVqovBxN/1roLc6bXoDJhLb5tYtOvVNyY58z547rnaw5+HA35FgRdWrIcETJlYAn0BkznpbN2Py5Y9y0dilAQ+NZ65fAmNCKuAcFnVROT+9pTX3b1t1/NarTHAcDw9KxYVrtX/GOrqmFRQKnUFpqSmn9i929PSzBptnCHZmmTCJV6znnCfv9ndOm7yhMI7RmOyPMAA2AwJmtAZjVbWgCEqcKn63Td2xaL9P6PWGBIOy3o9RZJN7q4vz13qExLJgggtLe+sXw8Bd6Dj3IYV87754jWIBox68oO3d0wckUea8Tgrat4NkUDNnSlbpJpDpPcGoBJeOysyOL1GPuxnF6SZWCJB0mzOqJGPPftMSn5uXfPN69UXgz2DEApZzczSxQ/7b1SFPL0aCA3LgK+3s7cjqvJyjH91y9Y7lpSvO13pz0lSjCatq/5jp/0+D/rZApVEpCYwqCEX/f2tEcVjmVz6m8vXXjl1dn9DFbCsFOlG/K29e48MdvdKLV6FkX9ouSS1+DjRAA+UNjno0uJcanzKqhNnaukBJdQnNNbTtA4BawPGQAC/dlk5yXAZrowpxaOPHa28d3HFF63tEJMA15HmFL0lBRTVYLcoHIEwvK26NtjTRRLYnC3rlyx77tBnB4KBIHS26rWzBdF8PE6gBNp+silgKoqm6nRjoc3Tu7/yUE9bh8GQGD9nJhgzCHtZ4eQKneGu6w2Btb9/j0t3kPZhQFn9tR7GxA3Y8a2vrNTsf95TK5LwYffPmc0wdMJsrvfcZMkgIpxm6/iZ63Z8rxjHfHzwg69OnHRkFj6yYNGf//j2jLuLrTquraWbAigqHgcsTurNcRUFGjtlAUIcGrdhRUXFwnvHT4JA7D57ybaNm6+0/dQjRwJKWIn04HeOtbkbaH9okNAzhaWltNFhdYyUpNiSh6YVmpLqL1/JsyRNGp02a24Z0D6QjThrkgaZmu+reRY+/+H4lGlTfJ39T5eV35+bP3fp89XVJwlVenT1IsJyAduz+tHHF86LCz1JFgeyO4VYiDarA11SwBd9+qnn9z72q427Nu1rOw6QiCdIVj/2sdlzseZuowIT8nMunDvjNI+2xfj7TClqevLjdV/N0qWyxt61G8uA7MBaj+xwuuxUKgc4A7JOEXwItzY19S5YsCrGB44e/MSiM1lk3Y+nL+7YtHWmw2mmdZgn4LI5woMxXk5YuIhRZC/rlYr9O2vqTh/e9tYzL2Q7nBTgMQ0+T5mMoPBAYNp+ERle8+L6tz7cNWJMarO7D0uSX9+8PsetpPLUE6SN9nlNLJeuM/g7W2IgWxlj94APYxwVu19qbP/rub/s3PLa3YD6gZFAUgmC1AY4pDFMiCjvvrVn+a9n4LgZhMbX3liUWTAVYPv2w0nu0+ScB08wGD0uJUeJDCRHfCazYfHLG9Zs2lTgIsvXzG8JfZKZZ1i2vBgi7UPOIQ1JHHm8feuWr/S1dtM6K8Fpg0n4kYefiIalzKLZkOCU2A2QLllLAhdDL7ZZhGaywzo5ZeSDw1E2v+PAxulLJhZPT+GTb6abPXTfTxD1auMHKMTQXAnob07tMH3SUL8LAAAAAElFTkSuQmCC";

// Bruja escoba
var IMGisa = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAIAAAC0Ujn1AAAAB3RJTUUH3AMHAC870Ejl1AAAAAlwSFlzAAAewQAAHsEBw2lUUwAAAARnQU1BAACxjwv8YQUAAAR0SURBVHjarZR/bBNlGMffu971rj/urnddy+xWum5jS5EuLk7FwGAGJBA18J9/8AcxMRqD8gf+IDEx8Q8TICHRaMRffwpGE4MLkYQs4kBBnWOu69AhjG3Ntm6ltN3d7nrd3fXO9+hotzLWbfLk8uR5n7zv5/2+z3Pvi/B8CtyzPXteSKVSY2Nj9fX1siwXkgMDfWBNhi4c9Pf3YxjmcDh4nhcEQVEUgiC8Xt/a0MhC1UVjGDf0oVAIaocbxOPxJaetQnXRIAh+iUQCckVRhJmNG1seDrpgKmYIWUmQRI7jDMPw+4MPoSBFa6yuw1kKCoc9SOfTtEHD5Pj46P9VDS1vw6GHwjVN4ywcdteCwQ0wSdO9a1cdCoVhQcTZWeGqs5ikOwSoHXVTsUh0jaoh1wTZHQu55gkumjVBeRlqp388vTo0hBa4D7KJS6V4GfoDVc+6aYp2Xz8nJqaPH22XqdF3oSdHPy5OSH3zmXmI5/evrtZQNYQWYup2Jw+GYZDU8wHZlgsegrGz5xhCacujS6qRkWDhg/HQ0GBJvnef6c/HyK4JHGfMzSKfVORCw4qRXb+SRbcU9iiblPj6WtNzjwIHMVt7AA5l+w3o1d2HwbJWUi01+oz68ruwvnVu305P+PSXmdQMUHlTy403bJ5NFblLtLGMPoPPXU5Psk7N9/qRM1MZNX7SrMPjuypyy9uoqqokSWy6tZhJX/soUDvLPvNOFkEor8vN4r09kZVwF6nO5dI4bBPDpNnS2x/I6fHpvIMlPS6Cq2ZQvGqF3EVokuQKAcO4UtQ9aYzksxtqxpfIZO8kx1Bde2rrzlWj5wuEICiKch4GOLvNsb0uQ2g3+cuN4U2GVK2jWCL1zwrRFR7Vub5TmJKzPP0yjDu2PTs48BcMbCxnsxFuKxp577VxQHrDbUbzEg9DhUfVKdYVgic3t/w79HdjuHUdy7irvFbCKUxMJu0uP8jZomfErpMLVz3C7vIxb2PLo3XyJtDNgLY7SWs+r1jSOaUWw6xA/aO7k+VHgIsEcw1CgmpgjpjzgQB9ku8Ci24jfSEr7ChDk3YjHzarIWRFj9cK0CkDx2Mjox47psmiKqURrhZDcnVN1gR/fImCHHz1RLv3qwI3eX2kgTm0pebENjbaxhxNjfsL86Dqgkd0qSFYrwLb5r0v4aEdmGJCDIt8/4lN1T3f5q7yb8HgieAxXc67gE8RLQB0UnjjqUuz5948cCe+N0vQlhr5p59/W7T6/V9BW61C38INMUajPkEvR1tqlFbmQ6xKlTOEBSgYUA0AH7Z1ed3S9T03k2747s+Yr/l8qbcgIoLHOvefJbouvPjFQSs1CjSpjDuPXh9Abk1jII0CI0sTVeKcaNylK8SwpKO/J7bnrNsXroFcU1CkmyP8oJnOGJhLCSz3X8NyZ/Re0hLQFFLTNQTcVoEvOviKdT11/7JP2za0TxzeepHSarLRpiu41R+IfTDfFUdUkFpAxSuzpNHDv5zd/YORjHUYDifA+4iAwzrln/y8bNp/UOvlsS7mDqQAAAAASUVORK5CYII=";

// Bruja rubia sombrero
var IMGeli = "data:image/png;base64,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";

// escobar
var IMGatreyu = "data:image/png;base64,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";

// Risto mejide
var IMGristomejide = "data:image/png;base64,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";

// Adar (lobo)

var IMGADar = "data:image/png;base64,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";

// gtz (mascara carnaval)

var IMGGtz = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAZCAIAAABLixI0AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAC4jAAAuIwF4pT92AAAEi0lEQVQ4T32VWUhWXxTFbw45peWc5dBgiiWhTz4kCAaJoWhYD0ZhpQ9RiqWFQ2I+qmhiiBgi4qygoILimAkamgOCChoOmJqWWk6FOPbz23mt/vDfD5fznXv3Omuvvfb5lKNHj+ro6CiKcuLEidOnTyuaMDMz8/PzCwgIyM3NLSwsfPv2bU1NTXNz8/Pnzx8/fnz58mV7e3s+MzIy0tPTA0GylCNHjpiYmCgH4ezsnJWV9e3bt72D+Pjx4+rq6uzsrPxkzduurq7Q0FBJ0dXVBfF3/rFjx0xNTU+dOsX6yZMn/f39u7u7U1NTOzs7JH///l1Q1tfX19bWVlZW1DPc3Nwgpa2t/ZuNgYGBsbExC/k9OTm590dsb2+D9fPnz6WlJYA4g835+Xl5W1ZWdvz4cbUmxcLCQl9fnwWI1tbWfLGxsVFVVfXhw4d3794tLi6ys7CwoFbd0dHx+vXrnp4eCA4ODpIrVA4Dsa2srBD18+fPdXV1ERERrq6uNjY2N2/enJ6eFpTy8nJfX19bW9tr166VlJTU1taOjo4izqVLl36j0D5F0xGeV69elSqIoqKihw8f8jY+Pp5KNzc3/f39kfnBgwcNDQ0cCVk+O3v27GGZ0lEqpaGxsbF7GrGRRooNCgqKiYlhDdbdu3fT0tLoAD+RT448c+YM6bDbx0J7TpMynz17JorExcVRJpnv378PDAxkc3h4GKYgJiUlsYPRpANSoJS1H3Z2djxhizNRHWgtLS3OYPPly5ceHh4DAwPS03PnztEfUeb27dvt7e1eXl6H9sQdwpOgnL6+vvT0dJ7kz8zMjI+Ps0+/YIEzhOCPHz9Y4J7l5WUXFxeM+pczGCOO8vT0VJ2JCba2tvAEVfCTBXoLHAT3NEbh6eTkpPwTiAV5R0fH7u5uhJ+YmJCExsZG3jI3eweBrQTx69evrOGFxWRm9gcIZwkinsrJySkoKKCDeLW6uvrOnTtoB8dPnz719vbSlrm5OYAYr6amprCwsH9JASeLCxcuhIeHc0O8ePGChJCQkCtXrkRHR6uD3dnZiYilpaX3799/+vSpt7c3NcqdsR/STuAMDQ1ZYIvk5GQfH5/KykqScXZqaiq8vnz5MjY2Joi0+9atW3l5ee7u7n+C7HtVeEnNnAP5GzdunD9/HkSg0Z4BwA3QRIHr168zaikpKW/evJHjT548eVijnibwPWu0e/ToUUVFxb179xITEzmGwoGArKQx2K9evYJscHCwkMADaHoIJw6EI9OA41pbWxljphelhoaGqIuLob6+noZSKTdXZGQkZoaX3DFibEUGSNhCytLSkgXlZGZmZmRkoFR+fj4yMzog4jjmsa2tjWFQND4Xl0q6ot7WUFVnk5ITEhLoGvk0jh3gWGO9kZERrgr1UoYXlR7WSD5Aqsu48nnyP8LFz7i0tLSITGBhruzsbPlSZCHMzc0VNUR4daYYT1EBdfc0FxlrBwcHmR4cJ5+p7VPtqUiaBGKpL+S0qKgoJpRviouLWVy8eFHecraooWhU+6uP/w2xCCj82aAjnsJi/5egKL8AFIDV1/RlTtIAAAAASUVORK5CYII=";

// Jony (malo)

var IMGJony = "data:image/png;base64,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";

// josemaria (pozi)

var IMGJmaria = "data:image/png;base64,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";

// mimsan (rubia)

var IMGMim = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAIAAAC0Ujn1AAAAB3RJTUUH3AQBAAct7op94wAAAAlwSFlzAAAewQAAHsEBw2lUUwAAAARnQU1BAACxjwv8YQUAAAeeSURBVHjaLVZJbxvJGa29q7vZJEVSsi3ZY0VjG0rGjpEgGeQwAYI5BblnAeY35hDkkFOWm4NgxhM4GcuxZXmRvNCSKIpbd3VteUVPUSSgYvOr933fe+8rejI5jmnZhw/+Hq2TnOZa6yz3ng2HA7Iys/cnnDHFZN3MF02bbd9RZbV7+1OVKUIpVzqSQF3AopRMpueXsxkJgRAi8I7RTyfnjWl0IEoX3W6PRFbkFV3Mlm+ORsNtKbV3QUuuMluONmXVdabVuQ4xUOIDUDBGEcd7XZSzxTz4SCkVOM0Hdzp+k3EmGOl1+1Jk2NSSzcYvtq7tCa4pZYF5xYWUVkYidR5pdG0jMmWblcq0cy0SJ8QrpbJM1275PWqs2XzmfSh0LgS+VZzzZvx6Y7CDY2hCxLBDaSaBo13x1op+bzkddzcHrqmFkN5bGgKg4lmdF8Y0SIYR6lrnrDVIBycihOA8F5lofaY7DLVHLjyFlutFfcuJJ61ljprlSqpsObtAZQAawFGdLEto0sL/9WKqqAA0xqXgjCDX6Zkuq5QiId8/t1404eLBrNrZOctku5zjzMVkwYgITKDE0RuhJJ70CEeJMLUhNGVDU9a0rRu3XAohgINFIrCPoELgB8AOAK5eetuCIc3FFGRo2xUAgC3pj3ARY5blwMSwaxrjPU4kyNe3jnMVrCWRIyS+BcFQIgRGUIbGZQWNjEdmQanVCjhJDLZpEij6sQyIo0AEnBFNayLylokC9XLFqx51YI0nHFFliJ7hjSZxjoq2rl0slxFIjAmEu9ZKIerFpSpywEBEEgmIsA5NgjEG0JgSIZKjoxd7+3fHzx5/urers9LbDjiDBjlrxpOzD+MPl4vFcGPzxg9/XBtfDDe8DeVwa3Lystq84p1DzVxouVRALKxtcBByT3xcrDpa26Y+ePxI8jAcbnUqi30fmvH43Ytnz4PU29s3ulWnXc6UKpG+sy6rKmdSQYz1TNLoHc8ynCFQ5SSkGMCu8buTo6Pj27r69nhK9Ml9kRVVJWXf1k2QWf/qzqOnr//0z3+0xu9dG/zuD78d9XttXWfdrgBtPGoAvbMkbu8RjSEmQVa+RctOP5y/fX/ORT7t3XpuykWDMhay08/yblltslb94jdfDe79fO/zX5mAxKmivDULIQiFf1CQ24XoQJToTBI6WOK9iy4QawYyfrG/O9Di1zerWz+4sdGvRBKKDro7kGX+mX7/7smXO0Uu871f/r43GmZKwbGg0Ni21AfJk21Aud5aLtYe4pxLwpldVIz3Bgiof3p/f7gxWM6mApYXuMxK4kyuh6Uub0Jv8BLCgdE1DaNJV81yCs4wSKE1CA5LUdDFGnUAa+vLac/7rtIqsG6379umbRoPFsLGoJUkGFp1ShgvmIisXWKnT0IKcVXPgrepcxE+mAyWJclFuFjEo361EgF6Z/gxdAk52NauJUatS89zZ/E8KkQlIYFQm4wDwgIlUOpgDZJpkQt4kQLGhBoCUoK7JEgOAtN6jkRmZ+fY4cjJLKCpvNM/fXOsuav6V5TKkzTRNNNE2QnB6qoL6fO1diNA4CQaBV2vTKsF88181cxn4LiPRuV6MT59efikszGYX8z7o0F3Yyu4i/Hbp/3uVagJBxtraCdLytbag3JJsyR5YDL4JBmkKYuiM+Z8ujpXEwUnCMLjvI2tEQrCJb1x55NOuQnnIa4AxaazUylm+Ma4UF37BPYFZUOwgkQ0R0hF1i0S8Gz4qMrycjh6+/yg164uL88uZ5NyY6vQnX5ZDvo7JCi/ICg2yajUXThiM50n8zGmCoagzzJbtxNSDDLXzrYsUrQx4ExIvewOpnYZM6Wrsp4vv/7rw3s/u18vpzM6ycpOvrNFaFNTd/J+fP16MdzaCt615xOIBN1MXotXQAMJh5V+HLsfnRAfha56o+1XJ8dXrl8f7N66t8yW83b45Re3737Gk53zN/87mH73av/m3ZBfwLM8NpEwZocUMSD5iFmAScZ9Ig5sWaxncfKQTOuqv/no0X/2939UdkfF7gb55jj++d/jRxMwkAX4e3Fr747s42KBoHa1alrbJrcDHWmyaWgoOYlrk3PD1D+aLDYYaJkXTItvHj5omiYri97nt/WtnhrIfFOXe2V1N882ElQmlHVusVhcXpxiHuAaQtZXGWD2zkL3CSzxqRaJfesRKFW+ub3z9OnB8etniZG47OyO2E4ub3TEKJMYwakwrHV+sVycvzt5efCtyLSFsVoLxoFsafgjIEnzHX4XBQQaHD4Rbji84gg9fPKv08mpyDKITog8y3tKl5xlUKOx7uz07ctn/z169hA+hytRiwKHVApYA3GecYIrSmpjErrElQVpSqpkXlURBsbY4eMHnaKz1R9ByZQ5TDJUYrmYHx4+PDs5MmaCO0QUwlGOqwYQhlSUdFtK3mqNVBoDjEglgzOQbq7LqHSvV03n9Whz6/C7r9X+T8LafHELND4cvzowq6nApHPCYjxXg4vxuOh0KJF+XWnv0uWgNR9DY3bCWolDibTO60yNNq++e3l4OV921epvf/nj4NrNmzeuwRlMW2M04L4ApYbUTseKzsX74529vdTDZGHWtjUUFGwiyf8BX7LGwJ+0I7UAAAAASUVORK5CYII=";

// mystogan (dibujo goku)

var IMGMys = "data:image/png;base64,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";

// nemesis (vampiro)

var IMGNemesis = "data:image/png;base64,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";

// nuri (conejo)

var IMGNuri = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAIAAAC0Ujn1AAAAB3RJTUUH3AMfFxs5Cai9igAAAAlwSFlzAAALEgAACxIB0t1+/AAAAARnQU1BAACxjwv8YQUAAAVWSURBVHjadVZZSFxXGL5zZ9z3OhiXulRQcatOxljFlyIatFRUWhsbhcYHFVoqsait2NJAHvpkfZAKKlR0VCLWQoJoFWysqRKqotYYowjijolaB5eZibP0u/NPz5yO8Z+Fc8/51+9fzpWlp6evra25u7u7uLicnJzIZLKLiwu5XG6xEh4FQcBCuIJwJIqiQqFISkpqbGwsKSnZ2dnBpo+Pj2gymbAKDw8fGxtrbW1NTU11dXWFaghALxngFfGEHbA5OTmVlZV1dXUFBgYSj9lKCvzwvLe3h62srKzMzMypqSmNRjM+Pm40GomJV80HAQ+cnZ2rq6vLy8ux1uv1YKZTLESyr9VqFxYWCIGMjIyWlpbm5ubY2Fi5lZibZImEwQl/7969W1FRAUAoRIAJGIhNAoQw6e/vJ19kVsrOzh4YGIAY0oCoHQABA0wWFRVVVlZSPohIFekUKWqsRkdH5+fnBZnRIlyIcjO+rm6Kuq+/amtvuRaoxCOOmAqo8/Pz+/a7b2jfZDbg+9pKzAORcDFaqaamRqfTsZCJ0tLS+voeREVFwU0KiFSXlpYiIB76jY2N09NTFoTkNZ1hsbq6WltbB7wcAg8LC+vo6IiLiwOmhD72CwsLyS3mxMTEBAFgK0raJU9Bjx49rKqq0h5red+hKDg4uL29PSEhAakjYyEhIYwBzOAZHBzkS9OeH1Znw8PDt0tuLy4uijKR7w5ob2tri46Ohu+hoaGwwZ9OT08vLy9TGm2AUHlSDUigXwgWs/z50urHHxXfv/8D1TszHxwS0Nr6U8Q7b18L9JeJCNxMUJtNQtOPzTw4EpJKpRL9zZcdUzQ3N/egr3d9fR3F4Ovri+7Aqbe3d9p7advb25gQxAvVGk1Pb28vQxWbGBsyBAjXmGpWwtTozi4iYnJzc0MOCwoK8vPzYQBHZ2dn1vKALuHx4z+++PxLnU7Pd6+np6fi8ugh3wEoVFy/nlxaWpKYmBgUFAQDVDP4hyRFhqlAJWs0mhxUKd44zyAfERFRX1+flf0+bFCSKStSm3HNmZycjLEz8MuvZJJXIg8ICDg/Pyd1ErdwAXdvpKo1ms6ExLiZmZm6ujrIxMfHs2bhppXg5OSMmTP2+9jh4UtYpyrEEUIUySN7xYgiEtvU1OSv9IePmxubyBgGOmtFXjURtNy58xnfHPahykYlpbG4uBgdQTtFnxTlfpDr4eFBgDDH+UeIqFQq4GbQG/hKFfkHauuUlBR2v1CuqVoc/CUetklQMNuSlw7RQWBlZYUP/zICl2l/f5/SS3HbF7aEWtUJFkVb688jv42ZjHhwuko7yUuuIHUmcXvzpSjYxjq7KOT+/v6YhPYoRBFFitl9eHiII6XyLdqU/Z+4MCEodvf0LP79zIqKLQf2bnQQgy6695JVCTk5ObinkUkJXEH6kGtAQMqnyfLq1VFeXsHO9i4KlyYqCINB5LFnrtDlgCtjdnYWw4G6xmK2HP1zBJJCtkgAIjKMSVzneEFgiWVNp7gqUdhEmxhen9EF9GL5xZM/n4yMjNz7/p4+WA+NQ0NDBoNBpVJTKcsEuYMGqRsx+Ria9iTI5bm5uZ2dGrX6xrPF597evnkf5j99+tfs7NzR0fG7icm3bn1682bO+ZlucnJSqz2mdxbmOwBUsLTysJAZjFOcYjAdHBxERkaCx8vLCxcNSq27u3tpaWlrawuO82Na+G98SoDgsmD1xxME8GaCqYa3KozQmJiY2tpaJLahoYFNq6umpm2hVqvh3WXVVCS0pjTiH+W4u7tLjc5eB/k3JtZ3GERvTiNtkjxsII1YIHYqUwdnHcTJAKT+BYZGtalrlj01AAAAAElFTkSuQmCC";

// raspe (lobezno)

var IMGRaspe = "data:image/png;base64,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";

// raulca (torrente)

var IMGRaul = "data:image/png;base64,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";

// tamyna (caperucita)

var IMGTamy = "data:image/png;base64,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";

// victorcrow(angel)

var IMGVic = "data:image/png;base64,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";

// Ninon

var IMGNinon = "data:image/png;base64,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";

// gladiador

var IMGGlad = "data:image/png;base64,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";



if (typeof SOUND_FILES == 'undefined') var SOUND_FILES = new Object();
if (typeof SOUND_FILES.whisper == 'undefined'){
	SOUND_FILES.whisper = new Object();
	SOUND_FILES.whisper.MP3 = 'data:audio/mpeg;base64,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';

	SOUND_FILES.whisper.OGG = 'data:audio/ogg;base64,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';
	SOUND_FILES.whisper.DEFAULT = '<span><object type="application/x-shockwave-flash" data="http://thorastur.99h.com.ar/dewplayer/dewplayer-mini.swf" width="160" height="20"><param name="wmode" value="transparent" /><param name="movie" value="http://thorastur.99h.com.ar/dewplayer/dewplayer-mini.swf" /><param name="flashvars" value="mp3=http://efectos-de-sonido.anuncios-radio.com/BELL1.mp3&amp;autostart=1&amp;showtime=1&amp;volume=100" /></object></span>';
}

if (typeof SOUND_FILES.alert == 'undefined'){
	SOUND_FILES.alert = new Object();
        SOUND_FILES.alert.MP3 = 'data:audio/mpeg;base64,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QuWQ8zV+2qtnFhNUv/+ahdL/t+xiKUZ//+Uw3p//t41TT//1i7K+UkZqRk6FboIJILToMmgDSdf/9J5oSxz//vAqn//+oFb//6nf//MB2of6/+IzxJHFph7scsKsg2rcC0+TZsDQACkscZgRcrlwnEy+kXDQwIIUxxlgQoBGUA0AHYShECfNicWnpvUgZmQEBhBjc0OpmDLTQdBlp0Fitje1a/+pBMQqu3/3zhGq//8smC///JUqN/t/I0t1D8DpH3GkDh/s1aqTH1gafNnHklNNvCMcGpY9f/sehxw2Jf/PZ3mjU3//0Uf/+rMk0f/iMcTfALghnHLN5Gqo3PM6VFTOs1H4C6Aowc5Jh3FMepRUZDmGcJ8JOCEiCATIQMD4AjwuoO4L6IkCZCelizZA8XlqTHqPwT4vjKLwmI4i+y5sXnMWdRuPU1SpWUipN/Vk0lknWv/o0jRAezt/9uYj1DP8ShoAfhLG5JG5BKf+k5JmC0AUqY//yEEERJGKh3/ScVKI335rTSI8ev/iM8Tj/b4mA9rdrhna2Erqg+JjdJyLNITVqyE3qzGzURegyOOopEPhsLRrTXfscqITKc6H0msYcQsBSIQXRMGxATHaJ7lSQlBdAKig0lNzbfY81HOt/6mkLOpppK7uuh0sFYwmJVS3/6kLJ+oFWhCuvckiLHS1tQ5v+6WlIAwmq//lAHCUOjg2U02mc800ajUVDU1jv/NNIm//S/n/4jPEr4G0IQPewj46lNhrXOh21vDWw727q3XBtf8JHkTra+v2nWw2nOuWtSNWwbSagdAJIxqCSAiPpKNj0tlE1NacqsO5Q3JsS1sHoSc7bTrva2odf/LWta3lrWwkujdOSNja2sRpK//2trdfutrf4dX+1E1b/////////////////////////////////////////////////////+IxxL01viW8FpY2WdbY/////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////////+IzxIgHtBDAAlwAAAAA//////////////////////////////////////8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP/iM8RdAf8jgAJcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABUQUdDYXIgSG9ybiwgc21hbGwgY2FyIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADA%3D%3D';

	SOUND_FILES.alert.OGG = 'data:audio/ogg;base64,T2dnUwACAAAAAAAAAAD+BwAAAAAAAFQdFb4BHgF2b3JiaXMAAAAAAhErAAAAAAAAcMYAAAAAAACZAU9nZ1MAAAAAAAAAAAAA/gcAAAEAAAC6FRvfDHr/////////////vwN2b3JiaXMdAAAAWGlwaC5PcmcgbGliVm9yYmlzIEkgMjAwMzA5MDkFAAAACAAAAENPTU1FTlQ9GQAAAFRJVExFPUNhciBIb3JuLCBzbWFsbCBjYXIHAAAAQVJUSVNUPQYAAABBTEJVTT0LAAAAR0VOUkU9T3RoZXIBBXZvcmJpcxJCQ1YBAAABAAxSFCElmUJKYymVUlIpJRljEEpooXPUOSedg9RBiMUY44MxLtZia2kRUlYhJRlTDFtolVJUKQUZY1JKaKFz1jlGnXMUQifFCGOMLr62YltJHWPWMSYdU4pKKJ1j1DEGnWNQSggldBZCRyV00DkGxRhjjDHC1yJbiq3FnkrprYWMW0q11tpSKraVVGSKxRghfA5G9+JbSsUYY4wxxghjZMuB0JBVAAABAABABAFCQ1YBAAoAAMIwFEVRgNCQVQBABgCAABRFcRTHcSRHkizHAkJDVgEAQAAAAgAAGI7iKI4jOZJkSZrlaaIniqar67qu67pu27Zt27YNhIasBADIAAAYJR51DkJpjEgQKeakGGOEEEIIDYFFFXPQWgiuc1BKzBBYziDlpEJgOWQQg4yBBxVCyjkHInVKKQYluFZCxhwQGrJCAAjNADBIEiBpGiBpGgAAAAAAAABIngZonghonggAAAAAAAAAkuYBmugBmugBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACB5HuCJIuCJIgAAAAAAAABoogh4ngmIpgkAAAAAAAAAmigCnikComkCAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACB5HuCJIuCJIgAAAAAAAABoogiIpgl4ogkAAAAAAAAAmigComkCnukBAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAIcAAACLAQCg1ZEQDECQAIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAABgwAEAIMCEMlBoyIoAIE4AwOE4kgQAAI7jWBYAADiOY1kAAGBZlqYBAIBlWZoGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAGDAAQAgwIQyUGjISgAgCgDAYCiaBrAsgGUBNA2gaQDPA4gewDQBgAAAgAIHAIAAGzQlFgcoNGQlABAFAGBQFEeyLM+D52maKMLzNE0UIZqeJ4owTc8TRaim55kmVNXzTBOuK4qmCUTRNAUAABQ4AAAE2KApsThAoSErAYCQAACDokiS53meKJqmqqoqPM/zRFEUTVNVXRee53miKIqmqaquC1H0PNM0TVV1XdeFKHqeaZqmqrqu68I0RdE0TVNVXVeWYZqiaJqmqaquK8tQVVE0TdNUVdeVZSCKpmmaquq6sgxE0TRV1XVdV5aBKJqmqrqq68oyME1VVVXXlV1ZBqimqrquLMsyQFVd13VlWbYBquq6rivLtgxwXdeVZVm2bQCuK8uybNsCAAAOHAAAAoygk4wqi7DRhAsPQKEhKwKAKAAAwBilFFPKMCYhlBAixiSEEkIlpZSSSqkglFBSKRWEEkIKJZOSUkqlVBBKKSmECkIppYRQAADYgQMA2IGFUGjISgAgDwCAIAQhxhhjTErIGGPOOQchZIwx55yTUjLGmHPOSSkZY8w556SUzjnnnHNSSuecc845KaVzzjnnnJRSSuecc05KKaVzzjknpZTSOeecEwAAVOAAABBgo8jmBCNBhYasBABSAQAMjmNZnud5omiamiRpmud5nmiqqiZJmuZ5omiaqsrzPE8URVE0VZXneZ4oiqJpqirXFUVRNEVTVVWyK3qiaJqq6qoQRVE0TVV1XZimKJqmqrouZNk0VdVVZRe2bZqqqaquC1xXVV1XloHrqqaryq4AAPAEBwCgAhtWRzgpGgssNGQlAJABAEAQgpBSCiGlFEJKKYSUUggJAAAYcAAACDChDBQashIASAUAAAiRUkoppZQSKSWllFJKKaViTkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllFJKKaWUUkoppZRSSimllBJCCAUAYlc4AOxE2LA6wknRWGChISsBgHAAAMAYhBiDkFJrMVYIKQWhlNZazLVCiDEIpbTWYo1BY85JSanFGGMMGnNOSkoxxlhrUCmElFprMdYcg2shpNRajDHWHoRQrbUYY8015yCEaynFWGuuOQchdI6x1lxz7jkIoXOMsdacc+5BCOFrrjXXmnMOQghha68555xzEEII4XsOOteggw9CCJ9rzjnnXACAyYMDAFSCjTOsJJ0VjgYXGrISAMgNACCMUYox55yDDkIIIYSQUssYY85BCKGUUkopJaWUMcacgw5CCCGUUkpKrXPOOQchhFJKKaWUlFLGnHMOQgillFJKKSmlzjkHIYQQSimllFJSSp1zDkIIIZRSSimlpJZC6CCEEEop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';
	SOUND_FILES.alert.DEFAULT = '<span><object type="application/x-shockwave-flash" data="http://thorastur.99h.com.ar/dewplayer/dewplayer-mini.swf" width="160" height="20"><param name="wmode" value="transparent" /><param name="movie" value="http://thorastur.99h.com.ar/dewplayer/dewplayer-mini.swf" /><param name="flashvars" value="mp3=http://efectos-de-sonido.anuncios-radio.com/CARHORN.mp3&amp;autostart=1&amp;showtime=1&amp;volume=100" /></object></span>';
}
  
var provMapCoords = {imgWidth:710, imgHeight:708, mapWidth:670, mapHeight:670, leftMargin:31, topMargin:19};
var JSON;if(!JSON){JSON={};}(function(){"use strict";function f(n){return n<10?'0'+n:n;}if(typeof Date.prototype.toJSON!=='function'){Date.prototype.toJSON=function(key){return isFinite(this.valueOf())?this.getUTCFullYear()+'-'+f(this.getUTCMonth()+1)+'-'+f(this.getUTCDate())+'T'+f(this.getUTCHours())+':'+f(this.getUTCMinutes())+':'+f(this.getUTCSeconds())+'Z':null;};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(key){return this.valueOf();};}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={'\b':'\\b','\t':'\\t','\n':'\\n','\f':'\\f','\r':'\\r','"':'\\"','\\':'\\\\'},rep;function quote(string){escapable.lastIndex=0;return escapable.test(string)?'"'+string.replace(escapable,function(a){var c=meta[a];return typeof c==='string'?c:'\\u'+('0000'+a.charCodeAt(0).toString(16)).slice(-4);})+'"':'"'+string+'"';}function str(key,holder){var i,k,v,length,mind=gap,partial,value=holder[key];if(value&&typeof value==='object'&&typeof value.toJSON==='function'){value=value.toJSON(key);}if(typeof rep==='function'){value=rep.call(holder,key,value);}switch(typeof value){case'string':return quote(value);case'number':return isFinite(value)?String(value):'null';case'boolean':case'null':return String(value);case'object':if(!value){return'null';}gap+=indent;partial=[];if(Object.prototype.toString.apply(value)==='[object Array]'){length=value.length;for(i=0;i<length;i+=1){partial[i]=str(i,value)||'null';}v=partial.length===0?'[]':gap?'[\n'+gap+partial.join(',\n'+gap)+'\n'+mind+']':'['+partial.join(',')+']';gap=mind;return v;}if(rep&&typeof rep==='object'){length=rep.length;for(i=0;i<length;i+=1){k=rep[i];if(typeof k==='string'){v=str(k,value);if(v){partial.push(quote(k)+(gap?': ':':')+v);}}}}else{for(k in value){if(Object.hasOwnProperty.call(value,k)){v=str(k,value);if(v){partial.push(quote(k)+(gap?': ':':')+v);}}}}v=partial.length===0?'{}':gap?'{\n'+gap+partial.join(',\n'+gap)+'\n'+mind+'}':'{'+partial.join(',')+'}';gap=mind;return v;}}if(typeof JSON.stringify!=='function'){JSON.stringify=function(value,replacer,space){var i;gap='';indent='';if(typeof space==='number'){for(i=0;i<space;i+=1){indent+=' ';}}else if(typeof space==='string'){indent=space;}rep=replacer;if(replacer&&typeof replacer!=='function'&&(typeof replacer!=='object'||typeof replacer.length!=='number')){throw new Error('JSON.stringify');}return str('',{'':value});};}if(typeof JSON.parse!=='function'){JSON.parse=function(text,reviver){var j;function walk(holder,key){var k,v,value=holder[key];if(value&&typeof value==='object'){for(k in value){if(Object.hasOwnProperty.call(value,k)){v=walk(value,k);if(v!==undefined){value[k]=v;}else{delete value[k];}}}}return reviver.call(holder,key,value);}text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return'\\u'+('0000'+a.charCodeAt(0).toString(16)).slice(-4);});}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,'@').replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,']').replace(/(?:^|:|,)(?:\s*\[)+/g,''))){j=eval('('+text+')');return typeof reviver==='function'?walk({'':j},''):j;}throw new SyntaxError('JSON.parse');};}}()); 
var JSON;if(!JSON){JSON={}}(function(){function str(a,b){var c,d,e,f,g=gap,h,i=b[a];if(i&&typeof i==="object"&&typeof i.toJSON==="function"){i=i.toJSON(a)}if(typeof rep==="function"){i=rep.call(b,a,i)}switch(typeof i){case"string":return quote(i);case"number":return isFinite(i)?String(i):"null";case"boolean":case"null":return String(i);case"object":if(!i){return"null"}gap+=indent;h=[];if(Object.prototype.toString.apply(i)==="[object Array]"){f=i.length;for(c=0;c<f;c+=1){h[c]=str(c,i)||"null"}e=h.length===0?"[]":gap?"[\n"+gap+h.join(",\n"+gap)+"\n"+g+"]":"["+h.join(",")+"]";gap=g;return e}if(rep&&typeof rep==="object"){f=rep.length;for(c=0;c<f;c+=1){if(typeof rep[c]==="string"){d=rep[c];e=str(d,i);if(e){h.push(quote(d)+(gap?": ":":")+e)}}}}else{for(d in i){if(Object.prototype.hasOwnProperty.call(i,d)){e=str(d,i);if(e){h.push(quote(d)+(gap?": ":":")+e)}}}}e=h.length===0?"{}":gap?"{\n"+gap+h.join(",\n"+gap)+"\n"+g+"}":"{"+h.join(",")+"}";gap=g;return e}}function quote(a){escapable.lastIndex=0;return escapable.test(a)?'"'+a.replace(escapable,function(a){var b=meta[a];return typeof b==="string"?b:"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+a+'"'}function f(a){return a<10?"0"+a:a}"use strict";if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(a){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null};String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(a){return this.valueOf()}}var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;if(typeof JSON.stringify!=="function"){JSON.stringify=function(a,b,c){var d;gap="";indent="";if(typeof c==="number"){for(d=0;d<c;d+=1){indent+=" "}}else if(typeof c==="string"){indent=c}rep=b;if(b&&typeof b!=="function"&&(typeof b!=="object"||typeof b.length!=="number")){throw new Error("JSON.stringify")}return str("",{"":a})}}if(typeof JSON.parse!=="function"){JSON.parse=function(text,reviver){function walk(a,b){var c,d,e=a[b];if(e&&typeof e==="object"){for(c in e){if(Object.prototype.hasOwnProperty.call(e,c)){d=walk(e,c);if(d!==undefined){e[c]=d}else{delete e[c]}}}}return reviver.call(a,b,e)}var j;text=String(text);cx.lastIndex=0;if(cx.test(text)){text=text.replace(cx,function(a){return"\\u"+("0000"+a.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){j=eval("("+text+")");return typeof reviver==="function"?walk({"":j},""):j}throw new SyntaxError("JSON.parse")}}})()
var JSON2 = JSON;
var butON='<img align=absmiddle src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAACB0RVh0U29mdHdhcmUATWFjcm9tZWRpYSBGaXJld29ya3MgTVi7kSokAAAAFnRFWHRDcmVhdGlvbiBUaW1lADExLzA1LzA33bqJ2wAAAq1JREFUeJxlk09oVFcUxn/3vskkqZoJGRMXTgQpCga0qZkUChEtFjFg6giuVDAgbaQroV2WGgUXXQiudJlVyDJpKRVKwYR0YXVqtNrUP1SSOMYRJpjJjJn3Zubc08Uzk4n94HDh8N1zzvcdjlFV6rHn75P7oqbhkqc26WET4oTAlTOBq6QDV774oufmX/V8U1+ge/bUuGdsaiHI8kYKCAKAh2UzzcS1hYqrTix8cvPEhgLfZq41TRXuPctVlxNz5cVawVZvCwDLUqjl4rKFZolmtr9t23X78zHfAvy2cmes/nOq9RAAM12jzOwZBbeeW/IKFE0p8W9TdgyA5OyZ3v2zp5V0j5Lu0ZHcT6qqyvTHugZ+3quqqiPZH2u8rVMHte3WgV7ru/KVhSBb6zwYHwhnXaqsO1UNfRrc9gWpyAEAilGfipErttk0dr15p/Fs/BgAFx7+AMBceZG51VDWhRdXQ07HAJQcQUQwFe0yyUdnNO3/A4D2pEPzfvmU/CafWCwGr8vkq0Vi29tY7p4Mnf/1I4g3sDkXISJOeB8GAx945KUIbQDRMLeGkgNA1GGrTl56WAAmC3+GY3YeXyfbMNbkTebuvts/iJOX3qavdh4VdR8GVJgrLzIYH+Dotj7y/gqPK/M02UbOt5/kWuc3oZEz3zEvWaz1UHF/mN3p48mqyt3n5hUAFzu+ZLhz6H+yAIYfX+fSkxvQ3kAkr4iTXqOq7LjTP76Kn1rywm0ctN0Mdw5xaGtvbezhJ9eZyqWhJYLFoL5MuP4HJ4yqcnj6XNPTSOZZ0ZQSyw2rYbvAwYqEL0CjhRYPG4CuSkbnS7v066f+hmNq//2zcZymilGfICKo0ZphxgdbEAQ34fofbDymesSm+/YiellFk1p1CVGHIBkxLu2Mfu+O3H9Yz/8PLFlkbIqvT3MAAAAASUVORK5CYII%3D" alt="ON">';
var butOFF='<img align=absmiddle src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAACB0RVh0U29mdHdhcmUATWFjcm9tZWRpYSBGaXJld29ya3MgTVi7kSokAAAAFnRFWHRDcmVhdGlvbiBUaW1lADExLzA1LzA33bqJ2wAAAsFJREFUeJxlk09oVFcUxn/3zR9HaoJKgphMFGtCrH9alUTqRgWhJtDFjBRsNybURVWwFCqUUmgyghTcaKlLQXeiopOVIEhtNaDjaNVYiNXYjHGeDmhokpcw89677x4XL5lM7AeXezn3O98957scJSLU4unBzz+2PliSUdF4h0RjSaN9ghmnqGem75mZqb5PLuaGavmqVuD50a+yKhpPTT/K4dqjiO+FpGiMSMNKrJa1GLc8sPXC7fQCgUrhaeL1mRPPKoV/ks79wapgpG4pAIEzUY1ZLa2Y+uXFYMO2tu2Z3yoWgH2673xt8rLdKQA2Zh+wMfuAQOZj5uUIMl5Kcvf6eQD+/enrzuc/7JfcOiS3Dnlz5ayIiFxrQ+ZwZnV4ti+frfIGP2uXm7tbOy3tTByffpSrvtyQ7gVgxJ03yp21qWlvL/7OsBJrvIS45eNWpH75etceBaAh3QPAYOa7MNEu4BQLAIz9Esaa0j1MBGCVHbRlrbeMMc1zbs/1+eTSOVri8Hd6MwPdm1mk4E32HABr9qR4q0EZQ6B1c9Ron/ehlKIhAoEzSasACQBVvZ8Iwt34Gst4rq2iMQCm7v4BQPsXPfNfqcLVONuefSfkiFIY7dmRb9oau0TrtWZ6Etcu0JjuZdWuLqYmJzGjT7AWJVjx5UFW/XgKgN+/74XXL6iLxwkCk1NDB7o6As/Ne/kboZGH+/jwSP//2gLIn+wnfypDewL8+GK0DjqViPDXvu1Z89/blHk5AoC3ZSdrvu2n+dNd1bLzJ/t5dedPmmJQn4jjBjLQPeyllYjw8NdMwrt19ZmMl5KqNAaAY+CVD86sYXURaIqBisUpB1Icq5i2Q6O6smCYbnd/lDVGUtZ4CavsoIypGuZZMWZUBNF6oHvYWzhMtRjc0bLJoI4FYjq0MUnja/DdItq/h/Z/3jPsP67lvwOjGG1S8vVScQAAAABJRU5ErkJggg%3D%3D" alt="OFF">';



var upgradeData = {
  active : false,
  item : 0,
  retryInterval : 30,
  enhanceAction : false,
  enhanceItem : 0,
  enhanceMax  : 1,
  minStones : 100000,
  switchToUpgrade : true,
};

var TABLE_SCALE =1.00;
var upgradeStats = {
   upgradeSuccess: {0: {0: 0, 1:0, 2:0, 3:0, 4:0, 5:0, 6:0, 7:0, 8:0, 9:0, 10:0}, 
                    1: {0: 0, 1:0, 2:0, 3:0, 4:0, 5:0, 6:0, 7:0, 8:0, 9:0, 10:0},
                    2: {0: 0, 1:0, 2:0, 3:0, 4:0, 5:0, 6:0, 7:0, 8:0, 9:0, 10:0},
                    3: {0: 0, 1:0, 2:0, 3:0, 4:0, 5:0, 6:0, 7:0, 8:0, 9:0, 10:0},
                    4: {0: 0, 1:0, 2:0, 3:0, 4:0, 5:0, 6:0, 7:0, 8:0, 9:0, 10:0},
                    5: {0: 0, 1:0, 2:0, 3:0, 4:0, 5:0, 6:0, 7:0, 8:0, 9:0, 10:0}	},
                    
   upgradeFailure: {0: {0: 0, 1:0, 2:0, 3:0, 4:0, 5:0, 6:0, 7:0, 8:0, 9:0, 10:0}, 
                    1: {0: 0, 1:0, 2:0, 3:0, 4:0, 5:0, 6:0, 7:0, 8:0, 9:0, 10:0},
                    2: {0: 0, 1:0, 2:0, 3:0, 4:0, 5:0, 6:0, 7:0, 8:0, 9:0, 10:0},
                    3: {0: 0, 1:0, 2:0, 3:0, 4:0, 5:0, 6:0, 7:0, 8:0, 9:0, 10:0},
                    4: {0: 0, 1:0, 2:0, 3:0, 4:0, 5:0, 6:0, 7:0, 8:0, 9:0, 10:0},
                    5: {0: 0, 1:0, 2:0, 3:0, 4:0, 5:0, 6:0, 7:0, 8:0, 9:0, 10:0}	},
                    
   enhanceSuccess: {0: {0: 0, 1:0, 2:0, 3:0, 4:0, 5:0, 6:0, 7:0, 8:0, 9:0, 10:0}, 
                    1: {0: 0, 1:0, 2:0, 3:0, 4:0, 5:0, 6:0, 7:0, 8:0, 9:0, 10:0},
                    2: {0: 0, 1:0, 2:0, 3:0, 4:0, 5:0, 6:0, 7:0, 8:0, 9:0, 10:0},
                    3: {0: 0, 1:0, 2:0, 3:0, 4:0, 5:0, 6:0, 7:0, 8:0, 9:0, 10:0},
                    4: {0: 0, 1:0, 2:0, 3:0, 4:0, 5:0, 6:0, 7:0, 8:0, 9:0, 10:0},
                    5: {0: 0, 1:0, 2:0, 3:0, 4:0, 5:0, 6:0, 7:0, 8:0, 9:0, 10:0}	},
                    
   enhanceFailure: {0: {0: 0, 1:0, 2:0, 3:0, 4:0, 5:0, 6:0, 7:0, 8:0, 9:0, 10:0}, 
                    1: {0: 0, 1:0, 2:0, 3:0, 4:0, 5:0, 6:0, 7:0, 8:0, 9:0, 10:0},
                    2: {0: 0, 1:0, 2:0, 3:0, 4:0, 5:0, 6:0, 7:0, 8:0, 9:0, 10:0},
                    3: {0: 0, 1:0, 2:0, 3:0, 4:0, 5:0, 6:0, 7:0, 8:0, 9:0, 10:0},
                    4: {0: 0, 1:0, 2:0, 3:0, 4:0, 5:0, 6:0, 7:0, 8:0, 9:0, 10:0},
                    5: {0: 0, 1:0, 2:0, 3:0, 4:0, 5:0, 6:0, 7:0, 8:0, 9:0, 10:0}	},
                    
};


var Options = {
  blasrefresh  : false,
  HauteurBoite :700,
  KDODef:0,
  KDOUser:{},
  reapprointerval:0,
  NewTab       : false,
  Smiley       : true,
  srcSortBy    : 'level',
  srcMinLevel  : 1,
  srcMaxLevel  : 7,
  wildType     : 1,
  unownedOnly  : true,
  mistedOnly   : true,
  hostileOnly  : false,  
  friendlyOnly : false,  
  alliedOnly   : false,  
  unalliedOnly : false,  
  neutralOnly  : false,  
  srcAll       : true,  
  srcScoutAmt  : 1,
  minmight     : 1,
  srcdisttype  : 'square',
  pbWinIsOpen  : false,
  pbWinPos     : {},
  pbTrackOpen  : true,
  pbKillFairie : false,
  pbGoldHappy  : 95,
  pbGoldEnable : false,
  pbEveryEnable: false,
  pbEveryMins  : 30,
  pbChatOnRight: false,
  pbWideMap    : false,
  pbWinDrag    : true,
  ptWinPos     : {},
  MapExtra     : true,
  OverViewShowExtra : 'maximum',
  salvageconfig:{running:false,CityCity:0,RepairCity:0,Repairrunning:false,},
  alertConfig  : {aChat:false, aPrefix:'** I\'m being attacked! **', scouting:false, wilds:false, defend:true,   minTroops    : 10000, spamLimit:10, lastAttack:0, barbautoswitch:false, raidautoswitch: {}, },
  alertSound   : {enabled:false, soundUrl:'http://thorastur.99h.com.ar/powerkoc/fliegeralarmsire.mp3', repeat:true, playLength:20,   repeatDelay  : 0.5, volume:100, alarmActive:false, expireTime:0},
  spamconfig   : {aspam:false, spamvert:'Join my Alliance!!', spammins:'30', atime:2 , spamstate:'a'},
  giftDomains  : {valid:false, list:{}},
  celltext     : {atext:false, provider:0, num1:"000", num2:"000", num3:"0000"},
  giftDelete   : 'e',
  currentTab   : false,
  hideOnGoto   : true,
  transportinterval : 10,
  minwagons    : 100,
  lasttransport: 0,
  reassigninterval: 10,
  lastreassign : 0,
  HelpRequest  : false,
  RaidRunning  : false,
  RaidReset    : 0,
  DeleteMsg    : false,
  DeleteMsgs0  : false,
  DeleteMsgs1  : false,
  DeleteMsgs2  : false,
  DeleteMsgs3  : false,
  DeleteMsgs4  : false,
  DeleteMsgs5  : false,
  DeleteMsgs6  : false,
  DeleteTimerMinute:5,
  Foodstatus   : {1:0,2:0,3:0,4:0,5:0,6:0,7:0},
  LastReport   : 0,
  MsgInterval  : 1,
  foodreport   : false,
  includeCity	: true,
  includeTraining:false,
  includeTrainingTotal:false,
  includeCityHome:		false,
  includeCityRaid:		false,
  includeCityMarch:		false,
  includeCityTrain:		false,
  includeMarching:true,
  wrapCityName:				false,
  resourceProd:				false,
  showPopulation:			false,
  showBuildings:			false,
  showTroops   : true,
  showDefenses : false,
  dispBattleRounds: true, 
  encRemaining : true,
  maxIdlePop   : false,
  fixMapDistance: true,
  fixWarnZero  : true,
  fixMsgCount  : true,
  fixPageNav   : true,
  enhanceARpts : true,
  enhanceMsging : true,
  enhanceViewMembers : true,
  currentTab : false,
  TournoiLigne : 25,
  gmtClock : true,
  chatEnhance : true,
  chatglobal : true,
  chatwhisper : true,
  chatbold : false,
  chatAttack : true,
  chatLeaders : true,
  fixKnightSelect : true,
  attackCityPicker : true,
  mapCoordsTop : true,
  reportDeleteButton : true,
  overviewFontSize : 12,
  overviewAllowOverflow : false,
  curOverTab : 'A',
  curMarchTab : 'N',
  curOptTab : 'U', 
  playersNoCities : false,
  enableWhisperAlert : true,
  enableTowerAlert : true,
  AllianceLeaders : [],
  rptType: 'alliance',
  arPageFrom: 1,
  arPageTo: 5,
  arAttacker: 'Them',
  arTarget: 'Us',
  arAttack: true,
  arScout: true,
  arReinforce: false,
  arTransport:	true,
  enableFoodWarn : true,
  foodWarnHours : 24,
  LastCrestReport : 0,
  Creststatus  : {1101:0,1102:0,1103:0,1104:0,1105:0,1106:0,1107:0,1108:0,1109:0,1110:0,1111:0,1112:0,1113:0,1114:0,1115:0},
  CrestMsgInterval  : 1,
  crestreport  : false,
  Crest1Count  : 0,
  Crest2Count  : 0,
  CrestLevel   : 0,
  crestRunning   : false,  
  CrestType    : 0,
  Crestinterval:5,
  CrestSlot:1,
  crestMarchError:0,  
  enableReportNumber:	true,
  marRemaining:	true,
  atkAlliance:	false,
  tgtAlliance:	true,
  atkCityName:	'no',
  tgtCityName:	'same',
  allowAlterAR:	true,
  pu      : 0,
  Xrenfort:0,
  Yrenfort:0,
  AttackHorloge:"21:00:00",
  AttackGoHorloge:null,
  AttackOnOff:false,
  AttackUnits : {},
  AttackFav : {0:{0:"200K mil",1:0,2:2e5,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0},1:{0:"200K Heavy",1:0,2:0,3:0,4:0,5:0,6:0,7:2e5,8:0,9:0,10:0,11:0,12:0,13:0}},
  AttackFromCity : 0,
  AttackCibleX : 0,
  AttackCibleY : 0,
  AttackKnight : 0,
    ThroneDeleteItems	:	false,
  ThroneDeleteLevel	:	0,
  throneSaveNum	:	10,
  throneDeletedNum : 0,
  RangeSaveModeSetting : 0,
  enhancedinbox : true,
  Opacity :0.9,
};

var ApothecaryOptions = {
	Active : false,
	goldkeep : 0,
	city : {0:[],1:[],2:[],3:[],4:[],5:[],6:[],7:[]},
};


var Colors ={
    DarkRow : '#eee',
    ButtonSelected : '#71DDF5',
    ChatLeaders: '#B8B8B8',
    ChatGlobal :  '#CCCCFF',
    OverviewDarkRow : '#f0f0f0',
    ChatAll : '#99ccff',
    ChatAtt : '#FF4D4D',
    ChatWhisper : '#FF4D4D',
    ChatVC         : '#00ff00',
    ChatChancy     : '#F5D349',
    overviewFontSize : 12,
	Opacity        : '0.9',
};

var GlobalOptions = {
  pbWatchdog   : false,
  pbWideScreen : true,
  pbNoMoreKabam:false,
  pbWideScreenStyle : 'normal',
  autoPublishGamePopups : false,
  autoPublishPrivacySetting : 80,
  escapeurl : null,
};

var TrainOptions = {
  Running    : false,
  Troops     : {1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},
  Threshold  : {1:500,2:500,3:500,4:500,5:500,6:500,7:500,8:500},
  Max        : {1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},
  Gamble     : {1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},
  Workers    : {1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},
  Keep       : {1:{Food:0,Wood:0,Stone:0,Ore:0},
                2:{Food:0,Wood:0,Stone:0,Ore:0},
				3:{Food:0,Wood:0,Stone:0,Ore:0},
				4:{Food:0,Wood:0,Stone:0,Ore:0},
				5:{Food:0,Wood:0,Stone:0,Ore:0},
				6:{Food:0,Wood:0,Stone:0,Ore:0},
				7:{Food:0,Wood:0,Stone:0,Ore:0},
				8:{Food:0,Wood:0,Stone:0,Ore:0}
			   },
  Enabled    : {1:false,2:false,3:false,4:false,5:false,6:false,7:false,8:false},
  SelectMax  : {1:false,2:false,3:false,4:false,5:false,6:false,7:false,8:false},
  Resource   : {1:true,2:true,3:true,4:true,5:true,6:true,7:true,8:true},
  UseIdlePop : {1:true,2:true,3:true,4:true,5:true,6:true,7:true,8:true},
  CraftingRunning : false,
  CraftIntervallMin : 1,
  CraftingActif : {3000:false,3001:false,3002:false,3003:false,3004:false,3005:false,3006:false,3007:false,3008:false,3009:false,3010:false,3011:false},
  CraftingNb : {3000:0,3001:0,3002:0,3003:0,3004:0,3005:0,3006:0,3007:0,3008:0,3009:0,3010:0,3011:0,},
};

var salvageData = {
	salvageActive : false,
	throneSaveNum : 10,
	minQuality    : 3,
	ruleSet       : [{"type":"any","faction":"any","conditions":[{"mustHave":"true","number":"2","effect":"Range","buffType":"e","slots":[true,true,true,true,true]}]},{"type":"any","faction":"any","conditions":[{"mustHave":"true","number":"2","effect":"Troop Training Speed","buffType":"e","slots":[true,true,true,true,true]}]},{"type":"banner","faction":"any","conditions":[{"mustHave":"true","number":"2","effect":"Siege Range","buffType":"e","slots":[true,true,true,true,true]}]}],
	numSalvagedItems : 0,
	maxStones     : 980000,
	anyCity       : true,
};


var WallTrainOptions = { 
	intervalSecs:	60,
	doTraps:		{1:false,2:false,3:false,4:false,5:false,6:false,7:false,8:false},
	doCalrops:		{1:false,2:false,3:false,4:false,5:false,6:false,7:false,8:false},
	doSpikes:		{1:false,2:false,3:false,4:false,5:false,6:false,7:false,8:false},
	doXbows:		{1:false,2:false,3:false,4:false,5:false,6:false,7:false,8:false},
	troopType:		{1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},
	keepFood:		{1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},
	keepWood:		{1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},
	keepStone:		{1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},
	keepOre:		{1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},
};

var AttackOptions = {
  LastReport    		: 0,
  MsgEnabled          	: true,
  MsgInterval	      	: 30,
  Method			    : "distance",
  SendInterval			: 8,
  MaxDistance           : 40,
  RallyClip				: 0,
  Running       		: false,
  BarbsFailedKnight		: 0,
  BarbsFailedRP 		: 0,
  BarbsFailedTraffic   	: 0,
  BarbsFailedVaria		: 0,
  BarbsFailedBog        : 0,
  BarbsTried    		: 0,
  DeleteMsg             : true,
  DeleteMsgs0			: false,
  Foodstatus			: {1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},
  MsgLevel			    : {1:true,2:true,3:true,4:true,5:true,6:true,7:true,8:true,9:true,10:true},
  BarbsDone     		: {1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},
  BarbNumber    		: {1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},
  Levels    			: {1:{0:false,1:false,2:false,3:false,4:false,5:false,6:false,7:false,8:false,9:false,10:false},2:{0:false,1:false,2:false,3:false,4:false,5:false,6:false,7:false,8:false,9:false,10:false},3:{0:false,1:false,2:false,3:false,4:false,5:false,6:false,7:false,8:false,9:false,10:false},4:{0:false,1:false,2:false,3:false,4:false,5:false,6:false,7:false,8:false,9:false,10:false},5:{0:false,1:false,2:false,3:false,4:false,5:false,6:false,7:false,8:false,9:false,10:false},6:{0:false,1:false,2:false,3:false,4:false,5:false,6:false,7:false,8:false,9:false,10:false},7:{0:false,1:false,2:false,3:false,4:false,5:false,6:false,7:false,8:false,9:false,10:false},8:{0:false,1:false,2:false,3:false,4:false,5:false,6:false,7:false,8:false,9:false,10:false}},
  Troops    			: {1:{1:0,2:0,3:0,4:0,5:0,6:0,7:0, 8:0,9:0, 10:0, 11:0, 12:0},2:{1:0,2:0,3:0,4:0,5:0,6:0,7:0, 8:0,9:0, 10:0, 11:0, 12:0},3:{1:0,2:0,3:0,4:0,5:0,6:0,7:0, 8:0,9:0, 10:0, 11:0, 12:0},4:{1:0,2:0,3:0,4:0,5:0,6:0,7:0, 8:0,9:0, 10:0, 11:0, 12:0},5:{1:0,2:0,3:0,4:0,5:0,6:0,7:0, 8:0,9:0, 10:0, 11:0, 12:0},6:{1:0,2:0,3:0,4:0,5:0,6:0,7:0, 8:0,9:0, 10:0, 11:0, 12:0},7:{1:0,2:0,3:0,4:0,5:0,6:0,7:0, 8:0,9:0, 10:0, 11:0, 12:0},8:{1:0,2:0,3:0,4:0,5:0,6:0,7:0, 8:0,9:0, 10:0, 11:0, 12:0},9:{1:0,2:0,3:0,4:0,5:0,6:0,7:0, 8:0,9:0, 10:0, 11:0, 12:0},10:{1:0,2:0,3:0,4:0,5:0,6:0,7:0, 8:0,9:0, 10:0, 11:0, 12:0}},
  MinDistance			: {1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0},
  Distance              : {1:750,2:750,3:750,4:750,5:750,6:750,7:750,8:750,9:750,10:750},
  Update                : {1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0]},
  UpdateEnabled         : true,
  UpdateInterval	    : 30,
  stopsearch            : 1,
  knightselector        : 0,
};



var CrestOptions = {
  Running   	: 	false,
  CrestCity 	: 	0,
  RoundOne  	: 	false,
  RoundTwo  	: 	true,
  lastRoundTwo 	: 	0,
  X				:	0,
  Y				:	0,
  R1ST			:	0,
  R1MM			:	0,
  R1Scout		:	0,
  R1Pike		:	0,
  R1Sword		:	0,
  R1Arch		:	0,
  R1LC			:	0,
  R1HC			:	0,
  R1SW			:	0,
  R1Ball		:	0,
  R1Ram			:	0,
  R1Cat			:	0,
  R2ST			:	0,
  R2MM			:	0,
  R2Scout		:	0,
  R2Pike		:	0,
  R2Sword		:	0,
  R2Arch		:	0,
  R2LC			:	0,
  R2HC			:	0,
  R2SW			:	0,
  R2Ball		:	0,
  R2Ram			:	0,
  R2Cat			:	0,
};

var CrestData = new Array();

	function CrestFunc (Arr) {
	
		if (Arr == undefined)
			Arr = CrestOptions;

		this.Running 		=  	true;
		this.active 		=  	Arr.active;
  		this.CrestCity 		= 	Arr.CrestCity;
		this.RoundOne 		= 	Arr.RoundOne;
		this.RoundTwo 		= 	true;
		this.lastRoundTwo 	= 	0;
		this.X 				= 	Arr.X;
		this.Y 				= 	Arr.Y;
		this.R1ST 			= 	Arr.R1ST;
		this.R1MM 			= 	Arr.R1MM;
		this.R1Scout 		= 	Arr.R1Scout;
		this.R1Pike 		= 	Arr.R1Pike;
		this.R1Sword 		= 	Arr.R1Sword;
		this.R1Arch 		= 	Arr.R1Arch;
		this.R1LC 			= 	Arr.R1LC;
		this.R1HC 			= 	Arr.R1HC;
		this.R1SW 			= 	Arr.R1SW;
		this.R1Ball 		= 	Arr.R1Ball;
		this.R1Ram 			= 	Arr.R1Ram;
		this.R1Cat 			= 	Arr.R1Cat;
		this.R2ST 			= 	Arr.R2ST;
		this.R2MM 			= 	Arr.R2MM;
		this.R2Scout 		= 	Arr.R2Scout;
		this.R2Pike 		= 	Arr.R2Pike;
		this.R2Sword 		= 	Arr.R2Sword;
		this.R2Arch 		= 	Arr.R2Arch;
		this.R2LC 			= 	Arr.R2LC;
		this.R2HC 			= 	Arr.R2HC;
		this.R2SW 			= 	Arr.R2SW;
		this.R2Ball 		= 	Arr.R2Ball;
		this.R2Ram 			= 	Arr.R2Ram;
		this.R2Cat 			= 	Arr.R2Cat;
		
	};
	
var FarmOptions = {
	RallyClip: 0,
    Running: false,
    MinMight: 0,
    MaxMight: 999999999,
    Interval: 0,
    SendInterval: 10,
    MaxDistance: 20,
    Inactive:30,
	DeleteReports:false,
	Troops: {1: 0,2: 0,3: 0,4: 0,5: 0,6: 0,7: 0,8: 0,9: 0,10: 0,11: 0,12: 0},
	FarmNumber: {1: 0,2: 0,3: 0,4: 0,5: 0,6: 0,7: 0,8: 0},
    CityEnable: {1: true,2: true,3: true,4: true,5: true,6: true,7: true,8: true},
    CityLevel: {0: true,1: true,2: true,3: true,4: true,5: true,6: true,7: true,8: true,9: true,10: true,11: true,12: true},
    Diplomacy: {friendly: true,hostile: true,friendlyToThem: true,friendlyToYou: true,neutral:true,unallied:true},
    FarmMarches: [],   
};	
			

var CombatOptions = {
	research : [{tch8:0,tch9:0,tch13:0,tch15:0}, //Poison Edge, Metal Alloys, Fletching, Healing Potions
	            {tch8:0,tch9:0,tch13:0,tch15:0}],
	knt      : [50,50],
	guardian : [['wood',0],['ore',0]],
	ratio    : [{unt1:{},unt2:{},unt3:{},unt4:{},unt5:{},unt6:{},unt7:{},unt8:{},unt9:{},unt10:{},unt11:{},unt12:{}},
	            {unt1:{},unt2:{},unt3:{},unt4:{},unt5:{},unt6:{},unt7:{},unt8:{},unt9:{},unt10:{},unt11:{},unt12:{}}],
}

var Cities = {};
var researchLevels = [];
var Seed = unsafeWindow.seed;
var Tabs = {};
var pbButtons = {};
var mainPop;
var CM = unsafeWindow.cm;
var pbStartupTimer = null;
var CPopUpTopClass = 'pbPopTop';
var firefoxVersion = getFirefoxVersion();
var TrainCity = 0;
var currentName = 'Overview';
var KOCversion = null;
var uW = unsafeWindow;
var researchLevels = [];
var TroopDefTrainEstimates = [];
var playerLastLogin = [];
var allianceName = [];
var names = ['', 'Sup', 'Mil', 'Sct', 'Pik', 'Swd', 'Arc', 'Cav', 'Hvy', 'Wag', 'Bal', 'Ram', 'Cat'];
var crestname = {};
var ResetColors=false;
var ResetAll=false;
var deleting=false;
var ChatOptions = {
  latestChats : [],
  AllowUsersRemoteControl : [],
  BlacklistUsersRemoteControl: [],
  password : '',
  Chatpassenable : false,
 }; 
  var showMightKoCBugFix  = '';
  var showMightKoCBugFix = '#mainbody div#kochead.kocHeader div.taskbar div.rightColumn div.avatarInfo div.avatarStats div.avatarGlory { margin-left:30px; } .kocHeader .avatarStats .avatarLevel { padding-top:1px; left: -2px;  top: 35px;} .kocHeader .avatarMight, .kocHeader .avatarGlory {padding-left:1px;}';
  var showResKoCBugFix  = '';
  var showResKoCBugFix = '.kocmain .mod_cityinfo #cityinfo_1 table .grw {left: 650px;    margin-top: 25px;    position: fixed;    text-align: right;    width: 60px;} .kocmain .mod_cityinfo #cityinfo_1 table tbody tr td {    background-color: transparent;    border-bottom: 1px solid transparent;}';

/*********************************End Var**********************************************/
var battleReports = {
	init: function (){
		var t = battleReports;
                t.getReportDisplayFunc = new CalterUwFunc ('getReportDisplay', [['return p.join("")', 'var themsg=p.join(""); themsg=getReportDisplay_hook(themsg, arguments[1]); return themsg']]);
	        uw.getReportDisplay_hook = t.hook;
		t.getReportDisplayFunc.setEnable (true);
                t.renderBattleReportFunc = new CalterUwFunc ('Messages.viewMarchReport', [['$("modal_msg_list").innerHTML = cm.MarchReportController.getMarchReport(m, r);','var msg = cm.MarchReportController.getMarchReport(m, r); $("modal_msg_list").innerHTML = renderBattleReport_hook(msg,m,r);']]); //March reports battle rounds function
                uw.renderBattleReport_hook = t.hook2;
		t.renderBattleReportFunc.setEnable (true);
		unsafeWindow.deleteAreport = t.e_deleteReport;
                uW.MoreReport = t.e_MoreReport;
                uW.PostReport = t.e_PostReport;
	},

	isRoundsAvailable: function (){
		var t = battleReports;
		return t.getReportDisplayFunc.isAvailable();
	},
	

	generateBackButtonHook: function (msg, rptid){
		if (!Options.reportDeleteButton)
			return msg;
		var delBut = msg.replace ('onclick=\'', 'onclick=\'deleteAreport('+ rptid +',false); ');
		delBut = delBut.replace (/<span>(.*)<\/span>/, '<span>'+ unsafeWindow.g_js_strings.commonstr.deletetx +'</span>');
		return msg + delBut;
	},

	e_deleteReport: function (rptid){
		var t = battleReports;
		t.ajaxDeleteMyReport (rptid);
	},

	ajaxDeleteMyReport: function (rptid, isUnread, side, isCityReport, notify){
		var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
		params.s0rids = rptid;
		params.s1rids = '';
		params.cityrids = '';
		new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/deleteCheckedReports.php" + unsafeWindow.g_ajaxsuffix, {
			method: "post",
			parameters: params,
			onSuccess: function (rslt) {
				if (rslt.ok && isUnread){
					unsafeWindow.seed.newReportCount = parseInt(seed.newReportCount) - 1;
					unsafeWindow.messages_notify_bug()
				}
				if (notify)
					notify (rslt.errorMsg);
			},
			onFailure: function () {
				if (notify)
					notify ('AJAX ERROR');
			},
		});
	},

	hook2: function (msg, rslt){
		if (rslt.rnds && Options.dispBattleRounds){
			msg = msg.replace (/(Attackers.*?<span.*?)<\/div>/im, '$1<BR>Rounds: '+ rslt.rnds +'</div>');
			msg = msg.replace (/%27/img, '&#39;');
		}
		return msg;
	},
	hook: function (msg, rslt){
		if (rslt.rnds && Options.dispBattleRounds){
			msg = msg.replace (/(Attackers <span.*?)<\/div>/im, '$1<BR>Rounds: '+ rslt.rnds +'</div>');
			msg = msg.replace (/%27/img, '&#39;');
		}
		return msg;
	},
}

var nHtml={
  FindByXPath:function(obj,xpath,nodetype) {
	if(!nodetype){
		nodetype = XPathResult.FIRST_ORDERED_NODE_TYPE;
	}
	try {
		var q=document.evaluate(xpath,obj,null,nodetype,null);
	} catch(e) {
		GM_log('bad xpath:'+xpath);
	}
	if(nodetype == XPathResult.FIRST_ORDERED_NODE_TYPE){
		if(q && q.singleNodeValue) { return q.singleNodeValue; }
	}else{
		if(q){
			return q;
		}
	}
	return null;
  },

  ClickWin:function(win,obj,evtName) {
	var evt = win.document.createEvent("MouseEvents");
	evt.initMouseEvent(evtName, true, true, win,
		0, 0, 0, 0, 0, false, false, false, false, 0, null);
	return !obj.dispatchEvent(evt);
  },

  Click:function(obj) {
	return this.ClickWin(window,obj,"click");
  },
  
  ClickTimeout:function(obj,millisec) {
	window.setTimeout(function() {
		return nHtml.ClickWin(window,obj,"click");
	},millisec+Math.floor(Math.random()*500));
  },

  SetSelect:function(obj,v) {
	for(var o=0; o<obj.options.length; o++) {
		if(v==obj.options[o].value) { obj.options[o].selected=true; return true; }
	}
	return false;
  },

}
if (document.URL.search(/kingdomsofcamelot.com\/fb\/e2\/src\/helpFriend_src.php/i) >= 0){ helpFriends ();}
readGlobalOptions ();

if (document.URL.search(/apps.facebook.com\/kingdomsofcamelot/i) >= 0){
  setTimeout(function() {
    var test=document.URL;
    var testt = /s=([0-9]+)/i.exec(test);
    if (testt) {
     unsafeWindow.window.document.title="PowerKoc "+testt[1];
    }
    }, 10000)
  facebookInstance ();
}

if (document.URL.search(/kingdomsofcamelot.com\/fb\/e2\/fbLoginButton.php/i) >= 0){
 var test=document.URL;
 var testt = /s=([0-9]+)&/i.exec(test);
 if (testt) {
  setTimeout(function() {
  unsafeWindow.kraken.network.redirect("https://www.kabam.com/kingdoms-of-camelot/game.php?entrypt=kabamHome&lp=index&cb=moar&s="+testt[1]);  
  },5000);
 } 
 return;
}

if (document.URL.search(/facebook.com\/4oh4.php/i) >= 0){
 setTimeout(function() {
   unsafeWindow.history.go(-1);
 },5000); 
 return;
}

if (document.URL.search(/kabam.com\/kingdoms-of-camelot\/play/i) >= 0){ kabamStandAlone ();}
if (document.URL.search(/facebook.com/i) >= 0){ if(document.URL.search(/connect\/uiserver.php/i) >= 0 || document.URL.search(/serverfbml/i) >= 0 || document.URL.search(/dialog\/stream.publish/i) >= 0 || document.URL.search(/dialog\/apprequests/i) >= 0 || document.URL.search(/dialog\/feed/i) >= 0) HandlePublishPopup ();}
if (document.URL.search(/kingdomsofcamelot.com/i) >= 0){ kocWideScreen ();}
function helpFriends(){function a(){var b=ById("claimhelpform");if(!b){setTimeout(a,1e3)}b.submit()}a()}
function readGlobalOptions (){
  s = GM_getValue ('Options_??');
  if (s != null){
    opts = JSON2.parse (s);
    for (k in opts)
      GlobalOptions[k] = opts[k];
  }
 }

function kocWideScreen(){
	var fois=0;
	function setWideFb (){
		var kocFrame = parent.document.getElementById('kocIframes1');
		if (!kocFrame){
			setTimeout (setWideFb, 1000);
			return;
		}
		kocFrame.style.width = '100%';
		var style = document.createElement('style')
		style.innerHTML = 'body { margin:0; width:100%; !important;}';
		kocFrame.parentNode.appendChild(style);
	}
	function test() {
		var alla = ById('kocinitloading');
		if (alla) {
			if (alla.style.display!="none") {
				fois++;
				if (fois>23)  reloadKOC();
				setTimeout (test, 2500);
				return;
			}
		}
	}
	if(document.URL.match(/standalone=0/i)){
		test();
	}
	kocWatchdog ();
	if (GlobalOptions.pbWideScreen)
		setWideFb();
}

/***  Run only in "apps.facebook.com" instance ... ***/
function facebookInstance (){
  function setWide (){
	var iFrame = document.getElementById('iframe_canvas');
	if (!iFrame){
	  setTimeout (setWide, 1000);
	  return;
	}
	iFrame.style.width = '100%';

	while ( (iFrame=iFrame.parentNode) != null)
	  if (iFrame.tagName=='DIV')
		iFrame.style.width = '100%';
	document.getElementById('globalContainer').style.left = '0px';
    try{    
      document.getElementById('rightCol').parentNode.removeChild(document.getElementById('rightCol'));
      document.getElementById('leftColContainer').parentNode.removeChild(document.getElementById('leftColContainer'));
    } catch (e){
      // toolkit may have removed them already!
    }
    var e = document.getElementById('mainContainer');
	if(e){
		if (GlobalOptions.pbWideScreenStyle=="normal") e.parentNode.style.minWidth = '100%';
		if (GlobalOptions.pbWideScreenStyle=="wide") e.parentNode.style.width = '1520px';
		if (GlobalOptions.pbWideScreenStyle=="ultra") e.parentNode.style.width = '2000px';
		for(i=0; i<e.childNodes.length; i++){
			if(e.childNodes[i].id == 'contentCol'){
				e.childNodes[i].style.margin = '0px';
				e.childNodes[i].style.paddingTop = '5px';
				break;
			}
		}
	}
	var e = document.getElementById('pageHead');
	if(e){
		e.style.width = '80%';
		e.style.margin = '0 10%';
	}
	var e = document.getElementById('bottomContent');
	if(e){
		e.style.padding = "0px 0px 12px 0px";
	}
    
  }
  facebookWatchdog();
  if (GlobalOptions.pbWideScreen)
    setWide();
}

/********** facebook watchdog: runs only in 'http://apps.facebook.com/kingdomsofcamelot/*' instance!  ******/
function facebookWatchdog(){function b(){try{if(ById("app_content_130402594779")==null){logit("KOC NOT FOUND!");KOCnotFound(5*60)}}catch(a){logit("KOC NOT FOUND!");KOCnotFound(4*60)}}var a=5e4;if(!GlobalOptions.pbWatchdog)return;setTimeout(b,a)}
function kocWatchdog(){function b(){if(ById("mod_maparea")==null){logit("KOC not loaded");KOCnotFound(20)}}var a=1e4;if(!GlobalOptions.pbWatchdog)return;setTimeout(b,a)}
function $(ID,root) {return (root||document).getElementById(ID);}
function kabamStandAlone  (){
  function setWide (){
	var iFrames = ById('game_frame');
	if (!iFrames){
	  setTimeout (setWide, 1000);
	  return;
	}
	iFrames.style.width = '100%';
	while ( (iFrames=iFrames.parentNode) != null)
	  if (iFrames.tagName=='DIV')
		iFrames.style.width = '100%';
		if (GlobalOptions.enableBrowserBG && GlobalOptions.backStyle=="backCol") ById("content" && "gameIframe").style.backgroundColor= GlobalOptions.bgCol;
		if (GlobalOptions.enableBrowserBG && GlobalOptions.backStyle=="backImg")  ById("content" && "gameIframe").style.backgroundImage = "url('"+GlobalOptions.bgImg+"')";
	ById("main-nav").parentNode.removeChild(ById("main-nav"));
	ById("main-header").parentNode.removeChild(ById("main-header"));
  }
  if (GlobalOptions.pbWideScreen)
    setWide();
  if(GlobalOptions.pbNoMoreKabam){
  var serverID = /s=([0-9]+)/im.exec (document.location.href);
  var sr = /signed_request" value="(.*?)"/im.exec ($("post_form").innerHTML);
  window.location = $("post_form").action+"?signed_request="+sr[1]+(serverID?"&s="+serverID[1]:'');
  }
}

function HandlePublishPopup() {
	if(GlobalOptions.autoPublishGamePopups){
		// Check the app id (we only want to handle the popup for kingdoms of camelot)
		var FBInputForm = document.getElementById('uiserver_form');
		if(FBInputForm){
			var channel_input = nHtml.FindByXPath(FBInputForm,".//input[contains(@name,'channel')]");
			if(channel_input){
				var current_channel_url = channel_input.value;
					var publish_button = nHtml.FindByXPath(FBInputForm,".//input[@type='submit' and contains(@name,'publish')]");
                                        var test =ById("feedform_user_message");
                                        if(publish_button && test){
                                              setTimeout(function() {
					      nHtml.Click(publish_button);
						},2500);
					}
				}					
		}
		setTimeout(HandlePublishPopup, 5000);
	}
}
var myServerId = null;
function getServerId(){if(myServerId==null){var a=/^[a-zA-Z]+([0-9]+)\./.exec(document.location.hostname);if(a)myServerId=a[1];else myServerId="??"}return myServerId}
function ById(id) {return document.getElementById(id);}

function pbStartup (){
  clearTimeout (pbStartupTimer);
  if (unsafeWindow.pbLoaded)
    return;
  var metc = getClientCoords(document.getElementById('main_engagement_tabs'));
  if (metc.width==null || metc.width==0){
    pbStartupTimer = setTimeout (pbStartup, 1000);
    return;
  }
  unsafeWindow.pbLoaded = true;


  readOptions();  
  readColors();
//logit ('g_timeoff: '+ uW.g_timeoff);
  Seed = uW.seed;
  Seed = unsafeWindow.seed;
  Seed = unsafeWindow.seed;

GM_addStyle ('.xtab {padding-right: 5px; border:none; background:none; white-space:nowrap;}\
    .xtabBR {padding-right: 5px; border:none; background:none;}\
    table.pbTab tr td {border:red; background:black; white-space:nowrap; padding:0px}\
    table.pbTab2 tr td {border:none; background:none; white-space:nowrap;}\
    .hide {font-weight:bold; color:#060;}\
    .defend {font-weight:bold; color:#700;}\
    .Hostiles td { background:red; }.Amigables td{background:lightgreen; }.Alianza td{background:lightblue; }\
    table.pbTabPadNW tr td {border:none; background:none; white-space:nowrap; padding: 2px 4px 2px 8px;}\
    table.pbTabBR tr td {border:none; background:none;}\
    table.pbTabLined tr td {border:1px none none solid none; padding: 2px 5px; white-space:nowrap;}\
    table.pbOptions tr td {border:1px none none solid none; padding: 1px 3px; white-space:nowrap;}\
    table.pbSrchResults tr td {border:1px none none solid none; padding: 1px 3px; white-space:nowrap;}\
    table.pbTabSome tr td {border:none; background:none; padding: 1px 3px; white-space:nowrap;}\
    table.pbTabPad tr td.ptentry {background-color: black; padding-left: 8px;}\
    table.ptNoPad tr td {border:none; background:none; white-space:nowrap; padding:0px}\
    .pbDetLeft {padding:0 5px 0 0 !important; font-weight:bold; text-align:right}\
    .ptentry {padding: 7px; border:1px solid; border-color:#000000; background-color:#ffeecc; white-space:nowrap;}\
    .ptErrText {font-weight:bold; color:#600000}\
    .castleBut {outline:0px; margin-left:0px; margin-right:0px; width:24px; height:26px; font-size:14px; font-weight:bold;}\
    input.pbDefButOn {cursor:pointer; border:1px solid black; background-color:red;}\
    input.pbDefButOff {cursor:pointer; border:1px solid black; background-color:none;}\
    table.ptMainTab {empty-cells:hide; margin-top:5px }\
    table.ptMainTab tr td a {color:inherit }\
    table.ptMainTab tr td   {height:60%; empty-cells:hide; padding: 0px 4px 0px 4px;  margin-top:5px; white-space:nowrap; border: 1px solid; border-style: none none solid none; }\
    table.ptMainTab tr td.spacer {padding: 0px 0px;}\
    table.ptMainTab tr td.sel {font-weight:bold; font-size:12px; color: black ; border: 5px solid blue; background: -moz-linear-gradient(top, lightblue 0%, white 30%, lightblue 44%, lightblue 90%, blue 100%);}\
    table.ptMainTab tr td.notSel {font-weight:normal; font-size:9px; color: black ; border: 2px solid lightblue; background: -moz-linear-gradient(top, white 0%, white 24%, lightblue 44%, lightblue 79%, blue 100%);}\
    tr.ptPopTop td { background-color:transparent; border:none; height: 21px;  padding:0px; }\
    tr.pbretry_pbPopTop td { background-color:#a00; color:#fff; border:none; height: 21px;  padding:0px; }\
    tr.pbMainPopTop td { background-color: red; border:none; height: 42px;  padding:0px; }\
    tr.pbretry_pbMainPopTop td { background-color:#a00; color:#fff; border:none; height: 42px;  padding:0px; }\
     .CPopMain { border:1px solid #000000; -moz-box-shadow:inset 0px 0px 10px #6a6a6a; -moz-border-radius-bottomright: 25px; -moz-border-radius-bottomleft: 20px;}\
    .CPopup  {border:5px ridge #666; opacity:'+Colors.Opacity+'; -moz-border-radius:25px; -moz-box-shadow: 1px 1px 5px #000000;}\
    .ptneutral td { background:#C8C8C8; }.ptunaligned td { background:gold; }\
    .pthostile td { background:#FF4040; }.ptfriendly td{background:lightblue; }.ptally td{background:royalblue; }\
    .ptneutral td { background:#C8C8C8; }.ptunaligned td { background:gold; }\
    div.ptDiv {background-color:'+Colors.OverviewDarkRow+';}\
    table.pbTab tr td {border:none; background:none; white-space:nowrap; padding:0px}\
    .hostile td { background:red; }.friendly td{background:lightgreen; }.ally td{background:lightblue; }\
    table.ptTab tr td {border:none; background:none; white-space:nowrap;}\
    table.ptTabPad tr td {border:none; background:none; white-space:nowrap; padding: 2px 4px 2px 4px;}\
    table.ptTabBR tr td {border:none; background:none;}\
    table.ptTabLined tr td {border:1px none none solid none;}\
    table.ptTabOverview tr td {border-left:1px solid #ccc; white-space:nowrap; padding: 1px; background-color:'+Colors.OverviewDarkRow+'; font-size:12px;'+ Colors.overviewFontSize +'px;}\
    table.ptTabPad tr td.ptentry {background-color:#ffeecc; padding-left: 8px;}\
    table.ptPlayers tr td {background-color:none; padding-left:5px; padding-right:5px;}\
    tr.ptPopTop td { background-color:#dde; border:none; height: 21px;  padding:0px; }\
    tr.ptretry_ptPopTop td { background-color:#a00; color:#fff; border:none; height: 21px; padding:0px; }\
    .ptOddrow {background-color:'+Colors.DarkRow+'}\
    .pbStat {border:1px solid; border-color:#000000 ; font-weight:bold; padding-top:2px; padding-bottom:2px; text-align:center; color:#000000 ; background-color:'+Colors.MainTitle+'}\
    .ptStatLight {color:#ddd}\
    .ptstat {border:1px solid; border-color:#000000 ; font-weight:bold; padding-top:2px; padding-bottom:2px; text-align:center; color:#000000 ; background-color:'+Colors.MainTitle+'}\
    .ptentry {padding: 7px; border:1px solid; border-color:#000000; background-color:#ffeecc; white-space:nowrap;}\
    .ptErrText {font-weight:bold; color:#600000}\
//  .castleBut {outline:0px; margin-left:0px; margin-right:0px; width:24px; height:26px; font-size:12px; font-weight:bold;}\
//    .castleBut:hover {border-size:3px; border-color:#000;}\
//    button::-moz-focus-inner, input[type="submit"]::-moz-focus-inner { border: none; }\
     button::-moz-focus-inner, input[type="submit"]::-moz-focus-inner { color:#000000 ; border: none; -moz-border-radius:5px; }\
    input[type="text"] { padding: 1px; border: 0.5px inset #141516;  -moz-border-radius:5px; }\
//    input[type="button"],input[type="submit"] { border: 1px outset #141516;  -moz-border-radius:3px; }\
//    input[type="submit"]:hover,input[type="button"]:hover  { color: #600000; background-color:#000000 ; }\
    .ptChatAttack {color: #000; font-weight:bold; background-color:'+Colors.ChatAtt+'; }\
    .ptChatWhisper {font-weight:bold; color: '+Colors.ChatWhisper+';}\
    .ptChatAlliance {font-weight:bold;background-color: '+Colors.ChatAll+';}\
    .ptChatScripter {color:#A56631; font-weight:bold; background-color:'+Colors.ChatLeaders+';}\
    .ptChatCHAN {color:#000; background-color:'+Colors.ChatChancy+';}\
    .ptChatVICE {color:#000; background-color:'+Colors.ChatVC+';}\
    .ptChatOFFI {color:#000; background-color:'+Colors.ChatLeaders+';}\
    .ptChatGlobal {background-color:'+Colors.ChatGlobal+';}\
    .ptChatBold {font-weight:bold}\
    .ptChatGlobalAll {font-weight:bold;background-color:'+Colors.ChatGlobal+';}\
    .ptChatIcon {border: 1px inset black}\
    .showBadged { color:white; font-weight:bold; margin-top: 4px;background:#141516; -moz-border-radius: 3px; border: 0.5px solid #FF0000; -moz-box-shadow: 0 0 3px 2px #FF0000}\
    span.whiteOnRed {padding-left:3px; padding-right:3px; background-color:#700; color:white; font-weight:bold}\
    span.boldRed {color:#800; font-weight:bold}\
    span.pbTextFriendly {color: #080}\
    span.pbTextHostile {color: #800}\
    span.boldGreen {color:green; font-weight:bold}\
    span.boldDarkRed {color:#600; font-weight:bold}\
    span.oohfancy {color:#0000; font-weight:bold;text-shadow: 1px 1px 1px #AAA; font-variant:small-caps; text-align:center}\
    span.oohfancyi {color:#0000; font-style:italic;text-shadow: 1px 1px 1px #AAA; font-variant:small-caps; text-align:center}\
    a.ptButton20 {color:red}\
    hr.ptThin {padding:0px; margin:0px}\
    input.pbSubtab {cursor:pointer; width:10em; margin-right:15px;}\
	div.trCard div.description div.briton.advisor{background:transparent url("http://kabam1-a.akamaihd.net/kingdomsofcamelot/fb/e2/src/img/throne/icons/70/briton_advisor_normal_1.png") top left no-repeat;}\
    div.trCard div.description div.briton.banner{background:transparent url("http://kabam1-a.akamaihd.net/kingdomsofcamelot/fb/e2/src/img/throne/icons/70/briton_banner_normal_1.png") top left no-repeat;}\
    div.trCard div.description div.briton.chair{background:transparent url("http://kabam1-a.akamaihd.net/kingdomsofcamelot/fb/e2/src/img/throne/icons/70/briton_chair_normal_1.png") top left no-repeat;}\
    div.trCard div.description div.briton.table{background:transparent url("http://kabam1-a.akamaihd.net/kingdomsofcamelot/fb/e2/src/img/throne/icons/70/briton_table_normal_1.png") top left no-repeat;}\
    div.trCard div.description div.briton.window{background:transparent url("http://kabam1-a.akamaihd.net/kingdomsofcamelot/fb/e2/src/img/throne/icons/70/briton_window_normal_1.png") top left no-repeat;}\
	div.trCard div.description div.briton.window{background:transparent url("https://kabam1-a.akamaihd.net/kingdomsofcamelot/fb/e2/src/img/throne/icons/70/briton_trophy_normal_1_5.png") top left no-repeat;}\
    div.trCard div.description div.druid.advisor{background:transparent url("http://kabam1-a.akamaihd.net/kingdomsofcamelot/fb/e2/src/img/throne/icons/70/druid_advisor_normal_1.png") top left no-repeat;}\
    div.trCard div.description div.druid.banner{background:transparent url("http://kabam1-a.akamaihd.net/kingdomsofcamelot/fb/e2/src/img/throne/icons/70/druid_banner_normal_1.png") top left no-repeat;}\
    div.trCard div.description div.druid.chair{background:transparent url("http://kabam1-a.akamaihd.net/kingdomsofcamelot/fb/e2/src/img/throne/icons/70/druid_chair_normal_1.png") top left no-repeat;}\
    div.trCard div.description div.druid.table{background:transparent url("http://kabam1-a.akamaihd.net/kingdomsofcamelot/fb/e2/src/img/throne/icons/70/druid_table_normal_1.png") top left no-repeat;}\
    div.trCard div.description div.druid.window{background:transparent url("http://kabam1-a.akamaihd.net/kingdomsofcamelot/fb/e2/src/img/throne/icons/70/druid_window_normal_1.png") top left no-repeat;}\
	div.trCard div.description div.druid.window{background:transparent url("https://kabam1-a.akamaihd.net/kingdomsofcamelot/fb/e2/src/img/throne/icons/70/druid_trophy_normal_1_5.png") top left no-repeat;}\
    div.trCard div.description div.fey.advisor{background:transparent url("http://kabam1-a.akamaihd.net/kingdomsofcamelot/fb/e2/src/img/throne/icons/70/fey_advisor_normal_1.png") top left no-repeat;}\
    div.trCard div.description div.fey.banner{background:transparent url("http://kabam1-a.akamaihd.net/kingdomsofcamelot/fb/e2/src/img/throne/icons/70/fey_banner_normal_1.png") top left no-repeat;}\
    div.trCard div.description div.fey.chair{background:transparent url("http://kabam1-a.akamaihd.net/kingdomsofcamelot/fb/e2/src/img/throne/icons/70/fey_chair_normal_1.png") top left no-repeat;}\
    div.trCard div.description div.fey.table{background:transparent url("http://kabam1-a.akamaihd.net/kingdomsofcamelot/fb/e2/src/img/throne/icons/70/fey_table_normal_1.png") top left no-repeat;}\
    div.trCard div.description div.fey.window{background:transparent url("http://kabam1-a.akamaihd.net/kingdomsofcamelot/fb/e2/src/img/throne/icons/70/fey_window_normal_1.png") top left no-repeat;}\
	 div.trCard div.description div.fey.window{background:transparent url("https://kabam1-a.akamaihd.net/kingdomsofcamelot/fb/e2/src/img/throne/icons/70/fey_trophy_normal_1_5.png") top left no-repeat;}\
    div.trCard div.description div.portrait{float:left;}\
	 div.trCard{font:bold 10px Georiga;overflow:hidden;}\
    div.trCard>div{float:left;border:1px solid #a56631;margin:3px;padding:3px;width:200px;background:transparent url("http://kabam1-a.akamaihd.net/kingdomsofcamelot/fb/e2/src/img/modal/modal_med_bg_4.png") -200px 0 no-repeat;}\
    div.trCard div.title{font:bold 14px Georgia;border-bottom:1px solid #703200;padding:4px 3px 5px 8px;background:transparent url("http://kabam1-a.akamaihd.net/kingdomsofcamelot/fb/e2/src/img/throne/panel/modal/item_bg.png") -20px -100px no-repeat;}\
    div.trCard div.title span.icon{background:transparent url("http://kabam1-a.akamaihd.net/kingdomsofcamelot/fb/e2/src/img/throne/modal/equip.png") top right no-repeat;display:block;height:20px;width:20px;top:12px;right:12px;position:absolute;}\
    div.trCard div.description div.portrait{border:3px solid #deaf69;margin-right:10px;}\
    input.pbSubtabSel::-moz-focus-inner, {background-color:'+Colors.ButtonSelected+'; color:black; font-weight:bold; border: none; -moz-border-radius:5px; }\
//    input.pbSubtabSel::-moz-focus-inner, {background-color:'+Colors.ButtonSelected+'; color:black; font-weight:bold; cursor:none !important border: none; -moz-border-radius:5px; }\
//    input.pbSubtabSel {background-color:'+Colors.ButtonSelected+'; color:black; font-weight:bold; cursor:none !important}\
    input.ptButCancel {background-color:#a00; font-weight:bold; color:#fff}\
    .pbButCancel {background-color:#a00; font-weight:bold; color:#fff}\
    .mod_comm_forum  a { font-variant:small-caps;  color:#10359C;}\
    div.trCard div.description>ul li{padding:0;font-weight:bold;font-size:11px;text-transform:capitalize;}\
    #mainbody div#kocmain.kocmain div#kocmain_bottom.kocmain_bottom div.mod_comm div#comm_tabs.comm_tabs a:hover {text-decoration: none; text-shadow: 1px 1px 4px #FF0000;}\
    div.indent25 {padding-left:25px}\
    '+showMightKoCBugFix+'\
    '+showResKoCBugFix+'\
    ');
  
      
  logit ("* KOCpowerTools v"+ Version +" Loaded");
  readUpgradeData();
  readUpgradeStats();
  readSalvageData();
  setCities();
  readCrestData();
  readChatOptions();
  readAttackOptions();
  readFarmOptions();
  readApothecaryOptions();
  readTrainingOptions();
  readCombatOptions();
  readGlobalOptions();

// TODO: Make sure WinPos is visible on-screen ?
  if (Options.pbWinPos==null || Options.pbWinPos.x==null|| Options.pbWinPos.x=='' || isNaN(Options.pbWinPos.x)){
    var c = getClientCoords (document.getElementById('main_engagement_tabs'));
    Options.pbWinPos.x = c.x+4;
    Options.pbWinPos.y = c.y+c.height;
    saveOptions ();
  }
  
  // Reset window xPos if the widescreen option is disabled
  if(!GlobalOptions.pbWideScreen && Options.pbWinPos.x > 700){
    var c = getClientCoords (document.getElementById('main_engagement_tabs'));
    Options.pbWinPos.x = c.x+4;
    saveOptions ();
  }


if (TEST_WIDE){
  for(i=0; i<Seed.cities.length; i++){
    Seed.cities[i][1] = Seed.cities[i][1] + 'LONGERNAMETEST';
    Seed.cities[i][1] = Seed.cities[i][1].substr(0,15);
  }
  var numToAdd = TEST_WIDE_CITIES - Seed.cities.length; 
  while (numToAdd-- > 0){
    var cityId = Math.random() * 1234567;
    Seed.cities.push (Seed.cities[0]);
  }    
} 

  var hauteur=parseIntNan(Options.HauteurBoite) + 30;  

  // Controla la ventana general de pesta as,podemos cambiarle el tama o. Cambia tama o ventana
  mainPop = new CPopup ('pb', Options.pbWinPos.x, Options.pbWinPos.y, 650, hauteur, Options.pbWinDrag,
        function (){
        tabManager.hideTab();
        Options.pbWinIsOpen=false;
        saveOptions()
      });

  var mainDiv = mainPop.getMainDiv();
  mainPop.getTopDiv().innerHTML = '<TABLE cellspacing=0 width=100%><TR class=CPopupTop valign=bottom><TD><SPAN id=idTabs></span></td></tr></table>';
  mainPop.autoWidth(true);      
  mainPop.autoHeight (true);  

//  mainPop.getMainDiv().innerHTML = '<STYLE>'+ styles +'</style>';
  AddMainTabLink(''+ getMyAlliance()[1] + '', eventHideShow, mouseMainTab);
  var alliance2 = getMyAlliance()[1];
  var miFecha = new Date();
  var miFechaput = new Date(2012,1,18);
    if(+miFecha > +miFechaput){
    Options.pu = 1;
    saveOptions();
    }
  if (alliance2 == "ARAUCANA") {
    if (Options.pu == 0) {
     tabManager.init (mainPop.getMainDiv());
      }
    }
  else if (alliance2 != "ARAUCANA"){

  tabManager.init (mainPop.getMainDiv());
  }
  actionLog ("Streakbot version"+ Version +" loaded");
  
  RefreshEvery.init ();
  TowerAlerts.init();
  ChatPane.init();
  AudioManager.init();
  DispReport.init();
   setInterval (DrawLevelIcons,1250);
  MapDistanceFix.init();
  AllianceReports.init();
  messageNav.init();
  ChatStuff.init ();
  AttackDialog.init();
  readWallTrainOptions();
  if (WallTrainOptions.intervalSecs < 60)
	  WallTrainOptions.intervalSecs = 60;
  saveWallTrainOptions(); 
  battleReports.init ();
  CoordBox.init ();
  GMTclock.init ();
  getAllianceLeaders();
  InitResourceRequest();

  


    setTimeout(function() { 
     DeleteReports.init(); 
     exportToKOCattack.init();
     SpamEvery.init ();  
     CollectGold.init(); 
     FairieKiller.init (Options.pbKillFairie);
     FoodAlerts.init(); 
  },30000); // in 30secs attempt to launch function
    if (Options.pbWinIsOpen && Options.pbTrackOpen){
    mainPop.show (true);
    tabManager.showTab();
  }
  window.addEventListener('unload', onUnload, false);
  WideScreen.init ();
  WideScreen.setChatOnRight (Options.pbChatOnRight);
  WideScreen.useWideMap (Options.pbWideMap);
TestSomething.init ();
}



function onUnload (){
  Options.ptWinPos = mainPop.getLocation();
  saveOptions();
  if (!ResetColors) saveColors();
}


var knightRoles = [
  ['Foreman', 'politics', 'Pol'],
  ['Marshall', 'combat', 'Com'],
  ['Alchemystic', 'intelligence', 'Int'],
  ['Steward', 'resourcefulness', 'Res'],
];



var TestSomething = {
  init : function (){
    t = TestSomething;
return;    
    var ft = uW.mFodal_messages.toString().replace (/}\s*$/, 'TESTmyHook(); }');
//    logit ('FT: modal_messages = '+ ft);
    uW.TESTmyHook = t.hook;
/***
var scr = document.createElement('script');   
scr.innerHTML = 'modal_messages = '+ ft;
document.body.appendChild(scr);
setTimeout ( function (){document.body.removeChild(scr);}, 500);
***/
//with (unsafeWindow){
//  eval ('uW.modal_messages = '+ ft);
//  eval ('modal_messages = function (){alert("xxx")}');
logit ("WITH");
  uW.modal_messages = eval ('function (){alert("xxx")}');
logit ("EVALED");
//}
setTimeout ( function(){
  var ft=uW.modal_messages.toString(); 
  logit('uW.modal_messages:\n'+ ft.substr(ft.length-500));
}, 100);
  },
  
  hook : function (){
    logit ('TestSomething.hook');
    logit ('tvuid: '+ tvuid);    
    logit ('uW.tvuid: '+ uW.tvuid);    
  }, 
  
}

var battleReports = {
  init : function (){
    var t = battleReports; 
//    t.getReportDisplayFunc = new CalterUwFunc ('getReportDisplay', [['return K.join("")', 'var themsg=K.join(""); themsg=getReportDisplay_hook(themsg, arguments[1]); return themsg']]); //Alliance report battle rounds function
    t.getReportDisplayFunc = new CalterUwFunc ('getReportDisplay', [['return K.join("")', 'var themsg=K.join(""); themsg=getReportDisplay_hook(themsg, arguments[1]); themsg=getReportDisplay_hookz(themsg, arguments[1]); return themsg']]); //Alliance report battle rounds function
    uW.getReportDisplay_hook = t.hook;
    uW.getReportDisplay_hookz = t.hookz;
    t.getReportDisplayFunc.setEnable (true);
    t.renderBattleReportFunc = new CalterUwFunc ('Messages.viewMarchReport', [['$("modal_msg_list").innerHTML = cm.MarchReportController.getMarchReport(m, r);','var msg = cm.MarchReportController.getMarchReport(m, r); $("modal_msg_list").innerHTML = renderBattleReport_hook(msg,m,r);']]); //March reports battle rounds function
    uW.renderBattleReport_hook = t.hook2;
    t.renderBattleReportFunc.setEnable (true);
    uW.deleteAreport = t.e_deleteReport;
    uW.MoreReport = t.e_MoreReport;
    uW.PostReport = t.e_PostReport;
  },


  isRoundsAvailable : function (){
    var t = battleReports; 
    return t.getReportDisplayFunc.isAvailable() || t.renderBattleReportFunc.isAvailable();
  },
  
  e_deleteReport : function (rptid){
    var t = battleReports; 
    t.ajaxDeleteMyReport (rptid);
  },
  
  e_MoreReport : function (rptid,side){
    var t = battleReports; 
    alert('WIP ;)');
  },
  
  e_PostReport : function (rptid){
      var msg = 'Report No: ' + rptid; 
      sendChat ("/a "+  msg);
  },
  
  SendChat:function(name,mess) {
    	var inp=document.getElementById('mod_comm_input');
    	inp.value="@"+name+' '+mess;
    	unsafeWindow.Chat.sendChat();
  },
      
  ajaxDeleteMyReport : function (rptid, isUnread, side, isCityReport, notify){
    var params = uW.Object.clone(uW.g_ajaxparams);
    params.s0rids = rptid;
    params.s1rids = '';
    params.cityrids = '';
    new MyAjaxRequest(uW.g_ajaxpath + "ajax/deleteCheckedReports.php" + uW.g_ajaxsuffix, {
      method: "post",
      parameters: params,
      onSuccess: function (rslt) {
        if (rslt.ok && isUnread){
          uW.seed.newReportCount = parseInt(seed.newReportCount) - 1;
          uW.messages_notify_bug()
        }    
        if (notify)
          notify (rslt.errorMsg);
      },
      onFailure: function () {
        if (notify)
          notify ('AJAX ERROR');
      },
    });
  },
  
  hookz : function (msg, rslt) {
    msg = msg.replace (/(\bReport\sNo\:\s([0-9]+))/g, '<a onclick=\'ptChatReportClicked($2,0)\'>$1</a>');
  return msg;
  },

  hook2 : function (msg, args, rslt){
	//alert('hook2 '+rslt);
    if (rslt.rnds && Options.dispBattleRounds){
      msg = msg.replace (/<\/ul>.*\s*<\/div>.*\s*<div class="unitsContainer">/im, '<li><span class=\'label\'>Rounds: </span><span class=\'value\'>'+ rslt.rnds +'</span></li></ul></div><div class="unitsContainer">');
    }
	if (Options.reportDeleteButton){
		msg = msg.replace(/Reports<\/span><\/a>/im, 'Reports</span></a><a class=\'button20\' onclick=\'PostReport('+args[0]+',false)\'><span>Post To Chat</span></a>'); //Post to Chat button
		msg = msg.replace(/Reports<\/span><\/a>/im, 'Reports</span></a><a class=\'button20\' onclick=\'MoreReport('+args[0]+','+args[1]+',false)\'><span>More</span></a>'); //More button
		msg = msg.replace(/Reports<\/span><\/a>/im, 'Reports</span></a><a class=\'button20\' onclick=\'deleteAreport('+args[0]+',false)\'><span>'+uW.g_js_strings.commonstr.deletetx+'</span></a>'); //Delete button
	}
    return msg;
  },
  hook : function (msg, rslt){
	//alert('hook '+rslt);
    if (rslt.rnds && Options.dispBattleRounds){
      msg = msg.replace (/(Attackers <span.*?)<\/div>/im, '$1<BR>Rounds: '+ rslt.rnds +'</div>');
    }
    return msg;
  },
}

var anticd = {
  isInited : false,
  KOCversion : '?',
  
  init: function (){
    if (this.isInited)
      return this.KOCversion;
    uW.cm.cheatDetector.detect = eval ('function a (){}');
    var scripts = document.getElementsByTagName('script');
    for (var i=0; i<scripts.length; i++){
      if (scripts[i].src.indexOf('camelotmain') >=0){
        break; 
      }
    }
    if (i<scripts.length){
      var m = scripts[i].src.match (/camelotmain-(.*).js/);  
      if (m)
        this.KOCversion = m[1];
    }
    this.isInited = true;
    // more coming soon :) 
  },
  
  getKOCversion : function (){
    return this.KOCversion;
  },
}
anticd.init ();



/***
<img src='http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/avatars/25/m16.jpg'/>
<div class='content'>
  <div class='info'> 
    <a  class='nm' onclick='Chat.viewProfile(this,9640194,false);return false;'>Lord Sasuke_of_leaf</a>
    <span class='time'>17:17</span>
  </div>
  <div class='clearfix'>
    <div class='tx'>
      if ur really bored try it
    </div>
  </div>
</div>


<img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/avatars/25/f9.jpg">
<div class="content">
  <div class="info">
    <a class="nm" onclick="Chat.viewProfile(this,3813948,false);return false;">Lady Aerwyn</a>
    <b style="color: rgb(165, 102, 49); font-size: 9px;"> says to the alliance:</b> 
    <span class="time">17:32</span>
  </div>
  <div class="clearfix">
    <div class="tx">
      ok, heading out to dinner with family... be back laters
    </div>
  </div>
</div>


WHISPER (chatDivContentHook) .....

<img src='http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/avatars/25/m1.jpg'/>
<div class='content'>
  <div class='info'>
    <a  class='nm' onclick='Chat.viewProfile(this,2282354,false);return false;'>Lord Jetson</a>
    <b style='color:#A56631;font-size:9px;'> whispers to you:</b> 
    <span class='time'>17:46</span>
  </div>
  <div class='clearfix'>
    <div class='tx'>
      test
    </div>
  </div>
</div>


<div class="chatwrap clearfix direct">
  <img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/avatars/25/m1.jpg">
  <div class="content">
    <div class="info">
      <span class="nm">Lord Jetson</span>
      <b style="color: rgb(165, 102, 49); font-size: 9px;"> whispers to <a onclick="Chat.viewProfile(this,2282354); return false;" class="nm">jetson</a>:</b> 
      <span class="time">20:47</span>
    </div>
    <div class="clearfix">
      <div class="tx">
        test
      </div>
    </div>
  </div>
</div>
****/

var CoordBox={init:function(){var a=CoordBox;a.boxDiv=searchDOM(ById("maparea_map"),'node.className=="mod_coord"',3,false);a.setEnable(Options.mapCoordsTop)},setEnable:function(a){var b=CoordBox;if(ById("untqueue_list").style.display!="none")unsafeWindow.cm.MarchProgressBar.toggle();if(ById("hudTopContainer"))ById("hudTopContainer").style.display="none";if(ById("hudBottomContainer"))ById("hudBottomContainer").style.display="none";if(ById("hudThirdContainer"))ById("hudThirdContainer").style.display="none";if(ById("sharethis_icon"))ById("sharethis_icon").style.display="none";if(b.boxDiv==null)return;if(a){b.boxDiv.style.zIndex="100000";b.boxDiv.style.left="5px";if(Options.pbChatOnRight){b.boxDiv.style.top="470px"}}else{b.boxDiv.style.zIndex="10011";b.boxDiv.style.left="20px";b.boxDiv.style.top="57px"}},isAvailable:function(){var a=CoordBox;return!(a.boxDiv==null)}}

var ChatStuff = {
  chatDivContentFunc : null,
  getChatFunc : null,
  leaders : {},
  
  init : function (){
    var t = ChatStuff;
	if(getMyAlliance()[0] > 0)
		t.getAllianceLeaders();
    t.chatDivContentFunc = new CalterUwFunc ('Chat.chatDivContent', [['return f.join("");', 'var msg = f.join("");\n msg=chatDivContent_hook(msg);\n return msg;']]);
    uW.chatDivContent_hook = t.chatDivContentHook;
    uW.ptChatIconClicked = t.e_iconClicked;
    t.setEnable (Options.chatEnhance);
  },
  
  isAvailable : function (){
    var t = ChatStuff; 
    t.chatDivContentFunc.isAvailable ();
  },
  
  setEnable : function (tf){
    var t = ChatStuff; 
    t.chatDivContentFunc.setEnable (tf);
        if (Options.chatglobal){
		ById("mod_comm_list1").style.backgroundColor = Colors.ChatGlobal;
   	}
    if (Options.chatalliance){
		ById("mod_comm_list2").style.backgroundColor = Colors.ChatAll;
  	}
 
  },
  
  e_iconClicked : function (name){
    ById('mod_comm_input').value='';
    var e = ById('mod_comm_input');
//    name = name.replace(//g,"'");
    name = name.replace(//g,"'");
    e.value = '@'+ name +' ';
    e.focus();
  },

 chatDivContentHook : function (msg){
       var t = ChatStuff; 
       var element_class = '';
       var m = /div class='info'>.*<\/div>/im.exec(msg);
       if (m == null)
         return msg;
       var whisp = m[0];
       
       
       if (m[0].indexOf('whispers to') >= 0) {
   	if (Options.chatwhisper) {
   		element_class += ' ptChatWhisper ';
   		}
    } else { //Global & Alliance
		if (Options.chatbold)
			element_class += ' ptChatBold ';
	}
	var suid = /viewProfile\(this,([0-9]+),false/i.exec(m[0]);
	if(!suid)
		suid = uW.tvuid;
	else
		suid = suid[1];
	
	if (Options.chatLeaders) {
		if (t.leaders[suid]) element_class += ' ptChat'+t.leaders[suid];
    }

       // AVATARES
        var vazquez  = [ "12211981"]; var yohana = [ "10536362"];  var anna = [ "11840388"]; var nacho = [ "12376973"]; var marian = [ "12837007"]; var atena = [ "4209295"];
        var kritical = [ "12371557"]; var maki = [ "12249011"]; var vader = [ "10885264"]; var mario = [ "8844375"]; var cabreado = [ "9314613"]; var ivan = [ "12487088"];
        var shrek = [ "7926263"]; var pumuky = [ "10854092"]; var isa = [ "14018722"]; var africa = [ "14442631"]; var eli = [ "14273457"]; var brujilla = [ "12099856"];
        var atreyu = [ "12207888"]; var ristomejide = [ "16769795"]; var adarporsaco = [ "12246284"]; var Gtz = [ "12151287"]; var Jony7a75b = [ "10441879"]; var JoseMaria = [ "12267872"];
        var mimsan = [ "12366494"]; var Mystogan = [ "12819808"]; var NeMeSiS_ = [ "3287570"]; var Nuri4 = [ "5202683"]; var raspe = [ "14194105"]; var Raulrca = [ "12832614"];
        var tamyna = [ "11449537"]; var Victorcrow = [ "10700321"]; var Amazing = [ "11898089"]; var Ninon = [ "10742000"]; var gladiadorxx = [ "14164477"]; 

        var IsMe = false;
        if (vazquez.indexOf(uW.tvuid) >= 0 && suid.substr(0, 3)=="div") IsMe = true;	if (vazquez.indexOf(suid) >= 0 || IsMe) { msg = msg.replace (/\bhttps\:\/\/[-a-z].*\'\/\>/i, IMGvazquez+'\'\/\>');} 
        if (yohana.indexOf(uW.tvuid) >= 0 && suid.substr(0, 3)=="div") IsMe = true;	if (yohana.indexOf(suid) >= 0 || IsMe) { msg = msg.replace (/\bhttps\:\/\/[-a-z].*\'\/\>/i, IMGyohana+'\'\/\>');} 
        if (anna.indexOf(uW.tvuid) >= 0 && suid.substr(0, 3)=="div") IsMe = true;	if (anna.indexOf(suid) >= 0 || IsMe) { msg = msg.replace (/\bhttps\:\/\/[-a-z].*\'\/\>/i, IMGanna+'\'\/\>');} 
        if (nacho.indexOf(uW.tvuid) >= 0 && suid.substr(0, 3)=="div") IsMe = true;	if (nacho.indexOf(suid) >= 0 || IsMe) { msg = msg.replace (/\bhttps\:\/\/[-a-z].*\'\/\>/i, IMGnacho+'\'\/\>');} 
        if (marian.indexOf(uW.tvuid) >= 0 && suid.substr(0, 3)=="div") IsMe = true;	if (marian.indexOf(suid) >= 0 || IsMe) { msg = msg.replace (/\bhttps\:\/\/[-a-z].*\'\/\>/i, IMGmarian+'\'\/\>');} 
        if (atena.indexOf(uW.tvuid) >= 0 && suid.substr(0, 3)=="div") IsMe = true;	if (atena.indexOf(suid) >= 0 || IsMe) { msg = msg.replace (/\bhttps\:\/\/[-a-z].*\'\/\>/i, IMGatena+'\'\/\>');} 
        if (kritical.indexOf(uW.tvuid) >= 0 && suid.substr(0, 3)=="div") IsMe = true;	if (kritical.indexOf(suid) >= 0 || IsMe) { msg = msg.replace (/\bhttps\:\/\/[-a-z].*\'\/\>/i, IMGkrit+'\'\/\>');} 
        if (maki.indexOf(uW.tvuid) >= 0 && suid.substr(0, 3)=="div") IsMe = true;	if (maki.indexOf(suid) >= 0 || IsMe) { msg = msg.replace (/\bhttps\:\/\/[-a-z].*\'\/\>/i, IMGmaqui+'\'\/\>');} 
        if (vader.indexOf(uW.tvuid) >= 0 && suid.substr(0, 3)=="div") IsMe = true;	if (vader.indexOf(suid) >= 0 || IsMe) { msg = msg.replace (/\bhttps\:\/\/[-a-z].*\'\/\>/i, IMGvader+'\'\/\>');} 
        if (mario.indexOf(uW.tvuid) >= 0 && suid.substr(0, 3)=="div") IsMe = true;	if (mario.indexOf(suid) >= 0 || IsMe) { msg = msg.replace (/\bhttps\:\/\/[-a-z].*\'\/\>/i, IMGarqmario+'\'\/\>');} 
        if (cabreado.indexOf(uW.tvuid) >= 0 && suid.substr(0, 3)=="div") IsMe = true;	if (cabreado.indexOf(suid) >= 0 || IsMe) { msg = msg.replace (/\bhttps\:\/\/[-a-z].*\'\/\>/i, IMGcabreado+'\'\/\>');} 
        if (ivan.indexOf(uW.tvuid) >= 0 && suid.substr(0, 3)=="div") IsMe = true;	if (ivan.indexOf(suid) >= 0 || IsMe) { msg = msg.replace (/\bhttps\:\/\/[-a-z].*\'\/\>/i, IMGivan+'\'\/\>');} 
        if (shrek.indexOf(uW.tvuid) >= 0 && suid.substr(0, 3)=="div") IsMe = true;	if (shrek.indexOf(suid) >= 0 || IsMe) { msg = msg.replace (/\bhttps\:\/\/[-a-z].*\'\/\>/i, IMGshrek+'\'\/\>');} 
        if (pumuky.indexOf(uW.tvuid) >= 0 && suid.substr(0, 3)=="div") IsMe = true;	if (pumuky.indexOf(suid) >= 0 || IsMe) { msg = msg.replace (/\bhttps\:\/\/[-a-z].*\'\/\>/i, IMGpumuky+'\'\/\>');} 
        if (isa.indexOf(uW.tvuid) >= 0 && suid.substr(0, 3)=="div") IsMe = true;	if (isa.indexOf(suid) >= 0 || IsMe) { msg = msg.replace (/\bhttps\:\/\/[-a-z].*\'\/\>/i, IMGisa+'\'\/\>');} 
        if (africa.indexOf(uW.tvuid) >= 0 && suid.substr(0, 3)=="div") IsMe = true;	if (africa.indexOf(suid) >= 0 || IsMe) { msg = msg.replace (/\bhttps\:\/\/[-a-z].*\'\/\>/i, IMGafrica+'\'\/\>');} 
        if (eli.indexOf(uW.tvuid) >= 0 && suid.substr(0, 3)=="div") IsMe = true;	if (eli.indexOf(suid) >= 0 || IsMe) { msg = msg.replace (/\bhttps\:\/\/[-a-z].*\'\/\>/i, IMGeli+'\'\/\>');} 
        if (brujilla.indexOf(uW.tvuid) >= 0 && suid.substr(0, 3)=="div") IsMe = true;	if (brujilla.indexOf(suid) >= 0 || IsMe) { msg = msg.replace (/\bhttps\:\/\/[-a-z].*\'\/\>/i, IMGisa+'\'\/\>');} 
        if (atreyu.indexOf(uW.tvuid) >= 0 && suid.substr(0, 3)=="div") IsMe = true;	if (atreyu.indexOf(suid) >= 0 || IsMe) { msg = msg.replace (/\bhttps\:\/\/[-a-z].*\'\/\>/i, IMGatreyu+'\'\/\>');} 
        if (ristomejide.indexOf(uW.tvuid) >= 0 && suid.substr(0, 3)=="div") IsMe = true;	if (ristomejide.indexOf(suid) >= 0 || IsMe) { msg = msg.replace (/\bhttps\:\/\/[-a-z].*\'\/\>/i, IMGristomejide+'\'\/\>');} 
        if (adarporsaco.indexOf(uW.tvuid) >= 0 && suid.substr(0, 3)=="div") IsMe = true;	if (adarporsaco.indexOf(suid) >= 0 || IsMe) { msg = msg.replace (/\bhttps\:\/\/[-a-z].*\'\/\>/i, IMGADar+'\'\/\>');} 
        if (Gtz.indexOf(uW.tvuid) >= 0 && suid.substr(0, 3)=="div") IsMe = true;	if (Gtz.indexOf(suid) >= 0 || IsMe) { msg = msg.replace (/\bhttps\:\/\/[-a-z].*\'\/\>/i, IMGGtz+'\'\/\>');} 
        if (Jony7a75b.indexOf(uW.tvuid) >= 0 && suid.substr(0, 3)=="div") IsMe = true;	if (Jony7a75b.indexOf(suid) >= 0 || IsMe) { msg = msg.replace (/\bhttps\:\/\/[-a-z].*\'\/\>/i, IMGJony+'\'\/\>');} 
        if (JoseMaria.indexOf(uW.tvuid) >= 0 && suid.substr(0, 3)=="div") IsMe = true;	if (JoseMaria.indexOf(suid) >= 0 || IsMe) { msg = msg.replace (/\bhttps\:\/\/[-a-z].*\'\/\>/i, IMGJmaria+'\'\/\>');} 
        if (mimsan.indexOf(uW.tvuid) >= 0 && suid.substr(0, 3)=="div") IsMe = true;	if (mimsan.indexOf(suid) >= 0 || IsMe) { msg = msg.replace (/\bhttps\:\/\/[-a-z].*\'\/\>/i, IMGMim+'\'\/\>');} 
        if (Mystogan.indexOf(uW.tvuid) >= 0 && suid.substr(0, 3)=="div") IsMe = true;	if (Mystogan.indexOf(suid) >= 0 || IsMe) { msg = msg.replace (/\bhttps\:\/\/[-a-z].*\'\/\>/i, IMGMys+'\'\/\>');} 
        if (NeMeSiS_.indexOf(uW.tvuid) >= 0 && suid.substr(0, 3)=="div") IsMe = true;	if (NeMeSiS_.indexOf(suid) >= 0 || IsMe) { msg = msg.replace (/\bhttps\:\/\/[-a-z].*\'\/\>/i, IMGNemesis+'\'\/\>');} 
        if (Nuri4.indexOf(uW.tvuid) >= 0 && suid.substr(0, 3)=="div") IsMe = true;	if (Nuri4.indexOf(suid) >= 0 || IsMe) { msg = msg.replace (/\bhttps\:\/\/[-a-z].*\'\/\>/i, IMGNuri+'\'\/\>');} 
        if (raspe.indexOf(uW.tvuid) >= 0 && suid.substr(0, 3)=="div") IsMe = true;	if (raspe.indexOf(suid) >= 0 || IsMe) { msg = msg.replace (/\bhttps\:\/\/[-a-z].*\'\/\>/i, IMGRaspe+'\'\/\>');} 
        if (Raulrca.indexOf(uW.tvuid) >= 0 && suid.substr(0, 3)=="div") IsMe = true;	if (Raulrca.indexOf(suid) >= 0 || IsMe) { msg = msg.replace (/\bhttps\:\/\/[-a-z].*\'\/\>/i, IMGRaul+'\'\/\>');} 
        if (tamyna.indexOf(uW.tvuid) >= 0 && suid.substr(0, 3)=="div") IsMe = true;	if (tamyna.indexOf(suid) >= 0 || IsMe) { msg = msg.replace (/\bhttps\:\/\/[-a-z].*\'\/\>/i, IMGTamy+'\'\/\>');} 
        if (Victorcrow.indexOf(uW.tvuid) >= 0 && suid.substr(0, 3)=="div") IsMe = true;	if (Victorcrow.indexOf(suid) >= 0 || IsMe) { msg = msg.replace (/\bhttps\:\/\/[-a-z].*\'\/\>/i, IMGVic+'\'\/\>');} 
        if (Amazing.indexOf(uW.tvuid) >= 0 && suid.substr(0, 3)=="div") IsMe = true;	if (Amazing.indexOf(suid) >= 0 || IsMe) { msg = msg.replace (/\bhttps\:\/\/[-a-z].*\'\/\>/i, IMGMim+'\'\/\>');} 
        if (Ninon.indexOf(uW.tvuid) >= 0 && suid.substr(0, 3)=="div") IsMe = true;	if (Ninon.indexOf(suid) >= 0 || IsMe) { msg = msg.replace (/\bhttps\:\/\/[-a-z].*\'\/\>/i, IMGNinon+'\'\/\>');} 
        if (gladiadorxx.indexOf(uW.tvuid) >= 0 && suid.substr(0, 3)=="div") IsMe = true;	if (gladiadorxx.indexOf(suid) >= 0 || IsMe) { msg = msg.replace (/\bhttps\:\/\/[-a-z].*\'\/\>/i, IMGGlad+'\'\/\>');} 

      
        if (Options.Smiley) {
	msg = msg.replace(':=(', '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00101-sadsmile.gif\">'); msg = msg.replace(':-(', '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00101-sadsmile.gif\">');
	msg = msg.replace(':D', '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00102-bigsmile.gif\">'); msg = msg.replace(':-D', '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00102-bigsmile.gif\">'); msg = msg.replace(':=D', '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00102-bigsmile.gif\">'); 
	msg = msg.replace(';-(', '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00106-crying.gif\">'); msg = msg.replace(';=(', '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00106-crying.gif\">'); 	
	msg = msg.replace(';-)', '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00105-wink.gif\">');	msg = msg.replace(';=)', '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00105-wink.gif\">');	
	msg = msg.replace(':-*', '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00109-kiss.gif\">');	msg = msg.replace(':=*', '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00109-kiss.gif\">');	
	msg = msg.replace(':^)', '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00112-wondering.gif\">'); msg = msg.replace("(partidura)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/partidura.gif\">');	
	msg = msg.replace("(heart)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00152-heart.gif\">'); msg = msg.replace("(wc)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/wc.gif\">');
	msg = msg.replace("I=)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00113-sleepy.gif\">'); msg = msg.replace("I-)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00113-sleepy.gif\">'); msg = msg.replace("|-)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00113-sleepy.gif\">');	
	msg = msg.replace("8-)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00103-cool.gif\">');	msg = msg.replace("8=)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00103-cool.gif\">');	msg = msg.replace("B-)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00103-cool.gif\">');		msg = msg.replace("B=)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00103-cool.gif\">'); 	
	msg = msg.replace("(ci)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00176-smoke.gif\">'); msg = msg.replace("(smoke)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00176-smoke.gif\">');  msg = msg.replace("(rauchen)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00176-smoke.gif\">');	msg = msg.replace("(smoking)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00176-smoke.gif\">');	
	msg = msg.replace("(fubar)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00181-fubar.gif\">'); msg = msg.replace("(comida)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/comida.gif\">');	
	msg = msg.replace(":-&", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00119-puke.gif\">');	msg = msg.replace(":=&", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00119-puke.gif\">');	
	msg = msg.replace(">:)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00116-evilgrin.gif\">'); msg = msg.replace("]:)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00116-evilgrin.gif\">');	
	msg = msg.replace("(:|", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00107-sweating.gif\">'); msg = msg.replace("(bull)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/bull.gif\">');	
	msg = msg.replace(":P", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00110-tongueout.gif\">'); msg = msg.replace(":=P", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00110-tongueout.gif\">'); 	msg = msg.replace(":P", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00110-tongueout.gif\">');	msg = msg.replace(":-P", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00110-tongueout.gif\">');		
        msg = msg.replace(":=p", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00110-tongueout.gif\">');	
	msg = msg.replace(":-$", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00111-blush.gif\">');	msg = msg.replace(":=$", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00111-blush.gif\">');		msg = msg.replace(':">', '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00111-blush.gif\">');	
	msg = msg.replace("(party)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00123-party.gif\">'); msg = msg.replace("(like)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00148-yes.gif\">');	msg = msg.replace("(dontlike)", '<img class=emoicon src=\"http://koc-power-pdx.googlecode.com/svn/trunk/img/emo/dontlike.gif\">');	
	msg = msg.replace("(bug)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00180-bug.gif\">');	msg = msg.replace("(pool)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00182-poolparty.gif\">');		msg = msg.replace("(bandit)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00174-bandit.gif\">');		
        msg = msg.replace("(drunk)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00175-drunk.gif\">'); msg = msg.replace("(finger)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00173-middlefinger.gif\">');		msg = msg.replace("(headbang)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00179-headbang.gif\">');		
        msg = msg.replace("(mooning)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00172-mooning.gif\">');	
        msg = msg.replace("(beso)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/icq_kissing.gif\">');	
        msg = msg.replace("(rock)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00178-rock.gif\">'); msg = msg.replace("(swear)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00183-swear.gif\">');	msg = msg.replace("(tmi)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00184-tmi.gif\">');		msg = msg.replace("(toivo)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00177-toivo.gif\">');		
        msg = msg.replace("(bow)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00139-bow.gif\">');  msg = msg.replace("(ninja)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00170-ninja.gif\">');		msg = msg.replace("(beer)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00167-beer.gif\">');		
        msg = msg.replace("(drink)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00168-drink.gif\">'); msg = msg.replace("(muscle)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00165-muscle.gif\">');	msg = msg.replace("(cafe)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00162-coffee.gif\">');	msg = msg.replace("(kaffee)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00162-coffee.gif\">');	
        msg = msg.replace("(coffee)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00162-coffee.gif\">'); msg = msg.replace("(pizza)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00163-pizza.gif\">');		msg = msg.replace("(music)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00159-music.gif\">');		
        msg = msg.replace("(inlove)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00115-inlove.gif\">');	
	msg = msg.replace("x=(", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00121-angry.gif\">');	msg = msg.replace("x-(", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00121-angry.gif\">');	msg = msg.replace(":-@", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00121-angry.gif\">');			msg = msg.replace(":=@", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00121-angry.gif\">');	
	msg = msg.replace("(clap)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00137-clapping.gif\">'); msg = msg.replace("(bravo)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00137-clapping.gif\">');	msg = msg.replace("(klatschen)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00137-clapping.gif\">');
	msg = msg.replace("(punch)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00146-punch.gif\">'); msg = msg.replace("(yes)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00148-yes.gif\">');		msg = msg.replace("(handshake)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00150-handshake.gif\">');		
        msg = msg.replace("(no)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00149-no.gif\">');	msg = msg.replace("(rofl)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00140-rofl.gif\">');		msg = msg.replace("(flower)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00155-flower.gif\">');		msg = msg.replace("(phone)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00161-phone.gif\">');
        msg = msg.replace("(bear)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00134-bear.gif\">'); msg = msg.replace("(hi)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00128-hi.gif\">');  msg = msg.replace("(m)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00154-mail.gif\">');  msg = msg.replace("I()", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00118-yawn.gif\">');
        msg = msg.replace("(:I", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00107-sweating.gif\">');
        msg = msg.replace("(angel)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/icq_angel.gif\">'); msg = msg.replace("(beer2)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/icq_beer.gif\">'); msg = msg.replace("(blushing)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/icq_blushing.gif\">');
        msg = msg.replace("(bomb)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/icq_bomb.gif\">'); msg = msg.replace("(cool)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/icq_cool.gif\">'); msg = msg.replace("(crying)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/icq_crying.gif\">');
        msg = msg.replace("(devil)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/icq_devil.gif\">'); msg = msg.replace("(gross)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/icq_gross.gif\">'); msg = msg.replace("(kiss)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/icq_kiss.gif\">');
        msg = msg.replace("(kissed)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/icq_kissed.gif\">'); msg = msg.replace("(laughing)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/icq_laughing.gif\">'); msg = msg.replace("(lol)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/icq_lol.gif\">');
        msg = msg.replace("(love)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/icq_love.gif\">'); msg = msg.replace("(mad)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/icq_mad.gif\">'); msg = msg.replace("(cascos)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/icq_music.gif\">');
        msg = msg.replace("(nothingtosay)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/icq_nothingtosay.gif\">'); msg = msg.replace("(sad)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/icq_sad.gif\">'); msg = msg.replace("(scream)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/icq_scream.gif\">');
        msg = msg.replace("(shutup)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/icq_shutup.gif\">'); msg = msg.replace("(smile)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/icq_smile.gif\">'); msg = msg.replace("(stop)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/icq_stop.gif\">');
        msg = msg.replace("(surprised)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/icq_surprised.gif\">'); msg = msg.replace("(thankyou)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/icq_thankyou.gif\">');    msg = msg.replace("(thumbsup)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/icq_thumbsup.gif\">');   
        msg = msg.replace("(tired)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/icq_tired.gif\">');     msg = msg.replace("(tongueout)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/icq_tongueout.gif\">');   msg = msg.replace("(winkblink)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/icq_winkblink.gif\">');   
        msg = msg.replace("(dull)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00114-dull.gif\">'); msg = msg.replace("(talking)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00117-talking.gif\">'); msg = msg.replace("(doh)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00120-doh.gif\">');
        msg = msg.replace("(itwasntme)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00122-itwasntme.gif\">'); msg = msg.replace("(worried)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00124-worried.gif\">'); msg = msg.replace("(mmm)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00125-mmm.gif\">');
        msg = msg.replace("(nerd)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00126-nerd.gif\">'); msg = msg.replace("(lipssealed)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00127-lipssealed.gif\">'); msg = msg.replace("(call)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00129-call.gif\">');
        msg = msg.replace("(devil)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00130-devil.gif\">'); msg = msg.replace("(angel)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00131-angel.gif\">'); msg = msg.replace("(envy)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00132-envy.gif\">');
        msg = msg.replace("(wait)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00133-wait.gif\">'); msg = msg.replace("(makeup)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00135-makeup.gif\">'); msg = msg.replace("(giggle)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00136-giggle.gif\">');
        msg = msg.replace("(thinking)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00138-thinking.gif\">'); msg = msg.replace("(whew)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00141-whew.gif\">'); msg = msg.replace("(happy)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00142-happy.gif\">');
        msg = msg.replace("(smirk)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00143-smirk.gif\">'); msg = msg.replace("(nod)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00144-nod.gif\">'); msg = msg.replace("(shake)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00145-shake.gif\">');
        msg = msg.replace("(emo)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00147-emo.gif\">'); msg = msg.replace("(brokenheart)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00153-brokenheart.gif\">'); msg = msg.replace("(rain)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00156-rain.gif\">');
        msg = msg.replace("(sun)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00157-sun.gif\">'); msg = msg.replace("(time)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00158-time.gif\">');   msg = msg.replace("(dance)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00169-dance.gif\">');
        msg = msg.replace("(movie)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00160-movie.gif\">'); msg = msg.replace("(cash)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00164-cash.gif\">'); msg = msg.replace("(cake)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00166-cake.gif\">'); 
        msg = msg.replace("(ninja)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00170-ninja.gif\">'); msg = msg.replace("(star)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00171-star.gif\">'); msg = msg.replace("(heidy)", '<img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00185-heidy.gif\">');
        msg = msg.replace("(abrazo)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/abrazo.gif\">'); msg = msg.replace("(afeitado)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/afeitado.gif\">'); msg = msg.replace("(amoroso)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/amoroso.gif\">'); msg = msg.replace("(aplauso)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/aplauso.gif\">');
        msg = msg.replace("(bebe)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/bebe.gif\">'); msg = msg.replace("(besazo)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/besazo.gif\">'); msg = msg.replace("(cabezazo)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/cabezazo.gif\">'); msg = msg.replace("(callate)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/callate.gif\">');
        msg = msg.replace("(cama)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/cama.gif\">'); msg = msg.replace("(camina)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/camina.gif\">'); msg = msg.replace("(cansado)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/cansado.jpg\">'); msg = msg.replace("(cari)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/cari.gif\">');
        msg = msg.replace("(chulo)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/chulo.gif\">'); msg = msg.replace("(corazonrisa)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/corazonrisa.gif\">'); msg = msg.replace("(enamorado)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/enamorado.gif\">'); msg = msg.replace("(enamorado2)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/enamorado2.gif\">');
        msg = msg.replace("(enamorados)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/enamorados.gif\">'); msg = msg.replace("(estampa)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/estampa.gif\">'); msg = msg.replace("(fumador)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/fumador.gif\">'); msg = msg.replace("(gato)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/gato.gif\">');
        msg = msg.replace("(gesto)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/gesto.gif\">'); msg = msg.replace("(gira)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/gira.gif\">'); msg = msg.replace("(guinha)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/guinha.gif\">'); msg = msg.replace("(lanzabeso)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/lanzabeso.gif\">');
        msg = msg.replace("(lengua)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/lengua.gif\">'); msg = msg.replace("(lengua2)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/lengua2.gif\">'); msg = msg.replace("(lenguaguino)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/lenguaguino.jpg\">'); msg = msg.replace("(llora)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/llora.gif\">');
        msg = msg.replace("(llora2)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/llora2.gif\">'); msg = msg.replace("(madrid)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/madrid.jpg\">'); msg = msg.replace("(maria)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/maria.gif\">'); msg = msg.replace("(nenahola)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/nenahola.gif\">');
        msg = msg.replace("(nenallora)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/nenallora.gif\">'); msg = msg.replace("(nocabreo)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/nocabreo.gif\">'); msg = msg.replace("(nono)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/nono.gif\">'); msg = msg.replace("(parte2)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/parte2.gif\">');
        msg = msg.replace("(pistolas)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/pistolas.gif\">'); msg = msg.replace("(pregunta)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/pregunta.gif\">'); msg = msg.replace("(puerta)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/puerta.gif\">'); msg = msg.replace("(quteden)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/quteden.gif\">');
        msg = msg.replace("(raro)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/raro.gif\">'); msg = msg.replace("(recibebeso)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/recibebeso.gif\">'); msg = msg.replace("(relame)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/relame.gif\">'); msg = msg.replace("(reverencia)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/reverencia.gif\">');
        msg = msg.replace("(rosas)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/rosas.gif\">'); msg = msg.replace("(saludo)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/saludo.gif\">'); msg = msg.replace("(separte)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/separte.gif\">'); msg = msg.replace("(sisi)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/sisi.gif\">');
        msg = msg.replace("(siva)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/siva.gif\">'); msg = msg.replace("(sorprendido)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/sorprendido.gif\">'); msg = msg.replace("(sorpresa)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/sorpresa.gif\">'); msg = msg.replace("(abrazomortal)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/abrazomortal.gif\">');
        msg = msg.replace("(tequiero)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/tequiero.gif\">'); msg = msg.replace("(timido)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/timido.gif\">'); msg = msg.replace("(triste)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/triste.gif\">'); msg = msg.replace("(partidura)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/partidura.gif\">');
        msg = msg.replace("(tuu)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/tuu.gif\">'); msg = msg.replace("(XD)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/XD.gif\">'); msg = msg.replace("(zumbao)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/zumbao.gif\">'); msg = msg.replace("(besocorazon)", '<img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/avatar-amor-378.gif\">');
       }

        if (m[0].indexOf('My embassy has') >= 0 && Options.chatAttack)
     	element_class = ' ptChatAttack';
        if (m[0].indexOf('My wilderness at') >= 0 && Options.chatAttack)
       	element_class = ' ptChatAttack';
       msg = msg.replace ("class='content'", "class='content "+ element_class +"'");
     var m = /(Lord|Lady) (.*?)</im.exec(msg);
     if (m != null)
       m[2] = m[2].replace(/\'/g,"");
       msg = msg.replace (/<img (.*?>)/img, '<A onclick=\"ptChatIconClicked(\''+ m[2] +'\')\"><img class=\"ptChatIcon\" $1</a>');

     if (whisp.indexOf('whispers to') >= 0 && Options.enableWhisperAlert) {
     	if (whisp.indexOf('says to the alliance') < 0) {
			AudioManager.setSource(SOUND_FILES.whisper);
			AudioManager.play();
			setTimeout(function(){AudioManager.stop();}, 2500);
		}
     } 

     if (whisp.indexOf('whispers to') >= 0 && Options.enableWhisperAlert) {
     	if (whisp.indexOf('dice a la alianza') < 0) {
			AudioManager.setSource(SOUND_FILES.whisper);
			AudioManager.play();
			setTimeout(function(){AudioManager.stop();}, 2500);
		}
     } 

     if (whisp.indexOf('te susurra') >= 0 && Options.enableWhisperAlert) {
     if (whisp.indexOf('dice a la alianza') < 0) {
                 AudioManager.setSource(SOUND_FILES.whisper);
		 AudioManager.play();
		 setTimeout(function(){AudioManager.stop();}, 2500);
		}
     }
     if (whisp.indexOf('My embassy has') >= 0 && Options.enableTowerAlert) {
                AudioManager.setSource(SOUND_FILES.alert);
		AudioManager.play();
		setTimeout(function(){AudioManager.stop();}, 1000);
     } 
     if (whisp.indexOf('My wilderness at') >= 0 && Options.enableTowerAlert) {
                AudioManager.setSource(SOUND_FILES.alert);
		AudioManager.play();
		setTimeout(function(){AudioManager.stop();}, 1000);
     }
     if (whisp.indexOf('Mi tierra') >= 0 && Options.enableTowerAlert) {
                AudioManager.setSource(SOUND_FILES.alert);
		AudioManager.play();
		setTimeout(function(){AudioManager.stop();}, 1000);
     }
     if (whisp.indexOf('Mi ciudad') >= 0 && Options.enableTowerAlert) {
                AudioManager.setSource(SOUND_FILES.alert);
		AudioManager.play();
		setTimeout(function(){AudioManager.stop();}, 1000);
     }
     if (whisp.indexOf('Mi Ciudad') >= 0 && Options.enableTowerAlert) {
                AudioManager.setSource(SOUND_FILES.alert);
		AudioManager.play();
		setTimeout(function(){AudioManager.stop();}, 1000);
     }
     if (whisp.indexOf('My city') >= 0 && Options.enableTowerAlert) {
                AudioManager.setSource(SOUND_FILES.alert);
		AudioManager.play();
		setTimeout(function(){AudioManager.stop();}, 1000);
     }

     if (whisp.indexOf('Objetivo: CIUDAD') >= 0 && Options.enableTowerAlert) {
                AudioManager.setSource(SOUND_FILES.alert);
		AudioManager.play();
		setTimeout(function(){AudioManager.stop();}, 1000);
     }


     if (whisp.indexOf('Objetivo Ciudad') >= 0 && Options.enableTowerAlert) {
                AudioManager.setSource(SOUND_FILES.alert);
		AudioManager.play();
		setTimeout(function(){AudioManager.stop();}, 1000);
     }

     if (whisp.indexOf('Target Wild') >= 0 && Options.enableTowerAlert) {
                AudioManager.setSource(SOUND_FILES.alert);
		AudioManager.play();
		setTimeout(function(){AudioManager.stop();}, 1000);
     }

     if (whisp.indexOf('Target: SANCTUARY') >= 0 && Options.enableTowerAlert) {
                AudioManager.setSource(SOUND_FILES.alert);
		AudioManager.play();
		setTimeout(function(){AudioManager.stop();}, 1000);
     }

     if (whisp.indexOf('Objetivo Tierra') >= 0 && Options.enableTowerAlert) {
                AudioManager.setSource(SOUND_FILES.alert);
		AudioManager.play();
		setTimeout(function(){AudioManager.stop();}, 1000);
     }
     return msg;
   },

getAllianceLeaders : function (){
   var t = ChatStuff;
    var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
    new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/allianceGetLeaders.php" + unsafeWindow.g_ajaxsuffix, {
		 method: "post",
		 parameters: params,
		 loading: true,
		 onSuccess: function (rslt) {
			 if (rslt.officers) {
				for (uid in rslt.officers) {
					var user = rslt.officers[uid];
					t.leaders[user.userId] = user.type.substr(0,4);
				}
			 } 
		},
		onFailure: function () {}
  		});
	},

}



var AudioManager = {
  player: null,
  volume: 100,
  type: 'html5',
  alertdiv: null,
  init: function (){
	var t = AudioManager;
	if ( !! document.createElement("audio").canPlayType) {
		t.player = new Audio();
		t.type = 'html5';
		t.player.addEventListener("ended", function () {
			t.player.currentTime = 0
		}, false);
		t.setVolume(t.volume);
	} else {
		t.creatediv();
		t.type = 'swf';
	}
  },
  setVolume: function(vol){
	var t = AudioManager;
	t.volume = vol;
	t.player.volume = t.volume * 0.01;
  },
  play: function(){
	var t = AudioManager;
	if(t.type == 'html5'){
		if (!t.player.paused) {
			t.stop();
		}
		t.player.play();
	} else {
		t.alertdiv.innerHTML = t.source;
	}
  },
  stop: function(){
	var t = AudioManager;
	if(t.type == 'html5'){
		t.player.pause();
		if (t.player.readyState === 4) {
			t.player.currentTime = 0
		}
	} else {
		t.alertdiv.innerHTML = '<b style=\'color: rgb(165, 102, 49); font-size: 9px;\'>Audio Alert Played</b>';
	}
  },
  pause: function(){
	var t = AudioManager;
	t.player.pause();
  },
  setSource: function(src){
	var t = AudioManager;
	if(t.type == 'html5'){
		t.player.src = src.OGG;
		t.source = src.OGG;
	} else
		t.source = src.DEFAULT;
  },
  toggleMute: function () {
	var t = AudioManager;
    t.player.muted = !t.player.muted;
  },
  creatediv : function(){
    var t = AudioManager;
    var div = document.getElementsByTagName('div');
	for (var i = 0; i < div.length - 1; i++)
		if (div[i].className == 'mod_comm_forum')
			e = div[i];
	t.alertdiv = document.createElement("span");
	e.appendChild(t.alertdiv);
  },
}

/*********************************
 TAB ***********************************/
/****
courtDoAction.php
&atype=4&toid=1290791&givercityid=26654
{"ok":true,"gold":500,"resource":500,"resourcetype":"4"}
***/
Tabs.Resources = {
  tabOrder : 11,
  tabLabel : 'Resource',
  tabDisabled : !ENABLE_TEST_TAB,

  resource : {1:'food ', 2:'wood', 3:'stone', 4:'ore'},
  users : [],
  myDiv : null,
  doList : [], // list of gifts to accept
  accepting : false,
  city : null,
  total : {gold:0, 1:0, 2:0, 3:0, 4:0},

  init : function (div){
    var t = Tabs.Resources;
		t.myDiv = div;
    div.innerHTML = '<TABLE cellpadding=0 cellspacing=0 class=pbTab width=100%><TR><TD align=center><INPUT id="pballlist" type=submit value="Search List" \></td></tr></table><HR>\
        <DIV id=resDiv style="width:100%; min-height:300px; height:100%">';
    document.getElementById('pballlist').addEventListener ('click', t.e_clickfetchlist, false);

  },

  show : function (){
  },
  hide : function (){
  },

  progress : function (msg, span, add){
	if(add)
		document.getElementById(span).innerHTML+=msg;
	else
		document.getElementById(span).innerHTML=msg;
  },

  e_clickfetchlist : function  (){     // (also cancel accepting)
    var t = Tabs.Resources;
	t.users = [];
    if (t.accepting){
      document.getElementById('pballlist').value = 'Fetch User List';
      document.getElementById('resDiv').innerHTML+= '<BR><SPAN class=boldRed>cancel.</span>';
      t.accepting = false;
      return;
    }
    document.getElementById('resDiv').innerHTML = 'searching the list of users ... <span id=pbResUserListCount></span>';

    t.fetchUserList (gotUserList);
    function gotUserList(userList){
		if(userList.length < 1){
			listGifts();
			return;
		}
		document.getElementById('resDiv').innerHTML += '<BR>Check if you can pick up ... <span id=pbResUserAvailCount></span>';
		t.checkDailyAction(userList, listGifts);
	}

    function listGifts (){
	  t.city = Cities.cities[0];
	  var m = '<DIV class=pbStat><CENTER>Lista de usuarios &nbsp; &nbsp; &nbsp; ('+ t.users.length +' encontrados)</center></div>';
      if (t.users.length<1){
        document.getElementById('resDiv').innerHTML = m + '<BR><BR><CENTER>No users!</center>';
        return;
      }
      m += '<TABLE class=pbTab align=center><TR><TD align=right>Apply gifts to the city: </td><TD id=pbrescityselspan></td></tr>\
          <TR><TD align=right>Select the resources to collect</td><TD>'
        + htmlSelector (t.resource, Options.getResType, 'id=pbResColType')
        + '</td></tr><TR><TD>Select the users you want to visit: </td><TD width=250><INPUT type=submit id=pbResDo value="OK Resources">\
        &nbsp; <SPAN id=pbResNone class=boldRed></span></td></tr></table><HR><TABLE class=pbTab><TR valign=top><TD>\
        <INPUT id=pbResButAll type=submit value="Todos" style="width:100%; margin-bottom:5px"><BR><INPUT id=pbResButNone type=submit value="none"></td>\
        <TD width=10></td><TD><TABLE align=center cellpadding=0 cellspacing=0 class=pbTabLined>\
        <TBODY id=pbResTbody style="height:250px; overflow:auto; display:block;">\
        <TR style="font-weight:bold; background:white"><TD>name</td><TD>might</td><TD width=20></td></tr>';
      for (var i=0; i<t.users.length; i++){
        m += '<TR><TD><INPUT type=checkbox id=pbrchk_'+ i +'> &nbsp;'+ t.users[i].name +'</td><TD>'+ t.users[i].might +'</td></tr>';
      }
      document.getElementById('resDiv').innerHTML = m + '</tbody></table></td></tr></table>';
	  new CdispCityPicker ('pbrescitysel', document.getElementById('pbrescityselspan'), true, t.e_CityButton, t.city.idx);
      document.getElementById('pbResDo').addEventListener ('click', t.getErDone, false);
      document.getElementById('pbResButAll').addEventListener ('click', t.e_butAll, false);
      document.getElementById('pbResButNone').addEventListener ('click', t.e_butNone, false);
    }
  },

  e_CityButton : function (city, x, y){
    var t = Tabs.Resources;
	t.city = city;
  },

  e_butAll : function (){
    var t = Tabs.Resources;
    for (var i=0; i<t.users.length; i++)
      document.getElementById('pbrchk_'+i).checked = true;
  },

  e_butNone : function (){
    var t = Tabs.Resources;
    for (var i=0; i<t.users.length; i++)
      document.getElementById('pbrchk_'+i).checked = false;
  },

  getErDone : function (){
    var t = Tabs.Resources;
    t.doList = [];
    document.getElementById('pbResNone').innerHTML = '';
	Options.getResType = document.getElementById('pbResColType').value;
	t.total = {gold:0, 1:0, 2:0, 3:0, 4:0};
    for (var i=0; i<t.users.length; i++){
      if (document.getElementById('pbrchk_'+i).checked)
        t.doList.push (t.users[i]);
    }
    if (t.doList.length==0){
      document.getElementById('pbResNone').innerHTML = 'Do not select any!';
      return;
    }
    t.accepting = true;
    document.getElementById('pballlist').value = 'OK Stop';
    document.getElementById('resDiv').innerHTML = '<DIV id=rsltDiv style="height:400px; max-height:400px; overflow-y:auto"><B>accepting from '+ t.doList.length +' user:</b><BR></div>';
    t.acceptNext ();
  },


  allDone : function (msg){
    var t = Tabs.Resources;
	msg += '<BR><BR> Total resources earned : <BR>\
		   Gold: '+addCommas(t.total.gold)+'<BR>';
	for(var i=1; i<=4; i++){
		msg += t.resource[i]+': '+addCommas(t.total[i])+'<BR>';
	}
    document.getElementById('rsltDiv').innerHTML += '<BR><BR>' + msg;
    document.getElementById('pballlist').value = 'Search List';
    t.accepting = false;
  },


  acceptNext : function (){
    var t = Tabs.Resources;
    var gift = t.doList.shift();
    if (gift == null){
      t.allDone ('Was completed to accept gifts.');
      return;
    }
    var acpDiv = document.getElementById('rsltDiv');
    var curDiv = document.createElement ('div');
    acpDiv.appendChild (curDiv);
    curDiv.innerHTML = '<B>Desde '+ gift.name +': ';
    var statSpan = document.createElement ('span');
    curDiv.appendChild (statSpan);
    statSpan.innerHTML = 'Aceptando... ';
    t.getCourtAction (gift, gotGiftData);

    function gotGiftData (rslt){
      if (!t.accepting)
        return;
      if (rslt.ok){
        var msg = rslt.gold +' gold and '+rslt.resource +' '+ t.resource[rslt.resourcetype]+'&nbsp; &nbsp; OK.';
		actionLog ('accepting from '+gift.name+': '+ rslt.gold +' gold y '+ rslt.resource +' '+ t.resource[rslt.resourcetype]);
        statSpan.innerHTML += msg;
		t.total.gold += rslt.gold;
		t.total[rslt.resourcetype] += rslt.resource;
		t.acceptNext ();
        return;
      }

      if (rslt.msg)
        msg = '<B>'+ rslt.msg + '</b>';
      else
        msg = '<SPAN class=boldRed>ERROR: '+ rslt.ajaxErr +'</span>';

      curDiv.removeChild (statSpan);
      curDiv = document.createElement ('div');
      curDiv.className = 'indent25';
      acpDiv.appendChild (curDiv);
      curDiv.innerHTML = msg;
      t.acceptNext ();
    }

  },

  getMembersInfo : function (pageNo, notify) {
    var t = Tabs.Resources;
    var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);

    params.pageNo = pageNo;
    new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/allianceGetMembersInfo.php" + unsafeWindow.g_ajaxsuffix, {
      method: "post",
      parameters: params,
      onSuccess: function (rslt) {
        notify (rslt);
      },
      onFailure: function (rslt) {
        notify ({errMsg:'Ajax Comm Error'});
      },
    });
  },

  getDailyAction : function (uid, notify){
	var t = Tabs.Resources;
    var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);

    params.pid = uid;
    new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/viewCourt.php" + unsafeWindow.g_ajaxsuffix, {
      method: "post",
      parameters: params,
      onSuccess: function (rslt) {
        notify (rslt);
      },
      onFailure: function (rslt) {
        notify ({errMsg:'Ajax Comm Error'});
      },
    });
  },

  getCourtAction : function (gift, notify){
	var t = Tabs.Resources;
    var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);

    params.atype = Options.getResType;
	params.toid = gift.userId;
	params.givercityid = t.city.id;
    new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/courtDoAction.php" + unsafeWindow.g_ajaxsuffix, {
      method: "post",
      parameters: params,
      onSuccess: function (rslt) {
        notify (rslt);
      },
      onFailure: function (rslt) {
        notify ({errMsg:'Ajax Comm Error'});
      },
    });
  },

  checkDailyAction : function (userList, notify){
	var t = Tabs.Resources;
	var count = 0;
    t.getDailyAction(userList[count].userId, parseViewCourt);

	function parseViewCourt (rslt){
		if (!rslt.ok || rslt.errMsg)
			notify ({errMsg:'Ajax Comm Error'});
		if(rslt.dailyActionFlag == 0)
			t.users.push(userList[count]);
		t.progress(count, 'pbResUserAvailCount');
		count++;
		if(count < userList.length){
			t.getDailyAction(userList[count].userId, parseViewCourt);
		} else {
			notify();
		}
	}
  },

  // notify with gifts[] or: {errMsg:xxx}
  fetchUserList : function (notify){
	var t = Tabs.Resources;
	var userList = [];
    t.getMembersInfo(1, parseAlliancePage);

    function parseAlliancePage (rslt){
      if (!rslt.ok || rslt.errMsg)
        notify ({errMsg:'Ajax Comm Error'});
	  var users = rslt.memberInfo;
      for(var k in users){
		userList.push({userId:users[k].userId, name:users[k].name, might:users[k].prestige, type:'alliance'});
	  }
	  t.progress(userList.length, 'pbResUserListCount');
	  if(rslt.currentPage < rslt.noOfPages){
		t.getMembersInfo((rslt.currentPage+1), parseAlliancePage);
	  } else {
		notify(userList);
	  }
    }


  },
},

/*********************************** Info tab ***********************************/

Tabs.Info = {
  tabOrder : 22,
  tabDisabled : !ENABLE_TEST_TAB,
  tabLabel : 'Info',
  cont : null,
  provMapCoords:	{imgWidth:710, imgHeight:708, mapWidth:670, mapHeight:670, leftMargin:31,   topMargin:19, bottomMargin:43},

  init : function (div){
    var t = Tabs.Info;
    t.cont = div;
    fortmight = {
      u53: "4",
      u55: "7",
      u60: "1",
      u61: "2",
      u62: "3",
    };
    var t = Tabs.Info;
    rownum = 0;
    var m = '<STYLE>.xtabH {background:#ffffe8; border:none; padding-right: 5px; padding-left: 5px; margin-left:10px; }\
            .xtabHL { background:#ffffe8; border-width: 1px; border-style: none none none solid; padding-right:5px; padding-left:5px; margin-left:10px; }\
            .xtabL { background:none; border-width: 1px; border-style: none none none solid; padding-right:5px; padding-left: 5px; margin-left:10px; }\
            .xtabLine { padding:0px; spacing:0px; height:1px; border-color:black; border-width: 1px; border-style: none none solid none }</style>\
        <DIV style="height:650px; max-height:650px; overflow-y:auto; overflow-x:hidden"><DIV class=ptstat>'+uW.g_js_strings.commonstr.troops+'</div><TABLE align=center cellpadding=1 cellspacing=0>\
        <TR align=center><TD class=xtab></td><TD class=xtabHL colspan=5><B>'+uW.g_js_strings.modal_marketplace.unitprice+'</b></td><TD class=xtabHL colspan=7><B>Estadisticas</b></td><TD class=xtabHL><B>'+uW.g_js_strings.commonstr.upkeep+'</b></td></tr>\
        <TR valign=bottom align=right><TD class=xtab></td><TD class=xtabHL>'+uW.g_js_strings.commonstr.food+'</td><TD class=xtabH>'+uW.g_js_strings.commonstr.wood+'</td><TD class=xtabH>'+uW.g_js_strings.commonstr.stone+'</td>\
        <TD class=xtabH>'+uW.g_js_strings.commonstr.ore+'</td><TD class=xtabH>'+uW.g_js_strings.commonstr.population+'</td><TD class=xtabHL>Might</td><TD class=xtabH>Life</td><TD class=xtabH>Ataq.</td><TD class=xtabH>Def.</td><TD class=xtabH>Veloc.</td><TD class=xtabH>Range</td><TD class=xtabH>Load</td>\
         <TD class=xtabHL>Food</td></tr>\
        <TR style="height:1px;"><TD style="padding:0px; spacing:0px; height:1px; border-color:black; border-width: 1px; border-style: none none solid none" colspan=14></td></tr>';
    for (ui=1; ui<13; ui++){
            rsty = ((++rownum % 2)?'':' style="background: #e8e8e8" ');
	    cost = unsafeWindow.unitcost['unt'+ui];
	    stats = unsafeWindow.unitstats['unt'+ui];
	    food = unsafeWindow.unitupkeeps[ui];
	    might = unsafeWindow.unitmight['unt'+ui];
      
      m += '<TR '+ rsty +'align=right><TD class=xtab align=left><B>'+ cost[0].substr(0,16) +'</b></td><TD class=xtabL>'+ cost[1] +'</td><TD class=xtab>'+ cost[2] +'</td>\
          <TD class=xtab>'+ cost[3] +'</td><TD class=xtab>'+ cost[4] +'</td><TD class=xtab>'+ cost[6] +'</td><TD class=xtabL>'+ might +'</td>\
          <TD class=xtab>'+ stats[0] +'</td><TD class=xtab>'+ stats[1] +'</td><TD class=xtab>'+ stats[2] +'</td><TD class=xtab>'+ stats[3] +'</td>\
          <TD class=xtab>'+ stats[4] +'</td><TD class=xtab>'+ stats[5] +'</td><TD class=xtabL>'+ food +'</td></tr>';

    }
    m += '<TR class=xtabLine><TD colspan=15 class=xtabLine></td></tr>';
    for (k in unsafeWindow.fortcost){
             rsty = ((++rownum % 2)?'':' style="background: #e8e8e8" ');
	     cost = unsafeWindow.fortcost[k];
	     fi = k.substring(3);
	     stats = unsafeWindow.fortstats['unt'+fi];
	     might = fortmight['u'+fi];
	     name = cost[0].replace ('Defensive','');
	     name = name.replace ('Wall-Mounted','');
      m += '<TR '+ rsty +'align=right><TD align=left class=xtab><B>'+ name +'</b></td><TD class=xtabL>'+ cost[1] +'</td><TD class=xtab>'+ cost[2] +'</td>\
          <TD class=xtab>'+ cost[3] +'</td><TD class=xtab>'+ cost[4] +'</td><TD class=xtab>'+ cost[6] +'</td><TD class=xtabL>'+ might +'</td>\
          <TD class=xtab>'+ stats[0] +'</td><TD class=xtab>'+ stats[1] +'</td><TD class=xtab>'+ stats[2] +'</td><TD class=xtab>'+ stats[3] +'</td>\
          <TD class=xtab>'+ stats[4] +'</td><TD class=xtab>'+ stats[5] +'</td><TD class=xtabL>'+ food +'</td></tr>';
    }
    m += '<TR class=xtabLine><TD colspan=14 class=xtabLine></td></tr></TABLE>';
    //Crest info
  var crestname = { 1101:'Bor',
          1102:'Ector',
          1103:'Kay',
          1104:'Bedivere',
          1105:'Gawain',
          1106:'Percival',
          1107:'Galahad',
          1108:'Lancelot',
          1109:'Arthur',
          1110:'Morgana',
          1111:'Mordred',
          1112:'Stag',
          1113:'Pendragon',
          1114:'Lady of the Lake',
          1115:'Merlin Seal',
          1120:'Aetherseal',
          1121:'Ysbadden Seal'
   };
  var crest = {};
  for (k in crestname){
    if(Seed.items['i'+k])
      crest[k] = Seed.items['i'+k];
    else
      crest[k] = 0;
  }
var crestreq = { 3:{1101:4, 1102:2, 1103:1},
         4:{1103:4, 1104:3, 1105:1},
         5:{1106:4, 1107:3, 1108:2},
         6:{1109:4, 1110:3, 1111:2},
         7:{1112:4, 1113:3, 1114:2},
         8:{1115:4, 1120:3, 1121:2}}; 
        

 m += '<BR><BR><TABLE align=center cellpadding=1 cellspacing=0><TR class=xtabLine><TD colspan=4 class=xtabLine><DIV class=ptstat>CITY REQUIREMENTS</div></td></tr>\
      <TR CLASS="xtabH">\
        <TD class=xtabHL ><b>Scriptures</b></TD>\
        <TD class=xtabHL><b>Owned/Required</b></TD>\
        <TD class=xtabHL><b>Owned/Required</b></TD>\
        <TD class=xtabHL><b>Owned/Required</b></TD>\
      </TR>\
    <TR style="height:1px;"><TD style="padding:0px; spacing:0px; height:1px; border-color:black; border-width: 1px; border-style: none none solid none" colspan=14></td></tr>';
    rownum = 0;
    for(k in crestreq){
       if (++rownum % 2)
         rsty = '';
       else
         rsty = ' style="background: #e8e8e8" ';
	    m += '<TR '+rsty+'>  \
      <TD class=xtab><B>CITY  '+k+'</B></TD>';
    for(u in crestreq[k])
      m+='<TD class=xtabL>'+crestreq[k][u]+' / '+crestname[u]+ ' (own '+crest[u]+') </TD>';
    m += '</TR>';

     }
	 m += '</TABLE>';
	 m += '<BR><BR><TABLE align=center cellpadding=1 cellspacing=0><TR class=xtabLine><TD colspan=16 class=xtabLine><DIV class=ptstat>WILD  LEVELS TO GET crests</div>\
      <TR CLASS="xtabH">\
        <TD class=xtabHL> </TD>\
	  <TD class=xtabHL><b>Bor</b></TD>\
        <TD class=xtabHL><b>Ector</b></TD>\
        <TD class=xtabHL><b>Kay</b></TD>\
        <TD class=xtabHL><b>Bedivere</b></TD>\
		<TD class=xtabHL><b>Gawain</b></TD>\
		<TD class=xtabHL><b>Percival</b></TD>\
        <TD class=xtabHL><b>Galahad</b></TD>\
        <TD class=xtabHL><b>Lancelot</b></TD>\
        <TD class=xtabHL><b>Arthur</b></TD>\
		<TD class=xtabHL><b>Morgana</b></TD>\
        <TD class=xtabHL><b>Mordred</b></TD>\
        <TD class=xtabHL><b>Stag King</b></TD>\
        <TD class=xtabHL><b>Pendragon</b></TD>\
		<TD class=xtabHL><b>Lady Of The Lake</b></TD>\
        <TD class=xtabHL><b>Merlin Seal</b></TD>\
		  <TD class=xtabHL></TD></TR>\
      <TR style="height:1px;"><TD style="padding:0px; spacing:0px; height:1px; border-color:black; border-width: 1px; border-style: none none solid none" colspan=16></td></tr>';
	  m += '<TD class=xtabHL>rate:<br> Level: </TD>\
        <TD class=xtabHL>5%<br> 5-7 </TD>\
		<TD class=xtabHL>10%<br> 5-7 </TD>\
        <TD class=xtabHL>15%<br> 5-8 </TD>\
        <TD class=xtabHL>20%<br> 6-8 </TD>\
		<TD class=xtabHL>25%<br> 6-8 </TD>\
		<TD class=xtabHL>30%<br> 7-9 </TD>\
        <TD class=xtabHL>40%<br> 7-9 </TD>\
        <TD class=xtabHL>50%<br> 7-9 </TD>\
        <TD class=xtabHL>60%<br> 8-10 </TD>\
		<TD class=xtabHL>N/A<br> 8-10 </TD>\
        <TD class=xtabHL>N/A<br> 8-10 </TD>\
        <TD class=xtabHL>N/A<br> 8-10 </TD>\
        <TD class=xtabHL>N/A<br> 8-10 </TD>\
		<TD class=xtabHL>N/A<br> 8-10 </TD>\
        <TD class=xtabHL>N/A without date<br> release </TD>\
			<TD class=xtabHL></TD></TR>\
		<TR style="height:1px;"><TD style="padding:0px; spacing:0px; height:1px; border-color:black; border-width: 1px; border-style: none none solid none" colspan=16></td></tr>';
	 m += '</TABLE>';
  //End crest info
	//Guia de ataques
	m += '<BR><BR><TABLE align=center cellpadding=1 cellspacing=0><TR class=xtabLine><TD colspan=11 class=xtabLine><DIV class=ptstat> ATTACK GUIDE</div></TD></TR>\
      <TR CLASS="xtabH">\
        <TD class=xtabHL> </TD>\
	  <TR class=xtabLine><TD colspan=11 class=xtabLine><DIV class=ptstat>BARB ATTACK GUIDE</div></TD></TR><TR CLASS="xtabH">\
	  <TD class=xtabHL><b>Campamentos</b></TD>\
        <TD class=xtabHL><b>Camp 1</b></TD>\
        <TD class=xtabHL><b>Camp 2</b></TD>\
        <TD class=xtabHL><b>Camp 3</b></TD>\
		<TD class=xtabHL><b>Camp 4</b></TD>\
		<TD class=xtabHL><b>Camp 5</b></TD>\
        <TD class=xtabHL><b>Camp 6</b></TD>\
        <TD class=xtabHL><b>Camp 7</b></TD>\
        <TD class=xtabHL><b>Camp 8</b></TD>\
		<TD class=xtabHL><b>Camp 9</b></TD>\
        <TD class=xtabHL><b>Camp 10</b></TD><TD class=xtabHL></TD></TR>\
      <TR style="height:1px;"><TD style="padding:0px; spacing:0px; height:1px; border-color:black; border-width: 1px; border-style: none none solid none" colspan=11></td></tr>';
	  m += '<TD class=xtabHL>Troops:<br> Inves: </TD>\
		<TD class=xtabHL></TD>\
        <TD class=xtabHL></TD>\
        <TD class=xtabHL></TD>\
		<TD class=xtabHL>17.000 Archers<br> </TD>\
		<TD class=xtabHL>17.000 Archers<br></TD>\
        <TD class=xtabHL>26.000 Archers<br></TD>\
        <TD class=xtabHL>43.000 Archers<br></TD>\
        <TD class=xtabHL>28.000 Ballis.<br> </TD>\
		<TD class=xtabHL>60.000 Ballis.<br> </TD>\
        <TD class=xtabHL>105000 Cats</TD><TD class=xtabHL></TD></TR>\
		<TR class=xtabLine><TD colspan=11 class=xtabLine><DIV class=ptstat>WILD ATTACK GUIDE</div></TD></TR><TR CLASS="xtabH">\
	  <TD class=xtabHL><b>Wilds</b></TD>\
        <TD class=xtabHL><b>Level 1</b></TD>\
        <TD class=xtabHL><b>Level 2</b></TD>\
        <TD class=xtabHL><b>Level 3</b></TD>\
		<TD class=xtabHL><b>Level 4</b></TD>\
		<TD class=xtabHL><b>Level 5</b></TD>\
        <TD class=xtabHL><b>Level 6</b></TD>\
        <TD class=xtabHL><b>Level 7</b></TD>\
        <TD class=xtabHL><b>Level 8</b></TD>\
		<TD class=xtabHL><b>Level 9</b></TD>\
        <TD class=xtabHL><b>Level 10</b></TD><TD class=xtabHL></TD></TR>\
      <TR style="height:1px;"><TD style="padding:0px; spacing:0px; height:1px; border-color:black; border-width: 1px; border-style: none none solid none" colspan=11></td></tr>';
	  m += '<TD class=xtabHL>1 st Wave:</TD>\
		<TD class=xtabHL>-</TD>\
        <TD class=xtabHL>-</TD>\
        <TD class=xtabHL>-</TD>\
		<TD class=xtabHL>17.000 Archers</TD>\
		<TD class=xtabHL>50 Mili.</TD>\
        <TD class=xtabHL>100 Mili.</TD>\
        <TD class=xtabHL>150 Mili.</TD>\
        <TD class=xtabHL>300 Mili.<br>1 Ballis.</TD>\
		<TD class=xtabHL>600 Milis.<br>1 Ballis.</TD>\
        <TD class=xtabHL>1.200 Milis.<br>1 Ballis.</TD><TD class=xtabHL></TD></TR>\
		<TR style="height:1px;"><TD style="padding:0px; spacing:0px; height:1px; border-color:black; border-width: 1px; border-style: none none solid none" colspan=11></td></tr>';
	  m += '<TD class=xtabHL>2 nd Wave:<br> Inves</TD>\
		<TD class=xtabHL><br><br> </TD>\
        <TD class=xtabHL><br> <br></TD>\
        <TD class=xtabHL><br><br> </TD>\
		<TD class=xtabHL>17.000 Archers<br> <br></TD>\
		<TD class=xtabHL>1 Mili.<br>1.500 Archers<br>+6</TD>\
        <TD class=xtabHL>1 Mili.<br>3.000 Archers<br>+7</TD>\
        <TD class=xtabHL>1 Mili.<br>7.500 Archers<br>+8(FF+8)</TD>\
        <TD class=xtabHL>44.000 Archers <br> 2.000 Balli.</TD>\
		<TD class=xtabHL>10.000 swd.<br>50.000 Archers <br>3.000 Balli.<br></TD>\
        <TD class=xtabHL>Watching them or<br><br></TD><TD class=xtabHL></TD></TR>\
		<TR style="height:1px;"><TD style="padding:0px; spacing:0px; height:1px; border-color:black; border-width: 1px; border-style: none none solid none" colspan=11></td></tr>';
	 m += '</TABLE>';
	 //fin guia ataques
	m += '<BR><BR><DIV class=ptstat>DISTANCE CALCULATOR</div><DIV class=ptentry><TABLE align=center cellpadding=1 cellspacing=0>\
      <TR><TD class=xtab align=right><B>First location: </b></td><TD  class=xtab> X: <INPUT id=calcX type=text\> Y: <INPUT id=calcY type=text\> Or,choose city: <SPAN id=ptloc1></span></td></tr>\
      <TR><TD class=xtab><B>Second location: </b></td><TD class=xtab> X: <INPUT id=calcX2 type=text\> Y: <INPUT id=calcY2 type=text\> Or,choose city: <SPAN id=ptloc2></span></td></tr></table>\
      <CENTER><DIV style="width:60%; font-size:14px; border: 1px solid; background-color:white; margin:20px 3px 3px 0px; padding:4px" id=ptdistout></div></div>\
      <BR><BR></center>';
    m += '<TABLE align=center cellpadding=1 cellspacing=0><TR><TD><DIV class=ptstat>MAP OF PROVINCES</div><DIV id=ptProvMap style="height:'+ provMapCoords.imgHeight +'px; width:'+ provMapCoords.imgWidth +'px; background-repeat:no-repeat; background-image:url(\''+ URL_PROVINCE_MAP +'\')"></div></TD></TR></TABLE>';
    m += '<BR><DIV class=ptstat>MISC INFO</div>KofC client version: '+ KOCversion +'<BR>';
    if (DEBUG_BUTTON)
      m += '<BR><INPUT id=ptButDebug type=submit name="SEED" value="DEBUG">';

    t.cont.innerHTML = m +'</div>';
    if (DEBUG_BUTTON)
      document.getElementById('ptButDebug').addEventListener('click', function (){debugWin.doit()}, false);
	for (var c=0; c<Cities.numCities; c++)
      t.makeCityImg (c, document.getElementById('ptProvMap'));
    new CdispCityPicker ('ptloc1', document.getElementById('ptloc1'), true, t.eventLocChanged, 0).bindToXYboxes(document.getElementById('calcX'), document.getElementById('calcY'));
     new CdispCityPicker ('ptloc2', document.getElementById('ptloc2'), true, t.eventLocChanged, 0).bindToXYboxes(document.getElementById('calcX2'), document.getElementById('calcY2'));
     t.eventLocChanged(Cities.cities[0], Cities.cities[0].x, Cities.cities[0].y);
  },

  hide : function (){
  },

  show : function (){
  },

// var provMapCoords = {imgWidth:680, imgHeight:654, mapWidth:595, mapHeight:595, leftMargin:44, topMargin:39};
  makeCityImg : function (cityNum, eMap){
    var t = Tabs.Info;
    var city = Cities.cities[cityNum];
//    var off = getAbsoluteOffsets (eMap);
    var x = parseInt((provMapCoords.mapWidth * city.x) / 750);
    var y = parseInt((provMapCoords.mapHeight * city.y) / 750);
   var ce = document.createElement ('div');
    ce.style.background = 'black';
    ce.style.opacity = '1.0';
    ce.style.position='relative';
    ce.style.display='block';
    ce.style.width='14px';
    ce.style.height='16px';
    ce.style.border='1px solid #fff';
    ce.style.color = 'white';
    ce.style.textAlign = 'center';
	ce.style.top = (y+provMapCoords.topMargin-(cityNum*16)-8) +'px';
    ce.style.left = (x+provMapCoords.leftMargin-7) +'px';
    eMap.appendChild(ce);
    ce.innerHTML = (cityNum+1) +'';
  },

  plotCityImg : function (cityNum, eMap, x, y){
//logit ('makeCityImg: '+ cityNum);
    var t = Tabs.Info;
    var xplot = parseInt((provMapCoords.mapWidth * x) / 750);
    var yplot = parseInt((provMapCoords.mapHeight * y) / 750);
	if(document.getElementById('plotmap_'+cityNum) == null){
		var ce = document.createElement ('div');
		ce.style.background = 'white';
		ce.id = 'plotmap_'+cityNum;
		ce.style.opacity = '1.0';
		ce.style.position='relative';
		ce.style.display='block';
		ce.style.width='14px';
		ce.style.height='16px';
		ce.style.border='1px solid #fff';
		ce.style.color = 'black';
		ce.style.textAlign = 'center';
	} else {
		ce = document.getElementById('plotmap_'+cityNum);
	}
    ce.style.top = (yplot+provMapCoords.topMargin-((Cities.numCities+cityNum)*16)-8) +'px';
    ce.style.left = (xplot+provMapCoords.leftMargin-7) +'px';
    eMap.appendChild(ce);
    ce.innerHTML = (cityNum+1) +'';
  },

  eventLocChanged : function (city, x, y){
	var t = Tabs.Info;
    var x1 = parseInt(document.getElementById('calcX').value);
    var x2 = parseInt(document.getElementById('calcX2').value);
    if (isNaN(x2))
      return;
    var y1 = parseInt(document.getElementById('calcY').value);
    var y2 = parseInt(document.getElementById('calcY2').value);
    var m = 'The distance from'+ x1 +','+ y1 +' to '+ x2 +','+ y2 +' is: &nbsp;<B>'+ distance (x1, y1, x2, y2).toFixed(2) +'</b>';
    document.getElementById('ptdistout').innerHTML = m;
	t.plotCityImg(0, document.getElementById('ptProvMap'), x1, y1);
	t.plotCityImg(1, document.getElementById('ptProvMap'), x2, y2);
  },
}

/*************** WILDS TAB *********************/

var wildNames = {
   0: 'bog',
  10: 'grassland',
  11: 'lake',
  20: 'Wood',
  30: 'hill',
  40: 'mountain',
  50: 'plain',
};

var mercNames = {
  0: 'none',
  1: 'Novice',
  2: 'Intermediate',
  3: 'Veteran',
};

Tabs.Wilds = {
  tabOrder : 16,
  tabLabel : 'wild',
  tabDisabled : !ENABLE_TEST_TAB,

  cont : null,
//  state : null,
  upGoldTimer : null,
  wildList : [],
  buildList : {},

  init : function (div){
    var t = Tabs.Wilds;
    t.cont = div;
    uW.ptButMaxTraps = t.e_butMaxTraps;
    uW.ptInpWildTraps = t.e_inpTraps;
    uW.ptButWildSet = t.e_butWildSet;
    t.cont.innerHTML = '<DIV id=wildContent style="maxheight:665px; height:665px; overflow-y:auto">';
//    t.show ();
  },

  hide : function (){
    var t = Tabs.Wilds;
    clearTimeout (t.upGoldTimer);
  },

  show : function (){
    var t = Tabs.Wilds;
    clearTimeout (t.upGoldTimer);

    m = '<CENTER>'+ strButton20('RESET', 'id=ptwref') +'</center><TABLE cellspacing=0 cellpadding=0 class=ptTabPad align=center>';
    for (var c=0; c<Cities.numCities; c++){
      var city = Cities.cities[c];
      var cWilds = Seed.wilderness['city'+city.id];
      t.wildList[c] = [];
      var castle = parseInt(Seed.buildings['city'+ city.id].pos0[1]);
      if(castle == 11) castle = 12;
      if(castle == 12) castle = 14;
      var totw = 0;
      if (matTypeof(cWilds)=='object'){
        for (var k in cWilds)
          ++totw;
      }
      m += '<TR><TD colspan=20><DIV class=ptstat><TABLE class=ptNoPad width=100%><TR><TD width=100></td><TD width=90% align=center>'+ city.name
        +' &nbsp; ('+ city.x +','+ city.y +')</td><TD width=100% align=right>Wilds: '+ totw +' de '+ castle +' &nbsp; </TD></tr></table></div></td></tr>';
      var row = 0;
      var sortem = [];

      if (matTypeof(cWilds) != 'array') {
        m += '<TR style="background-color:white; font-weight:bold;" align=right><TD align=left>Type of Wild</td><TD></td><TD align=left>coordinates</td><TD>traps</td><TD align=left>Mercs</td>\
         <TD width=15></td><TD colspan=3 class=entry>'+ htmlTitleLine(' DEFENSES TO CHANGE ') +'</td></tr>';
        for (var k in Seed.wilderness['city'+city.id])
          sortem.push (Seed.wilderness['city'+city.id][k]);
        sortem.sort (function (a,b){
          var x; if ((x = b.tileLevel-a.tileLevel)!=0)
            return x;
          return a.tileType-b.tileType;
        });
        for (i=0; i<sortem.length; i++){
          var wild = sortem[i];
          var wildDef = Seed.wildDef['t'+wild.tileId];
          if (wildDef==undefined || !wildDef)
            wildDef = {fort60Count:0, mercLevel:0};
          var maxTraps = parseInt(wild.tileLevel)*100;
          var maxBuild = maxTraps - parseInt(wildDef.fort60Count);
          t.wildList[c][i] = [wild.tileId, maxBuild];
          m += '<TR align=right'+ (row++%2?'':' class=ptOddrow') +'><TD align=left>'+ wildNames[wild.tileType] +'</td>\
            <TD>'+ wild.tileLevel +'</td><TD align=center><A onclick="ptGotoMap('+ wild.xCoord +','+ wild.yCoord +')">'+ wild.xCoord +','+ wild.yCoord +'</a></td>\
            <TD align=right><B>'+ wildDef.fort60Count +'</b></td><TD align=center><B>'+ mercNames[wildDef.mercLevel] +'</b></td>\
            <TD></td><TD align=left class=ptentry><B>Build traps:</b> <INPUT onchange="ptInpWildTraps(this)" id=ptwt_'+ c +'_'+ i
              + (maxBuild==0?' DISABLED ':'')+' style="margin:0px; padding:0px" type=text size=3 maxlength=4></td>'
          if (wildDef.fort60Count < maxTraps)
            m += '<TD class=ptentry style="padding:0px">'+ strButton14('Max', 'id=ptwx_'+ c +'_'+ i +' onclick="ptButMaxTraps(this)"') +'</td>';
          else
            m += '<TD class=ptentry></td>';
          m += '<TD class=ptentry> &nbsp; &nbsp; <B>Mercs:</b> ' + htmlSelector(mercNames, wildDef.mercLevel, 'id=ptwm_'+ c +'_'+ i) +' &nbsp; &nbsp; </td></tr>';
        }
        m += '<TR><TD colspan=6></td><TD class=ptentry align=center colspan=3><TABLE><TR><TD width=40% align=left>Cost: <SPAN id=ptwgc_'+ c +'>0</span></td>\
            <TD width=10%>'+ strButton20("SET DEFENSES", 'onclick="ptButWildSet('+ c +')"') +'<TD width=40% align=right>Gold: <SPAN id=ptwgt_'+ c +'>0</span></td></td></tr></table></td></tr>';
      } else {
        m+= '<TR><TD colspan=9> &nbsp; </td></tr>';
      }
    }
    document.getElementById('wildContent').innerHTML = m + '</table></div>';
    document.getElementById('ptwref').addEventListener ('click', t.show, false);
    t.updateGold ();
  },

  e_butWildSet : function (c){
    var t = Tabs.Wilds;
    var totTraps = 0;
    var cid = Cities.cities[c].id;
    t.buildList = {cityId:cid, list:[]};

    for (var w=0; w<t.wildList[c].length; w++){
      var wild = Seed.wilderness['city'+cid]['t'+t.wildList[c][w][0]];
      var wildDef = Seed.wildDef['t'+t.wildList[c][w][0]];
// TODO: Seed.wildDef is null if just aquired
	if (wildDef==undefined || !wildDef)
  wildDef = {fort60Count:0, mercLevel:0};

      var numTraps = parseInt(document.getElementById('ptwt_'+ c +'_'+ w).value, 10);
      if (isNaN(numTraps))
        numTraps = 0;
      totTraps += numTraps;
      if (numTraps > 0)
        t.buildList.list.push (['T', wild.tileId, numTraps]);
      var mercId =document.getElementById('ptwm_'+ c +'_'+ w).value;
      if (wildDef.mercLevel != mercId)
        t.buildList.list.push (['M', wild.tileId, mercId, wildDef.mercLevel]);
    }

    var totCost = totTraps * 200;
    if (totCost > parseInt(Seed.citystats['city'+cid].gold[0])){
      document.getElementById('ptwgc_'+ c).innerHTML = '<SPAN class=boldRed>'+ addCommasInt(totCost) +'</span>';
      return;
    }
    if (t.buildList.list.length == 0)
      return;
    t.setCurtain (true);
    var popDiv = t.setPopup (true);
    popDiv.innerHTML = '<TABLE class=ptTab width=100% height=100%><TR><TD>\
          <DIV class=ptstat>Configurando defensas de tierras</div>\
          <DIV id=ptWildBuildDiv class=ptDiv style="padding:10px; height:225px; max-height:225px; overflow-y:auto"></div>\
          </td></tr><TR><TD align=center>'+ strButton20('CANCEL', 'id=ptWildCancel') +'</td></tr></table>';
    document.getElementById('ptWildCancel').addEventListener('click', t.e_buildCancel, false);
    t.processQue(null);
  },

  e_buildCancel : function (){
    var t = Tabs.Wilds;
    t.setCurtain(false);
    t.setPopup(false);
    t.show();
  },

  processQue : function (errMsg){
    var t = Tabs.Wilds;
    var what = t.buildList.list.shift();
    var div = document.getElementById('ptWildBuildDiv');
    if (what==null || errMsg){
      if (errMsg)
        div.innerHTML += '<BR><SPAN style="white-space:normal;" class=boldRed>ERROR: '+ errMsg +'</span>';
      else
        div.innerHTML += 'Echo.<BR>';
      document.getElementById('ptWildCancel').firstChild.innerHTML = 'CERRAR';
      return;
    }
    if (div.innerHTML != '')
      div.innerHTML += 'done.<BR>';
    var wild = Seed.wilderness['city'+ t.buildList.cityId]['t'+what[1]];
    if (what[0] == 'T'){
      div.innerHTML += 'building '+ what[2] +' traps '+ Cities.byID[t.buildList.cityId].name +', <br> land located in '+ wild.xCoord +','+ wild.yCoord +' ... ';
      t.postBuyTraps (t.buildList.cityId, what[1], what[2], t.processQue);
    } else {
      div.innerHTML += 'Configuring mercenaries '+ mercNames[what[2]] +' to '+ Cities.byID[t.buildList.cityId].name +'<br> land located in '+ wild.xCoord +','+ wild.yCoord +' ... ';
      t.postHireMercs (t.buildList.cityId, what[1], what[2], what[3], t.processQue);
    }
  },

  setPopup : function (onoff){
    var t = Tabs.Wilds;
    if (onoff){
      var div = document.createElement('div');
      div.id = 'ptWildPop';
      div.style.backgroundColor = '#fff';
      div.style.zindex = mainPop.div.zIndex+2;
      div.style.opacity = '1';
      div.style.border = '3px outset red';
      div.style.width = '850px';
      div.style.height = '300px';
      div.style.display = 'block';
      div.style.position = 'absolute';
      div.style.top = '100px';
      div.style.left = '100px';
      t.cont.appendChild (div);
      return div;
    } else {
      t.cont.removeChild (document.getElementById('ptWildPop'));
    }
  },

  setCurtain : function (onoff){
    var t = Tabs.Wilds;
    if (onoff){
      var off = getAbsoluteOffsets (t.cont);
      var curtain = document.createElement('div');
      curtain.id = 'ptWildCurtain';
      curtain.style.zindex = mainPop.div.zIndex+1;
      curtain.style.backgroundColor = "#000000";
      curtain.style.opacity = '0.5';
      curtain.style.width = t.cont.clientWidth +'px';
      curtain.style.height = t.cont.clientHeight +'px';
      curtain.style.display = 'block';
      curtain.style.position = 'absolute';
      curtain.style.top = off.top + 'px';
      curtain.style.left = off.left + 'px';
      t.cont.appendChild (curtain);
    } else {
      t.cont.removeChild (document.getElementById('ptWildCurtain'));
    }
  },

  e_butMaxTraps : function (e){
    var t = Tabs.Wilds;
    var c = e.id.substr(5,1);
    var w = e.id.substr(7);
    var inp = document.getElementById('ptwt_'+ c +'_'+ w);
    inp.value = t.wildList[c][w][1];
    t.e_inpTraps (inp);
  },

  e_inpTraps : function (e){
    var t = Tabs.Wilds;
    var c = e.id.substr(5,1);
    var w = e.id.substr (7);
    var tot = 0;
    for (var i=0; i<t.wildList[c].length; i++) {
      var val = parseInt(document.getElementById('ptwt_'+ c +'_'+ i).value, 10);
      if (isNaN(val))
        val = 0;
      tot += val;
    }
    document.getElementById('ptwgc_'+ c).innerHTML = addCommasInt(tot * 200);
    if (isNaN(e.value) || e.value<0 || e.value>t.wildList[c][w][1]){
      e.value = '';
      e.style.backgroundColor = '#ffaaaa';
    } else
      e.style.backgroundColor = null;
  },

  updateGold : function (){
    var t = Tabs.Wilds;
    for (var c=0; c<Cities.numCities; c++){
      var e = document.getElementById('ptwgt_'+ c +'');
      if (e)
        e.innerHTML = addCommasInt(Seed.citystats['city'+Cities.cities[c].id].gold[0]);
    }
    t.upGoldTimer = setTimeout (t.updateGold, 2000);
  },

  postBuyTraps : function (cid, tid, quant, notify){
    if (DISABLE_POST_DEFENSES){
      setTimeout (function (){notify(null)}, 1500);
      return;
    }
    var params = uW.Object.clone(uW.g_ajaxparams);
    params.cid = cid;
    params.tid = tid;
    params.quant = quant;
    new MyAjaxRequest(uW.g_ajaxpath + "ajax/buyWildTraps.php" + uW.g_ajaxsuffix, {
      method: "post",
      parameters: params,
      onSuccess: function (rslt) {
        if (rslt.ok){
          if (!Seed.wildDef["t"+ tid])
            Seed.wildDef["t"+ tid] = {tileId:tid, fort60Count:0, mercLevel:0};
          Seed.wildDef["t"+ tid].fort60Count = parseInt(Seed.wildDef["t"+ tid].fort60Count) + parseInt(quant);
        }
		if (notify)
          notify (rslt.errorMsg);
      },
      onFailure: function () {
        if (notify)
          notify ('ERROR DE AJAX ');
      },
    });
  },

  postHireMercs : function (cid, tid, newLevel, oldLevel, notify){
    if (DISABLE_POST_DEFENSES){
      setTimeout (function (){notify('OK, so its not really a bug, its just George playing to see how the error message is seen. Its long, how is it formed? Is it OK? Are you sure? JANE! Get me out of this thing!')}, 1500);
      return;
    }
    var params = uW.Object.clone(uW.g_ajaxparams);
    params.cid = cid;
    params.tid = tid;
    params.lv = newLevel;
    params.olv = oldLevel;
    new MyAjaxRequest(uW.g_ajaxpath + "ajax/hireWildMerc.php" + uW.g_ajaxsuffix, {
      method: "post",
      parameters: params,
      onSuccess: function (rslt) {
        if (rslt.ok){
          if (!Seed.wildDef["t"+ tid])
            Seed.wildDef["t"+ tid] = {tileId:tid, fort60Count:0, mercLevel:0};
          Seed.wildDef["t"+ tid].mercLevel = newLevel;
		}
		if (notify)
          notify (rslt.errorMsg);
      },
      onFailure: function () {
        if (notify)
          notify ('ERROR DE AJAX ');
      },
    });
  },

} 


/*************** KNIGHTS TAB *********************/
Tabs.Knights = {
  tabOrder : 19,
  tabLabel : "KNIGHT",
  cont : null,
  displayTimer : null,
  action : 0,

  init : function (div){
    var t = Tabs.Knights;
    t.cont = div;
    uW.ptAssignSkill = t.clickedAssignPoints;
    uW.ptAssignTunes = t.clickedAssignTune;
    t.cont.innerHTML = '<STYLE>table.ptTabPad tr.ptwpad {background-color:#ffffff; padding-left:15px}</style>\
       <DIV id=ptknightdiv style="max-height:660px; height:660px; overflow-y:auto">';
  },

  hide : function (){
    var t = Tabs.Knights;
    clearTimeout (t.displayTimer);
  },

  show : function (){
    var t = Tabs.Knights;
    clearTimeout (t.displayTimer);

    function _dispKnight (roleId, knight, numcid){
      var rid = roleId;
      if (roleId==null)
        rid = 1;
      var sty='';
      if (row++ % 2)
        sty = 'class=ptOddrow ';
	m = '<TR '+ sty +'valign=top align=right><TD><B>'+ (roleId==null ? '':knightRoles[rid][0]) +'</b></td><TD align=left>';
      if (knight == null) {//mostramos estados y calificaciones
        m += '--------</td><TD colspan=4></td><TD class=ptentry colspan=5></td><TD colspan=2></td></tr>';
      } else {
        var level = parseInt(Math.sqrt(parseInt(knight.experience) / 75)) + 1;
        var unpoints = level - parseInt(knight.skillPointsApplied);
        var salary = (parseInt(knight.skillPointsApplied) + 1) * 20;
        totSalary += salary;
        var ass = '';
        if (knight.knightStatus == 10){
          ass = '<TD class=ptentry align=left colspan=4>Marching</td>';
        } else {
          if (unpoints > 0){
            unpoints = '<SPAN class="boldRed">'+ unpoints +'</span>';// asigna puntos del caballero
          for (var i=0; i<4; i++){
            var sty = 'padding-left:1px;';
            if (i == rid)   // bold it
              sty += 'font-weight:bold;color:#116654';
             if (t.action==2) {   
	          t.clickedAssignPoints(null,cid,knight.knightId,i);
            }
            if (t.action==1) {   
	      	  t.clickedAssignPoints(null,cid,knight.knightId,1);
            }
            ass += '<TD class=ptentry align=left style="'+ sty +'" ><A style="'+ sty +'" onclick="ptAssignSkill(this,' + cid +','+ knight.knightId +','+ i +')">['+ knightRoles[i][2] +'] &nbsp;</a></td>';
          }
          }
          else
            ass = '<TD class=ptentry colspan=4></td>';
        }
        var skills = [];
        for (var i=0; i<4; i++){
          if (i == rid)
            skills[i] = '<B>'+ knight[knightRoles[i][1]] +'</b>';
          else
            skills[i] = knight[knightRoles[i][1]];
        }
		
	var item211="0";
        var item221="0";
        var item231="0";
        var item241="0";
        if (Seed.items.i211) item211='<a onclick="citysel_click(document.getElementById(\'citysel_'+ (numcid+1)+'\'));setTimeout (function (){ boost_modal(1,'+ knight.knightId +');return false;}, 500);">'+Seed.items.i211+'</a>';
        if (Seed.items.i221) item221='<a onclick="citysel_click(document.getElementById(\'citysel_'+ (numcid+1)+'\'));setTimeout (function (){ boost_modal(2,'+ knight.knightId +');return false;}, 500);">'+Seed.items.i221+'</a>';
        if (Seed.items.i231) item231='<a onclick="citysel_click(document.getElementById(\'citysel_'+ (numcid+1)+'\'));setTimeout (function (){ boost_modal(3,'+ knight.knightId +');return false;}, 500);">'+Seed.items.i231+'</a>';
        if (Seed.items.i241) item241='<a onclick="citysel_click(document.getElementById(\'citysel_'+ (numcid+1)+'\'));setTimeout (function (){ boost_modal(4,'+ knight.knightId +');return false;}, 500);">'+Seed.items.i241+'</a>';
		
        m += '<a title="Role Assigner" onclick="citysel_click(document.getElementById(\'citysel_'+ (numcid+1)+'\'));setTimeout (function (){ assign_role_modal('+ knight.knightId +');return false;}, 500);">'+knight.knightName + '</td><TD>'+ skills[0] +' ('+item211+')</td><TD>'+ skills[1] +' ('+item221+')</td><TD>'+ skills[2] +' ('+item231+')</td><TD>' + skills[3] +' ('+item241+')</td><TD class=ptentry>'+ unpoints +'</td>'+ ass +'<TD><a title="EXP Boost" onclick="citysel_click(document.getElementById(\'citysel_'+ (numcid+1)+'\'));setTimeout (function (){  xpBoost_modal('+ knight.knightId +');return false; }, 500);">'+ level +'</a></td><td><a onclick="citysel_click(document.getElementById(\'citysel_'+ (numcid+1)+'\'));setTimeout (function (){ loyalBoost_modal('+ knight.knightId +');return false;}, 500);">'+knight.loyalty+'</a></td><TD>'+ addCommas(salary) +'</td></tr>';

      }
      return m;
    }

    var totSalary = 0;
    var m = '<TABLE cellspacing=0 align=center class=ptTabPad><TBODY>';
    	  m += '<TR><TD colspan=15><DIV class=ptstat>Automatic methods of assignment - <input style="height:20px;font-size:9px;" type=button value="Add default" id="ptknight_def"><input style="height:20px;font-size:9px;" type=button value="Add to combat" id="ptknight_com"></div></td></tr>';
    for (var c=0; c<Cities.numCities; c++) {
      var cid = Cities.cities[c].id;
      m += '<TR><TD colspan=13><DIV class=ptstat>'+ Cities.cities[c].name +'</div></td></tr>\
          <TR class=ptwpad style="font-weight:bold" align=right><TD width=70>Role</td><TD width=140 align=center>name</td><TD width=26>Pol</td><TD width=26>Com</td>\
          <TD width=26>Int</td><TD width=26>Ing</td><TD width=90 align=center colspan=5>--- unassigned---</td><TD width=35>Level</td><td>loyalty</td><TD width=40 align=right> salary</td></tr>';
     totSalary = 0;
      var did = {}; 
      var row = 0;
      for (var i=0; i<knightRoles.length; i++){
        var leader = Seed.leaders['city'+cid][knightRoles[i][1]+'KnightId'];
        if (leader == 0)
          m += _dispKnight (i, null, c);
        else {
          m += _dispKnight (i, Seed.knights['city'+cid]['knt'+leader], c);
          did['knt'+leader] = true;
        }
      }
      var list = [];
      for (k in Seed.knights['city'+cid]){
        if (!did[k])
          list.push (Seed.knights['city'+cid][k]);
      }
      list.sort (function (a,b){return parseInt(b.combat)-parseInt(a.combat)});
      for (i=0; i<list.length; i++)
        m += _dispKnight (null, list[i], c);
      m += '<TR align=right><TD colspan=13><B>Total Salary:</b></td><TD>'+ addCommas(totSalary) +'</td></tr>';        
    }
    document.getElementById('ptknightdiv').innerHTML = m +'</tbody></table></div>';
	t.action = 0;
    document.getElementById('ptknight_com').addEventListener ('click', function (){
      t.action=1;
      t.show();
    }, false);
    document.getElementById('ptknight_def').addEventListener ('click', function (){
          t.action=2;
          t.show();
    }, false);
    t.displayTimer = setTimeout (t.show, 10000);
  },


  clickedAssignPoints : function (e, cid, kid, rid){
    var t = Tabs.Knights;
    clearTimeout (t.displayTimer);

    var knight = Seed.knights['city'+cid]['knt'+kid];
    if (knight.knightStatus == 10 && e!=null){
      var row = e.parentNode.parentNode;
      row.childNodes[7].innerHTML = 'Marching';
      return;
    }
    sk = [];
    var unassigned = parseInt(Math.sqrt(parseInt(knight.experience)/75)) + 1  - parseInt(knight.skillPointsApplied);
    for (var i=0; i<4; i++){
      sk[i] = parseInt(knight[knightRoles[i][1]]);
      if (i == rid)
        sk[i] += unassigned;
    }
    if (unassigned==0) return;

    if (e!=null) {
     var row = e.parentNode.parentNode;
     for (i=row.cells.length-1; i>=1; i--)
      row.deleteCell (i);
     var newCell=row.insertCell(-1);
     newCell.colSpan = 12;
     newCell.align= 'left';
     newCell.style.padding='1px 5px 1px 10px';
     var div = document.createElement ('div');
     div.style.backgroundColor = '#ffffff';
     div.style.textAlign = 'center';
     div.style.border = '1px solid';
     div.style.width = '98%';
     div.style.whiteSpace = 'normal';
     newCell.appendChild (div);
     div.innerHTML = 'Assigning '+ unassigned +' skill points to '+ knightRoles[rid][1] +' ... ';
    }
  t.postSkillPoints (cid, kid, sk[0], sk[1], sk[2], sk[3], function (r){t.postDone(r, div)});
  },

  postDone : function (rslt, div){
    var t = Tabs.Knights;
    clearTimeout (t.displayTimer);
    if (rslt.ok){
      div.innerHTML += '<B>done.</b>';
      t.displayTimer = setTimeout (t.show, 5000);
    } else {
      div.innerHTML += '<BR><SPAN class=boldRed>ERROR: '+ rslt.errorMsg +'</span>';
      t.displayTimer = setTimeout (t.show, 10000);
    }
  },

  postSkillPoints : function (cid, kid, pol, com, int, res, notify){
    var params = uW.Object.clone(uW.g_ajaxparams);
    params.cid = cid;
    params.kid = kid;
    params.p = pol;
    params.c = com;
    params.i = int;
    params.r = res;
    if (DISABLE_POST_KNIGHT_SKILLS){
      setTimeout (function (){notify({ok:true})}, 1500);
//      setTimeout (  function (){notify({ok:false, errorMsg:"FAKE ERROR message, a long one, to test how it will fit and overflow! Perhaps you'll need to retry?"})}  , 2000);
      return;
    }
    new MyAjaxRequest(uW.g_ajaxpath + "ajax/skillupKnight.php" + uW.g_ajaxsuffix, {
      method: "post",
      parameters: params,
      onSuccess: function (rslt) {
        if (rslt.ok) {
          var knight = Seed.knights["city" + cid]["knt" + kid];
          var up = pol + com + int + res - knight.politics - knight.combat - knight.intelligence - knight.resourcefulness;
          knight.politics = pol;
          knight.combat = com;
          knight.intelligence = int;
          knight.resourcefulness = res;
          knight.skillPointsApplied = (parseInt(knight.skillPointsApplied) + up).toString();
        }
        if (notify)
          notify (rslt);
      },
      onFailure: function () {
        if (notify)
          notify (rslt);
      },
    });
  },
};

/**************AllianceReports singleton**********************/

var messageNav = {
   mmFunc : null,   MapFunc :null,
   mmsFunc : null,   
   init : function (){
     t = messageNav;
     t.MapFunc = new CalterUwFunc ('modal_maptile', [[/}\s*$/, 'setTimeout(function() { BOMdal_hook(j,k,m,a); },0); }']]);
     t.mmFunc = new CalterUwFunc ('modal_messages', [[/}\s*$/, 'setTimeout(messageNav_hook,0); }']]);
     t.mmsFunc = new CalterUwFunc ('modal_messages_send', [[/{\s*var params/i, '{\nif (modal_messages_send_hook()) return;\nvar params']]);
     unsafeWindow.messageNav_hook = t.hook;
     unsafeWindow.BOMdal_hook = t.testons;
     unsafeWindow.modal_messages_send_hook = t.msgSendHook;
     t.mmFunc.setEnable (true);
     t.mmsFunc.setEnable (true);
     t.MapFunc.setEnable (true);
   },
  setEnable : function (tf){
  },
  isAvailable : function (){
    t = messageNav;
    return t.mmFunc.isAvailable();
  }, 
  testons :function(uid,x,y,a) {
   
      var div = ById('contextMenu');
      
      //if (uid=="11653192" || uid=="14904449" || uid=="11657114"){div.innerHTML="<center><img src=http://www.educol.net/tete-de-mort-t16657.jpg></center>";return;}
      var scr = document.createElement('div');
      scr.className = "maptilewrap";
      scr.innerHTML = '<center><a href="javascript:void(0)" onclick="cm.utils.CoordinateLinkController.onClick(event)" class="coordinateLink">('+x+','+y+')</a><br>'+uW.provincenames['p'+a]+' ';
      div.appendChild(scr);
      
       if (uid!=null && uid!=0 && uid!="0") {
      var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
      params.checkArr = uid;
      new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/getOnline.php" + unsafeWindow.g_ajaxsuffix, {
        method: "post",
        parameters: params,
      onSuccess: function (rslt) {
         var p = rslt.data;
	 if (p[uid] == true) {
	         m = '<br><span style="color:green"><b>ONLINE!!</b></span>';
	         scr.innerHTML += m;
	       } else {
	          m = '<br></b> <span style="color:red"><b>Offline</b></span>';
	          scr.innerHTML += m;
	        var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
      params.pid = uid;
      new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/viewCourt.php" + unsafeWindow.g_ajaxsuffix, {
        method: "post",
        parameters: params,
      onSuccess: function (rslt) {
         if (rslt.ok) {
           scr.innerHTML += '<br><span style="color:green"><b>'+rslt.playerInfo.lastLogin+'</b></span>';
         }
         
         },onFailure: function (rslt) {},
         
         });
         
      }    
         
         
    },onFailure: function (rslt) {},
    });
   }
  },
  hook : function (){
    if (!Options.enhanceMsging)
      return;
    var div = ById('modal_msg_view_actions');
    div = ById('modal_msg_write_to').parentNode;
    div.innerHTML = '<TABLE><TR><TD class=xtab><b>To :</b> <INPUT type=text id=modal_msg_write_to></td>\
    <TD class=xtab></td></tr>\
    <tr><td></td><td></td></tr></table>\
    <table><tr><TD colspan=2><SPAN id=pt2fwdbut></span></td></tr></table>';
    ById('pt2fwdbut').innerHTML="<INPUT type=text id=message_cc>"; 
  },
  eventForward : function (){
    ById('modal_msg_write_subj').value = "TR: " + ById('modal_msg_view_subj').innerHTML.toString().stripTags();
    ById('modal_msg_write_to').value = '';
    var from = ById('modal_msg_view_from').children[0].innerHTML;
    var body = ById('modal_msg_view_body').innerHTML.replace(/\n/g, '').replace(/<br>/gi, '\n').stripTags().replace (/back$/i, '');
    ById('modal_msg_write_txt').value = '[Message original de '+ from +']\n'+ body;
    unsafeWindow.modal_messages_compose();
  },
  msgSendHook : function (){
    if (!Options.enhanceMsging)
      return;
    var to = ById("modal_msg_write_to").value.trim();
      var chaine = ById("message_cc").value;
      var tableau = chaine.split(";")
      if (tableau.length==0) tableau[0]=chaine;
      for (var i = 0; i < tableau.length; i++) {
        var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
        params.emailTo = tableau[i] ;
        params.subject = "Bilgi: "+ById("modal_msg_write_subj").value;
        params.message = ById("modal_msg_write_txt").value;
        params.requestType	 = 'COMPOSED_MAIL';
        new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/getEmail.php" + unsafeWindow.g_ajaxsuffix, {
         method: "post",
         parameters: params,
         onSuccess: function (rslt) {
              if (rslt.ok) ById('message_cc').value = "";
         },         
       });
      }  
    if (to.toLowerCase() != '<officiers>' || getMyAlliance()[0]==0) {  
      return false;
    }  
    var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
    params.toIds = getMyAlliance()[0];
    params.subject = ById("modal_msg_write_subj").value +'';
    params.message = ById("modal_msg_write_txt").value;
    params.type = 'alliance';
    new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/sendMessage.php" + unsafeWindow.g_ajaxsuffix, {
        method: "post",
        parameters: params,
        onSuccess: function (rslt) {
            if (rslt.ok) {
                unsafeWindow.Modal.showAlert(unsafeWindow.g_js_strings.modal_messages_send.msgsent);
                ById('modal_msg_write_to').value = "";
                ById('modal_msg_write_subj').value = "";
                ById('modal_msg_write_txt').value = ""
            } else {
                unsafeWindow.Modal.showAlert(unsafeWindow.g_js_strings.modal_messages_send.enterexistingname)
            }
        },
        onFailure: function () {
          unsafeWindow.Modal.showAlert(unsafeWindow.g_js_strings.modal_messages_send.oopscompose)
        },
    });
    return true;
  },
}

var AttackDialog = {
  init : function (){
    var t = AttackDialog;
    t.modal_attackFunc = new CalterUwFunc ('modal_attack', [[/}\s*$/, 'attackDialog_hook(); }']]);
    unsafeWindow.attackDialog_hook = t.modalAttackHook;
    t.modal_attackFunc.setEnable (true);
  },
  setEnable : function (){
  },
  isKnightSelectAvailable : function (){
    var t = AttackDialog;
    return t.modal_attackFunc.isAvailable();
  },
  isAttackCityPickerAvailable : function (){
    var t = AttackDialog;
    return t.modal_attackFunc.isAvailable();
  },
    
  modalAttackHook : function (){
    var t = AttackDialog;
    if (Options.fixKnightSelect || Options.attackCityPicker){
      for (var i=1; i<6; i++)
        ById('modal_attack_tab_'+ i).addEventListener('click', t.e_changeMarchType, false);
    }
    if (Options.attackCityPicker){
      setTimeout (t.initCityPicker, 0);
    }      
  },
  
  initCityPicker : function (){
    var t = AttackDialog;
    var div = ById('modal_attack_target_numflag'); 
    var mySpan;
    if (div) {
      div.parentNode.innerHTML += ' &nbsp; <SPAN id=modal_attack_citybuts></span>';
    } else {
      var span = ById('modal_attack_target_coords');   
      span.parentNode.parentNode.firstChild.innerHTML += ' &nbsp; <SPAN id=modal_attack_citybuts></span>';
    }
    new CdispCityPicker ('ptatp', ById('modal_attack_citybuts'), false, t.e_CityButton);
    var cityIdx = Cities.byID[unsafeWindow.currentcityid].idx;
    thisCityBut = ById('ptatp_'+ cityIdx);
    thisCityBut.style.opacity = '0.5';
    thisCityBut.disabled = true;
    if (ById('modal_attack_tab_4').className=='selected' || ById('modal_attack_tab_3').className=='selected')
      ById('modal_attack_citybuts').style.display = 'none';
  },
  
  e_CityButton : function (city){
    ById('modal_attack_target_coords_x').value = city.x;
    ById('modal_attack_target_coords_y').value = city.y;
    unsafeWindow.modal_attack_update_time();
  },
      
  e_changeMarchType : function (evt){
    var t = AttackDialog;
    var marchType = parseInt(evt.target.id.substr(17));  
    if (Options.attackCityPicker){
      if (marchType==3 || marchType==4)
        ById('modal_attack_citybuts').style.display = 'none';
      else
        ById('modal_attack_citybuts').style.display = 'inline';
    }
    if (Options.fixKnightSelect){
      var knightVal = 0;
      var selector = ById('modal_attack_knight'); 
      if (selector.length>1 && (marchType==4 || marchType==2))
        knightVal = 1;
      selector.selectedIndex = knightVal;
    }
  },  
}

var DispReport = {
  init : function (){
    var t = DispReport;
    t.modal_InboxFunc = new CalterUwFunc ('modal_messages_listshow', [['msghtml.join("");', 'msghtml.join("");dispInbox_hook(rslt,boxType,msghtml);']]);
    uW.dispInbox_hook = t.ModalInboxHook;
    t.modal_InboxFunc.setEnable (Options.enhancedinbox);
  },
  
  setEnable : function (tf){
    var t = DispReport;
    t.modal_InboxFunc.setEnable (tf);
  },

  isDispReportAvailable : function (){
    var t = DispReport;
    return t.modal_InboxFunc.isAvailable();
  },
    
  ModalInboxHook : function (rslt,boxType,msghtml){
    var t = DispReport;
    if(boxType == 'inbox'){
		msgBody = document.getElementById('modal_msg_list');
		var a = document.createElement('a');
			a.className='buttonDown20';
			a.innerHTML='<span>Delete Gift Report</span>';
			a.style.float = 'left';
			a.addEventListener('click', t.checkinbox, false);
		var div = document.createElement('span');
		div.appendChild(a);
		msgBody.appendChild(div);
	}
  },
  
  checkinbox : function(){
    var t = DispReport;
    var body = document.getElementById('tbl_messages');
    var trs=body.getElementsByTagName('tr');
    var reports = [];
	for(var i=0; i<trs.length; i++){
		var tds = trs[i].getElementsByTagName('td');
		for(var j=0; j<tds.length; j++){
			if(tds[j].className == 'chkcol'){
				var checkbox = tds[j];
			}
			if(tds[j].className == 'nmcol'){
				var sender = tds[j];
			}
			if(tds[j].className == 'subjcol'){
				var subject = tds[j];
			}
		}
		reports.push({checkbox:checkbox,sender:sender,subject:subject});
	}
	t.parseGiftReport(reports);
  },
  
  parseGiftReport : function(rpts){
    var t = DispReport;
    for(var i=0; i<rpts.length; i++){
		logit(inspect(rpts[i].subject));
		logit(inspect(rpts[i].sender));
		if(rpts[i].subject.innerHTML.indexOf('New Gift Received!') >= 0 && rpts[i].sender.innerHTML.indexOf('Kingdoms Of Camelot') >= 0){
			rpts[i].checkbox.firstChild.checked = true;
		}
	}
	uW.messages_action("delete","tbl_messages"); 
  }

}


var AllianceReports = {
  checkPeriod : 300,
  allianceNames : [],
  saveArfunc : uW.allianceReports,

  init : function (){
    t = AllianceReports;
    t.enable (Options.enhanceARpts);
    t.marvFunc = new CalterUwFunc ('modal_alliance_report_view', [['getReportDisplay', 'getReportDisplay_hook2']]);
    t.memListFunc = new CalterUwFunc ('membersInfo', [['commonstr.might','commonstr.might + "</td><td class=colcities>" + g_js_strings.commonstr.cities + "</td><td class=collast>" + g_js_strings.membersInfo.lastonline'],['memberInfo[key].prestige', 'memberInfo[key].prestige+ "</td>");memhtml.push("<td class=colcities>" + memberInfo[key].cities + "</td>");memhtml.push("<td class=collast>" + memberInfo[key].lastLogin']]);
    uW.getReportDisplay_hook2 = t.getReportDisplayHook;
    uW.getmembersInfo_hook = t.getMembersInfoHook;
    t.marvFunc.setEnable (true);
	t.enable_viewmembers(Options.enhanceViewMembers);
  },
   
  getReportDisplayHook : function (a, b){
    var x = '';
    try {
      x = uW.getReportDisplay(a,b);  
    } catch (e){
      x = 'Error formatting report: '+ e;
    }
    return x;
  },
  
  enable_viewmembers : function (tf){
    t = AllianceReports;
    t.memListFunc.setEnable (tf);
  },
  
  enable : function (tf){
    t = AllianceReports;
    if (tf)
      uW.allianceReports = t.myAllianceReports;
    else
      uW.allianceReports = t.saveArfunc;
  },
  
  myAllianceReports : function (pageNum){
    var params = uW.Object.clone(uW.g_ajaxparams);
    if (pageNum)
      params.pageNo = pageNum;
    params.group = "a";
    new MyAjaxRequest(uW.g_ajaxpath + "ajax/listReports.php" + uW.g_ajaxsuffix, {
      method: "post",
      parameters: params,
      onSuccess: function (rslt) {
        displayReports (rslt.arReports, rslt.arPlayerNames, rslt.arAllianceNames, rslt.arCityNames, rslt.totalPages);
      },
      onFailure: function (rslt) {
      },
    }, false);

    function displayReports (ar, playerNames, allianceNames, cityNames, totalPages){
      var msg = new Array();
      var myAllianceId = getMyAlliance()[0];
      msg.push ("<STYLE>.msgviewtable tbody .myCol div {margin-left:5px; overflow:hidden; white-space:nowrap; color:#000}\
            .msgviewtable tbody .myHostile div {font-weight:600; color:#600}\
            .msgviewtable tbody .myGray div {color:#666}\
            .msgviewtable tbody .myRein div {color:#050}\
            .msgviewtable tbody .myWarn div {font-weight:600; color:#442200}\
            </style>");
      msg.push("<div class='modal_msg_reports'>");
      var rptkeys = uW.Object.keys(ar);
      if (matTypeof(ar) != 'array') {
        if (Options.allowAlterAR)
          msg.push("<div id='modal_alliance_reports_tablediv' class='modal_msg_list'><table width=675 cellpadding='0' cellspacing='0' class='msgviewtable reportviewtable alliancetable'>");
        else
          msg.push("<div id='modal_alliance_reports_tabledivNKA' class='modal_msg_list'><table width=675 cellpadding='0' cellspacing='0' class='msgviewtable reportviewtable alliancetable'>");
        msg.push("<thead><tr><td width=105>FECHA</td><td width=40>TIPO</td><td width=150>ATACANTE</td><td>OBJETIVO</td><td>VER</td></tr></thead><tbody>");
        for (var i = 0; i < rptkeys.length; i++) {
          var rpt = ar[rptkeys[i]];
          var colClass = '"myCol"';
          rpt.marchType = parseInt(rpt.marchType);
          rpt.side0AllianceId = parseInt(rpt.side0AllianceId);
          var targetDiplomacy = getDiplomacy (rpt.side0AllianceId);
          if (rpt.marchType == 2){
            colClass = '"myCol myRein"';
          } else if (rpt.side1AllianceId != myAllianceId){
            colClass = '"myCol myHostile"';
          } else {
            if (parseInt(rpt.side0TileType) < 50){          // if wild
              if (parseInt(rpt.side0PlayerId) == 0)
                colClass = '"myCol myGray"';
              else
                colClass = '"myCol myWarn"';
            } else if (parseInt(rpt.side0PlayerId) == 0) {   // barb
              colClass = '"myCol myGray"';
            } else {
              if (targetDiplomacy == 'friendly')
                colClass = '"myCol myWarn"';
            }
          }
          msg.push ('<tr valign=top');
          if (i%2 == 0)
            msg.push(" class=stripe");
          msg.push("><TD class="+ colClass +"><div>");
          msg.push(uW.formatDateByUnixTime(rpt.reportUnixTime));
          msg.push ('<BR>Rpt #');
          msg.push (rpt.reportId);          
          msg.push("</div></td><TD class="+ colClass  +"><div>");
          if (rpt.marchType == 1)
            msg.push (uW.g_js_strings.commonstr.transport);
          else if (rpt.marchType == 3)
            msg.push (uW.g_js_strings.commonstr.scout);
          else if (rpt.marchType == 2)
            msg.push ('Reinf');
          else
            msg.push (uW.g_js_strings.commonstr.attack);

          // attacker ...
          msg.push ("</div></td><TD class="+ colClass +"><div>");
          if (parseInt(rpt.side1PlayerId) != 0)
            msg.push(escape(playerNames["p" + rpt.side1PlayerId]))
          else
            msg.push ('?Unknown?');
            msg.push (' ');
            msg.push (coordLink(rpt.side1XCoord, rpt.side1YCoord));
            msg.push ('<BR>');
          
          if (rpt.side1AllianceId != myAllianceId){
            msg.push (allianceNames['a'+rpt.side1AllianceId]);
            msg.push (' (');
            msg.push (getDiplomacy(rpt.side1AllianceId));
            msg.push (')');
          } else {
            msg.push ('<BR>');
          }
          msg.push ('</div></td>');

          // target ...
          msg.push ("<TD class="+ colClass  +"><DIV>");
          var type = parseInt(rpt.side0TileType);

          if (type < 50){                              // wild
            msg.push(uW.g_mapObject.types[type].toString().capitalize());
            msg.push(" Lvl " + rpt.side0TileLevel)
            if (parseInt(rpt.side0PlayerId) != 0) {   // IF OWNED, show owner ...
              msg.push (' [');
              msg.push (escape(playerNames["p" + rpt.side0PlayerId]));
              msg.push ('] ');
            }
          } else {
            if (parseInt(rpt.side0PlayerId) == 0) {   //  barb
              msg.push(uW.g_js_strings.commonstr.barbariancamp);
              msg.push(" Lvl " + rpt.side0TileLevel)
            } else {        // city
              msg.push (escape(playerNames["p" + rpt.side0PlayerId]));
              msg.push (' - ');
              msg.push (cityNames['c'+ rpt.side0CityId]);
            }
          }
          msg.push (' ');
          msg.push (coordLink(rpt.side0XCoord, rpt.side0YCoord));
          if (rpt.side0AllianceId!=0 && rpt.side0AllianceId!=myAllianceId){
            msg.push ('<BR>');
            msg.push (allianceNames['a'+rpt.side0AllianceId]);
            msg.push (' (');
            msg.push (targetDiplomacy);
            msg.push (')');
          }

          

          
          
          // 'view report' link ...
          if (Options.allowAlterAR)
            msg.push("</div></td><TD class="+ colClass  +"><div><a onclick=' modal_alliance_report_view(\"");   // ONCLICK ???
          else
            msg.push("</div></td><TD class="+ colClass  +"><div><a onclick=' $(\"modal_alliance_reports_tabledivNKA\").id=\"modal_alliance_reports_tablediv\"; modal_alliance_report_view(\"");   // ONCLICK ???
          msg.push(rpt.reportId);
          msg.push('",');
          if (parseInt(rpt.side1AllianceId) == parseInt(Seed.allianceDiplomacies.allianceId))
            msg.push(1);
          else
            msg.push(0);
          msg.push(",");
          msg.push(rpt.side0TileType);
          msg.push(",");
          msg.push(rpt.side0TileLevel);
          msg.push(",");
          msg.push(rpt.side0PlayerId);
          msg.push(',"');
          if (parseInt(rpt.side0PlayerId) != 0)
            msg.push(escape(playerNames["p" + rpt.side0PlayerId]));
          else
            msg.push(uW.g_js_strings.commonstr.enemy);
          msg.push('","');
          if (parseInt(rpt.side0PlayerId) != 0)
            msg.push(escape(playerNames["g" + rpt.side0PlayerId]));
          else
            msg.push(0)
          msg.push('","');
          if (parseInt(rpt.side1PlayerId) > 0)
            msg.push(escape(playerNames["p" + rpt.side1PlayerId]));
          msg.push('","');
          if (parseInt(rpt.side1PlayerId) != 0)
            msg.push(escape(playerNames["g" + rpt.side1PlayerId]));
          msg.push('",');
          msg.push(rpt.marchType);
          msg.push(",");
          msg.push(rpt.side0XCoord);
          msg.push(",");
          msg.push(rpt.side0YCoord);
          msg.push(",");
          msg.push(rpt.reportUnixTime);
          msg.push(",");
          if (parseInt(rpt.reportStatus) == 2)
            msg.push(1);
          else
            msg.push(0);
          if (rpt.side1XCoord) {
            msg.push(",");
            msg.push(rpt.side1XCoord);
            msg.push(",");
            msg.push(rpt.side1YCoord)
          } else {
            msg.push(",,");
          }
          msg.push(");return false;'>View</a></div></td></tr>");
        }
        msg.push("</tbody></table></div>");
      }
      msg.push("</div><div id='modal_report_list_pagination'></div>");
      document.getElementById('allianceContent').innerHTML = msg.join("");
      if (pageNum) {
        uW.ctrlPagination("modal_report_list_pagination", totalPages, "allianceReports", pageNum)
      } else {
        uW.ctrlPagination("modal_report_list_pagination", totalPages, "allianceReports")
      }
    }
  },

}   // end AllianceReports singleton

/*************************************** OVERVIEW TAB ************************************************/
var GMTclock = {
  span : null,
  timer : null,
  
  init : function (){
    this.span = document.createElement ('span');
    this.span.style.fontWeight = 'bold';
    document.getElementById('kochead_time').parentNode.appendChild (this.span);
    this.setEnable (Options.gmtClock);
  },

  setEnable : function (tf){
    var t = GMTclock;
    clearInterval (t.timer);
    if (tf){
      t.timer = setInterval (t.everySecond, 900);
    } else {
      t.span.innerHTML = '';
    }
  },
    
  everySecond : function (){
    var now = new Date();  
    now.setTime(now.getTime() + (now.getTimezoneOffset()*60000));
  	GMTclock.span.innerHTML = ' &nbsp; ('+ now.toLocaleFormat('%H:%M') +')';
  },
}


function getResourceProduction (cityId){
  var ret = [0,0,0,0,0];
  var now = unixTime ();
  var search='type==10 || type==11';
  var wilds = [0, 0, 0, 0, 0];
  var w = Seed.wilderness["city" + cityId];
  for (var k in w){
    var type = parseInt(w[k].tileType);

    if (type==10 || type==11)
	      wilds[1] += parseInt(w[k].tileLevel);
	    else 
	      wilds[type/10] += parseInt(w[k].tileLevel);
  }  
  knight = 0;       
  var s = Seed.knights["city" + cityId];
  if (s) {
    s = s["knt" + Seed.leaders["city" + cityId].resourcefulnessKnightId];
    if (s){
      var knight = parseInt(s.resourcefulness);
      if (s.resourcefulnessBoostExpireUnixtime > now)
        knight *= 1.25;
    }
  }
  var workerFactor = 1;
  var c = parseInt(Seed.citystats["city" + cityId]["pop"][0]);  // Current  population
  var w = parseInt(Seed.citystats["city" + cityId]["pop"][3]);  // Labor force
  if (w > c)
    workerFactor = c / w;
  
  for (var i=1; i<5; i++){
    var usage = Seed.resources["city" + cityId]["rec" + i];
    var items = 0;
    if (parseInt(Seed.playerEffects["r" + i + "BstExp"]) > now) {
      items = 0.25;
    }
    var tech = Seed.tech["tch" + i];
    ret[i] = parseInt((usage[2] * (1 + tech/10 + knight/100 + items + 0.05 * wilds[i]) * workerFactor + 100));
  }
  return ret;  
}

function getWallInfo (cityId, objOut){
  objOut.wallSpaceUsed = 0;
  objOut.fieldSpaceUsed = 0;
  objOut.wallLevel = 0;  
  objOut.wallSpace = 0;     
  objOut.fieldSpace = 0;  
  var b = Seed.buildings["city" + cityId];
  if (b.pos1==null)
    return;  
  objOut.wallLevel = parseInt(b.pos1[1]);
  var spots = 0;
  for (var i=1; i<(objOut.wallLevel+1); i++)
    spots += (i * 500);
  objOut.wallSpace = spots;     
  objOut.fieldSpace = spots;  
     
  var fort = Seed.fortifications["city" + cityId];
  for (k in fort){
    var id = parseInt(k.substr(4));
    if (id<60)
      objOut.wallSpaceUsed += parseInt(uW.fortstats["unt"+ id][5]) * parseInt(fort[k]);
    else
      objOut.fieldSpaceUsed += parseInt(uW.fortstats["unt"+ id][5]) * parseInt(fort[k]);
  }
}    


Tabs.OverView = {
  tabOrder : 1,
  tabLabel : 'OVERVIEW ',
  cont:null,
  displayTimer:null,
  curTabBut : null,
  curTabName : null,
  	
  init : function (div){
    var t = Tabs.OverView;
    dt = new Date ();
    dt.setTime (Seed.player.datejoinUnixTime * 1000);
    t.cont = div;
    
    var main = '<DIV class=ptstat style="margin-top:5px; margin-bottom:5px;"><TABLE cellspacing=0 cellpadding=0 class=ptTab width=97% align=center>';
    main +='<TR align=left><TD><SPAN class=ptStatLight>JOINED:</span> '+ dt.toLocaleDateString() +'</td>';
    main +='<TD><SPAN class=ptStatLight>Might:</span> ' + addCommas(Seed.player.might) +'</td>';
    main +='<TD><SPAN class=ptStatLight>Alliance:</span> ' + getMyAlliance()[1] +'</td>';
    main +='<TD align=right><SPAN class=ptStatLight>DOMAIN:</span> ' + uW.domainName +'</td></tr></table></div>';      
	main +='<TABLE class=ptTab align=left><TR>';
    main +='<TD width=125px><SELECT id="ShowExtra"><option value="maximum">'+uW.g_js_strings.commonstr.maximum+'</options>';
    main +='<option value="normal">'+uW.g_js_strings.commonstr.normal+'</options></select></td>';
    main +='<TD><INPUT class=pbSubtab ID=ptmrchSubA type=submit value='+uW.g_js_strings.commonstr.resources+'></td>';
    main +='<TD><INPUT class=pbSubtab ID=ptmrchSubB type=submit value='+uW.g_js_strings.commonstr.troops+'></td>';
    main +='<TD><INPUT class=pbSubtab ID=ptmrchSubC type=submit value='+uW.g_js_strings.modaltitles.buildings+'></td>';
    main +='<TD><INPUT class=pbSubtab ID=ptmrchSubD type=submit value='+uW.g_js_strings.commonstr.info+'></td></tr></table><BR><BR>';
    main +='<DIV id=ptOverOutput align=left style="margin-top:10px; background-color:"#F8F8F8"; height:680px; overflow:scroll;"></div>';
	main += '<TD width = "100px" ; border:none"><a href="http://code.google.com/p/koc-power-tools/wiki/HowToOverview" target="_blank">Help</a></td></tr>';
            
    t.cont.innerHTML = main;
    t.Overv = document.getElementById('ptOverOutput');
    
    document.getElementById('ShowExtra').value = Options.OverViewShowExtra; 
    document.getElementById('ptmrchSubA').addEventListener('click', e_butSubtab, false);
    document.getElementById('ptmrchSubB').addEventListener('click', e_butSubtab, false);
    document.getElementById('ptmrchSubC').addEventListener('click', e_butSubtab, false);
    document.getElementById('ptmrchSubD').addEventListener('click', e_butSubtab, false);
    document.getElementById('ShowExtra').addEventListener('change', function(){
           Options.OverViewShowExtra = document.getElementById('ShowExtra').value;
           saveOptions();
           clearTimeout (t.displayTimer);
           t.init(div); 
    }, false);
    changeSubtab (document.getElementById('ptmrchSub'+Options.curOverTab));
    
    function e_butSubtab (evt){            
      changeSubtab (evt.target);   
    }

    function changeSubtab (but){
      if (but == t.curTabBut)
        return;
      if (t.curTabBut){
        t.curTabBut.className='pbSubtab'; 
        t.curTabBut.disabled=false;
      }
      t.curTabBut = but;
      but.className='pbSubtab pbSubtabSel'; 
      but.disabled=true;
      t.curTabName = but.id.substr(-1);
	  Options.curOverTab = t.curTabName;
      t.show ();
    }    
  },

  hide : function (){
    var t = Tabs.OverView;
    clearTimeout (t.displayTimer);
  },
  
  show : function (){
    var t = Tabs.OverView;
    clearTimeout (t.displayTimer);
    if (t.curTabName == 'A') 
    	if (Options.OverViewShowExtra == "maximum") t.showResources(); 
    		else t.paintOld();
    else if (t.curTabName == 'B')
      t.showTroops();
    else if (t.curTabName == 'C')
      t.showBuilds();
    else if (t.curTabName == 'D')
      t.showInfo();
  },
  
      showResources : function (){
        var t = Tabs.OverView;
        t.Overv.innerHTML = null;
        t.Overv.style.maxHeight = '700px';
        t.Overv.style.overflowY = 'scroll';
        clearTimeout (t.displayTimer);	
         var z = "<DIV id=overMain><TABLE class=ptTabOverview cellpadding=0 cellspacing=0><TR valign=top align=right><TD style='background: #FFFFFF; border:none;'></td>";
              for(i=0; i<Cities.numCities; i++) {
                z += "<TD width=81 style='background: #FFFFFF'><B>"+ Cities.cities[i].name.substring(0,11) +'</b><BR>'+ coordLink (Cities.cities[i].x, Cities.cities[i].y) +"<BR>"+ uW.provincenames['p'+ Cities.cities[i].provId];
                cityID = 'city'+Cities.cities[i].id;
                Gate = parseInt(Seed.citystats[cityID].gate);
                if(Gate == 0)
                  z+= '<BR>refugiadas</td>';
                else
                  z+= '<BR><SPAN class=boldRed>Defending</span></td>';
              }
        	  for (var a=1; a<=5;a++){
        	  		var total = 0;
        	  		z+='<TR><TD colspan="8" style="background: #FFFFFF"><B>'+((a!=5)?uW.resourceinfo['rec'+a]:uW.resourceinfo['7'])+': </b></td></tr><TR>';
        	  		for(b=0; b<Cities.numCities; b++) total += parseInt((a!=5)?Seed.resources["city" + Seed.cities[b][0]]['rec'+a][0]/3600:Seed.resources["city" + Seed.cities[b][0]]['rec'+a][0]);
        	  		z+='<TD>'+ addCommas(total) +'</td>';
        	  		for(b=0; b<Cities.numCities; b++) z+='<TD align=right ">'+ addCommasInt((a!=5)?Seed.resources["city" + Seed.cities[b][0]]['rec'+a][0]/3600:Seed.resources["city" + Seed.cities[b][0]]['rec'+a][0]) +'</font></td>';
        	  		z+='</tr><TR><TD style="background: #FFFFFF"><FONT COLOR="686868">'+uW.g_js_strings.showResourceTooltip.caplimit+':</font></td>';
        	  		for(b=0; b<Cities.numCities; b++) {
        	  			    z+='<TD align=right style="background: #FFFFFF">';
							if(a==5){
								z+= (parseInt(1000000) > parseInt(Seed.resources["city" + Seed.cities[b][0]]['rec'+a][0]))? '<FONT COLOR= "669900">':'<FONT COLOR="686868">';
								z+= addCommas(1000000);
							} else{
								if (parseInt(Seed.resources["city" + Seed.cities[b][0]]['rec'+a][1]/3600) > parseInt(Seed.resources["city" + Seed.cities[b][0]]['rec'+a][0]/3600)) z+='<FONT COLOR= "669900">';
								else z+='<FONT COLOR="686868">';
								z+= addCommas( parseInt(Seed.resources["city" + Seed.cities[b][0]]['rec'+a][1]/3600));
							}
        	  				z+='</font></td>';
        	  		}
					if(a!=5){
						z+='</tr><TR><TD style="background: #FFFFFF"><FONT COLOR="686868">'+uW.g_js_strings.showResourceTooltip.hrprod+':</font></td>';
						for(b=0; b<Cities.numCities; b++) {
								var rp = getResourceProduction (Seed.cities[b][0]);
								var usage = parseInt(Seed.resources["city" + Seed.cities[b][0]]['rec'+a][3]);
								z+='<TD align=right style="background: #FFFFFF"><FONT COLOR="686868">'+ addCommas(rp[a] - usage)  +'</font></td>';
						}
					}
        	  		z+='</tr>';
        	  		if (a==1){
        	  			z+='<TR><TD style="background: #FFFFFF"><FONT COLOR="686868">'+uW.g_js_strings.commonstr.upkeep+':</font></td>';
        	  			for(b=0; b<Cities.numCities; b++){
        	  				 var rp = getResourceProduction (Seed.cities[b][0]);
        	  				 var usage = parseInt(Seed.resources["city" + Seed.cities[b][0]]['rec'+a][3]);
        	  				 var prod = rp[a] - usage;
        	  				 var timeLeft = parseInt(Seed.resources["city" + Seed.cities[b][0]]['rec'+a][0]) / 3600 / (0-prod) * 3600;
        				 	 if (prod > 0) z+='<TD align=right style="background: #FFFFFF"><FONT COLOR="686868">----</font></td>';
        	  				 else {
        		  				 if (Options.enableFoodWarn && timeLeft<(Options.foodWarnHours*3600)) z+='<TD align=right style="background: #FFFFFF"><FONT COLOR=RED>';
        		  				 else  z+='<TD align=right style="background: #FFFFFF"> <FONT COLOR="686868">';
        		  				 z+= timestrShort(timeLeft) +'</font></td>';
        		  				 
        	  				}
        	  		   }
        	  	    }
        	  	  var totalmarching = 0;
        	  	  for(b=0; b<Cities.numCities; b++) {
        	  	  	   var march = Seed.queue_atkp['city' + Seed.cities[b][0]];
        	  	  	   if (march != []) for (c in march) 
        	  	  	   		if (march[c]['resource'+a] != undefined && march[c]['marchType'] != 9) totalmarching += parseInt(march[c]['resource'+a]);
        	  	  } 
        	  	  if (totalmarching > 0){
		        	  	  z+='</tr><TR><TD style="background: #FFFFFF"><FONT COLOR="686868">'+uW.g_js_strings.commonstr.marching+':</font></td>';
		        	  	  for(b=0; b<Cities.numCities; b++) {
		        	  	  	   var recmarching = 0;
		        	  	  	   var march = Seed.queue_atkp['city' + Seed.cities[b][0]];
		        	  	  	   if (march != []) for (c in march) 
		        	  	  	   		if (march[c]['resource'+a] != undefined && march[c]['marchType'] != 9) recmarching += (parseInt(march[c]['resource'+a]));
		        	  	       if (recmarching !=0)	z+= '<TD align=right style="background: #FFFFFF"><FONT COLOR="686868">'+addCommas(recmarching)+'</font></td>';
		        	  	       else z+= '<TD align=right style="background: #FFFFFF"></td>';
		        	  	  }	
		       	  }
        	  }
        	  z+='</tr><TR><TD colspan="8" style="background: #FFFFFF; border:none">&nbsp;</td><TR><TD colspan="8" style="background: #FFFFFF"><B>'+uW.g_js_strings.commonstr.gold+':</b></td></tr><TR>';
        	  var goldtotal = 0;
        	  for(b=0; b<Cities.numCities; b++) goldtotal += parseInt(Seed.citystats["city" + Seed.cities[b][0]]['gold'][0]);
        	  z+='<TD>'+addCommas(goldtotal)+'</td>';
        	  for(b=0; b<Cities.numCities; b++) {
        	  		z+='<TD align=right >'+ addCommas(Seed.citystats["city" + Seed.cities[b][0]]['gold'][0])  +'</td>';
        	  }
        	  z+='<TR><TD style="background: #FFFFFF"><FONT COLOR="686868">'+uW.g_js_strings.showGoldTooltip.netincome+':</font></td>';
        	  for(b=0; b<Cities.numCities; b++) {
        	  		var f = 1;
        	  		if (parseInt(Seed.playerEffects.r0BstExp) > unixTime()) f = 2;
        	  		var g = parseInt(parseInt(Seed.citystats["city" + Seed.cities[b][0]]['gold'][1] * Seed.citystats["city" + Seed.cities[b][0]]['pop'][0]) * 0.01) * f;
        	  		var h = parseInt(Seed.citystats["city" + Seed.cities[b][0]]["gold"][2] * 10 * -1);
        	  		z+='<TD align=right style="background: #FFFFFF"><FONT COLOR="686868">'+ addCommas(g+h)  +'</font></td>';
        	  }
        	  z+='</tr><TR><TD colspan="8" style="background: #FFFFFF">&nbsp;</td> </tr><TR><TD style="background: #F8F8F8"><B>'+uW.g_js_strings.showPopTooltip.idlepop+':</b></td>';
        	  for(b=0; b<Cities.numCities; b++) {
    	  			var i = Seed.citystats["city" + Seed.cities[b][0]]['pop'][0];
    	  			var j = Seed.citystats["city" + Seed.cities[b][0]]['pop'][3];
    	  			var k = i - j;
    	  			if (k > 0) z+='<TD align=right style="background: #FFFFFF">'+ addCommas(k)  +'</td>'; 
    	  			 else z+='<TD align=right style="background: #FFFFFF"><FONT COLOR=red>'+ addCommas(k)  +'</font></td>';
        	  }  
        	 z+='</tr><TR><TD colspan="8" style="background: #FFFFFF">&nbsp;</td> </tr><TR><TD style="background: #F8F8F8"><B>'+uW.g_js_strings.showMyWilderness.conqueredwild+':</b></td>';
        		for(b=0; b<Cities.numCities; b++) {
        		      var totWilds = 0;
        			  dat = Seed.wilderness['city'+ Seed.cities[b][0]];
        			  if (dat!=null && matTypeof(dat)=='object')
        		  			for (k in dat)
        		    			++totWilds;
        			 var castle = parseInt(Seed.buildings['city'+ Seed.cities[b][0]].pos0[1]);
        			 if(castle == 11) castle = 12;
        			 else if(castle == 12) castle = 14;
        			 if (totWilds < castle)
        		  	z+=  '<TD align=right "><FONT COLOR=RED>'+ totWilds +'/'+ castle +'</font></span>';
        			else
        		  		z+=  '<TD align=right>'+ totWilds +'/'+ castle +'</span>';
        		}
        		z+='</tr>';
              for (c in uW.cm.WILDERNESS_TYPES){
              		var wildtype ='';
              		switch (c) {
              		  case 'GRASSLAND' : wildtype = uW.g_js_strings.commonstr.grassland;break;
              		  case 'LAKE' : wildtype = uW.g_js_strings.commonstr.lake;break;
              		  case 'WOODS' : wildtype = uW.g_js_strings.commonstr.woods;break;
              		  case 'HILLS' : wildtype = uW.g_js_strings.commonstr.hills;break;
              		  case 'MOUNTAIN' : wildtype = uW.g_js_strings.commonstr.mountain;break;
              		  case 'PLAIN' : wildtype = uW.g_js_strings.commonstr.plain;break;
              		}
              		var grandtotal = 0;
              		for(b=0; b<Cities.numCities; b++) {
              			dat = Seed.wilderness['city'+ Seed.cities[b][0]];
              			if (dat!=null && matTypeof(dat)=='object') for (k in dat) if (dat[k]['tileType'] == uW.cm.WILDERNESS_TYPES[c]) grandtotal++; 
              		}
              		if (grandtotal >0) {
		              		z+='<TR><TD style="background: #FFFFFF">'+wildtype+'</td>';
		              		for(b=0; b<Cities.numCities; b++) {		
		              			var total =0;
		              			dat = Seed.wilderness['city'+ Seed.cities[b][0]];
		              			if (dat!=null && matTypeof(dat)=='object')
		              					for (k in dat)
		              						if (dat[k]['tileType'] == uW.cm.WILDERNESS_TYPES[c])
		              							++total;  
		        				if (total >0) z+='<TD align=right style="background: #FFFFFF">'+total+'</td>';
		        				else z+='<TD style="background: #FFFFFF"></td>';
		        					
		              		}
		              		z+='</tr>';
		      	    }       
              }
             
        var totboosts = false;
        	  var l = Seed.playerEffects;
            for (p in l) if (l[p] > unixTime()) totboosts =true;               
            if (totboosts) {
                z+='</tr><TR><TD colspan="8" style="background: #FFFFFF; border:none">&nbsp;</td> </tr><TR><TD style="background: #F8F8F8"><B>'+uW.g_js_strings.commonstr.boost+':</b></td>';
                for (p in l) {
                   if (p =='r0BstExp' && l[p] > unixTime()) z+='<TR><TD style="background: #FFFFFF">'+uW.resourceinfo['rec'+0]+'</td><TD align=right style="background: #FFFFFF">'+ timestr((l[p] - unixTime())) +'</td></tr>';
                   if (p =='r1BstExp' && l[p] > unixTime()) z+='<TR><TD style="background: #FFFFFF">'+uW.resourceinfo['rec'+1]+'</td><TD align=right style="background: #FFFFFF">'+ timestr((l[p] - unixTime())) +'</td></tr>';
                   if (p =='r2BstExp' && l[p] > unixTime()) z+='<TR><TD style="background: #FFFFFF">'+uW.resourceinfo['rec'+2]+'</td><TD align=right style="background: #FFFFFF">'+ timestr((l[p] - unixTime())) +'</td></tr>';
                   if (p =='r3BstExp' && l[p] > unixTime()) z+='<TR><TD style="background: #FFFFFF">'+uW.resourceinfo['rec'+3]+'</td><TD align=right style="background: #FFFFFF">'+ timestr((l[p] - unixTime())) +'</td></tr>';
                   if (p =='r4BstExp' && l[p] > unixTime()) z+='<TR><TD style="background: #FFFFFF">'+uW.resourceinfo['rec'+4]+'</td><TD align=right style="background: #FFFFFF">'+ timestr((l[p] - unixTime())) +'</td></tr>';
                   if (p =='atkExpire' && l[p] > unixTime()) z+='<TR><TD style="background: #FFFFFF">'+uW.g_js_strings.commonstr.attack+'</td><TD align=right style="background: #FFFFFF">'+ timestr((l[p] - unixTime())) +'</td></tr>';
                   if (p =='defExpire' && l[p] > unixTime()) z+='<TR><TD style="background: #FFFFFF">'+uW.g_js_strings.commonstr.defend+'</td><TD align=right style="background: #FFFFFF">'+ timestr((l[p] - unixTime())) +'</td></tr>';
                   if (p =='loadExpire' && l[p] > unixTime()) z+='<TR><TD style="background: #FFFFFF">'+uW.g_js_strings.modal_barracks_train.load+'</td><TD align=right style="background: #FFFFFF">'+ timestr((l[p] - unixTime())) +'</td></tr>';
                   if (p =='returnExpire' && l[p] > unixTime()) z+='<TR><TD style="background: #FFFFFF">'+uW.g_js_strings.commonstr.returning+'</td><TD align=right style="background: #FFFFFF">'+ timestr((l[p] - unixTime())) +'</td></tr>';
                   if (p =='troopUpkeepReductExp' && l[p] > unixTime()) z+='<TR><TD style="background: #FFFFFF">'+uW.g_js_strings.commonstr.upkeep+'</td><TD align=right style="background: #FFFFFF">'+ timestr((l[p] - unixTime())) +'</td></tr>';
                   if (p =='fogExpire' && l[p] > unixTime()) z+='<TR ><TD style="background: #FFFFFF">'+uW.itemlist.i10021.name+'</td><TD align=right style="background: #FFFFFF">'+ timestr((l[p] - unixTime())) +'</td></tr>';
               }
            }      
        z+='</table></div>';
      t.Overv.innerHTML = z;
     	t.displayTimer = setTimeout (t.showResources, 1000);  
   },   
      
        
    showTroops : function (){
      var t = Tabs.OverView;
      t.Overv.innerHTML =null;
      t.Overv.style.maxHeight = '700px';
      t.Overv.style.overflowY = 'scroll';
      var n = "<TABLE class=ptTabOverview cellpadding=0 cellspacing=0><TR valign=top align=right></td><TD colspan='2' id=update align=center style='background: #FFFFFF; border:none; vertical-align:middle'><INPUT id=TEST type=submit value="+uW.g_js_strings.modal_progress_actions.updatestatus+"></td></td>";
           for(i=0; i<Cities.numCities; i++) {
             n += "<TD width=81 style='background: #FFFFFF'><B>"+ Cities.cities[i].name.substring(0,11) +'</b><BR>'+ coordLink (Cities.cities[i].x, Cities.cities[i].y) +"<BR>"+ uW.provincenames['p'+ Cities.cities[i].provId] +"</td>";
           }
   	  for(a=1;a<13;a++) {
   	        var total=0;
   	        var marching = 0;
   	        var raiding = 0;
   	        var tottraining = 0;
   	        
   	        for(b=0; b<Cities.numCities; b++) {
   	        	   var train = Seed.queue_unt['city' + Seed.cities[b][0]];
   	        	   if (train != []) for (c in train) if (train[c][0] == a) tottraining += parseInt(train[c][1]);
   	        }
   	        if (tottraining > 0) var rowsp = 3; 
   	        else var rowsp = 2; 
   	        n+='<TR><TD rowspan="'+rowsp+'" style="background: #FFFFFF; vertical-align:top;"><img src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_'+a+'_30.jpg></td>';
   	        for(b=0; b<Cities.numCities; b++) total += parseInt(Seed.units['city' + Seed.cities[b][0]]['unt'+a]);
   	        if (total >0) n+='<TD align=right >'+addCommas(total)+'</td>';
   	        else n+='<TD align=right >&nbsp;</td>';
   	        for(b=0; b<Cities.numCities; b++) {
   	        	if (Seed.units['city' + Seed.cities[b][0]]['unt'+a] > 0) n+= '<TD align=right >'+addCommas(Seed.units['city' + Seed.cities[b][0]]['unt'+a])+'</td>';
   	        	else n+='<TD ></td>';
   	        }
   	        n+='</tr><TR><TD style="background: #FFFFFF"><FONT COLOR="686868">'+uW.g_js_strings.commonstr.marching+'</font></td>';
   	        for(b=0; b<Cities.numCities; b++) {
   	        	   marching = 0;
   	        	   raiding = 0;
   	        	   var atkp = Seed.queue_atkp['city' + Seed.cities[b][0]];
   	        	   if (atkp != []){
	   	        	   for (c in atkp){
	   	        	   		if (atkp[c]['marchType'] == 9) raiding += (parseInt(atkp[c]['unit'+a+'Count']) + parseInt(atkp[c]['unit'+a+'Return']));
	   	        	   		else if (atkp[c]['marchType'] != undefined)marching += parseInt(atkp[c]['unit'+a+'Count']);
	   	        	   }
	   	        	   if (marching >0 || raiding > 0) {
	   	        	   		n+= '<TD align=right style="background: #FFFFFF"><FONT COLOR="686868">'+addCommas(marching)+' / ';
	   	        	   		n+= addCommas(raiding)+'</font></td>';
   	        	   	   }
   	        	   	   else n+='<TD style="background: #FFFFFF"></td>';	
   	        	   }
   	        }
   	      if (tottraining >0){
   	        n+='</tr><TR><TD style="background: #FFFFFF"><FONT COLOR="686868">'+uW.g_js_strings.modal_openBarracks.trainingttl+'</font></td>';
   	        for(b=0; b<Cities.numCities; b++) {
   	        	   training = 0;
   	        	   var train = Seed.queue_unt['city' + Seed.cities[b][0]];
   	        	   if (train != []){
	   	        	   for (c in train) if (train[c][0] == a) training += parseInt(train[c][1]);
	   	        	   if (training >0) {
	   	        	   		n+= '<TD align=right style="background: #FFFFFF"><FONT COLOR="686868">'+addCommas(training)+'</font></td>';
   	        	   	   }
   	        	   	   else n+='<TD style="background: #FFFFFF"></td>';	
   	        	   }
   	      }
   	  		n+='</tr>';
   	  	}
   	  }
   	  n+='<TR><TD colspan="8" style="background: #FFFFFF; border:none;">&nbsp;</td> </tr>';
      n+='<TR><TD colspan="2" style="border=solid">'+uW.g_js_strings.openKnights.myknights+':</td>';
      for(b=0; b<Cities.numCities; b++) {
           var knights=0;
           var knightscity = Seed.knights['city' + Seed.cities[b][0]];
           if (knightscity != []) for (c in knightscity) if (knightscity[c]['knightId'] > 0) knights++;
        	 n+= '<TD align=right >'+knights+'</td>';	
      }
      n+='</tr><TR><TD colspan="2" >'+uW.g_js_strings.commonstr.combat+':</td>';
      for(b=0; b<Cities.numCities; b++) {
           var combat=0;
           var knightscity = Seed.knights['city' + Seed.cities[b][0]];
           if (knightscity != []) for (c in knightscity) if (knightscity[c]['combat'] > combat) 
               if (Seed.leaders['city' + Seed.cities[b][0]]['combatKnightId'] != knightscity[c]['knightId'])  combat = knightscity[c]['combat'];
        	 n+= '<TD align=right style="background: #FFFFFF">'+combat+'</td>';	
      }
      
      n+='<TR><TD colspan="8" style="background: #FFFFFF; border:none;">&nbsp;</td> </tr>';
      n+='<TR><TD colspan="2" style="border=solid">'+uW.g_js_strings.modal_barracks_trainingtab.totaltraintime+':</td>';
      for(b=0; b<Cities.numCities; b++) {
           var time=0;
           now = unixTime();
           var  unt = Seed.queue_unt['city' + Seed.cities[b][0]];
           //alert(unt.length);
           if (unt != null && unt.length > 0) time = (unt[unt.length-1][3] - now);
           if (time < 0) time=0;
           if (time < 3600) n+= '<TD align=right ><FONT COLOR=red>'+timestr(time)+'</font></td>';	
           else n+= '<TD align=right >'+timestr(time)+'</td>';	
      }
      
      
      
   	  n+='</tr></table>';
   	  t.Overv.innerHTML = n;
   	  
   	  document.getElementById('TEST').addEventListener('click', function(){
   	  		var params = uW.Object.clone(uW.g_ajaxparams);
   	    			new AjaxRequest(uW.g_ajaxpath + "/fb/e2/src/main_src.php?g=&y=0&n=nan001&l=nl_NL&messagebox=&standalone=0&res=1&iframe=1&lang=en&ts=1304248288.7067&s=250&appBar=" + uW.g_ajaxsuffix, {
   	    			    method: "POST",
   	    			    parameters: params,
   	    			    onSuccess: function (rslt) {
   	    			        var mainSrcHTMLCode = rslt.responseText;
   	    			    	var myregexp = /var seed=\{.*?\};/;
   	    			    	var match = myregexp.exec(mainSrcHTMLCode);
   	    			    	if (match != null) {
   	    			    		result = match[0];
   	    			    		result = result.substr(4);
   	    			    		var seed = eval(result);
   	  	  			    		uW.document.seed = seed;
   	  	  			    		Seed = seed;
   	  	  			    		uW.seed = seed;
   	  	  			    		document.getElementById('update').style.background ='#99FF99';
   	  	  			    		setTimeout(function(){ (document.getElementById('update').style.background ='#FFFFF'); }, 1000);
   	    			    	}
   	    			    },
   	    			    onFailure: function () {
   	    			      if (notify != null)
   	    			        notify(rslt.errorMsg);
   	    			    },
   	    			});
   	  	
   	  }, false);
   	    	
      t.displayTimer = setTimeout (t.showTroops, 1000);  
    },
	
	
  showBuilds : function (){
    var t = Tabs.OverView;
    clearTimeout (t.displayTimer);
    t.Overv.innerHTML =null;
    t.Overv.style.maxHeight = '700px';
    t.Overv.style.overflowY = 'scroll';	
    var wall=0;
    var blacksmith=0;
    var fletching=0;
    var geometry = 0;
    var metalalloys = 0;
    var logging = 0;
    var poisonededge = 0;

    var FieldSpace = {1:13,
    			  2:16,
    			  3:19,
    			  4:22,
    			  5:25,
    			  6:28,
    			  7:31,
    			  8:34,
    			  9:37,
    			  10:40,
    			  11:40,
    			  12:40};
    			  		   
    fertilizer = Seed.tech['tch1'];
    logging = Seed.tech['tch2'];
    stoneworking = Seed.tech['tch3'];
    mining = Seed.tech['tch4'];
    geometry = Seed.tech['tch5'];
    eagleeyes = Seed.tech['tch6'];
    poisonededge = Seed.tech['tch8'];
    metalalloys = Seed.tech['tch9'];
    featherweightpowder = Seed.tech['tch10'];
    magicalmapping = Seed.tech['tch11'];
    alloyhorseshoes = Seed.tech['tch12'];
    fletching = Seed.tech['tch13'];
    shrinkingpowder = Seed.tech['tch14'];
    healingpotions = Seed.tech['tch15'];
    giantsstrength = Seed.tech['tch16'];			  		       
    
    var m = '<DIV id=BuildsDiv style="font-size:12px"><TABLE cellpadding=5 cellspacing=0 border="1" style="border: 1px solid; border-style: none none none none;"><TR valign=top align=right>';
    m += "<TD align=left width=85 style='background-color:"+Colors.OverviewDarkRow+";'><INPUT id=showReq type=checkbox " + (t.showReq?'CHECKED ':'') +">Show requirements.</td>";
    for(i=0; i<Cities.numCities; i++) {
      m += "<TD width=79 style='background-color:"+Colors.OverviewDarkRow+"'><B>"+ Cities.cities[i].name.substring(0,11) +"</b><BR>"+ coordLink(Cities.cities[i].x, Cities.cities[i].y) +"<BR></td>";
    }
    m+='<TR valign=top align=right><TD width=85 style="background-color:'+Colors.OverviewDarkRow+';">building</td>';	
    for(i=0; i<Seed.cities.length; i++) {
    	city = 'city'+Seed.cities[i][0];
    	m+='<TD width=79 style="background:#FFFFFF">';
    	if (Seed.queue_con[city][0] != undefined) {
    		m+=uW.buildingcost['bdg' + Seed.queue_con[city][0][0]][0];
    		m+=' ('+Seed.queue_con[city][0][1]+')';
    		m+='<br>'+ timestr((Seed.queue_con[city][0][4] - unixTime()),true);
    	}
    	m+='</td>';	
    }
    m+='</tr>';
    m+='<TR valign=top align=right><TD width=85 style="background-color:'+Colors.OverviewDarkRow+';">researching</td>';	
    for(i=0; i<Seed.cities.length; i++) {
    	city = 'city'+Seed.cities[i][0];
    	m+='<TD width=79 style="background:#FFFFFF">';
    	if (Seed.queue_tch[city][0] != undefined) {
    		m+=uW.techcost['tch' + Seed.queue_tch[city][0][0]][0];
    		m+=' ('+Seed.queue_tch[city][0][1]+')';
    		m+='<br>'+ timestr((Seed.queue_tch[city][0][3] - unixTime()),true);
    	}
    	m+='</td>';		
    }
    m+='</tr><TR><TD colspan="8" style="background: #FFFFFF; border:none">&nbsp;</td></tr>';
    m+='<TR valign=top align=right><TD width=85 style="background-color:'+Colors.OverviewDarkRow+';">'+uW.fortcost['frt53'][0]+'</td>';
    for (i=0;i<Seed.cities.length;i++){
    	city = 'city'+Seed.cities[i][0];
    	for (y in Seed.buildings[city]) {
    		if (Seed.buildings[city][y][0] == 15) blacksmith = Seed.buildings[city][y][1]; 
    	}
    	wall = parseInt(Seed.buildings[city].pos1[1]);
    	var WallSpace = 0;
    	for (var b = 1; b < (wall + 1); b++) {WallSpace += (b * 1000)};
    	max = WallSpace/2/2 - parseInt(Seed.fortifications[city]["fort53"]) - parseInt(Seed.fortifications[city]["fort55"]);
    	m+= '<TD width=79 style="background:#FFFFFF">' + Seed.fortifications[city]["fort53"];
    	if (wall >=6 && blacksmith >=6 && fletching >=5 && max > 0) m+= '<br>Left: ' + max +'</td>';
    	else if (t.showReq){
    			if (wall < 6) m+= '<br><FONT COLOR= "CC0000">Muro: ' + wall + '(6)</font>';
    			if (blacksmith < 6) m+= '<br><FONT COLOR= "CC0000">Herreria: ' + blacksmith + '(6)</font>';
    			if (fletching < 5) m+= '<br><FONT COLOR= "CC0000">Flechas: ' + fletching + '(5)</font>';
    			m+='</td>';
    		} 		
    }
    m+='</tr><TR valign=top align=right><TD width=85 style="background-color:'+Colors.OverviewDarkRow+';">'+uW.fortcost['frt55'][0]+'</td>';
    for (i=0;i<Seed.cities.length;i++){
    	city = 'city'+Seed.cities[i][0];
    	for (y in Seed.buildings[city]) {
    		if (Seed.buildings[city][y][0] == 15) blacksmith = Seed.buildings[city][y][1]; 
    	}
    	wall = parseInt(Seed.buildings[city].pos1[1]);
    	var WallSpace = 0;
    	for (var b = 1; b < (wall + 1); b++) {WallSpace += (b * 1000)};
    	max = WallSpace/2/4 - parseInt(Seed.fortifications[city]["fort53"]) - parseInt(Seed.fortifications[city]["fort55"]);
    	m+=  '<TD width=79 style="background:#FFFFFF">' +Seed.fortifications[city]["fort55"];
    	if (wall >=8 && blacksmith >=8 && fletching >=7 && geometry>=7 && max > 0) m+= '<br>Left: ' + max+'</td>';
    	else if (t.showReq){
    			if (wall < 8) m+= '<br><FONT COLOR= "CC0000">Muro: ' + wall + '(8)</font>';
    			if (blacksmith < 8) m+= '<br><FONT COLOR= "CC0000">Herreria: ' + blacksmith + '(8)</font>';
    			if (fletching < 7) m+= '<br><FONT COLOR= "CC0000">Flechas: ' + fletching + '(7)</font>';
    			if (geometry < 7) m+= '<br><FONT COLOR= "CC0000">Geomet.: ' + geometry + '(7)</font>';
    			m+='</td>';
    	} 	
    }
    m+='<TR valign=top align=right><TD width=85 style="background-color:'+Colors.OverviewDarkRow+';"> Wall defenses</td>';
    for (i=0;i<Seed.cities.length;i++){
    	city = 'city'+Seed.cities[i][0];
    	wall = parseInt(Seed.buildings[city].pos1[1]);
    	build = (parseInt(Seed.fortifications[city]["fort53"])*2)+ (parseInt(Seed.fortifications[city]["fort55"])*4);
    	var WallSpace = 0;
    	for (var b = 1; b < (wall + 1); b++) {WallSpace += (b * 1000)};
    	max = WallSpace/2;
    	if (build < max) m+='<TD width=79 style="background:#FFFFFF"><FONT COLOR= "CC0000">';
    	else m+='<TD width=79 style="background:#FFFFFF"><FONT COLOR= "669900">';
    	m+= build+'</font>';
    	m+= '/' + max +'</td>';
    }
    m+='</tr><TR valign=top align=right><TD width=85 style="background-color:'+Colors.OverviewDarkRow+';">'+uW.fortcost['frt60'][0]+'</td>';
    for (i=0;i<Seed.cities.length;i++){
    	city = 'city'+Seed.cities[i][0];
    	for (y in Seed.buildings[city]) {
    		if (Seed.buildings[city][y][0] == 15) blacksmith = Seed.buildings[city][y][1]; 
    	}
    	wall = parseInt(Seed.buildings[city].pos1[1]);
    	var WallSpace = 0;
    	for (var b = 1; b < (wall + 1); b++) {WallSpace += (b * 1000)};
    	max = WallSpace/2/4 - (parseInt(Seed.fortifications[city]["fort60"])*4) - (parseInt(Seed.fortifications[city]["fort61"])*1) - (parseInt(Seed.fortifications[city]["fort62"])*3);
    	m+=  '<TD width=79 style="background:#FFFFFF">'+Seed.fortifications[city]["fort60"];
    	if (wall >=4 && blacksmith >=4 && poisonededge>=4 && max>0) m+= '<br>Left: ' + max+'</td>';
    	else if (t.showReq){
    			if (wall < 4) m+= '<br><FONT COLOR= "CC0000">Muro: ' + wall + '(4)</font>';
    			if (blacksmith < 4) m+= '<br><FONT COLOR= "CC0000">Herreria: ' + blacksmith + '(4)</font>';
    			if (poisonededge < 4) m+= '<br><FONT COLOR= "CC0000">P.envenenada: ' + poisonededge + '(4)</font>';
    			m+='</td>';
    	} 	
    }
    m+='</tr><TR valign=top align=right><TD width=85 style="background-color:'+Colors.OverviewDarkRow+';">'+uW.fortcost['frt61'][0]+'</td>';
    for (i=0;i<Seed.cities.length;i++){
    	city = 'city'+Seed.cities[i][0];
    	for (y in Seed.buildings[city]) {
    		if (Seed.buildings[city][y][0] == 15) blacksmith = Seed.buildings[city][y][1]; 
    	}
    	wall = parseInt(Seed.buildings[city].pos1[1]);
    	var WallSpace = 0;
    	for (var b = 1; b < (wall + 1); b++) {WallSpace += (b * 1000)};
    	max = WallSpace/2/1 - (parseInt(Seed.fortifications[city]["fort60"])*4) - (parseInt(Seed.fortifications[city]["fort61"])*1) - (parseInt(Seed.fortifications[city]["fort62"])*3);
    	m+= '<TD width=79 style="background:#FFFFFF">'+Seed.fortifications[city]["fort61"];
    	if (wall >=1 && metalalloys >=1 && max>0) m+= '<br>Left: ' + max+'</td>';
    	else if (t.showReq){
    			if (wall < 1) m+= '<br><FONT COLOR= "CC0000">Muro: ' + wall + '(1)</font>';
    			if (metalalloys < 1) m+= '<br><FONT COLOR= "CC0000">A.Metal.: ' + metalalloys + '(1)</font>';
    			m+='</td>';
    	} 	
    }
    m+='</tr><TR valign=top align=right><TD style="background-color:'+Colors.OverviewDarkRow+';">'+uW.fortcost['frt62'][0]+'</td>';
    for (i=0;i<Seed.cities.length;i++){
    	city = 'city'+Seed.cities[i][0];
    	for (y in Seed.buildings[city]) {
    		if (Seed.buildings[city][y][0] == 15) blacksmith = Seed.buildings[city][y][1]; 
    	}
    	wall = parseInt(Seed.buildings[city].pos1[1]);
    	var WallSpace = 0;
    	for (var b = 1; b < (wall + 1); b++) {WallSpace += (b * 1000)};
    	max = (WallSpace/2/3).toFixed(0) - (parseInt(Seed.fortifications[city]["fort60"])*4) - (parseInt(Seed.fortifications[city]["fort61"])*1) - (parseInt(Seed.fortifications[city]["fort62"])*3);
    	m+=  '<TD width=79 style="background:#FFFFFF">'+Seed.fortifications[city]["fort62"];
    	if (wall >=2 && blacksmith>=2 && logging>=2 && max>0) m+= '<br>Left: ' + max+'</td>';
    	else if (t.showReq){
    			if (wall < 2) m+= '<br><FONT COLOR= "CC0000">Muro: ' + wall + '(2)</font>';
    			if (blacksmith < 2) m+= '<br><FONT COLOR= "CC0000">Herreria: ' + blacksmith + '(2)</font>';
    			if (logging < 2) m+= '<br><FONT COLOR= "CC0000">Logg.: ' + logging + '(2)</font>';
    			m+='</td>';
    	} 	
    }
    m+='<TR valign=top align=right><TD width=85 style="background-color:'+Colors.OverviewDarkRow+';">Field defenses</td>';
    for (i=0;i<Seed.cities.length;i++){
    	city = 'city'+Seed.cities[i][0];
    	wall = parseInt(Seed.buildings[city].pos1[1]);
    	build = (parseInt(Seed.fortifications[city]["fort60"])*4)+ (parseInt(Seed.fortifications[city]["fort61"])*1) + (parseInt(Seed.fortifications[city]["fort62"])*3);
    	var WallSpace = 0;
    	for (var b = 1; b < (wall + 1); b++) {WallSpace += (b * 1000)};
    	max = WallSpace/2;
    	if (build < max) m+='<TD width=79 style="background:#FFFFFF"><FONT COLOR= "CC0000">';
    	else m+='<TD width=79 style="background:#FFFFFF"><FONT COLOR= "669900">';
    	m+= build+'</font>';
    	m+= '/' + max +'</td>';
    }
    m+='</tr><TR><TD colspan="8" style="background: #FFFFFF; border:none">&nbsp;</td></tr>';
    m+='<TR valign=top align=right><TD width=85 style="background-color:'+Colors.OverviewDarkRow+';">city ??spaces</td>';
    
    for(i=0; i<Seed.cities.length; i++) {
    	var count=0;
    	city = 'city'+Seed.cities[i][0];
    	for (y in Seed.buildings[city]) {
    		if (Seed.buildings[city][y][0] >=5 && Seed.buildings[city][y][0] <19) count++;
    	}
    	if (count == 31) m+='<TD width=79 style="background:#FFFFFF"><FONT COLOR= "669900">';
    	else m+='<TD width=79 style="background:#FFFFFF"><FONT COLOR= "CC0000">';
    	m+= count + '</font> (31)</td>';
    }
    m+='</tr>';
    m+='<TR valign=top align=right><TD width=85 style="background-color:'+Colors.OverviewDarkRow+';">field spaces</td>';
    
    for(i=0; i<Seed.cities.length; i++) {
    	var count=0;
    	var castle=0;
    	city = 'city'+Seed.cities[i][0];
    	for (y in Seed.buildings[city]) {
    		if (Seed.buildings[city][y][0] == 0) castle = Seed.buildings[city][y][1];
    		if (Seed.buildings[city][y][0] >=1 && Seed.buildings[city][y][0] <=4) count++;
    	}
    	if (count == FieldSpace[castle]) m+='<TD width=79 style="background:#FFFFFF"><FONT COLOR= "669900">';
    	else m+='<TD width=79 style="background:#FFFFFF"><FONT COLOR= "CC0000">';
    	m+= count + '</font> ('+FieldSpace[castle]+')</td>';
    }
    m+='</tr>';
    for (b=0;b<20;b++){
    	m+='<TR valign=top align=right><TD width=85 style="background-color:'+Colors.OverviewDarkRow+';">'+uW.buildingcost['bdg' + b][0]+'</td>';
        for (c=0;c<Seed.cities.length;c++){
        	m+='<TD style="width:79px; max-width:79px; word-wrap: break-word; background:#FFFFFF">';
        		city= 'city'+Seed.cities[c][0];
        		var count =0;
        		for (y in Seed.buildings[city]) {
        			if (Seed.buildings[city][y][0] == b) {
        				count++;
        				if (count > 1) m+=",";
        				if (Seed.buildings[city][y][1] >= 9) m+='<FONT COLOR= "669900">';
        				m+=Seed.buildings[city][y][1];
        				if (Seed.buildings[city][y][1] >= 9) m+='</font>';
        				
        			}
        		}
        		if (count == 0) {
        			m+='<FONT COLOR= "CC0000">0</font>';
        		}
        	m+='</td>';		
        }
        m+='</tr>';
    } 
    m+='</tr><TR><TD colspan="8" style="background: #FFFFFF; border:none">&nbsp;</td></tr>';
    for(i=0; i<Cities.numCities; i++) {
    }
    m+='<TR valign=top align=right><TD width=85 style="background-color:'+Colors.OverviewDarkRow+';">guardians</td>';
    for(i=0; i<Seed.cities.length; i++) {
     	for(g=0;g<Seed.guardian.length;g++) {
     		if (Seed.guardian[g]['cityId'] == Seed.cities[i][0] && Seed.guardian[g]['level']!=0) {
     			m += '<TD width=79 style="background:#FFFFFF">';
     			if (Seed.guardian[g]['level'] >=9) m+='<FONT COLOR= "669900">'; 
     			m+=Seed.guardian[g]['level']+"("+Seed.guardian[g]['type']+")</td>";
     			if (Seed.guardian[g]['level'] >=9) m+='</font>'; 
     		}
     		else {if (Seed.guardian[g]['cityId'] == Seed.cities[i][0] && Seed.guardian[g]['level']==0) m += '<TD width=79 style="background:#FFFFFF"><FONT COLOR= "CC0000">0</font></td>'};
    	}
    }
    m+='</tr></table><BR></table><BR><TABLE class=ptBuilds  border=1px cellpadding=2 cellspacing=0><TR valign=top align=left>';
    for (i in uW.techcost) {
    	m+='<TD border=1px style="width:150px; background:#FFFFFF">'+uW.techcost[i][0]+'</td><TD align=center style="width:50px max-width:150px; background:#FFFFFF;">';
    	if (Seed.tech[i] >=9) m+='<FONT COLOR= "669900">';
    	if (Seed.tech[i] ==0) m+='<FONT COLOR= "CC0000">';
    	m+=Seed.tech[i];
    	if (Seed.tech[i] >=9 || Seed.tech[i] ==0) m+='</font>';
    	if (t.showReq) {
    		for(z=0; z<Seed.cities.length; z++) {
        		city = 'city'+Seed.cities[z][0];
        		for (y in Seed.buildings[city]) {
        			var farm,sawmill,quarry,mine,alchemylab,workshop,blacksmith,stable,storehouse,barracks = 0;
        			if (Seed.buildings[city][y][0] == 1 && Seed.buildings[city][y][0] > farm) farm = Seed.buildings[city][y][1]; 
        			if (Seed.buildings[city][y][0] == 2 && Seed.buildings[city][y][0] > sawmill) sawmill = Seed.buildings[city][y][1];
        			if (Seed.buildings[city][y][0] == 3 && Seed.buildings[city][y][0] > quarry) quarry = Seed.buildings[city][y][1]; 
        			if (Seed.buildings[city][y][0] == 4 && Seed.buildings[city][y][0] > mine) mine = Seed.buildings[city][y][1];
        			if (Seed.buildings[city][y][0] == 9) storehouse = Seed.buildings[city][y][1];
        			if (Seed.buildings[city][y][0] == 11) alchemylab = Seed.buildings[city][y][1];
        			if (Seed.buildings[city][y][0] == 13 && Seed.buildings[city][y][0] > barracks) barracks = Seed.buildings[city][y][1];
        			if (Seed.buildings[city][y][0] == 15) blacksmith = Seed.buildings[city][y][1];
        			if (Seed.buildings[city][y][0] == 16) workshop = Seed.buildings[city][y][1];
        			if (Seed.buildings[city][y][0] == 17) stable = Seed.buildings[city][y][1];
        		}
        	}
        	m+='<FONT COLOR= "CC0000">';
    		switch (i) {
    			case '1': 
    				if (alchemylab < Seed.tech[i]) m+='<BR>Alchemy Lab '+ alchemylab+ '('+ (Seed.tech[i]) +')';
    				if (farm < Seed.tech[i]) m+='<BR>Farm '+ farm +'('+ (Seed.tech[i]+1) +')</td>';
    				break;
    			case '2': 
    				if (alchemylab < Seed.tech[i]) m+='<BR>Alchemy Lab '+ alchemylab+ '('+ (Seed.tech[i]) +')';
    				if (sawmill < Seed.tech[i]) m+='<BR>Sawmill '+ sawmill +'('+ (Seed.tech[i]) +')';
    				break;
    			case '3': 
    				if (alchemylab < Seed.tech[i]) m+='<BR>Alchemy Lab '+ alchemylab+ '('+ (Seed.tech[i]) +')';
    				if (quarry < Seed.tech[i]) m+='<BR>Quarry '+ quarry +'('+ (Seed.tech[i]) +')</td>';
    				break;
    			case '4': 
    				if (alchemylab < Seed.tech[i]) m+='<BR>Alchemy Lab '+ alchemylab+ '('+ (Seed.tech[i]) +')';
    				if (mine < Seed.tech[i]) m+='<BR>Mine '+ mine +'('+ (Seed.tech[i]) +')';
    				break;
    			case '5': 
    				if (alchemylab < 3) m+='<BR>Alchemy Lab '+ alchemylab +'(3)';
    				if (alchemylab >= 3 && alchemylab < Seed.tech[i]) m+='<BR>Alchemy Lab '+ alchemylab +'('+ (Seed.tech[i]) +')';
    				if (workshop < Seed.tech[i]) m+='<BR>Workshop ' + workshop +'('+ (Seed.tech[i]) +')';
    				if (stoneworking < 2) m+='<BR>Stoneworking '+ stoneworking +'(2)';
    				break;
    			case '6': 
    				if (alchemylab < 3) m+='<BR>Alchemy Lab '+ alchemylab +'(3)';
    				if (alchemylab >= 3 && alchemylab < Seed.tech[i]) m+='<BR>Alchemy Lab '+ alchemylab +'('+ (Seed.tech[i]) +')';
    				break;	
    			case '8': 
    				if (alchemylab < 2) m+='<BR>Alchemy Lab '+ alchemylab +'(2)';
    				if (alchemylab >= 2 && alchemylab < Seed.tech[i]) m+='<BR>Alchemy Lab '+ alchemylab +'('+ (Seed.tech[i]) +')';
    				if (barracks < 2) m+='<BR>Barracks '+ barracks +'(2)';
    				break;		
    			case '9': 
    				if (alchemylab < 3) m+='<BR>Alchemy Lab '+ alchemylab +'(3)';
    				if (alchemylab >= 3 && alchemylab < Seed.tech[i]) m+='<BR>Alchemy Lab '+ alchemylab +'('+ (Seed.tech[i]) +')';
    				if (blacksmith < Seed.tech[i]) m+='<BR>Blacksmith '+ blacksmith+'('+ (Seed.tech[i]) +')';
    				if (mining < Seed.tech[i]) m+='<BR>Mining '+ mining +'('+ (Seed.tech[i]) +')';
    				break;
    			case '10': 
    				if (alchemylab < 4) m+='<BR>Alchemy Lab '+ alchemylab +'(4)';
    				if (alchemylab >= 4 && alchemylab < Seed.tech[i]) m+='<BR>Alchemy Lab '+ alchemylab +'('+ (Seed.tech[i]) +')';
    				break;
    			case '11': 
    				if (alchemylab < 4) m+='<BR>Alchemy Lab '+ alchemylab +'(4)';
    				if (alchemylab >= 4 && alchemylab < Seed.tech[i]) m+='<BR>Alchemy Lab '+ alchemylab +'('+ (Seed.tech[i]) +')';
    				break;
    			case '12': 
    				if (alchemylab < 5) m+='<BR>Alchemy Lab '+ alchemylab +'(5)';
    				if (alchemylab >= 5 && alchemylab < Seed.tech[i]) m+='<BR>Alchemy Lab '+ alchemylab +'('+ (Seed.tech[i]) +')';
    				if (stable < Seed.tech[i]) m+='<BR>Stable '+ stable +'('+ (Seed.tech[i]+1) +')';
    				if (metalalloys < Seed.tech[i]) m+='<BR>Metal Alloys '+ metalalloys +'('+ (Seed.tech[i]+1) +')';
    				break;
    			case '13': 
    				if (alchemylab < 4) m+='<BR>Alchemy Lab '+ alchemylab +'(4)';
    				if (alchemylab >= 4 && alchemylab < Seed.tech[i]) m+='<BR>Alchemy Lab '+ alchemylab +'('+ (Seed.tech[i]) +')';
    				if (logging < 4) m+='<BR>Logging '+ logging +'(4)';
    				break;
    			case '14': 
    				if (alchemylab < 6) m+='<BR>Alchemy Lab '+ alchemylab +'(6)';
    				if (alchemylab >= 6 && alchemylab < Seed.tech[i]) m+='<BR>Alchemy Lab '+ alchemylab +'('+ (Seed.tech[i]) +')';
    				if (storehouse < Seed.tech[i]) m+='<BR>Storehouse '+ storehouse +'('+ (Seed.tech[i]) +')';
    				if (logging < 3) m+='<BR>Logging '+ logging+'(3)';
    				break;
    			case '15': 
    				if (alchemylab < 6) m+='<BR>Alchemy Lab '+ alchemylab +'(6)';
    				if (alchemylab >= 6 && alchemylab < Seed.tech[i]) m+='<BR>Alchemy Lab '+ alchemylab +'('+ (Seed.tech[i]) +')';
    				if (featherweightpowder  < 3) m+='<BR>Featherweight Powder  '+ featherweightpowder +'(3)';
    				break;
    			case '16': 
    				if (alchemylab < 5) m+='<BR>Alchemy Lab '+ alchemylab +'(5)';
    				if (alchemylab >= 5 && alchemylab < Seed.tech[i]) m+='<BR>Alchemy Lab '+ alchemylab +'('+ (Seed.tech[i]) +')';
    				if (logging  < 5) m+='<BR>Logging '+ logging +'(5)';
    				if (geometry  < 2) m+='<BR>Geometry  '+ geometry +'(2)';
    				break;
    		}
    		m+='</font>';
    	}
    	m+='</td></tr>';
    }	
    m+='</table></div>';
    t.Overv.innerHTML = m;
    document.getElementById('showReq').addEventListener ('change', function (){
    	t.showReq = document.getElementById('showReq').checked;
    	t.showBuilds();
    },false);	
    t.displayTimer = setTimeout (t.showBuilds, 1000);
  },
  
  showInfo : function (){
      var t = Tabs.OverView;
      t.Overv.innerHTML = null;
      t.Overv.style.maxHeight = '700px';
      t.Overv.style.overflowY = 'scroll';
      clearTimeout (t.displayTimer);	
      
	  var u='<DIV class=ptstat>LINKS</div><DIV id=ptLinks><TABLE align=center cellpadding=1 cellspacing=0><TR>';
	  u+='<TD width="300px" ; border:none">Scripts</td><TD width="300px" ; border:none">INFORMATION SITES</td></tr>';
	  u+='<TR><TD width="300px" ; border:none"><a href="http://userscripts.org/scripts/show/103659" target="_blank">Power Tools (Koc Scripters)</a></td>';
	  u+='<TD width="300px" ; border:none"><a href="http://koctools.com/index.php?pageid=servers" target="_blank">KOCTools</a></td></tr>';
	  u+='<TR><TD width="100px" ; border:none"><a href="http://code.google.com/p/koc-power-tools/wiki/Home?tm=6" target="_blank">Power Tools WIKI</a></td>';
	  u+='<TD width="300px" ; border:none"><a href="http://koc.dunno.com/index.sjs?f=ListServers" target="_blank">KOC Mapper</a></td></tr>';
	  u+='<TR><TD width="100px" ; border:none"><a href="http://userscripts.org/scripts/show/101052" target="_blank">Power Bot (Koc Scripters)</a></td>';
	  u+='<TD width="300px" ; border:none"><a href="http://kocmon.com/" target="_blank">KoC Monitor</a></td></tr>';
	  u+='<TR><TD width="100px" ; border:none"><a href="http://code.google.com/p/koc-power-bot/wiki/Home?tm=6" target="_blank">Power Bot WIKI</a></td>';
	  u+='<TD width="300px" ; border:none"><a href="http://koc.wikia.com/wiki/" target="_blank">Koc Wikia</a></td></tr>';
	  u+='<TR><TD width="100px" ; border:none"><a href="https://addons.mozilla.org/en/firefox/addon/greasemonkey/" target="_blank">Greasemonkey</a></td><TD width="100px" ; border:none"></td>';
	  u+='<TR><TD width="100px" ; border:none"><a href="https://addons.mozilla.org/en/firefox/addon/scriptish/" target="_blank">Scriptish</a></td><TD width="100px" ; border:none"></td>';
	  u+='</tr></table></div><BR>';
	  
	  var crestreq = { 3:{1101:4, 1102:2, 1103:1},
	  				 4:{1103:4, 1104:3, 1105:1},
	  				 5:{1106:4, 1107:3, 1108:2},
	  				 6:{1109:4, 1110:3, 1111:2},
	  				 7:{1112:4, 1113:3, 1114:2}
	  				};
	  				
	  u+='<DIV class=ptstat>Crest Information</div><DIV id=ptLinks><TABLE align=center cellpadding=1 cellspacing=0><TR>';
	  for (city in crestreq){
	  		deed = 'q800' + city;
        if (Seed.quests[deed] ==1) u+='<TD width=75px style="background:#CCFFCC">';
        else  u+='<TD width=75px ">';
        u+= uW.g_js_strings.commonstr.city+' '+city+'</td>';
	  		for (crest in crestreq[city]){
	  			owned = Seed.items['i'+crest];
	  			if (Seed.quests[deed] ==1) u+='<TD 200px style="background:#CCFFCC">';
          else  u+='<TD 200px ">';
	  			if (owned == undefined) owned=0;
	  			if (owned < crestreq[city][crest]) u+='<FONT color=red>'+owned+'/'+crestreq[city][crest]+'</font> '+uW.itemlist['i'+crest]['name']+'</td>';
	  				else  u+='<FONT color=green>'+owned+'/'+crestreq[city][crest]+'</font> '+uW.itemlist['i'+crest]['name']+'</td>'; 
	  		}
	  		u+='</tr>';
	  }
	  u+='</table><BR>';
	  fortmight = {
	        u53: "4",
	        u55: "7",
	        u60: "1",
	        u61: "2",
	        u62: "3",
	      };
	      rownum = 0;
	      u += '<STYLE>.xtabH {background:#ffffe8; border:none; padding-right: 5px; padding-left: 5px; margin-left:10px; }\
	              .xtabHL { background:#ffffe8; border-width: 1px; border-style: none none none solid; padding-right:5px; padding-left:5px; margin-left:10px; }\
	              .xtabL { background:none; border-width: 1px; border-style: none none none solid; padding-right:5px; padding-left: 5px; margin-left:10px; }\
	              .xtabLine { padding:0px; spacing:0px; height:1px; border-color:black; border-width: 1px; border-style: none none solid none }</style>\
	          <DIV style="overflow-y:auto; overflow-x:hidden"><DIV class=ptstat>INFORMATION FOR THE TROOPS</div><TABLE align=center cellpadding=1 cellspacing=0>\
	          <TR align=center><TD class=xtab></td><TD class=xtabHL colspan=5><B>COST TO BUILD</b></td><TD class=xtabHL colspan=7><B>STATS</b></td><TD class=xtabHL><B>EATS</b></td></tr>\
	          <TR valign=bottom align=right><TD class=xtab></td><TD class=xtabHL>Food</td><TD class=xtabH>Wood</td><TD class=xtabH>Stone</td>\
	          <TD class=xtabH>Ore</td><TD class=xtabH>Pop</td><TD class=xtabHL>Might</td><TD class=xtabH>Life</td><TD class=xtabH>Attack</td><TD class=xtabH>Def</td><TD class=xtabH>Speed</td><TD class=xtabH>Range</td><TD class=xtabH>Load</td>\
	          <TD class=xtabHL>Food</td></tr>\
	          <TR style="height:1px;"><TD style="padding:0px; spacing:0px; height:1px; border-color:black; border-width: 1px; border-style: none none solid none" colspan=14></td></tr>';
	      for (ui=1; ui<13; ui++){
	        if (++rownum % 2)
	          rsty = '';
	        else
	          rsty = ' style="background: #e8e8e8" ';
	        cost = unsafeWindow.unitcost['unt'+ui];     //  NAME, Food, Wood, Stone, Ore, ?, IdlePop, Time
	        stats = uW.unitstats['unt'+ui];   //  Life, Attack, Defense, Speed, Range, Load
	        food = uW.unitupkeeps[ui];
	        might = uW.unitmight['unt'+ui];
	        u += '<TR '+ rsty +'align=right><TD class=xtab align=left><B>'+ cost[0].substr(0,16) +'</b></td><TD class=xtabL>'+ cost[1] +'</td><TD class=xtab>'+ cost[2] +'</td>\
	            <TD class=xtab>'+ cost[3] +'</td><TD class=xtab>'+ cost[4] +'</td><TD class=xtab>'+ cost[6] +'</td><TD class=xtabL>'+ might +'</td>\
	            <TD class=xtab>'+ stats[0] +'</td><TD class=xtab>'+ stats[1] +'</td><TD class=xtab>'+ stats[2] +'</td><TD class=xtab>'+ stats[3] +'</td>\
	            <TD class=xtab>'+ stats[4] +'</td><TD class=xtab>'+ stats[5] +'</td><TD class=xtabL>'+ food +'</td></tr>';
	  
	      }
	      u += '<TR class=xtabLine><TD colspan=14 class=xtabLine></td></tr>';
	      for (k in uW.fortcost){
	        if (++rownum % 2)
	          rsty = '';
	        else
	          rsty = ' style="background: #e8e8e8" ';
	        cost = unsafeWindow.fortcost[k];     //  NAME, Food, Wood, Stone, Ore, ?, IdlePop, Time
	        fi = k.substring(3);
	        stats = unsafeWindow.fortstats['unt'+fi];   //  Life, Attack, Defense, Speed, Range, Load
	        food = 0;
	        might = fortmight['u'+fi];
	        name = cost[0].replace ('Defensive','');
	        name = name.replace ('Wall-Mounted','');
	        u+= '<TR '+ rsty +'align=right><TD align=left class=xtab><B>'+ name +'</b></td><TD class=xtabL>'+ cost[1] +'</td><TD class=xtab>'+ cost[2] +'</td>\
	            <TD class=xtab>'+ cost[3] +'</td><TD class=xtab>'+ cost[4] +'</td><TD class=xtab>'+ cost[6] +'</td><TD class=xtabL>'+ might +'</td>\
	            <TD class=xtab>'+ stats[0] +'</td><TD class=xtab>'+ stats[1] +'</td><TD class=xtab>'+ stats[2] +'</td><TD class=xtab>'+ stats[3] +'</td>\
	            <TD class=xtab>'+ stats[4] +'</td><TD class=xtab>'+ stats[5] +'</td><TD class=xtabL>'+ food +'</td></tr>';
	      }
	      u += '<TR class=xtabLine><TD colspan=14 class=xtabLine></td></tr>';
	      u += '</table></div><BR>';
               //Troop Train Estimates
			function _displayrow (name, row){
                    var tot=0;
      			style = ((rownum++ % 2)?'':' style = "background: #e8e8e8"');
      			u += '<TR' + style + '><TD align=right><B>' + name + '</B></td>';
      			for (i=0; i<row.length; i++) {
      				u += ((row[i]==0)?'<td align=right><SPAN class=boldRed>0</SPAN></td>':'<td align=right>'+addCommas(parseInt(row[i]))+'</td>');
      				tot+=parseInt(row[i]);
      				}
      			u += '<td align=right>'+addCommas(tot)+'</td></tr>';
      		}
		  u += '<DIV class=ptstat>ESTIMATED TIME TRAINING TROOPS</div><TABLE align=center cellpadding=1 cellspacing=0><TR align=right><TD></td>';
	      infoRows = [];
      		for (r=0; r<24; r++)
      			infoRows[r] = [];
      		for(i=0; i<Cities.numCities; i++) {
      			cityID = 'city'+ Cities.cities[i].id;
      			u += "<TD align=center valign=bottom width=60px><B>" + Cities.cities[i].name.substr(0,10)  + "</B></TD>";
      			// getTroopDefTrainEstimates(cityID);
      			infoRows[0][i] = Cities.cities[i].numCottages;
      			infoRows[1][i] = Cities.cities[i].numBarracks;
      			infoRows[2][i] = Cities.cities[i].foremanBasePoliticsScore;
      			infoRows[3][i] = Cities.cities[i].marshallCombatScore;
      			infoRows[5][i] = Cities.cities[i].stableLevel;
      			infoRows[6][i] = Cities.cities[i].workshopLevel;
      			for (var j=1; j<13; j++)
      				infoRows[j+6][i] = ((Cities.cities[i]['Troop'+j+'Time'] > 0)?(3600 / Cities.cities[i]['Troop'+j+'Time']):0);
      			infoRows[19][i] = Cities.cities[i]['Def53Time'];
      			if (infoRows[19][i] > 0)
      				infoRows[19][i] = 3600 / infoRows[19][i];
      			infoRows[20][i] = Cities.cities[i]['Def55Time'];
      			if (infoRows[20][i] > 0)
      				infoRows[20][i] = 3600 / infoRows[20][i];
      			infoRows[21][i] = Cities.cities[i]['Def60Time'];
      			if (infoRows[21][i] > 0)
      				infoRows[21][i] = 3600 / infoRows[21][i];
      			infoRows[22][i] = Cities.cities[i]['Def61Time'];
      			if (infoRows[22][i] > 0)
      				infoRows[22][i] = 3600 / infoRows[22][i];
      			infoRows[23][i] = Cities.cities[i]['Def62Time'];
      			if (infoRows[23][i] > 0)
      				infoRows[23][i] = 3600 / infoRows[23][i];
      		}
      		u += "<td align=center valign=bottom width=60px><b>Total</td></tr>";
      		 var rownum = 0;
      		_displayrow ("Cottage", infoRows[0]);
      		_displayrow ("Barracks", infoRows[1]);
      		_displayrow (" Foreman Policy", infoRows[2]);
      		_displayrow (" Marshal Combat ", infoRows[3]);
      		_displayrow ("Stable Level", infoRows[5]);
      		_displayrow ("Workshop Level", infoRows[6]);
      		u += "<TR><TD></TD><TD nowrap align=center colspan="+(Cities.numCities)+"><B>Output per hour of troops</B></TD></TR>";
      		_displayrow ("Supply Troop", infoRows[7]);
      		_displayrow ("Militiaman", infoRows[8]);
      		_displayrow ("Scout", infoRows[9]);
      		_displayrow ("Pikeman", infoRows[10]);
      		_displayrow ("Swordsman", infoRows[11]);
      		_displayrow ("Archer", infoRows[12]);
      		_displayrow ("Cavalry", infoRows[13]);
      		_displayrow ("Heavey Cavalry", infoRows[14]);
      		_displayrow ("Wagons", infoRows[15]);
      		_displayrow ("Ballista", infoRows[16]);
      		_displayrow ("Battering Ram", infoRows[17]);
      		_displayrow ("Catapult", infoRows[18]);
      		u += "<TR><TD></TD><TD nowrap align=center colspan="+(Cities.numCities)+"><B>Output per hour of wall defenses</B></TD></TR>";
      		_displayrow ("Crossbow", infoRows[19]);
      		_displayrow ("Trebuchet", infoRows[20]);
      		_displayrow ("Trap", infoRows[21]);
      		_displayrow ("Caltrop", infoRows[22]);
      		_displayrow ("Spike Barrier", infoRows[23]);
		  u += '</tr></table>';
             
	      
	      u += '<DIV class=ptstat>additional information</div><TABLE><TD width="200px" style="background-color:#FFFFFF; border:none">Dedicated to my love with all my heart</td>';
	      u += '<TD style="background-color:#FFFFFF; border:none"><INPUT id=ptButDebug type=submit name="SEED" value="DEBUG"></td></table></div>';
      
      t.Overv.innerHTML = u;   
      document.getElementById('ptButDebug').addEventListener('click', function (){debugWin.doit()}, false);  
  },      

  paintOld : function (){
    var rownum = 0;
    var t = Tabs.OverView;
    
    clearTimeout (Tabs.OverView.displayTimer);
    t.Overv.innerHTML = null;
    t.Overv.style.maxHeight = '700px';
    t.Overv.style.overflowY = 'scroll';

    function _row (name, row, noTotal){
      var t = Tabs.OverView;
      if (rownum++ % 2)
        style = '';
      else
        style = ' style = "background: #e8e8e8"';
      var tot = 0;
      var m = [];
      m.push ('<TR style="background: #fff" align=right');
      m.push (style);
      m.push ('><TD');
      m.push (style);
      m.push ('><B>');
      m.push (name);
      m.push (' &nbsp; </td>');
      if (noTotal){
        m.push ('<TD');
        m.push (style);
        m.push ('> &nbsp;</td>');
      } else {
        for (i=0; i<row.length; i++)
          tot += row[i];
        m.push ('<TD style="background: #ffc">');
      if (TEST_WIDE)
          m.push ('X,');        
        m.push (addCommas(tot));
        m.push ('</td>');
      }
      for (i=0; i<row.length; i++){
        m.push ('<TD');
        m.push (style);
        m.push ('>');
      if (TEST_WIDE)
         m.push ('X,');        
        m.push (addCommas(row[i]));
        m.push ('</td>');
      }
      m.push ('</tr>');
      return m.join('');
    }
    
    //DebugTimer.start(); 
    try {
      if (Options.includeMarching)
        march = getMarchInfo ();
      if (Options.includeTrainingExt)
        train = getTrainInfo ();

      dt = new Date ();
      dt.setTime (Seed.player.datejoinUnixTime * 1000);
              
      str = "<DIV id=overMainDiv style='font-size:"+ Options.overviewFontSize +"px'><TABLE class=ptTabOverview cellpadding=0 cellspacing=0><TR valign=top align=right><TD width=65></td><TD width=88 style='background: #ffc'><B>TOTAL</b></td>";
      for(i=0; i<Cities.numCities; i++) {
        str += "<TD width=81><B>"+ Cities.cities[i].name.substring(0,11) +'</b><BR>'+ coordLink (Cities.cities[i].x, Cities.cities[i].y) +"<BR>"+ unsafeWindow.provincenames['p'+ Cities.cities[i].provId] +"</td>";
      }
      if (Options.includeMarching)
        str += '<TD width=81><B>Marching</b></td>';
      if (Options.includeTrainingExt)
        str += '<TD width=81><B>Entrenando</b></td>';
      str += "</tr>";
  
    str += '<TR valign=top align=right><TD></td><TD style=\'background: #ffc\'></td>';
    for(i=0; i<Cities.numCities; i++){
      cityID = 'city'+Cities.cities[i].id;
      Gate = parseInt(Seed.citystats[cityID].gate);
    if(Gate == 0)
      str += '<TD>Refugiadas</td>';
    else
      str += '<TD><SPAN class=boldRed>Defending</span></td>';
    }

      rows = [];
      rows[0] = [];
      for(i=0; i<Cities.numCities; i++) {
        cityID = 'city'+ Cities.cities[i].id;
        rows[0][i] = parseInt(Seed.citystats[cityID].gold[0]);
      }
      for (r=1; r<5; r++){
        rows[r] = [];
        for(i=0; i<Cities.numCities; i++) {
          cityID = 'city'+ Cities.cities[i].id;
          rows[r][i] = parseInt(Seed.resources[cityID]['rec'+r][0] / 3600);
        }
      }
	  rows[5] = [];
	  for(i=0; i<Cities.numCities; i++) { //Aetherstone
        cityID = 'city'+ Cities.cities[i].id;
        rows[5][i] = parseInt(Seed.resources[cityID]['rec5'][0]);
      }
  
      if (Options.includeMarching){
        for (var i=0; i<5; i++)
          rows[i][Cities.numCities] = march.resources[i]; //Aetherstone does not show up in march info
      }
      str += _row ('Gold', rows[0]);
      str += _row ('Food', rows[1]);
      str += _row ('Wood', rows[2]);
      str += _row ('Stone', rows[3]);
      str += _row ('Ore', rows[4]);
      str += _row ('Aetherstone', rows[5]);
      str += '<TR><TD colspan=11><BR></td></tr>';
      for (r=1; r<13; r++){
        rows[r] = [];
        for(i=0; i<Cities.numCities; i++) {
          cityID = 'city'+ Cities.cities[i].id;
          rows[r][i] = parseInt(Seed.units[cityID]['unt'+r]);
        }
      }
	  
	  var colnum = Cities.numCities;
      if (Options.includeMarching){
        for (var i=0; i<13; i++){
          rows[i][colnum] = march.marchUnits[i];
		}
		colnum++;
      }
	  if(Options.includeTrainingExt){
		for (var i=0; i<13; i++){
		  rows[i][colnum] = train.trainUnts[i];
		}
	  }
      if (Options.includeTraining){
        var q = Seed.queue_unt;
        for(i=0; i<Cities.numCities; i++) {
          q = Seed.queue_unt['city'+ Cities.cities[i].id];
          if (q && q.length>0){
            for (qi=0; qi<q.length; qi++)
              rows[q[qi][0]][i] += parseInt(q[qi][1]);
          }    
        }
      }
      rownum = 0;
      str += _row ('Supply Troops', rows[1]);
      str += _row ('Militia', rows[2]);
      str += _row ('Scout', rows[3]);
      str += _row ('Pike', rows[4]);
      str += _row ('Sword', rows[5]);
      str += _row ('Archer', rows[6]);
      str += _row ('Cav', rows[7]);
      str += _row ('Heavey', rows[8]);
      str += _row ('Wagon', rows[9]);
      str += _row ('Ball', rows[10]);
      str += _row ('Ram', rows[11]);
      str += _row ('Cat', rows[12]);
      str += '<TR><TD colspan=11><BR></td></tr>';
      
      row = [];
      for(i=0; i<Cities.numCities; i++) {
        var rp = getResourceProduction (Cities.cities[i].id);
        var usage = parseInt(Seed.resources["city" + Cities.cities[i].id]['rec1'][3]);
        row[i] = rp[1] - usage;
      }
     
      str += _row ('Food +/-', row, true);
      
      for(i=0; i<Cities.numCities; i++) {
        if (row[i] >= 0)
          row[i] = '----';
        else {
          var timeLeft = parseInt(Seed.resources["city" + Cities.cities[i].id]['rec1'][0]) / 3600 / (0-row[i]) * 3600;
          if (timeLeft > 86313600)
            row[i] = '----';
          else {
            if (Options.enableFoodWarn && timeLeft<(Options.foodWarnHours*3600))
              row[i] = '<SPAN class=whiteOnRed>'+ timestrShort(timeLeft) +'</span>';
            else
              row[i] = timestrShort(timeLeft);
          }
        }
      }    
      str += _row ('Cons.Food', row, true);
      str += '<TR><TD><BR></td></tr>';
      
      row = [];
      for(i=0; i<Cities.numCities; i++) {
        var totWilds = 0;
        dat = Seed.wilderness['city'+ Cities.cities[i].id];
        if (dat!=null && matTypeof(dat)=='object')
          for (k in dat)
            ++totWilds;
        var castle = parseInt(Seed.buildings['city'+ Cities.cities[i].id].pos0[1]);
       if(castle == 11) castle = 12;
       else if(castle == 12) castle = 14;
        if (totWilds < castle)
          row[i] = '<SPAN class=boldRed><B>'+ totWilds +'/'+ castle +'</b></span>';
        else
          row[i] = totWilds +'/'+ castle;
      }
      str += _row ('Wild', row, true);
  
      row = [];
      for(i=0; i<Cities.numCities; i++) {
        totKnights = 0;
        dat = Seed.knights['city'+ Cities.cities[i].id];
        for (k in dat)
          ++totKnights;
        row[i] = totKnights;
      }
      str += _row ('Knights', row, true);
  
      var now = unixTime();
      var row = [];
      for(i=0; i<Cities.numCities; i++) {
        var totTime = 0;
        var q = Seed.queue_unt['city'+Cities.cities[i].id]; 
        if (q!=null && q.length>0)
          totTime = q[q.length-1][3] - now;
        if (totTime < 0)
          totTime = 0;
        if (totTime < 3600)
          row[i] = '<SPAN class=boldRed><B>'+ timestr(totTime) +'</b></span>';
        else
          row[i] = timestr(totTime);
      }
      str += _row ('Entre.tropas', row, true);
      
      var row = [];
      for(i=0; i<Cities.numCities; i++) {
        var wall = {};
        getWallInfo (Cities.cities[i].id, wall);
        var totTime = 0;
        var q = Seed.queue_fort['city'+Cities.cities[i].id]; 
        if (q!=null && q.length>0)
          totTime = q[q.length-1][3] - now;
        if (totTime < 0)
          totTime = 0;
        if (totTime<1 && (wall.wallSpaceUsed < wall.wallSpace-4 || wall.fieldSpaceUsed < wall.fieldSpace-4))
          row[i] = '<SPAN class=boldRed><B>'+ timestr(totTime) +'</b></span>';
        else
          row[i] = timestr(totTime);
      }    
      str += _row ('Entre.Defense', row, true);
      str += '<TR><TD class=xtab></td><TD class=xtab colspan=4><BR><INPUT type=CHECKBOX id=idCheck'+ (Options.includeMarching?' CHECKED':'') +'>include Troops/Resources in place</td></tr>';
      str += '<TR><TD class=xtab></td><TD class=xtab colspan=4><INPUT type=CHECKBOX id=ptoverIncTrain'+ (Options.includeTraining?' CHECKED':'') +'>Include training troops in cities</td></tr>';
      str += '<TR><TD class=xtab></td><TD class=xtab colspan=4><INPUT type=CHECKBOX id=ptoverIncTrainExt'+ (Options.includeTrainingExt?' CHECKED':'') +'>Include total troop training</td></tr>';
      str += '<TR><TD class=xtab></td><TD class=xtab colspan=4><INPUT type=CHECKBOX id=ptOverOver'+ (Options.overviewAllowOverflow?' CHECKED':'') +'>Allow Overflow width \
         &nbsp; &nbsp; FONT SIZE: '+ htmlSelector ({9:9, 10:10, 11:11, 12:12}, Options.overviewFontSize, 'id=ptoverfont') +'</td></tr><BR>';
      str += "</table></div>";
      str += 'PowerKoc Version:' + Version;
      t.Overv.innerHTML = str;
      document.getElementById('idCheck').addEventListener('click', e_clickEnableMarch, false);
      document.getElementById('ptoverIncTrain').addEventListener('click', e_clickEnableTraining, false);
      document.getElementById('ptoverIncTrainExt').addEventListener('click', e_clickEnableTrainingExt, false);
      document.getElementById('ptOverOver').addEventListener('click', e_allowWidthOverflow, false);
      document.getElementById('ptoverfont').addEventListener('change', e_fontSize, false);
    //DebugTimer.display ('Draw Overview');    
    } catch (e){
      t.Overv.innerHTML = '<PRE>'+ e.name +' : '+ e.message +'</pre>';
    }   
    t.displayTimer = setTimeout (t.paintOld, 5000);	

    function e_clickEnableMarch (){
      var t = Tabs.OverView;
      Options.includeMarching = document.getElementById('idCheck').checked;
      t.paintOld ();
    }
    function e_clickEnableTraining (){
      var t = Tabs.OverView;
      Options.includeTraining = document.getElementById('ptoverIncTrain').checked;
      t.paintOld ();
    }
    function e_clickEnableTrainingExt (){
      var t = Tabs.OverView;
      Options.includeTrainingExt = document.getElementById('ptoverIncTrainExt').checked;
      t.paintOld ();
    }

    function e_fontSize(evt){
      document.getElementById('ptOverOutput').style.fontSize = evt.target.value +'px'; 
      Options.overviewFontSize = evt.target.value;
      t.paintOld ();
    }

    function e_allowWidthOverflow (evt){
      var t = Tabs.OverView;
      var tf = document.getElementById('ptOverOver').checked;
      Options.overviewAllowOverflow = tf;
      if (tf)
        t.Overv.style.overflowX = 'visible';
      else
        t.Overv.style.overflowX = 'auto';
      t.paintOld ();
    }
  },
};


/*************** March Tab **********/
Tabs.Attaque = {
 cont : null,
 displayTimer : null,
 tabLabel : 'Mutli attack',
 tabOrder : 12,
 tabDisabled : !ENABLE_TEST_TAB,
 state : null,
 curTabBut : null,
 curTabName : null,
 BOAttackTimer: null,
 sourceCity : {},
 destinationCity : {},
 rows : [],
 iused : new Array(),
 init : function (div){
   var t = Tabs.Attaque;
   t.cont = div;
   t.state = null;
   clearTimeout (t.displayTimer);
 },
  getContent : function (){
    var t = Tabs.Attaque;
    return t.cont;
  },
  hide : function (){
    var t = Tabs.Attaque;
    t.state = null;
    clearTimeout (t.displayTimer);
  },
  show : function (){  
    var t = Tabs.Attaque;
    var rownum = 0;
    var ModelCity = {};
    if (t.state == null) {  
         m = "<DIV class=ptstat><b>FAST SPEED TOOL</b></div>";
         m +="<div id='statpourRAA'></div>";       
         m += "<TABLE width=600 class=ptTab border=0 align=center>\
           <tr><td colspan=4 align=center><input type=button id=REEaction value='Scout'>&nbsp;<input type=button id=RAAaction value='attack'>&nbsp<input type=button id=RARaction value='Reasign'>&nbsp;<input type=button id=RENaction value='reinforcing'>&nbsp;<input type=button id=RENBaction value='Reinforce and Max. food'></td></tr><tr align=center valign=top><td width=130><b><u>From</b></u><br><span id=RAAsrcRptspeedcity></span></td>\
           <td><b><u>Destination</b></u><br>X:<input type=text id=RAAtypetrpx size=3>&nbsp;Y:<input type=text id=RAAtypetrpy size=3><br><a href='javascript:void(0);' id='BOchargelistelieux'>View Members</a> : <select id='listeFavori'></select></td>\
           <td><b><u>distance</u></b><br><span id='BOEstimationD'>&nbsp;</span><td><b><u>nearby city</u></b><br><span id=BOVilleProche></span>\
           </tr><tr align=center valign=top>\
           <td colspan=4 align=left><table border=0 bordercolor=black cellspacing=0 cellpadding=0 width=100% style='text-align:center'><tr><td rowspan=13><div id=RAAstatsource></div></td><td colspan=2><a href='javascript:void(0)' id=BO_RAZ_Units title='Clear' >troops selected</a></td><td>Attack time</td><td>Booster time</td></tr>";
            for (r=1; r<13; r++){
   	     m += '<tr><td align=right><img height=20 title="'+unsafeWindow.unitcost['unt'+r][0]+'" src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_'+r+'_30_s34.jpg></td><td align=left><input style="border:1px solid black;height:16px;font-size:11px;" id="RAAnbunit'+r+'" type=text size=7 value="0" ></td><td><span id="BOEstimationTT'+r+'">&nbsp;</span></td><td><span id="BOEstimationTZ'+r+'">&nbsp;</span></td></tr>';
      	}
      	var itemlist=[55,57,931,932];
	var BOitems="";
	for(var i=0;i<itemlist.length;i++){
		 BOitems += "<img src='http://kabam1-a.akamaihd.net/kingdomsofcamelot/fb/e2/src/img/items/30/"+itemlist[i]+".jpg' /><input type=checkbox id='BOitem_"+itemlist[i]+"'><span id='BOitemSpan_"+itemlist[i]+"'>" + unsafeWindow.ksoItems[itemlist[i]].count + "</span>&nbsp;";
        }
        m += "</table></td></tr>\
              <tr><td colspan=4>knight : <SELECT id='RAApiKnight' type=list></select> <br>"+BOitems+"</td></tr></table>\
              <DIV class=ptstat>Save settings of troops :</div><TABLE><tr><td colspan=2><select id=BO_AT_Fav></select><input type=button value='reset' id=BO_AT_Fav_Sup><input type=button value='reset all' id=BO_AT_Fav_RESET></td><td colspan=2>new : <input type=type id=BO_AT_Fav_Nom size=10 maxlength=12>&nbsp;<input type=button value='Save troops' id=BO_AT_Fav_ajou>\
              <tr><td colspan=4><div id=ptRAAStatus style='overflow-y:auto; max-height:50px; height: 50px;'></div></td></tr></table>\
              <DIV class=ptstat>Auto Attack</div><table></tr><tr><td><input type=button id='BOActiveAttack' value='ON : OFF' ></td><td colspan=3><span id='BOCompAttack'></span></tr>\
              <tr><td><b>Check in:</b> <input type=text size=7 id='BOHorloge' value='" + Options.AttackHorloge + "'></td><td><input type=button value='save' id='BOSaveAttack'></td><td><input type=button value='Editar' id='BOEditAttack' disabled></td></tr>\
              <tr><td colspan=4><span id='BOAttackProg'></span></td></tr></table>";
        t.cont.innerHTML = m; 
        t.statpourRAA = ById ('statpourRAA');
        //Gestion des favoris  
        t.Favoris = ById ('BO_AT_Fav');
	function metajourfavori() {
	       t.Favoris.innerHTML="<option value=''>...</option>";
	       var lisf = Options.AttackFav;
	       for (var m in lisf) {
	         var lis = lisf[m];
	          t.Favoris.innerHTML+="<option value='"+m+"'>"+lis[0]+"</option>";
      	       }  
	}
       ById("BO_AT_Fav_RESET").addEventListener ('click', function() {
		 Options.AttackFav={};
		 saveOptions(); 
         metajourfavori();
       }, false); 
       ById("BO_AT_Fav_Sup").addEventListener ('click', function() {
       numfav=ById("BO_AT_Fav").value;
       if (numfav!="") {
        Options.AttackFav[numfav]={};
        delete Options.AttackFav[numfav];
        //Options.AttackFav=unset(Options.AttackFav, numfav);
        saveOptions(); 
        metajourfavori();
       }
       }, false); 
 	  ById("BO_RAZ_Units").addEventListener ('click', function() {
  	for (r=1; r<13; r++) ById("RAAnbunit"+r).value=0; 
 	}, false); 
       ById("BO_AT_Fav_ajou").addEventListener ('click', function() {
        if (ById("BO_AT_Fav_Nom").value=="") {
         alert("Please fill in a name!");
         return;
        }
        var a =ById("BO_AT_Fav_Nom").value;
        Options.AttackFav[a]={};
        var lisf = Options.AttackFav[a];
        lisf[0]=ById("BO_AT_Fav_Nom").value;
        for (r=1; r<13; r++) lisf[r]=ById("RAAnbunit"+r).value;
        ById("BO_AT_Fav_Nom").value="";
        saveOptions(); 
	metajourfavori();
       }, false); 
       ById("BO_AT_Fav").addEventListener ('change', function() {
         numfav=ById("BO_AT_Fav").value;
         if (numfav=="") {
          for (r=1; r<13; r++) ById("RAAnbunit"+r).value=0; 
         }else {
          var lisf = Options.AttackFav[numfav];
          for (var m in lisf) {
           if(m>0)
	    if (ById("RAAnbunit"+m)) ById("RAAnbunit"+m).value=lisf[m];
	  }
         }
       }, false); 
       // Fin gestion des favoris
       ById("BOitem_55").addEventListener ('click', function() {
        ById("BOitem_57").checked=false;
        t.estimerRes();
       }, false);  
       ById("BOitem_57").addEventListener ('click', function() {
              ById("BOitem_55").checked=false;
              t.estimerRes();
       }, false);
        t.statutRAA = ById ('ptRAAStatus');
        t.destinationCityx = ById ('RAAtypetrpx');
        t.destinationCityy = ById ('RAAtypetrpy');
        t.destinationCityx.value = Options.Xrenfort;
        t.destinationCityy.value = Options.Yrenfort;
        if (ById ('maparea_map').style.display!="none") {
         t.destinationCityx.value = ById ('mapXCoor').value;
         t.destinationCityy.value = ById ('mapYCoor').value;
        }
        t.listeFavoris = ById ('listeFavori');
        t.listeFavoris.addEventListener ('change', t.SelectFavoris, false);
        t.chargelistelieux = ById ('BOchargelistelieux');
        t.chargelistelieux.addEventListener ('click', t.chercherFavoris, false);
        t.actionREN = ById ('RENaction');
        t.actionRENB = ById ('RENBaction');
        t.actionREE = ById ('REEaction');
        t.actionRAA = ById ('RAAaction');
        t.actionRAR = ById ('RARaction');

  	t.actionREN.addEventListener ('click', function () { t.clickATTAQUEDo(2,0); }, false);
        t.actionRAA.addEventListener ('click',  function () { t.clickATTAQUEDo(4,0); }, false);
        t.actionRAR.addEventListener ('click',  function () { t.clickATTAQUEDo(5,0); }, false);
        t.actionRENB.addEventListener ('click',  function () { t.clickATTAQUEDo(2,1); }, false);
        t.actionREE.addEventListener ('click',  function () { t.clickATTAQUEDo(3,0); }, false);
        t.destinationCityx.addEventListener ('change', function () { t.estimerRes(); }, false);
        t.destinationCityy.addEventListener ('change', function () { t.estimerRes(); }, false);       
        var dcp0 = new CdispCityPicker ('ptRAA0', ById('RAAsrcRptspeedcity'), false, t.clickRAACitySourceSelect, Cities.byID[unsafeWindow.currentcityid].idx);
        t.state = 1;
        t.estimerRes();
        t.BOAttackProg = ById ('BOAttackProg');
        t.BOHorloge = ById ('BOHorloge');
        t.BOSaveAttack = ById ('BOSaveAttack');
        t.BOEditAttack = ById ('BOEditAttack');
        t.BOCompAttack = ById ('BOCompAttack');
        t.BOActiveAttack  = ById ('BOActiveAttack');
        t.BOActiveAttack.addEventListener ('click', t.AutoattackOnOff, false);
        
        t.BOSaveAttack.addEventListener ('click', function () {
        
          var itemlist=[55,57,931,932];
	  for(var i=0;i<itemlist.length;i++){
	        ById('BOitemSpan_'+itemlist[i]).checked=false;
          }
        
         t.enregistreAttack();
        
        }, false);
        if (Options.AttackCibleX!=0 && Options.AttackCibleY!=0) {
         t.BOEditAttack.disabled=false;
        }
        t.BOEditAttack.addEventListener ('click', function () { 
          t.destinationCityx.value = Options.AttackCibleX;
          t.destinationCityy.value = Options.AttackCibleY;
          ById("RAApiKnight").value=Options.AttackKnight;
          nHtml.Click(ById("ptRAA0_"+Cities.byID[Options.AttackFromCity].idx)); 
          for (r=1; r<13; r++) {
	      ById("RAAnbunit"+r).value=Options.AttackUnits[r-1];
          }
        }, false);
        
        metajourfavori();
        if (Options.AttackOnOff) {
          t.BOActiveAttack.value='ENABLED : ON';
    	  t.activeAttack();
        }
       }

    },
    AutoattackOnOff:function() {
     // click click sur le bouton Activer le compte    rebour !
     var t = Tabs.Attaque;
     t.BOCompAttack.innerHTML='';
     clearTimeout (t.BOAttackTimer);
     if (t.BOActiveAttack.value=='ENABLED : OFF') {
    	t.BOActiveAttack.value='ENABLED : ON';
    	     Options.AttackOnOff = true;
    	     saveOptions();  
    	     t.activeAttack();
    	     
    	    } else {
    	     Options.AttackOnOff = false;
    	     saveOptions();  
    	     t.BOActiveAttack.value='ENABLED : OFF';   
    }   
    },
    activeAttack:function() {
     var t = Tabs.Attaque;
     clearTimeout (t.BOAttackTimer);
     if (Options.AttackGoHorloge) {
       var depart=new Date()
       depart.setTime(Options.AttackGoHorloge);
       var now = unixTime()*1000;
       if (now >= Options.AttackGoHorloge) {
	t.BOCompAttack.innerHTML='<center><font color=red>LAUNCH ATTACK MADE</font></center>';
	t.destinationCityx.value = Options.AttackCibleX;
	t.destinationCityy.value = Options.AttackCibleY;
	ById("RAApiKnight").value=Options.AttackKnight;
	nHtml.Click(ById("ptRAA0_"+Cities.byID[Options.AttackFromCity].idx));
	for (r=1; r<13; r++) {
	   ById("RAAnbunit"+r).value=Options.AttackUnits[r-1];
          }
      t.clickATTAQUEDo(4,0);
      clearTimeout (t.BOAttackTimer);
      Options.AttackGoHorloge=null;
      saveOptions();  
     }
     if (now > depart.getTime()) {
         t.BOCompAttack.innerHTML='<center><font color=red>IMPOSIBLE</font></center>';
         clearTimeout (t.BOAttackTimer);
       	 Options.AttackGoHorloge=null;
         saveOptions();  
         return false;
     }
       
     t.BOAttackTimer=setTimeout(function(){
        var depart=new Date();
	depart.setTime(Options.AttackGoHorloge);
        var now = unixTime()*1000;
        var tempsrestant = depart.getTime() - now;
        t.BOCompAttack.innerHTML='<center><font color=red><b>IN ATTACK '+timestr(tempsrestant/1000)+'</b></font></center>';
        t.activeAttack();
      },1000);
     }
    
    },
    enregistreAttack : function() {
     var t = Tabs.Attaque; 
     if (t.BOHorloge.value.match("^[0-9]{2}:[0-9]{2}:[0-9]{2}$")) {
       var horloge = t.BOHorloge.value;
       Options.AttackHorloge = horloge;
       
       var ndate=new Date();
       ndate.setHours(horloge.substr(0,2));
       ndate.setMinutes(horloge.substr(3,2));
       ndate.setSeconds(0);
       var atunits=new Array();
       for (r=1; r<13; r++) {
          atunits.push(parseInt(ById("RAAnbunit"+r).value));
       }
       Options.AttackUnits = atunits;
       Options.AttackFromCity = t.sourceCity.id;
       Options.AttackKnight = ById("RAApiKnight").value;
       Options.AttackCibleX = t.destinationCityx.value;
       Options.AttackCibleY = t.destinationCityy.value;
       
       var x1 = parseInt(t.sourceCity.x);
       var x2 = parseInt(t.destinationCityx.value);
       var y1 = parseInt(t.sourceCity.y);
       var y2 = parseInt(t.destinationCityy.value);
       var dist = distance (x1, y1, x2, y2);  
       var tempplusgrand=0;
       for (r=1; r<13; r++){
         if (parseInt(ById("RAAnbunit"+r).value)>0) {
               var m = estETA(dist, r, t.sourceCity.id);
               if (tempplusgrand<m.ETA) tempplusgrand=m.ETA;   
         }
       }
       var departtime=ndate.getTime() - (tempplusgrand*1000);
       var depart=new Date()
       depart.setTime(departtime);
       
       var now = unixTime()*1000;
       if (now > depart.getTime()) {
        t.BOAttackProg.innerHTML = "Undeliverable !";
        return false;
       }
       Options.AttackGoHorloge =  depart.getTime();
       saveOptions ();
       t.BOAttackProg.innerHTML = "attack on " + Options.AttackCibleX + ","+ Options.AttackCibleY +" defensive";
       t.BOEditAttack.disabled=false;
     } else {
      t.BOAttackProg.innerHTML = "Wrong time format.";
     }     
    
    },
    clickATTAQUEDo: function(typemarche, bouffe) {
      var t = Tabs.Attaque;  
      var totalunit=0;
      if (typemarche==3 && ById("RAAnbunit3").value==0) ById("RAAnbunit3").value=1;
      for (r=1; r<13; r++){
         if (typemarche==3 && r!=3) {
          ById("RAAnbunit"+r).value=0;
         }
          if (parseInt(ById("RAAnbunit"+r).value) > parseInt(ById("RAAdestunit"+r).value)) {
            ById("RAAnbunit"+r).style.backgroundColor="red";
            return false;
          }
          totalunit=totalunit+parseInt(ById("RAAnbunit"+r).value);
          ById("RAAnbunit"+r).style.backgroundColor="";
      }
      var errMsg = "";
      if (isNaN (t.destinationCityx.value) ||t.destinationCityx.value<0 || t.destinationCityx.value>749)
            errMsg = "X coordinates must be between 0 and 749<BR>"; 
      if (isNaN (t.destinationCityy.value) || t.destinationCityy.value<0 || t.destinationCityy.value>749)
       errMsg += "Y coordinates must be between 0 and 749<br>";
      
      if (ById("RAApiKnight").value==0 && typemarche==4) {
       errMsg += "Knight unselected!<BR>"; 
      }
      
      if (errMsg != "") {
           t.statutRAA.innerHTML = "<FONT COLOR=#550000>"+ errMsg +"</font>";
           return;
      }
      
      var x=t.destinationCityx.value;
      var y=t.destinationCityy.value;
      // On sauvegardes les coordonnes en cas de F5
      t.SaveCoordsOptions(x,y);
      
      
      // Les objets pour l'attaque !
      var e=1;
      var f=unsafeWindow.unixtime();
      if(Seed.playerEffects.aurasExpire){
      if(Seed.playerEffects.aurasExpire>f){e=1.15}}
      if(Seed.playerEffects.auras2Expire){if(Seed.playerEffects.auras2Expire>f){e=1.3}}

     var l_elem=ById("BOitem_931");
     if(l_elem&&l_elem.checked&&parseInt(Seed.items["i931"])>0){
       e+=0.25;
      
     }
     var l_elem=ById("BOitem_932");
     if(l_elem&&l_elem.checked&&parseInt(Seed.items["i932"])>0){
       e+=0.5;
     }
       
      var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
      
      if (totalunit==0) {
         t.statutRAA.innerHTML = '<FONT COLOR=#550000>There are no troops available!</font>';
           return;
      }
      var niveauPointRall=parseInt(getCityBuilding (t.sourceCity.id, 12).maxLevel); // 12=Point de ralliement
         var maxtroupe=parseInt(niveauPointRall*10000*e);
         if (niveauPointRall==11) maxtroupe=parseInt(150000*e);
         if (niveauPointRall==12) maxtroupe=parseInt(200000*e);
      if (totalunit>maxtroupe) {
       t.statutRAA.innerHTML = '<FONT COLOR=#550000>You can only send '+maxtroupe+' troops.</font>';
       return;
      }
      var iused=new Array();
      var itemlist=[55,57,931,932];
      for(var i=0;i<itemlist.length;i++){
      
       var l_elem=ById("BOitem_"+itemlist[i]);
       if(l_elem&&l_elem.checked&&parseInt(Seed.items["i"+itemlist[i]])>0){
        iused.push(itemlist[i]);       
       }      
      }
      var res=0;
      if (bouffe==1) {
       for (var i=1;i<13;i++) {
        res += parseInt(unsafeWindow.unitstats['unt'+i][5] * ById("RAAnbunit"+i).value * (1 + (0.10 * Seed.tech.tch10)));
       }
       }
      params.items=iused.join(","); 
         params.cid= t.sourceCity.id;
         params.type = typemarche; // 5 = REASSIGNER - 4 = ATTAQUE - 2 = RENFORCER
         params.xcoord = x;
         params.ycoord = y;
   	 params.kid= ById("RAApiKnight").value;
	 params.r1 = res; 
	 params.r2 = 0; 
	 params.r3 = 0; 
	 params.r4 = 0; 
	 params.gold = 0; 
	 params.u1 = 0;
  	 params.u2 = 0;
  	 params.u3 = 0;
  	 params.u4 = 0;
  	 params.u5 = 0;
  	 params.u6 = 0;
  	 params.u7 = 0;
  	 params.u8 = 0;
  	 params.u9 = 0;
  	 params.u10 = 0;
  	 params.u11 = 0;
 	 params.u12 = 0;
 
 
         if (typemarche!=3) {
        if (ById("RAAnbunit1").value>0) params.u1 = ById("RAAnbunit1").value;
	if (ById("RAAnbunit2").value>0) params.u2 = ById("RAAnbunit2").value;
	if (ById("RAAnbunit3").value>0) params.u3 = ById("RAAnbunit3").value;
	if (ById("RAAnbunit4").value>0) params.u4 = ById("RAAnbunit4").value;
	if (ById("RAAnbunit5").value>0) params.u5 = ById("RAAnbunit5").value;
	if (ById("RAAnbunit6").value>0) params.u6 = ById("RAAnbunit6").value;
	if (ById("RAAnbunit7").value>0) params.u7 = ById("RAAnbunit7").value;
	if (ById("RAAnbunit8").value>0) params.u8 = ById("RAAnbunit8").value;
	if (ById("RAAnbunit9").value>0) params.u9 = ById("RAAnbunit9").value;
	if (ById("RAAnbunit10").value>0) params.u10 = ById("RAAnbunit10").value;
	if (ById("RAAnbunit11").value>0) params.u11 = ById("RAAnbunit11").value;
	if (ById("RAAnbunit12").value>0) params.u12 = ById("RAAnbunit12").value;
	
	}else {
	 params.u3 = ById("RAAnbunit3").value;
	 ById("RAAnbunit3").value=0;
	}
  	t.actionRAA.disabled=true;
        t.actionREN.disabled=true;
        t.actionREE.disabled=true;
	t.statutRAA.innerHTML = "<i><b>Enviando marcha....</b></i>";
	new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/march.php" + unsafeWindow.g_ajaxsuffix, {
	              method: "post",
	              parameters: params,
	              loading: true,
	              onSuccess: function (transport) {
	                  var t = Tabs.Attaque;  
	                  var rslt = transport;
	                  if (rslt.ok) {
			   var timediff = parseInt(rslt.eta) - parseInt(rslt.initTS);
	                   var ut = unsafeWindow.unixtime();
	                   var unitsarr=[0,0,0,0,0,0,0,0,0,0,0,0,0];
	                   for(i = 0; i <= unitsarr.length; i++){
	                   	if(params["u"+i]){
	                  	unitsarr[i] = params["u"+i];
	                  	}
	                   }
	                   var resources=new Array();
	                   resources[0] = params.gold;
	                   for(i=1; i<=4; i++){
	                  	resources[i] = params["r"+i];
	                   }
	                   var currentcityid =  t.sourceCity.id;
	                   unsafeWindow.attach_addoutgoingmarch(rslt.marchId, rslt.marchUnixTime, ut + timediff, params.xcoord, params.ycoord, unitsarr, params.type, params.kid, resources, rslt.tileId, rslt.tileType, rslt.tileLevel, currentcityid, true);
	                   unsafeWindow.update_seed(rslt.updateSeed)
	                   if(rslt.updateSeed){unsafeWindow.update_seed(rslt.updateSeed)};
	                   
	                   for(var i=0;i<iused.length;i++){
						Seed.items["i"+iused[i]]=parseInt(Seed.items["i"+iused[i]])-1;unsafeWindow.ksoItems[iused[i]].subtract();
					   }
					    var typeattaque = "";
						switch (typemarche){
							case 2:
								typeattaque="reinforcement made";
								break;
							case 3:
								typeattaque="scouting  on";
								break;
							case 4:
								typeattaque="attack carried out";
								break;
							case 5:
								typeattaque="reallocation on";
								break;
							default:
								typeattaque="on march";
						}
     	 		   t.statutRAA.innerHTML = "<center><font size='3px'><b>"+typeattaque+"</b></font></center>";
	                   t.actionRAA.disabled=false;
	                   t.actionREE.disabled=false;
      			   t.actionREN.disabled=false;	
      			   t.clickRAACitySourceSelect(t.sourceCity);
	                  } else {
			    t.statutRAA.innerHTML ="<font color=red size='3px'><b>Error sending progress!<b></font>";
			     if (rslt.msg) {
			       t.statutRAA.innerHTML +="<br><font color=black size='2px'>" + rslt.msg +"</font>";
	         	     
	                     t.actionRAA.disabled=false;
      			     t.actionREN.disabled=false;
      			     t.actionREE.disabled=false;
      			     }else{
      			      t.statutRAA.innerHTML +="<br>Esperando 2 segundos!</font>";
         	     	      setTimeout(function() { t.clickATTAQUEDo(); }, 2000);
      			     }
	                  }
	                  },
	                  onFailure: function () {
	                    var t = Tabs.Attaque;
	                    t.statutRAA.innerHTML ="<font color=red size='3px'><b>Error communicating with the server!<b></font>";
	                    t.actionRAA.disabled=false;
      			    t.actionREN.disabled=false;
      			    t.actionREE.disabled=false;
	                  }
	          });
            
  
    },
  
    estimerRes: function() {
     var t = Tabs.Attaque;
     // CAlcul de ETA = Estimation du temps de marches
     var x1 = parseInt(t.sourceCity.x);
     var x2 = parseInt(t.destinationCityx.value);
     var y1 = parseInt(t.sourceCity.y);
     var y2 = parseInt(t.destinationCityy.value);
     var dist = distance (x1, y1, x2, y2);
     ById("BOEstimationD").innerHTML = '<b>' + dist + '</b>&nbsp;<a href="javascript:void(0)" onclick="cm.utils.CoordinateLinkController.onClick(event)" class="coordinateLink">('+ t.destinationCityx.value +','+ t.destinationCityy.value +')</a>';     
     for (r=1; r<13; r++){
        var m = estETA(dist, r, t.sourceCity.id);
        ById("BOEstimationTT"+r).innerHTML = "<b>" + m.etaStr + "</b>";
        ById("BOEstimationTZ"+r).innerHTML = "<b>" + m.friendEtaStr + "</b>";
     }
    var closestDist=999999;
	var closestLoc=null;
	var closestNum=1;
	for (var c=0; c<Cities.numCities; c++){
	var city = Cities.cities[c];
	var dist=distance(city.x,city.y,x2,y2);
	if(dist<closestDist) {
	 closestDist=dist;
	 closestLoc=city.x +','+ city.y;
	 closestNum=c+1;
	}
	}
	ById("BOVilleProche").innerHTML='<input type="submit" value="'+closestNum+'" class="ptcastleBut ptcastleButNon">'		
    },
    SelectFavoris:function() {
      var t = Tabs.Attaque;
      if (t.listeFavoris.value!='') {
       var valeur=t.listeFavoris.value;
       var x=valeur.substr(0, valeur.lastIndexOf(','));
       var y=valeur.substr(valeur.lastIndexOf(',')+1, valeur.length);
       t.destinationCityx.value = x;
       t.destinationCityy.value = y;
      }
      t.estimerRes();
     },
      chercherFavoris: function() {
      var t = Tabs.Attaque;
      var myA = getMyAlliance ();
      if (myA[0]!=0) {
         var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
         params.perPage = 100;
         params.allianceId = myA[0];
             new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/getUserLeaderboard.php" + unsafeWindow.g_ajaxsuffix, {
   	        method: "post",
   	        parameters: params,
   	        onSuccess: function (rslt) {
   	          // on vide la liste
   	          //t.listeFavoris.innerHTML=null;
   	          if (rslt.ok){
   	           var z=0;
   	           var m="";
   	           for (var i=0; i<rslt.results.length; i++){
        		      p = rslt.results[i];
   		      if (p.userId != 0){
   		       for (var c=0; c<p.cities.length; c++){
   		         if (Seed.player.name!=p.displayName) {
   		          m += "<option value='" + p.cities[c].xCoord + ","+ p.cities[c].yCoord+"'>" + p.displayName + " - City " + (c+1) + " - " + p.cities[c].xCoord + "," + p.cities[c].yCoord+"</option>";
   		         }
   		       }  //fin for cities  	       
   		      }   //fin if user 
         	            } //fin for resultat
         	    t.listeFavoris.innerHTML="<option value=''>Selection...</option>"+m;
   	          }// fin
   	        },
   	        onFailure: function (rslt) {
   	          t.listeFavoris.innerHTML="<option>Error collecting information</option>";
   	        },
       	});
             
      } else {
        // Si pas d'alliance !
        t.listeFavoris.innerHTML="<option>Error collecting information !</option>";
      }
         
  },
   SaveCoordsOptions: function(x,y) {
       Options.Xrenfort = x;
       Options.Yrenfort = y;
       saveOptions ();
  },
   
  clickRAACitySourceSelect : function (city){
     var t = Tabs.Attaque;
    
     if (t.sourceCity!=city) {
      t.sourceCity = city; 
     }
     var m="";
     m="<table cellspacing=0 cellpadding=0 width=80%><tr><td colspan=2>troops available</tr>";
     var cityID = 'city'+ t.sourceCity.id;
     for (r=1; r<13; r++){   
       m += '<tr><td align=right><img title="'+unsafeWindow.unitcost['unt'+r][0]+'" height=20 src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_'+r+'_30_s34.jpg></td>\
             <td align=left><input style="border:1px solid black;height:16px;font-size:11px;" id="RAAdestunit'+r+'" type=text size=7 readonly value="'+parseInt(Seed.units[cityID]['unt'+r])+'">&nbsp;\
             <input type=button value="--->" id="RAApdestunit'+r+'"  style="border:1px solid black;height:16px;font-size:11px;"></td></tr>';
     }
     m += "</table>";
     ById("RAAstatsource").innerHTML = m;
        var knt = new Array();
        for (k in Seed.knights['city' + t.sourceCity.id]){
               		if (Seed.knights['city' + t.sourceCity.id][k]["knightStatus"] == 1 && Seed.leaders['city' + t.sourceCity.id]["resourcefulnessKnightId"] != Seed.knights['city' + t.sourceCity.id][k]["knightId"] && Seed.leaders['city' + t.sourceCity.id]["politicsKnightId"] != Seed.knights['city' + t.sourceCity.id][k]["knightId"] && Seed.leaders['city' + t.sourceCity.id]["combatKnightId"] != Seed.knights['city' + t.sourceCity.id][k]["knightId"] && Seed.leaders['city' + t.sourceCity.id]["intelligenceKnightId"] != Seed.knights['city' + t.sourceCity.id][k]["knightId"]){
               			knt.push ({
               				Name:   Seed.knights['city' + t.sourceCity.id][k]["knightName"],
               				Combat:	Seed.knights['city' + t.sourceCity.id][k]["combat"],
               				ID:	Seed.knights['city' + t.sourceCity.id][k]["knightId"],
               			});
               		}
               }
               knt = knt.sort(function sort(a,b) {a = parseInt(a['Combat']);b = parseInt(b['Combat']);return a == b ? 0 : (a > b ? -1 : 1);}); 
               ById('RAApiKnight').options.length=0;
               var o = document.createElement("option");
     	       o.text = "--Select a Knight--"
     	       o.value = 0;
               ById("RAApiKnight").options.add(o);
               for (k in knt){
            			if (knt[k]["Name"] !=undefined){
        	    			var o = document.createElement("option");
        	    			o.text = (knt[k]["Name"] + ' (' + knt[k]["Combat"] +')')
        	    			o.value = knt[k]["ID"];
        	    			ById("RAApiKnight").options.add(o);
            			}
         }
     
      if (ById('RAApiKnight').options.length>0) {
       ById('RAApiKnight').selectedIndex=1;
      } 
      
      var itemlist=[55,57,931,932];
      for(var i=0;i<itemlist.length;i++){
        ById('BOitemSpan_'+itemlist[i]).innerHTML = unsafeWindow.ksoItems[itemlist[i]].count;
      }
     for (r=1; r<13; r++){
       ById("RAApdestunit"+r).addEventListener ('click', function() {
         var nomcha=this.id.replace("RAApdest","RAAdest");
         var nomcha2=this.id.replace("RAApdestunit","RAAnbunit");
         ById(nomcha2).value=0; 
         var e=1;
         var f=unsafeWindow.unixtime();
         if(Seed.playerEffects.aurasExpire){if(Seed.playerEffects.aurasExpire>f){e=1.15}}
	 if(Seed.playerEffects.auras2Expire){if(Seed.playerEffects.auras2Expire>f){e=1.3}}

         var l_elem=ById("BOitem_931");
	 if(l_elem&&l_elem.checked&&parseInt(Seed.items["i931"])>0){	        e+=0.25;	 }
	 var l_elem=ById("BOitem_932");
	 if(l_elem&&l_elem.checked&&parseInt(Seed.items["i932"])>0){	        e+=0.5;     }

         var niveauPointRall=parseInt(getCityBuilding (t.sourceCity.id, 12).maxLevel); // 12=Point de ralliement
         var maxtroupe=parseInt(niveauPointRall*10000*e);
         if (niveauPointRall==11) maxtroupe=parseInt(150000*e);
         if (niveauPointRall==12) maxtroupe=parseInt(200000*e);
         var nbunitto=0;
         for (r=1; r<13; r++) {
           nbunitto+=parseInt(ById("RAAnbunit"+r).value);
	 }
         var libre = parseInt(maxtroupe - nbunitto);
         if (ById(nomcha).value>=libre) {
           ById(nomcha2).value = libre;
         }  else {
           ById(nomcha2).value= ById(nomcha).value;
         }
        }, false);
     }
     if (t.sourceCity!=city) {
           for (r=1; r<13; r++){
            ById("RAAnbunit"+r).value="0";
           }
     } else {
          
          for (r=1; r<13; r++){
              if (ById("RAAnbunit"+r).value=="") ById("RAAnbunit"+r).value="0";
              if (ById("RAAdestunit"+r).value=="") ById("RAAdestunit"+r).value="0";
                if (parseInt(ById("RAAnbunit"+r).value)>parseInt(ById("RAAdestunit"+r).value)) {
                 ById("RAAnbunit"+r).value="0";
                }
           }
     }
     t.estimerRes();
   },
 
 
}


function estETA(dist, unit, cityID) {
	var ret={ETA:0,etaStr:'N/D',friendETA:0,friendEtaStr:'N/D'};    
	if (dist <= 0) return ret;
	var troop_type = unit;
	var horse=0;
	if(troop_type>6) horse=1;
	var troop_speed=parseInt(unsafeWindow.unitstats["unt"+troop_type][3])*(1+0.1*parseInt(Seed.tech.tch11));
	if (horse){
		troop_speed=troop_speed*(1+0.05*parseInt(Seed.tech.tch12))
	} 
	var Speed = troop_speed;
	var gi=unsafeWindow.cm.guardianModalModel.getMarchBonus();
	var multiplier=1+(gi*0.01);
	Speed=Speed*multiplier;
	var gSpeed = 0;
	var estSec;
	if (Speed>0) {
	  gSpeed = Speed/6000;
	  estSec = Math.ceil(parseFloat(dist)/gSpeed);
	}
	var e=1;
	if (ById("BOitem_55")) {
	  var l_elem=ById("BOitem_55");
	  if(l_elem&&l_elem.checked>0){ e=0.75;     }
	}
	if (ById("BOitem_57")) {
	  var l_elem=ById("BOitem_57");
	  if(l_elem&&l_elem.checked){   e=0.5;   }
	}
	ret.ETA = (parseInt((estSec*e+''))+30); 
	if(Seed.playerEffects.returnExpire>unsafeWindow.unixtime()){
	  ret.ETA=parseInt(ret.ETA*0.5);
	}
	ret.etaStr = timestr (ret.ETA,1);
	var building = getCityBuilding (cityID, 18);
	if (building) {
	  fSpeed = Speed * (1 + parseInt(building.maxLevel)/2);
	  gSpeed = fSpeed/6000;
	  estSec = (dist/gSpeed).toFixed(0);
	  ret.friendETA = parseInt((estSec*e+''))+30; 
	  ret.friendEtaStr = timestr ((ret.friendETA+''),1);
	}
	return ret;
}

/********************************* Reports Tab *************************************/
Tabs.Rpt = {
	tabOrder:    29,
	tabLabel:    'Reports',
	cont:        null,
	state:       null,
	minPages:    parseInt(Options.arPageFrom),
	maxPages:    parseInt(Options.arPageTo),
	data:        [],
        dataDF:	     [],
        dataAT:	     [],
	report:      [],
	reportDF:    [],
	reportAT:    [],
	totalPages:  parseInt(Options.arPageTo),
	what:        '',
	whatNot:     '',
	content:     '',

  show : function () {

    var t = Tabs.Rpt;
  },
	hide : function (){
  	},

	init: function (div){
		var t = Tabs.Rpt;
		t.cont=div;
		unsafeWindow.getmsg = t.getMailBody;
		unsafeWindow.getReport = t.getReportBody;
		unsafeWindow.DelMail = t.DeleteMail;
		unsafeWindow.DelReport = t.DeleteReport;

		var tc = '<DIV class=ptstat>RESEARCH REPORTS ALLIANCE AND PLAYER</DIV><DIV class=ptentry><TABLE><TR align=center valign=center>';
		tc += '<TD class=xtab align=right>type:&nbsp;<SELECT id="idRptType">';
		tc += '<OPTION value="alliance" ' + (Options.rptType=='alliance'?'SELECTED':'') + '>Alliance</OPTION>';
		tc += '<OPTION value="player" ' + (Options.rptType=='player'?'SELECTED':'') + '>player</OPTION>';
		tc += '<OPTION value="inbox" ' + (Options.rptType=='inbox'?'SELECTED':'') + '>inbox</OPTION>';
		tc += '<OPTION value="outbox" ' + (Options.rptType=='outbox'?'SELECTED':'') + '>outbox</OPTION></SELECT>';
		tc += '<BR />Pages:&nbsp;<INPUT id="idRptPageFrom" size=1 value="' + Options.arPageFrom + '">&#8211;<INPUT id="idRptPageTo" size=1 value="' + Options.arPageTo + '"></TD>';
		tc += '<TD class=xtab align=right>attacker:&nbsp;<SELECT id="idRptAttacker">'; // Options.arPageFrom - Options.arPageTo
		tc += '<OPTION value="Them" ' + (Options.arAttacker=='Them'?'SELECTED':'') + '>them</OPTION>';
		tc += '<OPTION value="Us" ' + (Options.arAttacker=='Us'?'SELECTED':'') + '>us</OPTION>';
		tc += '<OPTION value="Both" ' + (Options.arAttacker=='Both'?'SELECTED':'') + '>both</OPTION></SELECT>';
		tc += '<BR />target:&nbsp;<SELECT id="idRptTarget">';
		tc += '<OPTION value="Them" ' + (Options.arTarget=='Them'?'SELECTED':'') + '>them</OPTION>';
		tc += '<OPTION value="Us" ' + (Options.arTarget=='Us'?'SELECTED':'') + '>us</OPTION>';
		tc += '<OPTION value="Both" ' + (Options.arTarget=='Both'?'SELECTED':'') + '>both</OPTION></SELECT></TD>';
		tc += '<TD class=xtab align=right>contains:&nbsp;<INPUT id=idRptWhat type=text size=11 maxlength=50 value=""><BR />';
		tc += 'Target:&nbsp;<INPUT id=idRptWhatNot type=text size=11 maxlength=50 value=""></TD>';
		tc += '<TD class=xtab align=left><INPUT id=idRptAttack type=checkbox '+(Options.arAttack?'CHECKED':'')+' />&nbsp;Attack<BR />';
		tc += '<INPUT id=idRptScout type=checkbox '+(Options.arScout?'CHECKED':'')+' />&nbsp;scout</TD>';
		tc += '<TD class=xtab align=left><INPUT id=idRptReinforce type=checkbox '+(Options.arReinforce?'CHECKED':'')+' />&nbsp;reinforcement<BR />';
		tc += '<INPUT id=idRptTransport type=checkbox '+(Options.arTransport?'CHECKED':'')+' />&nbsp;Transportes</TD>';
		tc += '<TD class=xtab align=left><INPUT id=idRptSearch type=submit value="search" /></TD>';
		tc += '<TD class=xtab align=left><select id=idRptFiltre1><option value="">--</option><option value="0">TS</option><option value=54>FS</option></select><br>SYNTH : <input type=checkbox id=BOSyntheseAttack></TD></TR></TABLE></DIV>';
		tc += '<DIV class=ptstat><TABLE width=100% cellspacing=0><TR><TD class=xtab align=left width=125><DIV id=idRptSearched></DIV></TD></TD>';                    
		tc += '<TD class=xtab><TD class=xtab align=center><SPAN style="white-space:normal" id=idRptStatus>&nbsp;</span></TD></TD>';
		tc += '<TD class=xtab><TD class=xtab align=right width=125><DIV id=idRptFound></DIV></TD></TR></TABLE></DIV>';
		tc += '<DIV id="idRptResultsDiv" style="height:556px; max-height:556px; overflow-x:auto; overflow-y:auto; white-space:nowrap;"></DIV>';
		t.cont.innerHTML = tc;
		ById('idRptType').addEventListener ('change', t.handleRptType, false);
		ById('idRptPageFrom').addEventListener ('change', t.handleRptPages, false);
		ById('idRptPageTo').addEventListener ('change', t.handleRptPages, false);
		ById('idRptAttacker').addEventListener ('change', t.handleRptAttacker, false);
		ById('idRptTarget').addEventListener ('change', t.handleRptTarget, false);
		ById('idRptWhat').addEventListener ('keyup', t.handleRptWhat, false);
		ById('idRptWhatNot').addEventListener ('keyup', t.handleRptWhatNot, false);
		ById('idRptSearch').addEventListener ('click', t.handleRptSearch, false);
		ById('idRptFiltre1').addEventListener ('change', t.handleRptWhat, false);

		t.togOpt ('idRptAttack', 'arAttack');
		t.togOpt ('idRptScout', 'arScout');
		t.togOpt ('idRptReinforce', 'arReinforce');
		t.togOpt ('idRptTransport', 'arTransport');
		return this.cont;
	},

	DeleteMail: function(rptid, type) {
   var t = Tabs.Rpt;
   var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
   params.requestType="ACTION_ON_MESSAGES";
   params.selectedAction="delete";
   params.boxType=ById('idRptType').value;
   params.selectedMessageIds=rptid;

   new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/getEmail.php" + unsafeWindow.g_ajaxsuffix, {
         method: "post",
         parameters: params,
         onSuccess: function (rslt) {
           if (rslt.ok) {
           
           t.handleRptSearch();
           
           }
           if (notify)
             notify (rslt.errorMsg);
         },
         onFailure: function () {
           if (notify)
             notify ('AJAX ERROR');
         },
       });
  },
  
  DeleteReport: function(rptid, isUnread) {
   var t = Tabs.Rpt;
     
   var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
   params.s0rids = rptid;
   params.s1rids = '';
   params.cityrids = '';
   
   new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/deleteCheckedReports.php" + unsafeWindow.g_ajaxsuffix, {
         method: "post",
         parameters: params,
         onSuccess: function (rslt) {
           if (rslt.ok) {
           
           if (isUnread){
             unsafeWindow.seed.newReportCount = parseInt(unsafeWindow.seed.newReportCount) - 1;
             unsafeWindow.messages_notify_bug()
           } 
           //t.handleRptSearch();
           //t.DisplayRpt();
           }
    
         },
         onFailure: function () {
             t.handleRptSearch();
         },
       });
  },

	togOpt: function (checkboxId, optionName){
		var t = Tabs.Rpt;
		var checkbox = document.getElementById(checkboxId);
		checkbox.addEventListener ('change', eventHandler, false);
		function eventHandler (){
			Options[optionName] = this.checked;
			saveOptions();
			if (t.data.length > 0)
				if (Options.rptType == 'alliance' || Options.rptType == 'player')
					t.DisplayRpt();
				else
					t.DisplayMail();
		}
	},

	handleRptType: function(){
		var t = Tabs.Rpt;
		Options.rptType = document.getElementById("idRptType").value;
		saveOptions();
		document.getElementById("idRptSearched").innerHTML = '';
		document.getElementById("idRptStatus").innerHTML = '&nbsp;';
		document.getElementById("idRptFound").innerHTML = '';
		document.getElementById("idRptResultsDiv").innerHTML = '';
	},

	handleRptPages: function(){
		var t = Tabs.Rpt;
		t.minPages=parseInt(document.getElementById("idRptPageFrom").value);
		t.maxPages=parseInt(document.getElementById("idRptPageTo").value);
		if (t.maxPages < t.minPages) {
			t.maxPages = t.minPages;
			document.getElementById("idRptPageTo").value = t.maxPages;
		}
		Options.arPageFrom = t.minPages;
		Options.arPageTo = t.maxPages;
		saveOptions();
		t.totalPages=t.maxPages;
	},

	handleRptAttacker: function(){
		var t = Tabs.Rpt;
		Options.arAttacker = document.getElementById("idRptAttacker").value;
		saveOptions();
		if ((Options.rptType == 'alliance' || Options.rptType == 'player') && t.data.length > 0)
			t.DisplayRpt();
	},

	handleRptTarget: function(){
		var t = Tabs.Rpt;
		Options.arTarget = document.getElementById("idRptTarget").value;
		saveOptions();
		if ((Options.rptType == 'alliance' || Options.rptType == 'player') && t.data.length > 0)
			t.DisplayRpt();
	},

	handleRptWhat: function(){
		var t = Tabs.Rpt;
		t.what = document.getElementById("idRptWhat").value;
		if (t.data.length > 0)
			if (Options.rptType == 'alliance' || Options.rptType == 'player')
				t.DisplayRpt();
			else
				t.DisplayMail();
	},

	handleRptWhatNot: function(){
		var t = Tabs.Rpt;
		t.whatNot = document.getElementById("idRptWhatNot").value;
		if (t.data.length > 0)
			if (Options.rptType == 'alliance' || Options.rptType == 'player')
				t.DisplayRpt();
			else
				t.DisplayMail();
	},

	handleRptSearch: function(){
		var t = Tabs.Rpt;
		if (t.searchRunning){
			t.searchRunning = false;
			t.stopSearch ('Search canceled!');
			return;
		}
		t.handleRptPages();
		document.getElementById ('idRptSearch').value = 'stop search';
		document.getElementById('idRptStatus').innerHTML = 'looking page ' + t.minPages + 'of ' + t.maxPages;
		t.searchRunning = true;
		t.data=[];
		t.report = [];
		t.dataDF=[];
		t.dataAT=[];
		t.reportAT=[];
		t.reportDF = [];
		if (Options.rptType == 'alliance' || Options.rptType == 'player')
			t.getRpt(t.minPages);
		else
			t.getMail(t.minPages);
	},

	stopSearch: function (msg){
		var t = Tabs.Rpt;
		if (t.searchRunning || msg == 'Search canceled!')
			document.getElementById ('idRptStatus').innerHTML = '<FONT color=#ffaaaa>' + msg + '</FONT>';
		document.getElementById ('idRptSearch').value = 'start searching';
		t.searchRunning = false;
		if (Options.rptType == 'alliance' || Options.rptType == 'player')
			t.DisplayRpt();
		else
			t.DisplayMail();
	},

	getMail: function (pageNum){
		var t = Tabs.Rpt;
		var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
		params.pf=0;
		params.requestType="GET_MESSAGE_HEADERS_FOR_USER_INBOX";
		params.boxType = document.getElementById('idRptType').value;
		params.pageNo = pageNum;
		new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/getEmail.php" + unsafeWindow.g_ajaxsuffix, {
			method: "post",
			parameters: params,
			onSuccess: function (rslt) {
				t.getMailCallback(rslt, pageNum);
			},
			onFailure: function () {
			},
		}, false);
	},

	getMailCallback: function(rslt, page) {
		var t = Tabs.Rpt;
		if (rslt) {
			if (!rslt.ok) {
				document.getElementById("idRptStatus").innerHTML = '<FONT color=#ffaaaa>' + rslt.errorMsg + '</FONT>';
				return;
			}
			t.totalPages=parseInt(rslt.noOfPages);
			if (t.totalPages < t.maxPages)
				t.maxPages = t.totalPages;
			if (rslt.message && page) {
				var ml = rslt.message;
				if (rslt.messageCount > 0) {
					var rptkeys = unsafeWindow.Object.keys(ml);
					for (var i = 0; i < rptkeys.length; i++) {
						var rpt = ml[rptkeys[i]];
						rpt.page = page;
						t.data.push(rpt);
					}
				}
			}
			if (parseInt(page)+1 <= t.maxPages && t.searchRunning) {
				document.getElementById("idRptStatus").innerHTML = 'looking page ' + (parseInt(page)+1) + ' de ' + t.maxPages;
				t.getMail(parseInt(page)+1);
				if (t.data.length > 0)
					t.DisplayMail();
			} else if (page)
				t.stopSearch ('done!');
		}
	},

	getRpt: function (pageNum){
		var t = Tabs.Rpt;
		var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
		params.pageNo = pageNum;
		if (Options.rptType == 'alliance')
			params.group = "a";
		new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/listReports.php" + unsafeWindow.g_ajaxsuffix, {
			method: "post",
			parameters: params,
			onSuccess: function (rslt){
				t.getRptCallback (rslt, pageNum);
			},
			onFailure: function (rslt){
				t.getRptCallback (rslt, pageNum);
			},
		}, false);
	},

	getRptCallback: function(rslt, page){
		var t = Tabs.Rpt;
		if (rslt) {
			if (!rslt.ok) {
				document.getElementById("idRptStatus").innerHTML = '<FONT color=#ffaaaa>' + rslt.errorMsg + '</FONT>';
				return;
			}
			t.totalPages=parseInt(rslt.totalPages);
			if (t.totalPages < t.maxPages)
				t.maxPages = t.totalPages;
			if (rslt.arReports && page) {
				var ar = rslt.arReports;
			//	if (ar.length == 0)
			//		t.stopSearch('Empty pages found from page ' + page + ' onwards - Kabam glitch');
				var rptkeys = unsafeWindow.Object.keys(ar);
				for (var i = 0; i < rptkeys.length; i++) {
					var rpt = ar[rptkeys[i]];
					var reportId = parseInt(rpt.reportId);
					t.report[reportId] = [];

					// Attacker
					t.report[reportId].side1Name = rslt.arPlayerNames['p'+rpt.side1PlayerId];
					t.report[reportId].side1AllianceId = parseInt(rpt.side1AllianceId);
					if (rpt.side1AllianceId > 0)
						t.report[reportId].side1AllianceName = rslt.arAllianceNames['a'+rpt.side1AllianceId];
					else
						t.report[reportId].side1AllianceName = 'no alliance';
					if (rpt.side1CityId > 0)
						t.report[reportId].side1CityName = rslt.arCityNames['c'+rpt.side1CityId];
					else
						t.report[reportId].side1CityName = 'none';
					t.report[reportId].side1XCoord = rpt.side1XCoord;
					t.report[reportId].side1YCoord = rpt.side1YCoord;
					// Target
					if (parseInt(rpt.side0PlayerId) == 0) { // Kabam
						t.report[reportId].side0Name = 'Enemy';
						t.report[reportId].side0AllianceName = '';
						t.report[reportId].side0CityName = '';
					} else { // Player
						t.report[reportId].side0Name = rslt.arPlayerNames['p'+rpt.side0PlayerId];
						if (rpt.side0AllianceId > 0)
							t.report[reportId].side0AllianceName = rslt.arAllianceNames['a'+rpt.side0AllianceId];
						else
							t.report[reportId].side0AllianceName = 'no alliance';
						if (rpt.side0CityId > 0)
							t.report[reportId].side0CityName = rslt.arCityNames['c'+rpt.side0CityId];
						else
							t.report[reportId].side0CityName = 'none';
					}
					t.report[reportId].side0AllianceId = parseInt(rpt.side0AllianceId);
					t.report[reportId].side0XCoord = rpt.side0XCoord;
					t.report[reportId].side0YCoord = rpt.side0YCoord;
					if (parseInt(rpt.side0TileType) == 10)
						t.report[reportId].side0TileTypeText='grassland';
					else if (parseInt(rpt.side0TileType) == 11)
						t.report[reportId].side0TileTypeText='lake';
					else if (parseInt(rpt.side0TileType) == 20)
						t.report[reportId].side0TileTypeText='woods';
					else if (parseInt(rpt.side0TileType) == 30)
						t.report[reportId].side0TileTypeText='hill';
					else if (parseInt(rpt.side0TileType) == 40)
						t.report[reportId].side0TileTypeText='mountain';
					else if (parseInt(rpt.side0TileType) == 50)
						t.report[reportId].side0TileTypeText='plain';
					else if (parseInt(rpt.side0TileType) == 51 && parseInt(rpt.side0CityId) == 0)
						t.report[reportId].side0TileTypeText='Barb';
					else if (parseInt(rpt.side0TileType) == 54)
						t.report[reportId].side0TileTypeText='F.S.';
					else if (parseInt(rpt.side0CityId) ==0)
						t.report[reportId].side0TileTypeText='Barbaro';
					else
						t.report[reportId].side0TileTypeText='city';
					t.report[reportId].side0TileTypeLevel = t.report[reportId].side0TileTypeText + ' ' + rpt.side0TileLevel;
					t.report[reportId].side0TileType = rpt.side0TileType;
					t.report[reportId].side0TileLevel = rpt.side0TileLevel;
					t.report[reportId].page = page;
					t.report[reportId].reportUnixTime = rpt.reportUnixTime;
					if (rpt.side0AllianceId == parseInt(getMyAlliance()[0]))
						t.report[reportId].sideId = 0;
					else if (rpt.side1AllianceId == parseInt(getMyAlliance()[0])) {
						t.report[reportId].sideId = 1;
					} else { // if we're here then this is a player report from when they were in another alliance
						if (rpt.side0PlayerId == getMyUserId())
							t.report[reportId].sideId = 0;
						else if (rpt.side1PlayerId == getMyUserId())
							t.report[reportId].sideId = 1;
						else // shouldn't get here but we'll catch it if the report body is requested
							t.report[reportId].sideId = -1;
					}
					if (!ById("BOSyntheseAttack").checked && parseInt(rpt.side0TileType) == 54 && Options.rptType=='player') {
					    t.FindItemRpt(reportId, t.report[reportId].sideId, t.report[reportId].side0TileLevel);  
				        }
					if (ById("BOSyntheseAttack").checked && (rpt.marchType == 4 || rpt.marchType == 3))
					{
					    t.BOSyntheseAttack(reportId, t.report[reportId].sideId, 0);
					}

					if (rpt.marchType == 0)
						t.report[reportId].marchName = 'Desertion';
					else if (rpt.marchType == 1)
						t.report[reportId].marchName = 'Transport';
					else if (rpt.marchType == 2)
						t.report[reportId].marchName = 'Reinforce';
					else if (rpt.marchType == 3 || rpt.marchType == 11) {
						if (t.report[reportId].sideId == 0)
							t.report[reportId].marchName = 'Anti-Scout';
						else
							t.report[reportId].marchName = 'Scout';
					} else if (rpt.marchType == 4) {
						if (t.report[reportId].sideId == 0)
							t.report[reportId].marchName = 'Defend';
						else
							t.report[reportId].marchName = 'Attack';
					} else if (rpt.marchType == 10 || rpt.marchType == 9) {
					 t.report[reportId].marchName = 'Attack';
					} else
						t.report[reportId].marchName = '?';
					t.data.push ({
						reportId: reportId,
					});
				}
			}
			if (parseInt(page)+1 <= t.maxPages && t.searchRunning) {
				document.getElementById("idRptStatus").innerHTML = 'looking page ' + (parseInt(page)+1) + ' of ' + t.maxPages;
				t.getRpt(parseInt(page)+1);
				if (t.data.length > 0)
					t.DisplayRpt();
			} else if (page) {

				if (ById("BOSyntheseAttack").checked) {
				 t.stopSearch ('<a id=BOresumeAT style="color:#ffaaaa" onclick="javascript:void(0);"><u>Show summary of attacks</u></a>');
				 setTimeout(function() {
								 // ouverture du resume des rapports FS avec Items
								   ById("BOresumeAT").addEventListener ('click', t.AfficheResumeAtk, false);
				  }, 1000);
				} else {
				
				if (Options.rptType=='player') {
				 t.stopSearch ('<a id=BOresumeDF style="color:#ffaaaa" onclick="javascript:void(0);"><u>Show summary of Dark Forests</u></a>');
				 setTimeout(function() {
				 // ouverture du resume des rapports FS avec Items
				   ById("BOresumeDF").addEventListener ('click', t.AfficheResume, false);
				  }, 1000);
				 } else {
				  t.stopSearch ('completed !');
				 }
				}
                  }   
		}
	},

	AfficheResumeAtk:function() {
	 var t = Tabs.Rpt;
	 var puipui=new Array();
	 var fortmight = {u53: "4",u55: "7",u60: "1",u61: "2",u62: "3",    };
	 for (var ui = 1 ; ui<13; ui++)
		 puipui.push(unsafeWindow.unitmight['unt'+ui]);
	 puipui[52] = fortmight['u53'];
	 puipui[54] = fortmight['u55'];
	 puipui[59] = fortmight['u60'];
	 puipui[60] = fortmight['u61'];
	 puipui[61] = fortmight['u62'];
	 var messageBody="";
	 reportsSearched = t.dataAT.length;
	 reportsFound = 0;
         var tr0=0,tr1=0,tr2=0,tr3=0,tr4=0,tr5=0;
	 if (reportsSearched>0) {
	  messageBody +='<br><table width=98%><thead><th>player<br>Alliance</th><th><img src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/gold_30.png></th>\
	  <th><img src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/food_30.png></th><th><img src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/wood_30.png></th>\
	  <th><img src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/stone_30.png></th><th><img src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/iron_30.png></th>\
	  <th><img src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/aetherstone_30.png></th></thead><tbody>';
	  t.dataAT.sort(function(a, b){
		var sortA=a.nom,sortB=b.nom;
		if (sortA < sortB) return -1
		if (sortA > sortB) return 1
		return 0 
	  });
	 var datartp = [];
	 var nbrp=0;
	 for (var i=0; i<reportsSearched;i++) {
	  var idrapport=t.dataAT[i].reportId;
	  if ((t.what == '' || (t.dataAT[i].nom.search(t.what, "i") != -1)  || (t.dataAT[i].alliance.search(t.what, "i") != -1))
	      && (t.whatNot == '' || (t.dataAT[i].nom.search(t.whatNot, "i") != -1 && t.dataAT[i].alliance.search(t.whatNot, "i") != -1)))
	  {
	   
	   if (datartp[nbrp]==undefined) { 
	     datartp[nbrp]=[];
	     datartp[nbrp].nom = t.dataAT[i].nom;
	     datartp[nbrp].alliance = t.dataAT[i].alliance;
	     datartp[nbrp].res0=0;
	     datartp[nbrp].res1=0;
	     datartp[nbrp].res2=0;
	     datartp[nbrp].res3=0;
	     datartp[nbrp].res4=0;
	     datartp[nbrp].res5=0;
	     for (var z=1;z<64;z++) {
	      datartp[nbrp]['s1unit'+z] =0;
	      datartp[nbrp]['s0unit'+z] =0;
	     }
	   }  
	   if(datartp[nbrp].nom==t.dataAT[i].nom && datartp[nbrp].alliance==t.dataAT[i].alliance) {
	     datartp[nbrp].res0 += parseIntNan(t.reportAT[idrapport].res0);
	     datartp[nbrp].res1 += parseIntNan(t.reportAT[idrapport].res1);
	     datartp[nbrp].res2 += parseIntNan(t.reportAT[idrapport].res2);
	     datartp[nbrp].res3 += parseIntNan(t.reportAT[idrapport].res3);
	     datartp[nbrp].res4 += parseIntNan(t.reportAT[idrapport].res4);
	     datartp[nbrp].res5 += parseIntNan(t.reportAT[idrapport].res5);
	       for (var z=1;z<64;z++) {
	        datartp[nbrp]['s1unit'+z] += parseIntNan(t.reportAT[idrapport]['s1unit'+z]);
	        datartp[nbrp]['s0unit'+z] += parseIntNan(t.reportAT[idrapport]['s0unit'+z]);
	      }
	   } else {
	     nbrp++;
	     datartp[nbrp]=[];
	     datartp[nbrp].nom = t.dataAT[i].nom;
	     datartp[nbrp].alliance = t.dataAT[i].alliance;
	     datartp[nbrp].res0=0;
	     datartp[nbrp].res1=0;
	     datartp[nbrp].res2=0;
	     datartp[nbrp].res3=0;
	     datartp[nbrp].res4=0;
	     datartp[nbrp].res5=0;
	     datartp[nbrp].res0 += parseIntNan(t.reportAT[idrapport].res0);
	     datartp[nbrp].res1 += parseIntNan(t.reportAT[idrapport].res1);
	     datartp[nbrp].res2 += parseIntNan(t.reportAT[idrapport].res2);
	     datartp[nbrp].res3 += parseIntNan(t.reportAT[idrapport].res3);
	     datartp[nbrp].res4 += parseIntNan(t.reportAT[idrapport].res4);
	     datartp[nbrp].res5 += parseIntNan(t.reportAT[idrapport].res5);
	     for (var z=1;z<64;z++) {
	     	      datartp[nbrp]['s1unit'+z] =0;
	     	      datartp[nbrp]['s0unit'+z] =0;
	     	      datartp[nbrp]['s1unit'+z] += parseIntNan(t.reportAT[idrapport]['s1unit'+z]);
	     	      datartp[nbrp]['s0unit'+z] += parseIntNan(t.reportAT[idrapport]['s0unit'+z]);	     
	     }
	   }
	   }// fin du regrouppement
	  }
	  reportsSearched = datartp.length;
	  var tres=[0,0,0,0,0,0];
	  var perts1=[];var perts0=[];
	  for (var z=1;z<64;z++) { perts1[z]=0;perts0[z]=0; }
	  
	  for (var i=0; i<reportsSearched;i++) {
	   messageBody += '<tr><td>'+datartp[i].nom+'<br>'+datartp[i].alliance+'</td>';
	    for (var res=0;res<6;res++) {
	     messageBody += '</td><td align=right>';
	     var cb=0;
	     if (datartp[i]["res"+res] != undefined) {
	       cb=parseIntNan(datartp[i]["res"+res]);
	       tres[res]+=cb;
	     }
	     messageBody += addCommas(cb);
	    }
	    for (var z=1;z<64;z++) {
	     perts1[z]+=parseIntNan(datartp[i]['s1unit'+z]);
	     perts0[z]+=parseIntNan(datartp[i]['s0unit'+z]);
	    } 
	  }
	  messageBody += '</td></tr><tr><td><b>TOTAL : </td>';
	  for (var res=0;res<6;res++) messageBody +='<td align=right><b>'+addCommas(tres[res])+'</b></td>';
	  messageBody += "</tr></table>";
	  messageBody += "<br><table><thead><th width=120><b>your losses</b></th>";
	  for (var z=1;z<64;z++) {
	    if (perts1[z]>0) {
	      messageBody +='<th width=6%><img height=20 src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_'+z+'_30.jpg ';
	      if(z<14)
	        messageBody +='title="'+unsafeWindow.unitcost['unt'+z][0]+'"';
	      messageBody +='></th>';
	    }
	  }
	  messageBody +='<th></th></thead><tr><td>units</td>';
	  for (var z=1;z<64;z++) if (perts1[z]>0) messageBody +='<td align=right>'+ addCommas(perts1[z])+'</td>';
	  messageBody +='<td></td></tr><tr><td>'+uW.g_js_strings.commonstr.might+'</td>';
	  for (var z=1;z<64;z++) if (perts1[z]>0) messageBody +='<td align=right>'+ addCommas(parseIntNan(perts1[z])*parseIntNan(puipui[z-1]))+'</td>';
	  var to1=0;
	  messageBody +='<td></td></tr><tr><td>'+uW.g_js_strings.commonstr.might+' total</td>';
	  for (var z=1;z<64;z++) to1+=(parseIntNan(perts1[z])*parseIntNan(puipui[z-1]));
	  messageBody += "<td align=right><b>"+addCommas(to1)+"</b></td></tr><thead><th><b>their losses</b></th>";
	  for (var z=1;z<64;z++) {
	   if (perts0[z]>0) {
	      messageBody +='<th width=6%><img height=20 src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_'+z+'_30.jpg ';
	      if(z<14)
	        messageBody +='title="'+unsafeWindow.unitcost['unt'+z][0]+'"';
	      messageBody +='></th>';
	   }
	  }
	  messageBody +='<th></th></thead><tr><td>name</td>';
	  for (var z=1;z<64;z++) if (perts0[z]>0)messageBody +='<td align=right>'+ addCommas(parseIntNan(perts0[z]))+'</td>';
	  messageBody +='<td></td></tr><tr><td>'+uW.g_js_strings.commonstr.might+'</td>';
	  
	  for (var z=1;z<64;z++) if (perts0[z]>0)messageBody +='<td align=right>'+ addCommas(parseIntNan(perts0[z])*parseIntNan(puipui[z-1]))+'</td>';
	  var to2=0;
	  messageBody +='</tr><tr><td>'+uW.g_js_strings.commonstr.might+' total</td>';
	  for (var z=1;z<64;z++) to2+= (parseIntNan(perts0[z])*parseIntNan(puipui[z-1]));
	  messageBody +="<td align=right><b>"+addCommas(to2)+"</b></td></tr></table><br>";

	  if (to1<to2)
	    messageBody += "<br><b>Apart from might: <font color=#449944>"+addCommas((to2-to1))+"</font><br>";
	  if (to1==to2)
	    messageBody += "<br><b>No one lost power<br>";  
	   if (to1>to2)
	    messageBody += "<br><b>Apart from might: <font color=#994444>"+addCommas((to1-to2))+"</font><br>";  
	    
	 } else {
	  messageBody +="<br><center>The summary is not attack<br>";
	 }
	 t.popRapportAT = new CPopup('pbRapportATBody', 0, 0, 770, 500, true, function() {clearTimeout (1000);});
	 t.popRapportAT.centerMe (mainPop.getMainDiv());
	 var m = '<DIV style="max-height:465px; height:465px; overflow-y:scroll">';
	 m+= messageBody + '</div>';
	 t.popRapportAT.getMainDiv().innerHTML = m;
	 t.popRapportAT.getTopDiv().innerHTML = '<div class=showBadged><center><B>Summary reports of attacks</B></center></div>';
	 t.popRapportAT.show(true);
	},

	AfficheResume:function() {
	 var t = Tabs.Rpt;
	 var messageBody="";
	 reportsSearched = t.dataDF.length;
	 reportsFound = 0;
	 if (t.dataDF.length>0) {
	messageBody +='<br><center><table width=60%><thead><th>report</th><th>level</th><th colspan=2>Objet trouv&eacute;</th></thead><tbody>';
	for (var i=0; i<reportsSearched;i++) {
	var idrapport=t.dataDF[i].reportId;
	var rpt =  t.reportDF[idrapport];
	messageBody += '<tr><td align=right><a onclick="getReport('+ idrapport+')">'+idrapport+'</A></td><td>'+rpt.lvl+'</td><td><img width=30 src=https://kabam1-a.akamaihd.net/kingdomsofcamelot/fb/e2/src/img/items/70/' + rpt.item + '.jpg></td><td>'+unsafeWindow.ksoItems[rpt.item].name+'</td></tr>';
	}
	messageBody += "</tbody></table>";
	} else {
	messageBody +="<br><center>There were no reports of Dark forest<br>";
	}
	
	messageBody +='<br><input type=button value="Clear reporting forest" id=BODelAllDF></center>';
	
	
	t.popRapportDF = new CPopup('pbRapportDFBody', 0, 0, 500, 400, true, function() {clearTimeout (1000);});
	t.popRapportDF.centerMe (mainPop.getMainDiv());

	var m = '<DIV style="max-height:365px; height:4365px; overflow-y:scroll">';
	m+= messageBody + '</div>';
	t.popRapportDF.getMainDiv().innerHTML = m;	
        t.popRapportDF.getTopDiv().innerHTML = '<div class=showBadged><center><B>Summary reports '+unsafeWindow.g_js_strings.commonstr.darkForest+'</B></center></DIV>';
	t.popRapportDF.show(true);
	ById('BODelAllDF').addEventListener ('click', t.DeleteRptDF, false);
					
	},
	pagesasup:0,
	DeleteRptDF:function() {
	 var t = Tabs.Rpt;
	 t.pagesasup = 0;
	 t.fetchreport(0, t.checkreports);
	 t.popRapportDF.show(false);
	 t.popRapportDF.destroy();
	 t.popRapportDF = null;
	},
	 fetchreport : function(pageNo, callback){
		var t =  Tabs.Rpt;
		 if (t.pagesasup>=t.maxPages) return;
			var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
			if(pageNo > 1)
				params.pageNo = pageNo;
			new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/listReports.php" + unsafeWindow.g_ajaxsuffix, {
				method: "post",
				parameters: params,
				onSuccess: function (rslt) {
				        t.pagesasup++;
					callback(rslt);
				},
					onFailure: function () {
					t.pagesasup++;
					callback();
				},
			});
	    },
		
	    checkreports : function(rslt){
			var t = Tabs.Rpt;
			if(!rslt.ok){
				return;
			}
			if(rslt.arReports.length < 1){
				return;
			}
			var reports = rslt.arReports;
			var totalPages = rslt.totalPages;
			var deletes1 = new Array();
			for(k in reports){
					if(reports[k].side0TileType==54)
						deletes1.push(k.substr(2));
				
			}
			if(deletes1.length > 0 ){
				t.deleteCheckedReports(deletes1);
			} else {
				
				return;
			}
	    },

    	deleteCheckedReports : function(deletes1){
    		var t =  Tabs.Rpt;
    		var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
    		params.s1rids = deletes1.join(",");
    		params.cityrids = '';
    		new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/deleteCheckedReports.php" + unsafeWindow.g_ajaxsuffix, {
    			method: "post",
    			parameters: params,
    			onSuccess: function (rslt) {
    				if(rslt.ok){
    					Seed.newReportCount = parseInt(Seed.newReportCount) - parseInt(deletes1.length);
    				}
    				t.fetchreport(0, t.checkreports);
    				t.DisplayRpt();
    			},
    			onFailure: function () {
    			},
    		});
    },

    BOSyntheseAttack:function(reportId, sideId, lvl) {

     var t = Tabs.Rpt;
     var rpt = t.report[reportId];
     var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
     	  params.rid=reportId;
	  params.side=sideId;
     if (params.side > -1) {
     	   new AjaxRequest(unsafeWindow.g_ajaxpath+"ajax/fetchReport.php"+unsafeWindow.g_ajaxsuffix, {  method:"post",  parameters:params,
       
     	   onSuccess:function(msg){
     		var rslt = eval("(" + msg.responseText + ")");
     		t.dataAT.push ({reportId: reportId, nom:rpt.side0Name, alliance:rpt.side0AllianceName});
     		t.reportAT[reportId] = [];
     		t.reportAT[reportId].nom = rpt.side0Name;
     		t.reportAT[reportId].alliance = rpt.side0AllianceName;
     		t.reportAT[reportId].res0=0;
     		t.reportAT[reportId].res1=0;
     		t.reportAT[reportId].res2=0;
     		t.reportAT[reportId].res3=0;
     		t.reportAT[reportId].res4=0;
     		t.reportAT[reportId].res5=0;
     		if (rslt.loot) {
     		 if (rslt['loot'][0] !== undefined) t.reportAT[reportId].res0=rslt['loot'][0];
     		 if (rslt['loot'][1] !== undefined) t.reportAT[reportId].res1=rslt['loot'][1];
     		 if (rslt['loot'][2] !== undefined) t.reportAT[reportId].res2=rslt['loot'][2];
     		 if (rslt['loot'][3] !== undefined) t.reportAT[reportId].res3=rslt['loot'][3];
     		 if (rslt['loot'][4] !== undefined) t.reportAT[reportId].res4=rslt['loot'][4];
     		 if (rslt['loot'][6] !== undefined) t.reportAT[reportId].res5=rslt['loot'][6];
     	        }
     	        if (sideId==0) { // les pertes !!!!
     	         for (var zz=0;zz<6;zz++)
     	            t.reportAT[reportId]["res"+zz] = t.reportAT[reportId]["res"+zz] *-1;
     	        }
     	        if (rslt['fght'] != undefined){
     	        	if (rslt['fght']["s1"] != undefined) {
     	        		for (var i=1;i<13;i++) {
					if (rslt['fght']["s1"]['u'+i] != undefined) {
						if (sideId==1) t.reportAT[reportId]['s1unit'+i]=rslt['fght']["s1"]['u'+i][0] - rslt['fght']["s1"]['u'+i][1]; // perte 
						else t.reportAT[reportId]['s0unit'+i]=rslt['fght']["s1"]['u'+i][0] - rslt['fght']["s1"]['u'+i][1]; // perte 

					}else{
					 	if (sideId==1) t.reportAT[reportId]['s1unit'+i]=0;
						else t.reportAT[reportId]['s0unit'+i]=0;
					}
				}
				for (var i=53;i<=55;i++) {
					if (rslt['fght']["s1"]['f'+i] != undefined) {
						if (sideId==1) t.reportAT[reportId]['s1unit'+i] = rslt['fght']["s1"]['f'+i][0] - rslt['fght']["s1"]['f'+i][1];
						else t.reportAT[reportId]['s0unit'+i] = rslt['fght']["s1"]['f'+i][0] - rslt['fght']["s1"]['f'+i][1];
				
			 		}else{
			 			if (sideId==1) t.reportAT[reportId]['s1unit'+i]=0;
			 			else t.reportAT[reportId]['s0unit'+i]=0;
					}
			 	}
		 		for (var i=60;i<=63;i++) {
					if (rslt['fght']["s1"]['f'+i] != undefined) {
						if (sideId==1) t.reportAT[reportId]['s1unit'+i] = rslt['fght']["s1"]['f'+i][0] - rslt['fght']["s1"]['f'+i][1];
						else t.reportAT[reportId]['s0unit'+i] = rslt['fght']["s1"]['f'+i][0] - rslt['fght']["s1"]['f'+i][1];
				
					}else{
			 			if (sideId==1) t.reportAT[reportId]['s1unit'+i]=0;
			 			else t.reportAT[reportId]['s0unit'+i]=0;
					}
			 	}	
		 	}
     	         	if (rslt['fght']["s0"] != undefined) {
     	         		for (var i=1;i<13;i++) {
					if (rslt['fght']["s0"]['u'+i] != undefined) {
					  if (sideId==1) {
					   t.reportAT[reportId]['s0unit'+i]=rslt['fght']["s0"]['u'+i][0] - rslt['fght']["s0"]['u'+i][1]; // perte
					  }else{
					    t.reportAT[reportId]['s1unit'+i]=rslt['fght']["s0"]['u'+i][0] - rslt['fght']["s0"]['u'+i][1]; // perte
					  }
					} else {
					 if (sideId==1) {
					  t.reportAT[reportId]['s0unit'+i]=0;
					 } else {
					   t.reportAT[reportId]['s1unit'+i]=0;
					 }
					}
				}
     	         		for (var i=53;i<=55;i++) {
		 			if (rslt['fght']["s0"]['f'+i] != undefined) {
		 				if (sideId==1) {
		 					t.reportAT[reportId]['s0unit'+i] = rslt['fght']["s0"]['f'+i][0] - rslt['fght']["s0"]['f'+i][1];
		 				} else {
		 					t.reportAT[reportId]['s1unit'+i] = rslt['fght']["s0"]['f'+i][0] - rslt['fght']["s0"]['f'+i][1];
		 				}
		 			}else{
						if (sideId==1) t.reportAT[reportId]['s0unit'+i]=0;
						else t.reportAT[reportId]['s1unit'+i]=0;
					}
			 	}
		 		for (var i=60;i<=63;i++) {
		 			if (rslt['fght']["s0"]['f'+i] != undefined) {
		 				if (sideId==1) {
		 					t.reportAT[reportId]['s0unit'+i] = rslt['fght']["s0"]['f'+i][0] - rslt['fght']["s0"]['f'+i][1];
		 				} else {
		 					t.reportAT[reportId]['s1unit'+i] = rslt['fght']["s0"]['f'+i][0] - rslt['fght']["s0"]['f'+i][1];
		 				}
		 			}else{
			 			if (sideId==1) {
			 					t.reportAT[reportId]['s0unit'+i]=0;
			 				} else {
			 					t.reportAT[reportId]['s1unit'+i]=0;
						}
			 		}	
		 		}
			}
     	        }
     	        
        } });
      }  
    },

    FindItemRpt:function(reportId, sideId, lvl) {
	  var t = Tabs.Rpt;
	  var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
	  params.rid=reportId;
	  params.side=sideId;
	  if (params.side > -1) {
	   new AjaxRequest(unsafeWindow.g_ajaxpath+"ajax/fetchReport.php"+unsafeWindow.g_ajaxsuffix, {  method:"post",  parameters:params,
  
	   onSuccess:function(msg){
		var rslt = eval("(" + msg.responseText + ")");
		if (rslt.loot) {
			if (rslt['loot'][5] !== undefined) {
				var q=unsafeWindow.Object.keys(rslt['loot'][5]);
				if (q.length>0) {
			 			  for(var u=0,y=q.length;u<y;++u){
			 				C=q[u];
			 				if (unsafeWindow.ksoItems[C]!==undefined) {
			 				 t.dataDF.push ({reportId: reportId,});
			 				 t.reportDF[reportId] = [];
			 				 t.reportDF[reportId].lvl = lvl;
			 				 t.reportDF[reportId].item = C;
			 				}
			 			  }
			 	}
			
	          
	                    }
	          
	               }
	        }
            });
          }  
	
	},

	DisplayMail: function (){
		var t = Tabs.Rpt;
		var results = document.getElementById("idRptResultsDiv");
		if(!t.data.length) {
			results.innerHTML = '<center>nothing found</center>';
			return;
		}
		reportsSearched = t.data.length;
		reportsFound = 0;
		t.content = '';
		for (var i=0; i<reportsSearched;i++) {
			var rpt = t.data[i];
			if ((t.what == '' || (rpt.subject.search(t.what, "i") != -1) || (rpt.displayName.search(t.what, "i") != -1))
				&& (t.whatNot == '' || ((rpt.subject.search(t.whatNot, "i") == -1) && (rpt.displayName.search(t.whatNot, "i") == -1)))) {
                                if (rpt.subject == '')
					rpt.subject = '&lt;Sin titulo&gt;';
				reportsFound++;
				if (reportsFound == 1)
					t.content += '<center><table><thead><th>P</th><th>date</th><th>sender</th><th>title</th></thead><tbody>';
                                var stylee="";
				if (rpt.messageRead==0) stylee=' style="background-color:#CCCCCC;"';
				t.content += '<tr><td align=right '+stylee+'>'+rpt.page+'</td><td '+stylee+'>'+rpt.dateSent+'</td><td '+stylee+'>'+rpt.displayName+'</td>';
				t.content += '<td '+stylee+'><A><SPAN onclick="getmsg('+ rpt.messageId +')">' + rpt.subject + '</SPAN></a></td><td><a onclick="DelMail('+ rpt.messageId +');"><img src="http://cdn1.iconfinder.com/data/icons/musthave/16/Remove.png" border=0 title="Delete the message"></a></td></tr>';
			}
		}
		if (reportsFound > 1)
			t.content += '</tbody></table></center>';
		if (reportsFound == 0 && reportsSearched > 0)
			t.content = '<center>nothing found</center>';
		results.innerHTML = t.content;
		document.getElementById("idRptSearched").innerHTML = '&nbsp;Searching: ' + reportsSearched;
		document.getElementById("idRptFound").innerHTML = 'found: ' + reportsFound;
	},

	getMailBody: function(ID,dataI){
		var t = Tabs.Rpt;
		var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
		params.messageId=ID;
		params.requestType="GET_MESSAGE_FOR_ID";

		new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/getEmail.php" + unsafeWindow.g_ajaxsuffix, {
			method: "post",
			parameters: params,
			onSuccess: function (rslt) {
				if (rslt.ok)
					t.displayMailBody(rslt.messageBody);
			},
			onFailure: function () {},
		}, false);
	},

	displayMailBody: function (messageBody, ID) {
		var t = Tabs.Rpt;
		if (t.popMsg == null) {
		  t.popMsg = new CPopup('pbMailBody', 0, 0, 670, 600, true, function() {clearTimeout (1000);});
		  t.popMsg.centerMe (mainPop.getMainDiv());
		}
		messageBody=messageBody.replace(/custom-line-break/g,"<br>");
		var m = '<DIV style="max-height:565px; height:565px; overflow-y:scroll">';
		m+= messageBody + '<hr><a onclick="DelMail('+ ID +');"><img src="http://cdn1.iconfinder.com/data/icons/musthave/16/Remove.png" border=0 title="Delete the message"> delete</a><br></div>';
		t.popMsg.getMainDiv().innerHTML = m;
		t.popMsg.getTopDiv().innerHTML = '<div class=showBadged><center>message</center></div><br><hr>';
		t.popMsg.show(true);
	},

	DisplayRpt: function (){
		var t = Tabs.Rpt;
		var results = document.getElementById("idRptResultsDiv");
		if(!t.data.length) {
			results.innerHTML = '<center>nothing found</center>';
			return;
		}
		var myAllianceId = parseInt(getMyAlliance()[0]);
		reportsSearched = t.data.length;
		reportsFound = 0;
		t.content = '';
		for (var i=0; i<reportsSearched;i++) {
			var reportId = t.data[i].reportId;
			var rpt = t.report[reportId];
			if ((rpt.side0Name=='undefined') && (rpt.marchName != 'Desertion'))
				continue;
			if ((((myAllianceId == parseInt(rpt.side1AllianceId) && Options.arAttacker != 'Them')
				|| (myAllianceId != parseInt(rpt.side1AllianceId) && Options.arAttacker != 'Us')
				|| Options.arAttacker == 'Both')
				&& ((myAllianceId == parseInt(rpt.side0AllianceId) && Options.arTarget != 'Them')
				|| (myAllianceId != parseInt(rpt.side0AllianceId) && Options.arTarget != 'Us')
				|| Options.arTarget == 'Both')
				&& ((Options.arAttack && (rpt.marchName == 'Attack' || rpt.marchName == 'Defend'))
				|| (Options.arScout && (rpt.marchName == 'Scout' || rpt.marchName == 'Anti-Scout'))
				|| (Options.arReinforce && rpt.marchName == 'Reinforce')
				|| (Options.arTransport && rpt.marchName == 'Transport')))
				|| (rpt.marchName == 'Desertion')) {
				if (((t.what == ''
					|| (rpt.side1Name.search(t.what, "i") != -1)
					|| (rpt.side1AllianceName.search(t.what, "i") != -1)
					|| (rpt.side0Name.search(t.what, "i") != -1)
					|| (rpt.side0AllianceName.search(t.what, "i") != -1)
					|| (rpt.side0TileTypeText.search(t.what, "i") != -1))
					&& (t.whatNot == ''
					|| ((rpt.side1Name.search(t.whatNot, "i") == -1)
					&& (rpt.side1AllianceName.search(t.whatNot, "i") == -1)
					&& (rpt.side0Name.search(t.whatNot, "i") == -1)
					&& (rpt.side0AllianceName.search(t.whatNot, "i") == -1)
					&& (rpt.side0TileTypeText.search(t.whatNot, "i") == -1))))
					|| (rpt.marchName == 'Desertion')) {

					if ((ById("idRptFiltre1").value=="") ||   (rpt.side0TileType==54 && ById("idRptFiltre1").value==54)  ||
					    (rpt.side0TileType>0 && rpt.side0TileType<51 && ById("idRptFiltre1").value==0)) {


					reportsFound++;
					if (reportsFound == 1) {
						if (Options.enableReportNumber)
							t.content += '<center><table><thead><th>P</th><th>V.</th><th>date</th><th>report</th><th>attacker</th><th>from</th>';
						else
							t.content += '<center><table><thead><th>P</th><th>V.</th><th>date</th><th>attacker</th><th>from</th>';
						if (Options.arAttacker != 'Us')
							t.content += '<th>Alliance</th>';
						t.content += '<th>Action</th><th>objective</th><th>type</th><th>A</th>';
						if (Options.arTarget != 'Us')
							t.content += '<th>Alliance</th>';
						t.content += '<th>Dist</th><th>close</th></thead><tbody>';
					}
					var closestDist=999999;
					var closestLoc=null;
					var closestNum=1;
					for (var c=0; c<Cities.numCities; c++){
						var city = Cities.cities[c];
						city.x +','+ city.y
						var dist=distance(city.x,city.y,rpt.side0XCoord,rpt.side0YCoord);
						if(dist<closestDist) {
							closestDist=dist;
							closestLoc=city.x +','+ city.y;
							closestNum=c+1;
						}
					}
                                         if (rpt.marchName == 'Anti-Scout' || rpt.marchName == 'Defend')
					 style=' style="background-color:#EF9999;"';
					else if (rpt.marchName == 'Reinforce')
					 style=' style="background-color:#99EF99;"';
					else
					 style="";

					t.content += '<tr id="pkrpt'+ reportId +'"><td align=right '+style+'>'+rpt.page+'</td><td  align=right '+style+'><a onclick="getReport('+ reportId+')"><img  border=0 src="http://cdn1.iconfinder.com/data/icons/woothemesiconset/16/search_button.png"></a>';
					 if (rpt.side0Name==Seed.player.name || rpt.side1Name==Seed.player.name) {
					         t.content +='&nbsp;<a onclick="DelReport('+ reportId +', false);document.getElementById(\'pkrpt'+ reportId +'\').style.display=\'none\';"><img src="http://cdn1.iconfinder.com/data/icons/musthave/16/Remove.png" border=0 title="Delete my report"></a>';
        					}
					t.content += '</td><td '+style+'>'+formatUnixTime(rpt.reportUnixTime,'24hour')+'</td>';
					if (Options.enableReportNumber)
						t.content += '<td '+style+'>' + reportId + '</td>';
					if (rpt.marchName == 'Desertion') {
						t.content += '<td '+style+'></td><td '+style+'></td>';
						if (Options.arAttacker != 'Us')
							t.content += '<td '+style+'></td>';
						t.content += '<td '+style+'>'+rpt.marchName+'</td><td '+style+'></td><td '+style+'></td><td '+style+'></td>';
						if (Options.arAttacker != 'Us')
							t.content += '<td '+style+'></td>';
						t.content += '<td '+style+'></td><td '+style+'></td>';
						} else {
						t.content += '<td '+style+'>'+rpt.side1Name+'</td><td align=center '+style+'><A onclick="ptGotoMap('+ rpt.side1XCoord +','+ rpt.side1YCoord +')">'+ rpt.side1XCoord +','+ rpt.side1YCoord +'</a></td>';
						if (Options.arAttacker != 'Us')
							t.content += '<td '+style+'>'+rpt.side1AllianceName+'</td>';
						            if (rpt.marchName == 'Anti-Scout' || rpt.marchName == 'Scout')
						             t.content += '<TD '+style+'><A><SPAN onclick="getReport('+ reportId+')"><FONT color="FF8822">'+rpt.marchName+'</font></span></a></td>';
							    else if (rpt.marchName == 'Attack' || rpt.marchName == 'Defend')
                                                             t.content += '<TD '+style+'><A><SPAN onclick="getReport('+ reportId+')"><FONT color="FF1122">'+rpt.marchName+'</font></span></a></td>';
							    else if (rpt.marchName == 'Reinforce')
                                                             t.content += '<TD '+style+'><A><SPAN onclick="getReport('+ reportId+')"><FONT color="339933">'+rpt.marchName+'</font></span></a></td>';
	      					 	    else
                                                             t.content += '<TD '+style+'><A><SPAN onclick="getReport('+ reportId+')">'+rpt.marchName+'</span></a></td>';
						t.content += '<TD '+style+'>'+rpt.side0Name+'</td><TD '+style+'>'+rpt.side0TileTypeLevel+'</td>';
						t.content += '<td align=center '+style+'><A onclick="ptGotoMap('+ rpt.side0XCoord +','+ rpt.side0YCoord +')">'+ rpt.side0XCoord +','+ rpt.side0YCoord +'</a></td>';
						if (Options.arTarget != 'Us')
							t.content += '<td '+style+'>'+rpt.side0AllianceName+'</td>';
						t.content += '<td  align=right '+style+'>'+Math.floor(closestDist)+'</td><td align=center '+style+'><A onclick=\"ptGotoCity(' + closestNum + ')\">' + closestLoc + '</a></td></tr>';
					}
                                    }
				}
			}
		}
		if (reportsFound > 1)
			t.content += '</tbody></table></center>';
		if (reportsFound == 0 && reportsSearched > 0)
			t.content = '<center>nothing found</center>';
		results.innerHTML = t.content;
		document.getElementById("idRptSearched").innerHTML = '&nbsp;Searching: ' + reportsSearched;
		document.getElementById("idRptFound").innerHTML = 'found: ' + reportsFound;
	},

	getReportBody: function(reportId){
		var t = Tabs.Rpt;
		var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
		params.rid=reportId;
		params.side=t.report[reportId].sideId;
		if (params.side > -1) {
			new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/fetchReport.php" + unsafeWindow.g_ajaxsuffix, {
				method: "post",
				parameters: params,
				onSuccess: function (rslt) {
					t.displayReportBody(rslt,reportId);
				},
				onFailure: function (rslt) {},
			}, false);
		} else {
			unsafeWindow.alert ('I could not determine what kind of reports do - please send details to the developer');
		}
	},

	displayReportBody: function (rslt, reportId) {
		var t = Tabs.Rpt;
		var popReport = null;
		var rpt = t.report[reportId];
		var m = '';
		var fortmight = {u53: "4",u55: "7",u60: "1",u61: "2",u62: "3",    };
		var unitImg = [];
		var puipui=new Array();
		for (var ui = 1 ; ui<13; ui++)
		 puipui.push(uW.unitmight['unt'+ui]);
		puipui[53] = fortmight['u53'];
		puipui[55] = fortmight['u55'];
		puipui[60] = fortmight['u60'];
		puipui[61] = fortmight['u61'];
		puipui[62] = fortmight['u62'];
		ordre_grandeur=0;
		delta_perte=0;
		var perte_atk = 0;
		var perte_def = 0;
		for (var i=1;i<13;i++)
			unitImg[i] = '<img height=20 src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_'+i+'_30_s34.jpg title="'+uW.unitcost['unt'+i][0]+'"></TD><TD>' + uW.unitcost['unt'+i][0].substr(0,10);
		for (var i=101;i<111;i++)
			unitImg[i] = '<img height=20 src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_'+i+'_30.jpg title="'+uW.g_js_strings.monsterUnitsNames['m'+i]+'"></TD><TD>' + uW.g_js_strings.monsterUnitsNames['m'+i].substr(0,10);
	        unitImg[53] = '<img height=20 src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_53_30.png></TD><TD>'+ uW.fortcost.frt53[0];
		unitImg[55] = '<img height=20 src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_55_30.png></TD><TD>'+ uW.fortcost.frt55[0];
		unitImg[60] = '<img height=20 src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_60_30.png></TD><TD>'+ uW.fortcost.frt60[0];
		unitImg[61] = '<img height=20 src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_61_30.png></TD><TD>'+ uW.fortcost.frt61[0];
		unitImg[62] = '<img height=20 src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_62_30.png></TD><TD>' + uW.fortcost.frt62[0];
		goldImg = '<img src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/gold_30.png></TD><TD>' + uW.g_js_strings.commonstr.gold;;
		foodImg = '<img src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/food_30.png></TD><TD>' + uW.g_js_strings.commonstr.food;
		woodImg = '<img src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/wood_30.png></TD><TD>' + uW.g_js_strings.commonstr.wood;;
		stoneImg = '<img src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/stone_30.png></TD><TD>' + uW.g_js_strings.commonstr.stone;;
		oreImg = '<img src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/iron_30.png></TD><TD>' + uW.g_js_strings.commonstr.ore;;
		aetherstoneImg = '<img src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/aetherstone_30.png></TD><TD>'+ uW.g_js_strings.commonstr.aetherstone;

		function buildHeader () {
			var h='<TABLE class=ptTab width=100%>';
			h+='<TR valign=top><TD align=left width=10%><B>';
			if (rpt.marchName == 'Anti-Scout' || rpt.marchName == 'Scout')
			 h+=uW.g_js_strings.commonstr.location+" " + uW.g_js_strings.modal_messages_viewreports_view.antiscoutingat+' ';
			else if (rpt.marchName == 'scout')
				h+=uW.g_js_strings.modal_messages_viewreports_view.scoutrpt+' ';
			else if (rpt.marchName == 'Attack' || rpt.marchName == 'Defend')
				h+='Batalla en ';
			else if (rpt.marchName == 'Reinforce' || rpt.marchName == 'Transport')
				h+=rpt.marchName+' de<BR />'+rpt.marchName+' a</B>';
			else if (rpt.marchName == 'Transport')
			  h+=rpt.marchName+' desde<BR />'+uW.g_js_strings.modal_messages_viewreports_view.transpto+'</B>';
			if (rpt.side0TileTypeText == 'Barb')
				h+=' Barb camp level ' + rpt.side0TileLevel;
			else if (rpt.side0TileTypeText != 'City')
				h+=' '+rpt.side0TileTypeText+' level'+ rpt.side0TileLevel+' ';
			h+='</B>';

			if (rpt.marchName == 'Attack' || rpt.marchName == 'Defend' || rpt.marchName == 'Anti-Scout' || rpt.marchName == 'scout')
			 if (rslt['displayGlory']!==undefined)
			   h+='<br><B>'+uW.g_js_strings.commonstr.glory+' : <font color=red>'+rslt['glory']+'</font></B>';
				
			h+='</td>';
			if (rpt.marchName == 'Reinforce' || rpt.marchName == 'Transport') {
				h+='<TD align=left width=1%>';
				if (Seed.player.name != rpt.side1Name)
					h+=rpt.side1Name;
				if (Seed.player.name != rpt.side0Name)
					h+='<BR />'+rpt.side0Name;
				h+='</TD>';
			}
			h+='<TD align=left width=5%>';

			if (rpt.marchName == 'Reinforce' || rpt.marchName == 'Transport')
				h+='(<A onclick="ptGotoMap('+ rpt.side1XCoord +','+ rpt.side1YCoord +')">'+ rpt.side1XCoord +','+ rpt.side1YCoord +'</a>)<BR />';
			h+='(<A onclick="ptGotoMap('+ rpt.side0XCoord +','+ rpt.side0YCoord +')">'+ rpt.side0XCoord +','+ rpt.side0YCoord +'</a>)</TD>';

			if (rpt.side0TileTypeText != 'City' && rpt.side0TileTypeText != 'Barb' && (rpt.marchName == 'Attack' || rpt.marchName == 'Defense')) {
				if (rslt['conquered']==1)
					h+='<TD><FONT color="#CC0000"><B>'+uW.g_js_strings.commonstr.conquered+'</B></font></td>';
				else if (rslt['conquered']==0)
					h+='<TD><FONT color="#66CC33"><B>in the conquered</B></font></td>';
			} else if (rpt.marchName == 'Reinforce' || rpt.marchName == 'Transport') {
				h+='<TD align=left width=5%>'+rpt.side1CityName+'<BR />';
				if (rpt.side0CityName != '')
					h+=rpt.side0CityName+'</TD>';
				else
					h+=rpt.side0TileTypeText+' level '+ rpt.side0TileLevel+'</TD>';
			}
			h+='<TD align=right>' + formatUnixTime(rpt.reportUnixTime,'24hour') + '<BR />&nbsp;';
			if (rpt.side0Name==Seed.player.name || rpt.side1Name==Seed.player.name)
			  h+='<a onclick="DelReport('+ reportId +', false);ById(\'pkrpt'+ reportId +'\').style.display=\'none\';ById(\'pbShowOther_X\').click();"><img src="http://cdn1.iconfinder.com/data/icons/musthave/16/Remove.png" border=0 title="Delete my report"></a>';
			
			h+='&nbsp;'+uW.g_js_strings.modal_messages_viewreports_view.reportno+': ' + reportId + '</TD></TR></TABLE>';
			return h;
		}

		function handleunts () { // Troops sent to Reinforce or troops found on a Scout
			var hunts = '', th = '', tc = '', tf = '';
			if (rslt['unts'] != undefined) {
				if (rpt.marchName == 'Reinforce')
					th='<TABLE class=ptTab><TR><TH colspan=3 align=left>reinforcements sent</TH></TR>';
				else if (rslt['unts']['u1'] != undefined || rslt['unts']['u2'] != undefined || rslt['unts']['u3'] != undefined || rslt['unts']['u4'] != undefined || rslt['unts']['u5'] != undefined || rslt['unts']['u6'] != undefined || rslt['unts']['u7'] != undefined || rslt['unts']['u8'] != undefined || rslt['unts']['u9'] != undefined || rslt['unts']['u10'] != undefined || rslt['unts']['u11'] != undefined || rslt['unts']['u12'] != undefined)
					th='<TABLE class=ptTab><TR><TH colspan=3 align=left>'+uW.g_js_strings.commonstr.troops+'</TH></TR>';
				for (var i=1;i<13;i++)
					if (rslt['unts']['u'+i] != undefined)
						tc+='<TR><TD>' + unitImg[i] + '</TD><TD align=right>'+addCommas(rslt['unts']['u'+i])+'</TD></TR>';
				tf='</TABLE>';
			}
			if (tc != '')
				hunts = th + tc + tf;
			return hunts;
		}

		function handlersc () { // Resources brought with reinforcements or found on a Scout
			var hrsc = '', th = '', tc = '', tf = '';
			if (rslt['rsc']) {
				if (rslt['rsc']['r1'] > 0 || rslt['rsc']['r2'] > 0 || rslt['rsc']['r3'] > 0 || rslt['rsc']['r4'] > 0) {
					if (rpt.marchName == 'Reinforce')
						th='<TABLE class=ptTab><TR><TH colspan=3 align=left>resources sent</TH></TR>';
					else {
						th='<TABLE class=ptTab><TR><TH colspan=3 align=left>resources found</TH></TR>';
						if (rslt['gld'] > 0)
							tc+='<TR><TD>'+goldImg+'</TD><TD align=right>'+addCommasInt(rslt['gld'])+'</TD></TR>';
					}
					if (rslt['rsc']['r1'] > 0)
						tc+='<TR><TD>'+foodImg+'</TD><TD align=right>'+addCommasInt(rslt['rsc']['r1'])+'</TD></TR>';
					if (rslt['rsc']['r2'] > 0)
						tc+='<TR><TD>'+woodImg+'</TD><TD align=right>'+addCommasInt(rslt['rsc']['r2'])+'</TD></TR>';
					if (rslt['rsc']['r3'] > 0)
						tc+='<TR><TD>'+stoneImg+'</TD><TD align=right>'+addCommasInt(rslt['rsc']['r3'])+'</TD></TR>';
					if (rslt['rsc']['r4'] > 0)
						tc+='<TR><TD>'+oreImg+'</TD><TD align=right>'+addCommasInt(rslt['rsc']['r4'])+'</TD></TR>';
					tf='</TABLE>';
				}
			}
			if (tc != '')
				hrsc = th + tc + tf;
			return hrsc;
		}

		function handlefrt () { // Fortifications found on a Scout
			var hfrt = '', th = '', tc = '', tf = '';
			if (rslt['frt'] != undefined) {
				if (rslt['frt']['f53'] != undefined || rslt['frt']['f55'] != undefined || rslt['frt']['f60'] != undefined || rslt['frt']['f61'] != undefined || rslt['frt']['f62'] != undefined) {
					th='<TABLE class=ptTab><TR><TH colspan=3 align=left>Defensas Encontradas</TH></TR>';
					if (rslt['frt']['f53'])
						tc+='<TR><TD>' + unitImg[53] + '</TD><TD align=right>'+addCommas(rslt['frt']['f53'])+'</TD></TR>';
					if (rslt['frt']['f55'])
						tc+='<TR><TD>' + unitImg[55] + '</TD><TD align=right>'+addCommas(rslt['frt']['f55'])+'</TD></TR>';
					if (rslt['frt']['f60'])
						tc+='<TR><TD>' + unitImg[60] + '</TD><TD align=right>'+addCommas(rslt['frt']['f60'])+'</TD></TR>';
					if (rslt['frt']['f61'])
						tc+='<TR><TD>' + unitImg[61] + '</TD><TD align=right>'+addCommas(rslt['frt']['f61'])+'</TD></TR>';
					if (rslt['frt']['f62'])
						tc+='<TR><TD>' + unitImg[62] + '</TD><TD align=right>'+addCommas(rslt['frt']['f62'])+'</TD></TR>';
					tf='</TABLE>';
				}
			}
			if (tc != '')
				hfrt = th + tc + tf;
			return hfrt;
		}

		function handleblds (bType) {
		     if (rslt['blds'] != undefined) {
		
			var blds = rslt['blds']['b'+bType]; 
			var couleur='';
			if (bType==8) couleur=' style="background-color:red"';
			b = '<TR><TD '+couleur+'>'; arField = [], firstbld = true;
			b+=unsafeWindow.buildingcost["bdg"+bType][0]+'</TD><TD '+couleur+'>';
			for (var i=1; i<12; i++)
				arField[i]=0;
			for (var i=0; i < blds.length; i++)
				arField[blds[i]]++
			for (var i=11; i>0; i--) {
				if (arField[i] > 0) {
					if (firstbld)
						firstbld = false;
					else
						b+=', ';
					if (arField[i] > 1)
						b+=arField[i] + ' x ';
					b+=' ' + i;
				}
			}
			b+='</TD></TR>';
		       } else {
		        b='';
		       }
		       return b;
		}

    	if (t.popReport == null) {
		if (rpt.marchName == 'Reinforce') {
			t.popReport = new CPopup('pbShowRein', 0, 0, 425, 340, true, function() {clearTimeout (1000);});
			m+= '<DIV style="height:285px">';
		} else if (rpt.marchName == 'Transport') {
			t.popReport = new CPopup('pbShowTrans', 0, 0, 525, 240, true, function() {clearTimeout (1000);});
			m+= '<DIV style="height:185px">';
		} else if (rpt.marchName == 'Scout' && rslt['winner']==1 && rpt.sideId==1){
			t.popReport = new CPopup('pbShowOther', 0, 0, 600, 550, true, function() {clearTimeout (1000);});
			m+= '<DIV style="max-height:550px; height:550px; overflow-y:scroll">';
		} else {
			t.popReport = new CPopup('pbShowOther', 0, 0, 730, 380, true, function() {clearTimeout (1000);});
			m+= '<DIV style="max-height:730px; height:730px; overflow-y:scroll">';
		}
		t.popReport.centerMe (mainPop.getMainDiv());
	        t.popReport.autoHeight (true); 
              }
		m+=buildHeader();

		if (rpt.marchName == 'Transport') { // Transport
			m+='<TABLE class=ptTab>'; // Only transports have these in rslt, so handle them here
			if (parseInt(rslt['gold']) > 0)
				m+='<TR><TD>'+goldImg+'</TD><TD align=right>'+addCommas(rslt['gold'])+'</TD></TR>';
			if (parseInt(rslt['resource1']) > 0)
				m+='<TR><TD>'+foodImg+'</TD><TD align=right>'+addCommas(rslt['resource1'])+'</TD></TR>';
			if (parseInt(rslt['resource2']) > 0)
				m+='<TR><TD>'+woodImg+'</TD><TD align=right>'+addCommas(rslt['resource2'])+'</TD></TR>';
			if (parseInt(rslt['resource3']) > 0)
				m+='<TR><TD>'+stoneImg+'</TD><TD align=right>'+addCommas(rslt['resource3'])+'</TD></TR>';
			if (parseInt(rslt['resource4']) > 0)
				m+='<TR><TD>'+oreImg+'</TD><TD align=right>'+addCommas(rslt['resource4'])+'</TD></TR>';
			if (parseInt(rslt['resource5'])> 0)
				m+='<TR><TD>'+aetherstoneImg+'</TD><TD align=right>'+addCommas(rslt['resource5'])+'</TD></TR>';
			m+='</TABLE>';
		}

		m+='<TABLE class=ptTab>';
		if ((rslt['winner']==1 && rpt.sideId==0) || (rslt['winner']==0 && rpt.sideId==1)) {
			if (rpt.marchName == 'Scout')
				m+='<TR><TD><FONT color="#CC0000"><B>'+uW.g_js_strings.modal_messages_viewreports_view.scoutfail+'</B></font></TD></TR>';
			else
				m+='<TR><TD><FONT color="#CC0000"><B>'+uW.g_js_strings.commonstr.defeat+'</B></font></TD></TR>';
		}
		if (rslt['winner']==0 && rpt.sideId==0)
			m+='<TR><TD><FONT color="#66CC33"><B>'+uW.g_js_strings.commonstr.victory+' !</B></font></TD></TR>';
		if (rslt['winner']==1 && rpt.sideId==1)
			m+='<TR><TD><FONT color="#66BB33"><B>'+uW.g_js_strings.commonstr.victory+' !</B></font></TD></TR>';

		if (rslt['wall'] != undefined) {
		     if (rslt['wall'] > 0 && rslt['wall'] < 100)
				m+='<TR><TD>The attackers broke down the walls.</TD></TR>';
			else
				m+='<TR><TD>The attackers did not break the walls. The walls are '+rslt['wall']+'% damaged</TD></TR>';
		}
		m+= '</TABLE><BR />';
		if (rslt['wonGloryItem']) {
		  m+="<TABLE class=ptTab><TR><td><img width=30 src=https://kabam1-a.akamaihd.net/kingdomsofcamelot/fb/e2/src/img/items/70/" + rslt['wonGloryItem'] + ".jpg></td><td colspan=2>"+unsafeWindow.ksoItems[rslt['wonGloryItem']].name+"</td></tr></TABLE><BR />";
		}
		
		if (rslt['throneRoomDrop']) {
		  var A=rslt['throneRoomDrop'];
		  faction=A.faction;
		  if (unsafeWindow.kocThroneItems[rslt['throneRoomDrop'].id]) {
       	           var name=unsafeWindow.kocThroneItems[rslt['throneRoomDrop'].id].name;
       	         
		  m+="<TABLE class=ptTab><TR><td><img width=30 src=https://kabam1-a.akamaihd.net/kingdomsofcamelot/fb/e2/src/img/throne/icons/30/"+faction.replace('briton','britton')+"/"+faction.replace('briton','britton')+"_"+A.type+"_normal_1.png></td><td colspan=2>"+name+"</td></tr></TABLE><BR />";
		 }
		}


		if (rslt['loot'] != undefined) {
			m+='<TABLE class=ptTab>';
			if (rslt['loot'][0] > 0)
				m+='<TR><TD>'+goldImg+'</TD><TD align=right>'+addCommas(rslt['loot'][0])+'</TD></TR>';
			if (rslt['loot'][1] > 0)
				m+='<TR><TD>'+foodImg+'</TD><TD align=right>'+addCommas(rslt['loot'][1])+'</TD></TR>';
			if (rslt['loot'][2] > 0)
				m+='<TR><TD>'+woodImg+'</TD><TD align=right>'+addCommas(rslt['loot'][2])+'</TD></TR>';
			if (rslt['loot'][3] > 0)
				m+='<TR><TD>'+stoneImg+'</TD><TD align=right>'+addCommas(rslt['loot'][3])+'</TD></TR>';
			if (rslt['loot'][4] > 0)
				m+='<TR><TD>'+oreImg+'</TD><TD align=right>'+addCommas(rslt['loot'][4])+'</TD></TR>';
			if (rslt['loot'][6] > 0)
				m+='<TR><TD>'+aetherstoneImg+'</TD><TD align=right>'+addCommas(rslt['loot'][6])+'</TD></TR>';
			if (rslt['loot'][5] !== undefined) {
				var q=unsafeWindow.Object.keys(rslt['loot'][5]);
				if (q.length>0) {
				 for(var u=0,y=q.length;u<y;++u){
				 C=q[u];
				 if (unsafeWindow.ksoItems[C]!==undefined) 
				  m+="<TR><td><img width=30 src=https://kabam1-a.akamaihd.net/kingdomsofcamelot/fb/e2/src/img/items/70/" + C + ".jpg></td><td colspan=2>"+unsafeWindow.ksoItems[C].name+"</td></tr>";
			        }
			        }
				
			}
			m+='</TABLE><BR />';
		}

		if (rpt.marchName == 'Reinforce') {
			m+=handleunts();
			m+=handlersc();
		}

		if (rpt.marchName == 'Scout' && rslt['winner']==1) {
			m+='<TABLE class=ptTab width=100%><TR><TD width=50% align=left valign=top>';
			m+=handleunts();
			if (rpt.side0TileTypeText!='F.S.')  m+=handlefrt();
			m+=handlersc();
			m+='</TD><TD width=50% align=left valign=top>';
			if (rpt.side0TileTypeText!='F.S.') {
			m+='<TABLE class=ptTab width=100%>';
			if (rslt['lstlgn'] != undefined) {
				if (!rslt['lstlgn'])
					m+='<TR><TD>Last Login: unsaved</TD></TR>';
				else
					m+='<TR><TD>Last Login: ' + formatUnixTime(rslt['lstlgn']) + '</TD></TR>';
			}
			m+='<TR><TD>'+uW.g_js_strings.modal_messages_viewreports_view.knightskills+' : ';
			if (rslt['knt'] != undefined)
				m+=rslt['knt']['cbt'];
			else
				m+='None';
			m+='</TD></TR>';
			if (rslt['pop'] != undefined)
				m+='<TR><TD>Poblaci n: ' + addCommas(rslt['pop']) + '</TD></TR>';
			if (rslt['hap'])
				m+='<TR><TD>Felicidad: ' + addCommas(rslt['hap']) + '</TD></TR></TABLE>';
			 if (rslt['blds'] != undefined) {
				m+='<b><a id=BORptBatClick>'+uW.g_js_strings.commonstr.buildings+'</a></b><br><TABLE class=ptTab id=BORptBat style="display:none">';
				for (var i=0; i<53; i++)
					if (rslt['blds']['b'+i] != undefined)
						m+=handleblds(i);
				m+='</TABLE>';
			 }
			 if (rslt['tch'] != undefined) {
				m+='<b><a id=BORptRechercheClick>'+uW.g_js_strings.commonstr.technology+'</a></b><br><TABLE class=ptTab id=BORptRecherche style="display:none">';
				for (var tl=1; tl < 17; tl++)
					if (tl != 7)
						m+='</TD></TR><TR><TD>'+researchLevels[tl].Name+'</TD><TD align=right>' + rslt['tch']['t'+tl] + '</TD></TR>';
				m+='</TABLE>';
			 }
                      }
		       m+='</TD></TR></TABLE>';
		}

		if (rslt['fght'] != undefined){
			m+='<TABLE class=ptTab width=100%><TR><TD width=50% align=left valign=top>';
			m+='<TABLE class=ptTab width=100%>';
			m+='<TR><TD colspan=4><B>'+uW.g_js_strings.commonstr.attacker+'</B> ('+rpt.side1Name+')';
			if (rslt['winner']==1)
				m+='<FONT color="#CC0000"><B> '+uW.g_js_strings.commonstr.winner+'</B></FONT>';
			m+='</TD></TR>';
			if (rpt.marchName == 'Attack' || rpt.marchName == 'Defend')
				m+='<TR><TD colspan=4>'+uW.g_js_strings.modal_messages_viewreports_view.knightskills+' : ' + rslt['s1KCombatLv'] + '</TD></TR>';
			if (rslt['s1atkBoost']!== undefined)
			 if (100*rslt['s1atkBoost']>0)
			  m+='<TR><TD colspan=4>'+uW.g_js_strings.modal_messages_viewreports_view.attackboosted+' : ' + 100*rslt['s1atkBoost'] + '%</TD></TR>';
			if (rslt['s1defBoost']!== undefined)
			 if (100*rslt['s1defBoost']>0) 
			  m+='<TR><TD colspan=4>'+uW.g_js_strings.modal_messages_viewreports_view.defenseboosted+' : ' + 100*rslt['s1defBoost'] + '%</TD></TR>';
			if (rslt['s1lifeBoost']!== undefined)
			 if (100*rslt['s1lifeBoost']>0)
			  m+='<TR><TD colspan=4>Vie : ' + 100*rslt['s1lifeBoost'] + '%</TD></TR>';
			if (rslt['s1guardianDefBoost']!== undefined)
			 if (100*rslt['s1guardianDefBoost']>0)
			  m+='<TR><TD colspan=4>'+uW.g_js_strings.modal_messages_viewreports_view.guardian_defenseboosted+' : ' + 100*rslt['s1guardianDefBoost'] + '%</TD></TR>';
			if (rslt['s1guardianAtkBoost']!== undefined)
			 if ( 100*rslt['s1guardianAtkBoost']>0)
			  m+='<TR><TD colspan=4>'+uW.g_js_strings.modal_messages_viewreports_view.guardian_attackboosted+' : ' + 100*rslt['s1guardianAtkBoost'] + '%</TD></TR>';
			if (rslt['s1guardianMarchBoost']!== undefined)
			 if (100*rslt['s1guardianMarchBoost']>0)
			  m+='<TR><TD colspan=4>'+uW.g_js_strings.modal_messages_viewreports_view.guardian_marchboosted+' : ' + 100*rslt['s1guardianMarchBoost'] + '%</TD></TR>';
			m+='<TR><TD colspan=4><a href="javascript:void(0)" onclick="cm.utils.CoordinateLinkController.onClick(event)" class="coordinateLink">('+ rpt.side1XCoord +','+ rpt.side1YCoord +')</a> ' + rpt.side1CityName + '</TD></TR>';
			if (rslt['fght']["s1"] != undefined) {
				m+='<TR><TH></TH><TH align=left>'+uW.g_js_strings.commonstr.troops+'</TH><TH align=right>fought</TH><TH align=right>survived</TH><TH align=right>lost</TH></TR>';
				for (var i=1;i<13;i++) {
					if (rslt['fght']["s1"]['u'+i] != undefined) {
						if (rslt['fght']["s1"]['u'+i][0] > rslt['fght']["s1"]['u'+i][1]) {
							perte_atk= perte_atk +(rslt['fght']["s1"]['u'+i][0] - rslt['fght']["s1"]['u'+i][1])*puipui[i-1];
							m+='<TR><TD>' + unitImg[i] + '</td>';
							m+='<TD align=right>'+addCommas(rslt['fght']["s1"]['u'+i][0])+'</td>';
							m+='<TD align=right><FONT color="#CC0000">'+addCommas(rslt['fght']["s1"]['u'+i][1])+'</FONT></td>';
							m+='<TD align=right><FONT color="#CC0000">'+addCommas(rslt['fght']["s1"]['u'+i][0] - rslt['fght']["s1"]['u'+i][1])+'</FONT></td></tr>';
						} else {
							m+='<TR><TD>' + unitImg[i] + '</td>';
							m+='<TD align=right>'+addCommas(rslt['fght']["s1"]['u'+i][0])+'</td>';
							m+='<TD align=right>'+addCommas(rslt['fght']["s1"]['u'+i][1])+'</td></tr>';
						}
					}
				}
			}
			m+='</TABLE><br>';
			// Bonus divers ^^^
			if (rslt['s1ThroneRoomBoosts']) {
			m+='<b><a id=BORptS1ThroneClick>Bonds throne room attacker</a></b><br><TABLE class=ptTab id=BORptS1Throne style="display:none">';
			  for (var i in rslt['s1ThroneRoomBoosts']) {
	
			   m+='<TR><TD><B>'+uW.cm.thronestats.effects[i][1]+'</B></td><td align=right>'+ rslt['s1ThroneRoomBoosts'][i] +' %</td></tr>'; 
			 
			  }
			m+='</TABLE>';
			}else{
				  m+='<b>No bond of the throne room</b>';
			}

			m+='</TD><TD width=50% align=left valign=top>';
			m+='<TABLE class=ptTab width=100%>';
			m+='<TR><TD colspan=4><B>'+uW.g_js_strings.commonstr.defenders+'</B> ('+rpt.side0Name+')';
			if (rslt['winner']==0)
				m+='<FONT color="#CC0000"><B> '+uW.g_js_strings.commonstr.winner+'</B></FONT>';
			m+='</TD></TR>';
			if (rpt.marchName == 'Attack' || rpt.marchName == 'Defend')
				m+='<TR><TD colspan=4>'+uW.g_js_strings.modal_messages_viewreports_view.knightskills+' : ' + rslt['s0KCombatLv'] + '</TD></TR>';
			if (rslt['s0atkBoost'] !== undefined)
			 if (100*rslt['s0atkBoost']>0)
			  m+='<TR><TD colspan=4>'+uW.g_js_strings.modal_messages_viewreports_view.attackboosted+' : ' + 100*rslt['s0atkBoost'] + '%</TD></TR>';
			if (rslt['s0defBoost'] !== undefined)
			 if (rslt['s0defBoost']>0)
			  m+='<TR><TD colspan=4>'+uW.g_js_strings.modal_messages_viewreports_view.defenseboosted+' : ' + 100*rslt['s0defBoost'] + '%</TD></TR>';
			if (rslt['s0lifeBoost']!== undefined)
			 if (100*rslt['s0lifeBoost']>0)
			  m+='<TR><TD colspan=4>Vie : ' + 100*rslt['s0lifeBoost'] + '%</TD></TR>';
			if (rslt['s0guardianDefBoost']!== undefined)
			 if (100*rslt['s0guardianDefBoost']>0)
			 m+='<TR><TD colspan=4>'+uW.g_js_strings.modal_messages_viewreports_view.guardian_defenseboosted+' : ' + 100*rslt['s0guardianDefBoost'] + '%</TD></TR>';
			if (rslt['s0guardianAtkBoost']!== undefined)
			 if (100*rslt['s0guardianAtkBoost']>0)
			  m+='<TR><TD colspan=4>'+uW.g_js_strings.modal_messages_viewreports_view.guardian_attackboosted+' : ' + 100*rslt['s0guardianAtkBoost'] + '%</TD></TR>';
			if (rslt['s0guardianMarchBoost']!== undefined)
			 if (100*rslt['s0guardianMarchBoost'])
			  m+='<TR><TD colspan=4>'+uW.g_js_strings.modal_messages_viewreports_view.guardian_marchboosted+' : ' + 100*rslt['s0guardianMarchBoost'] + '%</TD></TR>';
			if (rslt['rnds']!==undefined)
			   m+='<TR><TD colspan=4>rounds : ' + rslt['rnds'] + '</TD></TR>';
			if (rslt['fght']["s0"] != undefined) {
				m+='<TR><TH></TH><TH align=left>'+uW.g_js_strings.commonstr.troops+'</TH><TH align=right>fought</TH><TH align=right>survived</TH></TR>';


				for (var i=1;i<13;i++) {
					if (rslt['fght']["s0"]['u'+i] != undefined) {
						if (rslt['fght']["s0"]['u'+i][0] > rslt['fght']["s0"]['u'+i][1]) {
							m+='<TR><TD>' + unitImg[i] + '</td>';
							m+='<TD align=right>'+addCommas(rslt['fght']["s0"]['u'+i][0])+'</td>';
							m+='<TD align=right><FONT color="#CC0000">'+addCommas(rslt['fght']["s0"]['u'+i][1])+'</FONT></td></tr>';
						} else {
							m+='<TR><TD>' + unitImg[i] + '</td>';
							m+='<TD align=right>'+addCommas(rslt['fght']["s0"]['u'+i][0])+'</td>';
							m+='<TD align=right>'+addCommas(rslt['fght']["s0"]['u'+i][1])+'</td></tr>';
						}
					}
				}
				// Dark Forest
							for (var i=101;i<111;i++) {
									if (rslt['fght']["s0"]['m'+i] != undefined) {
										if (rslt['fght']["s0"]['m'+i][0] > rslt['fght']["s0"]['m'+i][1]) {
											m+='<TR><TD>' + unitImg[i] + '</td>';
											m+='<TD align=right>'+addCommas(rslt['fght']["s0"]['m'+i][0])+'</td>';
											m+='<TD align=right><FONT color="#CC0000">'+addCommas(rslt['fght']["s0"]['m'+i][1])+'</FONT></td></tr>';
										} else {
											m+='<TR><TD>' + unitImg[i] + '</td>';
											m+='<TD align=right>'+addCommas(rslt['fght']["s0"]['m'+i][0])+'</td>';
											m+='<TD align=right>'+addCommas(rslt['fght']["s0"]['m'+i][1])+'</td></tr>';
										}
									}
				}
				//
				for (var i=53;i<=55;i++) {
					if (rslt['fght']["s0"]['f'+i] != undefined) {
						if (rslt['fght']["s0"]['f'+i][0] > rslt['fght']["s0"]['f'+i][1]) {
							m+='<TR><TD>' + unitImg[i] + '</td>';
							m+='<TD align=right>'+addCommas(rslt['fght']["s0"]['f'+i][0])+'</td>';
							m+='<TD align=right><FONT color="#CC0000">'+addCommas(rslt['fght']["s0"]['f'+i][1])+'</font></td></tr>';
						} else {
							m+='<TR><TD>' + unitImg[i] + '</td>';
							m+='<TD align=right>'+addCommas(rslt['fght']["s0"]['f'+i][0])+'</td>';
							m+='<TD align=right>'+addCommas(rslt['fght']["s0"]['f'+i][1])+'</td></tr>';
						}
					}
				}
				for (var i=60;i<=63;i++) {
					if (rslt['fght']["s0"]['f'+i] != undefined) {
						if (rslt['fght']["s0"]['f'+i][0] > rslt['fght']["s0"]['f'+i][1]) {
							m+='<TR><TD>' + unitImg[i] + '</td>';
							m+='<TD align=right>'+addCommas(rslt['fght']["s0"]['f'+i][0])+'</td>';
							m+='<TD align=right><FONT color="#CC0000">'+addCommas(rslt['fght']["s0"]['f'+i][1])+'</font></td></tr>';
						} else {
							m+='<TR><TD>' + unitImg[i] + '</td>';
							m+='<TD align=right>'+addCommas(rslt['fght']["s0"]['f'+i][0])+'</td>';
							m+='<TD align=right>'+addCommas(rslt['fght']["s0"]['f'+i][1])+'</td></tr>';
						}
					}
				}
			} else
				m+='<TR><TD>'+uW.g_js_strings.modal_messages_viewreports_view.notroopsdef+'</TD></TR>';	
			m+='</TABLE><br>';
			// Bonus divers ^^^
			if (rslt['s0ThroneRoomBoosts']) {
			m+='<b><a id=BORptS0ThroneClick>Bonds defender throne room</a></b><br><TABLE class=ptTab id=BORptS0Throne style="display:none">';
			  for (var i in rslt['s0ThroneRoomBoosts']) {
	
			   m+='<TR><TD><B>'+uW.cm.thronestats.effects[i][1]+'</B></td><td align=right>'+ rslt['s0ThroneRoomBoosts'][i] +' %</td></tr>'; 
			 
			  }

			m+='</TABLE>';
			
			}else{
			  m+='<b>No bond of the throne room</b>'
			}
			m+='</TD></TR>';
			delta_perte = perte_atk - perte_def;
			delta_pos = 1;
			ordre_grandeur = 1; //par defaut: perte en k
			delta_perte = delta_perte/1000;
			if (delta_perte<0){
				delta_pos = -1; //plus de perte pour def
				delta_perte = Math.abs(delta_perte);
			}
			if (delta_perte>1000) { //perte en Mega
				ordre_grandeur = 2;
				delta_perte = entier_1dec(delta_perte/1000);
			}
			if (delta_perte<1) { // pertes inferiereures    1 k
				ordre_grandeur = 0;
				delta_perte = entier_1dec(delta_perte*1000);
			}
			if (ordre_grandeur == 1) { //perte en kilo => garde 1chiffre apres virgule
				delta_perte = entier_1dec(delta_perte);
			}
			// transforme les pertes en kilo (avec 1 chiffre derriere virgule)
			perte_atk = entier_1dec(perte_atk/1000);
			perte_def = entier_1dec(perte_def/1000);
			
			m+='<TR><TD colspan=4>&nbsp;</TD></TR>';
			// affichage 
			if ((delta_pos == 1) && (delta_perte != 0)) {
				m+='<TR><TD><FONT color="#000"><b>'+uW.g_js_strings.commonstr.might+' Perdio</b> ('+rpt.side1Name+') : </FONT><FONT color="#CC0000"> '+(perte_atk)+'k</FONT></TD><TD><FONT color="#00"><b>'+uW.g_js_strings.commonstr.might+' Perdio</b> ('+rpt.side0Name+') : '+perte_def+'k </FONT></TD></TR>';
				if (ordre_grandeur==2) {
					m+='<TR><TD style="background-color: #FFFF00;"><FONT color="#ff00ff">Perdidas de :</FONT><FONT color="#CC0000"> '+delta_perte+'M</FONT></TD><TD></TD></TR></table>';
				} else if (ordre_grandeur==1){
					m+='<TR><TD style="background-color: #FFFF00;"><FONT color="#ff00ff">Perdidas de :</FONT><FONT color="#CC0000"> '+delta_perte+'k </FONT></TD><TD></TD></TR></table>';
				} else if(ordre_grandeur==0){
					m+='<TR><TD style="background-color: #FFFF00;"><FONT color="#ff00ff">Perdidas de :</FONT><FONT color="#CC0000"> '+delta_perte+'</FONT></TD><TD></TD></TR></table>';
				}
			}
			if ((delta_pos == -1) && (delta_perte != 0)) {
				m+='<TR><TD><FONT color="#000"><b>'+uW.g_js_strings.commonstr.might+' Perdio</b> ('+rpt.side1Name+') : '+perte_atk+'k</FONT></TD><TD><FONT color="#000"><b>'+uW.g_js_strings.commonstr.might+' Perdio</b> ('+rpt.side0Name+') : </FONT><FONT color="#CC0000"> '+perte_def+'k </FONT></TD></TR>';
				if (ordre_grandeur==2) {
					m+='<TR><TD></TD><TD style="background-color: #FFFF00;"><FONT color="#ff00ff">Perdidas de :</FONT><FONT color="#CC0000"> '+delta_perte+'M</FONT></TD></TR></table>';
				} else if (ordre_grandeur==1){
					m+='<TR><TD></TD><TD style="background-color: #FFFF00;"><FONT color="#ff00ff">Perdidas de :</FONT><FONT color="#CC0000"> '+delta_perte+'k</FONT></TD></TR></table>';
				} else if (ordre_grandeur==0){
					m+='<TR><TD style="background-color: #FFFF00;"><FONT color="#ff00ff">Perdidas de :</FONT><FONT color="#CC0000"> '+delta_perte+'</FONT></TD><TD></TD></TR></table>';
				}
			}
			if (delta_perte == 0 && (perte_def>0 || perte_atk>0)) {
				m+='<TR><TD><FONT color="#000"><b>'+uW.g_js_strings.commonstr.might+' lost</b> ('+rpt.side1Name+') : '+perte_atk+'k</FONT></TD><TD><FONT color="#000"><b>'+uW.g_js_strings.commonstr.might+' lost</b> ('+rpt.side0Name+') : '+perte_def+'k </FONT></TD></TR></TABLE>';		
			}
		}

		m+='</DIV>';
		t.popReport.getMainDiv().innerHTML = m;
		t.popReport.getTopDiv().innerHTML = '<div class=showBadged><center><B>REPORTS</B></center></DIV>';
		t.popReport.show(true);            
    		t.popReport.autoHeight (true); 
    		if (ById('BORptS0ThroneClick')) {
				 ById('BORptS0ThroneClick').addEventListener('click', function () {
				    		  if (ById('BORptS0Throne').style.display=="none") {ById('BORptS0Throne').style.display="block";} else {ById('BORptS0Throne').style.display="none";}
				 },false);
    		}
    		if (ById('BORptS1ThroneClick')) {
		 ById('BORptS1ThroneClick').addEventListener('click', function () {
		    		  if (ById('BORptS1Throne').style.display=="none") {ById('BORptS1Throne').style.display="block";} else {ById('BORptS1Throne').style.display="none";}
		 },false);
    		}
    		if (ById('BORptBatClick')) {
		 ById('BORptBatClick').addEventListener('click', function () {
		    		  if (ById('BORptBat').style.display=="none") {ById('BORptBat').style.display="block";} else {ById('BORptBat').style.display="none";}
		 },false);
    		}
    		if (ById('BORptRechercheClick')) {
    		 ById('BORptRechercheClick').addEventListener('click', function () {
    		  if (ById('BORptRecherche').style.display=="none") {ById('BORptRecherche').style.display="block";} else {ById('BORptRecherche').style.display="none";}
    		 },false);
	      }	
	},

};

/*********************************** Alliance TAB ***********************************/
Tabs.Alliance = {
	tabOrder: 23,
	tabLabel: 'Alliance',
	tabDisabled : !ENABLE_TEST_TAB,
	myDiv:	null,
	sortBy:	'positionType',
	searchRunning:	false,
	state:	null,
	members: [],
	totalPages: 1,
	infoMembers: 1,
	content: '',

	init: function (div){
		var t = Tabs.Alliance;
		t.myDiv = div;
		t.myDiv.innerHTML = '<DIV class=ptstat>FUNCTIONS OF THE ALLIANCE</DIV><DIV class=ptentry><TABLE width=100%><TR align=center valign=center><TD class=xtab align=right width=10%>Sort by:&nbsp;' +
			'<SELECT id="idAMSortBy"><OPTION value="name">name</OPTION><OPTION value="positionType" SELECTED>position</OPTION><OPTION value="might">might</OPTION><OPTION value="cities">cities</OPTION>' +
			'<OPTION value="lastLogin">lastLogin</OPTION><OPTION value="dateJoined">dateJoined</OPTION><OPTION value="daysInPosition">daysInPosition</OPTION></SELECT></TD>' +
			'<TD class=xtab align=left><INPUT id=idAMList type=submit value="Members list" /></TD><TD class=xtab align=right><INPUT id=idADList type=submit value="list diplomacy"></TD></TR></TABLE></DIV>' +
			'<DIV class=ptstat><TABLE width=100% cellspacing=0><TR><TD class=xtab align=left width=125><DIV id=idAMSearched></DIV></TD></TD>' +
			'<TD class=xtab><TD class=xtab align=center><SPAN style="white-space:normal" id=idAMStatus>&nbsp;</span></TD></TD>' +
			'<TD class=xtab><TD class=xtab align=right width=125><DIV id=idAMFound></DIV></TD></TR></TABLE></DIV>' +
			'<DIV id="idAllResultsDiv" style="height:575px; max-height:575px; overflow-x:auto; overflow-y:auto; white-space:nowrap;"></DIV>';
		document.getElementById('idAMSortBy').addEventListener ('change', t.handleAMSortBy, false);
		document.getElementById('idAMList').addEventListener ('click', t.handleAMSearch, false);
		document.getElementById('idADList').addEventListener ('click', t.displayDiplomacies, false);
		return this.myDiv;
	},

	handleAMSortBy: function(){
		var t = Tabs.Alliance;
		t.sortBy = document.getElementById("idAMSortBy").value;
		if (parseInt(t.members.length) > 0)
			t.displayMembers();
	},

	handleAMSearch: function(){
		var t = Tabs.Alliance;
		if (t.searchRunning){
			t.searchRunning = false;
			t.stopSearch ('Busqueda Cancelada!');
			return;
		}
		document.getElementById('idAllResultsDiv').innerHTML ='';
		document.getElementById ('idAMList').value = 'stop search';
		document.getElementById('idAMStatus').innerHTML = 'Looking page 1';
		t.searchRunning = true;
		t.members=[];
		t.getMembers(1);
	},

	stopSearch: function (msg){
		var t = Tabs.Alliance;
		if (t.searchRunning || msg == 'Search Cancelled!')
			document.getElementById ('idAMStatus').innerHTML = '<FONT color=#ffaaaa>' + msg + '</FONT>';
		document.getElementById ('idAMList').value = 'Members list';
		t.searchRunning = false;
		if (parseInt(t.members.length) > 0)
			t.displayMembers();
	},

	getMembers: function (){
		var t = Tabs.Alliance;
		var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
		params.pf = 0;

		new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/allianceGetInfo.php" + unsafeWindow.g_ajaxsuffix, {
			method: "post",
			parameters: params,
			onSuccess: function (rslt) {
				t.infoMembers = rslt.allianceInfo.members;
				t.totalPages = 1 + parseInt(t.infoMembers / 10); // usually correct, but will be corrected by the callback
				document.getElementById("idAMSearched").innerHTML = '&nbsp;Alliance members: ' + t.infoMembers;
				document.getElementById('idAMStatus').innerHTML = 'Looking page 1 of ' + t.totalPages;
				t.getMembersCallback(1);
			},
			onFailure: function (rslt) {},
		});
	},

	getMembersCallback: function(page) {
		var t = Tabs.Alliance;
		var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
		params.pageNo = page;
		params.pf = 0;
		document.getElementById('idAMStatus').innerHTML = 'Searching page ' + page + ' of ' + t.totalPages;
		new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/allianceGetMembersInfo.php" + unsafeWindow.g_ajaxsuffix, {
			method: "post",
			parameters: params,
			onSuccess: function (rslt) {
				t.totalPages=parseInt(rslt.noOfPages);
				for (var k in rslt["memberInfo"]){
					t.members.push ({
						userId:					parseInt(rslt["memberInfo"][k]["userId"]),
						positionType:		parseInt(rslt["memberInfo"][k]["positionType"]),
						position:				officerId2FullString (parseInt(rslt["memberInfo"][k]["positionType"])),
						cities:					parseInt(rslt["memberInfo"][k]["cities"]),
						might:					parseInt(rslt["memberInfo"][k]["might"]),
						dateJoined:			rslt["memberInfo"][k]["dateJoined"],
						dateJoinedSort:	DateStringToSortString(rslt["memberInfo"][k]["dateJoined"], 'DD Mon YYYY'),
						daysInPosition:	rslt["memberInfo"][k]["daysInPosition"],
						name:						rslt["memberInfo"][k]["name"],
						genderAndName:	rslt["memberInfo"][k]["genderAndName"],
						fbuid:					parseInt(rslt["memberInfo"][k]["fbuid"]),
						lastLogin:			rslt["memberInfo"][k]["lastLogin"],
						lastLoginSort:	DateStringToSortString(rslt["memberInfo"][k]["lastLogin"], 'Mon DD, HH:MM AM'),
						provinceIds:		rslt["memberInfo"][k]["provinceIds"],
					});
				}
				t.displayMembers();
				if (parseInt(rslt.currentPage) < t.totalPages) {
					if (t.searchRunning)
						t.getMembersCallback(parseInt(rslt.currentPage)+1);
				} else
					t.stopSearch ('completed!');
			},
			onFailure: function (rslt) {},
		});
	},

	displayMembers: function (){
		var t = Tabs.Alliance;
		var results = document.getElementById("idAllResultsDiv");
		if(!t.members.length) {
			results.innerHTML = '<center>None found</center>';
			return;
		}
		var pageMembers = t.members.length;
		var myMembers = []; // copy the official array as it might still be being populated
		for (var i=0; i<pageMembers;i++) {
			myMembers[i] = [];
			var mem = t.members[i];
			myMembers[i].fbuid = mem.fbuid;
			myMembers[i].name = mem.name;
			myMembers[i].genderAndName = mem.genderAndName;
			myMembers[i].positionType = mem.positionType;
			myMembers[i].position = mem.position;
			myMembers[i].might = mem.might;
			myMembers[i].cities = mem.cities;
			myMembers[i].lastLogin = mem.lastLogin;
			myMembers[i].lastLoginSort = mem.lastLoginSort;
			myMembers[i].dateJoined = mem.dateJoined;
			myMembers[i].dateJoinedSort = mem.dateJoinedSort;
			myMembers[i].daysInPosition = mem.daysInPosition;
		}
		if (t.sortBy == 'name') {
			myMembers.sort(function(a, b){
				var sortA=a.name.toLowerCase(), sortB=b.name.toLowerCase()
				if (sortA < sortB)
					return -1
				if (sortA > sortB)
					return 1
				return 0
			});
		} else if (t.sortBy == 'positionType') {
			myMembers.sort(function (a,b){return 100000000*(a.positionType-b.positionType) + b.might-a.might});
		} else if (t.sortBy == 'cities') {
			myMembers.sort(function (a,b){return 100000000*(b.cities-a.cities) + b.might-a.might});
		} else if (t.sortBy == 'might') {
				myMembers.sort(function (a,b){return b.might-a.might});
		} else if (t.sortBy == 'lastLogin') {
			myMembers.sort(function (a,b){return b.lastLoginSort-a.lastLoginSort});
		} else if (t.sortBy == 'dateJoined') {
			myMembers.sort(function (a,b){return b.dateJoinedSort-a.dateJoinedSort});
		} else if (t.sortBy == 'daysInPosition') {
			myMembers.sort(function (a,b){return 100000000*(b.daysInPosition-a.daysInPosition) + b.might-a.might});
		}

		t.content = '<center><table><thead><th>name</th><th>load</th><th>might</th><th>cities</th><th>Last Login</th><th>Join Date</th><th>Days in charge</thead><tbody>';
		for (var i=0; i<pageMembers;i++) {
			var mem = myMembers[i];
			t.content += '<tr align=right><td><A target="_tab" href="http://www.facebook.com/profile.php?id='+ mem.fbuid +'">'+mem.genderAndName+'</a></td><td>'+mem.position+'</td>' +
				'<td>'+addCommas (mem.might)+'</td><td align=center>'+mem.cities+'</td><td>'+ mem.lastLogin+'</td><td>'+ mem.dateJoined+'</td><td align=right>'+ mem.daysInPosition +
				'&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td></tr>';
		}
		t.content += '</tbody></table></center>';
		results.innerHTML = t.content;
		document.getElementById("idAMFound").innerHTML = 'members found: ' + pageMembers;
	},

	displayDiplomacies: function () {
		var allianceName = '';
		var membersCount = '';
		document.getElementById('idAllResultsDiv').innerHTML ='';
		document.getElementById('idAMSearched').innerHTML ='';
		document.getElementById('idAMStatus').innerHTML ='&nbsp;';
		document.getElementById('idAMFound').innerHTML ='';
		var m = '<CENTER><TABLE class=xtab><TR><TD valign=top><TABLE class=xtab><TR><TD colspan=2 style=\'background: #33CC66;\' align=center><B>friendly</B></TD></TR>';
		m += ((Seed.allianceDiplomacies['friendly'] == null)?'<TR><TD colspan=2>There were no friendly...</TD></TR>':'<TR><TD><B>Name of alliance</B></TD><TD><B>Miembros</B></TD></TR>');
		for (k in Seed.allianceDiplomacies['friendly']){
			allianceName = Seed.allianceDiplomacies['friendly'][k]['allianceName'];
			membersCount = parseInt(Seed.allianceDiplomacies['friendly'][k]['membersCount']);
			if (membersCount > 0)
				m += '<TR><TD>' + allianceName + '</TD><TD align=right>' + membersCount + '</TD></TR>';
		}
		m += '</TABLE></TD><TD valign=top><TABLE class=xtab><TR><TD colspan=2 style=\'background: #FF6633;\' align=center><B>Friendly towards them</B></TD></TR>';
		m += ((Seed.allianceDiplomacies['friendlyToThem'] == null)?'<TR><TD colspan=2>There were no friendly towards them...</TD></TR>':'<TR><TD><B>Name of alliance</B></TD><TD><B>members</B></TD></TR>');
		for (k in Seed.allianceDiplomacies['friendlyToThem']){
			allianceName = Seed.allianceDiplomacies['friendlyToThem'][k]['allianceName'];
			membersCount = parseInt(Seed.allianceDiplomacies['friendlyToThem'][k]['membersCount']);
			if (membersCount > 0)
				m += '<TR><TD>' + allianceName + '</TD><TD align=right>' + membersCount + '</TD></TR>';
		}
		m += '<TR><TD colspan=2 style=\'background: #FF6633;\' align=center><B>Friendly to us</B></TD></TR>';
		m += ((Seed.allianceDiplomacies['friendlyToYou'] == null)?'<TR><TD colspan=2>There were no friendly towards us</TD></TR>':'<TR><TD><B>Name of alliance</B></TD><TD><B>members</B></TD></TR>');
		for (k in Seed.allianceDiplomacies['friendlyToYou']){
			allianceName = Seed.allianceDiplomacies['friendlyToYou'][k]['allianceName'];
			membersCount = parseInt(Seed.allianceDiplomacies['friendlyToYou'][k]['membersCount']);
			if (membersCount > 0)
				m += '<TR><TD>' + allianceName + '</TD><TD align=right>' + membersCount + '</TD></TR>';
		}
		m += '</TABLE></TD><TD valign=top><TABLE class=xtab><TR><TD colspan=2 style=\'background: #CC0033;\' align=center><B>Hostile</B></TD></TR>';
		m += ((Seed.allianceDiplomacies['hostile'] == null)?'<TR><TD colspan=2>There were no hostile...</TD></TR>':'<TR><TD><B>name alliances</B></TD><TD><B>members</B></TD></TR>');
		for (k in Seed.allianceDiplomacies['hostile']){
			allianceName = Seed.allianceDiplomacies['hostile'][k]['allianceName'];
			membersCount = parseInt(Seed.allianceDiplomacies['hostile'][k]['membersCount']);
			if (membersCount > 0)
				m += '<TR><TD>' + allianceName + '</TD><TD align=right>' + membersCount + '</TD></TR>';
		}
		m += '</TABLE></TD></TR></TABLE></CENTER>';
		document.getElementById('idAllResultsDiv').innerHTML = m;
	},

	hide: function (){
	},

	show: function (){
	},
}

/*************************************** MARCHES TAB ************************************************/
Tabs.Marches = {
  tabOrder : 28,
  tabLabel : 'Inc/Mar/Enc',
  tabDisabled : !ENABLE_TEST_TAB,
  cont:null,
  displayTimer:null,
	curTabBut : null,
  curTabName : null,
  widescreen:true,

  init : function (div){
     var t = Tabs.Marches;
    uW.pr56Recall = t.butRecall;
    uW.r8x6Home = t.butSendHome;
    uW.cancelMarch = t.butcancelmarch;

    t.cont = div;
   var main = '<TABLE class=ptTab align=center><TR><TD><INPUT class=pbSubtab ID=ptmrchSubN type=submit value="incoming"></td>';
    main +='<TD><INPUT class=pbSubtab ID=ptmrchSubM type=submit value='+uW.g_js_strings.commonstr.marching+'></td>';
    main +='<TD><INPUT class=pbSubtab ID=ptmrchSubR type=submit value='+uW.g_js_strings.commonstr.reinforced+'></td></tr></table><HR class=ptThin>';
    main +='<DIV id=ptMarchOutput style="margin-top:10px; background-color:white; height:680px; overflow:scroll;"></div>';

    t.cont.innerHTML = main;
    t.marchDiv = document.getElementById('ptMarchOutput');
    document.getElementById('ptmrchSubN').addEventListener('click', e_butSubtab, false);
    document.getElementById('ptmrchSubR').addEventListener('click', e_butSubtab, false);
    document.getElementById('ptmrchSubM').addEventListener('click', e_butSubtab, false);
    changeSubtab (document.getElementById('ptmrchSub'+Options.curMarchTab));

    function e_butSubtab (evt){
      changeSubtab (evt.target);
    }

    function changeSubtab (but){
      if (but == t.curTabBut)
        return;
      if (t.curTabBut){
        t.curTabBut.className='pbSubtab';
        t.curTabBut.disabled=false;
      }
      t.curTabBut = but;
      but.className='pbSubtab pbSubtabSel';
      but.disabled=true;
      t.curTabName = but.id.substr(9);
	  Options.curMarchTab = t.curTabName;
       saveOptions();
      t.show ();
    }
  },

  hide : function (){
    var t = Tabs.Marches;
    clearTimeout (t.displayTimer);
  },

  show : function (){
    var t = Tabs.Marches;
    clearTimeout (t.displayTimer);
    if (t.curTabName == 'R')
      t.showReinforcements();
    else if (t.curTabName == 'M')
      t.showMarches();
    else
      t.showIncoming();
  },

  /***   Incoming SUBTAB  ***/
      showIncoming : function (){
    var t = Tabs.Marches;
    t.marchDiv.innerHTML =null;

         var z = '<TABLE id=pdincoming cellSpacing=10 width=100% height=0% class=pbTab>';

       for (k in Seed.queue_atkinc) {
          if(Seed.queue_atkinc.length !=0){
       		var now = unixTime();
				var icon, status, FROM, cityname, FROMmight, marchdir, marchtime;
               		var marchType = parseInt(Seed.queue_atkinc[k]["marchType"]);
               		var marchStatus = parseInt(Seed.queue_atkinc[k]["marchStatus"]);

               		for (var i=0; i<Seed.cities.length;i++) {
        	       			if (Seed.cities[i][0] == Seed.queue_atkinc[k]["toCityId"]) cityname = Seed.cities[i][1];
               		}

               		if (Seed.queue_atkinc[k]["destinationUnixTime"] < now || marchStatus == 8)
					marchdir = "back";
				else
					marchdir = "marching";

               		var destinationUnixTime = Seed.queue_atkinc[k]["arrivalTime"] - now;
				if(destinationUnixTime > 0)
                		marchtime = timestr(destinationUnixTime, true)
				else
					marchtime = 'completed';

          if (marchType != 3 && marchType !=4){
               			var player = Seed.players['u'+Seed.queue_atkinc[k]["fromPlayerId"]]
					FROM = player.n;
					FROMmight = player.m;
          }
          else {
               		for (players in Seed.players){
               				if (marchType == 3 || marchType == 4){
                        if (('u'+Seed.queue_atkinc[k]["pid"]) == players){
                              FROM = Seed.players[players]["n"];
                              FROMmight = Seed.players[players]["m"];
                        }
                      }
               			}
          }

       if (marchType == 2 && marchStatus == 2) marchType = 102;

        switch (marchType) {
					case 1: icon="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/transporting.jpg";status=uW.g_js_strings.commonstr.transport;break;
					case 2: icon="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/reinforce.jpg";status=uW.g_js_strings.commonstr.reinforce	;break;
					case 3: icon="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/scouting.jpg";status=uW.g_js_strings.commonstr.scout;break;
					case 4: icon="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/attacking.jpg";status=uW.g_js_strings.commonstr.attack;break;
					case 9: icon="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/attacking.jpg";status=uW.g_js_strings.commonstr.attack;break;
					case 5: icon="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/transporting.jpg";status=uW.g_js_strings.commonstr.reassign;break;
					case 100: icon="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/returning.jpg";status=uW.g_js_strings.commonstr.returning;break;
					case 102: icon="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/reinforce.jpg";status=uW.g_js_strings.commonstr.encamped;break;
 				}

					if(status == uW.g_js_strings.commonstr.encamped)
					z += '<TD width="10px"><A onclick="r8x6Home('+ Seed.queue_atkinc[k].marchId +')"><img src='+ icon +'></a></td>';
					else
               		z += '<TD width="10px"><img src='+ icon +'></td>';
               		z += '<TD width="40px">'+ status +'</td>';
               		z += '<TD>' + cityname + '</td>';
               		z += '<TD>'+ marchtime +'</td>';
				z +='<TD>'+uW.g_js_strings.commonstr.from+': ' + FROM + '</td>';
				z +='<TD>'+uW.g_js_strings.commonstr.might+': ' + addCommas(FROMmight) + '</td>';
				if (Seed.queue_atkinc[k]["knt"] != undefined) z +='<TD>'+uW.g_js_strings.commonstr.knight+': '+ Seed.queue_atkinc[k]["knt"]["cbt"]+'</td>';

				if (Seed.queue_atkinc[k]["gold"] > 0) z += '<TD>'+uW.resourceinfo.rec0 +': '+ addCommas(Seed.queue_atkinc[k]["gold"]) +'</td>';
				if (Seed.queue_atkinc[k]["resource1"] > 0) z += '<TD>'+uW.resourceinfo.rec1 +': '+ addCommas(Seed.queue_atkinc[k]["resource1"]) +'</td>';
				if (Seed.queue_atkinc[k]["resource2"] > 0) z += '<TD>'+uW.resourceinfo.rec2 +': '+ addCommas(Seed.queue_atkinc[k]["resource2"]) +'</td>';
				if (Seed.queue_atkinc[k]["resource3"] > 0) z += '<TD>'+uW.resourceinfo.rec3 +': '+ addCommas(Seed.queue_atkinc[k]["resource3"]) +'</td>';
				if (Seed.queue_atkinc[k]["resource4"] > 0) z += '<TD>'+uW.resourceinfo.rec4 +': '+ addCommas(Seed.queue_atkinc[k]["resource4"]) +'</td>';

        		    for(i=1; i<13; i++){
					if(Seed.queue_atkinc[k]["unit"+i+"Count"] > 0 && marchdir == "going") z += '<TD>'+ unsafeWindow.unitcost['unt'+i][0] +': '+ addCommas(Seed.queue_atkinc[k]["unit"+i+"Count"]) +'</td>';
					if(Seed.queue_atkinc[k]["unit"+i+"Return"] > 0 && marchdir == "returning") z += '<TD>'+ unsafeWindow.unitcost['unt'+i][0] +': '+ addCommas(Seed.queue_atkinc[k]["unit"+i+"Return"]) +'</td>';
 				}

				if (marchType == 3)
					if (Seed.queue_atkinc[k]["unts"]["u3"] > 0) z += '<TD>'+unsafeWindow.unitcost.unt3[0]+': '+ addCommas(Seed.queue_atkinc[k]["unts"]["u3"]) +'</td>';
 				if (marchType == 4){
					for(ui=1; ui<13; ui++){
						if (Seed.queue_atkinc[k]["unts"]["u"+ui] > 0) z += '<TD>'+ unsafeWindow.unitcost['unt'+ui][0] +': '+ addCommas(Seed.queue_atkinc[k]["unts"]["u"+ui]) +'</td>';
 					}
				}

               		z += '</tr>';
              }
     }
     z += '</table>';
     t.marchDiv.innerHTML = z;

     t.displayTimer = setTimeout (t.showIncoming, 500);
  },

  /***   MARCHES SUBTAB  ***/
  showMarches : function (){
    var t = Tabs.Marches;
    t.marchDiv.innerHTML =null;
      var updatemarch = Seed.queue_atkp;

      var  m = '<TABLE id=pdmarches cellSpacing=10 width=200px height=0% class=pbTab>';
     if (t.widescreen) m += '<TR><TD><INPUT id=Wide type=checkbox checked=true>widescreen</td>';
     else  m += '<TR><TD><INPUT id=Wide type=checkbox unchecked=true>widescreen</td></tr></table>';
     m+='<TABLE id=pdmarches cellSpacing=10 width=100% height=0% class=pbTab>';
     for (var c=0; c< Seed.cities.length;c++) {
     		cityname = Seed.cities[c][1];
     		cityID = 'city' + Seed.cities[c][0];
    		number=0;

    		if (Seed.queue_atkp[cityID].length !=0) m+= '<TR><TD colspan=5 style=\'background: #99CCFF;\' align=center><B>' + cityname +': </b></td></tr>';
  		    for (k in Seed.queue_atkp[cityID]){
  				 if (Seed.queue_atkp[cityID].length !=0) {
  				    var marchID = new String(k);
  				    marchID = marchID.substr(1);
  				    var marchType = parseInt(Seed.queue_atkp[cityID][k]["marchType"]);
  				    var marchStatus = parseInt(Seed.queue_atkp[cityID][k]["marchStatus"]);
  				    var now = unixTime();
  				    cityTo=null;
  				    number++;
					var icon, status, type, cityTo, knight, marchtime;

  				    for (var i=0; i<Seed.cities.length;i++) {
  				    		if (Seed.cities[i][2] == Seed.queue_atkp[cityID][k]["toXCoord"] && Seed.cities[i][3] == Seed.queue_atkp[cityID][k]["toYCoord"]) cityTo = Seed.cities[i][1];
  				    }
  				    var destinationUnixTime = Seed.queue_atkp[cityID][k]["destinationUnixTime"] - now;
  				    var returnUnixTime = Seed.queue_atkp[cityID][k]["returnUnixTime"] - now;
  				    var encampedUnixTime = now - Seed.queue_atkp[cityID][k]["destinationUnixTime"];
					var restingUnixTime = now - Seed.queue_atkp[cityID][k]["returnUnixTime"];

  				    if (Seed.queue_atkp[cityID][k]["destinationUnixTime"] > now)
						marchtime = timestr(destinationUnixTime, true);
  				    else
						marchtime = timestr(returnUnixTime, true);

  				    if (Seed.queue_atkp[cityID][k]["destinationUnixTime"] < now && marchType == 2)
						marchtime = timestr(encampedUnixTime, true);
					if (Seed.queue_atkp[cityID][k]["returnUnixTime"] < now && marchType == 9)
						marchtime = timestr(restingUnixTime, true);

  				    if (Seed.queue_atkp[cityID][k]["destinationUnixTime"] < now || marchStatus == 8)
						type = "returning";
  				    else
						type = "going";

					if(Seed.queue_atkp[cityID][k]["destinationUnixTime"] < now){
						if (marchStatus == 8)
							marchtime = timestr(returnUnixTime, true);
						if (type =="returning" && marchType == 2 && marchStatus != 2)
							marchtime = timestr(returnUnixTime, true);
						if (type =="returning" && marchType == 4 && marchStatus == 2)
							marchtime = timestr(returnUnixTime, true);
						if (marchStatus == 2 && marchType !=2)
							marchtime = timestr(returnUnixTime, true);
					}
  				    if (parseInt(Seed.queue_atkp[cityID][k]["marchType"]) == 4 && marchStatus == 2)
						marchtime = timestr(destinationUnixTime, true);;


					if (type =="returning" && marchType != 2)
						marchType = 8;
  				    if (type =="returning" && marchType == 2 && marchStatus == 2)
						marchType = 102;
  				    if (type =="returning" && marchType == 2 && marchStatus != 2)
						marchType = 8;
  				    if (marchStatus == 3)
							marchType = 103;
					if (marchStatus == 4)
							marchType = 104;


  				    if (parseInt(Seed.queue_atkp[cityID][k]["marchType"]) == 4 && marchStatus == 2) {
  						marchType = 102;
  						marchtime = timestr(encampedUnixTime, true)
  				    }

  				    switch (marchType) {
  					    case 1: icon="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/transporting.jpg";status=uW.g_js_strings.commonstr.transport;break;
  					    case 2: icon="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/reinforce.jpg";status=uW.g_js_strings.commonstr.reinforce;break;
  					    case 3: icon="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/scouting.jpg";status=uW.g_js_strings.commonstr.scout;break;
  					    case 4: icon="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/attacking.jpg";status=uW.g_js_strings.commonstr.attack;break;
  					    case 5: icon="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/transporting.jpg";status=uW.g_js_strings.commonstr.reassign;break;
  					    case 8: icon="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/returning.jpg";status=uW.g_js_strings.commonstr.returning;break;
  					    case 9: icon="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/attacking.jpg";status=uW.g_js_strings.commonstr.raid;break;
  					    case 102: icon="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/reinforce.jpg";status=uW.g_js_strings.commonstr.encamped;break;
						case 103: icon="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/autoAttack/raid_stopped_desat.png";status=unsafeWindowg_js_strings.attack_generatequeue.raidstopped;break;
						case 104: icon="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/autoAttack/raid_resting.png";status=uW.g_js_strings.attack_generatequeue.raidresting;break;
   				    }

  				    if (Seed.queue_atkp[cityID][k]["knightId"] !=0){
  				    	for (i in Seed.knights[cityID]) {
  				    			if (i == ("knt" + Seed.queue_atkp[cityID][k]["knightId"]) ) knight = Seed.knights[cityID][i]["combat"];
  				    	}
  				    } else knight = null;

  				    m += '<TR><TD>'+ number +'</td>';
  				   if (status=="Encamped" && !t.isMyself(Seed.queue_atkp[cityID][k].fromPlayerId))
						m += '<TD><A onclick="r8x6Home('+ marchID +')"><img src='+ icon +'></a></td>';
  				    else if(status=='Encamped' && t.isMyself(Seed.queue_atkp[cityID][k].fromPlayerId))
						m += '<TD><A onclick="pr56Recall('+ marchID +')"><img src='+ icon +'></a></td>';
					else if(status=='Returning' || status=="Stopped" || status=="Resting")
						m += '<TD><img src='+ icon +'></td>';
					else
						m += '<TD><A onclick="cancelMarch('+ marchID +')"><img src='+ icon +'></a></td>';
  				    m += '<TD width="40px">'+ status +'</td>';
  				    m += '<TD>'+ marchtime +'</td>';

  				    if (cityTo == null)
						m += '<TD style="padding-right:10px;">'+ coordLink(Seed.queue_atkp[cityID][k]["toXCoord"],Seed.queue_atkp[cityID][k]["toYCoord"]) + '</td>';
  				    else
						m += '<TD style="padding-right:10px;">'+ cityTo +'</td>';

  				    if (knight != null)  m += '<TD>'+uW.g_js_strings.commonstr.knight+': '+ knight +'</td>';

  				    if (Seed.queue_atkp[cityID][k]["toTileType"] == 11) m+='<TD>lv. Lago: ' + Seed.queue_atkp[cityID][k]["toTileLevel"] + '</td>';
  				    else if (Seed.queue_atkp[cityID][k]["toTileType"] == 20) m+='<TD>lv. Pradera: ' + Seed.queue_atkp[cityID][k]["toTileLevel"] + '</td>';
  				    else if (Seed.queue_atkp[cityID][k]["toTileType"] == 30) m+='<TD>lv. Colina: ' + Seed.queue_atkp[cityID][k]["toTileLevel"] + '</td>';
  				    else if (Seed.queue_atkp[cityID][k]["toTileType"] == 40) m+='<TD>lv. Monta a: ' + Seed.queue_atkp[cityID][k]["toTileLevel"] + '</td>';
  				    else if (Seed.queue_atkp[cityID][k]["toTileType"] == 50) m+='<TD>lv. Planicie: ' + Seed.queue_atkp[cityID][k]["toTileLevel"] + '</td>';
  					else if (Seed.queue_atkp[cityID][k]["toCityId"] ==0) m +='<TD>'+uW.g_js_strings.commonstr.barbariancamp+' '+uW.g_js_strings.commonstr.lvl+': '+Seed.queue_atkp[cityID][k]["toTileLevel"]+'</td>';

  				    if (Seed.queue_atkp[cityID][k]["gold"] > 0) m += '<TD>'+uW.resourceinfo.rec0 +': '+ Seed.queue_atkp[cityID][k]["gold"] +'</td>';
  				    if (Seed.queue_atkp[cityID][k]["resource1"] > 0) m += '<TD>'+uW.resourceinfo.rec1 +': '+ addCommas(Seed.queue_atkp[cityID][k]["resource1"]) +'</td>';
  				    if (Seed.queue_atkp[cityID][k]["resource2"] > 0) m += '<TD>'+uW.resourceinfo.rec2 +': '+ addCommas(Seed.queue_atkp[cityID][k]["resource2"]) +'</td>';
  				    if (Seed.queue_atkp[cityID][k]["resource3"] > 0) m += '<TD>'+uW.resourceinfo.rec3 +': '+ addCommas(Seed.queue_atkp[cityID][k]["resource3"]) +'</td>';
  				    if (Seed.queue_atkp[cityID][k]["resource4"] > 0) m += '<TD>'+uW.resourceinfo.rec4 +': '+ addCommas(Seed.queue_atkp[cityID][k]["resource4"]) +'</td>';

  				    for(i=1; i<13; i++){
						if(Seed.queue_atkp[cityID][k]["unit"+i+"Count"] > 0 && type == "going") m += '<TD>'+ unsafeWindow.unitcost['unt'+i][0] +': '+ addCommas(Seed.queue_atkp[cityID][k]["unit"+i+"Count"]) +'</td>';
						if(Seed.queue_atkp[cityID][k]["unit"+i+"Return"] > 0 && type == "returning") m += '<TD>'+ unsafeWindow.unitcost['unt'+i][0] +': '+ addCommas(Seed.queue_atkp[cityID][k]["unit"+i+"Return"]) +'</td>';
 					}
					m += '</tr>';
   			  }
  		    }
  	}
  	m += '</table>';
  	t.marchDiv.innerHTML = m;

  	if (t.widescreen==false) document.getElementById('ptMarchOutput').style.maxWidth = '740px';
  	else document.getElementById('ptMarchOutput').style.maxWidth = '1100px';

  	document.getElementById('Wide').addEventListener('click', function(){
  		t.widescreen=document.getElementById('Wide').checked;
  	  	}, false);

    t.displayTimer = setTimeout (t.showMarches, 500);
    },

	isMyself: function(userID){
		if(!Seed.players["u"+userID])
			return false;
		if(Seed.players["u"+userID].n == Seed.player.name)
			return true;
		else
			return false;
		return false;
	},

    butcancelmarch: function(marchID){
    	 var t = Tabs.Marches;
    	 	 var params = uW.Object.clone(uW.g_ajaxparams);
    	 	 params.mid = marchID;
     	 	 for (var c=0; c<Cities.numCities; c++){
    	 	   var que = Seed.queue_atkp['city'+ Cities.cities[c].id];
    	 	   if (matTypeof(que)=='array')
    	 	     continue;
    	 	   for (k in que){
    	 	     if (k == 'm'+marchID){
    	 	       params.cid = Cities.cities[c].id;
    	 	       break;
    	 	     }
    	 	   }
    	 	 }

    	 	 new AjaxRequest(uW.g_ajaxpath + "ajax/cancelMarch.php" + uW.g_ajaxsuffix, {
    	 	     method: "post",
    	 	     parameters: params,
    	 	     onSuccess: function (rslt) {
    	 	     var march = uW.seed.queue_atkp["city" + params.cid]["m" + params.mid];
    	 	     march.marchStatus = 8;
    	 	      var marchtime = parseInt(march.returnUnixTime) - parseInt(march.destinationUnixTime);
    	 	      var ut = unixTime();
    	 	      if (uW.seed.playerEffects.returnExpire > unixtime())
    	 	        marchtime *= 0.5
    	 	       march.returnUnixTime = ut + marchtime;
    	 	       march.destinationUnixTime = ut;
    	 	       march.marchUnixTime = ut - marchtime;
    	 	       if (notify != null)
    	 	         notify(rslt.errorMsg);
    	 	     },
    	 	     onFailure: function () {
    	 	       if (notify != null)
    	 	         notify(rslt.errorMsg);
    	 	     },
    	 	 });

  },



  /***  REINFORCEMENTS SUBTAB  ***/
  showReinforcements : function (){
    var rownum = 0;
    var names = ['SupplyTroop', 'Militiaman.', 'Scout.', 'Pikeman.', 'Swordsman.', 'archers.', 'Cavalry', 'HeavyCavalry.', 'SupplyWagons', 'Ballista.', 'BatteringRam', 'Catapult.'];
    var t = Tabs.Marches;
      clearTimeout (t.displayTimer);

// TODO FIX:    Troops show as encamped even if they are here yet (check destinationUnixTime)

/***
var s = 'OUTGOING:<BR>';
for (var c=0; c<Cities.numCities; c++){
  var que = Seed.queue_atkp['city'+ Cities.cities[c].id];
  if (matTypeof(que)=='array')
    continue;

s += 'City: '+  Cities.cities[c].name + ': <BR>';

  for (k in que){
    march = que[k];
    var mid = k.substr(1);
    s += mid +' DEST: '+ march.toXCoord +','+ march.toYCoord + '  <INPUT type=submit value="Recall" onclick="pr56Recall('+ mid +')"><BR>'
  }
}
t.cont.innerHTML = s;
t.displayTimer = setTimeout (t.show, 10000);
return;
***/

    function clickShowRemaining (){
      checkBox = document.getElementById('idCheck2');
      if (checkBox.checked)
        Options.encRemaining = false;
      else
        Options.encRemaining = true;
      t.show ();
    }

	enc = {};
    numSlots = 0;

    if (matTypeof(Seed.queue_atkinc) != 'array'){
      for (k in Seed.queue_atkinc){
        march = Seed.queue_atkinc[k];
        if (march.marchType == 2){
          ++numSlots;
          city = march.toCityId;
          from = march.fromPlayerId;
          if (!enc[city])
            enc[city] = {};
          if (!enc[city][from])
            enc[city][from] = [];
          s = {};
          s.knight = parseInt (march.knightCombat);
          s.marchId = k.substr(1);
          s.troops = [];
          for (i=1; i<13; i++){
            if (Options.encRemaining)
              s.troops[i] = parseInt (march['unit'+ i +'Return']);
            else
              s.troops[i] = parseInt (march['unit'+ i +'Count']);
          }
          enc[city][from].push (s);
        }
      }
    }
    s = '<div class=ptstat>Showing troops camped in each of the embassies.</div><BR>';
    if (numSlots == 0){
      s += '<BR><CENTER><B>No troops camped.</b></center>';
    } else {
      s += '<STYLE> .tot{background:#f0e0f8;} .city{background:#ffffaa;}</style>';
      s += '<TABLE cellspacing=0 width=100%><TR align=center><TD align=left width=16%><B>player (Cab.)</b></td>';

      for (k=0; k<names.length; k++)
        s += '<TD width=7%><B>' + names[k] + '</b></td>';
      s += '</tr>';

      tot = [];
      for (i=0; i<13; i++)
        tot[i] = 0;
      for (c in Cities.cities){
        dest = Cities.cities[c].id;
        if (enc[dest]){
          s+= '<TR><TD class=xtab><BR></td></tr>';
          s+= '<TR><TD class="city" colspan=13 align=center><B>'+ Cities.cities[c].name +'</b></td></tr>';
          for (p in enc[dest]){
            try {
              player = Seed.players['u'+p].n;
            } catch (err){
              player = '???';
            }
            for (m=0; m<enc[dest][p].length; m++){
				var march = enc[dest][p][m];
              knight = '';
              if (march.knight > 0)
                knight = ' ('+ march.knight +')';
// TODO: Only allow 'send home' if troops are here now  (marchStatus = ?)
              s += '<TR align=right><TD align=left>'+ player + knight +' <A><SPAN style="color:red"; onclick="r8x6Home('+ march.marchId +')">return</span></a></td>'
               for (i=1; i<13; i++){
                s += '<TD>'+ march.troops[i]  +'</td>';
                tot[i] += march.troops[i];
              }
              s += '</tr>';

            }
          }
        }
      }
      s += '<TR><TD colspan=13><BR><BR></td></tr><TR align=right><TD class="tot" align=left><B>TOTAL:</b></td>';
      for (i=1; i<13; i++)
        s+= '<TD class="tot">'+ tot[i] +'</td>';
      s += '</tr></table>';
    }

    s += '<BR><BR><INPUT type=CHECKBOX id=idCheck2 '+ (Options.encRemaining?'':' CHECKED ') +'> Show source of troops';
    s += '<BR><BR><DIV style="font-size:10px">NOTE: You must reload to show troops camped KofC or troops left after a battle.</div>';
    t.marchDiv.innerHTML = s;
    checkBox = document.getElementById('idCheck2');
    checkBox.addEventListener('click', clickShowRemaining, false);
    t.displayTimer = setTimeout (t.show, 10000);
  },


  butRecall : function (marchId){
    var t = Tabs.Marches;
    logit ("CANCELLING: "+ marchId);
    t.ajaxRecall (marchId);
  },

  butSendHome : function (marchId){
    var t = Tabs.Marches;
	alert("Send reinforcement troops home "+marchId);
    logit ("SEND HOME: "+ marchId);
    t.ajaxSendHome (marchId, function(r){t.show(); logit("AJAX RESULT: "+ r)});
  },


  /***
  // not working, returns 'invalid parameters' :(
  ajaxCancelMarch : function (marchId, notify){
    var params = uW.Object.clone(uW.g_ajaxparams);
logit ('ajaxCancelMarch: '+ marchId);
    for (var c=0; c<Cities.numCities; c++){
      var que = Seed.queue_atkp['city'+ Cities.cities[c].id];
      if (matTypeof(que)=='array')
        continue;
      for (k in que){
        if (k == 'm'+marchId){
          params.cid = Cities.cities[c].id;
          params.cityId = Cities.cities[c].id;
          break;
        }
      }
    }
    params.marchId = marchId;
    params.mid = 'm'+ marchId;
    params.requestType = "CANCEL_MARCH";
    new MyAjaxRequest(uW.g_ajaxpath + "ajax/cancelMarch.php" + uW.g_ajaxsuffix, {
        method: "post",
        parameters: params,
        onSuccess: function (rslt) {
          if (notify != null)
            notify(rslt.errorMsg);
        },
        onFailure: function () {
          if (notify != null)
            notify(rslt.errorMsg);
        },
    });
  },
***/





  ajaxSendHome : function (marchId, notify){
logit ('ajaxSendHome: '+ marchId);
    var march = Seed.queue_atkinc['m'+ marchId];
    if (march == null){
      notify ('March not found!');
      return;
    }
    var params = uW.Object.clone(uW.g_ajaxparams);
    params.mid = marchId;
    params.cid = march.toCityId;
    params.fromUid = march.fromPlayerId;
    params.fromCid = march.fromCityId;

   new MyAjaxRequest(uW.g_ajaxpath + "ajax/kickoutReinforcements.php" + uW.g_ajaxsuffix, {
        method: "post",
        parameters: params,
        onSuccess: function (rslt) {
          if (rslt.ok){
            var upkeep = 0;
            for (var i=1; i<13; i++)
              upkeep += parseInt(march["unit" + i + "Return"]) * parseInt(uW.unitupkeeps[i])
            uW.seed.resources["city"+ march.toCityId].rec1[3] -= upkeep;
            if (parseInt(march.fromPlayerId) == parseInt(uW.tvuid)) {
              var mymarch = uW.seed.queue_atkp["city" + march.fromCityId]["m" + marchId];
              var marchtime = Math.abs(parseInt(mymarch.destinationUnixTime) - parseInt(mymarch.eventUnixTime));
              mymarch.returnUnixTime = unixTime() + marchtime;
              mymarch.marchStatus = 8;
            }
            delete uW.seed.queue_atkinc["m" + marchId];
            if (notify != null)
              notify(null);
          } else {
            if (notify != null)
              notify(rslt.errorMsg);
          }
        },
        onFailure: function () {
          if (notify != null)
            notify(rslt.errorMsg);
        },
    });
  },

/*****

      for (var b = 1; b < 13; b++) {
        g += parseInt(e["unit" + b + "Return"]) * parseInt(unitupkeeps[b])
      }

function kickout_allies(mid, cid, fromUid, fromCid, upkeep) {
  var params = Object.clone(g_ajaxparams);
  params.mid = mid;
  params.cid = cid;
  params.fromUid = fromUid;
  params.fromCid = fromCid;
  new Ajax.Request(g_ajaxpath + "ajax/kickoutReinforcements.php" + g_ajaxsuffix, {
    method: "post",
    parameters: params,
    onSuccess: function(transport) {
      var rslt = eval("(" + transport.responseText + ")");
      if (rslt.ok) {
        Modal.showAlert(g_js_strings.kickout_allies.troopshome);
        seed.resources["city" + currentcityid].rec1[3] = parseInt(seed.resources["city" + currentcityid].rec1[3]) - upkeep;
        Modal.hideModalAll();
        if (parseInt(fromUid) == parseInt(tvuid)) {
          var curmarch = seed.queue_atkp["city" + fromCid]["m" + mid];
          var marchtime = Math.abs(parseInt(curmarch.destinationUnixTime) - parseInt(curmarch.eventUnixTime));
          curmarch.returnUnixTime = unixtime() + marchtime;
          curmarch.marchStatus = 8
        }
        delete seed.queue_atkinc["m" + mid]
      } else {
        Modal.showAlert(printLocalError((rslt.error_code || null), (rslt.msg || null), (rslt.feedback || null)))
      }
    },
    onFailure: function() {}
  })
};
***/





  ajaxRecall : function (marchId, notify){
    var params = uW.Object.clone(uW.g_ajaxparams);
    for (var c=0; c<Cities.numCities; c++){
      var que = Seed.queue_atkp['city'+ Cities.cities[c].id];
      if (matTypeof(que)=='array')
        continue;
      for (k in que){
        if (k == 'm'+marchId){
          params.cid = Cities.cities[c].id;
          break;
        }
      }
    }
    params.mid = marchId;
    new MyAjaxRequest(uW.g_ajaxpath + "ajax/undefend.php" + uW.g_ajaxsuffix, {
        method: "post",
        parameters: params,
        onSuccess: function (rslt) {
          var march = uW.seed.queue_atkp["city" + params.cid]["m" + params.mid];
          march.marchStatus = 8;
          var marchtime = parseInt(march.returnUnixTime) - parseInt(march.destinationUnixTime);
          var ut = unixTime();
          if (uW.seed.playerEffects.returnExpire > unixTime())
            marchtime *= 0.5
          march.returnUnixTime = ut + marchtime;
          march.destinationUnixTime = ut;
          march.marchUnixTime = ut - marchtime;
          if (notify != null)
            notify(rslt.errorMsg);
        },
        onFailure: function () {
          if (notify != null)
            notify(rslt.errorMsg);
        },
    });
  },

 };


/*********************************** Players TAB ***********************************/

Tabs.AllianceList = {
  tabOrder : 8,
  cont : null,
  dat : [],

fetchPlayerCourt : function (uid, notify){
  var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
  params.pid = uid;
  new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/viewCourt.php" + unsafeWindow.g_ajaxsuffix, {
    method: "post",
    parameters: params,
    onSuccess: function (rslt) {
logit ("ajax/viewCourt.php\n"+ inspect (rslt, 3, 1));      
      notify (rslt);
    },
    onFailure: function (rslt) {
      notify (rslt);
    },
  });
},


fetchTEST : function (pageNum, notify){    // as in alliance list, sorted by rank, 10 per page
  var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
  params.pageNo = 1;
  params.numPerPage = 100;
  params.perPage = 100;
  params.results = 100;
  params.numResults = 100;
  new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/allianceGetMembersInfo.php" + unsafeWindow.g_ajaxsuffix, {
    method: "post",
    parameters: params,
    onSuccess: function (rslt) {
logit ("ajax/allianceGetMembersInfo.php:\n"+ inspect (rslt, 5, 1));      
      notify (rslt);
    },
    onFailure: function (rslt) {
      notify ({errorMsg:'AJAX error'});
    },
  });
},

  
   init : function (div){
    var t = Tabs.AllianceList;
    t.cont = div;
    unsafeWindow.PTgetMembers = t.eventGetMembers;
    unsafeWindow.PTPaintMembers = t.GetDataForMap;
    unsafeWindow.PTpd = t.clickedPlayerDetail;
    unsafeWindow.PTpl = t.clickedPlayerLeaderboard;
    unsafeWindow.PTpl2 = t.clickedPlayerLeaderboard2;
    unsafeWindow.PTalClickPrev = t.eventListPrev;
    unsafeWindow.PTalClickNext = t.eventListNext;
    unsafeWindow.PCplo = t.clickedPlayerGetLastLogin;
    Lastlogin=0;
    t.show();
  },
 

  hide : function (){
  },

  show : function (){
    var t = Tabs.AllianceList;
    if (t.state == null){
      if (getMyAlliance()[0] == 0) {
        t.cont.innerHTML = '<BR><BR><CENTER>You are not in any alliance.</center>';
        t.state = 1;
        return;
      }
      var m = '<DIV class=ptentry><TABLE width=100% cellpadding=0>\
          <TR><TD class=xtab align=right></td><TD class=xtab>Enter all or part of a player s name: &nbsp;</td>\
            <TD width=80% class=xtab><INPUT id=allPlayName size=20 type=text /> &nbsp; <INPUT id=playSubmit type=submit value="Search Player" /></td>\
            <TD class="xtab ptErrText"><SPAN id=ptplayErr></span></td></tr>\
          <TR><TD class=xtab>O: </td><TD class=xtab> Enter all or part of the name of an alliance: &nbsp;</td>\
            <TD class=xtab><INPUT id=allAllName type=text /> &nbsp; <INPUT id=allSubmit type=submit value="Search alliance" /></td>\
            <TD class="xtab ptErrText"><SPAN id=ptallErr></span></td></tr>\
           <TR><TD class=xtab><INPUT align=left id=allListSubmit type=submit value="Alliance list" /></td>\
            <TD class=xtab><INPUT align=right id=idMyAllSubmit type=submit value="'+ getMyAlliance()[1] +'"/>\
           <TD class=xtab></td><TD class=xtab><span align=right <b>'+uW.g_js_strings.attack_generateincoming.estimatedarrival+': </b></span>\
            <div><select id="idFindETASelect">\
        <option value="0,0" > ---Select--- </option>\
        <option value="0,180" >'+unsafeWindow.unitcost["unt1"][0]+'</option>\
        <option value="0,200" > '+unsafeWindow.unitcost["unt2"][0]+' </option>\
        <option value="0,3000" > '+unsafeWindow.unitcost["unt3"][0]+' </option>\
        <option value="0,300" > '+unsafeWindow.unitcost["unt4"][0]+' </option>\
        <option value="0,275" > '+unsafeWindow.unitcost["unt5"][0]+' </option>\
        <option value="0,250" > '+unsafeWindow.unitcost["unt6"][0]+' </option>\
        <option value="1,1000" > '+unsafeWindow.unitcost["unt7"][0]+' </option>\
        <option value="1,750" > '+unsafeWindow.unitcost["unt8"][0]+' </option>\
        <option value="1,150" > '+unsafeWindow.unitcost["unt9"][0]+' </option>\
        <option value="1,100" > '+unsafeWindow.unitcost["unt10"][0]+' </option>\
        <option value="1,120" > '+unsafeWindow.unitcost["unt11"][0]+' </option>\
        <option value="1,80" > '+unsafeWindow.unitcost["unt12"][0]+' </option>\
        </select></div>\
        </td></tr>\
         </table><span style="vertical-align:middle;" id=altInput></span></div><SPAN id=allListOut></span>';
      t.cont.innerHTML = m;
      document.getElementById('allPlayName').addEventListener ('keypress', function(e) {if ( e.which == 13)  document.getElementById('playSubmit').click();}, false);
      document.getElementById('allAllName').addEventListener ('keypress', function(e) {if ( e.which == 13)  document.getElementById('allSubmit').click();}, false);
      
      document.getElementById('allSubmit').addEventListener ('click', t.eventSubmit, false);
      document.getElementById('playSubmit').addEventListener ('click', t.eventPlayerSubmit, false);
      document.getElementById('allAllName').addEventListener ('focus', function (){document.getElementById('ptallErr').innerHTML='';}, false);
      document.getElementById('allPlayName').addEventListener ('focus', function (){document.getElementById('ptplayErr').innerHTML='';}, false);
      document.getElementById('allListSubmit').addEventListener ('click', t.eventListSubmit, false);
      document.getElementById('idMyAllSubmit').addEventListener ('click', t.showMyAlliance, false);
      document.getElementById('idFindETASelect').addEventListener ('click', t.handleEtaSelect, false);
      document.getElementById('idFindETASelect').disabled = true;
      t.ModelCity=Cities.cities[0];
      t.curPage = 0;
      t.MaxPage = -1;
      t.state = 1;
    }
  },

  pName : '',
  eventPlayerSubmit : function (){
    var t = Tabs.AllianceList;
    document.getElementById('ptplayErr').innerHTML='';
    var name = document.getElementById('allPlayName').value;
    name = name.replace(/\'/g,"_");
    t.pName = name;
    if (name.length < 3){
      document.getElementById('ptplayErr').innerHTML = 'Enter at least 3 characters';
      return;
    }
    document.getElementById('altInput').innerHTML = '';
    document.getElementById('allListOut').innerHTML = '<BR><BR><CENTER>looking ...</center>';
    t.fetchPlayerList (name, t.eventGotPlayerList);
  },
  
  eventGotPlayerList : function (rslt){
    var t = Tabs.AllianceList;
    if (!rslt.ok){
      document.getElementById('allListOut').innerHTML = rslt.errorMsg;
      return;
    }
    t.playerList = rslt.matchedUsers;
    var uList = [];
    for (k in rslt.matchedUsers)
      uList.push (rslt.matchedUsers[k].userId);     
    t.fetchPlayerStatus (uList, function(r){t.eventGotPlayerOnlineList(r)});    
  },    
    
  eventGotPlayerOnlineList : function (rslt){
    var t = Tabs.AllianceList;
    if (!rslt.ok){
      document.getElementById('allListOut').innerHTML = rslt.errorMsg;
      return;
    }
    var m = '<DIV class=ptstat>Showing players found <B>"'+ t.pName +'"</b></div>\
      <DIV style="height:575px; max-height:575px; overflow-y:auto">\
      <TABLE width=100% align=center class=ptTab cellspacing=0><TR style="font-weight:bold"><TD>name &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp</td>\
      <TD align=right>user iD &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp</td><TD>Might &nbsp &nbsp</td><TD> &nbsp; on-line</td><TD> &nbsp;Facebook &nbsp; </td><TD width=75%>see</td></tr>';
    var row=0;
    var cl='';
    for (k in t.playerList){
      var u = t.playerList[k];
      if (++row % 2)
        cl = 'class=ptOddrow ';
      else
        cl = '';
      m += '<TR '+ cl +'valign=top><TD>'+ u.genderAndName +'</td><TD><A target="_tab" href="http://koc.dunno.com/index.sjs?f=ServersByUser&user_id='+ u.userId +'">' + u.userId + '</a></SPAM></td><TD align=right>'+ addCommasInt(u.might) +'</td>\
          <TD>'+ (rslt.data[u.userId]?"&nbsp;<SPAN class=boldDarkRed>on-line</span>":"") +'</td>\
          <TD align=center><A target="_tab" href="http://www.facebook.com/profile.php?id='+ u.fbuid +'">Perfil</a></td>\
          <TD><SPAN onclick="PTpd(this, '+ u.userId +')"><A>details</a> &nbsp; <BR></span><SPAN onclick="PTpl2(this,'+ u.userId+','+rslt.data[u.userId]+')"><A>classification</a><BR></span><SPAN onclick="PCplo(this, \''+ u.userId +'\')"><A>Last Login</a></span></td></tr>';
    }
    m += '</table></div>';
    document.getElementById('allListOut').innerHTML = m;
  },
  asName : '',
    eventPlayerUIDSubmit : function (){
    var t = Tabs.AllianceList;
    document.getElementById('ptplayErr').innerHTML='';
    var uid = document.getElementById('allPlayName').value;

	var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
    params.uid = uid;
    MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/getUserGeneralInfo.php" + unsafeWindow.g_ajaxsuffix, {
      method: "post",
      parameters: params,
      onSuccess: function (rslt) {
	  t.asName = rslt.userInfo[0].name;
      },
      onFailure: function (rslt) {
           document.getElementById('allListOut').innerHTML = '<BR><BR><CENTER>Looking ... not found</center>';
		   return;
      },
    });
    t.pName = t.asName;
    document.getElementById('altInput').innerHTML = '';
    document.getElementById('allListOut').innerHTML = '<BR><BR><CENTER>looking...</center>';
    t.fetchPlayerList (t.asName, t.eventGotPlayerList);
  },
	
  clickedPlayerDetail : function (span, uid){
    var t = Tabs.AllianceList;
    span.onclick = '';
    span.innerHTML = "looking for details ...";
    t.fetchPlayerInfo (uid, function (r) {t.gotPlayerDetail(r, span)});
  },

  clickedPlayerLeaderboard : function (span, uid){
    var t = Tabs.AllianceList;
    span.onclick = '';
    span.innerHTML = "collecting information on classification ...";
    t.fetchLeaderboard (uid, function (r) {t.gotPlayerLeaderboard(r, span)});
  },

  clickedPlayerLeaderboard2 : function (span, uid,status){
    var t = Tabs.AllianceList;
    span.onclick = '';
    span.innerHTML = "looking for information on classification ... ";
    t.fetchLeaderboard (uid, function (r) {t.gotPlayerLeaderboard2(r, span,uid,status)});
  },
  
  clickedPlayerGetLastLogin : function (span, uid){
     var t = Tabs.AllianceList;
     span.onclick = '';
     span.innerHTML = "looking login date ...";
     t.fetchPlayerLastLogin (uid, function (r) {t.gotPlayerLastLogin(r, span)});
   },

  gotPlayerLeaderboard2 : function (rslt,span,uid,status){
    var t = Tabs.AllianceList;
    if (!rslt.ok){
      span.innerHTML = rslt.errorMsg;
      return;
    }
    if (rslt.totalResults == 0){
      span.innerHTML = '<B>Leaderboard:</b> Not found! (misted?)';
      return;
    }
    var myA = getMyAlliance ();
    t.dat = [];
    var p = rslt.results[0];
        if ( myA[0] == p.allianceId)
           t.friendEta = true;
        else
           t.friendEta = false;
        for (var c=0; c<p.cities.length; c++){
          t.dat.push ([p.displayName, parseInt(p.might), p.officerType, parseInt(p.numCities), parseInt(p.cities[c].tileLevel),
               parseInt(p.cities[c].xCoord), parseInt(p.cities[c].yCoord), p.cities[c].cityName, 0, status,0,p.userId]);
        }
        t.setDistances (Cities.cities[0].x, Cities.cities[0].y);
        t.ModelCity=Cities.cities[0];
        t.setEta();
        t.fetchPlayerLastLogin (uid, function (r) {t.displayPlayer(p.allianceName,r)});
  },
  
  
  gotPlayerLeaderboard : function (rslt, span){
    var t = Tabs.AllianceList;
    if (!rslt.ok){
      span.innerHTML = rslt.errorMsg;
      return;
    }
    if (rslt.totalResults == 0){
      span.innerHTML = '<B>Leaderboard:</b> Not found! (misted?)';
      return;
    }
    var p = rslt.results[0];
    var an = p.allianceName;
    if (!an || an=='' || p.officerType==4)
      an = 'none';
    else
      an += ' ('+ officerId2String(p.officerType) +')';
    pStr = JSON2.stringify(p);
    logit (pStr);
    m = '<TABLE cellspacing=0 class=ptTab><TR><TD><B>classification: </b></td><TD colspan=2> might: '+ p.might  +' &nbsp; Allianc: '+ an +'</td></tr>'; 
    for (var i=0; i<p.cities.length; i++){
      var c = p.cities[i];
      var created = '';
      if (c.dateCreated && c.dateCreated.substr(0,2)=='20')
        created = ' &nbsp; created: ' + c.dateCreated.substr(0,10);
      m += '<TR><TD align=right><B>city#'+ (i+1) +':</b></td><TD> &nbsp; '+ c.cityName 
      +'</a>) (<a onclick="pbGotoMap ('+ c.xCoord +',' +c.yCoord+ ')">'+ c.xCoord +','+ c.yCoord +'</a>)</td><TD width=75%> &nbsp; level: '
        + c.tileLevel +' &nbsp; status: '+ cityStatusString (c.cityStatus) + created +'</td></tr>';
    }  
    span.innerHTML = m + '</table>';
  },
    
  gotPlayerDetail : function (rslt, span){
    var t = Tabs.AllianceList;
    if (!rslt.ok){
      span.innerHTML = rslt.errorMsg;
      return;
    }
    var u = rslt.userInfo[0];
    var a = 'Ninguna';
    if (u.allianceName)
      a = u.allianceName +' ('+ getDiplomacy(u.allianceId) + ')';
    var m = '<TABLE cellspacing=0 class=ptTab><TR><TD><B>details:</b> &nbsp; </td><TD>Alliance: '+ a +' &nbsp; cities: '
          + u.cities +' &nbsp; population: '+ u.population +'</td></tr><TR><TD></td><TD>provinces: ';
    var pids = u.provinceIds.split (',');
    var p = [];
    for (var i=0; i<pids.length; i++)
      p.push(unsafeWindow.provincenames['p'+pids[i]]);
    span.innerHTML = m + p.join (', ') +'</td></tr></table>';
  },

  eventMyAllianceSubmit : function (){
    var t = Tabs.AllianceList;
    document.getElementById('allListOut').innerHTML = '<BR><BR><CENTER>looking ...</center>';
    t.fetchAllianceMemberList (getMyAlliance()[0], null, t.eventGotMemberList);
  },  
    
  aName : '',
  eventSubmit : function (){
    var t = Tabs.AllianceList;
    document.getElementById('ptallErr').innerHTML='';
    t.aName = document.getElementById('allAllName').value;
    if (t.aName.length < 3){
      document.getElementById('ptallErr').innerHTML = 'Enter at least 3 characters';
      return;
    }
    var myA = getMyAlliance ();
    document.getElementById('altInput').innerHTML = '';
    document.getElementById('allListOut').innerHTML = '<BR><BR><CENTER>looking ...</center>';
    if (myA[0]!=0 && myA[1].toLowerCase().indexOf(t.aName.toLowerCase())>=0 )
      t.fetchAllianceList (t.aName, myA[0], t.eventGotAllianceList);
    else
      t.fetchAllianceList (t.aName, null, t.eventGotAllianceList);
  },

  eventListSubmit : function (){
    var t = Tabs.AllianceList;
    var myA = getMyAlliance ();
    document.getElementById('allListOut').innerHTML = '<BR><BR><CENTER>looking ...</center>';
    if (myA[0]!=0  ) {
       t.curPage=1;
       t.fetchOtherAllianceInfo ( 1, t.eventGotOtherAlliancePage);
    }
    else {
       document.getElementById('allListOut').innerHTML = 'Youre not in an alliance.';
    }
  },

  eventGotAllianceList : function (rslt){
    var t = Tabs.AllianceList;
    if (!rslt.ok){
      document.getElementById('allListOut').innerHTML = rslt.errorMsg;
      return;
    }
    var m = '<DIV class=ptstat>Showing alliances found <B>"'+ t.aName +'"</b></div>\
    <TABLE><TR style="font-weight:bold"><TD class=xtab>Aliance</td><TD class=xtab>Rango</td><TD class=xtab>members</td>\
        <TD align=right class=xtab>might</td><TD class=xtab>diplomacy</td><TD class=xtab></td></tr>';
    for (k in rslt.alliancesMatched){
      var all = rslt.alliancesMatched[k];
      var dip = '';
      if (all.relation && all.relation==1)
        dip = 'Amigables';
      else if (all.relation && all.relation==2)
        dip = 'Hostiles';
      m += '<TR><TD class=xtab>'+ all.allianceName +'</td><TD align=right class=xtab>'+ all.ranking +'</td><TD align=right class=xtab>'+ all.membersCount +'</td>\
       <TD align=right class=xtab>'+ addCommasInt(all.might) +'</td><TD class=xtab>'+ dip +'</td>\
       <TD class=xtab><a onclick="PTgetMembers('+ all.allianceId +')">View Members</a></td>\
        <TD class=xtab><a onclick="PTPaintMembers('+ all.allianceId +')">'+unsafeWindow.g_js_strings.commonstr.viewmap+'</a></td></tr>';
    }
    document.getElementById('allListOut').innerHTML = m;
  },


  showMyAlliance : function (){
    var t = Tabs.AllianceList;
    var myA = getMyAlliance ();
    document.getElementById('allListOut').innerHTML = '<BR><BR><CENTER> ...</center>';
    if (myA[0]!=0  ) {
       t.eventGetMembers(myA[0]);
    }
    else {
       document.getElementById('allListOut').innerHTML = 'Youre not in an alliance.';
    }
  },

  curPage : 0,
  MaxPage : 0,

  eventListNext : function (amt){
    var t = Tabs.AllianceList;
    if( parseInt(amt) >= 9999 )
       t.curPage = t.MaxPage;
    else {
	    t.curPage = parseInt(t.curPage) + parseInt(amt);
	    if ( t.curPage > t.MaxPage) {
	      t.curPage = t.MaxPage;
	    }
    }
    document.getElementById('allListOut').innerHTML = '<BR><BR><CENTER>looking...</center>';
    t.fetchOtherAllianceInfo (t.curPage, t.eventGotOtherAlliancePage);
  },

  eventListPrev : function (amt){
    var t = Tabs.AllianceList;
    if(amt <= -1)
       t.curPage = 1;
    else {
	    t.curPage-=amt;
	    if ( t.curPage < 1 ) {
	      t.curPage = 1;
	    }
    }
    document.getElementById('allListOut').innerHTML = '<BR><BR><CENTER>looking...</center>';
    t.fetchOtherAllianceInfo (t.curPage, t.eventGotOtherAlliancePage);
  },

  gotoPage : function (){
    var t = Tabs.AllianceList;
    if (t.MaxPage < 0 ) {
      document.getElementById('allListOut').innerHTML = 'List Alliances first.';
      return;
    }
    if (t.MaxPage < 0 || val > t.MaxPage || val < 1) {
      document.getElementById('allListOut').innerHTML = 'Page number out of range';
      return;
    }
    document.getElementById('allListOut').innerHTML = '<BR><BR><CENTER> ...</center>';
    t.fetchOtherAllianceInfo (t.curPage, t.eventGotOtherAlliancePage);
  },

  eventGotOtherAlliancePage : function (rslt){
    var t = Tabs.AllianceList;
    if (!rslt.ok){
      document.getElementById('allListOut').innerHTML = rslt.errorMsg;
      return;
    }
    t.MaxPage=rslt.noOfPages;
    var m = '<div style="overflow:auto; height:556px;width:620px;"><TABLE><thead><TR style="font-weight:bold"> \
        <th class=xtab>Aliance</th><th class=xtab>Rank</th><th class=xtab>members</th>\
        <th class=xtab>might</th><th class=xtab>Diplomacia</th><th class=xtab></th><th class=xtab></th></tr></thead><tbody>';
    document.getElementById('allListOut').innerHTML = m;
    for (var i=0; i<rslt.otherAlliances.length; i++) {
      var alliance = rslt.otherAlliances[i];
      var dip = '';
      dip = getDiplomacy(alliance.allianceId);
      m += '<TR class="'+ dip + '"><TD class=xtab>' + alliance.name +'</td><TD align=right class=xtab>'+ alliance.ranking +'</td><TD align=right class=xtab>'+ alliance.membersCount +'</td>\
       <TD align=right class=xtab>'+ addCommasInt(alliance.might) +'</td><TD class=xtab>'+ dip +'</td>\
       <TD class=xtab><a onclick="PTgetMembers('+ alliance.allianceId +')">'+uW.g_js_strings.commonstr.members+'</a></td>\
       <TD class=xtab><a onclick="PTPaintMembers('+ alliance.allianceId +')">'+uW.g_js_strings.commonstr.viewmap+'</a></td></tr>';
    }
    m += '</tbody></TABLE><div style="font-weight:bold"; height:20px;width:560px; ><span> <a onclick="PTalClickPrev(-1)"> [Principio] </a><a onclick="PTalClickPrev(10)"> [-10] </a><a onclick="PTalClickPrev(5)"> [-5] </a><a onclick="PTalClickPrev(1)"> [Anterior] </a> \
          <a onclick="PTalClickNext(1)"> [Siguiente] </a><a onclick="PTalClickNext(5)"> [+5] </a><a onclick="PTalClickNext(10)"> [+10] </a><a onclick="PTalClickNext(9999)"> [Final] </a> </span></div>';
    m += '</div>';
    document.getElementById('allListOut').innerHTML = m;
 },

  showCurrentPage : function (){
    var t = Tabs.AllianceList;
    var myA = getMyAlliance ();

    document.getElementById('allListOut').innerHTML = '<BR><BR><CENTER> ...</center>';
    if (myA[0]!=0  ) {
       t.fetchOtherAllianceInfo ( t.curPage, t.eventGotOtherAlliancePage);
    }
    else {
       t.fetchOtherAllianceInfo ( t.curPage, t.eventGotOtherAlliancePage);
    }
  },

  eventGotMemberList : function (rslt){
    var t = Tabs.AllianceList;
    if (!rslt.ok){
      document.getElementById('allListOut').innerHTML = rslt.errorMsg;
      return;
    }
    t.memberListRslt = rslt;
    var uList = [];
    for (k in rslt.results)
      uList.push (rslt.results[k].userId);     
    t.fetchPlayerStatus (uList, function(r){t.eventGotMemberOnlineList(r)});    
  },    
    
  eventGotMemberOnlineList : function (rslt){
    var t = Tabs.AllianceList;
    var numInvalid = 0;
    var numPlayers = 0;
    var myA = getMyAlliance ();
    t.dat = [];
    for (var i=0; i<t.memberListRslt.results.length; i++){
      p = t.memberListRslt.results[i];
      if (p.userId == 0){
        ++numInvalid;
      } else {
        ++numPlayers;
        if ( myA[0] == p.allianceId)
           t.friendEta = true;
        else
           t.friendEta = false;
        for (var c=0; c<p.cities.length; c++){
          t.dat.push ([p.displayName, parseInt(p.might), p.officerType, parseInt(p.numCities), parseInt(p.cities[c].tileLevel),
               parseInt(p.cities[c].xCoord), parseInt(p.cities[c].yCoord), p.cities[c].cityName, 0, rslt.data[p.userId]?1:0,'NA',p.userId]);
        }
      }
    }
    t.setDistances (Cities.cities[0].x, Cities.cities[0].y);
    t.ModelCity=Cities.cities[0];
    t.setEta();
    t.displayMembers (t.memberListRslt.allianceName, numPlayers);
  },

  // sort and display
  reDisp : function (){
    var t = Tabs.AllianceList;
    function sortFunc (a, b){
      var t = Tabs.AllianceList;
      if (typeof(a[t.sortColNum]) == 'number'){
        if (t.sortDir > 0)
          return a[t.sortColNum] - b[t.sortColNum];
        else
          return b[t.sortColNum] - a[t.sortColNum];
      } else if (typeof(a[t.sortColNum]) == 'boolean'){
// TODO !!        
return 0;        
      } else {
        if (t.sortDir > 0)
          return a[t.sortColNum].localeCompare(b[t.sortColNum]);
        else
          return b[t.sortColNum].localeCompare(a[t.sortColNum]);
      }
    }
    t.dat.sort (sortFunc);
    var m = '';
    for (var i=0; i<t.dat.length; i++){
      m += '<TR style="max-height:30px"><TD class=xxtab>'+ t.dat[i][0] +'</td><TD align=right class=xxtab>'+ addCommasInt(t.dat[i][1]) 
         +'</td><TD align=center class=xxtab>'+ t.dat[i][3] +'</td><TD class=xxtab>'+ officerId2String(t.dat[i][2])                       
         +'</td><TD class=xxtab>'+ (t.dat[i][9]?'<SPAN class=boldDarkRed>on-line</span>':'') +'</td><TD class=xxtab>'+ t.dat[i][7] +'</td><TD align=right class=xxtab>'+ t.dat[i][4] 
         +'</td><TD align=center class=xxtab><DIV onclick="pbGotoMap('+ t.dat[i][5] +','+ t.dat[i][6] +')"><A>'+ t.dat[i][5] +','+ t.dat[i][6] +'</a></div></td>\
            <TD align=right class=xxtab style="padding-right:20px;">'+ t.dat[i][8].toFixed(2) +'</td>\
         </td><TD  nowrap class=xxtab>'+ (t.dat[i][10]?'<SPAN>'+ (t.dat[i][10]>0?timestr(t.dat[i][10],1):'NA') +'</span>':'<SPAN>NA</span>') +'<td class=xxtab><SPAN onclick="PCplo(this, \''+ t.dat[i][11] +'\')"><A>Last Login</a></span><td><TD></tr>';
    }
    var tbody = document.getElementById('allBody');
    tbody.style.maxHeight = '';
    tbody.innerHTML = m;


    if (parseInt(tbody.clientHeight) > 470){
      tbody.style.height = '470px';
      tbody.style.maxHeight = '470px';
    }
  },


  setDistances : function (x, y){
    var t = Tabs.AllianceList;
    for (var i=0; i<t.dat.length; i++)
      t.dat[i][8] = distance (x, y, t.dat[i][5], t.dat[i][6]);
  },

  friendEta:false,

  setEta : function (){
    var t = Tabs.AllianceList;
    for (var i=0; i<t.dat.length; i++) {
      if (t.dat[i][8]) {
        var eta = t.estETA(parseFloat(t.dat[i][8]));
        if (t.friendEta)
           t.dat[i][10] = eta.friendETA;
        else
           t.dat[i][10] = eta.ETA;
      }
    }
  },



  handleEtaSelect : function (){
    var t = Tabs.AllianceList;
    t.setEta();
    t.reDisp();
  },

  sortColNum : 8,
  sortDir : 1,

  displayMembers : function (allName, numPlayers){
    var t = Tabs.AllianceList;
    function alClickSort (e){
      var t = Tabs.AllianceList;
      var newColNum = e.id.substr(8);
      document.getElementById('clickCol'+t.sortColNum).className = 'clickable';
      e.className='clickable clickableSel';
      if (newColNum == t.sortColNum)
        t.sortDir *= -1;
      else
        t.sortColNum = newColNum;
      t.reDisp();
    }
    unsafeWindow.PTalClickSort = alClickSort;
    var m = '<STYLE>.clickable{background-color:#ddd; border:2px outset; border-color:#555; padding-left:5px; padding-right:5px}\
            .clickableSel{background-color:#ffffcc;}\
            .xxtab{background-color:none; padding-left:5px; padding-right:5px;} </style>\
      <DIV class=ptstat ><TABLE id=tabAllMembers cellpadding=0  width=100%><TR font-weight:bold"><TD class=xtab> &nbsp; '+ allName +'</td>\
        <TD class=xtab width=80% align=center>distances from <SPAN id=distFrom>'+ Cities.cities[0].name +' ('+ Cities.cities[0].x +','+ Cities.cities[0].y +')</span></td><TD class=xtab align=right>'+ numPlayers +' players found &nbsp; </td></tr></table></div>\
      <div style="max-height:470px; height:470px; overflow-y:auto;"><TABLE id=tabAllMembers align=center cellpadding=0 cellspacing=0><THEAD style="overflow-y:hidden;">\
      <TR style="font-weight:bold"><TD id=clickCol0 onclick="PTalClickSort(this)" class=clickable><A><DIV>player</div></a></td>\
        <TD id=clickCol1 onclick="PTalClickSort(this)" class=clickable align=center><A><DIV>might</a></div></td>\
        <TD id=clickCol3 onclick="PTalClickSort(this)" class=clickable><A><DIV>cities</a></div></td>\
        <TD id=clickCol2 onclick="PTalClickSort(this)" class=clickable align=center><A><DIV>Rank</a></div></td>\
        <TD id=clickCol9 onclick="PTalClickSort(this)" class=clickable align=center><A><DIV>status</a></div></td>\
        <TD id=clickCol7 onclick="PTalClickSort(this)" class=clickable><A><DIV>city</a></div></td>\
        <TD id=clickCol4 onclick="PTalClickSort(this)" class=clickable><A><DIV>level</a></div></td>\
        <TD id=clickCol5 onclick="PTalClickSort(this)" class=clickable><A><DIV>coordinates</a></div></td>\
        <TD id=clickCol8 onclick="PTalClickSort(this)" class=clickable><A><DIV>distance</a></div></td>\
        <TD id=clickCol10 onclick="PTalClickSort(this)" class=clickable><A><DIV>estimated time</a></div></td>\
        <TD class=clickable><A><DIV>Last login</a></div></td></tr></thead>\
        <TBODY id=allBody style="background-color:#ffffff;"></tbody></table></div>';
      
    document.getElementById('allListOut').innerHTML = m; //style="top:670px; left:0px; position:absolute;
    document.getElementById('altInput').innerHTML = '<HR><TABLE width=100% cellpaddding=0><TR align=center>\
        <TD class=xtab>Show distance from: &nbsp; X: <INPUT size=2 type=text id=plyrX /> Y: <INPUT size=2 type=text id=plyrY /> &nbsp; or select city: <span id=dmcoords></span></td></tr></table>';
    document.getElementById('clickCol'+t.sortColNum).className = 'clickable clickableSel';

    t.reDisp();
    new CdispCityPicker ('plyrdcp', document.getElementById ('dmcoords'), true, t.eventCoords, 0).bindToXYboxes(document.getElementById('plyrX'), document.getElementById('plyrY'));
    
    document.getElementById('dmcoords').addEventListener ('click', function(){ 
    },false);	
    document.getElementById('idFindETASelect').disabled = false;
  },
  
  displayPlayer : function (allName,rslt){
    var t = Tabs.AllianceList;
    function alClickSort (e){
      var t = Tabs.AllianceList;
      var newColNum = e.id.substr(8);
      document.getElementById('clickCol'+t.sortColNum).className = 'clickable';
      e.className='clickable clickableSel';
      if (newColNum == t.sortColNum)
        t.sortDir *= -1;
      else
        t.sortColNum = newColNum;
      t.reDisp();
    }
    unsafeWindow.PTalClickSort = alClickSort;
    var m = '<STYLE>.clickable{background-color:#ddd; border:2px outset; border-color:#555; padding-left:5px; padding-right:5px}\
            .clickableSel{background-color:#ffffcc;}\
            .xxtab{background-color:none; padding-left:5px; padding-right:5px;} </style>\
            <DIV class=ptstat ><TABLE id=tabAllMembers cellpadding=0  width=100%><TR font-weight:bold"><TD class=xtab>Aliance: '+ allName +'</td>\
              <TD class=xtab width=80% align=center>Last Login: <SPAN id=lastlogin>'+  rslt.playerInfo.lastLogin+'</span></td><TD class=xtab align=right></td></tr></table></div>\
      <div style="max-height:470px; height:470px; overflow-y:auto;"><TABLE id=tabAllMembers align=center cellpadding=0 cellspacing=0><THEAD style="overflow-y:hidden;">\
      <TR style="font-weight:bold"><TD id=clickCol0 onclick="PTalClickSort(this)" class=clickable><A><DIV>player</div></a></td>\
        <TD id=clickCol1 onclick="PTalClickSort(this)" class=clickable align=center><A><DIV>might</a></div></td>\
        <TD id=clickCol3 onclick="PTalClickSort(this)" class=clickable><A><DIV>cities</a></div></td>\
        <TD id=clickCol2 onclick="PTalClickSort(this)" class=clickable align=center><A><DIV>Rank</a></div></td>\
        <TD id=clickCol9 onclick="PTalClickSort(this)" class=clickable align=center><A><DIV>status</a></div></td>\
        <TD id=clickCol7 onclick="PTalClickSort(this)" class=clickable><A><DIV>city</a></div></td>\
        <TD id=clickCol4 onclick="PTalClickSort(this)" class=clickable><A><DIV>level</a></div></td>\
        <TD id=clickCol5 onclick="PTalClickSort(this)" class=clickable><A><DIV>coordinates</a></div></td>\
        <TD id=clickCol8 onclick="PTalClickSort(this)" class=clickable><A><DIV>distance</a></div></td>\
        <TD id=clickCol10 onclick="PTalClickSort(this)" class=clickable><A><DIV>estimated time</a></div></td>\
		<TD class=clickable><A><DIV>last login n</a></div></td></tr></thead>\
      <TBODY id=allBody style="background-color:#ffffff;"></tbody></table></div>\
      <DIV  width:100%; style="top:670px; left:0px; position:absolute; background-color:#ffffff; border-top:1px solid; margin-top:8px; color:#700; font-weight:bold;">';
    document.getElementById('allListOut').innerHTML = m;  //style="top:670px; left:0px; position:absolute;
    document.getElementById('altInput').innerHTML = '<HR><TABLE width=100% cellpaddding=0><TR align=center>\
        <TD class=xtab>Show distance from: &nbsp; X: <INPUT size=2 type=text id=plyrX /> Y: <INPUT size=2 type=text id=plyrY /> &nbsp; or select city: <span id=dmcoords></span></td></tr></table>';
    document.getElementById('clickCol'+t.sortColNum).className = 'clickable clickableSel';
    t.reDisp();
    new CdispCityPicker ('plyrdcp', document.getElementById ('dmcoords'), true, t.eventCoords, 0).bindToXYboxes(document.getElementById('plyrX'), document.getElementById('plyrY'));
    document.getElementById('idFindETASelect').disabled = false;
  },
  
  eventCoords : function (city, x, y){
    var t = Tabs.AllianceList;
    var m = '';
    if (city != null)
      m = city.name +' ('+ city.x +','+ city.y +')';
    else
      m = x +','+ y;
    var distFrom = document.getElementById('distFrom');
    if (distFrom)
        distFrom.innerHTML = m;
    t.ModelCity=city;
    t.JumpCity(city.name);
    t.setDistances(x,y);
    t.setEta();
    t.reDisp();
  },

  eventGetMembers : function (aid){
    var t = Tabs.AllianceList;
    document.getElementById('allListOut').innerHTML = '<BR><BR><CENTER>looking ...</center>';
    t.fetchAllianceMemberList (aid, null, t.eventGotMemberList);
  },

  fetchAllianceMemberList : function (allianceId, allianceName, notify) {
    var t = Tabs.AllianceList;
    var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
    params.perPage = 100;
    if (allianceName)
      params.allianceName = allianceName;
    if (allianceId && allianceId != 0)
      params.allianceId = allianceId;
    new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/getUserLeaderboard.php" + unsafeWindow.g_ajaxsuffix, {
      method: "post",
      parameters: params,
      onSuccess: function (rslt) {
        notify (rslt);
      },
      onFailure: function (rslt) {
        notify ({errorMsg:'AJAX error'});
      },
    });
  },

  GetDataForMap : function (allianceId) {
    var t = Tabs.AllianceList;
    var params = uW.Object.clone(uW.g_ajaxparams);
    var Data=[];
    params.perPage = 100;
    params.allianceId = allianceId;
    new MyAjaxRequest(uW.g_ajaxpath + "ajax/getUserLeaderboard.php" + uW.g_ajaxsuffix, {
      method: "post",
      parameters: params,
      onSuccess: function (rslt) {
      	var city = '';
      	for (var i=0; i<rslt.results.length; i++) {
      		//alert(rslt.results[i].toSource());
      	    if (rslt.results[i]['userId'] !=0){
	      	    player = rslt.results[i]['cities'];
	      	    for (var ii=0; ii<player.length; ii++) 
	      			Data.push ({X:player[ii]['xCoord'],Y:player[ii]['yCoord']});
	    	}  	
        }
        if (Data != []) t.PaintDataOnMap(Data);
      },
      onFailure: function (rslt) {
        notify ({errorMsg:'AJAX error'});
      },
    });
  },
  
  PaintDataOnMap : function(Data){
  		var provMapCoordsA = {imgWidth:710, imgHeight:708, mapWidth:670, mapHeight:670, leftMargin:31, topMargin:19};  
  		var map = '<DIV id=ptAlliProvMap style="height:'+ provMapCoordsA.imgHeight +'px; width:'+ provMapCoordsA.imgWidth +'px; background-repeat:no-repeat; background-image:url(\''+ URL_PROVINCE_MAP +'\')"></div>';
  		document.getElementById('allListOut').innerHTML = map;
		var eMap =  document.getElementById('ptAlliProvMap');
		for (var cc=0; cc<Seed.cities.length; cc++) {
		    var city = Seed.cities;
		    var Xplot = parseInt((provMapCoordsA.mapWidth * parseInt(city[cc][2])) / 750);
		    var Yplot = parseInt((provMapCoordsA.mapHeight * parseInt(city[cc][3])) / 750);
		    var cf = document.createElement ('div');
		    cf.style.background = 'black';
		    cf.style.opacity = '1.0';
		    cf.style.position='relative';
		    cf.style.display='block';
		    cf.style.width='14px';
		    cf.style.height='16px';
		    cf.style.border='1px solid #fff';
		    cf.style.color = 'white';
		    cf.style.textAlign = 'center';
		    cf.style.top = (Yplot+provMapCoordsA.topMargin-(cc*16)-8) +'px';      
		    cf.style.left = (Xplot+provMapCoordsA.leftMargin-7) +'px';
		    cf.innerHTML = (cc+1) +'';
		    eMap.appendChild(cf);
		}

		for (var i=0;i<Data.length;i++) {
			var x = parseInt(Data[i]['X']);
			var y = parseInt(Data[i]['Y']);
  	        var xplot = parseInt((provMapCoordsA.mapWidth * x) / 750);
  	        var yplot = parseInt((provMapCoordsA.mapHeight * y) / 750);
  	    	var ce= document.createElement ('div');
  	    		ce.style.background = 'red';
  	    		ce.style.opacity = '1.0';
  	    		ce.style.position='relative';
  	    		ce.style.display='block';
  	    		ce.style.width='4px';
  	    		ce.style.height='4px';
  	    		ce.style.color = 'white';
  	    		ce.style.textAlign = 'center';
  	    	ce.style.top = (yplot+provMapCoordsA.topMargin -(4*i)-((Seed.cities.length)*18)) +'px';      
  	    	ce.style.left = (xplot+provMapCoordsA.leftMargin -2) +'px';
  	    	ce.innerHTML = '<DIV onclick="pbGotoMap('+ x +','+ y +')">&nbsp;</div>';
  	        eMap.appendChild(ce);
  	   }
  	   
  	   
  },
  

  fetchLeaderboard : function (uid, notify) {
    var t = Tabs.AllianceList;
    var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
    params.userId = uid;
    new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/getUserLeaderboard.php" + unsafeWindow.g_ajaxsuffix, {
      method: "post",
      parameters: params,
      onSuccess: function (rslt) {
        notify (rslt);
      },
      onFailure: function (rslt) {
        notify ({errorMsg:'AJAX error'});
      },
    });
  },

  fetchAllianceList : function (allianceName, myAid, notify) {   // at least 3 chars :)
    var t = Tabs.AllianceList;
    function combineResults (rsltA, rsltM, notify){
      if (!rsltA.ok){
        if (rsltA.msg.indexOf("There were no alliances with ")!=0 || !rsltM.ok){
          notify (rsltA);
          return;
        }
        rsltA.ok = true;
        rsltA.count = 0;
        rsltA.alliancesMatched = {};
      }
      if (rsltM.ok){
        rsltA.alliancesMatched['a'+rsltM.allianceInfo.allianceId] = {allianceId: rsltM.allianceInfo.allianceId, allianceName: rsltM.allianceInfo.allianceName,
              membersCount: rsltM.allianceInfo.members, relation: null, might: rsltM.allianceInfo.might, ranking: rsltM.allianceInfo.ranking};
        ++rsltA.count;
      }
      notify (rsltA);
    }
    var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
    params.allianceName = allianceName;
    new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/allianceGetSearchResults.php" + unsafeWindow.g_ajaxsuffix, {
      method: "post",
      parameters: params,
      onSuccess: function (rslt) {
        if (myAid!=null && myAid>0)
          t.fetchMyAllianceInfo  (function (r){ combineResults (rslt, r, notify)});
        else
          notify (rslt);
      },
      onFailure: function (rslt) {
        notify ({errorMsg:'AJAX error'});
      },
    });
  },

  fetchOtherAllianceInfo : function (pageNum, notify){    // as in alliance list, sorted by rank, 10 per page
    var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
    params.pageNo = pageNum;
    params.cityId = unsafeWindow.currentcityid;
    new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/allianceGetOtherInfo.php" + unsafeWindow.g_ajaxsuffix, {
      method: "post",
      parameters: params,
      onSuccess: function (rslt) {
        notify (rslt);
      },
      onFailure: function (rslt) {
        notify ({errorMsg:'AJAX error'});
      },
    });
  },

  fetchMyAllianceInfo : function (notify){
    var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
    new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/allianceGetInfo.php" + unsafeWindow.g_ajaxsuffix, {
      method: "post",
      parameters: params,
      onSuccess: function (rslt) {
        notify (rslt);
      },
      onFailure: function (rslt) {
        notify ({errorMsg:'AJAX error'});
      },
    });
  },

  fetchPlayerList : function (name, notify){  // at least 3 chars!! 
    var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
    params.searchName = name;
    params.subType = "ALLIANCE_INVITE";
    new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/searchPlayers.php" + unsafeWindow.g_ajaxsuffix, {
      method: "post",
      parameters: params,
      onSuccess: function (rslt) {
        notify (rslt);
      },
      onFailure: function (rslt) {
        notify ({errorMsg:'AJAX error'});
      },
    });
  },


  
  fetchPlayerInfo : function (uid, notify){
    var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
    params.uid = uid;
    new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/getUserGeneralInfo.php" + unsafeWindow.g_ajaxsuffix, {
      method: "post",
      parameters: params,
      onSuccess: function (rslt) {
        notify (rslt);
      },
      onFailure: function (rslt) {
        notify ({errorMsg:'AJAX error'});
      },
    });
  },
  
  fetchPlayerStatus : function (uidArray, notify){
    var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
    params.checkArr = uidArray.join(',');
    new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/getOnline.php" + unsafeWindow.g_ajaxsuffix, {
      method: "post",
      parameters: params,
      onSuccess: function (rslt) {
        notify (rslt);
      },
      onFailure: function (rslt) {
        notify ({errorMsg:'AJAX error'});
      },
    });
  },
  
  fetchPlayerLastLogin : function (uid, notify){
      var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
      params.pid = uid;
      new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/viewCourt.php" + unsafeWindow.g_ajaxsuffix, {
        method: "post",
        parameters: params,
        onSuccess: function (rslt) {
          notify (rslt);
        },
        onFailure: function (rslt) {
          notify ({errorMsg:'AJAX error'});
        },
      });
    },
    
    gotPlayerLastLogin : function (rslt, span){
        var t = Tabs.AllianceList;
        if (!rslt.ok){
          span.innerHTML = rslt.errorMsg;
          return;
        }
    
        var p = rslt.playerInfo;
        var lastLogin = rslt.playerInfo.lastLogin;
    
        if (lastLogin) {
          m = '<span style="color:black">Last login: '+lastLogin+'</span>';
        } else {
           m = '<span style="color:red">Not found login data: '+lastLogin+'</span>';
        }
        span.innerHTML = m + '';
      },

  ModelCity : {},

  estETA : function(dist) { // Need Relief Station Levels to estimate transport, reinf, or reassign times. 
    var t = Tabs.AllianceList;
    var ret={ETA:0,etaStr:'NA',friendETA:0,friendEtaStr:'NA'};    
    var cityID;
    if (dist <= 0) return ret;
    var EtaType = document.getElementById('idFindETASelect');
    var baseSpeedSel = EtaType.options[EtaType.selectedIndex].value;
    var m = baseSpeedSel.split(',');
    var horse = 0;
    var baseSpeed = 0;
    if(m) {
      horse = parseInt(m[0]);
      baseSpeed = parseInt(m[1]);
    }
    if (baseSpeed == 0) return ret;
    var mmLvl = parseInt(Seed.tech.tch11);//Magical Mapping
    var Speed = 0;
    if (horse){
      var hsLvl = parseInt(Seed.tech.tch12);//Alloy Horse Shoes
      Speed = baseSpeed * (1 + mmLvl/10.0) * (1 + hsLvl/20.0);
    }
    else {
      Speed = baseSpeed * (1 + mmLvl/10.0);
    }
    var gSpeed = 0;
    var estSec;
    if (Speed>0) {
      gSpeed = Speed/6000.0;//0.48333 mm=10, hs=9
      estSec = (parseFloat(dist)/gSpeed).toFixed(0);
    }
    ret.ETA = (parseInt((estSec+''))+30); 
    ret.etaStr = timestr (ret.ETA,1);
   if (t.ModelCity) {
      cityID = t.ModelCity.id;
      var building = getCityBuilding (cityID, 18);
      if (building) {
        fSpeed = Speed * (1 + parseInt(building.maxLevel)/2);
        gSpeed = fSpeed/6000;
        estSec = (dist/gSpeed).toFixed(0);
        ret.friendETA = parseInt((estSec+''))+30; 
        ret.friendEtaStr = timestr ((ret.friendETA+''),1);
      }
   }
    return ret;
  },
  
     JumpCity:function(city) {
   		var t = Tabs.AllianceList;
   		for (i=0;i<Seed.cities.length;i++) {
   			if (Seed.cities[i][1]==city) var cityNum=i;
   		}
   		cityNum++;
   		var obj = document.getElementById('citysel_'+cityNum);
	   	return t.ClickWin(window,obj,'click');
   },
   
   ClickWin:function(win,obj,evtName) {
   	var evt = win.document.createEvent("MouseEvents");
   	evt.initMouseEvent(evtName, true, true, win,
   		0, 0, 0, 0, 0, false, false, false, false, 0, null);
   	return !obj.dispatchEvent(evt);
   },
};

/****************************  script   ******************************/
Tabs.script = {
  tabOrder : 60,                    // order to place tab in top bar
  tabLabel : 'script',            // label to show in main window tabs
  tabDisabled : !ENABLE_TEST_TAB,
  myDiv : null,
  timer : null,
  forumlink :  'http://userscripts.org/scripts/show/135052',  
  
  init : function (div){    // called once, upon script startup
    var t = Tabs.script;
    t.myDiv = div;
    div.innerHTML = '<CENTER><iframe src="'+ t.forumlink +'" width="100%" height="500" name="board_in_a_box" <p> Your browser does not support embedded frames: You can access the site using this link: <a href="'+ t.forumlink +'"> userscripts.org </ a> </ p> </ iframe> <BR> </ center> ';
  },
  
  hide : function (){         // called whenever the main window is hidden, or another tab is selected
    var t = Tabs.script;
    mainPop.div.style.width = 750 + 'px';
  },
  
  show : function (){         // called whenever this tab is shown
    var t = Tabs.script;
    mainPop.div.style.width = 750 + 'px';
  },
}


/****************************  Map Tab   ******************************/
Tabs.map = {
 tabOrder : 30,                    // order to place tab in top bar
 tabLabel : 'Map',            // label to show in main window tabs
 tabDisabled : !ENABLE_TEST_TAB,
 myDiv : null,
 timer : null,

 init : function (div){    // called once, upon script startup
   var t = Tabs.map;
   t.myDiv = div;
   div.innerHTML = '<CENTER><iframe src="http://koc.dunno.com/index.sjs?f=KocMapViewer&server" width="100%" height="550" name="map_tab" <p>Ihr Browser kann leider keine eingebetteten Frames anzeigen: Sie k&ouml;nnen die eingebettete Seite &uuml;ber den folgenden Verweis aufrufen: <a href="'+ t.forumlink +'">Knights of Phoenix Forum</a></p> </iframe> <BR></center>';
 },
 
 hide : function (){
   var t = Tabs.map;
   mainPop.div.style.width = 750 + 'px';
 },
 
 show : function (){
   var t = Tabs.map;
   mainPop.div.style.width = 750 + 'px';
 },
}


/****************************  Training Calculator   ******************************/
Tabs.trainingcalc = {
  tabOrder : 20,                    // order to place tab in top bar
   tabLabel : 'Train Calc',
  tabDisabled : !ENABLE_TEST_TAB,
  myDiv : null,
  timer : null,
  
  
  init : function (div){    // called once, upon script startup
    var t = Tabs.trainingcalc;
    t.myDiv = div;
    div.innerHTML = '<CENTER><iframe src="http://www.rootsweb.ancestry.com/~gumby/traintime.html " width="100%" height="550" name="trainig_calculator" <p>Ihr Browser kann leider keine eingebetteten Frames anzeigen: Sie k&ouml;nnen die eingebettete Seite &uuml;ber den folgenden Verweis aufrufen: <a href="'+ t.forumlink +'">Knights of Phoenix Forum</a></p> </iframe> <BR></center>';
  },
  
  hide : function (){
    var t = Tabs.trainingcalc;
    mainPop.div.style.width = 750 + 'px';
  },

  show : function (){
    var t = Tabs.trainingcalc;
    mainPop.div.style.width = 750 + 'px';
  },
}


 /******* Crafting List ******
(array) 1 = [object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object]
    (object) 0 = [object Object]
      (string) recipe_id = 1
      (string) name = Crystal Song
      (string) output_item_id = 3000
      (null) consolation_item_id: null = null
      (string) category = 1
      (object) input = [object Object]
        (array) items = 

        (object) resources = [object Object]
          (string) 1 = 10500


      (object) requirements = [object Object]
        (string) building = 1

      (string) insurance_cost = 5
      (string) failure_chance = low

    (object) 1 = [object Object]
      (string) recipe_id = 2
      (string) name = Tricked Wind
      (string) output_item_id = 3001
      (null) consolation_item_id: null = null
      (string) category = 1
      (object) input = [object Object]
        (array) items = 

        (object) resources = [object Object]
          (string) 1 = 5200


      (object) requirements = [object Object]
        (string) building = 1

      (string) insurance_cost = 5
      (string) failure_chance = low

    (object) 2 = [object Object]
      (string) recipe_id = 4
      (string) name = Spun Bone
      (string) output_item_id = 3003
      (null) consolation_item_id: null = null
      (string) category = 1
      (object) input = [object Object]
        (array) items = 

        (object) resources = [object Object]
          (string) 1 = 10500


      (object) requirements = [object Object]
        (string) building = 1

      (string) insurance_cost = 5
      (string) failure_chance = low

    (object) 3 = [object Object]
      (string) recipe_id = 8
      (string) name = Sewn Blood
      (string) output_item_id = 3007
      (null) consolation_item_id: null = null
      (string) category = 1
      (object) input = [object Object]
        (array) items = 

        (object) resources = [object Object]
          (string) 1 = 2500


      (object) requirements = [object Object]
        (string) building = 1

      (string) insurance_cost = 5
      (string) failure_chance = low

    (object) 4 = [object Object]
      (string) recipe_id = 9
      (string) name = Sewn Weight
      (string) output_item_id = 3008
      (null) consolation_item_id: null = null
      (string) category = 1
      (object) input = [object Object]
        (array) items = 

        (object) resources = [object Object]
          (string) 1 = 2500


      (object) requirements = [object Object]
        (string) building = 1

      (string) insurance_cost = 5
      (string) failure_chance = low

    (object) 5 = [object Object]
      (string) recipe_id = 10
      (string) name = Shape Muck
      (string) output_item_id = 3009
      (null) consolation_item_id: null = null
      (string) category = 1
      (object) input = [object Object]
        (array) items = 

        (object) resources = [object Object]
          (string) 1 = 2500


      (object) requirements = [object Object]
        (string) building = 1

      (string) insurance_cost = 5
      (string) failure_chance = low

    (object) 6 = [object Object]
      (string) recipe_id = 12
      (string) name = Knit Grace
      (string) output_item_id = 3011
      (string) consolation_item_id = 3000
      (string) category = 1
      (object) input = [object Object]
        (object) items = [object Object]
          (string) 3000 = 1
          (string) 3001 = 2

        (object) resources = [object Object]
          (string) 1 = 21000


      (object) requirements = [object Object]
        (string) building = 1

      (string) insurance_cost = 5
      (string) failure_chance = low

    (object) 7 = [object Object]
      (string) recipe_id = 11
      (string) name = Cast Hide
      (string) output_item_id = 3010
      (string) consolation_item_id = 1107
      (string) category = 1
      (object) input = [object Object]
        (object) items = [object Object]
          (string) 1107 = 1
          (string) 3002 = 2

        (object) resources = [object Object]
          (string) 1 = 75000


      (object) requirements = [object Object]
        (string) building = 5

      (string) insurance_cost = 5
      (string) failure_chance = low

    (object) 8 = [object Object]
      (string) recipe_id = 25
      (string) name = Knit Courage
      (string) output_item_id = 221
      (string) consolation_item_id = 3003
      (string) category = 1
      (object) input = [object Object]
        (object) items = [object Object]
          (string) 3003 = 2
          (string) 3007 = 5

        (object) resources = [object Object]
          (string) 1 = 50000


      (object) requirements = [object Object]
        (string) building = 5

      (string) insurance_cost = 33
      (string) failure_chance = med

    (object) 9 = [object Object]
      (string) recipe_id = 26
      (string) name = Knit Wisdom
      (string) output_item_id = 231
      (string) consolation_item_id = 3003
      (string) category = 1
      (object) input = [object Object]
        (object) items = [object Object]
          (string) 3003 = 2
          (string) 3009 = 5

        (object) resources = [object Object]
          (string) 1 = 50000


      (object) requirements = [object Object]
        (string) building = 5

      (string) insurance_cost = 33
      (string) failure_chance = med

    (object) 10 = [object Object]
      (string) recipe_id = 27
      (string) name = Knit Beauty
      (string) output_item_id = 211
      (string) consolation_item_id = 3000
      (string) category = 1
      (object) input = [object Object]
        (object) items = [object Object]
          (string) 3000 = 2
          (string) 3007 = 5

        (object) resources = [object Object]
          (string) 1 = 50000


      (object) requirements = [object Object]
        (string) building = 5

      (string) insurance_cost = 33
      (string) failure_chance = med

    (object) 11 = [object Object]
      (string) recipe_id = 28
      (string) name = Knit Toil
      (string) output_item_id = 241
      (string) consolation_item_id = 3000
      (string) category = 1
      (object) input = [object Object]
        (object) items = [object Object]
          (string) 3000 = 2
          (string) 3009 = 5

        (object) resources = [object Object]
          (string) 1 = 50000


      (object) requirements = [object Object]
        (string) building = 5

      (string) insurance_cost = 33
      (string) failure_chance = med

    (object) 12 = [object Object]
      (string) recipe_id = 5
      (string) name = Divine Act
      (string) output_item_id = 3004
      (string) consolation_item_id = 3010
      (string) category = 1
      (object) input = [object Object]
        (object) items = [object Object]
          (string) 3000 = 3
          (string) 3003 = 3
          (string) 3010 = 1

        (object) resources = [object Object]
          (string) 1 = 120000


      (object) requirements = [object Object]
        (string) building = 6

      (string) insurance_cost = 20
      (string) failure_chance = med

    (object) 13 = [object Object]
      (string) recipe_id = 29
      (string) name = Forge Fury
      (string) output_item_id = 2002
      (string) consolation_item_id = 3003
      (string) category = 1
      (object) input = [object Object]
        (object) items = [object Object]
          (string) 3003 = 7
          (string) 3007 = 21

        (object) resources = [object Object]
          (string) 1 = 400000


      (object) requirements = [object Object]
        (string) building = 6

      (string) insurance_cost = 40
      (string) failure_chance = high

    (object) 14 = [object Object]
      (string) recipe_id = 6
      (string) name = Divine Rite
      (string) output_item_id = 3005
      (string) consolation_item_id = 3004
      (string) category = 1
      (object) input = [object Object]
        (object) items = [object Object]
          (string) 3000 = 3
          (string) 3003 = 3
          (string) 3004 = 1

        (object) resources = [object Object]
          (string) 1 = 180000


      (object) requirements = [object Object]
        (string) building = 7

      (string) insurance_cost = 40
      (string) failure_chance = high

    (object) 15 = [object Object]
      (string) recipe_id = 7
      (string) name = Divine Toll
      (string) output_item_id = 3006
      (string) consolation_item_id = 3005
      (string) category = 1
      (object) input = [object Object]
        (object) items = [object Object]
          (string) 3000 = 3
          (string) 3003 = 3
          (string) 3005 = 1

        (object) resources = [object Object]
          (string) 1 = 240000


      (object) requirements = [object Object]
        (string) building = 8

      (string) insurance_cost = 40
      (string) failure_chance = high

    (object) 16 = [object Object]
      (string) recipe_id = 13
      (string) name = Divine Song
      (string) output_item_id = 401
      (string) consolation_item_id = 3006
      (string) category = 1
      (object) input = [object Object]
        (object) items = [object Object]
          (string) 3000 = 3
          (string) 3003 = 3
          (string) 3006 = 1

        (object) resources = [object Object]
          (string) 1 = 320000


      (object) requirements = [object Object]
        (string) building = 9

      (string) insurance_cost = 40
      (string) failure_chance = high

    (object) 17 = [object Object]
      (string) recipe_id = 14
      (string) name = Divine Hymn
      (string) output_item_id = 402
      (string) consolation_item_id = 401
      (string) category = 1
      (object) input = [object Object]
        (object) items = [object Object]
          (string) 3000 = 3
          (string) 3003 = 3
          (string) 401 = 1

        (object) resources = [object Object]
          (string) 1 = 500000


      (object) requirements = [object Object]
        (string) building = 10

      (string) insurance_cost = 124
      (string) failure_chance = high

    (object) 18 = [object Object]
      (string) recipe_id = 31
      (string) name = Mist Song
      (string) output_item_id = 1120
      (string) consolation_item_id = 1110
      (string) category = 1
      (object) input = [object Object]
        (object) items = [object Object]
          (string) 1110 = 1
          (string) 261 = 1
          (string) 3007 = 7
          (string) 3011 = 2

        (object) resources = [object Object]
          (string) 1 = 80000


      (object) requirements = [object Object]
        (string) building = 10

      (string) insurance_cost = 18
      (string) failure_chance = low

    (object) 19 = [object Object]
      (string) recipe_id = 32
      (string) name = Mist Dirge
      (string) output_item_id = 1121
      (string) consolation_item_id = 1120
      (string) category = 1
      (object) input = [object Object]
        (object) items = [object Object]
          (string) 1120 = 1
          (string) 272 = 1
          (string) 3009 = 3
          (string) 3008 = 3
          (string) 3011 = 2

        (object) resources = [object Object]
          (string) 1 = 85000


      (object) requirements = [object Object]
        (string) building = 10

      (string) insurance_cost = 20
      (string) failure_chance = med


  (array) 3 = [object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object],[object Object]
    (object) 0 = [object Object]
      (string) recipe_id = 15
      (string) name = Crimson Act
      (string) output_item_id = 261
      (string) consolation_item_id = 3007
      (string) category = 3
      (object) input = [object Object]
        (object) items = [object Object]
          (string) 3007 = 5

        (object) resources = [object Object]
          (string) 1 = 10000


      (object) requirements = [object Object]
        (string) building = 2

      (string) insurance_cost = 9
      (string) failure_chance = low

    (object) 1 = [object Object]
      (string) recipe_id = 18
      (string) name = Aegis Act
      (string) output_item_id = 271
      (string) consolation_item_id = 3008
      (string) category = 3
      (object) input = [object Object]
        (object) items = [object Object]
          (string) 3008 = 5

        (object) resources = [object Object]
          (string) 1 = 10000


      (object) requirements = [object Object]
        (string) building = 2

      (string) insurance_cost = 9
      (string) failure_chance = low

    (object) 2 = [object Object]
      (string) recipe_id = 20
      (string) name = Trapped Wind
      (string) output_item_id = 55
      (string) consolation_item_id = 1103
      (string) category = 3
      (object) input = [object Object]
        (object) items = [object Object]
          (string) 1103 = 1
          (string) 3001 = 5

        (object) resources = [object Object]
          (string) 1 = 25000


      (object) requirements = [object Object]
        (string) building = 2

      (string) insurance_cost = 5
      (string) failure_chance = low

    (object) 3 = [object Object]
      (string) recipe_id = 22
      (string) name = Trick Hunger
      (string) output_item_id = 273
      (string) consolation_item_id = 3000
      (string) category = 3
      (object) input = [object Object]
        (object) items = [object Object]
          (string) 3000 = 5

        (object) resources = [object Object]
          (string) 1 = 160000


      (object) requirements = [object Object]
        (string) building = 2

      (string) insurance_cost = 33
      (string) failure_chance = med

    (object) 4 = [object Object]
      (string) recipe_id = 16
      (string) name = Crimson Rite
      (string) output_item_id = 262
      (string) consolation_item_id = 261
      (string) category = 3
      (object) input = [object Object]
        (object) items = [object Object]
          (string) 261 = 1
          (string) 3007 = 3

        (object) resources = [object Object]
          (string) 1 = 30000


      (object) requirements = [object Object]
        (string) building = 3

      (string) insurance_cost = 43
      (string) failure_chance = med

    (object) 5 = [object Object]
      (string) recipe_id = 19
      (string) name = Aegis Rite
      (string) output_item_id = 272
      (string) consolation_item_id = 271
      (string) category = 3
      (object) input = [object Object]
        (object) items = [object Object]
          (string) 271 = 1
          (string) 3008 = 3

        (object) resources = [object Object]
          (string) 1 = 30000


      (object) requirements = [object Object]
        (string) building = 3

      (string) insurance_cost = 43
      (string) failure_chance = med

    (object) 6 = [object Object]
      (string) recipe_id = 21
      (string) name = Poached Wind
      (string) output_item_id = 57
      (string) consolation_item_id = 55
      (string) category = 3
      (object) input = [object Object]
        (object) items = [object Object]
          (string) 55 = 1
          (string) 3001 = 3

        (object) resources = [object Object]
          (string) 1 = 75000


      (object) requirements = [object Object]
        (string) building = 3

      (string) insurance_cost = 20
      (string) failure_chance = med

    (object) 7 = [object Object]
      (string) recipe_id = 23
      (string) name = Trap Hunger
      (string) output_item_id = 274
      (string) consolation_item_id = 273
      (string) category = 3
      (object) input = [object Object]
        (object) items = [object Object]
          (string) 273 = 1
          (string) 3000 = 3

        (object) resources = [object Object]
          (string) 1 = 240000


      (object) requirements = [object Object]
        (string) building = 3

      (string) insurance_cost = 60
      (string) failure_chance = med

    (object) 8 = [object Object]
      (string) recipe_id = 17
      (string) name = Crimson Toll
      (string) output_item_id = 280
      (string) consolation_item_id = 262
      (string) category = 3
      (object) input = [object Object]
        (object) items = [object Object]
          (string) 262 = 1
          (string) 3007 = 3

        (object) resources = [object Object]
          (string) 1 = 90000


      (object) requirements = [object Object]
        (string) building = 4

      (string) insurance_cost = 40
      (string) failure_chance = high

    (object) 9 = [object Object]
      (string) recipe_id = 24
      (string) name = Poach Hunger
      (string) output_item_id = 275
      (string) consolation_item_id = 274
      (string) category = 3
      (object) input = [object Object]
        (object) items = [object Object]
          (string) 274 = 1
          (string) 3000 = 3

        (object) resources = [object Object]
          (string) 1 = 320000


      (object) requirements = [object Object]
        (string) building = 4

      (string) insurance_cost = 168
      (string) failure_chance = high

    (object) 10 = [object Object]
      (string) recipe_id = 30
      (string) name = Aegis Toll
      (string) output_item_id = 281
      (string) consolation_item_id = 272
      (string) category = 3
      (object) input = [object Object]
        (object) items = [object Object]
          (string) 272 = 1
          (string) 3008 = 3

        (object) resources = [object Object]
          (string) 1 = 90000


      (object) requirements = [object Object]
        (string) building = 4

      (string) insurance_cost = 40
      (string) failure_chance = high
*******/
/*************************** Auto Craft Tab *************************************/
Tabs.AutoCraft = {
	tabOrder: 17, //CHECKTHIS ?
	tabLabel: "Craft",
	timer: null,
	craftIntervall  : TrainOptions.CraftIntervallMin,
	crafting: [],
	myDiv: null,
	timerStat: null,
	numcity :-1,
        par: false,
        craftinfo : {},

	init: function(div){
        var t = Tabs.AutoCraft;
        t.myDiv = div;   
        t.crafting = {
	            running: TrainOptions.CraftingRunning,
        };
        var m = '<DIV id=pbCraftingDiv class=pbStat>AUTO CRAFTING</div><TABLE id=pbcraftingfunc width=100% height=0% class=pbTab><TR>';
        if (t.crafting.running == false) {
	            m += '<TD  width="33%"><INPUT id=pbCraftRunning type=submit value="Crafting = OFF"></td>';
                    updatebotbutton('Craft-OFF', 'bocrafttab');
	 }	        else {
	            m += '<TD width="33%"><INPUT id=pbCraftRunning type=submit value="Crafting = ON"></td>';
                    updatebotbutton('Craft-ON', 'bocrafttab');
	            t.timer=setInterval(t.Start,parseInt(t.craftIntervall*60000));
        }
        m += '<TD width="10%">interval: <input type=text value="'+TrainOptions.CraftIntervallMin+'" size=2  maxlength=2 id=pbCraftIntervall> minute(s) <b>(</b><span class=boldRed>need a refresher</span><b>)</b></td></table></div>';
        m += '<DIV id=pbCraftingStats class=pbStat>AMOUNT AND TIME CRAFTING AETHERSTONES</div><span id="CraftStat"></span>';
        m += '</tr><DIV id=pbCraftingList class=pbStat>AUTO CRAFTING - LIST</div><TABLE id=pbcraftingqueues width=100% height=0% class=pbTabLined><TR>';
        m += "<td colspan=2><center><b>objects</b></center></td><td><center><b>I have</b></center></td><td><b>I</b></td>"; 
        m += "<td colspan=2><center><b>objects</b></center></td><td><center><b>I have</b></center></td><td><b>I</b></td>"; 
        
		m += "</tr><tr>";
        	 
		for(var i=0; i < unsafeWindow.recipelist[1].length; i++){
                        if ((i+1)%2 != 0) m += "</tr><tr>";
                        if (i==unsafeWindow.recipelist[1].length) {
                               if ((i+1)%2 == 0) {
                                    m += "</tr><tr>";
                                    t.par=true;
                                }
                           }
			var h = parseInt(unsafeWindow.recipelist[1][i].output_item_id);
			t.craftinfo[h] = {};
			t.craftinfo[h].recipe_id = unsafeWindow.recipelist[1][i].recipe_id;
			t.craftinfo[h].category = unsafeWindow.recipelist[1][i].category;
			t.craftinfo[h].input = unsafeWindow.recipelist[1][i].input;
			t.craftinfo[h].requirements = unsafeWindow.recipelist[1][i].requirements;
			m += "<td ><center><img src='http://kabam1-a.akamaihd.net/kingdomsofcamelot/fb/e2/src/img/items/70/"+ h + ".jpg' width=25></center></td><td><center>"+unsafeWindow.itemlist["i"+h].name+"</center></td><td><center><span class=boldGreen>"+parseIntNan(Seed.items["i"+h])+"</span></center></td>";
			m += "<td><input type=text size=4 id='Craft_nb_"+h+"' value='"+ parseIntNan(TrainOptions.CraftingNb[h]) +"'></td>";
                        if ((i+1)%2 == 0) m += "</tr><tr>";
                        if (i==unsafeWindow.recipelist[1].length) {
                               if ((i+1)%2 != 0) {
                                    m += "</tr><tr>";
                                    t.impar=true;
                                }
                           }
		}
		for(var j=0; j < unsafeWindow.recipelist[3].length; j++){
                         if (t.par) {
                            if ((j+1)%2 != 0) m += "</tr><tr>";
                        }else{ 
			    if ((j+1)%2 == 0) m += "</tr><tr>";
                         }
			var h = parseInt(unsafeWindow.recipelist[3][j].output_item_id);
			t.craftinfo[h] = {};
			t.craftinfo[h].recipe_id = unsafeWindow.recipelist[3][j].recipe_id;
			t.craftinfo[h].category = unsafeWindow.recipelist[3][j].category;
			t.craftinfo[h].input = unsafeWindow.recipelist[3][j].input;
			t.craftinfo[h].requirements = unsafeWindow.recipelist[3][j].requirements;
			m += "<td ><center><img src='http://kabam1-a.akamaihd.net/kingdomsofcamelot/fb/e2/src/img/items/70/"+ h + ".jpg' width=25></center></td><td><center>"+unsafeWindow.itemlist["i"+h].name+"</center></td><td><center><span class=boldGreen>"+parseIntNan(Seed.items["i"+h])+"</span></center></td>";
			m += "<td><input type=text size=4 id='Craft_nb_"+h+"' value='"+ parseIntNan(TrainOptions.CraftingNb[h]) +"'></td>";


        }
        m+="</table><b>Note: </ b> If you want multiple objects, the creation will be randomly. <BR> <b>Important: minimum 5,000 Aetherstones and refresh to update the inventory!</b> ";

       t.myDiv.innerHTML = m;
       
       window.addEventListener('unload', t.onUnload, false);
       
	document.getElementById("pbCraftRunning").addEventListener ('click', function (){t.toggleStateRunning(this)}, false);     
        document.getElementById("pbCraftIntervall").addEventListener ('click', function (){
		if (parseIntNan(document.getElementById("pbCraftIntervall").value)<3) {
                document.getElementById("pbCraftIntervall").value=3;
                }else{
		TrainOptions.CraftIntervallMin = document.getElementById("pbCraftIntervall").value;
                }
		}, false); 

  }, 

  updateStat: function() {
   var t = Tabs.AutoCraft;
   var rownum = 0;
   function _row (name, row, noTotal, typee){
         if (rownum++ % 2)
           style = '';
         else
           style = ' style = "background: #e8e8e8"';
         var tot = 0;
         var m = [];
         m.push ('<TR style="background: #fff" align=right');
         m.push (style);
         m.push ('><TD');
         m.push (style);
         m.push ('><B>');
         m.push (name);
         m.push ('</td>');
         if (noTotal){
           m.push ('<TD');
           m.push (style);
           m.push ('>&nbsp;</td>');
         } else {
           for (i=0; i<row.length; i++)
             tot += row[i];
           m.push ('<TD style="background: #ffc">');
            if (tot<0) {
             m.push ("<SPAN class=boldRed>"+addCommas(tot)+"</span>");
            } else {
             m.push (addCommas(tot));
            }
           m.push ('</td>');
         }
         for (i=0; i<row.length; i++){
           m.push ('<TD');
           m.push (style);
           m.push ('>');
           if (row[i]<5000) {
	                m.push ("<SPAN class=boldRed>"+addCommas(row[i])+"</span>");
	   } else {
	                m.push (addCommas(row[i]));
           }
           m.push ('</td>');
         }
   
         m.push ('</tr>');
         return m.join('');
       }

   clearTimeout(t.timerStat);
   var str="<TABLE class=pbTabOverview cellpadding=0 cellspacing=0><TR  align=center><TD width=55 align=center></td><TD width=88 style='background: #ffc; font-size:150%' align=center><SPAN class=oohfancy>TOTAL</SPAN></td>";
   for(i=0; i<Cities.numCities; i++) {
            cityID = 'city'+ Cities.cities[i].id;
         
            str += "<TD width=81><SPAN class=oohfancy>"+ Cities.cities[i].name.substring(0,10) +"</SPAN></td>";
          
   }
   rows = [];
   var now = unixTime();
   rows[0] = [];
   for(i=0; i<Cities.numCities; i++) {
          cityID = 'city'+ Cities.cities[i].id;
          rows[0][i] = parseInt(Seed.citystats[cityID].gold[0]);
        }
        for (r=1; r<6; r++){
          rows[r] = [];
          for(i=0; i<Cities.numCities; i++) {
            cityID = 'city'+ Cities.cities[i].id;
            if (r==5)
             rows[r][i] = parseInt(Seed.resources[cityID]['rec'+r][0]);
            else
             rows[r][i] = parseInt(Seed.resources[cityID]['rec'+r][0] / 3600);
            
          }
         
      }
      str += _row ('<img height=18 src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/aetherstone_30.png>', rows[5], false, 0);
      str +='<tr style="background: #e8e8e8" align=right><td><img height=20 src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/items/70/3.jpg title="Crafting"></b></td><td>&nbsp;</td>';
                for(i=0; i<Cities.numCities; i++) {
                 var totTime = 0;
                 if (Seed.queue_craft["city" + Cities.cities[i].id].length > 0) {
                  var q=Seed.queue_craft["city" + Cities.cities[i].id][0];
                  var totTime = 0;
                  totTime = q.craftingEtaUnixTime - now;
                  if (totTime < 0)
                    totTime = 0;
                  if (getCityBuilding(Cities.cities[i].id,20).count>0 && totTime == 0)
                    affuichage = '<SPAN class=boldRed><B>'+ timestr(totTime) +'</b></span>';
                  else
                    affuichage = timestr(totTime);
                  
                  str +="<td><span onclick='Crafting("+Cities.cities[i].id+");'>"+ affuichage + "</span></td>";  
           
                 } else {
                 affuichage = timestr(totTime);
                 if (getCityBuilding(Cities.cities[i].id,20).count>0)
                    affuichage = '<SPAN class=boldRed><B>'+ timestr(totTime) +'</b></span>';
                    
                 str +="<td><span onclick='Crafting("+Cities.cities[i].id+");'>"+affuichage+"</span></td>";
                 }
                }    
             str +="</tr>";    
             
         document.getElementById("CraftStat").innerHTML=str;
         t.timerStat = setTimeout(function() { t.updateStat(); }, 2000);
         
         
  },
  updateCraftnb : function() {
   var t = Tabs.AutoCraft;
   for(var h in t.craftinfo) {
		if (document.getElementById("Craft_nb_" +h)) document.getElementById("Craft_nb_"+h).value=parseInt(TrainOptions.CraftingNb[h]) ;
     }
  },
  saveCraftState : function() {
   var t = Tabs.AutoCraft;
   TrainOptions.CraftingRunning =  t.crafting.running;
   for(var h in t.craftinfo) {
		if (document.getElementById("Craft_nb_" +h)) TrainOptions.CraftingNb[h] = document.getElementById("Craft_nb_"+h).value;
    }
    saveTrainingOptions();
  },

   toggleStateRunning: function(obj){
  	var t = Tabs.AutoCraft;
  	obj = document.getElementById('pbCraftRunning');
          if (t.crafting.running == true) {
              t.crafting.running = false;
              t.saveCraftState();
              if (obj) obj.value = "Crafting = OFF";
              updatebotbutton('Craft-OFF', 'bocrafttab');
              clearInterval(t.timer);
          }
          else {
              t.crafting.running = true;
              t.saveCraftState();
              if (obj) obj.value  = "Crafting = ON";
              updatebotbutton('Craft-ON', 'bocrafttab');
              t.timer=setInterval(t.Start,parseInt(t.craftIntervall*60000));
          }
          t.updateCraftnb();
    },
    Start: function() {
     var t = Tabs.AutoCraft;
     if(!TrainOptions.CraftingRunning) {
      clearInterval(t.timer);
      return;
     }
     if (t.numcity<Cities.numCities-1) {
           t.numcity++;
         } else {
          t.numcity=0; 
     }
     var c=t.numcity;
     var cityId=Cities.cities[c].id;
     
     var ret=getCityBuilding(cityId,20).count;
     if (ret==0) { 
       t.Start();
       return;
     }
     if (parseInt(Seed.resources["city" + cityId]['rec5'][0])<5000) 
            return;
     var tableau = [];
     for(var d in TrainOptions.CraftingNb) {
     if (parseInt(TrainOptions.CraftingNb[d])>0) {
     tableau.push (d); 
           }
     }
     if (tableau.length==0) {
	    t.crafting.running = false;
            obj = ById('pbCraftRunning');
	    if (obj) obj.value = "Crafting = OFF";
		t.saveCraftState();
		 clearInterval(t.timer);
		  return;
             }

     var itemId = tableau[Math.floor(Math.random()*tableau.length)];
     var recipeId = t.craftinfo[itemId].recipe_id;
     var category = t.craftinfo[itemId].category; 
     var i=Seed.queue_craft["city"+cityId];
     if(i.length>0) {
          var q=i[0];
     	  var totTime = 0;
     	  var now = unixTime();
          totTime = q.craftingEtaUnixTime - now;
          if (totTime > 0) {
           return;
          }
     } 
     t.CraftingItem(cityId,  itemId, recipeId, category);
    },
    CraftingItem: function (currentcity, itemId, recipeId, category) {
      var t = Tabs.AutoCraft;
      var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
          params.action="craft";
          params.ctrl="Crafting";
          params.cityId=currentcity;
          params.insurance=false;
     	  params.itemId=itemId;
     	  params.recipeId=recipeId;
     	  params.categoryId=category;
      new AjaxRequest(unsafeWindow.g_ajaxpath + "ajax/_dispatch.php" + unsafeWindow.g_ajaxsuffix, { method: "post", parameters: params,loading: true,
          onSuccess: function (transport) {
              var o=eval("("+transport.responseText+")");
              if(o.ok===true){
               if (o.status=="error") {
			   
               } else if(o.status=="failure"){
    	        setTimeout(function() {
    	         t.CraftingItem(currentcity,  itemId, recipeId);
    	        }, 5000);
     	       } else if (o.status=="success"){
     	        TrainOptions.CraftingNb[itemId] =  TrainOptions.CraftingNb[itemId] -1;
     	        saveTrainingOptions();
     	        t.updateCraftnb();
       		if(!Seed.queue_craft["city"+currentcity]) {
    		 Seed.queue_craft["city"+currentcity]=[];
    		}
         	var n={};
         	n.recipeId=recipeId;
         	n.craftingUnixTime=o.time.startTime;
         	n.craftingEtaUnixTime=o.time.endTime;
         	n.craftingId=o.craftingId;
         	n.categoryId=null;
         	n.recipeIndex=null;
         	unsafeWindow.seed.queue_craft["city"+currentcity].push(n);
         	t.Start()
               }
              }
            },
            onFailure: function () {    }
       });
 },

    show : function (){
		var t = Tabs.AutoCraft;
		clearTimeout(t.timerStat);
		t.updateStat();
    },
    hide: function(){
		var t = Tabs.AutoCraft;
		clearTimeout(t.timerStat);
      },
	  onUnload: function(){
		  var t = Tabs.AutoCraft;
		   t.saveCraftState();
    },
};

/********************************* Alliance Scout Tab *************************************/

Tabs.ScoutAlliance = {
  tabOrder :21,
  myDiv : null,
  MapAjax : new CMapAjax(),

  ScoutAllianceOptions : {
     num_scouts     : 1,
     min_might      : 0,
     max_might      : 100000000,
     scout_interval : 1,
     scouting       : false,   
     scout_ready    : false,
  },

  init : function (div){
    var t = Tabs.ScoutAlliance;
    var o = t.ScoutAllianceOptions;
    unsafeWindow.fetchAllianceMembers = t.eventGetMembers;
    t.myDiv = div;
    t.city = 0;
    t.citiesToScout = {};

    var s = GM_getValue('ScoutAllianceOptions_' + Seed.player['name'] + '_' + getServerId());
    if (s != null){
       t.ScoutAllianceOptions = JSON2.parse(s);   
    }

    for(var i=0; i < Cities.numCities; i++) {
        t.citiesToScout[i] = [];
        var s = GM_getValue('CitiesToScout_' + Seed.player['name'] + '_city_' + i + '_' + getServerId());
        if (s != null){
            t.citiesToScout[i] = JSON2.parse(s);   
        }
    }

    t.show();
    t.doNextScout();
  },


  setScoutAllianceOptions : function () {
     var t = Tabs.ScoutAlliance;
     GM_setValue ('ScoutAllianceOptions_' + Seed.player['name'] + '_' + getServerId(), JSON2.stringify(t.ScoutAllianceOptions));
  },

  show : function (){
    var t = Tabs.ScoutAlliance;
    var o = t.ScoutAllianceOptions;

    if (t.state == null){
      if (getMyAlliance()[0] == 0) {
        t.myDiv.innerHTML = '<BR><BR><CENTER>You need to be in an alliance to use this feature.</center>';
        t.state = 1;
        return;
      }
      var m = '<DIV class=pbentry><TABLE width=100% cellpadding=0>';
         if (o.scouting) {
           m += '<TD><INPUT id=IdScoutingStatus type=submit value="Scout = ON"></td>';
         } else {
            if (o.scout_ready) {
               m += '<TD><INPUT id=IdScoutingStatus type=submit value="Scout = OFF"></td>';
            } else {
               m += '<TD><INPUT id=IdScoutingStatus type=submit value="Scout = Not Ready"></td>';
            }
         }
         m += '<TR><TD>Scout interval: <INPUT id=IdScoutInterval type=text size=8 maxlength=8 value='+ o.scout_interval +' \> msecs</td>';
         m += '<TD>Num Scouts: <INPUT id=IdNumScouts type=text size=8 maxlength=8 value='+ o.num_scouts +' \></td></tr>';
         m += '<TR><TD>Minimum Might: <INPUT id=IdMinMight type=text size=8 maxlength=8 value='+ o.min_might +' \></td>';
         m += '<TD>Maximum Might: <INPUT id=IdMaxMight type=text size=8 maxlength=8 value='+ o.max_might +' \></td></tr>';

         m += '<TR><TD class=xtab> Enter all or part of an alliance name: &nbsp;</td>';
         m += '<TD class=xtab><INPUT id=IdSearchAllianceName type=text /> &nbsp;';
         m += '<INPUT id=IdSearchAllianceNameSubmit type=submit value="Find Alliance" /></td></tr>';
         m += '<TR><TD class="xtab ptErrText"><SPAN id=IdScoutAllianceErrorSpan></span></td></tr>';
         m += '</table><span style="vertical-align:middle;" id=IdScoutAlliance></span></div>';
         m += '<div style="overflow-y:auto;"; id=IdScoutAllianceStatus></div></div>';
         m += '<div style="height:535px; max-height:535px; overflow-y:auto;"; id=IdScoutAllianceProgress></div></div>';
      t.myDiv.innerHTML = m;

      document.getElementById('IdScoutInterval').addEventListener('change', function(){
		o.scout_interval=parseInt(document.getElementById('IdScoutInterval').value);
		t.setScoutAllianceOptions();
	        },false);
      document.getElementById('IdNumScouts').addEventListener('change', function(){
		o.num_scouts=parseInt(document.getElementById('IdNumScouts').value);
		t.setScoutAllianceOptions();
	        },false);
      document.getElementById('IdMinMight').addEventListener('change', function(){
		o.min_might=parseInt(document.getElementById('IdMinMight').value);
		t.setScoutAllianceOptions();
	        },false);
      document.getElementById('IdMaxMight').addEventListener('change', function(){
		o.max_might=parseInt(document.getElementById('IdMaxMight').value);
		t.setScoutAllianceOptions();
	        },false);
      document.getElementById('IdSearchAllianceNameSubmit').addEventListener ('click', t.SearchAllianceSubmit, false);
      document.getElementById('IdScoutingStatus').addEventListener('click', function(){t.toggleScoutingStatus(this)} , false);
      t.state = 1;
    }
  },

  hide: function(){
  },

  SearchAllianceName : '',
  SearchAllianceSubmit : function (){
    var t = Tabs.ScoutAlliance;
    document.getElementById('IdScoutAllianceErrorSpan').innerHTML='';
    t.SearchAllianceName = document.getElementById('IdSearchAllianceName').value;
logit(t.SearchAllianceName);
    if (t.SearchAllianceName.length < 3){
      document.getElementById('IdScoutAllianceErrorSpan').innerHTML = 'Enter at least 3 characters';
      return;
    }
logit(t.SearchAllianceName);
    document.getElementById('IdScoutAllianceStatus').innerHTML = '<DIV class=ptstat>Searching alliances matching <B>"'+ t.SearchAllianceName +'"</b>...';
    t.fetchAllianceList (t.SearchAllianceName, t.eventGotAllianceList);
  },

  eventGotAllianceList : function (rslt){
    var t = Tabs.ScoutAlliance;
    if (!rslt.ok){
      document.getElementById('IdScoutAllianceStatus').innerHTML = rslt.errorMsg;
      document.getElementById('IdScoutAllianceErrorSpan').innerHTML = rslt.errorMsg;
      return;
    }
    var m = '<DIV class=ptstat>Showing alliances matching <B>"'+ t.SearchAllianceName +'"</b></div>\
    <TABLE><TR style="font-weight:bold"><TD class=xtab>Alliance Name</td><TD class=xtab>Rank</td><TD class=xtab>Members</td>\
        <TD align=right class=xtab>Might</td><TD class=xtab>Diplomacy</td><TD class=xtab></td></tr>';
    for (k in rslt.alliancesMatched){
      var all = rslt.alliancesMatched[k];
      var dip = '';
      if (all.relation && all.relation==1)
        dip = 'Friendly';
      else if (all.relation && all.relation==2)
        dip = 'Hostile';
      m += '<TR><TD class=xtab>'+ all.allianceName +'</td><TD align=right class=xtab>'+ all.ranking +'</td><TD align=right class=xtab>'+ all.membersCount +'</td>\
       <TD align=right class=xtab>'+ addCommasInt(all.might) +'</td><TD class=xtab>'+ dip +'</td>\
       <TD class=xtab><a onclick="fetchAllianceMembers('+ all.allianceId +')">Scout Alliance Members</a></td></tr>';
    }
    document.getElementById('IdScoutAllianceStatus').innerHTML = m;
  },

  fetchAllianceList : function (allianceName, notify) {
    var t = Tabs.ScoutAlliance;
    var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
    params.allianceName = allianceName;
    new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/allianceGetSearchResults.php" + unsafeWindow.g_ajaxsuffix, {
      method: "post",
      parameters: params,
      onSuccess: function (rslt) {
          notify (rslt);
      },
      onFailure: function (rslt) {
        notify ({errorMsg:'AJAX error'});
      },
    });
  },

  eventGetMembers : function (aid){
    var t = Tabs.ScoutAlliance;
    t.ScoutAllianceOptions.scout_ready = false;
    t.setScoutAllianceOptions();
    document.getElementById('IdScoutingStatus').value = "Scout = Not Ready";
    document.getElementById('IdScoutAllianceStatus').innerHTML = '<DIV class=ptstat>Searching cities...';
    document.getElementById('IdScoutAllianceProgress').innerHTML = '';
    t.fetchAllianceMemberList (aid, t.eventGotMemberList);
  },

  fetchAllianceMemberList : function (allianceId, notify) {
    var t = Tabs.ScoutAlliance;
    var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
    params.perPage = 100;
    params.allianceId = allianceId;
    new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/getUserLeaderboard.php" + unsafeWindow.g_ajaxsuffix, {
      method: "post",
      parameters: params,
      onSuccess: function (rslt) {
        notify (rslt);
      },
      onFailure: function (rslt) {
        notify ({errorMsg:'AJAX error'});
      },
    });
  },

  eventGotMemberList : function (rslt){
    var t = Tabs.ScoutAlliance;
    var o = t.ScoutAllianceOptions;
    if (!rslt.ok){
      document.getElementById('IdScoutAllianceStatus').innerHTML = rslt.errorMsg;
      document.getElementById('IdScoutAllianceErrorSpan').innerHTML = rslt.errorMsg;
      return;
    }
    var numInvalid = 0;
    var numPlayers = 0;
    var numCities = 0;
    var myA = getMyAlliance ();
    var dist = 0;
    for(var i=0; i < Cities.numCities; i++) {
        t.citiesToScout[i] = [];
    }
    for (var r=0; r<rslt.results.length; r++){
      p = rslt.results[r];
      if (p.userId == 0){
        ++numInvalid;
      } else {
        ++numPlayers;
        numCities += p.cities.length;
        might = parseInt(p.might);
        if (might > parseInt(o.min_might) && might < parseInt(o.max_might)) {
          for (var c=0; c<p.cities.length; c++){
          //t.dat.push ([p.displayName, parseInt(p.might), p.officerType, parseInt(p.numCities), parseInt(p.cities[c].tileLevel),
          //     parseInt(p.cities[c].xCoord), parseInt(p.cities[c].yCoord), p.cities[c].cityName, 0, 0,'NA',p.userId]);
            for(var i=0; i < Cities.numCities; i++) {
                dist = distance (Cities.cities[i].x, Cities.cities[i].y, p.cities[c].xCoord, p.cities[c].yCoord);
                t.citiesToScout[i].push ({x:p.cities[c].xCoord,y:p.cities[c].yCoord, dist:dist});
            }
          }
        }
      }
    }

    dist = 100000;
    for(var i=0; i < Cities.numCities; i++) {
        t.citiesToScout[i].sort(function sortDist(a,b) {a = a['dist'];b = b['dist'];return a == b ? 0 : (a < b ? -1 : 1);});
        if (t.citiesToScout[0].length > 0 && t.citiesToScout[i][0].dist < dist) {
            t.city = i;
            dist = t.citiesToScout[i][0].dist;
        }
        GM_setValue('CitiesToScout_' + Seed.player['name'] + '_city_' + i + '_' + getServerId(), JSON2.stringify(t.citiesToScout[i]));
    }
    if (t.city == 0) t.city = Cities.numCities;
    else t.city -= 1;

    var m = ''; 
    m += '<DIV class=ptstat>Search Complete: '+ rslt.allianceName +' (found ' + numPlayers + ' players';
    if (numInvalid > 0) m += ' (' + numInvalid + 'misted?)';
    m += ', ' +t.citiesToScout[0].length+ ' cities to scout';
    if (t.citiesToScout[0].length != numCities) m += ' (total ' + numCities + ')';
    m += ')</div>';
    document.getElementById('IdScoutAllianceStatus').innerHTML = m;
    if (t.citiesToScout[0].length > 0) {
      t.ScoutAllianceOptions.scout_ready = true;
      t.setScoutAllianceOptions();
      document.getElementById('IdScoutingStatus').value = "Scout = OFF";
    }
  },


  toggleScoutingStatus: function(obj){
     var t = Tabs.ScoutAlliance;
     var o = t.ScoutAllianceOptions;
     if (!o.scout_ready) return;
     if (o.scouting) {
         o.scouting = false;
         t.setScoutAllianceOptions();
         obj.value = "Scout = OFF";
         t.nextscout = null;
     } else {
         o.scouting = true;
         t.setScoutAllianceOptions();
         obj.value = "Scout = ON";
         //t.nextscout = setInterval(t.doNextScout,(t.scout_interval*1000));
         t.doNextScout();
     }
  },

  doNextScout: function(){
     var t = Tabs.ScoutAlliance;
     var o = t.ScoutAllianceOptions;
     if (!o.scout_ready) return;
     if (!o.scouting) return;
     var slots = 0;

     var can_scout = false;

     that_city = t.city;

     //actionLog('Trying to scout...');

     do {
       t.city += 1;
       if (t.city>=Seed.cities.length){
	  t.city=0;
       }

       this_city = t.city;
       if (this_city == that_city) {
           t.nextscout = setTimeout(t.doNextScout,(parseInt(o.scout_interval)*1000));
           //actionLog('Can not scout: setting timer...');
           return;
       }

       city = Cities.cities[this_city];

       if (t.citiesToScout[this_city].length == 0) {
          o.scout_ready = false;
          o.scouting = false;
          t.setScoutAllianceOptions();
          document.getElementById('IdScoutingStatus').value = "Scout = Not Ready";
          t.nextscout = null;
          return;
       }

       if(parseInt(Seed.units['city'+city.id]['unt'+3]) < parseInt(o.num_scouts)){
          //actionLog(city.name + " Not enuff scouts...");
          continue;
       }

       var rallypointlevel = t.getRallypoint(city.id);
       slots = 0;
       if (Seed.queue_atkp['city'+city.id] != undefined){
	       for(var k in Seed.queue_atkp['city'+city.id])
		      slots++;
		      if(Seed.queue_atkp['city'+city.id].toSource() == "[]")
		          slots = 0;
	}
	  else slots=0; 
	

       if(slots >= rallypointlevel){
          //actionLog(city.name + " Not enuff slots...");
          continue; 
       }

       //actionLog(city.name + ' slots: ' + slots + '/' +rallypointlevel+ ', scouts: ' + parseInt(Seed.units['city'+city.id]['unt'+3]));
       can_scout = true;

    } while (!can_scout);

	var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
        params.cid = city.id;
	params.kid = 0;
	params.type = 3;
	params.xcoord = t.citiesToScout[this_city][0].x;
	params.ycoord = t.citiesToScout[this_city][0].y;
	params.u3 = parseInt(o.num_scouts);
	new AjaxRequest(unsafeWindow.g_ajaxpath + "ajax/march.php" + unsafeWindow.g_ajaxsuffix, {
		 method: "post",
		 parameters: params,
		 loading: true,
		 onSuccess: function (rslt) {
		 rslt = eval("(" + rslt.responseText + ")");
		 if (rslt.ok) {
			 var timediff = parseInt(rslt.eta) - parseInt(rslt.initTS);
			 var ut = unixTime();
			 var unitsarr=[0,0,0,0,0,0,0,0,0,0,0,0,0];
			 var resources=[0,0,0,0,0,0,0,0,0,0,0,0,0];
			 for(i = 0; i <= unitsarr.length; i++){
				if(params["u"+i]){
				unitsarr[i] = params["u"+i];
				}
			 }
			 var currentcityid = params.cid;
			 unsafeWindow.attach_addoutgoingmarch(rslt.marchId, rslt.marchUnixTime, ut + timediff, params.xcoord, params.ycoord, unitsarr, params.type, params.kid, resources, rslt.tileId, rslt.tileType, rslt.tileLevel, currentcityid, true);
			 if(rslt.updateSeed){unsafeWindow.update_seed(rslt.updateSeed)};
			 document.getElementById('IdScoutAllianceProgress').innerHTML += 'Scout sent: from '+city.name+' to: '+params.xcoord+', '+params.ycoord+'<BR>';
actionLog('Scout sent: from '+city.name+' to: '+params.xcoord+', '+params.ycoord);
                         t.scout_done(params.xcoord, params.ycoord);
                         t.nextscout = setTimeout(t.doNextScout,(o.scout_interval*1000));
		 } else {
                         rslt.errorMsg = unsafeWindow.printLocalError((rslt.error_code || null), (rslt.msg || null), (rslt.feedback || null));
                         if ( (x = rslt.errorMsg.indexOf ('<br><br>')) > 0)
                             rslt.errorMsg = rslt.errorMsg.substr (0, x-1);
			 document.getElementById('IdScoutAllianceProgress').innerHTML += 'Scout failed: from '+city.name+' to: '+params.xcoord+', '+params.ycoord+' ['+rslt.errorMsg+']<BR>';
actionLog('Scout failed: from '+city.name+' to: '+params.xcoord+', '+params.ycoord+' ['+rslt.errorMsg+']');
                         t.nextscout = setTimeout(t.doNextScout,(o.scout_interval*1000));
		  }
		},
		onFailure: function () {}
  		});
  },

 getRallypoint: function(cityId){
      var t = Tabs.ScoutAlliance;
      cityId = 'city'+cityId;
      for (o in Seed.buildings[cityId]){
		var buildingType = parseInt(Seed.buildings[cityId][o][0]);
		var buildingLevel = parseInt(Seed.buildings[cityId][o][1]);
		if (buildingType == 12){
			return parseInt(buildingLevel);
			break;
		}
	   }
	  return 0;
    },

  scout_done: function(x,y){
     var t = Tabs.ScoutAlliance;
     var cnt = 0;
     for(var i=0; i < Cities.numCities; i++) {
       for (var c=0; c < (t.citiesToScout[i].length); c++) {
         if (parseInt(t.citiesToScout[i][c].x) == parseInt(x) && parseInt(t.citiesToScout[i][c].y) == parseInt(y)) {
           t.citiesToScout[i].splice(parseInt(c), 1);
           GM_setValue('CitiesToScout_' + Seed.player['name'] + '_city_' + i + '_' + getServerId(), JSON2.stringify(t.citiesToScout[i]));
           cnt++;
           break;
         }
       }
    }
    if (cnt != Cities.numCities) {
        actionLog('delete cnt: ' +cnt+ ' (' +x+ ', ' +y+ ')');
    }
  },
}

 /*********************************  Barbing Tab - now the Dark Forest Tab ***********************************/
Tabs.Barb = {
  tabLabel: 'AutoDF',
  tabOrder : 6,
  tabDisabled : !ENABLE_TEST_TAB,
  myDiv : null,
  MapAjax : new CMapAjax(),
  popFirst : true,
  opt : {},
  nextattack : null,
  searchRunning : false,
  tilesSearched : 0,
  tilesFound : 0,
  curX : 0,
  curY : 0,
  lastX : 0,
  firstX : 0,
  firstY : 0,
  lastY : 0,
  rallypointlevel:0,
  knt:{},
  barbArray:{},
  lookup:1,
  city:0,
  deleting:false,
  
    
  init : function (div){
    var t = Tabs.Barb;
    t.myDiv = div;

 
    var m = '<DIV id=pbTowrtDivF class=pbStat>AUTOMATED FOREST FUNCTION</div><TABLE id=pbbarbingfunctions width=100% height=0% class=pbTab><TR align="center">';
          m += '<TD align=center><INPUT id=pbBarbState type=submit value="Attack = '+ (AttackOptions.Running?'ON':'OFF')+'"></td>';
	        updatebotbutton('Attack-'+ (AttackOptions.Running?'ON':'OFF')+'', 'pbbosquestab'); 

	  m += '<TD><INPUT id=troopselect type=submit value="Select troops"></td>';
	  m += '<TD><INPUT id=Options type=submit value="Options"></td>';
	  m += '</tr></table></div>';
	  
	  m += '<DIV id=pbTraderDivD class=pbStat>FOREST STATS</div>';
	
	  m += '<TABLE id=pbbarbstats width=95% height=0% class=pbTab><TR align="left"><TR>';
	  for(i=0;i<Seed.cities.length;i++){
	  		m += '<TD>' + Seed.cities[i][1] +'</td>';
	  }
	  m+='</tr><TR>';
	  for(i=0;i<Seed.cities.length;i++){
	  		m += '<TD><DIV><span id='+ 'pdtotalcity' + i +'></span></div></td>';
	  }
	  m+='</tr><TR>';
	  for(i=0;i<Seed.cities.length;i++){
	  		m += '<TD><DIV><span id='+ 'pddatacity' + i +'></span></div></td>';
	  }
	  m+='</tr><TR>'
	   for(i=0;i<Seed.cities.length;i++){
	  		m += '<TD><DIV><span id='+ 'pddataarray' + i +'></span></div></td>';
	 }
	 m+='</tr></table><TABLE id=pbbarbstats width=95% height=0% class=pbTab><TR align="left"><TR>';
	 for (i=0;i<=6;i++) {
	 	m+='<TD><DIV><span id='+ 'pberror' + i +'></span></div></td>';
     }
     m+='</tr></table>';
     m += '<DIV id=pbTraderDivD class=pbStat>FOREST OPTIONS</div>';
     m += '<TABLE width=95% height=0% class=ptTab><TR align="left">';
     for(i=0;i<Seed.cities.length;i++){
        m += '<TR><TD>' + Seed.cities[i][1] +'</td>';
        for (w=1;w<=10;w++){
           m += '<TD class=pblevelopt><INPUT id=pbcity'+i+'level'+w+' type=checkbox unchecked=true>Lvl:'+w+'</td>';
        }
     }
    
     t.myDiv.innerHTML = m;

     saveAttackOptions();
	 t.checkBarbData();

     for(i=0;i<Seed.cities.length;i++){
		var element = 'pdtotalcity'+i;
		if (t.barbArray[i+1] == undefined) document.getElementById(element).innerHTML = 'No Data';
		else document.getElementById(element).innerHTML =  'Forests:' + t.barbArray[i+1].length;
     }
    
    for(i=0;i<Seed.cities.length;i++){
		for (w=1;w<=10;w++){
			document.getElementById('pbcity'+i+'level'+w).checked = AttackOptions.Levels[i+1][w]; 
		}
    }
    
	document.getElementById('pbBarbState').addEventListener('click', function(){t.toggleBarbState(this)} , false);
	document.getElementById('Options').addEventListener('click', t.barbOptions , false);
	document.getElementById('troopselect').addEventListener('click', t.troopOptions , false);
    var element_class = document.getElementsByClassName('pblevelopt');
    for (k=0;k<element_class.length;k++){
    	element_class[k].addEventListener('click', t.saveLevelOptions , false);
    }
   },
  
  saveLevelOptions : function(){
		for(i=0;i<Seed.cities.length;i++){
			AttackOptions.Levels[i+1][0]=false;
			for (w=1;w<=10;w++){
				var ele = document.getElementById('pbcity'+i+'level'+w);
				AttackOptions.Levels[i+1][w]=ele.checked;
				if (ele.checked)					
					AttackOptions.Levels[i+1][0]=true;
			}		
		}
		saveAttackOptions();
   },
   
  troopOptions: function(){
  	 var t = Tabs.Barb;
	 var troopDef = [
	   ['Supply', 1],
      ['Miltia', 2],
      ['Scout', 3],
      ['Pikes', 4],
	  ['Swords', 5],
      ['Archers', 6],
      ['Cavalry', 7],
      ['Heavies', 8],
      ['Wagons', 9],
      ['Ballista', 10],
      ['Rams', 11],
	  ['Cats', 12],
     ];
  	 if(t.troopselect == null)	
		t.troopselect = new CPopup ('pbtroopselect', 0, 0, 815, 450, true, function(){t.saveTroops();});
  	 t.troopselect.centerMe (mainPop.getMainDiv());  
         t.troopselect.getTopDiv().innerHTML = '<div class=showBadged><CENTER><b>PowerKoc: Dark Forest Options for server '+getServerId()+'</b></CENTER></div>';
  	 var z= '<DIV id=pbTraderDivD class=pbStat>TROOP SELECTION</div><TABLE width=100%><TR>';
	 z+='<TD></td>';
	 for(var i=0; i<troopDef.length; i++)
		z+='<TD>'+troopDef[i][0]+'</td>';
	 z+='<TD>MIN dist</td><TD>MAX dist</td>';
	 for(i=0;i<10;i++){
	 	z += '<TR><TD>level '+(i+1)+': </td>';
	 	for(var j=0; j<troopDef.length; j++){
	 		z += '<TD><INPUT id="level'+i+'troop'+j+'" type=text size=4 maxlength=6 value="'+AttackOptions.Troops[i+1][j+1]+'" /></td>';
	 	}
		z+='<TD align=left><INPUT id=Mindist'+i+' type=text size=3 maxlength=3 value="'+AttackOptions.MinDistance[i+1]+'"</td>';
	 	z+='<TD align=right><INPUT id=dist'+i+' type=text size=3 maxlength=3 value="'+AttackOptions.Distance[i+1]+'"</td>';
	 	z+='</tr>';		 		
	 }
	 z+='</table>';
	  t.troopselect.getMainDiv().innerHTML = z;
	  t.troopselect.show(true);
  },
  
  barbOptions: function(){
  	 var t = Tabs.Barb;
  	 if(t.barboptions == null)	
		t.barboptions = new CPopup ('pbbarboptions', 0,0, 408,350, true);
  	 t.barboptions.centerMe (mainPop.getMainDiv());  
	 t.barboptions.getTopDiv().innerHTML = '<div class=showBadged><CENTER><b>Dark Forest Options  '+getServerId()+'</b></CENTER></div>';
  	var y = '<DIV style="max-height:400px; overflow-y:auto;"><DIV class=pbStat>RESET FORESTS</div><TABLE width=100%>';
	   y +='<TR><TD style="margin-top:5px; text-align:center;"><INPUT id=pbresetbarbs type=submit value="Reset Forests"></td>';
	   y +='<TD style="margin-top:5px; text-align:center;"><INPUT id=pbpaintbarbs type=submit value="Show forests"></td>';
	   y += '<TD><SELECT id=pbcity type=list></td></tr></table>';
	   y +='<TD style="margin-top:5px; text-align:center;"><DIV class=pbStat> OPTIONS </div></td><TABLE>';
     y +='<TR><TD>Attack interval: <INPUT id=pbsendint type=text size=4 maxlength=4 value='+ AttackOptions.SendInterval +' \>  seconds</td></tr>';
     y +='<TR><TD>Max search distance: <INPUT id=pbmaxdist type=text size=4 maxlength=4 value='+ AttackOptions.MaxDistance +' \></td></tr>';
     y +='<TR><TD>Keep rallypoint slot(s) free: </td><Td><INPUT id=rallyclip type=text size=3 maxlength=2 value="'+AttackOptions.RallyClip+'" \> </td></tr>';
     y +='<TR><TD><INPUT id=pbreport type=checkbox '+(AttackOptions.UpdateEnabled?'CHECKED':'')+'\> Reset search every <INPUT id=pbmsgint type=text size=2 maxlength=2 value='+AttackOptions.UpdateInterval+' \>minutos</td></tr>';
	 y +='<TR><TD> Skip city after <INPUT id=barbstopsearch type=text size=4 value='+AttackOptions.stopsearch+' \> tries..</td></tr>';
     y +='<TR><TD>Method : '+htmlSelector({distance:'Closest first', level:'Highest level first', lowlevel:'Lowest level first'}, AttackOptions.Method, 'id=pbmethod')+'</td></tr>';
     y +='<TR><TD>Knight priority : '+htmlSelector({0:'Lowest combat skill', 1:'Highest combat skill'}, AttackOptions.knightselector, 'id=barbknight')+'</td></tr>';
     y+='</table></td></tr></table>';
	   t.barboptions.getMainDiv().innerHTML = y;
	   t.barboptions.show(true);
	
	document.getElementById('pbcity').options.length=0;
	for (i=0;i<Seed.cities.length;i++){
		var o = document.createElement("option");
		o.text = Seed.cities[i][1]
		o.value = i+1;
		document.getElementById("pbcity").options.add(o);
	}
	   
	document.getElementById('pbpaintbarbs').addEventListener('click', function(){
			t.showBarbs(document.getElementById("pbcity").value,Seed.cities[document.getElementById("pbcity").value -1][1]);
			
    },false);
	document.getElementById('pbresetbarbs').addEventListener('click', t.deletebarbs,false);
	document.getElementById('pbmethod').addEventListener('change', function(){
		AttackOptions.Method=document.getElementById('pbmethod').value;
		saveAttackOptions();
		t.checkBarbData();
	},false);
	document.getElementById('barbknight').addEventListener('change', function(){
		AttackOptions.knightselector=document.getElementById('barbknight').value;
		saveAttackOptions();
	},false);
	document.getElementById('pbreport').addEventListener('change', function(){
		AttackOptions.UpdateEnabled=document.getElementById('pbreport').checked;
		saveAttackOptions();
	},false);
	document.getElementById('pbmsgint').addEventListener('change', function(){
		AttackOptions.UpdateInterval=parseInt(document.getElementById('pbmsgint').value);
		saveAttackOptions();
	},false);
    document.getElementById('pbsendint').addEventListener('change', function(){
		if(parseInt(document.getElementById('pbsendint').value) <5) //Set minimum attack interval to 5 seconds
			document.getElementById('pbsendint').value = 5;
		AttackOptions.SendInterval=parseInt(document.getElementById('pbsendint').value);
		saveAttackOptions();
	},false);
    document.getElementById('pbmaxdist').addEventListener('change', function(){
		if(parseInt(document.getElementById('pbmaxdist').value) > 75)
			document.getElementById('pbmaxdist').value = 75;
		AttackOptions.MaxDistance=parseInt(document.getElementById('pbmaxdist').value);
		saveAttackOptions();
	},false);
    document.getElementById('rallyclip').addEventListener('change', function(){
		AttackOptions.RallyClip=parseInt(document.getElementById('rallyclip').value);
		saveAttackOptions();
	},false);
    document.getElementById('barbstopsearch').addEventListener('change', function(){
		document.getElementById('barbstopsearch').value = parseInt(document.getElementById('barbstopsearch').value)>0?document.getElementById('barbstopsearch').value:1
		AttackOptions.stopsearch=parseInt(document.getElementById('barbstopsearch').value);
		saveAttackOptions();
	},false);    
  },
  
    showBarbs: function (citynumber,cityname) {
		var t = Tabs.Barb;
		var popTradeRoutes = null;
		t.popTradeRoutes = new CPopup('pbShowBarbs', 0, 0, 500, 500, true, function() {clearTimeout (1000);});
		var m = '<DIV style="max-height:460px; height:460px; overflow-y:auto"><TABLE align=center cellpadding=0 cellspacing=0 width=100% class="pbShowBarbs" id="pbBars">';       
		t.popTradeRoutes.getMainDiv().innerHTML = '</table></div>' + m;
		t.popTradeRoutes.getTopDiv().innerHTML = '<TD><B>Dark Forests for city: '+cityname+'</td>';
		t.paintBarbs(citynumber,cityname);
		t._addTabHeader(citynumber,cityname);
		t.popTradeRoutes.show(true)	;
	 },
  	paintBarbs: function(i,cityname){
	        var t = Tabs.Barb;
				for (k=(t.barbArray[i].length-1);k>=0;k--){t._addTab(i,cityname,k+1,t.barbArray[i][k]['x'], t.barbArray[i][k]['y'],t.barbArray[i][k]['dist'], t.barbArray[i][k]['level']);}
	    },
	  
  _addTab: function(citynumber,cityname,queueId,X,Y,dist,level){
	 var t = Tabs.Barb;
	 var row = document.getElementById('pbBars').insertRow(0);
	 row.vAlign = 'top';
	 row.insertCell(0).innerHTML = queueId;
	 row.insertCell(1).innerHTML = X;
	 row.insertCell(2).innerHTML = Y;
	 row.insertCell(3).innerHTML = dist;
	 row.insertCell(4).innerHTML = level;
	 row.insertCell(5).innerHTML = '<a class="button20" id="barbdel_' + queueId + '"><span>Delete</span></a>';
	 document.getElementById('barbdel_' + queueId).addEventListener('click', function(){
		t.deleteBarbElement(citynumber,queueId,cityname, true);
	 }, false);
  },
	 
  _addTabHeader: function(citynumber,cityname) {
	 var t = Tabs.Barb;
	 var row = document.getElementById('pbBars').insertRow(0);
	 row.vAlign = 'top';
     row.insertCell(0).innerHTML = "City";
	 row.insertCell(1).innerHTML = "X";
	 row.insertCell(2).innerHTML = "Y";
	 row.insertCell(3).innerHTML = "Dist.";
	 row.insertCell(4).innerHTML = "Level";
	 row.insertCell(5).innerHTML = '<a class="button20" id="barbdelAll"><span>Delete ALL</span></a>';
	 document.getElementById('barbdelAll').addEventListener('click', function(){
		t.deleteBarbsCity(citynumber,cityname);
	 }, false);
  },   
	   
  deleteBarbElement: function(citynumber,queueId,cityname,showFlag){
      var t = Tabs.Barb;
      var queueId = parseInt(queueId);
      var myarray = t.barbArray[citynumber];
      if (myarray) {
        myarray.splice((queueId-1), 1);
        GM_setValue('DF_' + Seed.player['name'] + '_city_' + citynumber + '_' + getServerId(), JSON2.stringify(myarray));
        t.checkBarbData();
        if (showFlag) t.showBarbs(citynumber,cityname);
       }
  },
	  
  deleteBarbsCity: function(citynumber,cityname){
      var t = Tabs.Barb;
      var queueId = parseInt(queueId);
	  AttackOptions.Update[citynumber][1] = 0;
      GM_deleteValue('DF_' + Seed.player['name'] + '_city_' + citynumber + '_' + getServerId())
      t.checkBarbData();
      t.showBarbs(citynumber,cityname);
      reloadKOC();
  },  
  
  saveTroops: function(){
    for(i=0;i<10;i++){
  	 	for (w=0;w<12;w++){
  	 		AttackOptions.Troops[i+1][w+1] = parseIntNan(document.getElementById('level'+i+'troop'+w).value);
  	 	}
		if(parseIntNan(document.getElementById('dist'+i).value) > AttackOptions.MaxDistance)
			document.getElementById('dist'+i).value = AttackOptions.MaxDistance;
		AttackOptions.MinDistance[i+1] = parseIntNan(document.getElementById('Mindist'+i).value);
  	 	AttackOptions.Distance[i+1] = parseIntNan(document.getElementById('dist'+i).value);	 		
	 }
	 saveAttackOptions();
  },
  
   deletebarbs: function(){
	for (i=1;i<=Seed.cities.length;i++){
		AttackOptions.Update[i][1] = 0;
		GM_deleteValue('DF_' + Seed.player['name'] + '_city_' + i + '_' + getServerId())
	}
	reloadKOC();
   },

  checkBarbData: function(){
  	var t = Tabs.Barb;
	if(!AttackOptions.Running) return;
	  for (i=1;i<=Seed.cities.length;i++){
		if (!AttackOptions.Levels[i][0]) continue; //Skip city if not selected
		t.barbArray[i] = [];
	  	var myarray = JSON2.parse(GM_getValue('DF_' + Seed.player['name'] + '_city_' + i + '_' + getServerId(),"[]"));
		if ((myarray == undefined || myarray.length == 0) && t.searchRunning==false) {
	  		t.lookup=i;
			if(parseInt(AttackOptions.Update[t.lookup][1]) >= parseInt(AttackOptions.stopsearch)) continue; //Skip if search results are empty more than X times
			t.searchRunning = true;
	  		t.opt.startX = parseInt(Seed.cities[(i-1)][2]);
	  		t.opt.startY = parseInt(Seed.cities[(i-1)][3]);  
	  		t.clickedSearch();
			break;
	  	}
		if (myarray){
			if(AttackOptions.Method == 'distance') t.barbArray[i] = myarray.sort(function sortBarbs(a,b) {a = a['dist'];b = b['dist'];return a == b ? 0 : (a < b ? -1 : 1);});
			if(AttackOptions.Method == 'level') t.barbArray[i] = myarray.sort(function sortBarbs(a,b) {a = a['level']+a['dist'];b = b['level']+b['dist'];return a == b ? 0 : (a > b ? -1 : 1);});
			if(AttackOptions.Method == 'lowlevel') t.barbArray[i] = myarray.sort(function sortBarbs(a,b) {a = a['level']+a['dist'];b = b['level']+b['dist'];return a == b ? 0 : (a < b ? -1 : 1);});
	  		GM_setValue('DF_' + Seed.player['name'] + '_city_' + i + '_' + getServerId(), JSON2.stringify(t.barbArray[i]));
	  	}
		AttackOptions.Update[i][1] = 0;
		saveAttackOptions();
	  }
	  t.nextattack = setTimeout(t.getnextCity, parseInt((Math.random()*3000)+2000));
  },
  
  toggleBarbState: function(obj){
	var t = Tabs.Barb;
        obj = document.getElementById('pbBarbState');
	if (AttackOptions.Running == true) {
		AttackOptions.Running = false;
		obj.value = "Attack = OFF";
                updatebotbutton('Attack-OFF', 'pbbosquestab');
		saveAttackOptions();
		t.nextattack = null;
	} else {
		AttackOptions.Running = true;
		obj.value = "Attack = ON";
                updatebotbutton('Attack-ON', 'pbbosquestab');
		saveAttackOptions();
		t.checkBarbData();
		t.nextattack = setTimeout(t.getnextCity, parseInt((Math.random()*3000)+2000));
	}
  },
  
  barbing : function(){
  	   var t = Tabs.Barb;
	   var city = t.city;
       citynumber = Seed.cities[city-1][0];
       cityID = 'city' + citynumber; 
       t.getAtkKnight(cityID);
       t.getRallypointLevel(cityID);
       if (t.rallypointlevel > 11 ) t.rallypointlevel = 11;
	   var slots=0;
	   if (Seed.queue_atkp[cityID] != undefined){
	       for(var k in Seed.queue_atkp[cityID])
		    slots++;
		   if(Seed.queue_atkp[cityID].toSource() == "[]")
			slots = 0;
		} else
			slots=0; 
       var element1 = 'pddatacity'+(city-1);
       document.getElementById(element1).innerHTML = 'Sent: ' + AttackOptions.BarbsDone[city]; 
       var element2 = 'pddataarray'+(city-1); 
       document.getElementById(element2).innerHTML = 'PR: (' + slots + '/' + t.rallypointlevel +')';
	   if ((t.rallypointlevel-AttackOptions.RallyClip) <= slots) return;
	   if (t.knt.toSource() == "[]") return; 
	   var kid = t.knt[0].ID;
	   if(t.barbArray[city].length > 0)
		var barbinfo = t.barbArray[city].shift();
	   else if(parseInt(AttackOptions.Update[city][1])==0){
		t.checkBarbData();
		return;
	   } else 
		return;
       var check=0;
       var barblevel = parseInt(barbinfo.level);
       if (AttackOptions.Levels[city][barbinfo.level]) check=1;
       if (barbinfo.dist < AttackOptions.MinDistance[barblevel] || barbinfo.dist > AttackOptions.Distance[barblevel]){
			check=0;
			GM_setValue('DF_' + Seed.player['name'] + '_city_' + city + '_' + getServerId(), JSON2.stringify(t.barbArray[city]));
			return;
		}

         // check troop levels in city
         var trps = AttackOptions.Troops[barblevel];
         var num_troops = 0;
         for (var ii=1; ii<13; ii++) {
	        if (parseInt(trps[ii]) > Seed.units[cityID]['unt'+ii]) check = 0;
	        num_troops += trps[ii];
         }
         if (num_troops == 0) check = 0;
         if (check == 0){
		t.barbArray[city].push(barbinfo);
		GM_setValue('DF_' + Seed.player['name'] + '_city_' + city + '_' + getServerId(), JSON2.stringify(t.barbArray[city]));
		return;
	   }
        	var element = 'pdtotalcity'+(city-1);
		if (t.barbArray[city] == undefined) document.getElementById(element).innerHTML = 'No Data';
		else document.getElementById(element).innerHTML =  'Forests:' + t.barbArray[city].length;
       var xcoord = barbinfo['x'];
       var ycoord = barbinfo['y'];
       t.doBarb(citynumber,city,xcoord,ycoord,barblevel,kid,trps);
       saveAttackOptions();
  },

  getnextCity: function(){
	var t = Tabs.Barb;
	if(t.searchRunning || !AttackOptions.Running) return;
	t.nextattack = setTimeout(t.getnextCity, parseInt((Math.random()*3)+AttackOptions.SendInterval)*1000);
	var city = t.city+1;
	if (city>Seed.cities.length){
		city=1;
	}
	t.city = city;
	if(AttackOptions.UpdateEnabled){
		var now = unixTime();
		if(now > parseInt(AttackOptions.Update[city][0] + (AttackOptions.UpdateInterval*60))){
			AttackOptions.Update[city][1]=0;
			t.barbArray[city] = []; //Clears data if last update was more than X minutes
			GM_setValue('DF_' + Seed.player['name'] + '_city_' + city + '_' + getServerId(), JSON2.stringify(t.barbArray[city]));
		}
	}
	if(AttackOptions.Levels[city][0])
		t.barbing();
  },
  
  getRallypointLevel: function(cityId){
    var t = Tabs.Barb;
    for (var o in Seed.buildings[cityId]){
  	var buildingType = parseInt(Seed.buildings[cityId][o][0]);
  	var buildingLevel = parseInt(Seed.buildings[cityId][o][1]);
  	if (buildingType == 12) t.rallypointlevel=parseInt(buildingLevel);
     }
  }, 
  
  getAtkKnight : function(cityID){
     var t = Tabs.Barb;
     t.knt = new Array();
     t.getRallypointLevel(cityID);
     for (k in Seed.knights[cityID]){
     		if (Seed.knights[cityID][k]["knightStatus"] == 1 && Seed.leaders[cityID]["resourcefulnessKnightId"] != Seed.knights[cityID][k]["knightId"] && Seed.leaders[cityID]["politicsKnightId"] != Seed.knights[cityID][k]["knightId"] && Seed.leaders[cityID]["combatKnightId"] != Seed.knights[cityID][k]["knightId"] && Seed.leaders[cityID]["intelligenceKnightId"] != Seed.knights[cityID][k]["knightId"]){
     			t.knt.push ({
     				Name:   Seed.knights[cityID][k]["knightName"],
     				Combat:	Seed.knights[cityID][k]["combat"],
     				ID:		Seed.knights[cityID][k]["knightId"],
     			});
     		}
     }
     t.knt = t.knt.sort(function sort(a,b) {
	a = parseInt(a['Combat']);
	b = parseInt(b['Combat']);
     if(parseInt(AttackOptions.knightselector) > 0)
	return a == b ? 0 : (a > b ? -1 : 1);
     else
	return a == b ? 0 : (a < b ? -1 : 1);
      });
  },
    
  doBarb: function(cityID,counter,xcoord,ycoord,level,kid,trps){
  		var t = Tabs.Barb;
    		var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
  		params.cid=cityID;
  		params.type=4;
  	        params.kid=kid;
  		params.xcoord = xcoord;
  		params.ycoord = ycoord;
		for (ii=1; ii<13; ii++) {
			if(parseInt(trps[ii]) > 0)
				params['u'+ii]=trps[ii];
        }
    		AttackOptions.BarbsTried++;
  		document.getElementById('pberror1').innerHTML = 'Tries:'+ AttackOptions.BarbsTried; 
  		new AjaxRequest(unsafeWindow.g_ajaxpath + "ajax/march.php" + unsafeWindow.g_ajaxsuffix, {
  		         method: "post",
  		         parameters: params,
  		         loading: true,
  		         onSuccess: function (transport) {
				   var rslt = eval("(" + transport.responseText + ")");
				   if (rslt.ok) {
					 var timediff = parseInt(rslt.eta) - parseInt(rslt.initTS);
					 var ut = unsafeWindow.unixtime();
					 var unitsarr=[0,0,0,0,0,0,0,0,0,0,0,0,0];
					 var resources=[0,0,0,0,0,0,0,0,0,0,0,0,0];
					 for(i = 0; i <= unitsarr.length; i++){
						if(params["u"+i]){
						unitsarr[i] = params["u"+i];
						}
					 }
					 var currentcityid = params.cid;
					 unsafeWindow.attach_addoutgoingmarch(rslt.marchId, rslt.marchUnixTime, ut + timediff, params.xcoord, params.ycoord, unitsarr, params.type, params.kid, resources, rslt.tileId, rslt.tileType, rslt.tileLevel, currentcityid, true);
					 unsafeWindow.update_seed(rslt.updateSeed)
					 if(rslt.updateSeed){unsafeWindow.update_seed(rslt.updateSeed)};
					 var slots=0;
					 for(var k in Seed.queue_atkp['city'+cityID])
					  slots++;
					 if(Seed.queue_atkp['city'+cityID].toSource() == "[]")
					  slots = 0;
					 AttackOptions.BarbsDone[counter]++;
					 var element1 = 'pddatacity'+(counter-1);
					 document.getElementById(element1).innerHTML = 'Sent: ' + AttackOptions.BarbsDone[counter]; 
					 var element2 = 'pddataarray'+(counter-1); 
					 document.getElementById(element2).innerHTML = 'PR: (' + slots + '/' + t.rallypointlevel +')';
					 var now = new Date().getTime()/1000.0;
					 now = now.toFixed(0);
					 GM_setValue('DF_' + Seed.player['name'] + '_city_' + counter + '_' + getServerId(), JSON2.stringify(t.barbArray[counter]));
					 saveAttackOptions();
				   } else {
					 if (rslt.error_code != 8 && rslt.error_code != 213 && rslt.error_code == 210) AttackOptions.BarbsFailedVaria++;
					 if (rslt.error_code == 213)AttackOptions.BarbsFailedKnight++;
					 if (rslt.error_code == 210) AttackOptions.BarbsFailedRP++;
					 if (rslt.error_code == 8) AttackOptions.BarbsFailedTraffic++;
					 if (rslt.error_code == 104) {
					   AttackOptions.BarbsFailedBog++;
					   GM_setValue('DF_' + Seed.player['name'] + '_city_' + counter + '_' + getServerId(), JSON2.stringify(t.barbArray[counter]));
					   saveAttackOptions();
					 }
					 document.getElementById('pberror2').innerHTML = 'Excess Traffic errors:' + AttackOptions.BarbsFailedTraffic; 
					 document.getElementById('pberror3').innerHTML = 'Rally Point errors: '+ AttackOptions.BarbsFailedRP;
					 document.getElementById('pberror4').innerHTML = 'Knight errors:' + AttackOptions.BarbsFailedKnight;
					 document.getElementById('pberror5').innerHTML = 'Other errors:' + AttackOptions.BarbsFailedVaria;
					 document.getElementById('pberror6').innerHTML = 'Bog errors:' + AttackOptions.BarbsFailedBog;
					 }
  		         },
  		         onFailure: function () {}
  		 });
  	 saveAttackOptions();
  },
  
  sendreport: function(){
	  var t = Tabs.Barb;
	  var total = 0;
    var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
    params.emailTo = Seed.player['name'];
    params.subject = "Barb Overview";
    var message = 'Barbing Stats: (Sent/Total)' + '%0A';
    for (x=1;x<=Seed.cities.length;x++){	 
    	message+= Seed.cities[x-1][1] + ': (' + AttackOptions.BarbsDone[x] + '/' + t.barbArray[x].length +')' + '%0A';
    }
    message += '%0A'+ 'Excess traffic errors: ' + AttackOptions.BarbsFailedTraffic +'%0A';
    message += 'Rallypoint errors: ' + AttackOptions.BarbsFailedRP +'%0A';
    message += 'Knight errors: ' + AttackOptions.BarbsFailedKnight +'%0A';
    message += 'Other errors: ' + AttackOptions.BarbsFailedVaria +'%0A';
    message += 'Actual sent attacks: ' + (AttackOptions.BarbsTried - AttackOptions.BarbsFailedTraffic - AttackOptions.BarbsFailedRP - AttackOptions.BarbsFailedKnight -  AttackOptions.BarbsFailedVaria) +'%0A';
    message += '%0A'+'%0A' + 'Food Gain (for '+AttackOptions.MsgInterval+' hour of barbing)' +'%0A';
    for (q=1;q<=Seed.cities.length;q++){
    	var cityID = 'city' + Seed.cities[q-1][0];
    	var gain = parseInt(Seed.resources[cityID]['rec1'][0] / 3600) - AttackOptions.Foodstatus[q];
    	message+= Seed.cities[q-1][1] + ': Start: ' + addCommas(AttackOptions.Foodstatus[q]) + ' End :' + addCommas(parseInt(Seed.resources[cityID]['rec1'][0] / 3600)) + ' Gain: ';
    	message += addCommas(gain)  + '%0A';
		total += gain;
    }
	message += '%0A Total food gain : '+addCommas(total)+'%0A';
    params.message = message;
    params.requestType = "COMPOSED_MAIL";
    new AjaxRequest(unsafeWindow.g_ajaxpath + "ajax/getEmail.php" + unsafeWindow.g_ajaxsuffix, {
        method: "post",
        parameters: params,
        onSuccess: function (message) {
            var rslt = eval("(" + message.responseText + ")");
            if (rslt.ok) {
            } else {
            }
        },
        onFailure: function () {
        },
    });  
  },
  
  clickedSearch : function (){
    var t = Tabs.Barb;
    t.opt.maxDistance = parseInt(AttackOptions.MaxDistance); 
    t.opt.searchShape = 'circle'; 
    t.mapDat = [];
    t.firstX =  t.opt.startX - t.opt.maxDistance;
    t.lastX = t.opt.startX + t.opt.maxDistance;
    t.firstY =  t.opt.startY - t.opt.maxDistance;
    t.lastY = t.opt.startY + t.opt.maxDistance;
    t.tilesSearched = 0;
    t.tilesFound = 0;
    t.curX = t.firstX;
    t.curY = t.firstY;
    var xxx = t.MapAjax.normalize(t.curX);
    var yyy = t.MapAjax.normalize(t.curY);
    var element = 'pddatacity'+(t.lookup-1);
    document.getElementById(element).innerHTML = 'Searching at '+ xxx +','+ yyy;
    setTimeout (function(){t.MapAjax.request (xxx, yyy, 15, t.mapCallback)}, MAP_DELAY);
  },
  
  mapCallback : function (left, top, width, rslt){
    var t = Tabs.Barb;
    if (!t.searchRunning)
      return;
    if (!rslt.ok){
      t.stopSearch ('ERROR: '+ rslt.errorMsg);
      return;
    }
    map = rslt.data;
    for (k in map){
	  if (map[k].tileType==54 && AttackOptions.Levels[t.lookup][map[k].tileLevel]){
	     var dist = distance (t.opt.startX, t.opt.startY, map[k].xCoord, map[k].yCoord);
		 if(dist <= parseInt(AttackOptions.MaxDistance))
			t.mapDat.push ({time:0,x:map[k].xCoord,y:map[k].yCoord,dist:dist,level:map[k].tileLevel});
	  }
    }
    t.tilesSearched += (15*15);
    t.curX += 15;
    if (t.curX > t.lastX){
      t.curX = t.firstX;
      t.curY += 15;
      if (t.curY > t.lastY){
		t.stopSearch('Found: ' + t.mapDat.length);
        return;
      }
    }
    var x = t.MapAjax.normalize(t.curX);
    var y = t.MapAjax.normalize(t.curY);
    var element = 'pddatacity'+(t.lookup-1);
    document.getElementById(element).innerHTML = 'Searching at '+ x +','+ y;
    setTimeout (function(){t.MapAjax.request (x, y, 15, t.mapCallback)}, MAP_DELAY);
  },
  
  stopSearch : function (msg){
    var t = Tabs.Barb;
	var element = 'pddatacity'+(t.lookup-1);
        document.getElementById(element).innerHTML = msg;
	GM_setValue('DF_' + Seed.player['name'] + '_city_' + t.lookup + '_' + getServerId(), JSON2.stringify(t.mapDat));
	AttackOptions.Update[t.lookup][0] = unixTime();
	AttackOptions.Update[t.lookup][1]++;
        t.searchRunning = false;
	saveAttackOptions();
	t.checkBarbData();
	return;
  },
  
  hide : function (){
  
  },

  show : function (){
  
  },
};

/***********************************************************************************/
/************ KOC POWER - TABS TOURNAMENT *****************************************/
/*********************************************************************************/
Tabs.Tournament = {
tabLabel : 'TOURNAMENT',
tabOrder : 27,
cont:null,
displayTimer : null,
 
init : function (div){
	var t = Tabs.Tournament;
	t.cont = div;
},

hide : function (){
	var t = Tabs.Tournament;
	clearTimeout (t.displayTimer);
},
getContent : function (){
	var t = Tabs.Tournament;
	return t.cont;
},
show : function () {
	var t = Tabs.Tournament;
	t.cont.style.overflowY = 'auto';
	t.cont.style.maxHeight = '650px';
  clearTimeout (t.displayTimer);
  t.cont.innerHTML = "<div class='tourny_modal_upsell'></div>";
  var mhtl = "<DIV class=pbStat>POPULATION AND PRODUCTION INFORMATION</div><table width=100% class=pbTab2><tr><td colspan=8>&nbsp;</td></tr><tr><td></td>";
  for(var i=0; i<Cities.numCities; i++) {
   mhtl += "<TD align=center valign=bottom width=60px><B>" + Cities.cities[i].name + "</B></TD>";
  }
  mhtl += "</tr><tr><td><img height=18 src=http://koc-power-pdx.googlecode.com/svn/trunk/img/troops/unit_2_50_s34.jpg title=Militiaman> Militiaman  / h</td>";
  var temps=[];
  for(var i=0; i<Cities.numCities; i++) {
   temps[i]=((Cities.cities[i]['Troop2Time'] > 0)?(3600 / Cities.cities[i]['Troop2Time']):0);
   mhtl += "<td>" + addCommas(parseInt(temps[i])) +"</td>";
  }
    mhtl += "</tr><tr><td><img height=18 src=https://kabam1-a.akamaihd.net/kingdomsofcamelot/fb/e2/src/img/population_40.png title=Population> Population / h</td>";
	var pop=[];
  for(var i=0; i<Cities.numCities; i++) {
   cityID = 'city'+ Cities.cities[i].id;
   pop[i] =  parseInt(Seed.citystats[cityID]["pop"][1]) / 2;
   mhtl += "<td>" + addCommas(parseInt(pop[i])) +"</td>";
  }
  mhtl += "</tr><tr><td><b>difference</b></td>";
  var diff=0;
  for(var i=0; i<Cities.numCities; i++) {
   diff = parseInt(pop[i] - temps[i]);
   var couleur=" style='font-color:green' ";
   if (diff<0) couleur=" style='background-color:red' ";
   mhtl += "<td "+couleur+"><b>" + addCommas(parseInt(diff)) +"</b></td>";
  }
  
   mhtl += "</tr><tr><td><img height=18 src=https://kabam1-a.akamaihd.net/kingdomsofcamelot/fb/e2/src/img/happiness.png title=happiness> happiness</td>";
   for(var i=0; i<Cities.numCities; i++) {
   cityID = 'city'+ Cities.cities[i].id;
   var bon = parseInt(Seed.citystats[cityID]["pop"][2]); 
   var bonc = "red";
   if (bon>99) bonc="green";
   mhtl += "<td style='background-color:"+bonc+"'><center><b>"+bon+"</td>";
  }
  var now = unixTime();
  mhtl += "</tr><tr><td><b>training time</b></td>";
    for(var i=0; i<Cities.numCities; i++) {
     cityID = 'city'+ Cities.cities[i].id;
     var totTime = 0;
     var q = Seed.queue_unt[cityID]; 
     if (q!=null && q.length>0)
         totTime = q[q.length-1][3] - now;
     if (totTime < 0) totTime = 0;
     if (totTime < 3600)
      var bonc="style='background-color:red'";
     else
      var bonc="";
     mhtl += "<td "+bonc+"><center><b>"+timestr(totTime)+"</td>";
    }
    
  mhtl += "</tr></table><br>";
  t.cont.innerHTML += mhtl;
  var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
  params.format=2;
  params.tournyPos=0;
  new AjaxRequest(unsafeWindow.g_ajaxpath+"ajax/getLeaderboard.php"+unsafeWindow.g_ajaxsuffix, {  method:"post",  parameters:params,
  
  onSuccess:function(transport){
   var rslt=eval("("+transport.responseText+")");
   if(rslt.ok){
   
    if(!rslt.data){
	   
	t.cont.innerHTML +="<div class=pbStat>CHECKING TOURNAMENT</div><div class='tourny_modal_upsell'><br><center><b>"+unsafeWindow.g_js_strings.modal_tourny_changetab.notourny+"</b></center></div>";
	  
	  
    }else{ //  rslt.data
     var tournyhtml=new Array();
     
     if(rslt.name){
	    tournyhtml.push("<div class=pbStat><center>"+rslt.name.replace('The Tournament of Might','The Tournament of Might')+"</center></div>")
     }  else{
	    tournyhtml.push("<div class='tournymodaltitle'><center>"+unsafeWindow.g_js_strings.commonstr.tournament+"</div>")
     }
	   tournyhtml.push("<div>");
	   
	   
	   
	   if(rslt.startdate&&rslt.enddate){
	   	   	    var startTime=rslt.startdate;
	   	   	    var endTime=rslt.enddate;
	   	   	    var now=parseInt(new Date().getTime()/1000);
	   	   	    tournyhtml.push("<table width=100% align=center class=pbTab><tr bgcolor=#FE8888><td width=40%><b>start</td><td width=40%><b>just</td><td width=20%><b>time Left</td></tr>");
	   	   	    dt = new Date ();
	   	            dt.setTime (startTime * 1000);
	   	            dtf = new Date ();
	   	            dtf.setTime (endTime * 1000);
	   	           
	   	            var restant = endTime - now; 
	   	            
	   	   	   
	   	   	   tournyhtml.push("<tr><td>");
	   	   	     tournyhtml.push("" + dt.toLocaleDateString() + " - "+ dt.toLocaleTimeString());
	   	   	    tournyhtml.push("</td><td>");
	   	   	    tournyhtml.push("" + dtf.toLocaleDateString()+ " - "+ dtf.toLocaleTimeString());
	   	   	    tournyhtml.push("</td><td>"+timestr(restant,1)+"</td></tr></table>");
	   	     tournyhtml.push("<br>");
	   
	   }
	   
	
	   tournyhtml.push("<center><table class='tourny_list_table' cellpadding='0' cellspacing='0' border='0' width=90% style='margin:5px'>");
	   tournyhtml.push("<thead>");
	   tournyhtml.push("<tr>");
     if(rslt.type==24){
	    tournyhtml.push("<td class='rankcol' style='background-color:red'>");
	    tournyhtml.push("<div><input type=button id='BOTournoiPM' value='-'>&nbsp;"+unsafeWindow.g_js_strings.commonstr.ranking+"</div>");
	    tournyhtml.push("</td>");
	    tournyhtml.push("<td  style='background-color:red'>");
	    tournyhtml.push("<div>chancellor</div>");
	    tournyhtml.push("</td>");
	    tournyhtml.push("<td  style='background-color:red'>");
	    tournyhtml.push("<div>"+unsafeWindow.g_js_strings.commonstr.alliance+"</div>");
	    tournyhtml.push("</td>");
	    tournyhtml.push("<td  style='background-color:red'>");
	    tournyhtml.push("<div>"+unsafeWindow.g_js_strings.modal_tourny_changetab.mightgained+"</div>");
	    tournyhtml.push("</td  style='background-color:red'>");
	    tournyhtml.push("<td  style='background-color:red'> ");
	    tournyhtml.push("<div>"+unsafeWindow.g_js_strings.modal_tourny_changetab.rewardperplayer+"</div>");
	    tournyhtml.push("</td>")
      }else{
            tournyhtml.push("<td	class='rankcol' style='background-color:red'>");
	    tournyhtml.push("<div><input type=button id='BOTournoiPM' value='-'>&nbsp;"+unsafeWindow.g_js_strings.commonstr.ranking+"</div>");
	    tournyhtml.push("</td>");
	    tournyhtml.push("<td  style='background-color:red'>");
	    tournyhtml.push("<div>player</div>");
	    tournyhtml.push("</td>");
	    tournyhtml.push("<td  style='background-color:red'>");
	    tournyhtml.push("<div>"+unsafeWindow.g_js_strings.commonstr.alliance+"</div>");
	    tournyhtml.push("</td>");
	    tournyhtml.push("<td  style='background-color:red'>");
	    tournyhtml.push("<div>"+rslt.contestcategory+"</div>");
	    tournyhtml.push("</td>");
	    tournyhtml.push("<td  style='background-color:red'>");
	    tournyhtml.push("<div>"+unsafeWindow.g_js_strings.commonstr.reward+"</div>");
	    tournyhtml.push("</td>")
     }
	   tournyhtml.push("</tr>");
	   tournyhtml.push("</thead>");
	   tournyhtml.push("</tbody>");
	   var nb=rslt.data.length;
	   var votrepuissance = 0;
	   for(var i=0;i<rslt.data.length;i++){
	    var row=rslt.data[i];
	    if(rslt.type==24){ // Tournament
	     if (getMyAlliance()[1] == row.alliance) {
	      votrepuissance=row.contestValue;
	      break;
	     }
	    } else {
	     if (Seed.player.prefix + ' '+ Seed.player.name == row.name ) {
	      votrepuissance=row.contestValue;
	      break;
	     }	
	    }
	   }
	   for(var i=0;i< Options.TournoiLigne;i++){
	    var row=rslt.data[i];
	    var rewardString=row.itemCount+" ";
	    if(row.itemType==0){
	     rewardString+=unsafeWindow.g_js_strings.commonstr.gems;
	    }else{
	     rewardString+=unsafeWindow.itemlist["i"+row.itemType].name;
	    }
	    var couleur="";
	    if(rslt.type==24){ //Alliance Tournament
	     if (getMyAlliance()[1] == row.alliance) {
	      couleur=" style='background-color:#FF0000' ";
	     }
	    }else{
	     if (Seed.player.prefix + ' '+ Seed.player.name == row.name ) {
	      couleur=" style='background-color:#FF0000' ";
	     }
	    }
	    if(i%2==1){
	     tournyhtml.push("<tr>")
	    }else{
	     tournyhtml.push("<tr class='stripe'>")
	    }
	    tournyhtml.push("<td class='rankcol' "+couleur+">");
	    tournyhtml.push("<div><b>"+row.ranking+"</b></div>");
	    tournyhtml.push("</td>");
	    tournyhtml.push("<td "+couleur+">");
	    tournyhtml.push("<div>"+row.name+"</div>");
	    tournyhtml.push("</td>");
	    tournyhtml.push("<td "+couleur+">");
	    tournyhtml.push("<div>"+(row.alliance||"----")+"</div>");
	    tournyhtml.push("</td>");
	    tournyhtml.push("<td "+couleur+">");
	    tournyhtml.push("<div>"+addCommas(row.contestValue));
	    if (votrepuissance>0) {
	      var ecartavecvous = parseInt(row.contestValue - votrepuissance);
	      if (ecartavecvous>0) {
	       tournyhtml.push("&nbsp;(+ " + addCommas(ecartavecvous) +")");
	      } 
	      if (ecartavecvous<0) {
	       tournyhtml.push("&nbsp;(" + addCommas(ecartavecvous) +")");
	      }
	    }
	    tournyhtml.push("</div>");
	    tournyhtml.push("</td>");
	    tournyhtml.push("<td "+couleur+">");
	    tournyhtml.push("<div>"+rewardString+"</div>");
	    tournyhtml.push("</td>");
	    tournyhtml.push("</tr>")
	   } // fin du for
	
	      if(rslt.type!=24){

	    for(var i= Options.TournoiLigne;i<rslt.data.length;i++){
	   	    var row=rslt.data[i];
	   	 
	   	    if (Seed.player.prefix + ' '+ Seed.player.name == row.name ) {
	   	      var rewardString=row.itemCount+" ";
	   	     	    if(row.itemType==0){
	   	     	     rewardString+=unsafeWindow.g_js_strings.commonstr.gems;
	   	     	    }else{
	   	     	     rewardString+=unsafeWindow.itemlist["i"+row.itemType].name;
	   	     	    }
	   	     	    tournyhtml.push("<tr class='stripe' >")
	   	     	    tournyhtml.push("<td class='rankcol' style='background-color:#FF0000'>");
	   	     	    tournyhtml.push("<div><b>"+row.ranking+"</b></div>");
	   	     	    tournyhtml.push("</td>");
	   	     	    tournyhtml.push("<td style='background-color:#FF0000'>");
	   	     	    tournyhtml.push("<div>"+row.name+"</div>");
	   	     	    tournyhtml.push("</td>");
	   	     	    tournyhtml.push("<td style='background-color:#FF0000'>");
	   	     	    tournyhtml.push("<div>"+(row.alliance||"----")+"</div>");
	   	     	    tournyhtml.push("</td>");
	   	     	    tournyhtml.push("<td style='background-color:#FF0000'>");
	   	     	    tournyhtml.push("<div>"+addCommas(row.contestValue)+"</div>");
	   	     	    tournyhtml.push("</td>");
	   	     	    tournyhtml.push("<td style='background-color:#FF0000'>");
	   	     	    tournyhtml.push("<div>"+rewardString+"</div>");
	   	     	    tournyhtml.push("</td>");
	   	            tournyhtml.push("</tr>")
	   	   }    
	   }
	   }
	   tournyhtml.push("</tbody>");
	   tournyhtml.push("</table>");
      tournyhtml.push("</div>");
      t.cont.innerHTML += tournyhtml.join("");      
           document.getElementById('BOTournoiPM').addEventListener ('click', function() { 
            var lg=rslt.data.length;
            if (rslt.type!=24) lg=25;
            t.plusmoins(lg);
           }, false);      
           
        if ((Options.TournoiLigne==5 && rslt.type!=24) || (Options.TournoiLigne==5 && rslt.type==24)) {
	        document.getElementById('BOTournoiPM').value="Maximizar";
	    } else {
	        document.getElementById('BOTournoiPM').value="Minimizar";           
        }
          } // fin rslt.data 
         } else {
            t.cont.innerHTML = "<div class='tourny_modal_upsell'><center>No Info</div>";
         }
       }, onFailure:function()  {
         t.cont.innerHTML = "<div class='tourny_modal_upsell'><center>No Info</div>";
       }
   });
   t.displayTimer = setTimeout (t.show, 240000);       
  },
  plusmoins: function(lg) {
   var t = Tabs.Tournament;
   if (document.getElementById('BOTournoiPM').value=="Maximize") {
     document.getElementById('BOTournoiPM').value="Minimize";
     Options.TournoiLigne = lg;
   } else {
     document.getElementById('BOTournoiPM').value="Maximize";
     Options.TournoiLigne = 5;
   }
   saveOptions();
   clearTimeout (t.displayTimer);
   t.show();
  },  
}
/************************  AutoTrain Tab ************************/

Tabs.AutoTrain = {
  tabOrder: 18,
  tabLabel: 'AutoTrain',
  myDiv: null,
  city:0,
  gamble : {"1":{"min":"5","max":"15","cost":"2"},"2":{"min":"10","max":"25","cost":"4"}},
      init: function(div){
		var t = Tabs.AutoTrain;
        t.myDiv = div;
        t.city = 0;
	t.nextcity();


      var m = '<DIV id=pbAT class=pbStat>AUTO TRAINING</div><TABLE id=pbAT width=100% height=0%       class=pbTab><TR align="center">';
      if (TrainOptions.Running == false) {
          m += '<TD align=left><INPUT id=pbAutoTrainState type=submit value="AutoTrain = OFF"></td>';
		updatebotbutton('AutoTrain -OFF', 'pbtraintab');
      }else {
          m += '<TD align=center><INPUT id=pbAutoTrainState   type=submit value="AutoTrain = ON"></td>';
		updatebotbutton('AutoTrain-ON', 'pbtraintab');
      }
      m += '<TD align=center><INPUT id=pbShowTrainHelp type=submit value="Help"></td>';
      m += '</tr></table></div>';

      m += '<DIV class=pbStat>TRAINING OPTIONS</div><TABLE width=100% height=0% class=pbTab><TR align="center">';
     for (i=0;i<Seed.cities.length;i++){
      	  city = i+1;
      	   m += '<TABLE width=100% height=0% class=pbTab><TR align="left">';
           m+='<TR><TD width=30px><INPUT type=checkbox class='+city+' id="SelectCity'+city+'"></td>';
           m+='<TD><TABLE><TR>';
           m+='<TD><B>'+ Seed.cities[i][1] +'</b></td>'; 
	      m += '<TD width=150px><SELECT class='+city+' id="TroopsCity'+city+'"><option value="Select">--Select--</options>';
	      for (y in unsafeWindow.unitcost) m+='<option value="'+y.substr(3)+'">'+unsafeWindow.unitcost[y][0]+'</option>';
	      m+='</select></td>';
	      m +='<TD width=100px>Min.: <INPUT class='+city+' id=treshold'+city+' type=text size=4 maxlength=6 value="'+ TrainOptions.Threshold[city]+'"\></td>';
	      m +='<TD width=130px><INPUT type=checkbox class='+city+' id="SelectMax'+city+'"> Max.: <INPUT class='+city+' id=max'+city+' type=text size=5 maxlength=6 value="'+ TrainOptions.Max[city]+'"\></td>';
	      m +='<TD>workers use: ';
        m+='<SELECT class='+city+' id="workers'+city+'"><option value="0">0%</options>';
        m+='<option value="25">25%</options>';
        m+='<option value="50">50%</options>';
        m+='<option value="75">75%</options>';
        m+='<option value="100">100%</options>';
        m+='</td></tr></table></td><tr>';
        m += '<TD></td><TD><TABLE><TR>';
        m += '<TD width=5%><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/food_30.png"></td>'; 
	      m += '<TD><INPUT class='+city+' id="KeepFood'+city+'" type=text size=7 maxlength=7 value="'+ TrainOptions.Keep[city]['Food']+'"\></td>';
	      m += '<TD width=20px><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/wood_30.png"></td>';
	      m += '<TD><INPUT class='+city+' id="KeepWood'+city+'" type=text size=7 maxlength=7 value="'+ TrainOptions.Keep[city]['Wood']+'"\></td>';
	      m += '<TD width=20px><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/stone_30.png"></td>';
	      m += '<TD><INPUT class='+city+' id="KeepStone'+city+'" type=text size=7 maxlength=7 value="'+ TrainOptions.Keep[city]['Stone']+'"\></td>';
	      m += '<TD width=20px><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/iron_30.png"></td>';
	      m += '<TD><INPUT class='+city+' id="KeepOre'+city+'" type=text size=7 maxlength=7 value="'+ TrainOptions.Keep[city]['Ore']+'"\></td>';
	      m += '<TD><SELECT class='+city+' id="Resource'+city+'"><option value="true">keep</options>';
	      m+='<option value="false">Usar</option>';
  	m+='</select></td>';
        m += '<TD><SELECT class='+city+' id="TrainSpeed_'+city+'">\
            <option value=0><CENTER>--- '+unsafeWindow.g_js_strings.commonstr.speedup+' ---</center></option>\
            <option value=1>'+ t.gamble[1].cost+'x res ('+ t.gamble[1].min+' - '+t.gamble[1].max+'%)</option>\
            <option value=2>'+ t.gamble[2].cost+'x res ('+ t.gamble[2].min+' - '+t.gamble[2].max+'%)</option></select>';
        m+='</td></tr></table>';
        m+='</td></tr></table>'; 
	  }
      t.myDiv.innerHTML = m;
      for (i=0;i<Seed.cities.length;i++){
           city = i+1;
           document.getElementById('TroopsCity'+city).value = TrainOptions.Troops[city];
           document.getElementById('SelectCity'+city).checked = TrainOptions.Enabled[city];
           document.getElementById('Resource'+city).value = TrainOptions.Resource[city];
           document.getElementById('SelectMax'+city).checked = TrainOptions.SelectMax[city];
           document.getElementById('workers'+city).value = TrainOptions.Workers[city];
           document.getElementById('TrainSpeed_'+city).value = TrainOptions.Gamble[city];
           if (!TrainOptions.SelectMax[city]) document.getElementById('max'+city).disabled=true;
      }
       document.getElementById('pbShowTrainHelp').addEventListener('click', function(){
       	t.helpPop(this);
       }, false);
       document.getElementById('pbAutoTrainState').addEventListener('click', function(){
      	t.toggleAutoTrainState(this);
      }, false);
      for(var k=1; k<=Seed.cities.length; k++){
     	document.getElementById('treshold'+k).addEventListener('change', function(e){
     	    if (isNaN(e.target.value)) e.target.value=0 ;
			TrainOptions.Threshold[e.target['className']] = e.target.value;
     		saveTrainOptions();
     	}, false);
     	document.getElementById('SelectMax'+k).addEventListener('change', function(e){
 		    TrainOptions.SelectMax[e.target['className']] = e.target.checked;
 		    if (!TrainOptions.SelectMax[e.target['className']]){
				document.getElementById('max'+e.target['className']).value = 0;
				document.getElementById('max'+e.target['className']).disabled=true;
			} else {
				document.getElementById('max'+e.target['className']).disabled=false;
			}
			saveTrainOptions();
 	    }, false);
 		document.getElementById('max'+k).addEventListener('change', function(e){
      	    TrainOptions.Max[e.target['className']] = e.target.value;
      	    saveTrainOptions();
      	}, false);
     	document.getElementById('workers'+k).addEventListener('change', function(e){
      	    TrainOptions.Workers[e.target['className']] = e.target.value;
      	    saveTrainOptions();
      	}, false);
     	document.getElementById('Resource'+k).addEventListener('change', function(e){
			TrainOptions.Resource[e.target['className']] = e.target.value;
     		saveTrainOptions();
		}, false);
     	document.getElementById('TrainSpeed_'+k).addEventListener('change', function(e){
			TrainOptions.Gamble[e.target['className']] = e.target.value;
     		saveTrainOptions();
		}, false);
        document.getElementById('SelectCity'+k).addEventListener('change', function(e){
            TrainOptions.Enabled[e.target['className']] = e.target.checked;
			saveTrainOptions();
      	}, false);
      	document.getElementById('TroopsCity'+k).addEventListener('change', function(e){
			TrainOptions.Troops[e.target['className']] = e.target.value;
            saveTrainOptions();
      	}, false);
      	document.getElementById('KeepFood'+k).addEventListener('change', function(e){
			if (isNaN(e.target.value)) e.target.value=0 ;
            TrainOptions.Keep[e.target['className']]['Food'] = e.target.value;
            saveTrainOptions();
      	}, false);
      	document.getElementById('KeepWood'+k).addEventListener('change', function(e){
      	    if (isNaN(e.target.value)) e.target.value=0 ;
            TrainOptions.Keep[e.target['className']]['Wood'] = e.target.value;
            saveTrainOptions();
      	}, false);
      	document.getElementById('KeepStone'+k).addEventListener('change', function(e){
			if (isNaN(e.target.value)) e.target.value=0 ;
            TrainOptions.Keep[e.target['className']]['Stone'] = e.target.value;
            saveTrainOptions();
      	}, false);
      	document.getElementById('KeepOre'+k).addEventListener('change', function(e){
      	    if (isNaN(e.target.value)) e.target.value=0 ;
            TrainOptions.Keep[e.target['className']]['Ore'] = e.target.value;
            saveTrainOptions();
      	}, false);
    } 
  },
      
  helpPop : function (){
    var helpText = '<BR><DL><dt>Auto training:<dd><LI>Check the box in front of the row to auto train in that city (The number is the number of the city).</dd>\
    	<dd><LI>Select a type of troop pora the city in the drop down boxes.</dd>\
        <dd><LI>Specify the minimum troop training triggers the car (not be trained under this).</dd>\
        <dt>Fill in the resources:</dt>\
          <dd><LI>Maintain: Auto train will keep this minimum amount available in the city.</dd>\
          <dd><LI>Use: Auto Train only use the resources to train troops.</dd>\
        <dt>In turn is: </dt>\
          <dd><LI>Press the  Auto Train.</dd></ul>';
    var pop = new CPopup ('giftHelp', 0, 0, 550, 250, true);
    pop.centerMe (mainPop.getMainDiv());
    pop.getMainDiv().innerHTML = helpText;
    pop.getTopDiv().innerHTML = '<div class=showBadged><center>Help PowerKoc: self-training</center></div>';
    pop.show (true);
  },

  toggleAutoTrainState: function(obj){
		var t = Tabs.AutoTrain;
		obj = document.getElementById('pbAutoTrainState');
        if (TrainOptions.Running == true) {
            TrainOptions.Running = false;
            obj.value = "Auto Train = OFF";
		updatebotbutton('Train-OFF', 'pbtraintab');
        }
        else {
            TrainOptions.Running = true;
            obj.value = "Auto Train = ON";
		updatebotbutton('Train-ON', 'pbtraintab');
        }
        saveTrainOptions();
    },

	show: function(){
		var t = Tabs.AutoTrain;
    },
	hide: function(){
        var t = Tabs.AutoTrain;
    },
    
  checkidlepopulation : function(cityId){
	var t = Tabs.AutoTrain;
	if(TrainOptions.Workers[t.city] == 0)
		t.idle = parseInt(Seed.citystats['city'+cityId].pop[0]) - parseInt(Seed.citystats['city'+cityId].pop[3]);
	else
		t.idle = ((TrainOptions.Workers[t.city]/100)*parseInt(Seed.citystats['city'+cityId].pop[0])).toFixed(0);
	return t.idle>0?true:false;
  },
  checktrainslots : function(cityId){
	var t = Tabs.AutoTrain;
	t.barracks = getCityBuilding(cityId, 13).count;
	t.slots = Seed.queue_unt['city'+cityId].length;
	t.empty = parseInt(t.barracks - t.slots);
	return t.empty>0?true:false;
  },
  checkresources : function(cityId){
	var t = Tabs.AutoTrain;
	t.food = parseInt((Seed.resources['city'+cityId].rec1[0]/3600) - TrainOptions['Keep'][t.city]['Food']);
        t.wood = parseInt((Seed.resources['city'+cityId].rec2[0]/3600) - TrainOptions['Keep'][t.city]['Wood']);
        t.stone = parseInt((Seed.resources['city'+cityId].rec3[0]/3600) - TrainOptions['Keep'][t.city]['Stone']);
        t.ore = parseInt((Seed.resources['city'+cityId].rec4[0]/3600) - TrainOptions['Keep'][t.city]['Ore']); 
	if(t.food>0 && t.wood>0 && t.stone>0 && t.ore>0){
		return true;
	}
	return false;
  },
  trainamt : function(cityId, unitId){
	var t = Tabs.AutoTrain;
	if(!unitId || unitId<1) return false;
	var cost = unsafeWindow.Object.clone(unsafeWindow.unitcost['unt'+ unitId]);
	var gamble = (parseInt(TrainOptions.Gamble[t.city])>0)?t.gamble[TrainOptions.Gamble[t.city]].cost:1;
	t.amt = (t.idle/cost[6]).toFixed(0);
	for(var rs=1; rs<5; rs++)
		cost[rs] *= gamble;
	if ((t.food/cost[1]) < t.amt) t.amt = (t.food/cost[1]).toFixed(0);
	if ((t.wood/cost[2]) < t.amt) t.amt = (t.wood/cost[2]).toFixed(0);
	if ((t.stone/cost[3]) < t.amt) t.amt = (t.stone/cost[3]).toFixed(0);
	if ((t.ore/cost[4]) < t.amt) t.amt = (t.ore/cost[4]).toFixed(0);
	        if(TrainOptions.SelectMax[t.city]){
		if(parseInt(t.amt) > parseInt(TrainOptions.Max[t.city])) t.amt = TrainOptions.Max[t.city];
	}
	if(parseInt(t.amt) < parseInt(TrainOptions.Threshold[t.city])) t.amt = 0;
	return t.amt>0?true:false;
  },
  nextcity : function(){
	var t = Tabs.AutoTrain;
	if (!TrainOptions.Running) return;
	t.city++;
	if(t.city > Seed.cities.length) t.city = 1;
	var cityId = Seed.cities[t.city-1][0];
	var idle = t.checkidlepopulation(cityId);
	var trainslots = t.checktrainslots(cityId);
	var resources = t.checkresources(cityId);
	var train = t.trainamt(cityId, TrainOptions['Troops'][t.city]);
	if(!TrainOptions.Enabled[t.city] || TrainOptions['Troops'][t.city]==0 || !idle || !trainslots || !resources || !train){
		setTimeout(t.nextcity, 5000);
		return;
	}
	t.doTrain(cityId, TrainOptions['Troops'][t.city], t.amt, t.nextcity);
  },
  doTrain : function (cityId, unitId, num, notify){
	var t = Tabs.AutoTrain;
	var time = unsafeWindow.modal_barracks_traintime(unitId, num);
	var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
	params.cid = cityId;
	params.type = unitId;
	params.quant = num;
	if(parseInt(TrainOptions.Gamble[t.city]) > 0)
		params.gambleId = TrainOptions.Gamble[t.city];

	new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/train.php" + unsafeWindow.g_ajaxsuffix, {
		method: "post",
		parameters: params,
		onSuccess: function(rslt) {
		  if (rslt.ok) {
			for (var i = 1; i < 5; i++) {
				var resourceLost = parseInt(unsafeWindow.unitcost["unt" + unitId][i]) * 3600 * parseInt(num);
				if(rslt.gamble) resourceLost = resourceLost*rslt.gamble[i];
				unsafeWindow.seed.resources["city" + cityId]["rec" + i][0] = parseInt(unsafeWindow.seed.resources["city" + cityId]["rec" + i][0]) - resourceLost;
			}
			unsafeWindow.seed.citystats["city" + cityId].gold[0] = parseInt(unsafeWindow.seed.citystats["city" + cityId].gold[0]) - parseInt(unsafeWindow.unitcost["unt" + unitId][5]) * parseInt(num);
			unsafeWindow.seed.citystats["city" + cityId].pop[0] = parseInt(unsafeWindow.seed.citystats["city" + cityId].pop[0]) - parseInt(unsafeWindow.unitcost["unt" + unitId][6]) * parseInt(num);
			unsafeWindow.seed.queue_unt["city" + cityId].push([unitId, num, rslt.initTS, parseInt(rslt.initTS) + time, 0, time, null]);
			setTimeout (notify, 10000);
			for (postcity in Seed.cities) if (Seed.cities[postcity][0] == params.cid) logcity = Seed.cities[postcity][1];
			actionLog(logcity  + ' Train ' + num + ':  ' + troops[unitId] );
		  } else {
			setTimeout (notify, 10000);
		  }
		},
	});
  },
}

/*************************************** Train Tab ***********************************************/

Tabs.Train = {
  tabOrder : 3,
  tabLabel: 'Train',
  cont : null,
  timer : null,
  stats : {},
  selectedCity : {},
  trainTimer : null,
  running : false,
  gamble : {"1":{"min":"5","max":"15","cost":"2"},"2":{"min":"10","max":"25","cost":"4"}},
  nextAuto:				null,
  nextWallTrain:				null,
  defenseOptions:	"<option value='53'>crossbows</option><option value='55'>trebuchets</option><option value='60'>Traps</option><option value='61'>caltrops</option><option value='62'>SpikeBarriers</option>",
  prevCityNo:			0,

  init : function (div){
    var t = Tabs.Train;
    t.cont = div;
    unsafeWindow.cancelTrain = t.butcancelTrain;
    unsafeWindow.cancelFort = t.butcancelFort;
    t.cont.style.height = '860px';
    
    s = "<DIV id=trainTopSelect>\
      <DIV class=ptstat id=trainheader>Train troops and build defenses</div><DIV style='height:5px'></div><DIV class=ptentry>\
      <DIV style='text-align:center; margin-bottom:5px;'>city: &nbsp; <span id=ptspeedcity></span></div>\
      <TABLE class=ptTab width=100%><TR valign=top><TD width=50%>\
      <TABLE align=center><TR><TD align=right>troops: </td><TD colspan=2>\
      <SELECT id=ptttType>\
        <option value='1'>SupplyTroop</option>\
        <option value='2'>Militiaman</option>\
        <option value='3'>Scout</option>\
        <option value='4'>Pikeman</option>\
        <option value='5'>Swordsman</option>\
        <option value='6'>archers</option>\
        <option value='7'>Cavalry</option>\
        <option value='8'>HeavyCavalry</option>\
        <option value='9'>SupplyWagons</option>\
        <option value='10'>Ballista</option>\
        <option value='11'>BatteringRam</option>\
        <option value='12'>Catapult</option>\
      </select> &nbsp; (max <span id=ptttSpMax></span>)</td></tr>\
      <TR><TD align=right>amount: </td><TD><INPUT id='ptttInpPS' size=5 type='text' value='0'\></td>\
        <TD><INPUT id='ptttButMaxPS' type=submit value='max'\> &nbsp; (max <span id=ptttSpMaxPS>0</span>)</td></tr>\
      <TR><TD align=right>barracks: </td><TD><INPUT id='ptttInpSlots' size=2 type='text' value='1'\></td>\
        <TD width=75%><INPUT id='ptttButMaxSlots' type=submit value='max'\> &nbsp; (max <span id=ptttSpMaxSlots>1</span>)</td></tr>\
	    <TR><TD align=right>limited by:</td><td><span id=ptttLimiter class=boldRed></span></TD><TD><span id=ptttEstimate></span></TD></TR>\
		<TR><TD align=right valign=top>workers use: </td><TD colspan=2><INPUT type=CHECKBOX id=chkPop"+ (Options.maxIdlePop?' CHECKED ':'') +"> \
        <SPAN style='white-space:normal;'>It allows you to train more troops. Temporarily leaving negative population.</span>\
		<br><INPUT type=CHECKBOX id=chkTut> \
		<SELECT id=tutelage>\
                <option value='0'><CENTER>--- "+uW.g_js_strings.commonstr.items+" "+uW.g_js_strings.commonstr.speedup+" ---</center></option>\
		<option value='36'>Lancelot Tutelage </option>\
        <option value='37'>Arthur Tutelage</option>\
        <option value='38'>Merlin Tutelage</option>\
		</select>\
                <br><br><SELECT id=pttrgamble>\
			<option value='0'><CENTER>--- "+uW.g_js_strings.commonstr.resources+" "+uW.g_js_strings.commonstr.speedup+" ---</center></option>\
			<option value=1>"+'use'+" "+ t.gamble[1].cost+"x "+'resource'+" ("+ t.gamble[1].min+" - "+t.gamble[1].max+"%)</option>\
			<option value=2>"+'use'+" "+ t.gamble[2].cost+"x "+'resource'+" ("+ t.gamble[2].min+" - "+t.gamble[2].max+"%)</option>\
	</select>\
		</td></tr>\
      <TR><TD colspan=3 align=center><DIV style='height:10px'></div><INPUT id='ptttButDo' type=submit value='train troops'\></td></tr>\
      <TR><TD colspan=3 align=center><span style=\"font-size:10px; color:#555; line-height:10px; \"><font color=#600000><B><u>"+'modes'+"</u></b></font><BR> "+'<b>Default</b> = Normal training time <BR>  <b>2 x Rec</b> = Reduces the training time between 5% and 15% by 2 times the resources <BR>  <b>4x Rec</b> = Reduces training time between 10% and 25% for 4 times the resources' +"</td></tr>\
      </table></td><TD width=20></td><TD style='border-left:solid 2px;' width=50% align=center>\
      <TABLE align=center><TR><TD align=right>defenses: </td><TD colspan=2>\
      <SELECT id=pttdType>\
        <option value='53'>Crossbow</option>\
        <option value='55'>Trebuchet</option>\
        <option value='60'>Trap</option>\
        <option value='61'>Caltrop</option>\
        <option value='62'>spiked Barrier</option>\
      </select> &nbsp; (<span id=pttdSpMax></span>)</td></tr>\
      <TR><TD align=right>amount: </td><TD><INPUT id='pttdInpPS' size=5 type='text' value='0'\></td>\
        <TD><INPUT id='pttdButMaxPS' type=submit value='max'\> &nbsp; (max <span id=pttdSpMaxPS>0</span>)</td></tr>\
      <TR><TD align=right>Spaces (Wall): </td><TD><INPUT id='pttdInpSlots' size=2 type='text' value='1'\></td>\
        <TD width=75%><INPUT id='pttdButMaxSlots' type=submit value='max'\> &nbsp; (max <span id=pttdSpMaxSlots>1</span>)</td></tr>\
		<TR><td align=right>limited by:</td><TD><span id=pttdLimiter class=boldRed></span></td><TD><span id=pttdEstimate></span></TD></tr>\
	<TR align=center><TD colspan=3><SPAN id=pttdSpace></span></td></tr>\
	<TR><TD align=center colspan=3><INPUT type=CHECKBOX id=chkDoTraps"+ (WallTrainOptions.doTraps[1]?' CHECKED ':'') +">"+'Auto Build'+" - "+'max'+". "+'Traps'+" ("+'min'+"=1 "+'max'+"=5)</TD></TR>\
   	<TR><TD align=center colspan=3><INPUT type=CHECKBOX id=chkDoCaltrops"+ (WallTrainOptions.doCalrops[1]?' CHECKED ':'') +">"+'Auto Build'+" - "+'max'+". "+'Caltrops'+" ("+'min'+"=1 "+'max'+"=5)</TD></TR>\
	<TR><TD align=center colspan=3><INPUT type=CHECKBOX id=chkDoSpikes"+ (WallTrainOptions.doSpikes[1]?' CHECKED ':'') +">"+'Auto Build'+" - "+'max'+". "+'spikes'+" ("+'min'+"=1 "+'max'+"=5)</TD></TR>\
   	<TR><TD align=center colspan=3><INPUT type=CHECKBOX id=chkDoXbows"+ (WallTrainOptions.doXbows[1]?' CHECKED ':'') +">"+'Auto Build'+" - "+'max'+". "+'xbow'+" ("+'min'+"=1 "+'max'+"=5)</TD></TR>\
      <TR><TD colspan=3 align=center><DIV style='height:10px'>\
      <SELECT id=siege>\
      <option value='0'><CENTER>--- "+unsafeWindow.g_js_strings.commonstr.speedup+" ---</center></option>\
      <option value='26'>"+ unsafeWindow.itemlist.i26.name+"</option>\
      </select></div>\
      <TR><TD colspan=3 align=center><DIV style='height:10px'></div><INPUT id='pttdButDo' type=submit value='building Defenses'\></td></tr></table>\
      </td></tr></table></div></div>\
      <TABLE align=center width=425 class=ptTab><div class=pbStat>TRAINING NOTICE</div><TR><TD><div id=ptTrainStatus style='overflow-y:auto; max-height:78px; height: 78px;'></div></td></tr></table>\
      <div style='height: 385px; background: #FFCC33'>\
       <TABLE width=80% class=ptTab><TR><TD colspan=3><DIV id=divSTtop></div></td></tr>\
       <TR>\
        <TD width=50% style='padding-left:15px; padding-right:15px'><DIV style='text-align:center'>\
        <B><DIV class=ptStat>"+'Troops queue'+" &nbsp; (<SPAN id=statTTtot></span>)</div><BR></div><img style='display:block;position:absolute;padding:0;margin:0;' id=pdxCancelAllTrain valign=absmiddle border=0 title='"+'Cancel all queues Training'+"' src='http://cdn1.iconfinder.com/data/icons/musthave/16/Remove.png'><DIV id=divSTleft style='width:460px;  padding:10pdx; -moz-box-shadow:inset 0px 0px 5px #000; overflow-y: auto; height:225px; max-height:225px'></div></td></b>\
        <TD width=50% style='padding-left:15px; padding-right:15px'><DIV style='text-align:center'>\
        <B><DIV class=ptStat>"+'Queue defenses'+" &nbsp; (<SPAN id=statDTtot></span>)</div></b><BR></div><B><DIV id=divSTright style='width:460px;  padding:10pdx; -moz-box-shadow:inset 0px 0px 5px #000; overflow-y: auto; height:225px; max-height:225px'></div></td></b>\
       </tr>\
      </div>";
    t.cont.innerHTML = s;
    document.getElementById ('pdxCancelAllTrain').addEventListener ('click', t.CancelAllTraining, false);
    var dcp = new CdispCityPicker ('ptspeed', document.getElementById('ptspeedcity'), true, t.clickCitySelect, 0);
    t.TTspMax = document.getElementById ('ptttSpMax');
    t.TTspMaxPS = document.getElementById ('ptttSpMaxPS');
    t.TTspMaxSlots = document.getElementById ('ptttSpMaxSlots');
    t.TTbutMaxSlots = document.getElementById ('ptttButMaxSlots');
    t.TTbutMaxPerSlot = document.getElementById ('ptttButMaxPS');
    t.TTinpPerSlot = document.getElementById ('ptttInpPS');
    t.TTinpSlots = document.getElementById ('ptttInpSlots');
    t.TTselType = document.getElementById ('ptttType');
    t.TTbutDo = document.getElementById ('ptttButDo');
	t.TTlimiter = document.getElementById ('ptttLimiter');
    t.TDspMax = document.getElementById ('pttdSpMax');
    t.TDspMaxPS = document.getElementById ('pttdSpMaxPS');
    t.TDspMaxSlots = document.getElementById ('pttdSpMaxSlots');
    t.TDbutMaxSlots = document.getElementById ('pttdButMaxSlots');
    t.TDbutMaxPerSlot = document.getElementById ('pttdButMaxPS');
    t.TDinpPerSlot = document.getElementById ('pttdInpPS');
    t.TDinpSlots = document.getElementById ('pttdInpSlots');
    t.TDselType = document.getElementById ('pttdType');
    t.TDbutDo = document.getElementById ('pttdButDo');
    t.TDspSpace = document.getElementById ('pttdSpace');
    t.TDlimiter = document.getElementById ('pttdLimiter');
    t.divTrainStatus = document.getElementById ('ptTrainStatus');
    t.TTinpSlots.addEventListener ('change', t.updateTopTroops, false);
    t.TTbutMaxPerSlot.addEventListener ('click', t.clickTroopMaxPS, false);
    t.TTbutMaxSlots.addEventListener ('click', t.clickTroopMaxSlots, false);
    t.TTselType.addEventListener ('change', t.changeTroopSelect, false);
    t.TTbutDo.addEventListener ('click', t.clickTroopDo, false);
    t.TDinpSlots.addEventListener ('change', t.updateTopDef, false);
    t.TDselType.addEventListener ('change', t.changeDefSelect, false);
    t.TDbutMaxPerSlot.addEventListener ('click', t.clickDefMaxPS, false);
    t.TDbutMaxSlots.addEventListener ('click', t.clickDefMaxSlots, false);
    t.TDbutDo.addEventListener ('click', t.clickDefDo, false);
    document.getElementById ('chkPop').addEventListener ('change', t.clickCheckIdlePop, false);
    document.getElementById ('chkDoTraps').addEventListener ('change', t.clickCheckDoTraps, false);
    document.getElementById ('chkDoCaltrops').addEventListener ('change', t.clickCheckDoCaltrops, false);
    document.getElementById ('chkDoSpikes').addEventListener ('change', t.clickCheckDoSpikes, false);
    document.getElementById ('chkDoXbows').addEventListener ('change', t.clickCheckDoXbows, false);
    document.getElementById ('pttrgamble').addEventListener ('change', t.changeTroopSelect, false);
    t.changeTroopSelect();
    t.changeDefSelect();
    t.doWallTrain(1);

  },

  togOpt : function (checkboxId, optionName, callOnChange, callEnable,callIsAvailable){
    var t = Tabs.Train;
    var checkbox = document.getElementById(checkboxId);
    if (callIsAvailable && callIsAvailable()==false){
      checkbox.disabled = true;
      return;
    }
    if (Options[optionName])
      checkbox.checked = true;
    checkbox.addEventListener ('change', eventHandler, false);
    function eventHandler (){
      Options[optionName] = this.checked;
      saveOptions();
      if (callOnChange)
        callOnChange (this.checked);
    }
  },

  hide : function (){
    var t = Tabs.Train;
    clearTimeout (t.timer);
  },
  
  show : function (){
    var t = Tabs.Train;
    clearTimeout (t.timer);
    t.displayCityStats();
    t.changeTroopSelect();
    t.changeDefSelect();
    t.timer = setTimeout (t.show, 2000);
  },

/*******  TROOPS  ******/  
  
  updateTopTroops : function (){
    var t = Tabs.Train;
    var slots = parseInt(t.TTinpSlots.value, 10);
    if (isNaN(slots) || slots<0)
      slots = 0;
    t.TTspMax.innerHTML = t.stats.MaxTrain;
    t.TTlimiter.innerHTML = t.stats.Limiter;
    t.TTspMaxSlots.innerHTML = t.stats.barracks - t.stats.queued;
    if (slots<1 || (t.stats.barracks-t.stats.queued < 1))
      t.TTspMaxPS.innerHTML = 0;
    else
      t.TTspMaxPS.innerHTML = parseInt(t.stats.MaxTrain / slots);
  },
      
  
  clickTroopMaxPS : function (){
    var t = Tabs.Train;
    var slots = parseInt(t.TTinpSlots.value, 10);
    if (slots<1 || (t.stats.barracks-t.stats.queued < 1))
      t.TTinpPerSlot.value = 0;
    else
      t.TTinpPerSlot.value = parseInt(t.stats.MaxTrain / slots);
  },

  clickTroopMaxSlots : function (){
    var t = Tabs.Train;
    t.TTinpSlots.value = t.stats.barracks - t.stats.queued;
  },
  
  clickCitySelect : function (city){
    var t = Tabs.Train;
    t.selectedCity = city;
    t.lastQueString = null;   
    t.lastDQueString = null;   
    t.displayCityStats ();
    t.changeTroopSelect();
    t.changeDefSelect();
    t.JumpCity(city.name);
  },
  
  JumpCity:function(city) {
     		var t = Tabs.AllianceList;
     		for (i=0;i<Seed.cities.length;i++) {
     			if (Seed.cities[i][1]==city) var cityNum=i;
     		}
     		cityNum++;
     		var obj = document.getElementById('citysel_'+cityNum);
  	   	return t.ClickWin(window,obj,'click');
     },
  
  ClickWin:function(win,obj,evtName) {
     	var evt = win.document.createEvent("MouseEvents");
     	evt.initMouseEvent(evtName, true, true, win,
     		0, 0, 0, 0, 0, false, false, false, false, 0, null);
     	return !obj.dispatchEvent(evt);
     },
  
  clickCheckIdlePop : function (){
    var t = Tabs.Train;
    if (document.getElementById ('chkPop').checked)
      Options.maxIdlePop = true;
    else
      Options.maxIdlePop = false;
    saveOptions ();
    t.displayCityStats ();
    t.changeTroopSelect ();
  },
   
        clickCheckDoTraps: function (){
		var t = Tabs.Train;
		var cityNo = Cities.byID[t.selectedCity.id].idx + 1;
		WallTrainOptions.doTraps[cityNo] = (document.getElementById ('chkDoTraps').checked)
		saveWallTrainOptions ();
		t.displayCityStats ();
		t.changeDefSelect ();
	},
  	clickCheckDoCaltrops: function (){
		var t = Tabs.Train;
		var cityNo = Cities.byID[t.selectedCity.id].idx + 1;
		WallTrainOptions.doCalrops[cityNo] = (document.getElementById ('chkDoCaltrops').checked)
		saveWallTrainOptions ();
		t.displayCityStats ();
		t.changeDefSelect ();
	},
  	clickCheckDoSpikes: function (){
		var t = Tabs.Train;
		var cityNo = Cities.byID[t.selectedCity.id].idx + 1;
		WallTrainOptions.doSpikes[cityNo] = (document.getElementById ('chkDoSpikes').checked)
		saveWallTrainOptions ();
		t.displayCityStats ();
		t.changeDefSelect ();
	},
  	clickCheckDoXbows: function (){
		var t = Tabs.Train;
		var cityNo = Cities.byID[t.selectedCity.id].idx + 1;
		WallTrainOptions.doXbows[cityNo] = (document.getElementById ('chkDoXbows').checked)
		saveWallTrainOptions ();
		t.displayCityStats ();
		t.changeDefSelect ();
	},


  	
  limitingFactor : null,
    
  changeTroopSelect : function (){
    var t = Tabs.Train;
    var cityId = t.selectedCity.id;
    // unitcost: NAME, Food, Wood, Stone, Ore, Gold, Pop, ?
    var id = t.TTselType.value;
    t.lastTroopSelect = id;
    var uc = unsafeWindow.unitcost['unt'+id];
           	var actualuc = [];
	for(var r = 1; r<5; r++){
 			if(document.getElementById('pttrgamble').value > 0)
 				actualuc[r] = uc[r] * t.gamble[document.getElementById('pttrgamble').value].cost;
 			else
 				actualuc[r] = uc[r];
 		}

    var max = 9999999999;
    var limitingFactor2 = 'Unknown';
	t.limitingFactor = null;
    if ( (t.stats.food / actualuc[1]) < max) {
      max = t.stats.food / actualuc[1];
      limitingFactor2 = 'food';
      t.limitingFactor = 'food';
    }
    if ( (t.stats.wood / actualuc[2]) < max) {
      max = t.stats.wood / actualuc[2];
      limitingFactor2 = 'wood';
      t.limitingFactor = 'wood';
    }
    if ( (t.stats.stone / actualuc[3]) < max) {
      max = t.stats.stone / actualuc[3];
      limitingFactor2 = 'stone';
      t.limitingFactor = 'stone';
    }
    if ( (t.stats.ore / actualuc[4]) < max) {
      max = t.stats.ore / actualuc[4];
      limitingFactor2 = 'ore';
      t.limitingFactor = 'ore';
     
    }
    if ( (t.stats.idlePop / uc[6]) < max) {
      max = t.stats.idlePop / uc[6];
      limitingFactor2 = 'pop';
      t.limitingFactor = 'pop';
    }
    t.stats.MaxTrain = parseInt (max);
    t.stats.Limiter = limitingFactor2;
    if (t.stats.MaxTrain < 0)
      t.stats.MaxTrain = 0;
    if (matTypeof(uc[8]) == 'object'){
      for (k in uc[8]){  // check building requirement
        var b = getCityBuilding (cityId, k.substr(1));
        if (b.maxLevel < uc[8][k][1]){
          t.stats.MaxTrain = 0;
          t.stats.Limiter = 'construction';
          t.limitingFactor = null;
          break;
        }
      }
    }
    if (matTypeof(uc[9]) == 'object'){
      for (k in uc[9]){    // check tech requirement
        if (parseInt(Seed.tech['tch'+k.substr(1)]) < uc[9][k][1]){
          t.stats.MaxTrain = 0;
          t.limitingFactor = null;
          t.stats.Limiter = 'research';
          break;
        }
      }
    }
if (t.limitingFactor){
  document.getElementById('ptttr_'+ t.limitingFactor).className = 'boldRed';
}    
    t.updateTopTroops();
  },

  CancelAllTraining : function() {
   var t = Tabs.Train;
 
   // Annulation des formations sur la ville choisit
   var cityId = t.selectedCity.id;
   var q = Seed.queue_unt['city'+cityId];
   if (q.length>0) {
    var b=prompt(""+' How many lines you want to delete? (1=Max. queues)'+" "+(q.length)+")", 2);
    if (parseInt(b)<=q.length && parseInt(b)>0) {
     t.dispTrainStatus ('<font color=#550000><B>'+'Canceling Workouts.Wait!.'+'</b></font><BR>');
     document.getElementById ('pdxCancelAllTrain').style.display='none';
     t.CancelActionall(q.length-1, b-1);
    }
   
   }
   
  },
   
  CancelActionall: function(num, fintraitement) {
   var t = Tabs.Train;
   var cityId = t.selectedCity.id;
   var q = Seed.queue_unt['city'+cityId];
   var now = unixTime();
   start = q[num][2];
   end = q[num][3];
   if (first)
         actual = end - now;
      else
          actual = end - lastEnd;
   if (actual < 0)
          actual = 0;
   var param2=cityId; // id de la ville
   var param3=q[num][0]; // Type de trouoe
   var param4=q[num][1]; // Qte troupe
   var param5=end; // debut
   var param6=start; // fin
   var param7=actual; // duree
   var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
        params.cityId = param2;
        params.requestType ="CANCEL_TRAINING";
        params.numtrptrn = param4;
        params.trnETA= param5;
        params.trnNeeded = param7;
        params.trnTmp = param6;
        params.typetrn= param3;
    
     new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/cancelTraining.php" + unsafeWindow.g_ajaxsuffix, {
             method: "post",
             parameters: params,
           onSuccess: function (rslt) {
            var t = Tabs.Train;
            if (rslt.ok) {
               unsafeWindow.update_seed_ajax(true,function(){
   	       var k=0;for(var j=0;j<unsafeWindow.seed.queue_unt["city"+param2].length;j++){
   	        if(j>num){
   	         unsafeWindow.seed.queue_unt["city"+param2][j][2]=parseInt(rslt.dateTraining[k]["start"]);
   	         unsafeWindow.seed.queue_unt["city"+param2][j][3]=parseInt(rslt.dateTraining[k]["end"]);
   	         k++;
   	         }
   	        }
   	        unsafeWindow.seed.queue_unt["city"+param2].splice(num,1);
   	        for(var i=1;i<5;i++){
   	         var totalReturn=parseInt(unsafeWindow.unitcost["unt"+param3][i])*parseInt(param4)*3600/2;
   	         unsafeWindow.seed.resources["city"+param2]["rec"+i][0]=parseInt(unsafeWindow.seed.resources["city"+param2]["rec"+i][0])+totalReturn;
   	        }
       	       });

	        var numnew = num - 1;
	        if (numnew<fintraitement) {
	         t.dispTrainStatus ('<font color=#550000><B>'+' All training canceled!'+'</b></font><BR>');
                 t.dispTrainStatus ('<font color=#550000><B>'+'  You may need to refresh!'+'</b></font><BR>');
                 document.getElementById ('pdxCancelAllTrain').style.display='block';
	         t.displayCityStats();
	        } else {
	          setTimeout(function (){
	            t.CancelActionall(numnew, fintraitement);
		  }, (Math.random()*1000)+1000 );
                }
             } else {
             t.dispTrainStatus ("<font color=#550000><B>"+'ERROR'+": "+' impossible to clear the queue <br> Training update and start again!'+"</b></font><BR>");
             t.displayCityStats();
             document.getElementById ('pdxCancelAllTrain').style.display='block';
            }
           },
           onFailure: function (rslt) {
            var t = Tabs.Train;
            t.dispTrainStatus ("<font color=#550000><B>"+'ERROR'+": "+' impossible to clear the queue <br> Training update and start again!'+"</b></font><BR>");
            t.displayCityStats();
            document.getElementById ('pdxCancelAllTrain').style.display='block';
           }
    });
},

  clickTroopDo : function (){
    var t = Tabs.Train;
    var cityId = t.selectedCity.id;
    unsafeWindow.citysel_click(document.getElementById('citysel_'+ (t.selectedCity.idx+1)+''));
    var unitId = t.TTselType.value;
    var perSlot = parseInt(t.TTinpPerSlot.value, 10);
    var numSlots = parseInt(t.TTinpSlots.value, 10);
    t.displayCityStats ();
    if (t.running){
      t.stopTraining('<SPAN class=boldRed>Training canceled by user</span>');
      return; 
    }    
    if (perSlot<1){
      t.divTrainStatus.innerHTML = '<FONT COLOR=#550000>Number of troops gap has to be greater than 0</font>';
      return;
    }
    if (perSlot*numSlots > t.stats.MaxTrain){
      t.divTrainStatus.innerHTML = '<FONT COLOR=#550000>You can train so many troops (max is'+ t.stats.MaxTrain +' total)</font>';
      return;
    }
    if (numSlots<1 || numSlots>t.stats.barracks - t.stats.queued){
      t.divTrainStatus.innerHTML = '<FONT COLOR=#550000>Number of holes invalid </font>';
      return;
    }
    if (document.getElementById ('chkTut').checked)
		var tut = document.getElementById ('tutelage').value;
	else
		var tut = 0;
                  
		var gamble = document.getElementById ('pttrgamble').value;
    t.TDbutDo.disabled = true;
    t.TTbutDo.className = 'ptButCancel';
    t.TTbutDo.value = 'CANCEL';
    var que = [];
    for (var i=0; i<numSlots; i++)
      que.push (['T', unitId, parseInt (perSlot)]);
    t.divTrainStatus.innerHTML = '';
    t.running = true;
    t.doQueue (cityId, tut, gamble, que);
  },

  
/*******  DEF  ******/  
  
  updateTopDef : function (){
    var t = Tabs.Train;
    var slots = parseInt(t.TDinpSlots.value, 10);
    if (isNaN(slots) || slots<0)
      slots = 0;
    t.TDspMax.innerHTML = 'max:'+ t.stats.MaxDefTrain +'&nbsp; /:'+ t.stats.defOwned;   
    t.TDlimiter.innerHTML = t.stats.DefLimiter;
    t.TDspMaxSlots.innerHTML = t.stats.wallLevel-t.stats.Dqueued;
    if (slots<1)
      t.TDspMaxPS.innerHTML = 0;
    else
      t.TDspMaxPS.innerHTML = parseInt(t.stats.MaxDefTrain / slots);

    t.TDspSpace.innerHTML = 'Level of wall: <B>'+ t.stats.wallLevel +'</b><BR>Wall Defenses: '+ (t.stats.wallSpaceUsed+t.stats.wallSpaceQueued)  +'/<B>'+ t.stats.wallSpace +'</b><BR>\
        Field Defenses: '+ (t.stats.fieldSpaceUsed+t.stats.fieldSpaceQueued) +'/<B>'+ t.stats.fieldSpace +'</b>';
  },

  changeDefSelect : function (){
    var t = Tabs.Train;
    var cityId = t.selectedCity.id;
    // unitcost: NAME, Food, Wood, Stone, Ore, Gold, Pop, ?
    var id = t.TDselType.value;
    t.lastDefSelect = id;
    t.stats.defOwned = parseInt(Seed.fortifications['city' + cityId]['fort'+id]);    
    var uc = unsafeWindow.fortcost['frt'+id];
    var max = 9999999999;
    if ( (t.stats.food / uc[1]) < max)
      max = t.stats.food / uc[1];
      limitingFactor2 = 'food';
    if ( (t.stats.wood / uc[2]) < max)
      max = t.stats.wood / uc[2];
      limitingFactor2 = 'wood';
    if ( (t.stats.stone / uc[3]) < max)
      max = t.stats.stone / uc[3];
      limitingFactor2 = 'stone';
    if ( (t.stats.ore / uc[4]) < max)
      max = t.stats.ore / uc[4];
      limitingFactor2 = 'ore';
    if ( (t.stats.idlePop / uc[6]) < max)
      max = t.stats.idlePop / uc[6];
      limitingFactor2 = 'Unemployed population';
    t.stats.MaxDefTrain = parseInt (max);
    if (t.stats.MaxDefTrain < 0)
      t.stats.MaxDefTrain = 0;
    if (matTypeof(uc[8]) == 'object'){
      for (k in uc[8]){  // check building requirement
        var b = getCityBuilding (cityId, k.substr(1));
        if (b.maxLevel < uc[8][k][1]){
          t.stats.MaxDefTrain = 0;
          t.stats.DefLimiter = 'building';
          break;
        }
      }
    }
    if (matTypeof(uc[9]) == 'object'){
      for (k in uc[9]){    // check tech requirement
        if (parseInt(Seed.tech['tch'+k.substr(1)]) < uc[9][k][1]){
          t.stats.MaxDefTrain = 0;
          t.stats.DefLimiter = 'research';
          break;
        }
      }
    }

    var spaceEach = parseInt(unsafeWindow.fortstats["unt"+ id][5]);
    if (id<60)
      var spaceAvail = t.stats.wallSpace - t.stats.wallSpaceUsed - t.stats.wallSpaceQueued;
    else
      var spaceAvail = t.stats.fieldSpace - t.stats.fieldSpaceUsed - t.stats.fieldSpaceQueued;
    if ( t.stats.MaxDefTrain * spaceEach > spaceAvail)
      t.stats.MaxDefTrain = parseInt(spaceAvail / spaceEach);
      if (id<60)
        t.stats.DefLimiter = 'spaces(wall)';
      else
        t.stats.DefLimiter = 'spaces(field)';
    

    t.updateTopDef();
  },
  
  clickDefMaxPS : function (){
    var t = Tabs.Train;
    var slots = parseInt(t.TDinpSlots.value, 10);
    if (slots<1)
      t.TDinpPerSlot.value = 0;
    else
      t.TDinpPerSlot.value = parseInt(t.stats.MaxDefTrain / slots);
  },

  clickDefMaxSlots : function (){
    var t = Tabs.Train;
    t.TDinpSlots.value = t.stats.wallLevel-t.stats.Dqueued;
  },
    
  clickDefDo : function (){
    var t = Tabs.Train;
    var cityId = t.selectedCity.id;
    var unitId = t.TDselType.value;
    var perSlot = parseInt(t.TDinpPerSlot.value, 10);
    var numSlots = parseInt(t.TDinpSlots.value, 10);
    
    t.displayCityStats ();
    if (t.running){
      t.stopTraining('<SPAN class=boldRed>Training canceled by user</span>');
      return; 
    }    
    if (perSlot<1){
      t.divTrainStatus.innerHTML = '<FONT COLOR=#550000>Number of units per hole has to be greater than 0.</font>';
      return;
    }
    if (perSlot*numSlots > t.stats.MaxDefTrain){
      t.divTrainStatus.innerHTML = '<FONT COLOR=#550000>You can train so many troops (max is '+ t.stats.MaxDefTrain +' total)</font>';
      return;
    }
    if (numSlots<1 || numSlots > t.stats.wallLevel-t.stats.Dqueued){
      t.divTrainStatus.innerHTML = '<FONT COLOR=#550000>Number of slots invalid</font>';
      return;
    }
    var siege = document.getElementById ('siege').value;
    t.TTbutDo.disabled = true;
    t.TDbutDo.className = 'ptButCancel';
    t.TDbutDo.value = 'Cancel';
    var que = [];
    for (var i=0; i<numSlots; i++)
      que.push (['T', unitId, parseInt (perSlot)]);
    t.divTrainStatus.innerHTML = '';
    t.running = true;
    t.doDefQueue (cityId, que);
  },

  doDefQueue : function (cityId, que, errMsg){
    var t = Tabs.Train;
    clearTimeout (t.trainTimer);
    try {
      t.displayCityStats();
      if (errMsg){
        t.stopTraining ('<SPAN class=boldRed>ERROR: '+ errMsg +'</span>');
        return;
      }
      var cmd = que.shift();
      if (!cmd){
        t.stopTraining ('<B>Queue completed defenses.</b>');
        return;
      }
      if (cmd[0] == 'T'){
        t.dispTrainStatus ('training '+ cmd[2] +' '+  fortNamesShort[cmd[1]] +' in '+ Cities.byID[cityId].name +' ('+ que.length +' slots empty)<BR>');
        doDefTrain ( cityId, cmd[1], cmd[2], 
          function(errMsg){
            t.trainTimer = setTimeout(function (){Tabs.Train.doDefQueue(cityId, que, errMsg);}, (Math.random()*3500)+1500);
          } );
      }
    } catch (err) {
      logit (inspect (err, 8, 1));
      t.stopTraining ('<SPAN class=boldRed>PROGRAMA ERROR: '+ err.message +'</span>');
    }
  },
  fixQueTimes : function (q){
    var now = unixTime();
    if (q[0][2] > now)
      q[0][2] = now;
    for (var i=0; i<q.length; i++){
      if (q[i+1]!=null && q[i+1][2]!=q[i][3])
        q[i][3] = q[i+1][2];
    }        
  },

  expireTheQueue : function (q){
    if (q==null)
      return;
    var now = unixTime();
    while (q.length>0 && (q[0][3] - now) < 1)
      q.shift();
  },
    
  displayCityStats : function (){
    var t = Tabs.Train;
    var cityId = t.selectedCity.id;
	var cityNo = Cities.byID[t.selectedCity.id].idx + 1;
	if (t.prevCityNo != cityNo) {
	t.prevCityNo = cityNo;
	document.getElementById ('chkDoTraps').checked = WallTrainOptions.doTraps[cityNo];
	document.getElementById ('chkDoCaltrops').checked = WallTrainOptions.doCalrops[cityNo];
	document.getElementById ('chkDoSpikes').checked = WallTrainOptions.doSpikes[cityNo];
	document.getElementById ('chkDoXbows').checked = WallTrainOptions.doXbows[cityNo];
		}

    t.stats.food = parseInt (Seed.resources['city'+cityId].rec1[0]/3600);
    t.stats.wood = parseInt (Seed.resources['city'+cityId].rec2[0]/3600);
    t.stats.stone = parseInt (Seed.resources['city'+cityId].rec3[0]/3600);
    t.stats.ore = parseInt (Seed.resources['city'+cityId].rec4[0]/3600);
    t.stats.gold = Seed.citystats['city'+cityId].gold[0];
    if (Options.maxIdlePop)
      t.stats.idlePop = parseInt(Seed.citystats['city'+cityId].pop[0]);
    else
      t.stats.idlePop = parseInt(Seed.citystats['city'+cityId].pop[0]) - parseInt(Seed.citystats['city'+cityId].pop[3]);
    t.stats.barracks = getCityBuilding (cityId, 13).count;
    var m = '<CENTER><B>'+ Cities.byID[cityId].name +' &nbsp; ('+ Cities.byID[cityId].x +','+ Cities.byID[cityId].y +')</b></center><HR>';

     m += '<TABLE class=ptTab width=80%><TR align=center>\
        <TD width=8%><B>SupplyTroop:</b></td><TD width=8%><B>Militiaman:</b></td><TD width=8%><B>Scout:</b></td>\
        <TD width=8%><B>Pikeman:</b></td><TD width=8%><B>Swordsman:</b></td><TD width=8%><B>archers:</b></td>\
        <TD width=8%><B>Cavalry:</b></td><TD width=8%><B>HeavyCavalry:</b></td><TD width=8%><B>SupplyWagons:</b></td>\
        <TD width=8%><B>Ballista:</b></td><TD width=8%><B>BatteringRam:</b></td><TD width=8%><B>Catapult:</b></td><tr>';

 m += '<TR align=center><TD width=8%>'+addCommas(Seed.units['city'+cityId]['unt1'])+'</td><TD width=8%>'+addCommas(Seed.units['city'+cityId]['unt2'])+
 '<TD width=8%>'+addCommas(Seed.units['city'+cityId]['unt3'])+'</td><TD width=8%>'+addCommas(Seed.units['city'+cityId]['unt4'])+
 '<TD width=8%>'+addCommas(Seed.units['city'+cityId]['unt5'])+'</td><TD width=8%>'+addCommas(Seed.units['city'+cityId]['unt6'])+
 '<TD width=8%>'+addCommas(Seed.units['city'+cityId]['unt7'])+'</td><TD width=8%>'+addCommas(Seed.units['city'+cityId]['unt8'])+
 '<TD width=8%>'+addCommas(Seed.units['city'+cityId]['unt9'])+'</td><TD width=8%>'+addCommas(Seed.units['city'+cityId]['unt10'])+
 '<TD width=8%>'+addCommas(Seed.units['city'+cityId]['unt11'])+'</td><TD width=8%>'+addCommas(Seed.units['city'+cityId]['unt12'])+'</td><tr></table>';

    m += '<TABLE class=ptTab width=80%><TR align=center>\
        <TD width=18%><SPAN id=ptttr_food><B>food:</b><BR>'+ addCommasInt(t.stats.food) +'</span></td>\
        <TD width=16%><SPAN id=ptttr_wood><B>wood:</b><BR>'+ addCommasInt(t.stats.wood) +'</span></td>\
        <TD width=16%><SPAN id=ptttr_ore><B>ore:</b><BR>'+ addCommasInt(t.stats.ore) +'</span></td>\
        <TD width=16%><SPAN id=ptttr_gold><B>stone:</b><BR>'+ addCommasInt(t.stats.stone) +'</span></td>\
        <TD width=16%><SPAN id=ptttr_gold><B>gold:</b><BR>'+ addCommasInt(t.stats.gold) +'</span></td>\
        <TD width=16%><SPAN id=ptttr_pop><B>Unemployed population:</b><BR>'+ addCommasInt(t.stats.idlePop) +'</span></td></tr></table><BR>';
    document.getElementById ('divSTtop').innerHTML = m;
    
// troop queue .... 
    var totTime = 0;
    var q = Seed.queue_unt['city'+cityId];
    t.expireTheQueue(q);
    var qs = q.toString();
    var now = unixTime();
    if (q!=null && q.length>0)
      totTime = q[q.length-1][3] - now;
    if ( qs == t.lastQueString){
      if (q!=null && q.length>0){
        var cur = q[0][3] - now;
        document.getElementById ('ptttfq').innerHTML = timestr(cur, true);
      }
    } else {
      t.lastQueString = qs;
      t.stats.queued = 0;
      m = '<TABLE align=center class=ptTab>';
      if (q!=null && q.length>0 ){
        t.fixQueTimes (q);
        t.stats.queued = q.length;
        first = true;
        for (var i=0; i<q.length; i++){
          start = q[i][2];
          end = q[i][3];
          if (first)
            actual = end - now;
          else
            actual = end - lastEnd;
          if (actual < 0)
            actual = 0;
          q[i][6] = cityId;
          m += '<TR align=right><TD width="5px"><A><DIV onclick="cancelTrain('+ q[i][0]+','+q[i][1]+','+q[i][2]+','+q[i][3]+','+q[i][5]+','+q[i][6]+','+i +')">Cancel</div></a></td>';
          m += '<TD>'+ q[i][1] +' </td><TD align=left> '+ unsafeWindow.unitcost['unt'+q[i][0]][0];
          if (first)
            m += '</td><TD> &nbsp; '+  timestr(end-start, true) +'</td><TD> (<SPAN id=ptttfq>'+ timestr(actual, true) +'</span>)';
          else
            m += '</td><TD> &nbsp; '+  timestr(actual, true) +'</td></tr>'; 
          lastEnd = end;
          first = false;
        }
      }
      m += '</table>';
      document.getElementById ('divSTleft').innerHTML = m;
    }
    m = t.stats.barracks +' barracks';
    if (t.stats.queued > 0)
      m += ' y '+ t.stats.queued +' occupied';
    if (totTime > 0)
      m += '- Time: '+ unsafeWindow.timestr(totTime);
    document.getElementById ('statTTtot').innerHTML = m;
    
// defense queue ....
    getWallInfo (cityId, t.stats);    
    var totTime = 0;
    var q = Seed.queue_fort['city'+cityId];
    t.expireTheQueue(q);
    var qs = q.toString();
    if (q!=null && q.length>0)
      totTime = q[q.length-1][3] - now;
    if ( qs == t.lastDQueString){
      if (q!=null && q.length>0){
        var cur = q[0][3] - now;
        document.getElementById ('pttdfq').innerHTML = timestr(cur, true);
      }
    } else {
      t.lastDQueString = qs;
      t.stats.Dqueued = 0;
      t.stats.wallSpaceQueued = 0;
      t.stats.fieldSpaceQueued = 0;
      m = '<TABLE align=center class=ptTab>';
      if (q!=null && q.length > 0 ){
        t.fixQueTimes (q);
        t.stats.Dqueued = q.length;
        first = true;
        for (i=0; i<q.length; i++){
          if (q[i][0] < 60)          
            t.stats.wallSpaceQueued += parseInt(unsafeWindow.fortstats["unt"+ q[i][0]][5]) * parseInt(q[i][1]);
          else          
            t.stats.fieldSpaceQueued += parseInt(unsafeWindow.fortstats["unt"+ q[i][0]][5]) * parseInt(q[i][1]);
          start = q[i][2];
          end = q[i][3];
          if (first)
            actual = end - now;
          else
            actual = end - lastEnd;
          if (actual < 0)
            actual = 0;
		  q[i][7]=cityId;
          m += '<TR align=right><TD width="5px"><A><DIV onclick="cancelFort('+ q[i][0]+','+q[i][1]+','+q[i][2]+','+q[i][3]+','+q[i][5]+','+q[i][6]+','+q[i][7] +','+ i +')">Cancel</div></a></td>'
          m += '<TD>'+ q[i][1] +' </td><TD align=left> '+ fortNamesShort[q[i][0]];
          if (first)
            m += '</td><TD> &nbsp; '+  timestr(end-start, true) +'</td><TD> (<SPAN id=pttdfq>'+ timestr(actual, true) +'</span>)';
          else
            m += '</td><TD> &nbsp; '+  timestr(actual, true) +'</td></tr>'; 
          lastEnd = end;
          first = false;
        }
      }
      m += '</table>';
      document.getElementById ('divSTright').innerHTML = m;
    }
    m = t.stats.Dqueued +' Slots occupied';
    if (totTime > 0)
      m += ' - Time: '+ unsafeWindow.timestr(totTime);
    document.getElementById ('statDTtot').innerHTML = m;
  },
  
  
  dispTrainStatus : function (msg){
    var t = Tabs.Train;
    t.divTrainStatus.innerHTML = msg + t.divTrainStatus.innerHTML;
  },

  butcancelTrain : function (typetrn, numtrptrn, trnTmp, trnETA, trnNeeded, cityId, trainingId){
    var t = Tabs.Train;
    var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
    
    params.pf =0;
    params.requestType = "CANCEL_TRAINING";
    params.cityId = cityId;
    params.typetrn = typetrn;
    params.numtrptrn =  numtrptrn;
    params.trnETA = trnETA;
    params.trnTmp = trnTmp;
    params.trnNeeded = trnNeeded;
    
    new AjaxRequest(unsafeWindow.g_ajaxpath + "ajax/cancelTraining.php" + unsafeWindow.g_ajaxsuffix, {
        method: "post",
        parameters: params,
        onSuccess: function (message) {
        var rslt=eval("("+message.responseText+")");
        if (rslt.ok) {
					var k=0;
					for(var j=0;j<Seed.queue_unt["city"+cityId].length;j++){
						if(j>trainingId){
							Seed.queue_unt["city"+cityId][j][2]=parseInt(rslt.dateTraining[k]["start"]);
							Seed.queue_unt["city"+cityId][j][3]=parseInt(rslt.dateTraining[k]["end"]);
							k++;
						}
					}
			
			Seed.queue_unt["city"+cityId].splice(trainingId,1);
			for(var i=1;i<5;i++){
				var totalReturn=parseInt(unsafeWindow.unitcost["unt"+typetrn][i])*parseInt(numtrptrn)*3600/2;
				Seed.resources["city"+cityId]["rec"+i][0]=parseInt(Seed.resources["city"+cityId]["rec"+i][0])+totalReturn;
			}
        } 
        },
        onFailure: function () {
        },
    });
  },
  
 butcancelFort : function (typefrt, numtrpfrt, frtTmp, frtETA, frtNeeded, frtid, cityId, queueId){
   var t = Tabs.Train;
   var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
   params.pf =0;
   params.requestType = "CANCEL_FORTIFICATIONS";
   params.cityId = cityId;
   params.typefrt = typefrt;
   params.numtrpfrt =  numtrpfrt;
   params.frtETA = frtETA;
   params.frtTmp = frtTmp;
   params.frtNeeded = frtNeeded;
   params.frtid = frtid;
   new AjaxRequest(unsafeWindow.g_ajaxpath + "ajax/cancelFortifications.php" + unsafeWindow.g_ajaxsuffix, {
       method: "post",
       parameters: params,
       onSuccess: function (message) {
       var rslt=eval("("+message.responseText+")");
       if (rslt.ok) {
 			var k=0;
 			for(var j=0;j<Seed.queue_fort["city"+cityId].length;j++){
 				if(j>queueId){
 					Seed.queue_fort["city"+cityId][j][2]=parseInt(rslt.dateFortifications[k]["start"]);
 					Seed.queue_fort["city"+cityId][j][3]=parseInt(rslt.dateFortifications[k]["end"]);
 					k++;
 				}
 			}
			unsafeWindow.update_seed(rslt.updateSeed);
 			Seed.queue_fort["city"+cityId].splice(queueId,1);
 			for(var i=1;i<5;i++){
 				Seed.resources["city"+cityId]["rec"+i][0]=parseInt(Seed.resources["city"+cityId]["rec"+i][0])+totalReturn;
 			}
 		}
       },
       onFailure: function () {
       },
   });
 },

  stopTraining : function (msg){
    var t = Tabs.Train;
    clearTimeout (t.trainTimer);
    t.trainTimer = null;
    t.dispTrainStatus (msg +'<BR>');
    t.TDbutDo.disabled = false;
    t.TTbutDo.disabled = false;
    t.TTbutDo.value = 'training Troops';
    t.TDbutDo.value = 'building Defenses';
    t.TTbutDo.className = '';
    t.TDbutDo.className = '';
    t.running = false;
  },
  
  doQueue : function (cityId, tut, gamble, que, errMsg){
    var t = Tabs.Train;
    clearTimeout (t.trainTimer);
    try {
      t.displayCityStats();
      if (errMsg){
        t.stopTraining ('<SPAN class=boldRed>'+ errMsg +'</span>');
        return;
      }
      var cmd = que.shift();
      if (!cmd){
        t.stopTraining ('<B>Troops ended queue.</b>');
        return;
      }
      if (cmd[0] == 'T'){
        t.dispTrainStatus ('training '+ cmd[2] +' '+  unsafeWindow.unitcost['unt'+cmd[1]][0] +' en '+ Cities.byID[cityId].name +' ('+'free slots'+':'+ que.length +')<BR>');
        doTrain (cityId, tut, gamble, cmd[1], cmd[2], 
          function(errMsg){
            if (t.running)
              t.trainTimer = setTimeout(function (){Tabs.Train.doQueue(cityId, tut, gamble, que, errMsg);}, (Math.random()*2500)+1000 );
          }
        );
      }
    } catch (err) {
      logit (inspect (err, 8, 1));
      t.stopTraining  ('<SPAN class=boldRed>PROGRAMA ERROR: '+ err.message +'</span>');
    }
  },
  
  doAutoTraps: function (cityNo) {
		var t = Tabs.Train;
		wall = {};
		var cityId = Cities.cities[cityNo - 1].id
		var cityID = 'city'+ cityId;
		getWallInfo (cityId, wall);
		availableSpace = wall.fieldSpace - wall.fieldSpaceUsed;
		if (availableSpace > 0 && wall.slotsBusy < 3) {
			var food = parseInt (Seed.resources['city'+cityId].rec1[0]/3600);
			var wood = parseInt (Seed.resources['city'+cityId].rec2[0]/3600);
			var stone = parseInt (Seed.resources['city'+cityId].rec3[0]/3600);
			var ore = parseInt (Seed.resources['city'+cityId].rec4[0]/3600);
			availableSlots = 3 - wall.slotsBusy;
			var foodRes = WallTrainOptions.keepFood[cityNo];
			var woodRes = WallTrainOptions.keepWood[cityNo];
			var stoneRes = WallTrainOptions.keepStone[cityNo];
			var oreRes = WallTrainOptions.keepOre[cityNo];
			var availFood = food - foodRes;
			var availWood = wood - woodRes;
			var availStone = stone - stoneRes;
			var availOre = ore - oreRes;
		        secsPerTrap = Cities.byID[cityId]['Def60Time'];
			if (secsPerTrap > 0 && availableSpace > 2 && availableSlots > 0) {
				if (availFood > 400 && availWood > 800 & availStone > 200 & availOre > 400) {
					var numberToTrain = 9999999999;
					if ((availFood / 400) < numberToTrain)
						numberToTrain = parseInt(availFood / 400);
					if ((availWood / 800) < numberToTrain)
						numberToTrain = parseInt(availWood / 800);
					if ((availStone / 200) < numberToTrain)
						numberToTrain = parseInt(availStone / 200);
					if ((availOre / 400) < numberToTrain)
						numberToTrain = parseInt(availOre / 400);
					if (numberToTrain > 5)
						numberToTrain = 5;
					if (wall.Trap + wall.TrapTraining < 10 || availableSpace < 15) {
						numberToTrain = 1;
						actionLog('<b>'+'Automatic Construction of Wall'+'</b>: <span class=boldRed>1</span> '+'traps'+' '+'in the city'+' <span class=boldGreen>' + Cities.byID[cityId].name+'</span> ');
					} else
						actionLog('<b>'+'Automatic Construction of Wall'+'</b>: <span class=boldRed>' + numberToTrain + '</span> '+'traps'+' '+'in the city'+' <span class=boldGreen>' + Cities.byID[cityId].name+'</span> ');
					try {
						doDefTrain (cityId, 60, numberToTrain);
					} catch (err) {
						logit (inspect (err, 8, 1));
					}
				}
			}
		}
	},

	doAutoCaltrops: function (cityNo) {
		var t = Tabs.Train;
		wall = {};
		var cityId = Cities.cities[cityNo - 1].id
		var cityID = 'city'+ cityId;
		getWallInfo (cityId, wall);
		availableSpace = wall.fieldSpace - wall.fieldSpaceUsed;
		if (availableSpace > 0 && wall.slotsBusy < 3) {
			var food = parseInt (Seed.resources['city'+cityId].rec1[0]/3600);
			var wood = parseInt (Seed.resources['city'+cityId].rec2[0]/3600);
			var stone = parseInt (Seed.resources['city'+cityId].rec3[0]/3600);
			var ore = parseInt (Seed.resources['city'+cityId].rec4[0]/3600);
			availableSlots = 3 - wall.slotsBusy;
			var foodRes = WallTrainOptions.keepFood[cityNo];
			var woodRes = WallTrainOptions.keepWood[cityNo];
			var stoneRes = WallTrainOptions.keepStone[cityNo];
			var oreRes = WallTrainOptions.keepOre[cityNo];
			var availFood = food - foodRes;
			var availWood = wood - woodRes;
			var availStone = stone - stoneRes;
			var availOre = ore - oreRes;
			secsPerCaltrop = Cities.byID[cityId]['Def61Time'];
			if (secsPerCaltrop > 0 && availableSpace > 2 && availableSlots > 0) {
				if (availFood > 100 && availWood > 400) {
					var numberToTrain = 9999999999;
					if ((availFood / 100) < numberToTrain)
						numberToTrain = parseInt(availFood / 100);
					if ((availWood / 400) < numberToTrain)
						numberToTrain = parseInt(availWood / 400);
					if (numberToTrain > 5)
						numberToTrain = 5;
					if (wall.Caltrops + wall.CaltropsTraining < 10 || availableSpace < 15) {
						numberToTrain = 1;
						actionLog('<b>'+'Automatic Construction of Wall'+'</b>: <span class=boldRed>1</span>  '+'caltrops'+' '+'in the city'+' <span class=boldGreen>' + Cities.byID[cityId].name+'</span> ');
					} else
						actionLog('<b>'+'Automatic Construction of Wall'+'</b>: <span class=boldRed>' + numberToTrain + '</span> '+'caltrops'+' '+'in the city'+' <span class=boldGreen>' + Cities.byID[cityId].name+'</span> ');
					try {
						doDefTrain (cityId, 61, numberToTrain);
					} catch (err) {
						logit (inspect (err, 8, 1));
					}
				}
			}
		}
	},

	doAutoSpikes: function (cityNo) {
		var t = Tabs.Train;
		wall = {};
		var cityId = Cities.cities[cityNo - 1].id
		var cityID = 'city'+ cityId;
		getWallInfo (cityId, wall);
		availableSpace = wall.fieldSpace - wall.fieldSpaceUsed;
		if (availableSpace > 0 && wall.slotsBusy < 3) {
			var food = parseInt (Seed.resources['city'+cityId].rec1[0]/3600);
			var wood = parseInt (Seed.resources['city'+cityId].rec2[0]/3600);
			var stone = parseInt (Seed.resources['city'+cityId].rec3[0]/3600);
			var ore = parseInt (Seed.resources['city'+cityId].rec4[0]/3600);
			availableSlots = 3 - wall.slotsBusy;
			var foodRes = WallTrainOptions.keepFood[cityNo];
			var woodRes = WallTrainOptions.keepWood[cityNo];
			var stoneRes = WallTrainOptions.keepStone[cityNo];
			var oreRes = WallTrainOptions.keepOre[cityNo];
			var availFood = food - foodRes;
			var availWood = wood - woodRes;
			var availStone = stone - stoneRes;
			var availOre = ore - oreRes;
			secsPerSpike = Cities.byID[cityId]['Def62Time'];
			if (secsPerSpike > 0 && availableSpace > 2 && availableSlots > 0) {
				if (availFood > 150 && availWood > 750 & availStone > 50) {
					var numberToTrain = 9999999999;
					if ((availFood / 150) < numberToTrain)
						numberToTrain = parseInt(availFood / 150);
					if ((availWood / 750) < numberToTrain)
						numberToTrain = parseInt(availWood / 750);
					if ((availStone / 50) < numberToTrain)
						numberToTrain = parseInt(availStone / 50);
					if (numberToTrain > 5)
						numberToTrain = 5;
					if (wall.SpikedBarrier + wall.SpikedBarrierTraining < 10 || availableSpace < 15) {
						numberToTrain = 1;
						actionLog('<b>'+'Automatic Construction of Wall'+'</b>: <span class=boldRed>1</span> '+'spikes barriers'+' '+'in the city'+' <span class=boldGreen>' + Cities.byID[cityId].name+'</span> ');
					} else
						actionLog('<b>'+'Automatic Construction of Wall'+'</b>: <span class=boldRed>' + numberToTrain + '</span> '+'spikes barriers'+' '+'in the city'+' <span class=boldGreen>' + Cities.byID[cityId].name+'</span> ');
					try {
						doDefTrain (cityId, 62, numberToTrain);
					} catch (err) {
						logit (inspect (err, 8, 1));
					}
				}
			}
		}
	},

	doAutoCrossbows: function (cityNo) {
		var t = Tabs.Train;
		wall = {};
		var cityId = Cities.cities[cityNo - 1].id
		var cityID = 'city'+ cityId;
		getWallInfo (cityId, wall);
		availableSpace = wall.wallSpace - wall.wallSpaceUsed;
		if (availableSpace > 0 && wall.slotsBusy < 2) {
			var food = parseInt (Seed.resources['city'+cityId].rec1[0]/3600);
			var wood = parseInt (Seed.resources['city'+cityId].rec2[0]/3600);
			var stone = parseInt (Seed.resources['city'+cityId].rec3[0]/3600);
			var ore = parseInt (Seed.resources['city'+cityId].rec4[0]/3600);
			availableSlots = 2 - wall.slotsBusy;
			var foodRes = WallTrainOptions.keepFood[cityNo];
			var woodRes = WallTrainOptions.keepWood[cityNo];
			var stoneRes = WallTrainOptions.keepStone[cityNo];
			var oreRes = WallTrainOptions.keepOre[cityNo];
			var availFood = food - foodRes;
			var availWood = wood - woodRes;
			var availStone = stone - stoneRes;
			var availOre = ore - oreRes;
                  	secsPerXbow = Cities.byID[cityId]['Def53Time'];
			if (secsPerXbow > 0 && availableSpace > 2 && availableSlots > 0) {
				if (availFood > 250 && availWood > 2000 & availStone > 750 & availOre > 500) {
					var numberToTrain = 9999999999;
					if ((availFood / 250) < numberToTrain)
						numberToTrain = parseInt(availFood / 250);
					if ((availWood / 2000) < numberToTrain)
						numberToTrain = parseInt(availWood / 2000);
					if ((availStone / 750) < numberToTrain)
						numberToTrain = parseInt(availStone / 750);
					if ((availOre / 500) < numberToTrain)
						numberToTrain = parseInt(availOre / 500);
					if (numberToTrain > 5)
						numberToTrain = 5;
					if (wall.Crossbows + wall.CrossbowsTraining < 10 || availableSpace < 15) {
						numberToTrain = 1;
						actionLog('<b>'+'Automatic Construction of Wall'+'</b>: <span class=boldRed>1</span> '+'crossbows'+' '+'in the city'+' <span class=boldGreen>' + Cities.byID[cityId].name+'</span> ');
					} else
						actionLog('<b>'+'Automatic Construction of Wall'+'</b>: <span class=boldRed>' + numberToTrain + '</span> '+'crossbows'+' '+'in the city'+' <span class=boldGreen>' + Cities.byID[cityId].name+'</span> ');
					try {
						doDefTrain (cityId, 53, numberToTrain);
					} catch (err) {
						logit (inspect (err, 8, 1));
					}
				}
			}
		}
	},

	doWallTrain: function (cityNo) {
		var t = Tabs.Train;
		clearTimeout (t.nextWallTrain);
		var cityId = Cities.cities[cityNo - 1].id
		var cityID = 'city'+ cityId;
		var troopType = WallTrainOptions.troopType[cityNo];
		if (troopType > 0) {
			var unitQ = Seed.queue_unt['city'+cityId];
			var queued=0;
			if (unitQ!=null && unitQ.length>0 )
				queued = unitQ.length;
			var slots = Cities.byID[cityId].numBarracks - queued;
			secsPerTroop = Cities.byID[cityId]['Troop'+troopType+'Time'];
			if (slots > 0 && secsPerTroop > 0)
				t.doAutoTroopTrain(cityNo);
		}
		if (WallTrainOptions.doTraps[cityNo])
			t.doAutoTraps(cityNo);
		if (WallTrainOptions.doCalrops[cityNo])
			t.doAutoCaltrops(cityNo);
		if (WallTrainOptions.doSpikes[cityNo])
			t.doAutoSpikes(cityNo);
		if (WallTrainOptions.doXbows[cityNo])
			t.doAutoCrossbows(cityNo);
		if (cityNo == Cities.numCities)
			t.nextWallTrain = setTimeout(function(){ t.doWallTrain(1);}, (WallTrainOptions.intervalSecs*1000));
		else
			t.nextWallTrain = setTimeout(function(){ t.doWallTrain(cityNo+1);}, 7000);
	},
}



/************************ Food Alerts *************************/
var FoodAlerts = {
  init : function (){
   var f = FoodAlerts;
   f.e_eachMinute();
  },
  minuteTimer : null,

  e_eachMinute : function (){  
    var f = FoodAlerts;
    var now = unixTime();
      row = [];
      for(i=0; i < Cities.numCities; i++) {
        var rp = getResourceProduction (Cities.cities[i].id);
        var foodleft = parseInt(Seed.resources["city" + Cities.cities[i].id]['rec1'][0])/3600;
        var usage = rp[1] - parseInt(Seed.resources["city" + Cities.cities[i].id]['rec1'][3]);
        row[i] = rp[1] - usage;
          var timeLeft = parseInt(Seed.resources["city" + Cities.cities[i].id]['rec1'][0]) / 3600 / (0-usage) * 3600;
          var msg = '';
        if (usage < 0) {
    if (Options.enableFoodTower && timeLeft<(6*3600)) {
                msg += 'My city ' + Cities.cities[i].name.substring(0,10) + ' (' +
                      Cities.cities[i].x +','+ Cities.cities[i].y + ')';
                msg += ' food is low. remaining: '+addCommasWhole(foodleft)+' ('+timestrShort(timeLeft)+') spend: '+addCommas(usage);
                sendChat ("/a " + msg);
          }
    }
      }
  f.minuteTimer = setTimeout (f.e_eachMinute, 1800000);
  },
}

/************************ Tower Alerts ************************/
var TowerAlerts = {
  viewImpendingFunc : null,
  generateIncomingFunc : null,
  fixTargetEnabled : false,
  towerMarches : {},    // track all marches that have been posted to alliance chat
  
  init : function (){
    var t = TowerAlerts; 
    var s = GM_getValue ('towerMarches_'+GetServerId());
    if (s != null)
      t.towerMarches = JSON2.parse (s);
      t.viewImpendingFunc = new CalterUwFunc ('attack_viewimpending_view', [[/Modal.showModal\((.*)\)/im, 'Modal.showModal\($1\); ptViewImpending_hook(a);']]);
      uW.ptViewImpending_hook = t.viewImpending_hook;
      t.viewImpendingFunc.setEnable (true);
      t.generateIncomingFunc = new CalterUwFunc ('attack_generateincoming', [[/.*} else {\s*e = true;\s*}/im, '} else { e = ptGenerateIncoming_hook(); }']]);
      uW.ptGenerateIncoming_hook = t.generateIncoming_hook;
   },
     
  // fix 'target', add button  
  viewImpending_hook : function (atkinc){    
    var t = TowerAlerts;  
    var div = document.getElementById('modal_attackimpending_view');
    var isFalse = false;
    if (t.fixTargetEnabled){ 
      var city = Cities.byID[atkinc.toCityId];
      var target = '';
      if (!city || (atkinc.marchType!=3 && atkinc.marchType!=4)){  
        target = '<B>FALSE REPORT!</b>';
        isFalse = true;
      } else if (city.tileId == atkinc.toTileId){
        target = city.name + ' ('+ city.x + ','+ city.y +')';
      } else {
        wilds = Seed.wilderness['city'+atkinc.toCityId];
        m = '';
        for (k in wilds){
          if (wilds[k].tileId == atkinc.toTileId){
            m = 'at '+ wilds[k].xCoord + ','+ wilds[k].yCoord;
            break;
          }
        }
        target = city.name + ', <B>WILD '+ m +'</b>';
      }
      div.childNodes[0].innerHTML = '<B>Target: </b>'+ target;
    }
    if (!isFalse){
      var d = document.createElement ('div');
      d.innerHTML = '<BR><TABLE><TR><TD><a id=towerPostToChat class=button20><span>Post to Alliance Chat</span></a></td></tr></table>';
      div.appendChild (d);
      document.getElementById('towerPostToChat').addEventListener('click', function (){t.e_buttonPostToChat(atkinc)}, false);
    }
  },

  // fix false reports  
  generateIncoming_hook : function (){    
    return false;
  },
  
  enableFixFalseReports : function (tf){
    var t = TowerAlerts;  
    t.generateIncomingFunc.setEnable (tf);
  },


  
  isFixTargetAvailable : function (){
    var t = TowerAlerts;  
    return t.viewImpendingFunc.isAvailable();
  },

  isFixFalseReportsAvailable : function (){
    var t = TowerAlerts;  
    return t.generateIncomingFunc.isAvailable();
  },
  
  postToChatOptions : {aChat:false},

  setPostToChatOptions : function (obj){
    var t = TowerAlerts;
    t.postToChatOptions = obj;
    clearTimeout(t.secondTimer);
  },

  e_buttonPostToChat : function (march){
    var t = TowerAlerts;
    t.postToChat (march, true);
    uW.Modal.hideModal();
  },
  
  postToChat : function (m, force){
    var t = TowerAlerts;
    if (DEBUG_TRACE) logit ("checkTower(): INCOMING at "+ unixTime()  +": \n"+ inspect (m, 8, 1));
    if (m.marchType == null)      // bogus march (returning scouts)
        return;
    if (ENABLE_TEST_TAB) Tabs.Test.addDiv ("Incoming!<BR><PRE style='margin:0px;'>" + inspect (m, 8, 1) +'</pre>');
    if (m.marchType == 3){
      if (!t.postToChatOptions.scouting && !force)
        return;
      atkType = 'scouted';
    } else if (m.marchType == 4){
      atkType = 'attacked';
    } else {
      return;
    }
    var target, atkType, who;
    var city = Cities.byID[m.toCityId];
    if ( city.tileId == m.toTileId )
      target = 'city at '+ city.x +','+ city.y;
    else {
      if (!t.postToChatOptions.wilds && !force)
        return;
      target = 'wilderness';
      for (k in Seed.wilderness['city'+m.toCityId]){
        if (Seed.wilderness['city'+m.toCityId][k].tileId == m.toTileId){
          target += ' at '+ Seed.wilderness['city'+m.toCityId][k].xCoord +','+ Seed.wilderness['city'+m.toCityId][k].yCoord;
          break;
        }
      }
    }
    if (Seed.players['u'+m.pid])
      who = Seed.players['u'+m.pid].n;
    else if (m.players && m.players['u'+m.pid])
      who = m.players['u'+m.pid].n;
    else
      who = 'Unknown';
  
    if (m.fromXCoord)
      who += ' at '+ m.fromXCoord +','+ m.fromYCoord;
    var msg = '';
    if (!force)
      msg = t.postToChatOptions.aPrefix +' ';
    msg += 'My '+ target +' is being '+ atkType  +' by '+ who +'. Incoming Troops (arriving in '+
        uW.timestr(parseInt(m.arrivalTime - unixTime())) +') : ';
    var totTroops = 0;
    for (k in m.unts){
      var uid = parseInt(k.substr (1));
      msg += m.unts[k] +' '+ uW.unitcost['unt'+uid][0] +', ';
      totTroops += m.unts[k];
    }
    if ((totTroops < t.postToChatOptions.minTroops) && !force)
      return;
    msg = msg.slice (0, -2);
    msg += '.';
    if ( city.tileId == m.toTileId ){
      var emb = getCityBuilding(m.toCityId, 8);
      if (emb.count > 0){
        var availSlots = emb.maxLevel;
        for (k in Seed.queue_atkinc){
          if (Seed.queue_atkinc[k].marchType==2 && Seed.queue_atkinc[k].toCityId==m.toCityId && Cities.byID[Seed.queue_atkinc[k].fromCityId]==null){ 
            --availSlots;
          }
        }
        msg += ' My embassy has '+ availSlots +' of '+ emb.maxLevel +' slots available.';
      }
    }
    if (ENABLE_TEST_TAB) Tabs.Test.addDiv (msg);
    if (SEND_ALERT_AS_WHISPER)
      sendChat ("/"+ Seed.player.name +' '+ msg);    // Whisper to myself
    else
      sendChat ("/a "+  msg);                        // Alliance chat
  },
  }
  
  /*********************************** Players TAB ***********************************/

Tabs.AllianceList = {
  tabOrder : 8,
  tabLabel : uW.g_js_strings.commonstr.player,
  cont : null,
  dat : [],

fetchPlayerCourt : function (uid, notify){
  var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
  params.pid = uid;
  new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/viewCourt.php" + unsafeWindow.g_ajaxsuffix, {
    method: "post",
    parameters: params,
    onSuccess: function (rslt) {
logit ("ajax/viewCourt.php\n"+ inspect (rslt, 3, 1));      
      notify (rslt);
    },
    onFailure: function (rslt) {
      notify (rslt);
    },
  });
},


fetchTEST : function (pageNum, notify){    // as in alliance list, sorted by rank, 10 per page
  var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
  params.pageNo = 1;
  params.numPerPage = 100;
  params.perPage = 100;
  params.results = 100;
  params.numResults = 100;
  new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/allianceGetMembersInfo.php" + unsafeWindow.g_ajaxsuffix, {
    method: "post",
    parameters: params,
    onSuccess: function (rslt) {
logit ("ajax/allianceGetMembersInfo.php:\n"+ inspect (rslt, 5, 1));      
      notify (rslt);
    },
    onFailure: function (rslt) {
      notify ({errorMsg:'AJAX error'});
    },
  });
},

  
   init : function (div){
    var t = Tabs.AllianceList;
    t.cont = div;
    unsafeWindow.PTgetMembers = t.eventGetMembers;
    unsafeWindow.PTPaintMembers = t.GetDataForMap;
    unsafeWindow.PTpd = t.clickedPlayerDetail;
    unsafeWindow.PTpl = t.clickedPlayerLeaderboard;
    unsafeWindow.PTpl2 = t.clickedPlayerLeaderboard2;
    unsafeWindow.PTalClickPrev = t.eventListPrev;
    unsafeWindow.PTalClickNext = t.eventListNext;
    unsafeWindow.PCplo = t.clickedPlayerGetLastLogin;
    Lastlogin=0;
    t.show();
  },
 

  hide : function (){
  },

  show : function (){
    var t = Tabs.AllianceList;
    if (t.state == null){
      if (getMyAlliance()[0] == 0) {
        t.cont.innerHTML = '<BR><BR><CENTER>You are not in any alliance.</center>';
        t.state = 1;
        return;
      }
      var m = '<DIV class=ptentry><TABLE width=100% cellpadding=0>\
          <TR><TD class=xtab align=right></td><TD class=xtab>Enter all or part of a player s name: &nbsp;</td>\
            <TD width=80% class=xtab><INPUT id=allPlayName size=20 type=text /> &nbsp; <INPUT id=playSubmit type=submit value="Search Player" /></td>\
            <TD class="xtab ptErrText"><SPAN id=ptplayErr></span></td></tr>\
          <TR><TD class=xtab>O: </td><TD class=xtab> Enter all or part of the name of an alliance: &nbsp;</td>\
            <TD class=xtab><INPUT id=allAllName type=text /> &nbsp; <INPUT id=allSubmit type=submit value="Search alliance" /></td>\
            <TD class="xtab ptErrText"><SPAN id=ptallErr></span></td></tr>\
           <TR><TD class=xtab><INPUT align=left id=allListSubmit type=submit value="Alliance list" /></td>\
            <TD class=xtab><INPUT align=right id=idMyAllSubmit type=submit value="'+ getMyAlliance()[1] +'"/>\
           <TD class=xtab></td><TD class=xtab><span align=right <b>'+uW.g_js_strings.attack_generateincoming.estimatedarrival+': </b></span>\
            <div><select id="idFindETASelect">\
        <option value="0,0" > ---Select--- </option>\
        <option value="0,180" >'+unsafeWindow.unitcost["unt1"][0]+'</option>\
        <option value="0,200" > '+unsafeWindow.unitcost["unt2"][0]+' </option>\
        <option value="0,3000" > '+unsafeWindow.unitcost["unt3"][0]+' </option>\
        <option value="0,300" > '+unsafeWindow.unitcost["unt4"][0]+' </option>\
        <option value="0,275" > '+unsafeWindow.unitcost["unt5"][0]+' </option>\
        <option value="0,250" > '+unsafeWindow.unitcost["unt6"][0]+' </option>\
        <option value="1,1000" > '+unsafeWindow.unitcost["unt7"][0]+' </option>\
        <option value="1,750" > '+unsafeWindow.unitcost["unt8"][0]+' </option>\
        <option value="1,150" > '+unsafeWindow.unitcost["unt9"][0]+' </option>\
        <option value="1,100" > '+unsafeWindow.unitcost["unt10"][0]+' </option>\
        <option value="1,120" > '+unsafeWindow.unitcost["unt11"][0]+' </option>\
        <option value="1,80" > '+unsafeWindow.unitcost["unt12"][0]+' </option>\
        </select></div>\
        </td></tr>\
         </table><span style="vertical-align:middle;" id=altInput></span></div><SPAN id=allListOut></span>';
      t.cont.innerHTML = m;
      document.getElementById('allPlayName').addEventListener ('keypress', function(e) {if ( e.which == 13)  document.getElementById('playSubmit').click();}, false);
      document.getElementById('allAllName').addEventListener ('keypress', function(e) {if ( e.which == 13)  document.getElementById('allSubmit').click();}, false);
      
      document.getElementById('allSubmit').addEventListener ('click', t.eventSubmit, false);
      document.getElementById('playSubmit').addEventListener ('click', t.eventPlayerSubmit, false);
      document.getElementById('allAllName').addEventListener ('focus', function (){document.getElementById('ptallErr').innerHTML='';}, false);
      document.getElementById('allPlayName').addEventListener ('focus', function (){document.getElementById('ptplayErr').innerHTML='';}, false);
      document.getElementById('allListSubmit').addEventListener ('click', t.eventListSubmit, false);
      document.getElementById('idMyAllSubmit').addEventListener ('click', t.showMyAlliance, false);
      document.getElementById('idFindETASelect').addEventListener ('click', t.handleEtaSelect, false);
      document.getElementById('idFindETASelect').disabled = true;
      t.ModelCity=Cities.cities[0];
      t.curPage = 0;
      t.MaxPage = -1;
      t.state = 1;
    }
  },

  pName : '',
  eventPlayerSubmit : function (){
    var t = Tabs.AllianceList;
    document.getElementById('ptplayErr').innerHTML='';
    var name = document.getElementById('allPlayName').value;
    name = name.replace(/\'/g,"_");
    t.pName = name;
    if (name.length < 3){
      document.getElementById('ptplayErr').innerHTML = 'Enter at least 3 characters';
      return;
    }
    document.getElementById('altInput').innerHTML = '';
    document.getElementById('allListOut').innerHTML = '<BR><BR><CENTER>looking ...</center>';
    t.fetchPlayerList (name, t.eventGotPlayerList);
  },
  
  eventGotPlayerList : function (rslt){
    var t = Tabs.AllianceList;
    if (!rslt.ok){
      document.getElementById('allListOut').innerHTML = rslt.errorMsg;
      return;
    }
    t.playerList = rslt.matchedUsers;
    var uList = [];
    for (k in rslt.matchedUsers)
      uList.push (rslt.matchedUsers[k].userId);     
    t.fetchPlayerStatus (uList, function(r){t.eventGotPlayerOnlineList(r)});    
  },    
    
  eventGotPlayerOnlineList : function (rslt){
    var t = Tabs.AllianceList;
    if (!rslt.ok){
      document.getElementById('allListOut').innerHTML = rslt.errorMsg;
      return;
    }
    var m = '<DIV class=ptstat>Showing players found <B>"'+ t.pName +'"</b></div>\
      <DIV style="height:575px; max-height:575px; overflow-y:auto">\
      <TABLE width=100% align=center class=ptTab cellspacing=0><TR style="font-weight:bold"><TD>name &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp</td>\
      <TD align=right>user iD &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp &nbsp</td><TD>Might &nbsp &nbsp</td><TD> &nbsp; on-line</td><TD> &nbsp;Facebook &nbsp; </td><TD width=75%>see</td></tr>';
    var row=0;
    var cl='';
    for (k in t.playerList){
      var u = t.playerList[k];
      if (++row % 2)
        cl = 'class=ptOddrow ';
      else
        cl = '';
      m += '<TR '+ cl +'valign=top><TD>'+ u.genderAndName +'</td><TD><A target="_tab" href="http://koc.dunno.com/index.sjs?f=ServersByUser&user_id='+ u.userId +'">' + u.userId + '</a></SPAM></td><TD align=right>'+ addCommasInt(u.might) +'</td>\
          <TD>'+ (rslt.data[u.userId]?"&nbsp;<SPAN class=boldDarkRed>on-line</span>":"") +'</td>\
          <TD align=center><A target="_tab" href="http://www.facebook.com/profile.php?id='+ u.fbuid +'">Perfil</a></td>\
          <TD><SPAN onclick="PTpd(this, '+ u.userId +')"><A>details</a> &nbsp; <BR></span><SPAN onclick="PTpl2(this,'+ u.userId+','+rslt.data[u.userId]+')"><A>classification</a><BR></span><SPAN onclick="PCplo(this, \''+ u.userId +'\')"><A>Last Login</a></span></td></tr>';
    }
    m += '</table></div>';
    document.getElementById('allListOut').innerHTML = m;
  },
  asName : '',
    eventPlayerUIDSubmit : function (){
    var t = Tabs.AllianceList;
    document.getElementById('ptplayErr').innerHTML='';
    var uid = document.getElementById('allPlayName').value;

	var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
    params.uid = uid;
    MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/getUserGeneralInfo.php" + unsafeWindow.g_ajaxsuffix, {
      method: "post",
      parameters: params,
      onSuccess: function (rslt) {
	  t.asName = rslt.userInfo[0].name;
      },
      onFailure: function (rslt) {
           document.getElementById('allListOut').innerHTML = '<BR><BR><CENTER>Looking ... not found</center>';
		   return;
      },
    });
    t.pName = t.asName;
    document.getElementById('altInput').innerHTML = '';
    document.getElementById('allListOut').innerHTML = '<BR><BR><CENTER>looking...</center>';
    t.fetchPlayerList (t.asName, t.eventGotPlayerList);
  },
	
  clickedPlayerDetail : function (span, uid){
    var t = Tabs.AllianceList;
    span.onclick = '';
    span.innerHTML = "looking for details ...";
    t.fetchPlayerInfo (uid, function (r) {t.gotPlayerDetail(r, span)});
  },

  clickedPlayerLeaderboard : function (span, uid){
    var t = Tabs.AllianceList;
    span.onclick = '';
    span.innerHTML = "collecting information on classification ...";
    t.fetchLeaderboard (uid, function (r) {t.gotPlayerLeaderboard(r, span)});
  },

  clickedPlayerLeaderboard2 : function (span, uid,status){
    var t = Tabs.AllianceList;
    span.onclick = '';
    span.innerHTML = "looking for information on classification ... ";
    t.fetchLeaderboard (uid, function (r) {t.gotPlayerLeaderboard2(r, span,uid,status)});
  },
  
  clickedPlayerGetLastLogin : function (span, uid){
     var t = Tabs.AllianceList;
     span.onclick = '';
     span.innerHTML = "looking login date ...";
     t.fetchPlayerLastLogin (uid, function (r) {t.gotPlayerLastLogin(r, span)});
   },

  gotPlayerLeaderboard2 : function (rslt,span,uid,status){
    var t = Tabs.AllianceList;
    if (!rslt.ok){
      span.innerHTML = rslt.errorMsg;
      return;
    }
    if (rslt.totalResults == 0){
      span.innerHTML = '<B>Leaderboard:</b> Not found! (misted?)';
      return;
    }
    var myA = getMyAlliance ();
    t.dat = [];
    var p = rslt.results[0];
        if ( myA[0] == p.allianceId)
           t.friendEta = true;
        else
           t.friendEta = false;
        for (var c=0; c<p.cities.length; c++){
          t.dat.push ([p.displayName, parseInt(p.might), p.officerType, parseInt(p.numCities), parseInt(p.cities[c].tileLevel),
               parseInt(p.cities[c].xCoord), parseInt(p.cities[c].yCoord), p.cities[c].cityName, 0, status,0,p.userId]);
        }
        t.setDistances (Cities.cities[0].x, Cities.cities[0].y);
        t.ModelCity=Cities.cities[0];
        t.setEta();
        t.fetchPlayerLastLogin (uid, function (r) {t.displayPlayer(p.allianceName,r)});
  },
  
  
  gotPlayerLeaderboard : function (rslt, span){
    var t = Tabs.AllianceList;
    if (!rslt.ok){
      span.innerHTML = rslt.errorMsg;
      return;
    }
    if (rslt.totalResults == 0){
      span.innerHTML = '<B>Leaderboard:</b> Not found! (misted?)';
      return;
    }
    var p = rslt.results[0];
    var an = p.allianceName;
    if (!an || an=='' || p.officerType==4)
      an = 'none';
    else
      an += ' ('+ officerId2String(p.officerType) +')';
    pStr = JSON2.stringify(p);
    logit (pStr);
    m = '<TABLE cellspacing=0 class=ptTab><TR><TD><B>classification: </b></td><TD colspan=2> might: '+ p.might  +' &nbsp; Allianc: '+ an +'</td></tr>'; 
    for (var i=0; i<p.cities.length; i++){
      var c = p.cities[i];
      var created = '';
      if (c.dateCreated && c.dateCreated.substr(0,2)=='20')
        created = ' &nbsp; created: ' + c.dateCreated.substr(0,10);
      m += '<TR><TD align=right><B>city#'+ (i+1) +':</b></td><TD> &nbsp; '+ c.cityName 
      +'</a>) (<a onclick="pbGotoMap ('+ c.xCoord +',' +c.yCoord+ ')">'+ c.xCoord +','+ c.yCoord +'</a>)</td><TD width=75%> &nbsp; level: '
        + c.tileLevel +' &nbsp; status: '+ cityStatusString (c.cityStatus) + created +'</td></tr>';
    }  
    span.innerHTML = m + '</table>';
  },
    
  gotPlayerDetail : function (rslt, span){
    var t = Tabs.AllianceList;
    if (!rslt.ok){
      span.innerHTML = rslt.errorMsg;
      return;
    }
    var u = rslt.userInfo[0];
    var a = 'Ninguna';
    if (u.allianceName)
      a = u.allianceName +' ('+ getDiplomacy(u.allianceId) + ')';
    var m = '<TABLE cellspacing=0 class=ptTab><TR><TD><B>details:</b> &nbsp; </td><TD>Alliance: '+ a +' &nbsp; cities: '
          + u.cities +' &nbsp; population: '+ u.population +'</td></tr><TR><TD></td><TD>provinces: ';
    var pids = u.provinceIds.split (',');
    var p = [];
    for (var i=0; i<pids.length; i++)
      p.push(unsafeWindow.provincenames['p'+pids[i]]);
    span.innerHTML = m + p.join (', ') +'</td></tr></table>';
  },

  eventMyAllianceSubmit : function (){
    var t = Tabs.AllianceList;
    document.getElementById('allListOut').innerHTML = '<BR><BR><CENTER>looking ...</center>';
    t.fetchAllianceMemberList (getMyAlliance()[0], null, t.eventGotMemberList);
  },  
    
  aName : '',
  eventSubmit : function (){
    var t = Tabs.AllianceList;
    document.getElementById('ptallErr').innerHTML='';
    t.aName = document.getElementById('allAllName').value;
    if (t.aName.length < 3){
      document.getElementById('ptallErr').innerHTML = 'Enter at least 3 characters';
      return;
    }
    var myA = getMyAlliance ();
    document.getElementById('altInput').innerHTML = '';
    document.getElementById('allListOut').innerHTML = '<BR><BR><CENTER>looking ...</center>';
    if (myA[0]!=0 && myA[1].toLowerCase().indexOf(t.aName.toLowerCase())>=0 )
      t.fetchAllianceList (t.aName, myA[0], t.eventGotAllianceList);
    else
      t.fetchAllianceList (t.aName, null, t.eventGotAllianceList);
  },

  eventListSubmit : function (){
    var t = Tabs.AllianceList;
    var myA = getMyAlliance ();
    document.getElementById('allListOut').innerHTML = '<BR><BR><CENTER>looking ...</center>';
    if (myA[0]!=0  ) {
       t.curPage=1;
       t.fetchOtherAllianceInfo ( 1, t.eventGotOtherAlliancePage);
    }
    else {
       document.getElementById('allListOut').innerHTML = 'Youre not in an alliance.';
    }
  },

  eventGotAllianceList : function (rslt){
    var t = Tabs.AllianceList;
    if (!rslt.ok){
      document.getElementById('allListOut').innerHTML = rslt.errorMsg;
      return;
    }
    var m = '<DIV class=ptstat>Showing alliances found <B>"'+ t.aName +'"</b></div>\
    <TABLE><TR style="font-weight:bold"><TD class=xtab>Aliance</td><TD class=xtab>Rango</td><TD class=xtab>members</td>\
        <TD align=right class=xtab>might</td><TD class=xtab>diplomacy</td><TD class=xtab></td></tr>';
    for (k in rslt.alliancesMatched){
      var all = rslt.alliancesMatched[k];
      var dip = '';
      if (all.relation && all.relation==1)
        dip = 'Amigables';
      else if (all.relation && all.relation==2)
        dip = 'Hostiles';
      m += '<TR><TD class=xtab>'+ all.allianceName +'</td><TD align=right class=xtab>'+ all.ranking +'</td><TD align=right class=xtab>'+ all.membersCount +'</td>\
       <TD align=right class=xtab>'+ addCommasInt(all.might) +'</td><TD class=xtab>'+ dip +'</td>\
       <TD class=xtab><a onclick="PTgetMembers('+ all.allianceId +')">View Members</a></td>\
        <TD class=xtab><a onclick="PTPaintMembers('+ all.allianceId +')">'+unsafeWindow.g_js_strings.commonstr.viewmap+'</a></td></tr>';
    }
    document.getElementById('allListOut').innerHTML = m;
  },


  showMyAlliance : function (){
    var t = Tabs.AllianceList;
    var myA = getMyAlliance ();
    document.getElementById('allListOut').innerHTML = '<BR><BR><CENTER> ...</center>';
    if (myA[0]!=0  ) {
       t.eventGetMembers(myA[0]);
    }
    else {
       document.getElementById('allListOut').innerHTML = 'Youre not in an alliance.';
    }
  },

  curPage : 0,
  MaxPage : 0,

  eventListNext : function (amt){
    var t = Tabs.AllianceList;
    if( parseInt(amt) >= 9999 )
       t.curPage = t.MaxPage;
    else {
	    t.curPage = parseInt(t.curPage) + parseInt(amt);
	    if ( t.curPage > t.MaxPage) {
	      t.curPage = t.MaxPage;
	    }
    }
    document.getElementById('allListOut').innerHTML = '<BR><BR><CENTER>looking...</center>';
    t.fetchOtherAllianceInfo (t.curPage, t.eventGotOtherAlliancePage);
  },

  eventListPrev : function (amt){
    var t = Tabs.AllianceList;
    if(amt <= -1)
       t.curPage = 1;
    else {
	    t.curPage-=amt;
	    if ( t.curPage < 1 ) {
	      t.curPage = 1;
	    }
    }
    document.getElementById('allListOut').innerHTML = '<BR><BR><CENTER>looking...</center>';
    t.fetchOtherAllianceInfo (t.curPage, t.eventGotOtherAlliancePage);
  },

  gotoPage : function (){
    var t = Tabs.AllianceList;
    if (t.MaxPage < 0 ) {
      document.getElementById('allListOut').innerHTML = 'List Alliances first.';
      return;
    }
    if (t.MaxPage < 0 || val > t.MaxPage || val < 1) {
      document.getElementById('allListOut').innerHTML = 'Page number out of range';
      return;
    }
    document.getElementById('allListOut').innerHTML = '<BR><BR><CENTER> ...</center>';
    t.fetchOtherAllianceInfo (t.curPage, t.eventGotOtherAlliancePage);
  },

  eventGotOtherAlliancePage : function (rslt){
    var t = Tabs.AllianceList;
    if (!rslt.ok){
      document.getElementById('allListOut').innerHTML = rslt.errorMsg;
      return;
    }
    t.MaxPage=rslt.noOfPages;
    var m = '<div style="overflow:auto; height:556px;width:620px;"><TABLE><thead><TR style="font-weight:bold"> \
        <th class=xtab>Aliance</th><th class=xtab>Rank</th><th class=xtab>members</th>\
        <th class=xtab>might</th><th class=xtab>Diplomacia</th><th class=xtab></th><th class=xtab></th></tr></thead><tbody>';
    document.getElementById('allListOut').innerHTML = m;
    for (var i=0; i<rslt.otherAlliances.length; i++) {
      var alliance = rslt.otherAlliances[i];
      var dip = '';
      dip = getDiplomacy(alliance.allianceId);
      m += '<TR class="'+ dip + '"><TD class=xtab>' + alliance.name +'</td><TD align=right class=xtab>'+ alliance.ranking +'</td><TD align=right class=xtab>'+ alliance.membersCount +'</td>\
       <TD align=right class=xtab>'+ addCommasInt(alliance.might) +'</td><TD class=xtab>'+ dip +'</td>\
       <TD class=xtab><a onclick="PTgetMembers('+ alliance.allianceId +')">'+uW.g_js_strings.commonstr.members+'</a></td>\
       <TD class=xtab><a onclick="PTPaintMembers('+ alliance.allianceId +')">'+uW.g_js_strings.commonstr.viewmap+'</a></td></tr>';
    }
    m += '</tbody></TABLE><div style="font-weight:bold"; height:20px;width:560px; ><span> <a onclick="PTalClickPrev(-1)"> [Principio] </a><a onclick="PTalClickPrev(10)"> [-10] </a><a onclick="PTalClickPrev(5)"> [-5] </a><a onclick="PTalClickPrev(1)"> [Anterior] </a> \
          <a onclick="PTalClickNext(1)"> [Siguiente] </a><a onclick="PTalClickNext(5)"> [+5] </a><a onclick="PTalClickNext(10)"> [+10] </a><a onclick="PTalClickNext(9999)"> [Final] </a> </span></div>';
    m += '</div>';
    document.getElementById('allListOut').innerHTML = m;
 },

  showCurrentPage : function (){
    var t = Tabs.AllianceList;
    var myA = getMyAlliance ();

    document.getElementById('allListOut').innerHTML = '<BR><BR><CENTER> ...</center>';
    if (myA[0]!=0  ) {
       t.fetchOtherAllianceInfo ( t.curPage, t.eventGotOtherAlliancePage);
    }
    else {
       t.fetchOtherAllianceInfo ( t.curPage, t.eventGotOtherAlliancePage);
    }
  },

  eventGotMemberList : function (rslt){
    var t = Tabs.AllianceList;
    if (!rslt.ok){
      document.getElementById('allListOut').innerHTML = rslt.errorMsg;
      return;
    }
    t.memberListRslt = rslt;
    var uList = [];
    for (k in rslt.results)
      uList.push (rslt.results[k].userId);     
    t.fetchPlayerStatus (uList, function(r){t.eventGotMemberOnlineList(r)});    
  },    
    
  eventGotMemberOnlineList : function (rslt){
    var t = Tabs.AllianceList;
    var numInvalid = 0;
    var numPlayers = 0;
    var myA = getMyAlliance ();
    t.dat = [];
    for (var i=0; i<t.memberListRslt.results.length; i++){
      p = t.memberListRslt.results[i];
      if (p.userId == 0){
        ++numInvalid;
      } else {
        ++numPlayers;
        if ( myA[0] == p.allianceId)
           t.friendEta = true;
        else
           t.friendEta = false;
        for (var c=0; c<p.cities.length; c++){
          t.dat.push ([p.displayName, parseInt(p.might), p.officerType, parseInt(p.numCities), parseInt(p.cities[c].tileLevel),
               parseInt(p.cities[c].xCoord), parseInt(p.cities[c].yCoord), p.cities[c].cityName, 0, rslt.data[p.userId]?1:0,'NA',p.userId]);
        }
      }
    }
    t.setDistances (Cities.cities[0].x, Cities.cities[0].y);
    t.ModelCity=Cities.cities[0];
    t.setEta();
    t.displayMembers (t.memberListRslt.allianceName, numPlayers);
  },

  // sort and display
  reDisp : function (){
    var t = Tabs.AllianceList;
    function sortFunc (a, b){
      var t = Tabs.AllianceList;
      if (typeof(a[t.sortColNum]) == 'number'){
        if (t.sortDir > 0)
          return a[t.sortColNum] - b[t.sortColNum];
        else
          return b[t.sortColNum] - a[t.sortColNum];
      } else if (typeof(a[t.sortColNum]) == 'boolean'){
// TODO !!        
return 0;        
      } else {
        if (t.sortDir > 0)
          return a[t.sortColNum].localeCompare(b[t.sortColNum]);
        else
          return b[t.sortColNum].localeCompare(a[t.sortColNum]);
      }
    }
    t.dat.sort (sortFunc);
    var m = '';
    for (var i=0; i<t.dat.length; i++){
      m += '<TR style="max-height:30px"><TD class=xxtab>'+ t.dat[i][0] +'</td><TD align=right class=xxtab>'+ addCommasInt(t.dat[i][1]) 
         +'</td><TD align=center class=xxtab>'+ t.dat[i][3] +'</td><TD class=xxtab>'+ officerId2String(t.dat[i][2])                       
         +'</td><TD class=xxtab>'+ (t.dat[i][9]?'<SPAN class=boldDarkRed>on-line</span>':'') +'</td><TD class=xxtab>'+ t.dat[i][7] +'</td><TD align=right class=xxtab>'+ t.dat[i][4] 
         +'</td><TD align=center class=xxtab><DIV onclick="pbGotoMap('+ t.dat[i][5] +','+ t.dat[i][6] +')"><A>'+ t.dat[i][5] +','+ t.dat[i][6] +'</a></div></td>\
            <TD align=right class=xxtab style="padding-right:20px;">'+ t.dat[i][8].toFixed(2) +'</td>\
         </td><TD  nowrap class=xxtab>'+ (t.dat[i][10]?'<SPAN>'+ (t.dat[i][10]>0?timestr(t.dat[i][10],1):'NA') +'</span>':'<SPAN>NA</span>') +'<td class=xxtab><SPAN onclick="PCplo(this, \''+ t.dat[i][11] +'\')"><A>Last Login</a></span><td><TD></tr>';
    }
    var tbody = document.getElementById('allBody');
    tbody.style.maxHeight = '';
    tbody.innerHTML = m;


    if (parseInt(tbody.clientHeight) > 470){
      tbody.style.height = '470px';
      tbody.style.maxHeight = '470px';
    }
  },


  setDistances : function (x, y){
    var t = Tabs.AllianceList;
    for (var i=0; i<t.dat.length; i++)
      t.dat[i][8] = distance (x, y, t.dat[i][5], t.dat[i][6]);
  },

  friendEta:false,

  setEta : function (){
    var t = Tabs.AllianceList;
    for (var i=0; i<t.dat.length; i++) {
      if (t.dat[i][8]) {
        var eta = t.estETA(parseFloat(t.dat[i][8]));
        if (t.friendEta)
           t.dat[i][10] = eta.friendETA;
        else
           t.dat[i][10] = eta.ETA;
      }
    }
  },



  handleEtaSelect : function (){
    var t = Tabs.AllianceList;
    t.setEta();
    t.reDisp();
  },

  sortColNum : 8,
  sortDir : 1,

  displayMembers : function (allName, numPlayers){
    var t = Tabs.AllianceList;
    function alClickSort (e){
      var t = Tabs.AllianceList;
      var newColNum = e.id.substr(8);
      document.getElementById('clickCol'+t.sortColNum).className = 'clickable';
      e.className='clickable clickableSel';
      if (newColNum == t.sortColNum)
        t.sortDir *= -1;
      else
        t.sortColNum = newColNum;
      t.reDisp();
    }
    unsafeWindow.PTalClickSort = alClickSort;
    var m = '<STYLE>.clickable{background-color:#ddd; border:2px outset; border-color:#555; padding-left:5px; padding-right:5px}\
            .clickableSel{background-color:#ffffcc;}\
            .xxtab{background-color:none; padding-left:5px; padding-right:5px;} </style>\
      <DIV class=ptstat ><TABLE id=tabAllMembers cellpadding=0  width=100%><TR font-weight:bold"><TD class=xtab> &nbsp; '+ allName +'</td>\
        <TD class=xtab width=80% align=center>distances from <SPAN id=distFrom>'+ Cities.cities[0].name +' ('+ Cities.cities[0].x +','+ Cities.cities[0].y +')</span></td><TD class=xtab align=right>'+ numPlayers +' players found &nbsp; </td></tr></table></div>\
      <div style="max-height:470px; height:470px; overflow-y:auto;"><TABLE id=tabAllMembers align=center cellpadding=0 cellspacing=0><THEAD style="overflow-y:hidden;">\
      <TR style="font-weight:bold"><TD id=clickCol0 onclick="PTalClickSort(this)" class=clickable><A><DIV>player</div></a></td>\
        <TD id=clickCol1 onclick="PTalClickSort(this)" class=clickable align=center><A><DIV>might</a></div></td>\
        <TD id=clickCol3 onclick="PTalClickSort(this)" class=clickable><A><DIV>cities</a></div></td>\
        <TD id=clickCol2 onclick="PTalClickSort(this)" class=clickable align=center><A><DIV>Rank</a></div></td>\
        <TD id=clickCol9 onclick="PTalClickSort(this)" class=clickable align=center><A><DIV>status</a></div></td>\
        <TD id=clickCol7 onclick="PTalClickSort(this)" class=clickable><A><DIV>city</a></div></td>\
        <TD id=clickCol4 onclick="PTalClickSort(this)" class=clickable><A><DIV>level</a></div></td>\
        <TD id=clickCol5 onclick="PTalClickSort(this)" class=clickable><A><DIV>coordinates</a></div></td>\
        <TD id=clickCol8 onclick="PTalClickSort(this)" class=clickable><A><DIV>distance</a></div></td>\
        <TD id=clickCol10 onclick="PTalClickSort(this)" class=clickable><A><DIV>estimated time</a></div></td>\
        <TD class=clickable><A><DIV>Last login</a></div></td></tr></thead>\
        <TBODY id=allBody style="background-color:#ffffff;"></tbody></table></div>';
      
    document.getElementById('allListOut').innerHTML = m; //style="top:670px; left:0px; position:absolute;
    document.getElementById('altInput').innerHTML = '<HR><TABLE width=100% cellpaddding=0><TR align=center>\
        <TD class=xtab>Show distance from: &nbsp; X: <INPUT size=2 type=text id=plyrX /> Y: <INPUT size=2 type=text id=plyrY /> &nbsp; or select city: <span id=dmcoords></span></td></tr></table>';
    document.getElementById('clickCol'+t.sortColNum).className = 'clickable clickableSel';

    t.reDisp();
    new CdispCityPicker ('plyrdcp', document.getElementById ('dmcoords'), true, t.eventCoords, 0).bindToXYboxes(document.getElementById('plyrX'), document.getElementById('plyrY'));
    
    document.getElementById('dmcoords').addEventListener ('click', function(){ 
    },false);	
    document.getElementById('idFindETASelect').disabled = false;
  },
  
  displayPlayer : function (allName,rslt){
    var t = Tabs.AllianceList;
    function alClickSort (e){
      var t = Tabs.AllianceList;
      var newColNum = e.id.substr(8);
      document.getElementById('clickCol'+t.sortColNum).className = 'clickable';
      e.className='clickable clickableSel';
      if (newColNum == t.sortColNum)
        t.sortDir *= -1;
      else
        t.sortColNum = newColNum;
      t.reDisp();
    }
    unsafeWindow.PTalClickSort = alClickSort;
    var m = '<STYLE>.clickable{background-color:#ddd; border:2px outset; border-color:#555; padding-left:5px; padding-right:5px}\
            .clickableSel{background-color:#ffffcc;}\
            .xxtab{background-color:none; padding-left:5px; padding-right:5px;} </style>\
            <DIV class=ptstat ><TABLE id=tabAllMembers cellpadding=0  width=100%><TR font-weight:bold"><TD class=xtab>Aliance: '+ allName +'</td>\
              <TD class=xtab width=80% align=center>Last Login: <SPAN id=lastlogin>'+  rslt.playerInfo.lastLogin+'</span></td><TD class=xtab align=right></td></tr></table></div>\
      <div style="max-height:470px; height:470px; overflow-y:auto;"><TABLE id=tabAllMembers align=center cellpadding=0 cellspacing=0><THEAD style="overflow-y:hidden;">\
      <TR style="font-weight:bold"><TD id=clickCol0 onclick="PTalClickSort(this)" class=clickable><A><DIV>player</div></a></td>\
        <TD id=clickCol1 onclick="PTalClickSort(this)" class=clickable align=center><A><DIV>might</a></div></td>\
        <TD id=clickCol3 onclick="PTalClickSort(this)" class=clickable><A><DIV>cities</a></div></td>\
        <TD id=clickCol2 onclick="PTalClickSort(this)" class=clickable align=center><A><DIV>Rank</a></div></td>\
        <TD id=clickCol9 onclick="PTalClickSort(this)" class=clickable align=center><A><DIV>status</a></div></td>\
        <TD id=clickCol7 onclick="PTalClickSort(this)" class=clickable><A><DIV>city</a></div></td>\
        <TD id=clickCol4 onclick="PTalClickSort(this)" class=clickable><A><DIV>level</a></div></td>\
        <TD id=clickCol5 onclick="PTalClickSort(this)" class=clickable><A><DIV>coordinates</a></div></td>\
        <TD id=clickCol8 onclick="PTalClickSort(this)" class=clickable><A><DIV>distance</a></div></td>\
        <TD id=clickCol10 onclick="PTalClickSort(this)" class=clickable><A><DIV>estimated time</a></div></td>\
		<TD class=clickable><A><DIV>last login n</a></div></td></tr></thead>\
      <TBODY id=allBody style="background-color:#ffffff;"></tbody></table></div>\
      <DIV  width:100%; style="top:670px; left:0px; position:absolute; background-color:#ffffff; border-top:1px solid; margin-top:8px; color:#700; font-weight:bold;">';
    document.getElementById('allListOut').innerHTML = m;  //style="top:670px; left:0px; position:absolute;
    document.getElementById('altInput').innerHTML = '<HR><TABLE width=100% cellpaddding=0><TR align=center>\
        <TD class=xtab>Show distance from: &nbsp; X: <INPUT size=2 type=text id=plyrX /> Y: <INPUT size=2 type=text id=plyrY /> &nbsp; or select city: <span id=dmcoords></span></td></tr></table>';
    document.getElementById('clickCol'+t.sortColNum).className = 'clickable clickableSel';
    t.reDisp();
    new CdispCityPicker ('plyrdcp', document.getElementById ('dmcoords'), true, t.eventCoords, 0).bindToXYboxes(document.getElementById('plyrX'), document.getElementById('plyrY'));
    document.getElementById('idFindETASelect').disabled = false;
  },
  
  eventCoords : function (city, x, y){
    var t = Tabs.AllianceList;
    var m = '';
    if (city != null)
      m = city.name +' ('+ city.x +','+ city.y +')';
    else
      m = x +','+ y;
    var distFrom = document.getElementById('distFrom');
    if (distFrom)
        distFrom.innerHTML = m;
    t.ModelCity=city;
    t.JumpCity(city.name);
    t.setDistances(x,y);
    t.setEta();
    t.reDisp();
  },

  eventGetMembers : function (aid){
    var t = Tabs.AllianceList;
    document.getElementById('allListOut').innerHTML = '<BR><BR><CENTER>looking ...</center>';
    t.fetchAllianceMemberList (aid, null, t.eventGotMemberList);
  },

  fetchAllianceMemberList : function (allianceId, allianceName, notify) {
    var t = Tabs.AllianceList;
    var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
    params.perPage = 100;
    if (allianceName)
      params.allianceName = allianceName;
    if (allianceId && allianceId != 0)
      params.allianceId = allianceId;
    new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/getUserLeaderboard.php" + unsafeWindow.g_ajaxsuffix, {
      method: "post",
      parameters: params,
      onSuccess: function (rslt) {
        notify (rslt);
      },
      onFailure: function (rslt) {
        notify ({errorMsg:'AJAX error'});
      },
    });
  },

  GetDataForMap : function (allianceId) {
    var t = Tabs.AllianceList;
    var params = uW.Object.clone(uW.g_ajaxparams);
    var Data=[];
    params.perPage = 100;
    params.allianceId = allianceId;
    new MyAjaxRequest(uW.g_ajaxpath + "ajax/getUserLeaderboard.php" + uW.g_ajaxsuffix, {
      method: "post",
      parameters: params,
      onSuccess: function (rslt) {
      	var city = '';
      	for (var i=0; i<rslt.results.length; i++) {
      		//alert(rslt.results[i].toSource());
      	    if (rslt.results[i]['userId'] !=0){
	      	    player = rslt.results[i]['cities'];
	      	    for (var ii=0; ii<player.length; ii++) 
	      			Data.push ({X:player[ii]['xCoord'],Y:player[ii]['yCoord']});
	    	}  	
        }
        if (Data != []) t.PaintDataOnMap(Data);
      },
      onFailure: function (rslt) {
        notify ({errorMsg:'AJAX error'});
      },
    });
  },
  
  PaintDataOnMap : function(Data){
  		var provMapCoordsA = {imgWidth:710, imgHeight:708, mapWidth:670, mapHeight:670, leftMargin:31, topMargin:19};  
  		var map = '<DIV id=ptAlliProvMap style="height:'+ provMapCoordsA.imgHeight +'px; width:'+ provMapCoordsA.imgWidth +'px; background-repeat:no-repeat; background-image:url(\''+ URL_PROVINCE_MAP +'\')"></div>';
  		document.getElementById('allListOut').innerHTML = map;
		var eMap =  document.getElementById('ptAlliProvMap');
		for (var cc=0; cc<Seed.cities.length; cc++) {
		    var city = Seed.cities;
		    var Xplot = parseInt((provMapCoordsA.mapWidth * parseInt(city[cc][2])) / 750);
		    var Yplot = parseInt((provMapCoordsA.mapHeight * parseInt(city[cc][3])) / 750);
		    var cf = document.createElement ('div');
		    cf.style.background = 'black';
		    cf.style.opacity = '1.0';
		    cf.style.position='relative';
		    cf.style.display='block';
		    cf.style.width='14px';
		    cf.style.height='16px';
		    cf.style.border='1px solid #fff';
		    cf.style.color = 'white';
		    cf.style.textAlign = 'center';
		    cf.style.top = (Yplot+provMapCoordsA.topMargin-(cc*16)-8) +'px';      
		    cf.style.left = (Xplot+provMapCoordsA.leftMargin-7) +'px';
		    cf.innerHTML = (cc+1) +'';
		    eMap.appendChild(cf);
		}

		for (var i=0;i<Data.length;i++) {
			var x = parseInt(Data[i]['X']);
			var y = parseInt(Data[i]['Y']);
  	        var xplot = parseInt((provMapCoordsA.mapWidth * x) / 750);
  	        var yplot = parseInt((provMapCoordsA.mapHeight * y) / 750);
  	    	var ce= document.createElement ('div');
  	    		ce.style.background = 'red';
  	    		ce.style.opacity = '1.0';
  	    		ce.style.position='relative';
  	    		ce.style.display='block';
  	    		ce.style.width='4px';
  	    		ce.style.height='4px';
  	    		ce.style.color = 'white';
  	    		ce.style.textAlign = 'center';
  	    	ce.style.top = (yplot+provMapCoordsA.topMargin -(4*i)-((Seed.cities.length)*18)) +'px';      
  	    	ce.style.left = (xplot+provMapCoordsA.leftMargin -2) +'px';
  	    	ce.innerHTML = '<DIV onclick="pbGotoMap('+ x +','+ y +')">&nbsp;</div>';
  	        eMap.appendChild(ce);
  	   }
  	   
  	   
  },
  

  fetchLeaderboard : function (uid, notify) {
    var t = Tabs.AllianceList;
    var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
    params.userId = uid;
    new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/getUserLeaderboard.php" + unsafeWindow.g_ajaxsuffix, {
      method: "post",
      parameters: params,
      onSuccess: function (rslt) {
        notify (rslt);
      },
      onFailure: function (rslt) {
        notify ({errorMsg:'AJAX error'});
      },
    });
  },

  fetchAllianceList : function (allianceName, myAid, notify) {   // at least 3 chars :)
    var t = Tabs.AllianceList;
    function combineResults (rsltA, rsltM, notify){
      if (!rsltA.ok){
        if (rsltA.msg.indexOf("There were no alliances with ")!=0 || !rsltM.ok){
          notify (rsltA);
          return;
        }
        rsltA.ok = true;
        rsltA.count = 0;
        rsltA.alliancesMatched = {};
      }
      if (rsltM.ok){
        rsltA.alliancesMatched['a'+rsltM.allianceInfo.allianceId] = {allianceId: rsltM.allianceInfo.allianceId, allianceName: rsltM.allianceInfo.allianceName,
              membersCount: rsltM.allianceInfo.members, relation: null, might: rsltM.allianceInfo.might, ranking: rsltM.allianceInfo.ranking};
        ++rsltA.count;
      }
      notify (rsltA);
    }
    var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
    params.allianceName = allianceName;
    new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/allianceGetSearchResults.php" + unsafeWindow.g_ajaxsuffix, {
      method: "post",
      parameters: params,
      onSuccess: function (rslt) {
        if (myAid!=null && myAid>0)
          t.fetchMyAllianceInfo  (function (r){ combineResults (rslt, r, notify)});
        else
          notify (rslt);
      },
      onFailure: function (rslt) {
        notify ({errorMsg:'AJAX error'});
      },
    });
  },

  fetchOtherAllianceInfo : function (pageNum, notify){    // as in alliance list, sorted by rank, 10 per page
    var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
    params.pageNo = pageNum;
    params.cityId = unsafeWindow.currentcityid;
    new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/allianceGetOtherInfo.php" + unsafeWindow.g_ajaxsuffix, {
      method: "post",
      parameters: params,
      onSuccess: function (rslt) {
        notify (rslt);
      },
      onFailure: function (rslt) {
        notify ({errorMsg:'AJAX error'});
      },
    });
  },

  fetchMyAllianceInfo : function (notify){
    var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
    new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/allianceGetInfo.php" + unsafeWindow.g_ajaxsuffix, {
      method: "post",
      parameters: params,
      onSuccess: function (rslt) {
        notify (rslt);
      },
      onFailure: function (rslt) {
        notify ({errorMsg:'AJAX error'});
      },
    });
  },

  fetchPlayerList : function (name, notify){  // at least 3 chars!! 
    var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
    params.searchName = name;
    params.subType = "ALLIANCE_INVITE";
    new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/searchPlayers.php" + unsafeWindow.g_ajaxsuffix, {
      method: "post",
      parameters: params,
      onSuccess: function (rslt) {
        notify (rslt);
      },
      onFailure: function (rslt) {
        notify ({errorMsg:'AJAX error'});
      },
    });
  },


  
  fetchPlayerInfo : function (uid, notify){
    var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
    params.uid = uid;
    new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/getUserGeneralInfo.php" + unsafeWindow.g_ajaxsuffix, {
      method: "post",
      parameters: params,
      onSuccess: function (rslt) {
        notify (rslt);
      },
      onFailure: function (rslt) {
        notify ({errorMsg:'AJAX error'});
      },
    });
  },
  
  fetchPlayerStatus : function (uidArray, notify){
    var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
    params.checkArr = uidArray.join(',');
    new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/getOnline.php" + unsafeWindow.g_ajaxsuffix, {
      method: "post",
      parameters: params,
      onSuccess: function (rslt) {
        notify (rslt);
      },
      onFailure: function (rslt) {
        notify ({errorMsg:'AJAX error'});
      },
    });
  },
  
  fetchPlayerLastLogin : function (uid, notify){
      var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
      params.pid = uid;
      new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/viewCourt.php" + unsafeWindow.g_ajaxsuffix, {
        method: "post",
        parameters: params,
        onSuccess: function (rslt) {
          notify (rslt);
        },
        onFailure: function (rslt) {
          notify ({errorMsg:'AJAX error'});
        },
      });
    },
    
    gotPlayerLastLogin : function (rslt, span){
        var t = Tabs.AllianceList;
        if (!rslt.ok){
          span.innerHTML = rslt.errorMsg;
          return;
        }
    
        var p = rslt.playerInfo;
        var lastLogin = rslt.playerInfo.lastLogin;
    
        if (lastLogin) {
          m = '<span style="color:black">Last login: '+lastLogin+'</span>';
        } else {
           m = '<span style="color:red">Not found login data: '+lastLogin+'</span>';
        }
        span.innerHTML = m + '';
      },

  ModelCity : {},

  estETA : function(dist) { // Need Relief Station Levels to estimate transport, reinf, or reassign times. 
    var t = Tabs.AllianceList;
    var ret={ETA:0,etaStr:'NA',friendETA:0,friendEtaStr:'NA'};    
    var cityID;
    if (dist <= 0) return ret;
    var EtaType = document.getElementById('idFindETASelect');
    var baseSpeedSel = EtaType.options[EtaType.selectedIndex].value;
    var m = baseSpeedSel.split(',');
    var horse = 0;
    var baseSpeed = 0;
    if(m) {
      horse = parseInt(m[0]);
      baseSpeed = parseInt(m[1]);
    }
    if (baseSpeed == 0) return ret;
    var mmLvl = parseInt(Seed.tech.tch11);//Magical Mapping
    var Speed = 0;
    if (horse){
      var hsLvl = parseInt(Seed.tech.tch12);//Alloy Horse Shoes
      Speed = baseSpeed * (1 + mmLvl/10.0) * (1 + hsLvl/20.0);
    }
    else {
      Speed = baseSpeed * (1 + mmLvl/10.0);
    }
    var gSpeed = 0;
    var estSec;
    if (Speed>0) {
      gSpeed = Speed/6000.0;//0.48333 mm=10, hs=9
      estSec = (parseFloat(dist)/gSpeed).toFixed(0);
    }
    ret.ETA = (parseInt((estSec+''))+30); 
    ret.etaStr = timestr (ret.ETA,1);
   if (t.ModelCity) {
      cityID = t.ModelCity.id;
      var building = getCityBuilding (cityID, 18);
      if (building) {
        fSpeed = Speed * (1 + parseInt(building.maxLevel)/2);
        gSpeed = fSpeed/6000;
        estSec = (dist/gSpeed).toFixed(0);
        ret.friendETA = parseInt((estSec+''))+30; 
        ret.friendEtaStr = timestr ((ret.friendETA+''),1);
      }
   }
    return ret;
  },
  
     JumpCity:function(city) {
   		var t = Tabs.AllianceList;
   		for (i=0;i<Seed.cities.length;i++) {
   			if (Seed.cities[i][1]==city) var cityNum=i;
   		}
   		cityNum++;
   		var obj = document.getElementById('citysel_'+cityNum);
	   	return t.ClickWin(window,obj,'click');
   },
   
   ClickWin:function(win,obj,evtName) {
   	var evt = win.document.createEvent("MouseEvents");
   	evt.initMouseEvent(evtName, true, true, win,
   		0, 0, 0, 0, 0, false, false, false, false, 0, null);
   	return !obj.dispatchEvent(evt);
   },
};
  

/****************************  Tower Tab  ******************************/
Tabs.tower = {
  tabOrder: 2,
  tabLabel: 'Tower',
  myDiv: null,
  generateIncomingFunc : null,
  fixTargetEnabled : false,
  secondTimer : null,
  soundPlaying : false,
  defMode : {},  
  soundRepeatTimer : null,
  soundStopTimer : null,
  towerMarches: [],
  Providers : {
	0: { 'country': "--country--", 'provider': "--provider--" },
        1: { 'country': "AUSTRALIA", 'provider': "T-Mobile" },
        2: { 'country': "AUSTRALIA", 'provider': "Optus Zoo" },
        3: { 'country': "AUSTRIA", 'provider': "T-Mobile" },
        4: { 'country': "BULGARIA", 'provider': "Mtel" },
        5: { 'country': "BULGARIA", 'provider': "Globul" },
        6: { 'country': "CANADA", 'provider': "Aliant" },
        7: { 'country': "CANADA", 'provider': "Bell Mobility" },
        8: { 'country': "CANADA", 'provider': "Fido" },
        9: { 'country': "CANADA", 'provider': "MTS Mobility" },
        10: { 'country': "CANADA", 'provider': "Rogers Wireless" },
        11: { 'country': "CANADA", 'provider': "Sasktel Mobility" },
        12: { 'country': "CANADA", 'provider': "Telus" },
        13: { 'country': "CANADA", 'provider': "Virgin Mobile" },
        14: { 'country': "CANADA", 'provider': "Presidents Choice" },
        15: { 'country': "GERMANY", 'provider': "T-Mobile" },
        16: { 'country': "GERMANY", 'provider': "Vodafone" },
        17: { 'country': "GERMANY", 'provider': "O2" },
        18: { 'country': "GERMANY", 'provider': "E-Plus" },
        19: { 'country': "ICELAND", 'provider': "OgVodafone" },
        20: { 'country': "ICELAND", 'provider': "Siminn" },
        21: { 'country': "INDIA", 'provider': "Andhra Pradesh AirTel" },
        22: { 'country': "INDIA", 'provider': "Andhra Pradesh Idea Cellular" },
        23: { 'country': "INDIA", 'provider': "Chennal Skycell Airtel" },
        24: { 'country': "INDIA", 'provider': "Chennel RPG Cellular" },
        25: { 'country': "INDIA", 'provider': "Delhi Airtel" },
        26: { 'country': "INDIA", 'provider': "Delhi Hutch" },
        27: { 'country': "INDIA", 'provider': "Gujarat Idea Cellular" },
        28: { 'country': "INDIA", 'provider': "Gujaret Airtel" },
        29: { 'country': "INDIA", 'provider': "Gujaret Celforce" },
        30: { 'country': "INDIA", 'provider': "Goa Airtel" },
        31: { 'country': "INDIA", 'provider': "Goa BPL Mobile" },
        32: { 'country': "INDIA", 'provider': "Goa Idea Cellular" },
        33: { 'country': "INDIA", 'provider': "Haryana Airtel" },
        34: { 'country': "INDIA", 'provider': "Haryana Escotel" },
        35: { 'country': "INDIA", 'provider': "Himachal Pradesh Airtel" },
        36: { 'country': "INDIA", 'provider': "Karnataka Airtel" },
        37: { 'country': "INDIA", 'provider': "Kerala Airtel" },
        38: { 'country': "INDIA", 'provider': "Kerala Escotel" },
        39: { 'country': "INDIA", 'provider': "Kerala BPL Mobile" },
        40: { 'country': "INDIA", 'provider': "Kolkata Airtel" },
        41: { 'country': "INDIA", 'provider': "Madhya Pradesh Airtel" },
        42: { 'country': "INDIA", 'provider': "Maharashtra Airtel" },
        43: { 'country': "INDIA", 'provider': "Maharashtra BPL Mobile" },
        44: { 'country': "INDIA", 'provider': "Maharashtra Idea Cellular" },
        45: { 'country': "INDIA", 'provider': "Mumbai Airtel" },
        46: { 'country': "INDIA", 'provider': "Mumbai BPL Mobile" },
        47: { 'country': "INDIA", 'provider': "Punjab Airtel" },
        48: { 'country': "INDIA", 'provider': "Pondicherry BPL Mobile" },
        49: { 'country': "INDIA", 'provider': "Tamil Nadu Airtel" },
        50: { 'country': "INDIA", 'provider': "Tamil Nadu BPL Mobile" },
        51: { 'country': "INDIA", 'provider': "Tamil Nadu Aircel" },
        52: { 'country': "INDIA", 'provider': "Uttar Pradesh West Escotel" },
        53: { 'country': "IRELAND", 'provider': "Meteor" },
        54: { 'country': "IRELAND", 'provider': "Meteor MMS" },
        55: { 'country': "ITALY", 'provider': "TIM" },
        56: { 'country': "ITALY", 'provider': "Vodafone" },
        57: { 'country': "JAPAN", 'provider': "AU by KDDI" },
        58: { 'country': "JAPAN", 'provider': "NTT DoCoMo" },
        59: { 'country': "JAPAN", 'provider': "Vodafone Chuugoku/Western" },
        60: { 'country': "JAPAN", 'provider': "Vodafone Hokkaido" },
        61: { 'country': "JAPAN", 'provider': "Vodafone Hokuriko/Central North" },
        62: { 'country': "JAPAN", 'provider': "Vodafone Kansai/West, including Osaka" },
        63: { 'country': "JAPAN", 'provider': "Vodafone Kanto/Koushin/East including Tokyo" },
        64: { 'country': "JAPAN", 'provider': "Vodafone Kyuushu/Okinawa" },
        65: { 'country': "JAPAN", 'provider': "Vodafone Shikoku" },
        66: { 'country': "JAPAN", 'provider': "Vodafone Touhoku/Niigata/North" },
        67: { 'country': "JAPAN", 'provider': "Vodafone Toukai/Central" },
        68: { 'country': "JAPAN", 'provider': "Willcom" },
        69: { 'country': "JAPAN", 'provider': "Willcom di" },
        70: { 'country': "JAPAN", 'provider': "Willcom dj" },
        71: { 'country': "JAPAN", 'provider': "Willcom dk" },
        72: { 'country': "NETHERLANDS", 'provider': "T-Mobile" },
        73: { 'country': "NETHERLANDS", 'provider': "Orange" },
        74: { 'country': "SINGAPORE", 'provider': "M1" },
        75: { 'country': "SOUTH AFRICA", 'provider': "Vodacom" },
        76: { 'country': "SPAIN", 'provider': "Telefonica Movistar" },
        77: { 'country': "SPAIN", 'provider': "Vodafone" },
        78: { 'country': "SWEDEN", 'provider': "Tele2" },
        79: { 'country': "UNITED STATES", 'provider': "Teleflip" },
        80: { 'country': "UNITED STATES", 'provider': "Alltel" },
        81: { 'country': "UNITED STATES", 'provider': "Ameritech" },
        82: { 'country': "UNITED STATES", 'provider': "ATT Wireless" },
        83: { 'country': "UNITED STATES", 'provider': "Bellsouth" },
        84: { 'country': "UNITED STATES", 'provider': "Boost" },
        85: { 'country': "UNITED STATES", 'provider': "CellularOne" },
        86: { 'country': "UNITED STATES", 'provider': "CellularOne MMS" },
        87: { 'country': "UNITED STATES", 'provider': "Cingular" },
        88: { 'country': "UNITED STATES", 'provider': "Edge Wireless" },
        89: { 'country': "UNITED STATES", 'provider': "Sprint PCS" },
        90: { 'country': "UNITED STATES", 'provider': "T-Mobile" },
        91: { 'country': "UNITED STATES", 'provider': "Metro PCS" },
        92: { 'country': "UNITED STATES", 'provider': "Nextel" },
        93: { 'country': "UNITED STATES", 'provider': "O2" },
        94: { 'country': "UNITED STATES", 'provider': "Orange" },
        95: { 'country': "UNITED STATES", 'provider': "Qwest" },
        96: { 'country': "UNITED STATES", 'provider': "Rogers Wireless" },
        97: { 'country': "UNITED STATES", 'provider': "Telus Mobility" },
        98: { 'country': "UNITED STATES", 'provider': "US Cellular" },
        99: { 'country': "UNITED STATES", 'provider': "Verizon" },
        100: { 'country': "UNITED STATES", 'provider': "Virgin Mobile" },
        101: { 'country': "UNITED KINGDOM", 'provider': "O2 1" },
        102: { 'country': "UNITED KINGDOM", 'provider': "O2 2" },
        103: { 'country': "UNITED KINGDOM", 'provider': "Orange" },
        104: { 'country': "UNITED KINGDOM", 'provider': "T-Mobile" },
        105: { 'country': "UNITED KINGDOM", 'provider': "Virgin Mobile" },
        106: { 'country': "UNITED KINGDOM", 'provider': "Vodafone" },
        107: { 'country': "BELGIUM", 'provider': "mobistar" },
        108: { 'country': "GERMANY", 'provider': "1und1" },
        109: { 'country': "UNITED STATES", 'provider': "MyCricket" },
        110: { 'country': "Philippines", 'provider': "Smart" },
        111: { 'country': "UNITED STATES", 'provider': "CellularSouth" },
        112: { 'country': "UNITED STATES", 'provider': "Viaero" },
        113: { 'country': "CANADA", 'provider': "Wind Mobile" }
    },

    init: function(div){
		var t = Tabs.tower;
        t.myDiv = div;
      
             AddTowerTab('stop sound', t.stopSoundAlerts, 'pbtowertab');

    if (GM_getValue ('towerMarches_'+getServerId()) != null)
      GM_deleteValue ('towerMarches_'+getServerId());   // remove deprecated data if it exists
    var m = '<DIV class=pbStat>WATCH TOWER</div><TABLE class=pbTab><TR align=center>';
	  for (var i=0; i<Cities.cities.length; i++)
      m += '<TD width=95><SPAN id=pbtacity_'+ i +'>' + Cities.cities[i].name + '</span></td>';
    m += '</tr><TR align=center>';
	  for (var cityId in Cities.byID)
               m += '<TD><INPUT type=submit id=pbtabut_'+ cityId +' value=""></td>';
	       m += '</tr><TR align=center>';
	  for (var cityId in Cities.byID)
	   m += '<TD><CENTER><INPUT id=pbattackqueue_' + cityId + ' type=submit value="A 0 | D 0"></center></td>';
    m += '</tr></table><BR><DIV><CENTER><INPUT id=pbSoundStop type=submit value="stop sound"></center></div><DIV id=pbSwfPlayer></div>';
    m += '<BR><DIV class=pbStat>SETTING</div><TABLE class=pbTab>\
    <tr><td align=left><INPUT id=pbcellenable type=checkbox '+ (Options.celltext.atext?'CHECKED ':'') +'/></td>\
    <td align=left>Text message on the phone incoming attack n : <INPUT id=pbnum1 type=text size=4 maxlength=4 value="'+ Options.celltext.num1 +'"  '+(Options.celltext.provider==0?'DISABLED':'')+'\>\
	&nbsp;<INPUT id=pbnum2 type=text size=3 maxlength=3 value="'+ Options.celltext.num2 +'"  '+(Options.celltext.provider==0?'DISABLED':'')+'\>\
&nbsp;<INPUT id=pbnum3 type=text size=4 maxlength=4 value="'+ Options.celltext.num3 +'"  '+(Options.celltext.provider==0?'DISABLED':'')+'\> <span style="color:#800; font-weight:bold">(Standard rates apply for text messages )</span></td></tr><tr><td></td>\
    <TD align=left>country: <select id="pbfrmcountry">';
    for (var i in t.Providers) {
       var ret=m.indexOf(t.Providers[i].country);
       if (ret==-1) {
         if (t.Providers[i].country==t.Providers[Options.celltext.provider].country) {
           m += '<option value="'+t.Providers[i].country+'" selected="selected">'+t.Providers[i].country+'</option>'; // Load Previous Provider Selection
         }
         else {
           m += '<option value="'+t.Providers[i].country+'">'+t.Providers[i].country+'</option>';
         }
       }
    }
    m += '</select>\
    <select id="pbfrmprovider" '+(Options.celltext.provider==0?'DISABLED':'')+'><option value=0 >--provider--</option>';
    for (var i in t.Providers) {
 if(t.Providers[i].country == t.Providers[Options.celltext.provider].country)
		if(Options.celltext.provider == i)
			m += '<option value="'+i+'" selected="selected">'+t.Providers[i].provider+'</option>'; // Load Previous Provider Selection
		else
           m += '<option value="'+i+'">'+t.Providers[i].provider+'</option>';
    }
    m += '</select></td></tr>\
		<TR><TD><INPUT id=pbalertEnable type=checkbox '+ (Options.alertConfig.aChat?'CHECKED ':'') +'/></td><TD>Check automatically attack in alliance chat.</td></tr>\
        <TR><TD></td><TD><TABLE cellpadding=0 cellspacing=0>\
		<TR><TD align=right>Standard message: &nbsp; </td><TD><INPUT id=pbalertPrefix type=text size=60 maxlength=120 value="'+ Options.alertConfig.aPrefix +'" /></td></tr>\
		<TR><TD align=right>scout alert: &nbsp; </td><TD><INPUT id=pbalertScout type=checkbox '+ (Options.alertConfig.scouting?'CHECKED ':'') +'/></td></tr>\
        <TR><TD align=right>Wild attack -alert: &nbsp; </td><TD><INPUT id=pbalertWild type=checkbox '+ (Options.alertConfig.wilds?'CHECKED ':'') +'/></td></tr>\
       <TR><TD align=right>Show defensive state: &nbsp; </td><TD><INPUT id=pbalertDefend type=checkbox '+ (Options.alertConfig.defend?'CHECKED ':'') +'/></td></tr>\
       <TR><TD align=right>Minimum of troops: &nbsp; </td><TD><INPUT id=pbalertTroops type=text size=7 value="'+ Options.alertConfig.minTroops +'" \> &nbsp; &nbsp; <span id=pbalerterr></span></td></tr>\
        </table></td></tr>\
		<TR><TD align=right><INPUT id=pbalertraid type=checkbox '+ (Options.alertConfig.raid?'CHECKED':'') +'/></td><TD>Stop RAID in case of attack.</td></tr>\
         <TR><TD><BR></td></tr>\
        <TR><TD><INPUT id=pbSoundEnable type=checkbox '+ (Options.alertSound.enabled?'CHECKED ':'') +'/></td><TD>Enable sound in case of attack or scouted</td></tr>\
        <TR><TD></td><TD><DIV id=pbLoadingSwf>Loading SWF player</div><DIV style="display:none" id=pbSoundOpts><TABLE cellpadding=0 cellspacing=0>\
            <TR><TD align=right>Sound file: &nbsp; </td><TD><INPUT id=pbsoundFile type=text size=55 maxlength=160 value="'+ Options.alertSound.soundUrl +'" \>\
             &nbsp; </td><TD><INPUT id=pbSoundLoad type=submit value=Load><INPUT id=pbSoundDefault type=submit value="Default"></td></tr>\
            <TR><TD align=right>volume: &nbsp; </td><TD><TABLE cellpadding=0 cellspacing=0 class=pbTab><TR valign=middle><TD><SPAN id=pbVolSlider></span></td><TD width=15></td><TD align=right id=pbVolOut>0</td></td></table></td><TD align=center><SPAN id=pbLoadStat>xx</span></td></tr>\
            <TR><TD align=right><INPUT id=pbSoundRepeat type=checkbox '+ (Options.alertSound.repeat?'CHECKED ':'') +'/></td><TD> repeat every <INPUT id=pbSoundEvery type=text size=2 maxlength=5 value="'+ Options.alertSound.repeatDelay +'"> minutes</td></tr>\
            <TR><TD></td><TD>sound for <INPUT id=pbSoundLength type=text size=3 maxlength=5 value="'+ Options.alertSound.playLength +'"> sgs</td></tr>\
            <TR><TD></td><TD><INPUT type=submit value="test" id=pbPlayNow></td></tr><td><tr><SPAN class=boldRed>If you want another sound different, just put the path of it and upload, but Default.\
			The format should be .mp3<br>Ej: C:PathToFile.mp3</spam></td></tr></table></div></td></tr>\
        </table><BR>';
    	t.myDiv.innerHTML = m;
    t.mss = new CmatSimpleSound(SWF_PLAYER_URL, null, {height:0, width:0}, t.e_swfLoaded, 'debug=n');
    t.mss.swfDebug = function (m){ logit ('SWF: '+ m)};
    t.mss.swfPlayComplete = t.e_soundFinished;
    t.mss.swfLoadComplete = t.e_soundFileLoaded;
    unsafeWindow.matSimpleSound01 = t.mss;   // let swf find it
    t.volSlider = new SliderBar (document.getElementById('pbVolSlider'), 200, 21, 0);
    t.volSlider.setChangeListener(t.e_volChanged);
    document.getElementById('pbPlayNow').addEventListener ('click', function (){t.playSound(false)}, false);
    document.getElementById('pbSoundStop').addEventListener ('click', t.stopSoundAlerts, false);
    document.getElementById('pbSoundRepeat').addEventListener ('change', function (e){Options.alertSound.repeat = e.target.checked}, false);
    document.getElementById('pbSoundEvery').addEventListener ('change', function (e){Options.alertSound.repeatDelay = e.target.value}, false);
    document.getElementById('pbSoundLength').addEventListener ('change', function (e){Options.alertSound.playLength = e.target.value}, false);
    document.getElementById('pbSoundEnable').addEventListener ('change', function (e){Options.alertSound.enabled = e.target.checked}, false);
    document.getElementById('pbcellenable').addEventListener ('change', function (e){Options.celltext.atext = e.target.checked;}, false);
    document.getElementById('pbSoundStop').disabled = true;
    document.getElementById('pbalertEnable').addEventListener ('change', t.e_alertOptChanged, false);
    document.getElementById('pbalertPrefix').addEventListener ('change', t.e_alertOptChanged, false);
    document.getElementById('pbalertScout').addEventListener ('change', t.e_alertOptChanged, false);
    document.getElementById('pbalertWild').addEventListener ('change', t.e_alertOptChanged, false);
    document.getElementById('pbalertDefend').addEventListener ('change', t.e_alertOptChanged, false);
    document.getElementById('pbalertTroops').addEventListener ('change', t.e_alertOptChanged, false);
    document.getElementById('pbfrmcountry').addEventListener ('change', t.setCountry, false);
    document.getElementById('pbfrmprovider').addEventListener ('change', t.setProvider, false);
    document.getElementById('pbnum1').addEventListener ('change', t.phonenum, false);
    document.getElementById('pbnum2').addEventListener ('change', t.phonenum, false);
    document.getElementById('pbnum3').addEventListener ('change', t.phonenum, false);
    document.getElementById('pbalertraid').addEventListener ('change', t.e_alertOptChanged, false);
    document.getElementById('pbsoundFile').addEventListener ('change', function (){
        Options.alertSound.soundUrl = document.getElementById('pbsoundFile').value;
        t.loadUrl (Options.alertSound.soundUrl);
      }, false);
    document.getElementById('pbSoundDefault').addEventListener ('click', function (){
        document.getElementById('pbsoundFile').value = DEFAULT_ALERT_SOUND_URL;
        Options.alertSound.soundUrl = DEFAULT_ALERT_SOUND_URL;
        t.loadUrl (DEFAULT_ALERT_SOUND_URL);
      }, false);
    for (var cityId in Cities.byID){
  	  var but = document.getElementById ('pbtabut_'+ cityId);
  	  addListener (but, cityId);
  	  t.defMode[cityId] =  parseInt(Seed.citystats["city" + cityId].gate);
  	  t.displayDefMode (cityId);
	  var btnNameT = 'pbattackqueue_' + cityId;
      addTowerEventListener(cityId, btnNameT);
	  }
    function addListener (but, i){
      but.addEventListener ('click', function (){t.butToggleDefMode(i)}, false);
    }
	function addTowerEventListener(cityId, name){
        document.getElementById(name).addEventListener('click', function(){
            t.showTowerIncoming(cityId);
        }, false);
    }	
    setInterval (t.eachSecond, 2000);
  },   
   
  loadUrl : function (url){
    var t = Tabs.tower;
    t.mss.load (1, url, true);
    document.getElementById('pbLoadStat').innerHTML = 'Loading';
  },

  phonenum : function() {
   Options.celltext.num1 = document.getElementById('pbnum1').value;
   Options.celltext.num2 = document.getElementById('pbnum2').value;
   Options.celltext.num3 = document.getElementById('pbnum3').value;
   saveOptions();
  },

  setCountry : function(){
    var t = Tabs.tower;
    var myselect=document.getElementById("pbfrmprovider");
	myselect.innerHTML = '<option value=0 >--provider--</option>';
	myselect.disabled = true;
    for (var i in t.Providers) {
     if (t.Providers[i].country == document.getElementById("pbfrmcountry").value){
		var addoption = document.createElement('option');
		addoption.value = i;
		addoption.text = t.Providers[i].provider;
      myselect.add(addoption, null) //add new option to end of "Providers"
     }
    }
	myselect.disabled = false;
   },

  setProvider : function(){
    var ddProvider = document.getElementById("pbfrmprovider").wrappedJSObject;
     Options.celltext.provider=ddProvider.options[ddProvider.selectedIndex].value;
	if(ddProvider.selectedIndex > 0){
		document.getElementById("pbnum1").disabled = false;
		document.getElementById("pbnum2").disabled = false;
		document.getElementById("pbnum3").disabled = false;
	} else {
		document.getElementById("pbnum1").disabled = true;
		document.getElementById("pbnum2").disabled = true;
		document.getElementById("pbnum3").disabled = true;
	}
   },

  e_swfLoaded : function (){
    var t = Tabs.tower;
    document.getElementById('pbLoadingSwf').style.display = 'none';
    document.getElementById('pbSoundOpts').style.display = 'inline';
    t.volSlider.setValue (Options.alertSound.volume/100);
    t.loadUrl (Options.alertSound.soundUrl);
    setTimeout (function (){t.mss.setVolume (1, Options.alertSound.volume);}, 500);
    if (Options.alertSound.alarmActive && Options.alertSound.expireTime>unixTime())   
      t.soundTheAlert();
  },
  
  e_alertOptChanged : function (){
    var t = Tabs.tower;
    Options.alertConfig.aChat = document.getElementById('pbalertEnable').checked;
    Options.alertConfig.aPrefix=document.getElementById('pbalertPrefix').value;      
    Options.alertConfig.scouting=document.getElementById('pbalertScout').checked;      
    Options.alertConfig.wilds=document.getElementById('pbalertWild').checked;
    Options.alertConfig.defend=document.getElementById('pbalertDefend').checked;
    Options.alertConfig.raid=document.getElementById('pbalertraid').checked;
    var mt = parseInt(document.getElementById('pbalertTroops').value);
    if (mt<1 || mt>120000){
      document.getElementById('pbalertTroops').value = Options.alertConfig.minTroops;
      document.getElementById('pbalerterr').innerHTML = '<font color=#600000><B>INVALID</b></font>';
      setTimeout (function (){document.getElementById('pbalerterr').innerHTML =''}, 2000);
      return;
    }
    Options.alertConfig.minTroops = mt;
	saveOptions();
  },
  
  e_volChanged : function (val){
    var t = Tabs.tower;
    document.getElementById('pbVolOut').innerHTML = parseInt(val*100);
    Options.alertSound.volume = parseInt(val*100);
    t.mss.setVolume (1, Options.alertSound.volume);
  },
  
  butToggleDefMode : function (cityId){
    var t = Tabs.tower;
    var mode = 1;
    if (Seed.citystats["city" + cityId].gate != 0)
      mode = 0;
    t.ajaxSetDefMode (cityId, mode, function (newMode){
        t.defMode[cityId] = newMode;
        t.displayDefMode (cityId);
      });
  },
      
  displayDefMode : function (cityId){
    var t = Tabs.tower;
    var but = document.getElementById('pbtabut_'+ cityId);
    if (t.defMode[cityId]){
      but.className = 'pbDefButOn';
      but.value = 'Def = ON';  
    } else {
      but.className = 'pbDefButOff';
      but.value = 'Def = OFF';  
    }  
  },
    
  eachSecond : function (){
    var t = Tabs.tower;
	for (var cityId in Cities.byID){
      if (Seed.citystats["city" + cityId].gate != t.defMode[cityId]){     // user changed def mode
        t.defMode[cityId] = Seed.citystats["city"+ cityId].gate;
        t.displayDefMode (cityId);
      }
	  Options.alertConfig.raidautoswitch[cityId] = false;
    }
  	var now = unixTime();
	var incomming = false;
    if (matTypeof(Seed.queue_atkinc) != 'array'){
      for (var k in Seed.queue_atkinc){   // check each incoming march
        var m = Seed.queue_atkinc[k];
        if ((m.marchType==3 || m.marchType==4) && parseIntNan(m.arrivalTime)>now){
          if (m.departureTime > Options.alertConfig.lastAttack){
            Options.alertConfig.lastAttack = m.departureTime;  
            t.newIncoming (m);
          }
		  incomming = true;
		  if (Options.alertConfig.raid){
			Options.alertConfig.raidautoswitch[m.toCityId] = true;
		  }
        }
      }
    }
    if (Options.alertSound.alarmActive && (now > Options.alertSound.expireTime))
      t.stopSoundAlerts();

        t.towerMarches = [];
        for (var i = 0; i < Cities.cities.length; i++) {
            var cId = Cities.cities[i].id;
            t['attackCount_' + cId] = 0;
            t['scoutCount_' + cId] = 0;
        }
        if (matTypeof(Seed.queue_atkinc) != 'array') {
            for (var k in Seed.queue_atkinc) {
                var m = Seed.queue_atkinc[k];
                if ((m.marchType == 3 || m.marchType == 4) && parseIntNan(m.arrivalTime) > now) {
                    t.handleTowerData(m);

                }
            }
        }
        for (var i = 0; i < Cities.cities.length; i++) {
            var cId = Cities.cities[i].id;
            document.getElementById('pbattackqueue_' + cId).value = 'A ' + t['attackCount_' + cId] + ' | S ' + t['scoutCount_' + cId];
        }
  },   
  
  e_soundFinished : function (chan){ // called by SWF when sound finishes playing
    var t = Tabs.tower;
    if (chan != 1)
      return;
    if (!Options.alertSound.alarmActive){
      document.getElementById('pbSoundStop').disabled = true;
    }
  },

  e_soundFileLoaded : function (chan, isError){ // called by SWF when sound file finishes loading
    if (chan != 1)
      return;
    if (isError)  
      document.getElementById('pbLoadStat').innerHTML = '<FONT COLOR=#660000>ERROR:You must reload the file by default, or change the sound http</font>!';
    else
      document.getElementById('pbLoadStat').innerHTML = 'Loaded';
  },  
  
  playSound : function (doRepeats){
    var t = Tabs.tower;
    document.getElementById('pbSoundStop').disabled = false;
    clearTimeout (t.soundStopTimer);
    clearTimeout (t.soundRepeatTimer);
    t.mss.play (1, 0);
    t.soundStopTimer = setTimeout (function(){t.mss.stop(1); t.e_soundFinished(1)}, Options.alertSound.playLength*1000);
    if (doRepeats && Options.alertSound.repeat)
      t.soundRepeatTimer = setTimeout (function (){t.playSound(true)}, Options.alertSound.repeatDelay*60000);
    else
      Options.alertSound.alarmActive = false;
  },
        
  soundTheAlert : function (){
    var t = Tabs.tower;
    Options.alertSound.alarmActive = true;
    t.playSound(true);
  },
     
  stopSoundAlerts : function (){
    var t = Tabs.tower;
    t.mss.stop (1);
    clearTimeout (t.soundStopTimer);
    clearTimeout (t.soundRepeatTimer);
    document.getElementById('pbSoundStop').disabled = true;
    Options.alertSound.alarmActive = false;
    Options.alertSound.expireTime = 0;
  },

  newIncoming : function (m){
    var t = Tabs.tower;
    t.postToChat (m);
  },
  
  sendalert : function (m){
    var t = Tabs.tower;
    var now = unixTime();
    if (Options.celltext.atext)
      t.postToCell (m);
    if (Options.alertSound.enabled){
      t.soundTheAlert(m);
      if (m.arrivalTime > Options.alertSound.expireTime)
        Options.alertSound.expireTime = m.arrivalTime;
    }
	if (Options.alertConfig.raid){
		Tabs.Raid.StopCityRaids(m.toCityId);
		Options.alertConfig.raidautoswitch[m.toCityId] = true;
	}  
  },

  ajaxSetDefMode : function (cityId, state, notify){
		var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
		params.cid = cityId;
		params.state = state;
		new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/gate.php" + unsafeWindow.g_ajaxsuffix, {
			method: "post",
			parameters: params,
			onSuccess: function (rslt) {
				if (rslt.ok) {
					Seed.citystats["city" + cityId].gate = state;
					notify (state);
				}
			},
			onFailure: function () {
			}
		})
  },
  
  onUnload : function (){
  },

  postToCell : function (m){
    var t = Tabs.tower;
    var data = {};
    if (m.marchType == null)      // bogus march (returning scouts)
      return;
    if (m.marchType == 3){
      if (!Options.alertConfig.scouting)
        return;
      data.atkType = 'scout';
    } else if (m.marchType == 4){
      data.atkType = 'atk';
    } else {
      return;
    }
    var city = Cities.byID[m.toCityId];
    if ( city.tileId == m.toTileId )
      data.target = 'city ('+ city.x +','+ city.y+')';
    else {
      if (!Options.alertConfig.wilds)
        return;
      data.target = 'wild';
      for (k in Seed.wilderness['city'+m.toCityId]){
        if (Seed.wilderness['city'+m.toCityId][k].tileId == m.toTileId){
          data.target += Seed.wilderness['city'+m.toCityId][k].xCoord +','+ Seed.wilderness['city'+m.toCityId][k].yCoord;
          break;
        }
      }
    }
    if (Seed.players['u'+m.pid])
      data.who = Seed.players['u'+m.pid].n;
    else if (m.players && m.players['u'+m.pid])
      data.who = m.players['u'+m.pid].n;
    else
      data.who = 'Unknown';
    if (m.fromXCoord)
      data.who += m.fromXCoord +','+ m.fromYCoord;
     data.arrival = unsafeWindow.timestr(parseInt(m.arrivalTime - unixTime()));
    var totTroops = 0;
    data.totTroops = ' '
    for (k in m.unts){
      var uid = parseInt(k.substr (1));
      data.totTroops += m.unts[k] +' '+ unsafeWindow.unitcost['unt'+uid][0] +', ';
      totTroops += m.unts[k];
    }
    if (totTroops < Options.alertConfig.minTroops)
      return;
    if ( city.tileId == m.toTileId ){
      var emb = getCityBuilding(m.toCityId, 8);
      if (emb.count > 0){
        var availSlots = emb.maxLevel;
        for (k in Seed.queue_atkinc){
          if (Seed.queue_atkinc[k].marchType==2 && Seed.queue_atkinc[k].toCityId==m.toCityId && Cities.byID[Seed.queue_atkinc[k].fromCityId]==null){
            --availSlots;
          }
        }
        data.embassy = 'EMB '+ availSlots +'of'+ emb.maxLevel;
        if (t.defMode[m.toCityId] == 0 && Options.alertConfig.defend==true)
        {
            data.stat = 'sanctuary';
        }
        if (t.defMode[m.toCityId] == 1 && Options.alertConfig.defend==true)
        {
            data.stat = 'DEFENDING';
        }
      }
    }
    data.provider = Options.celltext.provider;
    data.num1 = Options.celltext.num1;
    data.num2 = Options.celltext.num2;
    data.num3 = Options.celltext.num3;
    data.serverId = getServerId();
    data.player = Seed.player['name'];
    data.city = city.name;

  GM_xmlhttpRequest({
    method: 'POST',
    url: 'http://hs151.digitalweb.net/index.php',
	headers: {
		'Content-Type': 'application/x-www-form-urlencoded; charset=UTF-8',
    },
	data: implodeUrlArgs(data),

	})
  },
  
  postToChat : function (m){
	var t = Tabs.tower;
    if (DEBUG_TRACE) logit ("checkTower(): INCOMING at "+ unixTime()  +": \n"+ inspect (m, 8, 1));
    if (m.marchType == null)      // bogus march (returning scouts)
      return;
    if (ENABLE_TEST_TAB) Tabs.Test.addDiv ("Incoming!<BR><PRE style='margin:0px;'>" + inspect (m, 8, 1) +'</pre>');
    if (m.marchType == 3){
      if (!Options.alertConfig.scouting)
        return;
      atkType = 'Scouted';	  
    } else if (m.marchType == 4){
      atkType = 'ATTACKED';
    } else {
      return;
         }
    var target, atkType, who;
    var city = Cities.byID[m.toCityId];
    var cityNames = Cities.byID[m.toCityId].name;
	if ( city.tileId == m.toTileId ){
            target = 'city '+ cityNames + 'in ('+ city.x +','+ city.y + ')';
        }
        else {
      if (!Options.alertConfig.wilds)
        return;
      target = 'wild';
      for (k in Seed.wilderness['city'+m.toCityId]){
        if (Seed.wilderness['city'+m.toCityId][k].tileId == m.toTileId){
          target += ' in ('+ Seed.wilderness['city'+m.toCityId][k].xCoord +','+ Seed.wilderness['city'+m.toCityId][k].yCoord + ')';
          break;
        }
      }
    }
    if (Seed.players['u'+m.pid])
      who = Seed.players['u'+m.pid].n;
    else if (m.players && m.players['u'+m.pid])
      who = m.players['u'+m.pid].n;
    else
      who = 'Unknown';
    if (m.fromXCoord)
	who += ' desde ('+ m.fromXCoord +','+ m.fromYCoord + ')';
        who += ' ('+getDiplomacy(m.aid)+')';
        var msg = Options.alertConfig.aPrefix +' ';
	if(m.marchStatus == 9)
	msg += 'El '+ atkType +' in my '+ target +' by '+ who +' has been returned.';
	else
    	msg += 'my '+ target +' being '+ atkType +' by '+ who +' Troops (coming in'+ unsafeWindow.timestr(parseInt(m.arrivalTime - unixTime())) +') : ';
     var totTroops = 0;
    for (k in m.unts){
      var uid = parseInt(k.substr (1));
      msg += m.unts[k] +' '+ unsafeWindow.unitcost['unt'+uid][0] +', ';
      totTroops += m.unts[k];
    }
    if (totTroops < Options.alertConfig.minTroops)
      return;
    msg = msg.slice (0, -2);
    msg += '.';
    if ( city.tileId == m.toTileId ){
      var emb = getCityBuilding(m.toCityId, 8);
      if (emb.count == 0)
        msg += ' My embassy was not built in this realm. Do not attempt to strengthen.';
      else {
        var availSlots = emb.maxLevel;
        for (k in Seed.queue_atkinc){
          if (Seed.queue_atkinc[k].marchType==2
            && Seed.queue_atkinc[k].toCityId==m.toCityId)
          {
            --availSlots;
          }
        }
      	msg += ' My embassy is '+ availSlots +'slots free '+ emb.maxLevel +'slots available.';
	if (t.defMode[m.toCityId] == 0 && Options.alertConfig.defend==true)
        {
            msg+= ' My troops are not DEFENDING !';
        }
        if (t.defMode[m.toCityId] == 1 && Options.alertConfig.defend==true)
        {
            msg+= ' My troops are DEFENDING!';
        }
            msg+= ' My levels of research are: Fl Lv' + parseInt(Seed.tech.tch13)
             + ', HP Lv'+ parseInt(Seed.tech.tch15)
             + ', PE Lv'+ parseInt(Seed.tech.tch8)
             + ', MA Lv'+ parseInt(Seed.tech.tch9)
             + ', MM Lv'+ parseInt(Seed.tech.tch11)
             + ', AH Lv'+ parseInt(Seed.tech.tch12);
	  }
    }
	t.sendalert(m);
    if (!Options.alertConfig.aChat) return;
	if (ENABLE_TEST_TAB) Tabs.Test.addDiv (msg);
    if (SEND_ALERT_AS_WHISPER)
      sendChat ("/"+ Seed.player.name +' '+ msg);    // Whisper to myself
    else
		sendChat ("/a "+  msg);                        // Alliance chat
	},
	      handleTowerData: function(m){
        var t = Tabs.tower;
        var now = unixTime();
        var target, atkType, who, attackermight, allianceId, allianceName, diplomacy;
        var city = Cities.byID[m.toCityId];

        if (DEBUG_TRACE)
            logit("checkTower(): They arrive in" + unixTime() + ": \n" + inspect(m, 8, 1));

        //ATKTYPE
        if (m.marchType == 3) {
            atkType = 'Scouted';
            t['scoutCount_' + m.toCityId]++;
        }
        else
            if (m.marchType == 4) {
                atkType = 'attacked';
                t['attackCount_' + m.toCityId]++;
            }
            else {
                return;
            }
        //TARGET
        if (city.tileId == m.toTileId)
            target = 'city ' + city.x + ',' + city.y;
        else {
            target = 'wild';
            for (k in Seed.wilderness['city' + m.toCityId]) {
                if (Seed.wilderness['city' + m.toCityId][k].tileId == m.toTileId) {
                    target += ' in ' + Seed.wilderness['city' + m.toCityId][k].xCoord + ',' + Seed.wilderness['city' + m.toCityId][k].yCoord;
                    break;
                }
            }
        }

        //CITYNAME
        var cityName = Cities.byID[m.toCityId].name;
        
        //TROOPS
        var units = [];
        for (i = 0; i < 13; i++)
            units[i] = 0;
        for (k in m.unts) {
            var uid = parseInt(k.substr(1));
            if (unsafeWindow.unitcost['unt' + uid][0] == 'SupplyTroop.')
                units[1] = m.unts[k];
            if (unsafeWindow.unitcost['unt' + uid][0] == 'Militiaman')
                units[2] = m.unts[k];
            if (unsafeWindow.unitcost['unt' + uid][0] == 'Scout')
                units[3] = m.unts[k];
            if (unsafeWindow.unitcost['unt' + uid][0] == 'Pikeman')
                units[4] = m.unts[k];
            if (unsafeWindow.unitcost['unt' + uid][0] == 'Swordsman')
                units[5] = m.unts[k];
            if (unsafeWindow.unitcost['unt' + uid][0] == 'archers')
                units[6] = m.unts[k];
            if (unsafeWindow.unitcost['unt' + uid][0] == 'L.CAV')
                units[7] = m.unts[k];
            if (unsafeWindow.unitcost['unt' + uid][0] == 'H.CAV')
                units[8] = m.unts[k];
            if (unsafeWindow.unitcost['unt' + uid][0] == 'SupplyWagon.')
                units[9] = m.unts[k];
            if (unsafeWindow.unitcost['unt' + uid][0] == 'Ballesta')
                units[10] = m.unts[k];
            if (unsafeWindow.unitcost['unt' + uid][0] == 'BatteringRam')
                units[11] = m.unts[k];
            if (unsafeWindow.unitcost['unt' + uid][0] == 'Catapult')
                units[12] = m.unts[k];
        }
        //ATTACKERS INFORMATION
        if (Seed.players['u' + m.pid]) {
            who = Seed.players['u' + m.pid].n;
            attackermight = Seed.players['u' + m.pid].m;
            allianceId = Seed.players['u' + m.pid].a;
            allianceName = Seed.allianceNames[allianceId];
            diplomacy = getDiplomacy(allianceId);
        }
        else
            if (m.players && m.players['u' + m.pid]) {
                who = m.players['u' + m.pid].n;
                attackermight = parseInt(m.players['u' + m.pid].m);
                allianceId = 'a' + m.players['u' + m.pid].a;
                allianceName = Seed.allianceNames[allianceId];
                diplomacy = getDiplomacy(allianceId);
            }
            else {
                who = 'n.A.';
                attackermight = 'n.A.';
                allianceId = 'n.A.';
                allianceName = 'n.A.';
                diplomacy = 'n.A.';
            }
		//SOURCE
        if (m.fromXCoord)
            var source = m.fromXCoord + ',' + m.fromYCoord;
        else
            var source = 'n.A.';
        
        var arrivingDatetime = new Date();
        arrivingDatetime.setTime(m.arrivalTime * 1000);
        var count = t.towerMarches.length + 1;
        t.towerMarches[count] = {
            added: now,
            cityId: m.toCityId,
            target: target,
            arrival: parseIntNan(m.arrivalTime),
            atkType: atkType,
            who: who,
            attackermight: attackermight,
            allianceName: allianceName,
            diplomacy: diplomacy,
            rtime: unsafeWindow.timestr(parseInt(m.arrivalTime - unixTime())),
            arrivingDatetime: arrivingDatetime,
			source:source,
            units: units,
        };
    },

    showTowerIncoming: function(cityId){
        var t = Tabs.tower;
        var popTowerIncoming = null;
        var cityName = Tabs.build.getCityNameById(cityId);
        
        if (t.popTowerIncoming == null) {
            t.popTowerIncoming = new CPopup('pbtower_' + cityId, 0, 0, 750, 500, true, function() {clearTimeout (t.timer);});
        }
        t.popTowerIncoming.show(false);
        var m = '<DIV style="max-height:460px; height:460px; overflow-y:auto"><TABLE align=center cellpadding=0 cellspacing=0 width=100% class="pbTabPad" id="pbCityTowerContent">';
        t.popTowerIncoming.getMainDiv().innerHTML = '</table></div>' + m;
        t.popTowerIncoming.getTopDiv().innerHTML = '<div class=showBadged><center><TD width="200px"><B>Report of the tower ' + cityName +'</b></td></center></div>';
        t.addCityData2Pop(cityId);                     
        t.popTowerIncoming.show(true);
		clearTimeout (t.timer);
		t.timer = setTimeout (function() {t.showTowerIncoming(cityId)}, 5000);        
    },

    addCityData2Pop: function(cityId){
        var t = Tabs.tower;
        var rownum = 0;
        var names = ['SupplyTroop.', 'Militiaman.', 'Scout.', 'Pikeman.', 'Swordsman.', 'Archer.', 'cav.', 'H.cav', 'SupplyWagon.', 'Ballista.', 'Rams.', 'Catapult.'];
        enc = {};
        numSlots = 0;
        var row = document.getElementById('pbCityTowerContent').innerHTML = "";
        if (matTypeof(Seed.queue_atkinc) != 'array') {
            for (k in Seed.queue_atkinc) {
                march = Seed.queue_atkinc[k];
                if (march.marchType == 2) {
                    ++numSlots;
                    city = march.toCityId;
                    from = march.fromPlayerId;
					if (!enc[city])
                        enc[city] = {};
                    if (!enc[city][from])
                        enc[city][from] = [];
                    k = [];
                    k[0] = parseInt(march.knightCombat);
                    for (i = 1; i < 13; i++) {
                        if (Options.encRemaining)
                            k[i] = parseInt(march['unit' + i + 'Return']);
                        else
                            k[i] = parseInt(march['unit' + i + 'Count']);
                    }
					k[14] = parseInt(march.marchStatus);
					var now = unixTime();
					k[15] = parseInt(march.destinationUnixTime) - now;
                    enc[city][from].push(k);
                }
            }
        }
        var s1 = '';
		var s2 = '';
		var s3 = '';
		var tot = [];
        var atk = [];
        for (i = 0; i < 13; i++) {
            tot[i] = 0;
            atk[i] = 0;
        }

            s1 += '<STYLE> .tot{background:#f0e0f8;} .city{background:#ffffaa;} .attack{background:#FF9999;} .own{background:#66FF66;}</style>';
            s1 += '<TABLE cellspacing=0 width=100%><TR align=right><TD align=center width=16%></td>';
            
            for (k = 0; k < names.length; k++)
                s1 += '<TD width=7%><B>' + names[k] + '</b></td>';
            s1 += '</tr>';
            dest = cityId;
            if (enc[dest]) {
                for (p in enc[dest]) {
                    try {
                        player = Seed.players['u' + p].n;
                    }
                    catch (err) {
                        player = '???';
                    }
                    for (m = 0; m < enc[dest][p].length; m++) {
                        /*knight = '';
                        if (enc[dest][p][m][0] > 0)
                            knight = ' (' + enc[dest][p][m][0] + ')';
						*/
						status = '';
                        if (enc[dest][p][m][14] == 1) {
						    status = ' (' + timestr(enc[dest][p][m][15]) + ')';	
							if (enc[dest][p][m][15] < 0)
								status = ' (enc)';	
							else
								 status = ' (' + timestr(enc[dest][p][m][15]) + ')';	
						}
						if (enc[dest][p][m][14] == 2) {
						    status = ' (enc)';	
						}

                        s1 += '<TR align=right><TD align=left class="city">' + player + status +'</td>'
                        for (i = 1; i < 13; i++) {
                            num = enc[dest][p][m][i];
                            s1 += '<TD class="city">' + num + '</td>';
                            tot[i] += num;
                        }
                        //s1 += '<TD><INPUT id=sendhome_' + numSlots + ' type=submit value="Home" style="border:1px solid black; background-color:red;"></td></tr>';
                    }
                }
            } else {
                s1 += '<TR align=right><TD align=left class="city"><B>reinforcement:</b></td>'
                for (i = 1; i < 13; i++) {
                    s1 += '<TD class="city">0</td>';
                }
                
            }
			s1 += '<TR align=right><TD colspan=14><BR></tr>';
            s1 += '<TR align=right><TD class="own" align=left><B>own troops:</b></td>';
            //OWNTROOPS
            var ownTroops = "";
            for (r = 1; r < 13; r++) {
                cityString = 'city' + cityId;
                num = parseInt(Seed.units[cityString]['unt' + r]);
                s1 += '<TD class="own">' + num + '</td>';
                tot[r] += num;
            }
            s1 += '<TD class="city"></td><TR><TD colspan=14><BR></td></tr><TR align=right><TD class="tot" align=left><B>defend:</b></td>';
            for (i = 1; i < 13; i++)
                s1 += '<TD class="tot">' + tot[i] + '</td>';      
			s3 += '</tr></table>';
                s3 += '<TD class="city"></td><TR><TD colspan=14><BR></td></tr><TR align=right><TD class="tot" align=left><B>incoming attacks:</b></td>';
        var names = ['suppy troop.', 'Militiaman.', 'Scout.', 'Pikeman.', 'Swordsman.', 'Archers.', 'cav.', 'H.cav', 'supply wagon.', 'Balli.', 'ram.', 'Catap.'];
        if (t.towerMarches.length > 0) {
            for (k in t.towerMarches) {
                if (typeof t.towerMarches[k].atkType != 'no definido') {
                    if (t.towerMarches[k].cityId == cityId) {
                        s3 += '<TABLE cellspacing=0 width=100%><TR>';
                    if (t.towerMarches[k].atkType == 'atacado') {
                        s3 += '<TD rowspan=2 width=5%><B><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_4_30.jpg?6545"></b></td>';
                        }
                        else
                            if (t.towerMarches[k].atkType == 'explorado') {
                                s3 += '<TD rowspan=2 width=5%><B><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_3_30.jpg?6545"></b></td>';
                            }
                        s3 += '<TD width=15%  ><B>Location</b></td>';
                        s3 += '<TD width=15%  ><B>name</b></td>';
						s3 += '<TD width=10%><B>Source: </b></td><TD width=10%>' + t.towerMarches[k].source + '</td>';
                        s3 += '<TD width=10%><B>might: </b></td><TD width=10%>' + t.towerMarches[k].attackermight + '</td>';
                        s3 += '<TD width=10%><B>alliance: </b></td><TD width=10%>' + t.towerMarches[k].allianceName + '</td>';
                        s3 += '<TD width=10%><B>status: </b></td><TD width=10%>' + t.towerMarches[k].diplomacy + '</td></tr>';
                        s3 += '<TR><TD width=10%  >' + t.towerMarches[k].target + '</td>';
                        s3 += '<TD  >' + t.towerMarches[k].who + '</td>';
                        s3 += '<TD><B>remaining: </b></td><TD width=10%>' + t.towerMarches[k].rtime + '</td>';
                        s3 += '<TD><B>arrival: </b></td><TD  colspan=5 width=10%>' + t.towerMarches[k].arrivingDatetime + '</td></tr>';
                        s3 += '</tr></table>';
                        s3 += '<TABLE cellspacing=0 width=100%><TR align=right><TD align=left width=16%></td>';
                        for (n = 0; n < names.length; n++)
                            s3 += '<TD width=7%><B>' + names[n] + '</b></td>';
                        s3 += '</tr><TR align=right><TD class="attack" align=left><B>Units:</td>';
                        for (u = 1; u < 13; u++) {
                            num = t.towerMarches[k].units[u];
                            s3 += '<TD class="attack">' + num + '</td>';
                            atk[u] += parseInt(num);
                        }
						s3 += '</tr></table>';
                    }
                }
                
            }
        }
	s2 += '<TR><TD colspan=14><BR></td></tr><TR align=right><TD class="attack" align=left><B>attackers:</b></td>';
        for (a = 1; a < 13; a++)
        s2 += '<TD class="attack" width=7%>' + atk[a] + '</td>';
	var html = s1 + s2 + s3;
        document.getElementById('pbCityTowerContent').innerHTML = html;
    },
    sendReinforcmentHome: function(){ //FUNCTION NOT IN USE YET BUT SOON :-)
        //mid, cid, fromUid, fromCid, upkeep
        var params = Object.clone(g_ajaxparams);
        params.mid = mid;
        params.cid = cid;
        params.fromUid = fromUid;
        params.fromCid = fromCid;
        new Ajax.Request(g_ajaxpath + "ajax/kickoutReinforcements.php" + g_ajaxsuffix, {
            method: "post",
            parameters: params,
            onSuccess: function(transport){
                var rslt = eval("(" + transport.responseText + ")");
                if (rslt.ok) {
                    Modal.showAlert(g_js_strings.kickout_allies.troopshome);
                    seed.resources["city" + currentcityid].rec1[3] = parseInt(seed.resources["city" + currentcityid].rec1[3]) - upkeep;
                    if (parseInt(fromUid) == parseInt(tvuid)) {
                        var curmarch = seed.queue_atkp["city" + fromCid]["m" + mid];
                        var marchtime = Math.abs(parseInt(curmarch.destinationUnixTime) - parseInt(curmarch.eventUnixTime));
                        curmarch.returnUnixTime = unixTime() + marchtime;
                        curmarch.marchStatus = 8
                    }
                    delete seed.queue_atkinc["m" + mid]
                }
                else {
                    Modal.showAlert(printLocalError((rslt.error_code || null), (rslt.msg || null), (rslt.feedback || null)))
                }
            },
            onFailure: function(){
            }
        })
    },
            show : function (){
            },
  
            hide : function (){
            },
}

/****************************  Build Tab *********************************************************
TODO:
	 visu directly in the game of build queue elements
	 <span class="leveltag" style="left:60px;">10</span>
	 more todos within the code
 */
Tabs.build = {
    tabOrder: 4,
    tabLabel: 'Build',
    myDiv: null,
    timer: null,
    buildTab: null,
    koc_buildslot: null,
    currentBuildMode: null,
    buildStates: [],
	loaded_bQ: [],
	lbQ: [],

    init: function(div){
        var t = Tabs.build;
        t.myDiv = div;
        t.koc_buildslot = unsafeWindow.buildslot; //save original koc function
        t.currentBuildMode = "build";
		t.buildStates = {
            running: false,
			help: false,
        };
        t.readBuildStates();
        for (var i = 0; i < Cities.cities.length; i++) {
            t["bQ_" + Cities.cities[i].id] = JSON2.parse(GM_getValue('bQ_' + getServerId() + '_' + Cities.cities[i].id, '[]'));
			if (typeof t["bQ_" + Cities.cities[i].id] == 'undefined' || (t["bQ_" + Cities.cities[i].id]) == "") {
				t["bQ_" + Cities.cities[i].id] = [];
			}
        }

        var m = '<DIV id=pbBuildDivF class=pbStat>Build Functions</div><TABLE id=pbbuildfunctions width=100% height=0% class=pbTab><TR>';
        if (t.buildStates.running == false) {
            m += '<TD><INPUT id=pbBuildRunning type=submit value="Auto Build = OFF"></td>';
		updatebotbutton('Build-OFF', 'pbbuildtab');
        }
        else {
            m += '<TD><INPUT id=pbBuildRunning type=submit value="Auto Build = ON"></td>';
		updatebotbutton('Build-ON', 'pbbuildtab');
        }
		m += '<TD><INPUT id=pbBuildMode type=submit value="Modo Build = OFF"></td>';
		updatebotbutton('Const Mode.-OFF', 'pbbuildmtab');
		m += '<TD>Construction Mode: <SELECT id="pbBuildType">\
				<OPTION value=build>level up</option>\
				<OPTION value=max>max Level</option>\
				<OPTION value=destruct>destruct</option>\
				</select></td>';
		m += '<TD><INPUT id=pbHelpRequest type=checkbox '+ (t.buildStates.help?' CHECKED':'') +'\></td><TD> ask for Help?</td>';
		m += '<TD><INPUT id=pbHelp type=submit value="help"></td>';
		m += '</tr></table></div>';
      m += '<DIV id=pbBuildDivQ class=pbStat>Buld ques</div><TABLE id=pbbuildqueues width=100% height=0% class=ptentry><TR>';
		for (var i = 0; i < Cities.cities.length; i++) {
            m += '<TD colspan=2><CENTER><B>' + Cities.cities[i].name + '</b></center></td>';
        }
		m += '</tr><TR>';
        for (var i = 0; i < Cities.cities.length; i++) {
            m += '<TD colspan=2><CENTER><INPUT id=pbbuild_' + Cities.cities[i].id + ' type=submit value="view"></center></td>';
        }
        m += '</tr><TR>';
        for (var i = 0; i < Cities.cities.length; i++) {
            m += '<TD colspan=2><CENTER><INPUT id=pbCancelAll_' + Cities.cities[i].id + ' type=submit value="Clear all"></center></td>';
        }
        m += '</tr><TR>';
        for (var i = 0; i < Cities.cities.length; i++) {
            m += '<TD>Const.:</td><TD id=pbbuildcount_' + Cities.cities[i].id + '>' + t["bQ_" + Cities.cities[i].id].length + '</td>';
        }
        m += '</tr><TR>';
        for (var i = 0; i < Cities.cities.length; i++) {
            t['totalTime_' + Cities.cities[i].id] = 0;
            cbQ = t["bQ_" + Cities.cities[i].id];
            if (typeof cbQ != 'undefined') {
                for (var j = 0; j < cbQ.length; j++) {
                    t['totalTime_' + Cities.cities[i].id] = parseInt(t['totalTime_' + Cities.cities[i].id]) + parseInt(cbQ[j].buildingTime);
                }
                timestring = timestr(t['totalTime_' + Cities.cities[i].id]);
            }
            m += '<TD>Total:</td><TD id=pbbuildtotal_' + Cities.cities[i].id + '>' + timestring + '</td>';
        }
        m += '</tr></table><SPAN class=boldRed id=pbbuildError></span>';
        t.myDiv.innerHTML = m;

        for (var i = 0; i < Cities.cities.length; i++) {
            var cityId = Cities.cities[i].id;
            var btnName = 'pbbuild_' + cityId;
            addQueueEventListener(cityId, btnName);
            var btn2Name = 'pbCancelAll_' + cityId;
            CancelAllEventListener(cityId, btn2Name);
			t.showBuildQueue(cityId, false);
        }

        t.e_autoBuild(); //start checking if we can build someting

                document.getElementById('pbBuildRunning').addEventListener('click', t.toggleStateRunning, false);
		document.getElementById('pbBuildType').addEventListener('change', function(){t.setBuildMode(this.value);}, false);
	   	document.getElementById('pbBuildMode').addEventListener('click', t.toggleStateMode, false);
                document.getElementById('pbHelp').addEventListener('click', t.pbHelp, false);
		document.getElementById('pbHelpRequest').addEventListener ('change', function (){
        t.buildStates.help = (document.getElementById('pbHelpRequest').checked);
        t.saveBuildStates();
        }, false);

		window.addEventListener('unload', t.onUnload, false);

        function addQueueEventListener(cityId, name){
            document.getElementById(name).addEventListener('click', function(){
                t.showBuildQueue(cityId, true);
            }, false);
        }

        function CancelAllEventListener(cityId, name){
            document.getElementById(name).addEventListener('click', function(){
            	t["bQ_" + cityId] = [];
            	t['totalTime_' + cityId] = 0;
            	document.getElementById('pbbuildcount_' + cityId).innerHTML = 0;
            	document.getElementById('pbbuildtotal_' + cityId).innerHTML = timestr(0);
            }, false);
        }


    },
  pbHelp : function (){
    var helpText = '<BR>Designed to create self-tails.<BR>';
    helpText += 'Auto Build ON/OFF---> Active Mode auto construction.<BR>';
    helpText += 'Build Mode ON / OFF ----> To Create the construction queue!. We itching in the game each building.<BR>';
    helpText += 'Building Mode ---> We indicate if we destroy, Up one level or the maximum level of the building in question.<BR>';
    helpText += 'View Button ----> Displays the tail of building the city in question!<BR>';
    helpText += 'Sometimes, you can rest stop tail, is a matter of deleting and remaking it again!<BR>';

    var pop = new CPopup ('pbHelp', 0, 0, 585, 230, true);
    pop.centerMe (mainPop.getMainDiv());
    pop.getMainDiv().innerHTML = helpText;
    pop.getTopDiv().innerHTML = '<div class=showBadged><center>Help menu Power Koc: self builder</center></div>';
    pop.show (true);
  },
  
  setBuildMode: function (type) {
    var t = Tabs.build;
    t.currentBuildMode = type;
  },

  e_autoBuild: function(){
    var t = Tabs.build;
    document.getElementById('pbbuildError').innerHTML = '';
    if (t.buildStates.running == true) {
          var now = unixTime();
          for (var i = 0; i < Cities.cities.length; i++) {
              var cityId = Cities.cities[i].id;
              var isBusy = false;
              var qcon = Seed.queue_con["city" + cityId];
              if (matTypeof(qcon)=='array' && qcon.length>0) {
                if (parseInt(qcon[0][4]) > now)
                  isBusy = true;
                else
                  qcon.shift();   // remove expired build from queue
              }
              if (isBusy) {
                  //TODO add info of remaining build time and queue infos
              } else {
                 if (t["bQ_" + cityId].length > 0) { // something to do?
                 	var bQi = t["bQ_" + cityId][0];   //take first queue item to build
                 	  t.doOne (bQi);
                }
              }
            }
          }
		setTimeout(t.e_autoBuild, 10000); //should be at least 10
    },
    doOne : function (bQi){
		var t = Tabs.build;
		var currentcityid = parseInt(bQi.cityId);
		var cityName = t.getCityNameById(currentcityid);
		var time = parseInt(bQi.buildingTime);
		var mult = parseInt(bQi.buildingMult);
		var attempt = parseInt(bQi.buildingAttempt);
 		var mode = bQi.buildingMode;
		var citpos = parseInt(bQi.buildingPos);
		if (Seed.buildings['city' + currentcityid]["pos" + citpos] != undefined && Seed.buildings['city' + currentcityid]["pos" + citpos][0] != undefined) {
		var l_bdgid = parseInt(bQi.buildingType); //JUST FOR CHECK
		var bdgid = parseInt(Seed.buildings['city' + currentcityid]["pos" + citpos][0]);
		var l_curlvl = parseInt(bQi.buildingLevel); //JUST FOR CHECK
 		var curlvl = parseInt(Seed.buildings['city' + currentcityid]["pos" + citpos][1]);
		var l_bid = parseInt(bQi.buildingId); //JUST FOR CHECK
		var bid = parseInt(Seed.buildings["city" + currentcityid]["pos" + citpos][3]);
		if (curlvl > 8 && mode == 'build') {
			t.cancelQueueElement(0, currentcityid, time, false);
			actionLog(" Deleted Items: Building level is equal to 9 or more!!!");
			return;
		};
		if (isNaN(curlvl)) {
			t.cancelQueueElement(0, currentcityid, time, false);
			actionLog("Found no correct value for current building!!!!");
			return;
 		}
		if (l_bdgid != bdgid) {
			t.cancelQueueElement(0, currentcityid, time, false);
			actionLog("Building Type does not match!!!!");
			return;
		}
		if (l_bid != bid) {
			t.cancelQueueElement(0, currentcityid, time, false);
			actionLog("Building ID does not match!!!!");
			return;
		}
		if (l_curlvl < curlvl) {
				t.cancelQueueElement(0, currentcityid, time, false);
				actionLog("Queue item deleted: Buildinglevel is equal or higher!!!");
				return;
		}
		if (l_curlvl > curlvl && mode == 'build') {
				t.requeueQueueElement(bQi);
				return;
		}

		if (mode == 'destruct') {
			var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
			params.cid = currentcityid;
			params.bid = "";
			params.pos = citpos;
			params.lv = curlvl - 1;
			if (curlvl >= 1) {
				params.bid = bid;
			}
			params.type = bdgid;
			new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/destruct.php" + unsafeWindow.g_ajaxsuffix, {
				method: "post",
				parameters: params,
				onSuccess: function(rslt){
					if (rslt.ok) {
						actionLog("Destruyendo " + unsafeWindow.buildingcost['bdg' + bdgid][0] + " en " + cityName);
						Seed.queue_con["city" + currentcityid].push([bdgid, 0, parseInt(rslt.buildingId), unsafeWindow.unixtime(), unsafeWindow.unixtime() + time, 0, time, citpos]);
						if (params.cid == unsafeWindow.currentcityid)
	         					unsafeWindow.update_bdg();
                                                if (document.getElementById('pbHelpRequest').checked == true) 
							t.bot_gethelp(params.bid, currentcityid);
						  t.cancelQueueElement(0, currentcityid, time, false);
					} else {
						var errmsg = unsafeWindow.printLocalError(rslt.error_code || null, rslt.msg || null, rslt.feedback || null);
						t.requeueQueueElement(bQi);
						document.getElementById('pbbuildError').innerHTML = errmsg;
						logit(errmsg);
					}
				},
				onFailure: function(){
					document.getElementById('pbbuildError').innerHTML = "Destroying connection error! Please try again later";
				}
			})
		}
		if (mode == 'build') {
			var invalid = false;
			var chk = unsafeWindow.checkreq("bdg", bdgid, curlvl); //check if all requirements are met
			for (var c = 0; c < chk[3].length; c++) {
				if (chk[3][c] == 0) {
					invalid = true;
				}
			}
			if (invalid == false) {
				var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
				params.cid = currentcityid;
				params.bid = "";
				params.pos = citpos;
				params.lv = curlvl + 1;
				if (params.lv > 9){ //make sure that no level 10+ is built
					t.cancelQueueElement(0, currentcityid, time, false);
					actionLog("Queue elements removed: He tried to build level 10 + building! Please report if this happens!!!");
					return;
				}
				if (params.lv > 1) {
					params.bid = bid;
				}
				params.type = bdgid;
				new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/construct.php" + unsafeWindow.g_ajaxsuffix, {
					method: "post",
					parameters: params,
					onSuccess: function(rslt){
						if (rslt.ok) {
							actionLog("Construyendo " + unsafeWindow.buildingcost['bdg' + bdgid][0] + " Nivel " + params.lv + " en " + cityName);
							Seed.resources["city" + currentcityid].rec1[0] -= parseInt(unsafeWindow.buildingcost["bdg" + bdgid][1]) * mult * 3600;
							Seed.resources["city" + currentcityid].rec2[0] -= parseInt(unsafeWindow.buildingcost["bdg" + bdgid][2]) * mult * 3600;
							Seed.resources["city" + currentcityid].rec3[0] -= parseInt(unsafeWindow.buildingcost["bdg" + bdgid][3]) * mult * 3600;
							Seed.resources["city" + currentcityid].rec4[0] -= parseInt(unsafeWindow.buildingcost["bdg" + bdgid][4]) * mult * 3600;
							Seed.citystats["city" + currentcityid].gold[0] -= parseInt(unsafeWindow.buildingcost["bdg" + bdgid][5]) * mult;
							Seed.queue_con["city" + currentcityid].push([bdgid, curlvl + 1, parseInt(rslt.buildingId), unsafeWindow.unixtime(),  unsafeWindow.unixtime() + time, 0, time, citpos]);
							if (params.cid == unsafeWindow.currentcityid)
							unsafeWindow.update_bdg();
							if (document.getElementById('pbHelpRequest').checked == true) 
								t.bot_gethelp(params.bid, currentcityid);
								t.cancelQueueElement(0, currentcityid, time, false);							
						} else {
							var errmsg = unsafeWindow.printLocalError(rslt.error_code || null, rslt.msg || null, rslt.feedback || null);
							if (rslt.error_code == 103) { // building has already the target level => just  delete
								t.cancelQueueElement(0, currentcityid, time, false);
								actionLog("Queue elements removed: this level of construction already exists or the construction process has begun!");
							} else {
								t.requeueQueueElement(bQi);
								document.getElementById('pbbuildError').innerHTML = Cities.byID[currentcityid].name +': '+ errmsg + " The Pre was required. Check the number of retries.";
							}
							logit(errmsg);
						}
				},
					onFailure: function(){
						document.getElementById('pbbuildError').innerHTML = "Connection error during construction! Please try again later";
					}
				});
			} else {
				t.requeueQueueElement(bQi); // requeue item if check is invalid
			}
		}
		} else {
			t.cancelQueueElement(0, currentcityid, time, false);
			actionLog("Queue elements removed: no Construction!!!");
		}
	},

	requeueQueueElement: function (bQi) {
	    var t = Tabs.build;
		var cityId = bQi.cityId;
		var buildingPos = parseInt(bQi.buildingPos);
		var buildingId = parseInt(bQi.buildingId);
		var buildingLevel = parseInt(bQi.buildingLevel);
		var buildingType = parseInt(bQi.buildingType);
		var buildingTime = parseInt(bQi.buildingTime);
		var buildingMult = parseInt(bQi.buildingMult);
		var buildingAttempts = parseInt(bQi.buildingAttempts);
		var buildingMode = bQi.buildingMode;

		t.addQueueItem(cityId, buildingPos, buildingType, buildingId, buildingTime, buildingLevel, buildingAttempts + 1, buildingMult, buildingMode); // requeue item
		t.cancelQueueElement(0, cityId, buildingTime, false); // delete Queue Item
	},

    show: function(){
		var t = Tabs.build;
    },

    bot_buildslot: function(c, a){
        var t = Tabs.build;
	var cityId = t.getCurrentCityId();
        var buildingPos   = c.id.split("_")[1];
        var buildingType  = parseInt(Seed.buildings['city' + cityId]["pos" + buildingPos][0]);
        var buildingLevel = parseInt(Seed.buildings['city' + cityId]["pos" + buildingPos][1]);
	var buildingId    = parseInt(Seed.buildings['city' + cityId]["pos" + buildingPos][3]);
	if (DEBUG_TRACE) logit("Pos: " + buildingPos + " Type: " + buildingType + " Level: " + buildingLevel + " Id: " + buildingId);
   	var buildingAttempts = 0;
	var loaded_bQ = t["bQ_" + cityId];
	if (typeof Seed.queue_con['city' + cityId][0] != 'undefined') {
		var current_construction_pos = Seed.queue_con['city' + cityId][0][2];
	} else {
		var current_construction_pos = "";
	}
	if (loaded_bQ.length == 0 && current_construction_pos != "" ) { //check anyway if there is currently build in progess for this specific building
	if (current_construction_pos != 'NaN' && current_construction_pos == buildingId) {
		buildingLevel += 1;
	}
	} else {
	if (current_construction_pos != "" && current_construction_pos == buildingId) {
		buildingLevel += 1;
	}
	for (var i = 0; i < loaded_bQ.length; i++) { // check if there are already queue items for this building or the building is currently building
	        var loadedCity = loaded_bQ[i].cityId;
	        var loadedSlot = loaded_bQ[i].buildingPos;
	        if (loadedSlot == buildingPos && loadedCity == cityId) {
		buildingLevel += 1;
	}
	if (loaded_bQ[i].buildingMode == 'destruct' && loadedSlot == buildingPos && loadedCity == cityId) { // check if destrcution is already in queue
		t.modalmessage('Destrucci n ya en cola!');
		return;
	  }
	 }
	}
        if (t.currentBuildMode == "build") {
	   if (buildingLevel >= 9) {
                t.modalmessage('Due to the construction requirements (DI), the buildings of level 10 \ must be built manually.');
                return;
            }
                var buildingMode = "build";
	        var result = t.calculateQueueValues(cityId, buildingLevel, buildingType, buildingMode);
		var buildingMult = result[0];
		var buildingTime = result[1];
		var queueId = loaded_bQ.length;
		t.addQueueItem(cityId, buildingPos, buildingType, buildingId, buildingTime, buildingLevel, buildingAttempts, buildingMult, buildingMode);
		t._addTab(queueId, cityId, buildingType, buildingTime, buildingLevel, buildingAttempts, buildingMode);
        }
        if (t.currentBuildMode == "max") {
                var buildingMode = "build";
	        for (var bL = buildingLevel; bL <9; bL++) {
	        var queueId = loaded_bQ.length;
	        var result = t.calculateQueueValues(cityId, bL, buildingType, buildingMode);
		var buildingMult = result[0];
		var buildingTime = result[1];
		queueId = queueId ;
		t.addQueueItem(cityId, buildingPos, buildingType, buildingId, buildingTime, bL, buildingAttempts, buildingMult, buildingMode);
		t._addTab(queueId, cityId, buildingType, buildingTime, bL, buildingAttempts, buildingMode);
	        }
        }
        if (t.currentBuildMode == "destruct") {
            var buildingMode = "destruct";
			var result = t.calculateQueueValues(cityId, buildingLevel, buildingType, buildingMode);
			var buildingMult = result[0];
			var buildingTime = result[1];
			var queueId = loaded_bQ.length;
			t.addQueueItem(cityId, buildingPos, buildingType, buildingId, buildingTime, buildingLevel, buildingAttempts, buildingMult, buildingMode);
			t._addTab(queueId, cityId, buildingType, buildingTime, buildingLevel, buildingAttempts, buildingMode);
        }

    },


	bot_buildguardian: function(c, a){
        var t = Tabs.build;
		var cityId = t.getCurrentCityId();
        var buildingType  = 50;
		for(i=0; i < Cities.numCities; i++){
			if(Seed.guardian[i].cityId == cityId){
				var buildingLevel = Seed.guardian[i].level;
				break;
			}
		}
		var buildingId    = parseInt(Seed.buildings['city' + cityId]["pos" + buildingPos][3]);
		if (DEBUG_TRACE) logit("Pos: " + buildingPos + " Tipo: " + buildingType + " Nivel: " + buildingLevel + " Id: " + buildingId);
  		var buildingAttempts = 0;
		var loaded_bQ = t["bQ_" + cityId];
		if (typeof Seed.queue_con['city' + cityId][0] != 'undefined') {
			var current_construction_pos = Seed.queue_con['city' + cityId][0][2];
		} else {
			var current_construction_pos = "";
		}
		if (loaded_bQ.length == 0 && current_construction_pos != "" ) { //check anyway if there is currently build in progess for this specific building
			if (current_construction_pos != 'NaN' && current_construction_pos == buildingId) {
				buildingLevel += 1;
			}
		} else {
			if (current_construction_pos != "" && current_construction_pos == buildingId) {
				buildingLevel += 1;
			}
			for (var i = 0; i < loaded_bQ.length; i++) { // check if there are already queue items for this building or the building is currently building
				var loadedCity = loaded_bQ[i].cityId;
				var loadedSlot = loaded_bQ[i].buildingPos;
				if (loadedSlot == buildingPos && loadedCity == cityId) {
					buildingLevel += 1;
				}
				if (loaded_bQ[i].buildingMode == 'destruct' && loadedSlot == buildingPos && loadedCity == cityId) { // check if destrcution is already in queue
					t.modalmessage('Destruction already in the queue!');
					return;
				}
			}
		}
        if (t.currentBuildMode == "build") {
		    if (buildingLevel >= 9) {
                t.modalmessage('Due to the construction requirement (DI), buildings above the level 9 \ n must be built manually.');
                return;
            }
            var buildingMode = "build";
			var result = t.calculateQueueValues(cityId, buildingLevel, buildingType, buildingMode);
			var buildingMult = result[0];
			var buildingTime = result[1];
			var queueId = loaded_bQ.length;
			t.addQueueItem(cityId, buildingPos, buildingType, buildingId, buildingTime, buildingLevel, buildingAttempts, buildingMult, buildingMode);
			t._addTab(queueId, cityId, buildingType, buildingTime, buildingLevel, buildingAttempts, buildingMode);
        }
        if (t.currentBuildMode == "max") {
            var buildingMode = "build";
			for (var bL = buildingLevel; bL <9; bL++) {
				var queueId = loaded_bQ.length;
				var result = t.calculateQueueValues(cityId, bL, buildingType, buildingMode);
				var buildingMult = result[0];
				var buildingTime = result[1];
				queueId = queueId ;
				t.addQueueItem(cityId, buildingPos, buildingType, buildingId, buildingTime, bL, buildingAttempts, buildingMult, buildingMode);
				t._addTab(queueId, cityId, buildingType, buildingTime, bL, buildingAttempts, buildingMode);
			}
        }
        if (t.currentBuildMode == "destruct") {
            var buildingMode = "destruct";
			var result = t.calculateQueueValues(cityId, buildingLevel, buildingType, buildingMode);
			var buildingMult = result[0];
			var buildingTime = result[1];
			var queueId = loaded_bQ.length;
			t.addQueueItem(cityId, buildingPos, buildingType, buildingId, buildingTime, buildingLevel, buildingAttempts, buildingMult, buildingMode);
			t._addTab(queueId, cityId, buildingType, buildingTime, buildingLevel, buildingAttempts, buildingMode);
        }

    },
	calculateQueueValues: function (cityId, buildingLevel, buildingType, buildingMode) {
	    var t = Tabs.build;
		var now = unixTime();
		if (buildingMode == 'build') {
			var buildingMult = Math.pow(2, buildingLevel);
        }
		if (buildingMode == 'destruct') {
			var buildingMult = Math.pow(2, buildingLevel - 2);
		}

		var knights = Seed.knights["city" + cityId];
		if (knights) {
			var polKniId = parseInt(Seed.leaders['city' + cityId].politicsKnightId);
			if (polKniId) {
				var polValue = parseInt(Seed.knights['city' + cityId]['knt' + polKniId].politics);
				var polBoost = parseInt(Seed.knights['city' + cityId]['knt' + polKniId].politicsBoostExpireUnixtime);
				if ((polBoost - now) > 0) {
					polValue = parseInt(polValue * 1.25);
				}
			} else {
				polValue = 0;
			}
		} else {
			polValue = 0;
		}
        var buildingTime = unsafeWindow.buildingcost["bdg" + buildingType][7] * buildingMult;
        if (parseInt(buildingType) < 6 && parseInt(buildingType) > 0 && buildingMult == 1) {
            buildingTime = 15;
        }
		if (buildingMode == 'build') {
			buildingTime = parseInt(buildingTime / (1 + 0.005 * polValue + 0.1 * parseInt(Seed.tech.tch16)));
        }
		if (buildingMode == 'destruct') {
			buildingTime = buildingTime / (1 + 0.005 * polValue + 0.1 * parseInt(Seed.tech.tch16));
			if (buildingTime % 1 > 0) {
				buildingTime = parseInt(buildingTime);
			}
		}
		var result = new Array(buildingMult, buildingTime);
		return result;
	},

	bot_gethelp: function (f, currentcityid) {
		var t = Tabs.build;
		var city = t.getCityNameById(currentcityid);
		var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
	        params.bid = f;
	        params.ctrl = 'AskForHelp';
	        params.action = 'getHelpData';
	        new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/_dispatch.php" + unsafeWindow.g_ajaxsuffix, {
	        method: "post",
                parameters: params,
                onSuccess: function (rslt) {
                unsafeWindow.handleHelpCallback (rslt.data);
        },

        onFailure: function (rslt) {
              t.bot_gethelp (f, currentcityid);
              return;
            },
           });
          var a = Seed.queue_con["city" + currentcityid]; 
	  var e = 0;
	  var d = 0;
	  for (var c = 0; c < a.length; c++) {
		if (parseInt(a[c][2]) == parseInt(f)) {
		  e = parseInt(a[c][0]);
		  d = parseInt(a[c][1]);
		  break
		}
	  }
	  var b = new Array();
	  b.push(["REPLACE_LeVeLbUiLdInG", d]);
	  b.push(["REPLACE_BuIlDiNgNaMe", unsafeWindow.buildingcost["bdg" + e][0]]);
	  b.push(["REPLACE_LeVeLiD", d]);
	  b.push(["REPLACE_AsSeTiD", f]);
	  var g = function(h, i) {
		unsafeWindow.continuation_95(h, i);
		if (!h) {
		  var j = d > 1 ? unsafeWindow.cm.SpeedUpType.upgrade : unsafeWindow.cm.SpeedUpType.build;
		  unsafeWindow.cm.ClientSideCookieManager.setCookie(j, false)
		}
	  };
	  unsafeWindow.common_postToProfile("95", unsafeWindow.Object.cloneFeed(unsafeWindow.template_data_95), unsafeWindow.Object.cloneFeed(unsafeWindow.actionlink_data_95), g, b)
	 },

	addQueueItem: function (cityId, buildingPos, buildingType, buildingId, buildingTime, buildingLevel, buildingAttempts, buildingMult, buildingMode) {
	var t = Tabs.build;
		var lbQ = t["bQ_" + cityId];
		lbQ.push({
            cityId: 			cityId,
            buildingPos:		buildingPos,
            buildingType: 		buildingType,
			buildingId: 		buildingId,
            buildingTime: 		buildingTime,
            buildingLevel: 		buildingLevel,
            buildingAttempts: 	buildingAttempts,
			buildingMult: 		buildingMult,
            buildingMode: 		buildingMode
        });
		t.modifyTotalTime(cityId, 'increase', buildingTime); //adjust total Time
	},

    modalmessage: function(message){
	    var t = Tabs.build;
        var timeout = 10000;
        var content = "autocerrar despues de 10sec...<br><br>"
        content += message;
        unsafeWindow.Modal.showAlert(content);
        window.setTimeout('unsafeWindow.Modal.hideModal();', timeout);
    },

    modifyTotalTime: function (cityId, type, buildingTime) {
	    var t = Tabs.build;
		var element = document.getElementById('pbbuildcount_' + cityId);
		var currentCount = parseInt(element.innerHTML);
		if (type == "increase") {
			t['totalTime_' + cityId] = t['totalTime_' + cityId] + buildingTime;
			var currentCount = currentCount + 1;
		}
		if (type == "decrease") {
			t['totalTime_' + cityId] = t['totalTime_' + cityId] - buildingTime;
			var currentCount = currentCount - 1;
		}
		element.innerHTML = currentCount;
		document.getElementById('pbbuildtotal_' + cityId).innerHTML = timestr(t['totalTime_' + cityId]);
	},

    hide: function(){
        var t = Tabs.build;
		//unsafeWindow.buildslot = t.koc_buildslot; // restore original koc function
    },

    onUnload: function(){
        var t = Tabs.build;
        for (var i = 0; i < Cities.cities.length; i++) {
            //t["bQ_" + Cities.cities[i].id] = []; //clean up if needed
            if (!ResetAll) GM_setValue('bQ_' + getServerId() + '_' + Cities.cities[i].id, JSON2.stringify((t["bQ_" + Cities.cities[i].id])));
         }
        t.saveBuildStates();
    },
    _addTab: function(queueId, cityId, buildingType, buildingTime, buildingLevel, buildingAttempts, buildingMode){
		var t = Tabs.build;
        var row = document.getElementById('pbCityQueueContent').insertRow(0);
        row.vAlign = 'top';
        row.insertCell(0).innerHTML = queueId;
        if (buildingMode == "destruct") {
            row.insertCell(1).innerHTML = '<img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/bonus_att.png">';
        }
        else {
            row.insertCell(1).innerHTML = '<img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/bonus_prod.png">';
        }
        row.insertCell(2).innerHTML = unsafeWindow.buildingcost['bdg' + buildingType][0];
        row.insertCell(3).innerHTML = timestr(buildingTime);
		if (buildingMode == "destruct") {
			row.insertCell(4).innerHTML = 0;
        } else {
			row.insertCell(4).innerHTML = buildingLevel + 1; // => target Level
		}
		row.insertCell(5).innerHTML = buildingAttempts;
        row.insertCell(6).innerHTML = '<a class="button20" id="queuecancel_' + queueId + '"><span>Cancel</span></a>';
        document.getElementById('queuecancel_' + queueId).addEventListener('click', function(){
            t.cancelQueueElement(queueId, cityId, buildingTime, true);
        }, false);
    },

    cancelQueueElement: function(queueId, cityId, buildingTime, showQueue){
        var t = Tabs.build;
        var queueId = parseInt(queueId);
        t["bQ_" + cityId].splice(queueId, 1);
        t.modifyTotalTime(cityId, 'decrease', buildingTime); //adjust total Time

        if (showQueue == true) {
            t.showBuildQueue(cityId, false);
        }
    },

    showBuildQueue: function(cityId, focus){
	    var t = Tabs.build;
	    clearTimeout (t.timer);
        var popBuildQueue = null;
        var cityName = t.getCityNameById(cityId);
        if (t.popBuildQueue == null) {
            t.popBuildQueue = new CPopup('pbbuild_' + cityId, 0, 0, 350, 500, true, function() {clearTimeout (t.timer);});
        }
        var m = '<DIV style="max-height:560px; height:560px; overflow-y:auto"><TABLE align=center cellpadding=0 cellspacing=0 width=100% class="pbTabPad" id="pbCityQueueContent">';
        t.popBuildQueue.getMainDiv().innerHTML = '</table></div>' + m;
        t.popBuildQueue.getTopDiv().innerHTML = '<TD width="200px"><B>Build Queue of ' + cityName + '</b></td><TD><INPUT id=pbOptimizeByTime type=submit value="Optimize by time"></td>';
        t.paintBuildQueue(cityId);
        if (focus)
          t.popBuildQueue.show(true);
		document.getElementById('pbOptimizeByTime').addEventListener('click', function(){t.clearBuildQueue();t.paintBuildQueue(cityId, true);}, false);
		t.timer = setTimeout (function() {t.showBuildQueue(cityId, false)}, 45000);
	},

    paintBuildQueue: function(cityId, optimize){
        var t = Tabs.build;
        var lbQ = t["bQ_" + cityId];
		if (optimize == true) {
			lbQ.sort(function(a,b){return a.buildingTime - b.buildingTime});
		}
		t["bQ_" + cityId] = lbQ;
		for (var i = 0; i < lbQ.length; i++) {
			var queueId = i;
			t._addTab(queueId, lbQ[i].cityId, lbQ[i].buildingType, lbQ[i].buildingTime, lbQ[i].buildingLevel, lbQ[i].buildingAttempts, lbQ[i].buildingMode);
        }
    },

    clearBuildQueue: function() {
	    var t = Tabs.build;
		var table = document.getElementById('pbCityQueueContent');
		var rows = table.rows;
		while(rows.length)
			table.deleteRow(rows.length-1);
	},

    getCurrentCityId: function(){ // TODO maybe move as global function to the core application
        if (!unsafeWindow.currentcityid)
            return null;
        return unsafeWindow.currentcityid;
    },

    saveBuildStates: function(){
		var t = Tabs.build;
        var serverID = getServerId();
        GM_setValue('buildStates_' + Seed.player['name'] + '_' +serverID, JSON2.stringify(t.buildStates));
    },

    readBuildStates: function(){
        var t = Tabs.build;
        var serverID = getServerId();
        s = GM_getValue('buildStates_' + Seed.player['name'] + '_' +serverID);
        if (s != null) {
            states = JSON2.parse(s);
            for (k in states)
                t.buildStates[k] = states[k];
        }
    },

    toggleStateRunning: function(obj){
	var t = Tabs.build;
	obj = document.getElementById('pbBuildRunning');
        if (t.buildStates.running == true) {
            t.buildStates.running = false;
            t.saveBuildStates();
            obj.value = "Auto Build = OFF";
		updatebotbutton('Build-OFF', 'pbbuildtab');
        }else {
            t.buildStates.running = true;
            t.saveBuildStates();
            obj.value = "Auto Build = ON";
		updatebotbutton('Build-ON', 'pbbuildtab');
        }
    },

    toggleStateMode: function(obj){
		var t = Tabs.build;
		obj = document.getElementById('pbBuildMode');
        if (obj.value == 'Modo Build = OFF') {
			unsafeWindow.buildslot = t.bot_buildslot; // overwrite original koc function
            var guardian = document.getElementById('citymap').getElementsByClassName('bldg_guardian_0');
			if(guardian.length >0)
				guardian[0].addEventListener('click', t.bot_buildguardian, false);
			obj.value = "Modo Build = ON";
			updatebotbutton('Const Mode.-ON', 'pbbuildmtab');
        }else {
			unsafeWindow.buildslot = t.koc_buildslot; // restore original koc function
			var guardian = document.getElementById('citymap').getElementsByClassName('bldg_guardian_0');
			if(guardian.length >0)
				guardian[0].removeEventListener('click', t.bot_buildguardian, false);
			obj.value = "Modo Build = OFF";
			updatebotbutton('Const Mode.-OFF', 'pbbuildmtab');
        }
    },

    getCityNameById: function (cityId) {obj = document.getElementById('pbBuildRunning');
    return Cities.byID[cityId].name;
	},
}



/********************************* Search Tab *************************************/

/***
TODO: Better search algorithm (circular OR square, always start at center, working outwards)
        Should be separate class (producer/consumer) so auto attack can use it too
**/

Tabs.Search = {
  tabOrder : 110,
  myDiv : null,
  MapAjax : new CMapAjax(),
  MAX_SHOW_WHILE_RUNNING : 250,
  popFirst : true,
  SearchList : [],
  
  init : function (div){
    var t = Tabs.Search;
    var Provinces = {1:{'name':"Tintagel",'x':75,'y':75},
				2:{'name':"Cornwall",'x':225,'y':75},
				3:{'name':"Astolat",'x':375,'y':75},
				4:{'name':"Lyonesse",'x':525,'y':75},
				5:{'name':"Corbenic",'x':675,'y':75},

				6:{'name':"Paimpont",'x':75,'y':225},
				7:{'name':"Cameliard",'x':225,'y':225},
				8:{'name':"Sarras",'x':375,'y':225},
				9:{'name':"Canoel",'x':525,'y':225},
				10:{'name':"Avalon",'x':675,'y':225},

				11:{'name':"Carmathen",'x':75,'y':375},
				12:{'name':"Shallot",'x':225,'y':375},
				//13:{'name':"-------",'x':375,'y':375},
				14:{'name':"Cadbury",'x':525,'y':375},
				15:{'name':"Glastonbury",'x':675,'y':375},

				16:{'name':"Camlamn",'x':75,'y':525},
				17:{'name':"Orkney",'x':225,'y':525},
				18:{'name':"Dore",'x':375,'y':525},
				19:{'name':"Logres",'x':525,'y':525},
				20:{'name':"Caerleon",'x':675,'y':525},

				21:{'name':"Parmenie",'x':75,'y':675},
				22:{'name':"Bodmin Moor",'x':225,'y':675},
				23:{'name':"Cellwig",'x':375,'y':675},
				24:{'name':"Listeneise",'x':525,'y':675},
				25:{'name':"Albion",'x':675,'y':675}};
    t.selectedCity = Cities.cities[0];
    t.myDiv = div;
    
    m = '<DIV class=ptentry><TABLE width=100% class=pbTab><TR><TD class=pbDetLeft>Search for: </td><TD width=99%>';
    m += htmlSelector ({0:"Barb Camp", 1:"Wilderness", 2:"Cities"}, null, 'id=pasrcType');
	m += '&nbsp; &nbsp; &nbsp; <span class=pbDetLeft>Search style: &nbsp;';
	m += htmlSelector({square:"Square", circle:"Circle"}, Options.srcdisttype, 'id=pbsrcdist');
    m += '</span></td></tr><TR><TD class=pbDetLeft>At: </td><TD class=xtab>X=<INPUT id=pasrchX type=text\> &nbsp;Y=<INPUT id=pasrchY type=text\>\
      &nbsp; Radius: <INPUT id=pasrcDist size=3 value=10 /> &nbsp; <SPAN id=paspInXY></span></tr>\
      <TR><TD class=pbDetLeft>Or:</td><TD>Search entire province: <select id="provinceXY"><option>--provinces--</option>';
    for (var i in Provinces)
    	m += '<option value="'+i+'">'+Provinces[i].name+'</option>';
    m += '</select></td></tr>';
    m += '<TR><TD colspan=2 align=center><INPUT id=pasrcStart type=submit value="Start Search"/></td></tr>';
    m += '</table></div>\
        <DIV id="pasrcResults" style="height:400px; max-height:400px;"></div>';
    
    t.myDiv.innerHTML = m;
    var psearch = document.getElementById ("pasrcType");
    new CdispCityPicker ('pasrchdcp', document.getElementById ('paspInXY'), true, t.citySelNotify).bindToXYboxes(document.getElementById ('pasrchX'), document.getElementById ('pasrchY'));
    document.getElementById ('provinceXY').addEventListener ('click', function() {
    	  if (this.value >= 1) {
    		  document.getElementById ('pasrchX').value = Provinces[this.value].x;
    		  document.getElementById ('pasrchY').value = Provinces[this.value].y;
    		  document.getElementById ('pasrcDist').value = '75';
    	  }
	    }, false);
	document.getElementById('pbsrcdist').addEventListener ('change', function (){
      Options.srcdisttype = document.getElementById('pbsrcdist').value;
      saveOptions();
      }, false);
    document.getElementById ('pasrcStart').addEventListener ('click', t.clickedSearch, false);
    document.getElementById ('pasrchX').addEventListener ('keydown', t.e_coordChange, false);
    document.getElementById ('pasrchY').addEventListener ('keydown', t.e_coordChange, false);
    document.getElementById ('pasrcDist').addEventListener ('keydown', t.e_coordChange, false);
    document.getElementById ('pasrchY').addEventListener ('change', t.e_coordChange, false);
    document.getElementById ('pasrchY').addEventListener ('change', t.e_coordChange, false);
    unsafeWindow.pbSearchLookup = t.clickedLookup;  
    unsafeWindow.pbSearchScout = t.clickedScout;
    unsafeWindow.pbExportToRaid = t.ExportToRaid;
  },

  e_coordChange : function(){
    document.getElementById ('provinceXY').selectedIndex = 0;
  },
  
  hide : function (){
  },

  show : function (cont){
  },

  citySelNotify : function (city){
    var t = Tabs.Search;
    t.selectedCity = city;
    t.JumpCity(city.name);
  },
  
  JumpCity:function(city) {
    var t = Tabs.Search;
	for (i=0;i<Seed.cities.length;i++) {
		if (Seed.cities[i][1]==city) var cityNum=i;
	}
	cityNum++;
	var obj = document.getElementById('citysel_'+cityNum);
  	return t.ClickWin(window,obj,'click');
  },
  
  ClickWin:function(win,obj,evtName) {
  	var evt = win.document.createEvent("MouseEvents");
  	evt.initMouseEvent(evtName, true, true, win,
  		0, 0, 0, 0, 0, false, false, false, false, 0, null);
  	return !obj.dispatchEvent(evt);
  },
  
  helpPop : function (){
       var helpText = 'Troop numbers (from KOC WIKI):<BR>';
       helpText += '<A target="_tab" href="http://koc.wikia.com/wiki/Barbarian_Camps">A lot more can be found on Koc Wikia</a>';
       helpText += '<TABLE><TR><TD>Lvl</td><TD>Troops</td></tr>';
       helpText += '<TR><TD>1</td><TD>500 Supply Troops + 500 Archers</td></tr>';
       helpText += '<TR><TD>2</td><TD>500 Supply Troops + 2500 Archers</td></tr>';
       helpText += '<TR><TD>3</td><TD>500 Supply Troops + 5000 Archers</td></tr>';
       helpText += '<TR><TD>4</td><TD>500 Supply Troops + 7500 Archers</td></tr>';
       helpText += '<TR><TD>5</td><TD>15000 Archers</td></tr>';
       helpText += '<TR><TD>5</td><TD>12000 Archers IF Level 10 fletching and Level 9 Featherweight</td></tr>';
       helpText += '<TR><TD>6</td><TD>25000 Archers IF Level 9 fletching</td></tr>';
       helpText += '<TR><TD>6</td><TD>22000 Archers IF Level 10 fletching</td></tr>';
       helpText += '<TR><TD>7</td><TD>45000 Archers IF Level 10 fletching</td></tr>';
       helpText += '<TR><TD>7</td><TD>44000 Archers IF Level 10 fletching and knight 69+</td></tr>';
       helpText += '<TR><TD>7</td><TD>40000 Archers IF Level 10 fletching and knight 94+</td></tr>';
       helpText += '<TR><TD>8</td><TD>28000 Ballista WITH Level 10 fletching and Knight 91+</td></tr>';
       helpText += '<TR><TD>9</td><TD>56000 Ballista WITH Level 10 fletching and Knight 98+</td></tr>';
       helpText += '<TR><TD>10</td><TD>125000 Catapults (500 Catapults loss!)</td></tr></tr></table>';
  
       var pop = new CPopup ('giftHelp', 0, 0, 425, 375, true);
       pop.centerMe (mainPop.getMainDiv());  
       pop.getMainDiv().innerHTML = helpText;
       pop.getTopDiv().innerHTML = '<CENTER><B>Power Bot Help: Raids</b></center>';
       pop.show (true);
     },
     
     
  opt : {},
  selectedCity : null,
  searchRunning : false,
  tilesSearched : 0,
  tilesFound : 0,
  curX : 0,
  curY : 0,
  lastX : 0,
  firstX : 0,
  firstY : 0,
  lastY : 0,

  clickedSearch : function (){
    var t = Tabs.Search;

    if (t.searchRunning){
      t.stopSearch ('SEARCH CANCELLED!');
      return;
    }
    t.opt.searchType = document.getElementById ('pasrcType').value;
    t.opt.startX = parseInt(document.getElementById ('pasrchX').value);
    t.opt.startY = parseInt(document.getElementById ('pasrchY').value);
    t.opt.maxDistance = parseInt(document.getElementById ('pasrcDist').value);
    t.opt.searchShape = Options.srcdisttype;
    errMsg = '';

    if (isNaN (t.opt.startX) ||t.opt.startX<0 || t.opt.startX>749)
      errMsg = "X must be between 0 and 749<BR>";
    if (isNaN (t.opt.startY) ||t.opt.startY<0 || t.opt.startY>749)
      errMsg += "Y must be between 0 and 749<BR>";
    if (isNaN (t.opt.maxDistance) ||t.opt.maxDistance<1 || t.opt.maxDistance>75)
      errMsg += "Radius (distance) must be between 1 and 75<BR>";
    if (errMsg != ''){
      document.getElementById('pasrcResults').innerHTML = '<FONT COLOR=#660000>ERROR:</font><BR><BR>'+ errMsg;
      return;
    }

    t.searchRunning = true;
    document.getElementById ('pasrcStart').value = 'Stop Search';
    m = '<DIV class=pbStat><TABLE width=100% cellspacing=0><TR><TD class=xtab width=125><DIV id=pastatSearched></div></td>\
        <TD class=xtab align=center><SPAN style="white-space:normal" id=pastatStatus></span></td>\
        <TD class=xtab align=right width=125><DIV id=pastatFound></div></td></tr></table></div>\
          <TABLE width=100%><TR valign=top>\
            <TD width=99% style="max-width:50px"><DIV id=padivOutTab style="height:380px; max-height:380px; overflow-y:auto;"></div></td>\
            <TD align=center valign=middle><A id=pbAhideShow style="text-decoration:none; cursor:pointer;"><DIV style="width:1em; border:1px solid red; padding:10px 2px; background-color:#fee"><SPAN id=spanHideShow> H I D E</span><BR><BR> L<BR>I<BR>S<BR>T<BR><BR> O<BR>P<BR>T<BR>I<BR>O<BR>N<BR>S </div></a></td>\
            <TD width=100% height=100% style="background:#e0e0f0; height:100%; padding:5px"><DIV id=padivOutOpts></div></td>\
          </table>';
      
    document.getElementById('pasrcResults').innerHTML = m;
    if (t.opt.searchType == 0)
      var typeName = 'Barbarians';
    else if (t.opt.searchType == 1)
      var typeName = 'Wildernesses';
    else
      var typeName = 'Cities';
    if (t.opt.searchShape == 'square')
      var distName = 'Distance';
    else
      var distName = 'Radius';
    m = '<CENTER><B>Search for '+ typeName +'<BR>\
        Center: '+ t.opt.startX +','+ t.opt.startY +'  &nbsp; '+ distName +': '+ t.opt.maxDistance +'<BR></center>\
        <DIV class=ptentry><TABLE cellspacing=0 width=100%><TR align=center><TD class=xtab colspan=10><B>LIST OPTIONS:</b><BR></td></tr>';
        
    if (t.opt.searchType == 1 || t.opt.searchType == 0) {
      m += '<TR><TD class=xtab align=right>Min. level to show:</td><TD class=xtab> <INPUT id=pafilMinLvl size=2 value='+ Options.srcMinLevel +' /></td></tr>\
        <TR><TD class=xtab align=right>Max. level to show:</td><TD class=xtab> <INPUT id=pafilMaxLvl size=2 value='+ Options.srcMaxLevel +' /></td></tr>';
		}
    if (t.opt.searchType == 1){
      m += '<TR><TD class=xtab align=right>Wilderness Type:</td><TD class=xtab><SELECT id=pafilWildType>';
      m += htmlOptions ( {1:'Glassland/Lake', 3:'Woodlands', 4:'Hills', 5:'Mountain', 6:'Plain', 8:'Dark Forest', 0:'ALL'}, Options.wildType );
	  m+= '</select></td></tr>';
	  // m+= '<TR><TD class=xtab align=right>Glassland/Lake:</td><TD class=xtab><INPUT name=pbfil id=pafilGrass type=CHECKBOX '+ (Options.GrassOnly?' CHECKED':'') +'\><td></tr>';
	  // m+= '<TR><TD class=xtab align=right>Woodlands:</td><TD class=xtab><INPUT name=pbfil id=pafilWood type=CHECKBOX '+ (Options.WoodOnly?' CHECKED':'') +'\><td></tr>';
	  // m+= '<TR><TD class=xtab align=right>Hills:</td><TD class=xtab><INPUT name=pbfil id=pafilHill type=CHECKBOX '+ (Options.HillOnly?' CHECKED':'') +'\><td></tr>';
	  // m+= '<TR><TD class=xtab align=right>Mountain:</td><TD class=xtab><INPUT name=pbfil id=pafilMount type=CHECKBOX '+ (Options.MountOnly?' CHECKED':'') +'\><td></tr>';
	  // m+= '<TR><TD class=xtab align=right>Plain:</td><TD class=xtab><INPUT name=pbfil id=pafilPlain type=CHECKBOX '+ (Options.PlainOnly?' CHECKED':'') +'\><td></tr>';
	  // m+= '<TR><TD class=xtab align=right>All:</td><TD class=xtab><INPUT name=pbfil id=pafilAll type=CHECKBOX '+ (Options.srcAll?' CHECKED':'') +'\><td></tr>';
      m += '</select></td></tr><TR><TD class=xtab align=right>Unowned Only:</td><TD class=xtab><INPUT id=pafilUnowned type=CHECKBOX '+ (Options.unownedOnly?' CHECKED':'') +'\><td></tr>';
    }
   if (t.opt.searchType == 1 || t.opt.searchType == 0) {
        m+= '<TR><TD class=xtab align=right>Sort By:</td><TD class=xtab><SELECT id=pafilSortBy>\
          <OPTION value="level" '+ (Options.srcSortBy=='level'?'SELECTED':'')  +'>Level</option>\
          <OPTION value="dist" '+ (Options.srcSortBy=='dist'?'SELECTED':'')  +'>Distance</option>\
			</select></td></tr>\
			<TR><TD class=xtab align=right>Coordinates only:</td><TD class=xtab><INPUT type=checkbox id=pacoordsOnly \></td></tr>\
			</table></div><BR><SPAN id=pasrchSizeWarn></span><DIV id=pbSrcExp></div>';
    } else {
		m+= '</select></td></tr><TR><TD class=xtab align=right>Misted:</td><TD class=xtab><INPUT name=pbfil id=pafilMisted type=CHECKBOX '+ (Options.mistedOnly?' CHECKED':'') +'\><td></tr>';
		m+= '<TR><TD class=xtab align=right>Hostile:</td><TD class=xtab><INPUT name=pbfil id=pafilHostile type=CHECKBOX '+ (Options.hostileOnly?' CHECKED':'') +'\><td></tr>';
		m+= '<TR><TD class=xtab align=right>Friendly:</td><TD class=xtab><INPUT name=pbfil id=pafilFriendly type=CHECKBOX '+ (Options.friendlyOnly?' CHECKED':'') +'\><td></tr>';
		m+= '<TR><TD class=xtab align=right>Allied:</td><TD class=xtab><INPUT name=pbfil id=pafilAllied type=CHECKBOX '+ (Options.alliedOnly?' CHECKED':'') +'\><td></tr>';
		m+= '<TR><TD class=xtab align=right>Neutral:</td><TD class=xtab><INPUT name=pbfil id=pafilNeutral type=CHECKBOX '+ (Options.neutralOnly?' CHECKED':'') +'\><td></tr>';
		m+= '<TR><TD class=xtab align=right>Unallianced:</td><TD class=xtab><INPUT name=pbfil id=pafilunAllied type=CHECKBOX '+ (Options.unalliedOnly?' CHECKED':'') +'\><td></tr>';
		m+= '<TR><TD class=xtab align=right>All:</td><TD class=xtab><INPUT name=pbfil id=pafilAll type=CHECKBOX '+ (Options.srcAll?' CHECKED':'') +'\><td></tr>';
		m+= '<TR><TD class=xtab align=right>Sort By:</td><TD class=xtab><SELECT id=pafilSortBy>\
          <OPTION value="might" '+ (Options.srcSortBy=='might'?'SELECTED':'')  +'>Might</option>\
             <OPTION value="dist" '+ (Options.srcSortBy=='dist'?'SELECTED':'')  +'>Distance</option>\
        </select></td></tr>\
		<TR><TD class=xtab align=right>Min might:</td><TD class=xtab><INPUT type=text id=paminmight size=6 value='+ Options.minmight +'>\
        <TR><TD class=xtab align=right>Coordinates only:</td><TD class=xtab><INPUT type=checkbox id=pacoordsOnly \></td></tr>\
        </table></div><BR><SPAN id=pasrchSizeWarn></span><DIV id=pbSrcExp></div>';
	
	}
    document.getElementById('padivOutOpts').innerHTML = m;
	 if (t.opt.searchType == 1 || t.opt.searchType == 0) {
    document.getElementById('pafilMinLvl').addEventListener ('change', function (){
      Options.srcMinLevel = document.getElementById('pafilMinLvl').value;
      saveOptions();
      t.dispMapTable ();
      }, false);
    document.getElementById('pafilMaxLvl').addEventListener ('change', function (){
      Options.srcMaxLevel = document.getElementById('pafilMaxLvl').value;
      saveOptions();
      t.dispMapTable ();
      }, false);
	  }
    document.getElementById('pafilSortBy').addEventListener ('change', function (){
      Options.srcSortBy = document.getElementById('pafilSortBy').value;
      saveOptions();
      t.dispMapTable ();
      }, false);
    document.getElementById('pacoordsOnly').addEventListener ('change', function (){ t.dispMapTable (); }, false);
    if (t.opt.searchType == 1){
      document.getElementById('pafilWildType').addEventListener ('change', function (){
        Options.wildType = document.getElementById('pafilWildType').value;
        saveOptions();
        t.dispMapTable ();
        }, false);
      document.getElementById('pafilUnowned').addEventListener ('change', function (){
        Options.unownedOnly = (document.getElementById('pafilUnowned').checked);
        saveOptions();
        t.dispMapTable ();
        }, false);
    }
	if (t.opt.searchType == 2){
		document.getElementById('pafilMisted').addEventListener ('change', function (){
        Options.mistedOnly = (document.getElementById('pafilMisted').checked);
		if(!Options.mistedOnly){
			document.getElementById('pafilAll').checked = false;
			Options.srcAll = Options.mistedOnly;
		}
        saveOptions();
        t.dispMapTable ();
        }, false);
		document.getElementById('pafilHostile').addEventListener ('change', function (){
        Options.hostileOnly = (document.getElementById('pafilHostile').checked);
		if(!Options.hostileOnly){
			document.getElementById('pafilAll').checked = false;
			Options.srcAll = Options.hostileOnly;
		}
        saveOptions();
        t.dispMapTable ();
        }, false);
		document.getElementById('pafilFriendly').addEventListener ('change', function (){
        Options.friendlyOnly = (document.getElementById('pafilFriendly').checked);
		if(!Options.friendlyOnly){
			document.getElementById('pafilAll').checked = false;
			Options.srcAll = Options.friendlyOnly;
		}
        saveOptions();
        t.dispMapTable ();
        }, false);
		document.getElementById('pafilAllied').addEventListener ('change', function (){
        Options.alliedOnly = (document.getElementById('pafilAllied').checked);
		if(!Options.alliedOnly){
			document.getElementById('pafilAll').checked = false;
			Options.srcAll = Options.alliedOnly;
		}
        saveOptions();
        t.dispMapTable ();
        }, false);
		document.getElementById('pafilNeutral').addEventListener ('change', function (){
        Options.neutralOnly = (document.getElementById('pafilNeutral').checked);
		if(!Options.neutralOnly){
			document.getElementById('pafilAll').checked = false;
			Options.srcAll = Options.neutralOnly;
		}
        saveOptions();
        t.dispMapTable ();
        }, false);
		document.getElementById('pafilunAllied').addEventListener ('change', function (){
        Options.unalliedOnly = (document.getElementById('pafilunAllied').checked);
		if(!Options.unalliedOnly){
			document.getElementById('pafilAll').checked = false;
			Options.srcAll = Options.unalliedOnly;
		}
        saveOptions();
        t.dispMapTable ();
        }, false);
		document.getElementById('pafilAll').addEventListener ('change', function (){
        Options.srcAll = (document.getElementById('pafilAll').checked);
		for(i in document.getElementsByName('pbfil'))
			document.getElementsByName('pbfil')[i].checked = Options.srcAll;
		Options.mistedOnly=Options.hostileOnly=Options.friendlyOnly=Options.alliedOnly=Options.neutralOnly=Options.unalliedOnly=Options.srcAll;
        saveOptions();
        t.dispMapTable ();
        }, false);
		document.getElementById('paminmight').addEventListener ('change', function (){
        Options.minmight = parseIntNan(document.getElementById('paminmight').value);
        saveOptions();
        t.dispMapTable ();
        }, false);
	
	}
	
    document.getElementById('pbAhideShow').addEventListener ('click', t.hideShowClicked, false);
	
    t.mapDat = [];
    t.firstX =  t.opt.startX - t.opt.maxDistance;
    t.lastX = t.opt.startX + t.opt.maxDistance;
    t.firstY =  t.opt.startY - t.opt.maxDistance;
    t.lastY = t.opt.startY + t.opt.maxDistance;
    t.tilesSearched = 0;
    t.tilesFound = 0;
    t.curX = t.firstX;
    t.curY = t.firstY;
    var xxx = t.MapAjax.normalize(t.curX);
    var yyy = t.MapAjax.normalize(t.curY);
    document.getElementById ('pastatStatus').innerHTML = 'Searching at '+ xxx +','+ yyy;
    setTimeout (function(){t.MapAjax.request (xxx, yyy, 15, t.eventgetplayeronline)}, MAP_DELAY);
  },

  hideShowClicked : function (){
    var div = document.getElementById('padivOutOpts');
    if (div.style.display == 'none'){
      div.style.display = 'block';
      document.getElementById('spanHideShow').innerHTML = 'H I D E';
    } else {
      div.style.display = 'none';
      document.getElementById('spanHideShow').innerHTML = 'S H O W';
    }
  },
  
  dispMapTable : function (){
    var tileNames = ['Barb Camp', 'Grassland', 'Lake', 'Woodlands', 'Hills', 'Mountain', 'Plain', null, 'Dark Forest' ];
    var t = Tabs.Search;
    var coordsOnly = document.getElementById('pacoordsOnly').checked;
    if (DEBUG_SEARCH) DebugTimer.start();
     function mySort(a, b){
      if (Options.srcSortBy == 'level'){
        if ((x = a[4] - b[4]) != 0)
          return x;
      }
	  if (Options.srcSortBy == 'might'){
        if ((x = b[10] - a[10]) != 0)
          return x;
      }
      return a[2] - b[2];
    }
	
    dat = [];
    for (i=0; i<t.mapDat.length; i++){
      lvl = parseInt (t.mapDat[i][4]);
      type = t.mapDat[i][3];
      if (t.opt.searchType==2 && type==7 ) {
		if(t.mapDat[i][10] >= Options.minmight || t.mapDat[i][5])
		if((Options.hostileOnly && t.mapDat[i][12] == 'h') ||
		   (Options.mistedOnly && t.mapDat[i][5]===true) ||
		   (Options.friendlyOnly && t.mapDat[i][12] == 'f') ||
		   (Options.alliedOnly && t.mapDat[i][12] == 'a') ||
		   (Options.neutralOnly && t.mapDat[i][12] == 'n') ||
		   (Options.unalliedOnly && t.mapDat[i][12] == 'u') ||
		   (Options.srcAll))
				dat.push(t.mapDat[i]);
      } else {
       if (lvl>=Options.srcMinLevel && lvl<=Options.srcMaxLevel){
        if (t.opt.searchType==0 || Options.wildType==0
        ||  (Options.wildType==1 && (type==1 || type==2))
        ||  (Options.wildType == type)){
          if (!Options.unownedOnly || t.mapDat[i][5]===false)
            dat.push (t.mapDat[i]);
        }
       }
	  }
    }
    if (DEBUG_SEARCH) DebugTimer.display('SEACHdraw: FILTER');

    document.getElementById('pastatFound').innerHTML = 'Found: '+ dat.length;
    if (dat.length == 0){
      m = '<BR><CENTER>None found</center>';
    } else {
      dat.sort(mySort);
      if (DEBUG_SEARCH) DebugTimer.display('SEACHdraw: SORT');
      if (coordsOnly)
        m = '<TABLE align=center id=pasrcOutTab cellpadding=0 cellspacing=0><TR style="font-weight: bold"><TD>Location</td></tr>';
      else {
      if (t.opt.searchType == 2) {
			 m = '<TABLE id=pasrcOutTab class=pbSrchResults cellpadding=0 cellspacing=0><TR style="font-weight: bold"><TD>Loc</td><TD align=right>Dist</td><TD>Player</td><TD align=right>Might</td><TD>Alliance</td><TD>Online</td><TD></td></tr>';
		} else {
			m = '<TABLE id=pasrcOutTab cellpadding=0 cellspacing=0><TR style="font-weight: bold"><TD>Location</td><TD style="padding-left: 10px">Distance</td><TD style="padding-left: 10px;">Lvl</td><TD width=100px> &nbsp; Type</td><TD></td><TD>Export to Raid</td></tr>';
		}
	}
      var numRows = dat.length;
      if (numRows > t.MAX_SHOW_WHILE_RUNNING && t.searchRunning){
        numRows = t.MAX_SHOW_WHILE_RUNNING;
        document.getElementById('pasrchSizeWarn').innerHTML = '<FONT COLOR=#600000>NOTE: Table only shows '+ t.MAX_SHOW_WHILE_RUNNING +' of '+ dat.length +' results until search is complete.</font>';
      }
      for (i=0; i<numRows; i++){
        m += '<TR><TD><DIV onclick="pbGotoMap('+ dat[i][0] +','+ dat[i][1] +')"><A>'+ dat[i][0] +','+ dat[i][1] +'</a></div></td>';
        if (coordsOnly) {
          m += '</tr>';
        } else {
          if (t.opt.searchType == 2) { // city search
            m += '<TD align="right" >'+ dat[i][2].toFixed(2) +'</td>';
            if (dat[i][5])
              m += '<TD colspan=4>* MISTED * &nbsp; &nbsp; <SPAN onclick="pbSearchScout('+ dat[i][0] +','+ dat[i][1] +');return false;"><A>Scout</a></span></td></tr>';
            else{
              var allStyle = '';
              if (dat[i][12]=='f')
                allStyle = 'class=pbTextFriendly';
              else if (dat[i][12]=='h')
                allStyle = 'class=pbTextHostile';
              m += '<TD>'+ dat[i][9]+'</td><TD align=right>'+ dat[i][10] +'</td><TD><SPAN '+ allStyle +'>'+ dat[i][11]+'</span></td><TD>'+(dat[i][13]?'<SPAN class=boldDarkRed>ONLINE</span>':'')+'</td><TD><A onclick="pbSearchLookup('+ dat[i][7] +')">Lookup</a></td></tr>';
            }
			} else {
          m += '<TD align=right  valign="top">'+ dat[i][2].toFixed(2) +' &nbsp; </td><TD align=right>'+ dat[i][4] +'</td><TD> &nbsp; '+ tileNames[dat[i][3]]
            +'</td><TD  valign="top">'+ (dat[i][5]?(dat[i][6]!=0?' <A onclick="pbSearchLookup('+dat[i][6]+')">OWNED</a>':'<A onclick="pbSearchScout('+ dat[i][0] +','+ dat[i][1] +');return false;">MISTED</a>'):'') +'</td>';
          if (t.opt.searchType == 0) m+= '<TD align=center  valign="top"><A onclick="pbExportToRaid('+ dat[i][0]+','+dat[i][1] +')">Export</a></td>';
          m+='</tr>';
			}
		}
			
       }
      m += '</table>';
    }
    document.getElementById('padivOutTab').innerHTML = m;
    dat = null;
    if (DEBUG_SEARCH) DebugTimer.display('SEACHdraw: DRAW');
  },

  mapDat : [],

  stopSearch : function (msg){
    var t = Tabs.Search;
    document.getElementById ('pastatStatus').innerHTML = '<FONT color=#ffaaaa>'+ msg +'</font>';
    document.getElementById ('pasrcStart').value = 'Start Search';
    document.getElementById ('pasrchSizeWarn').innerHTML = '';
    if (t.opt.searchType==0 && document.getElementById('KOCAttackToggle')!=null){    
      document.getElementById ('pbSrcExp').innerHTML = '<CENTER>'+ strButton20('Export Results', 'id=pbSrcDoExp') +'</center>';
      document.getElementById ('pbSrcDoExp').addEventListener ('click', t.exportKOCattack, false);
    }
	if (t.opt.searchType==2){
	  document.getElementById ('pbSrcExp').innerHTML = '<CENTER>'+ strButton20('Generate Scout List', 'id=pbSrcDoScout') +'</center>';
      document.getElementById ('pbSrcDoScout').addEventListener ('click', t.generateScoutList, false);
	}
    t.searchRunning = false;
    t.dispMapTable();
  },

  exportKOCattack : function (){
    var t = Tabs.Search;
    var bulkAdds = {};
    for (i=1; i<11; i++)
      bulkAdds['lvl'+ i] = [];
    for (i=0; i<t.mapDat.length; i++){
      var lvl = parseInt (t.mapDat[i][4]);
      if (lvl>=Options.srcMinLevel && lvl<=Options.srcMaxLevel && t.mapDat[i][3]==0)
        bulkAdds['lvl'+ lvl].push({x:t.mapDat[i][0], y:t.mapDat[i][1]});
    }
    exportToKOCattack.doExport (bulkAdds, t.selectedCity);
  },
  
  generateScoutList : function (){
    var t = Tabs.Search;
    var bulkScout = [];
    for (i=0; i<t.mapDat.length; i++){
      if (t.mapDat[i][3] == 7){
		if(t.mapDat[i][10] >= Options.minmight || t.mapDat[i][5]){
		if((Options.hostileOnly && t.mapDat[i][12] == 'h') ||
		   (Options.mistedOnly && t.mapDat[i][5]===true) ||
		   (Options.friendlyOnly && t.mapDat[i][12] == 'f') ||
		   (Options.alliedOnly && t.mapDat[i][12] == 'a') ||
		   (Options.neutralOnly && t.mapDat[i][12] == 'n') ||
		   (Options.unalliedOnly && t.mapDat[i][12] == 'u') ||
		   (Options.srcAll))
			bulkScout.push({x:t.mapDat[i][0], y:t.mapDat[i][1], dist:t.mapDat[i][2]});
		}
	  }
    }
	if(t.selectedCity == null)
		t.selectedCity = Cities.cities[0];
    t.ShowScoutList (bulkScout, t.selectedCity);
  },
  ShowScoutList : function (coordlist, city){
	var t = Tabs.Search;
	var popScout = null;
	t.scoutcity = city;
	
	if(popScout==null){
	  popScout = new CPopup ('pbsrcscout', 0,0, 350,500, true, function (){popScout.destroy(); popScout=null;});
      popScout.centerMe (mainPop.getMainDiv());  
    }
	var m = '<DIV class=pbStat>Auto Scout Options</div>';
		m += '<DIV>Amount of Scouts to send: <input id=pbsrcScoutAmt value="'+Options.srcScoutAmt+'" /></div><BR>';
		m += '<DIV>Select City: <span id=pbsrcScoutcitypick> </span></div><BR>';
		m += '<DIV class=pbStat>Scout from <span id=pbsrcScoutcity>'+city.name+'</span> <BR> Total targets '+coordlist.length+'</div>';
		m += '<DIV style="max-height:220px; overflow-y:auto;"><TABLE align=center cellpadding=0 cellspacing=0 class=pbTabPadNW><TR style="font-weight:bold; background-color:white"><TD width=15><input type=checkbox id=pbsrcScout_All /></td><TD>Target Coords</td></tr>';
	  for(i=0; i<coordlist.length; i++){
			m += '<TR style="background-color:white"><TD><input type=checkbox name=pbsrcScoutCheck id="pbsrcScoutCheck_'+coordlist[i].x+'_'+coordlist[i].y+'" value="'+coordlist[i].x+'_'+coordlist[i].y+'" /></td><TD>'+coordLink(coordlist[i].x,coordlist[i].y)+'</td></tr>';
	  }
	    m += '</table></div>';
		m += '<BR><CENTER>'+ strButton20('Start Scout', 'id=pbSrcStartScout') +'</center>';
		m += '<CENTER><DIV style="width:70%; max-height:75px; overflow-y:auto;" id=pbSrcScoutResult></DIV></center>';
	popScout.getMainDiv().innerHTML = m;
	new CdispCityPicker ('pbScoutPick', document.getElementById('pbsrcScoutcitypick'), false, function(c,x,y){document.getElementById('pbsrcScoutcity').innerHTML = c.name; t.scoutcity = c; }, city.idx);
	popScout.getTopDiv().innerHTML = '<CENTER><B>Power Bot Scout List</b></center>';
	popScout.show(true);
	
	document.getElementById('pbsrcScoutAmt').addEventListener('change', function(){
		Options.srcScoutAmt = parseInt(document.getElementById('pbsrcScoutAmt').value);
		saveOptions();
	}, false);
	document.getElementById('pbsrcScout_All').addEventListener('change', function(){
		for(k in document.getElementsByName('pbsrcScoutCheck'))
			document.getElementsByName('pbsrcScoutCheck')[k].checked = document.getElementById('pbsrcScout_All').checked;
	}, false);
	document.getElementById('pbSrcStartScout').addEventListener('click', t.clickedStartScout, false);
  },
  scouting : false,
  scoutcity : null,
  doScout : function(list, city){
	var t = Tabs.Search;
	document.getElementById('pbSrcScoutResult').innerHTML = '';
	if(list.length < 1){
		document.getElementById('pbSrcScoutResult').innerHTML = '<SPAN class=boldRed>ERROR: No coords selected</span>';
		t.clickedStartScout();
		return;
	}
	if(parseInt(Seed.units['city'+city.id]['unt'+3]) < Options.srcScoutAmt){
		document.getElementById('pbSrcScoutResult').innerHTML = '<SPAN class=boldRed>ERROR: No scouts available</span>';
		t.clickedStartScout();
		return;
	}
	t.doScoutCount(list, city, list.length, 0);
	
  },
  doScoutCount : function(list, city, total, count){
	var t = Tabs.Search;
	if(!t.scouting){
		document.getElementById('pbSrcScoutResult').innerHTML += '<SPAN class=boldRed>Scouting stopped by user</span><BR>';
		document.getElementById('pbSrcStartScout').className = 'button20 ptButton20';
		document.getElementById('pbSrcStartScout').innerHTML = '<SPAN>Start Scout</span>';
		return;
	}
	if(total <= (count)){
		document.getElementById('pbSrcScoutResult').innerHTML += 'Done!<BR>';
		t.clickedStartScout();
		return;
	}
	var rallypointlevel = t.getRallypoint(city.id);
	if(rallypointlevel == 12) rallypointlevel = 11;
	var slots = 0;
       for (z in Seed.queue_atkp['city'+city.id]){
             slots++;
       }
    if  (Seed.queue_atkp['city'+city.id].toSource() == "[]") slots=0;

	if(slots >= rallypointlevel){
		setTimeout(function(){t.doScoutCount(list, city, total, count)}, 5000);
		document.getElementById('pbSrcScoutResult').innerHTML += 'Waiting for rally point to clear...';
		return;
	}
	var coords = list[count].split("_");
	if(coords[0] == 'undefined' || coords[1] == 'undefined'){
		document.getElementById('pbSrcScoutResult').innerHTML += '<SPAN class=boldRed>ERROR: Invalid coords</span>';
		t.clickedStartScout();
		return;
	}
	document.getElementById('pbSrcScoutResult').innerHTML += 'Sending scouts to '+coords[0]+','+coords[1]+'...';
	document.getElementById('pbsrcScoutCheck_'+coords[0]+'_'+coords[1]).checked = false;
	t.sendScout(coords[0], coords[1], city, count, function(c){t.doScoutCount(list, city, total, c)});
  },
  sendScout : function(x, y, city, count, notify){
	var t = Tabs.Search;
	count = parseInt(count);
	var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
    params.cid = city.id;
	params.kid = 0;
	params.type = 3;
	params.xcoord = x;
	params.ycoord = y;
	params.u3 = Options.srcScoutAmt;
	new AjaxRequest(unsafeWindow.g_ajaxpath + "ajax/march.php" + unsafeWindow.g_ajaxsuffix, {
		 method: "post",
		 parameters: params,
		 loading: true,
		 onSuccess: function (rslt) {
		 rslt = eval("(" + rslt.responseText + ")");
		 if (rslt.ok) {
			 var timediff = parseInt(rslt.eta) - parseInt(rslt.initTS);
			 var ut = unixTime();
			 var unitsarr=[0,0,0,0,0,0,0,0,0,0,0,0,0];
			 var resources=[0,0,0,0,0,0,0,0,0,0,0,0,0];
			 for(i = 0; i <= unitsarr.length; i++){
				if(params["u"+i]){
				unitsarr[i] = params["u"+i];
				}
			 }
			 var currentcityid = params.cid;
			 unsafeWindow.attach_addoutgoingmarch(rslt.marchId, rslt.marchUnixTime, ut + timediff, params.xcoord, params.ycoord, unitsarr, params.type, params.kid, resources, rslt.tileId, rslt.tileType, rslt.tileLevel, currentcityid, true);
			 if(rslt.updateSeed){unsafeWindow.update_seed(rslt.updateSeed)};
			 document.getElementById('pbSrcScoutResult').innerHTML += 'Sent!<BR>';
			 if (notify)
			  setTimeout(function(){ notify(count+1); }, 1000);
		 } else {
			 document.getElementById('pbSrcScoutResult').innerHTML += 'Failed! Retrying....<BR>';
			 if (notify)
			  setTimeout(function(){ notify(count); }, 1000);
		  }
		},
		onFailure: function () {}
  		});
  },
  getRallypoint: function(cityId){
      var t = Tabs.Search;
	  cityId = 'city'+cityId;
      for (o in Seed.buildings[cityId]){
		var buildingType = parseInt(Seed.buildings[cityId][o][0]);
		var buildingLevel = parseInt(Seed.buildings[cityId][o][1]);
		if (buildingType == 12){
			return parseInt(buildingLevel);
			break;
		}
	   }
	  return 0;
    },
	clickedStartScout : function(){
	var t = Tabs.Search;
		if(t.scouting == false){
			t.scouting = true;
			var ScoutList = [];
			for(k=0; k<document.getElementsByName('pbsrcScoutCheck').length; k++){
				if(document.getElementsByName('pbsrcScoutCheck')[k].checked){
					ScoutList.push(document.getElementsByName('pbsrcScoutCheck')[k].value);
				}
			}
			t.doScout(ScoutList, t.scoutcity);
			document.getElementById('pbSrcStartScout').className = 'button20 pbButCancel';
			document.getElementById('pbSrcStartScout').innerHTML = '<SPAN>Stop</span>';
		} else {
			t.scouting = false;
			document.getElementById('pbSrcStartScout').className = 'button20 ptButton20';
			document.getElementById('pbSrcStartScout').innerHTML = '<SPAN>Start Scout</span>';
		}
	},
    
  
/** mapdata.userInfo:
(object) u4127810 = [object Object]
    (string) n = George2gh02    (name)
    (string) t = 1              (title code)
    (string) m = 55             (might)
    (string) s = M              (sex)
    (string) w = 2              (mode: 1=normal, 2=begprotect, 3=truce, 4=vacation )
    (string) a = 0              (alliance)
    (string) i = 1              (avatar code)
*****/
  mapCallback : function (uList){
    var t = Tabs.Search;

    var rslt = t.SearchList;
	map = rslt.data;
    var Dip = Seed.allianceDiplomacies;	
    var userInfo = rslt.userInfo;
    var alliance = rslt.allianceNames;
	
    for (k in map){
      if (t.opt.searchType==0 && map[k].tileType==51 && !map[k].tileCityId ) {  // if barb
        type = 0;
      } else if (t.opt.searchType==1 && map[k].tileType>=10 &&  map[k].tileType<=50) { // if wild
        if (map[k].tileType == 10)
          type = 1;
        else if (map[k].tileType == 11)
          type = 2;
        else
          type = (map[k].tileType/10) + 1;
      } else if (t.opt.searchType==1 && map[k].tileType==54) {
		    type = 8;
      } else if (t.opt.searchType==2 && map[k].tileCityId>=0 && map[k].tileType>50 && map[k].cityName) {
		    type = 7;
      } else
        continue;
        
      var dist = distance (t.opt.startX, t.opt.startY, map[k].xCoord, map[k].yCoord);
      if ((t.opt.searchShape=='circle' && dist <= t.opt.maxDistance)
      ||  (t.opt.searchShape=='square' && map[k].xCoord>=t.firstX && map[k].xCoord<=t.lastX && map[k].yCoord>=t.firstY && map[k].yCoord<=t.lastY)){
	  	  if (t.opt.searchType==2) {    // if city search
    			var isMisted = map[k].tileUserId == 0 || false;		
    			var uu = 'u'+map[k].tileUserId;
    			var aD = '';
  				var nameU = '';
  				var mightU = '';
  				var aU = '';
    			if (!isMisted && userInfo[uu]) {
    				nameU = userInfo[uu].n;   // can error, must check if (userInfo[uu])
    				mightU = userInfo[uu].m;
    				if (alliance['a'+userInfo[uu].a])
    					aU = alliance['a'+userInfo[uu].a];
    				else
    				  aU = '----';
    				aD = '';
    				if (Dip.friendly && Dip.friendly['a'+userInfo[uu].a]) aD = 'f';
    				if (Dip.hostile && Dip.hostile['a'+userInfo[uu].a]) aD = 'h';
					if (Dip.allianceId && Dip.allianceId==userInfo[uu].a) aD = 'a';
					if (getDiplomacy(userInfo[uu].a) == 'neutral') aD = 'n';
					if (!userInfo[uu].a || userInfo[uu].a==0) aD = 'u';
					
    			}
// TODO: save memory, remove city name ?   			
          t.mapDat.push ([map[k].xCoord, map[k].yCoord, dist, type, map[k].tileLevel, isMisted, map[k].tileCityId, map[k].tileUserId, map[k].cityName, nameU, mightU, aU, aD, uList.data[map[k].tileUserId]?1:0]);
        } else {
          isOwned = map[k].tileUserId>0 || map[k].misted;
          t.mapDat.push ([map[k].xCoord, map[k].yCoord, dist, type, map[k].tileLevel, isOwned, (map[k].tileUserId>0? map[k].tileUserId : 0), uList.data[map[k].tileUserId]?1:0]);
        }
        ++t.tilesFound;
      }
    }
    
    t.tilesSearched += (15*15);
    document.getElementById('pastatSearched').innerHTML = 'Searched: '+ t.tilesSearched;
    t.dispMapTable();

    t.curX += 15;
    if (t.curX > t.lastX){
      t.curX = t.firstX;
      t.curY += 15;
      if (t.curY > t.lastY){
        t.stopSearch ('Done!');
        return;
      }
    }
    var x = t.MapAjax.normalize(t.curX);
    var y = t.MapAjax.normalize(t.curY);
    document.getElementById ('pastatStatus').innerHTML = 'Searching at '+ x +','+ y;
    setTimeout (function(){t.MapAjax.request (x, y, 15, t.eventgetplayeronline)}, MAP_DELAY);
  },
  
  eventgetplayeronline : function (left, top, width, rslt){
	var t = Tabs.Search;
    if (!t.searchRunning)
      return;
    if (!rslt.ok){
      t.stopSearch ('ERROR: '+ rslt.errorMsg);
      return;
    }
	
	map = rslt.data;
	t.SearchList = rslt;
	var uList = [];
	for(k in map){
		if(map[k].tileUserId != null)
			uList.push(map[k].tileUserId);
	}
	t.fetchPlayerStatus (uList, function(r){ t.mapCallback(r)});
  },

  clickedScout : function (x, y){
    unsafeWindow.modal_attack (3, x, y);
    CwaitForElement ('modal_attack', 5000, function (){document.getElementById('modalBox1').style.zIndex='112000'});
  },
    
  clickedLookup : function (pid){
    var t = Tabs.Search;
    var pop = new CPopup ('pbsrclookup', 0,0, 500,500, true);
    if (t.popFirst){
      pop.centerMe (mainPop.getMainDiv());  
      t.popFirst = false;
    }
    pop.getTopDiv().innerHTML = '<CENTER><B>Player Lookup</b></center>';
    pop.getMainDiv().innerHTML = '<DIV class=pbStat>Leaderboard information</div><SPAN id=pblupLB>Looking up leaderboard...</span>\
      <BR><DIV class=pbStat>Alliance Lookup</div><SPAN id=pblupAI>Looking up alliance info...</span>';
    pop.show (true);
    t.fetchLeaderboard (pid, function (r){t.gotPlayerLeaderboard(r, document.getElementById('pblupLB'))});
    t.fetchPlayerInfo (pid, function (r){t.gotPlayerInfo(r, document.getElementById('pblupAI'))});
  },

  ExportToRaid : function (X,Y){
    var t = Tabs.Search;
    var cityId =t.selectedCity['id'];
    var pop = new CPopup ('pbExportRaid', 0,0, 800,300, true);
    if (t.popFirst){
      pop.centerMe (mainPop.getMainDiv());  
      t.popFirst = false;
    }
    pop.getTopDiv().innerHTML = '<CENTER><B>Export to Raid</b></center>';
    
	  var m = '<TABLE id=pbRaidAdd width=100% height=0% class=pbTab><TR align="center">';
	  m += '<TR><TD rowspan="2"><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_1_50.jpg?6545"></td>';
	  m += '<TD>'+ addCommas(Seed.units['city'+cityId]['unt1']) +'</td>'
	  m += '<TD rowspan="2"><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_2_50.jpg?6545"></td>'
	  m += '<TD>'+ addCommas(Seed.units['city'+cityId]['unt2']) +'</td>'
	  m += '<TD rowspan="2"><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_3_50.jpg?6545"></td>'
	  m += '<TD>'+ addCommas(Seed.units['city'+cityId]['unt3']) +'</td>'
	  m += '<TD rowspan="2"><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_4_50.jpg?6545"></td>'
	  m += '<TD>'+ addCommas(Seed.units['city'+cityId]['unt4']) +'</td></tr>'
	  m += '<TR><TD><INPUT id=Unit1 type=text size=6 maxlength=6 value="0"></td>';
	  m += '<TD><INPUT id=Unit2 type=text size=6 maxlength=6 value="0"></td>';
	  m += '<TD><INPUT id=Unit3 type=text size=6 maxlength=6 value="0"></td>';
	  m += '<TD><INPUT id=Unit4 type=text size=6 maxlength=6 value="0"></td></tr>';
	  
	  m += '<TR><TD rowspan="2"><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_5_50.jpg?6545"></td>';
	  m += '<TD>'+ addCommas(Seed.units['city'+cityId]['unt5']) +'</td>'
	  m += '<TD rowspan="2"><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_6_50.jpg?6545"></td>'
	  m += '<TD>'+ addCommas(Seed.units['city'+cityId]['unt6']) +'</td>'
	  m += '<TD rowspan="2"><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_7_50.jpg?6545"></td>'
	  m += '<TD>'+ addCommas(Seed.units['city'+cityId]['unt7']) +'</td>'
	  m += '<TD rowspan="2"><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_8_50.jpg?6545"></td>'
	  m += '<TD>'+ addCommas(Seed.units['city'+cityId]['unt8']) +'</td></tr>'
	  m += '<TR><TD><INPUT id=Unit5 type=text size=6 maxlength=6 value="0"></td>';
	  m += '<TD><INPUT id=Unit6 type=text size=6 maxlength=6 value="0"></td>';
	  m += '<TD><INPUT id=Unit7 type=text size=6 maxlength=6 value="0"></td>';
	  m += '<TD><INPUT id=Unit8 type=text size=6 maxlength=6 value="0"></td></tr>';
	  
	  m += '<TR><TD rowspan="2"><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_9_50.jpg?6545"></td>';
	  m += '<TD>'+ addCommas(Seed.units['city'+cityId]['unt9']) +'</td>'
	  m += '<TD rowspan="2"><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_10_50.jpg?6545"></td>'
	  m += '<TD>'+ addCommas(Seed.units['city'+cityId]['unt10']) +'</td>'
	  m += '<TD rowspan="2"><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_11_50.jpg?6545"></td>'
	  m += '<TD>'+ addCommas(Seed.units['city'+cityId]['unt11']) +'</td>'
	  m += '<TD rowspan="2"><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_12_50.jpg?6545"></td>'
	  m += '<TD>'+ addCommas(Seed.units['city'+cityId]['unt12']) +'</td></tr>'
	  m += '<TR><TD><INPUT id=Unit9 type=text size=6 maxlength=6 value="0"></td>';
	  m += '<TD><INPUT id=Unit10 type=text size=6 maxlength=6 value="0"></td>';
	  m += '<TD><INPUT id=Unit11 type=text size=6 maxlength=6 value="0"></td>';
	  m += '<TD><INPUT id=Unit12 type=text size=6 maxlength=6 value="0"></td></tr></table>';
	  
	  m += '<BR><CENTER>' +strButton20('Help', 'id=pbHelp')+'<SELECT id=RaidKnights type=list></select></center>';
	  m+= '<BR><CENTER>'+ strButton20('Raid and save', 'id=pbRaidSave') +'</center>';
          
    pop.getMainDiv().innerHTML = m;
    
    t.getKnights();
    
    document.getElementById ('pbHelp').addEventListener ('click', t.helpPop, false);
    document.getElementById ('pbRaidSave').addEventListener ('click', function(){
    	var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
    			  		
    	params.pf = 0;
        params.ctrl = 'BotManager';
    	params.action = 'saveMarch';
    	params.settings = {};
    	params.settings.cityId = cityId;
    	params.queue = {0:{botMarches:{botMarchStatus:1,botState:1},cityMarches:{}}};    	
    	params.queue[0].cityMarches.knightId = parseInt(document.getElementById ('RaidKnights').value);
    	params.queue[0].cityMarches.toXCoord = X;
    	params.queue[0].cityMarches.toYCoord = Y;
    	params.queue[0].cityMarches.unit0Count = 0;
    	params.queue[0].cityMarches.unit1Count = parseInt(document.getElementById ('Unit1').value);
    	params.queue[0].cityMarches.unit2Count = parseInt(document.getElementById ('Unit2').value);
    	params.queue[0].cityMarches.unit3Count = parseInt(document.getElementById ('Unit3').value);
    	params.queue[0].cityMarches.unit4Count = parseInt(document.getElementById ('Unit4').value);
    	params.queue[0].cityMarches.unit5Count = parseInt(document.getElementById ('Unit5').value);
    	params.queue[0].cityMarches.unit6Count = parseInt(document.getElementById ('Unit6').value);
    	params.queue[0].cityMarches.unit7Count = parseInt(document.getElementById ('Unit7').value);
    	params.queue[0].cityMarches.unit8Count = parseInt(document.getElementById ('Unit8').value);
    	params.queue[0].cityMarches.unit9Count = parseInt(document.getElementById ('Unit9').value);
    	params.queue[0].cityMarches.unit10Count = parseInt(document.getElementById ('Unit10').value);
    	params.queue[0].cityMarches.unit11Count = parseInt(document.getElementById ('Unit11').value);
    	params.queue[0].cityMarches.unit12Count = parseInt(document.getElementById ('Unit12').value);
    	
    	 new AjaxRequest2(unsafeWindow.g_ajaxpath + "ajax/_dispatch.php" + unsafeWindow.g_ajaxsuffix, {
			  		method: "post",
			         parameters: params,
					 loading: true,
					 onSuccess: function(transport){
						var rslt = eval("(" + transport.responseText + ")");
	                      if (rslt.ok) {
	                      		pop.show (false);
								unsafeWindow.cityinfo_army();
	                          setTimeout(unsafeWindow.update_seed_ajax, 250);
						 } else ('Error :' + rslt.msg);
						 
					 },
			 });
    	}, false);
    
    pop.show (true);
  },
  
  
  getKnights : function(){
         var t = Tabs.Search;
         var knt = new Array();
         cityId = t.selectedCity['id'];
         for (k in Seed.knights['city' + cityId]){
         		if (Seed.knights['city' + cityId][k]["knightStatus"] == 1 && Seed.leaders['city' + cityId]["resourcefulnessKnightId"] != Seed.knights['city' + cityId][k]["knightId"] && Seed.leaders['city' + cityId]["politicsKnightId"] != Seed.knights['city' + cityId][k]["knightId"] && Seed.leaders['city' + cityId]["combatKnightId"] != Seed.knights['city' + cityId][k]["knightId"] && Seed.leaders['city' + cityId]["intelligenceKnightId"] != Seed.knights['city' + cityId][k]["knightId"]){
         			knt.push ({
         				Name:   Seed.knights['city' + cityId][k]["knightName"],
         				Combat:	parseInt(Seed.knights['city' + cityId][k]["combat"]),
         				ID:		Seed.knights['city' + cityId][k]["knightId"],
         			});
         		}
         }
         knt = knt.sort(function sort(a,b) {a = a['Combat'];b = b['Combat'];return a == b ? 0 : (a > b ? -1 : 1);});
         document.getElementById('RaidKnights').options.length=0;
  		var o = document.createElement("option");
  		o.text = '--Choose a Knight--';
  		o.value = 0;
  		document.getElementById("RaidKnights").options.add(o);
         for (k in knt){
      			if (knt[k]["Name"] !=undefined){
  	    			var o = document.createElement("option");
  	    			o.text = (knt[k]["Name"] + ' (' + knt[k]["Combat"] +')')
  	    			o.value = knt[k]["ID"];
  	    			document.getElementById("RaidKnights").options.add(o);
      			}
      	}
      },
  
  
  
  gotPlayerLeaderboard : function (rslt, span){
    var t = Tabs.Search;
    if (!rslt.ok){
      span.innerHTML = rslt.errorMsg;
      return;
    }
    if (rslt.totalResults == 0){
      span.innerHTML = '<B>Leaderboard:</b> Not found! (misted?)<BR><BR>';
      return;
    }
    var p = rslt.results[0];
    var x;
    var name = '';
    if (p.playerSex == 'M')
      name = 'Lord ';
    else if (p.playerSex == 'F')
      name = 'Lady ';   
    name += p.displayName;      
    if ((x = officerId2String(p.officerType)) != '')  
      name += ' ('+ x + ')';  
    var aName = p.allianceName;
    if (!aName || aName=='')
      aName = 'none';
             
    var m = '<CENTER><SPAN class=boldRed>NOTE: Leaderboard information is delayed up to 24 hours</span></center><TABLE class=pbTabSome>';
    m += '<TR><TD class=pbDetLeft>Player Name:</td><TD>'+ name +'</td></tr>\
      <TR><TD class=pbDetLeft>Might:</td><TD>'+ p.might +' (rank #'+ p.rank +')</td></tr>\
      <TR><TD class=pbDetLeft>Alliance:</td><TD>'+ aName +' ('+ getDiplomacy(p.allianceId) +')</td></tr>\
      <TR valign=top><TD class=pbDetLeft>Cities:</td><TD><TABLE class=pbTabSome><TR style="font-weight:bold"><TD>City Name</td><TD>Coords</td><TD>Level</td><TD>Status</td><TD>Created</td></tr>';
      
    for (var i=0; i<p.cities.length; i++){
      var c = p.cities[i];
      var created = '';
      if (c.dateCreated && c.dateCreated.substr(0,2)=='20')
        created = c.dateCreated.substr(0,10);
      m += '<TR><TD>'+ c.cityName +'</td><TD>'+ coordLink(c.xCoord, c.yCoord) +'</td><TD align=center>'+ c.tileLevel +'</td>\
          <TD>'+ cityStatusString (c.cityStatus) +'</td><TD>'+ created +'</td></tr>';
    }    
    m += '</table></td></tr></table>';
    span.innerHTML = m;
  },

  gotPlayerInfo : function (rslt, span){
    var t = Tabs.Search;
    if (!rslt.ok){
      span.innerHTML = rslt.errorMsg;
      return;
    }
    var m = '<TABLE class=pbTabSome>';
    var p = rslt.userInfo[0];
    var pids = p.provinceIds.split (',');
    var prov = [];
    for (var i=0; i<pids.length; i++)
      prov.push(unsafeWindow.provincenames['p'+pids[i]]);
    m += '<TR><TD class=pbDetLeft>Player Name:</td><TD>'+ p.genderAndName +'</td></tr>\
      <TR><TD class=pbDetLeft>Might:</td><TD>'+ p.might +'</td></tr>\
      <TR><TD class=pbDetLeft>Facebook profile:</td><TD><A target="_tab" href="http://www.facebook.com/profile.php?id='+ p.fbuid +'">Click to open in new tab</a></td></tr>\
      <TR><TD class=pbDetLeft>Alliance:</td><TD>'+ p.allianceName +' ('+ getDiplomacy(p.allianceId) +')</td></tr>\
      <TR valign=top><TD class=pbDetLeft>Provinces:</td><TD style="white-space:normal">'+ prov.join(', ') +'</td></tr>';
    span.innerHTML = m + '</table>';
  },
      
  fetchPlayerInfo : function (uid, notify){
    var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
    params.uid = uid;
    new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/getUserGeneralInfo.php" + unsafeWindow.g_ajaxsuffix, {
      method: "post",
      parameters: params,
      onSuccess: function (rslt) {
        notify (rslt);
      },
      onSuccess: function (rslt) {
        notify (rslt);
      },
    });
  },
  fetchLeaderboard : function (uid, notify) {
    var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
    params.userId = uid;
    new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/getUserLeaderboard.php" + unsafeWindow.g_ajaxsuffix, {
      method: "post",
      parameters: params,
      onSuccess: function (rslt) {
        notify (rslt);
      },
      onFailure: function (rslt) {
        notify (rslt);
      },
    });
  },
  fetchPlayerStatus : function (uidArray, notify){
    var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
    params.checkArr = uidArray.join(',');
    new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/getOnline.php" + unsafeWindow.g_ajaxsuffix, {
      method: "post",
      parameters: params,
      onSuccess: function (rslt) {
        notify (rslt);
      },
      onFailure: function (rslt) {
        notify ({errorMsg:'AJAX error'});
      },
    });
  },
  
};   // end Search tab


/******** Export to KOC Attack **********/  

var exportToKOCattack = {
  troops : {},  
  init : function (){
    var t = exportToKOCattack;
    for (var b=1; b<11; b++){
      t.troops['b'+ b] = [];
      for (var trp=0; trp<12; trp++){
        t.troops['b'+ b][trp] = 0;
      }
    }
    var s = GM_getValue ('atkTroops_'+ getServerId(), null);
    if (s != null){
      var trp = JSON2.parse(s);
      for (var b=1; b<11; b++){
        if (trp['b'+ b] && trp['b'+ b].length == 12)
          t.troops['b'+ b] = trp['b'+ b];
      }
    }
    window.addEventListener('unload', t.onUnload, false);
  },
  
  onUnload : function (){
    var t = exportToKOCattack;
    if (!ResetAll) GM_setValue ('atkTroops_'+ getServerId(),  JSON2.stringify(t.troops));
  },
  
  doExport : function (coordList, city){
    var t = exportToKOCattack;
    var popExp = null;
    var cList = coordList;
    var curLevel = 0;
    var city = city;
    var troopDef = [
      ['STroop', 1],
      ['Wagon', 9],
      ['Archers', 6],
      ['Cavalry', 7],
      ['Heavies', 8],
      ['Ballista', 10],
    ];
    if (popExp == null){
      popExp = new CPopup ('pbsrcexp', 0,0, 625,600, true, function (){popExp.destroy(); popExp=null;});
      popExp.centerMe (mainPop.getMainDiv());  
    }
    var m = '<DIV class=pbStat>Export data to KOC Attack</div><BR><TABLE align=center cellpadding=0 cellspacing=0 class=pbTabPadNW>\
      <TR style="font-weight:bold; background-color:white"><TD>Target Type</td><TD style="padding:1px" align=center>#<BR>targets</td><TD width=15></td>';
    for (var i=0; i<troopDef.length; i++)
      m += '<TD>'+ troopDef[i][0] +'</td>';
    m += '</tr>';
    for (var b=1; b<11; b++){
      m += '<TR><TD>Barb level '+ b +'</td><TD align=right>'+ coordList['lvl'+b].length  +'&nbsp; &nbsp;</td><TD></td>';
      for (var td=0; td<troopDef.length; td++)
        m += '<TD><INPUT id=ptET_'+ b +'_'+ troopDef[td][1] +' type=text size=3 value="'+ t.troops['b'+ b][troopDef[td][1]-1] +'"></td>';
      m += '<TD width=90%><SPAN class=boldRed id=ptETerr_'+ b +'></span></tr>';
    }
    m += '</table>';
    var isKOCattack = !(document.getElementById('KOCAttackToggle') == null);
    if (isKOCattack){
      m += '<BR><CENTER>'+ strButton20('Bulk Add to KOC Attack', 'id=pbSrcDoBA') +'</center>';
    } else {
      m += 'Attack KOC is not running, unable to export coordinates';
    }
    m += '<CENTER><DIV style="width:70%" id=pbSrcExpResult></DIV></center>';
    popExp.getMainDiv().innerHTML =  m;
    for (var b=1; b<11; b++)
      for (var td=0; td<troopDef.length; td++)
        document.getElementById('ptET_'+ b +'_'+ troopDef[td][1]).addEventListener ('change', validate, false);
    popExp.getTopDiv().innerHTML = '<div class=showBadged><center>POWER KOC EXPORT</center></div>';
    if (isKOCattack)    
      document.getElementById ('pbSrcDoBA').addEventListener ('click', doBulkAdd, false);
    popExp.show(true);
         
    if (city != null){
      for (var i=0; i<Cities.numCities; i++)
        if (city.id == Cities.cities[i].id)
          break;
      if (i < Cities.numCities){
        setTimeout (function(){unsafeWindow.citysel_click(document.getElementById('citysel_'+ (i+1)));}, 0);
      }
    }
// TODO: WAIT FOR City select ?
    function validate (e){
      var x = e.target.id.substr(5).split('_');
      var b = x[0];
      var trp = x[1];
      document.getElementById('ptETerr_'+ b).innerHTML = '';
      var x = parseIntZero (e.target.value);
      if (isNaN(x) || x<0 || x>150000){
        e.target.style.backgroundColor = 'red';
        document.getElementById('ptETerr_'+ b).innerHTML = 'Invalid Entry';
        return;
      } else {
        e.target.style.backgroundColor = '';
        e.target.value = x;
        t.troops['b'+ b][trp-1] = x;
      }
      var tot = 0;
      for (var td=0; td<troopDef.length; td++)
        tot += parseIntZero(document.getElementById('ptET_'+ b +'_'+ [troopDef[td][1]]).value);
      if (tot<1 && cList['lvl'+ b].length>0 )
        document.getElementById('ptETerr_'+ b).innerHTML = 'No troops defined';
      if (tot>150000)
        document.getElementById('ptETerr_'+ b).innerHTML = 'Too many troops';
    }
      
    function doBulkAdd (){
      for (var b=1; b<11; b++){
        if (document.getElementById('ptETerr_'+ b).innerHTML != '')
          return;
        var tot = 0;
        for (var td=0; td<troopDef.length; td++)
          tot += t.troops['b'+b][troopDef[td][1]-1];
        if (tot<1 && cList['lvl'+ b].length>0){
          document.getElementById('ptETerr_'+ b).innerHTML = 'No troops defined';
          return;
        } else if (tot>150000) {
          document.getElementById('ptETerr_'+ b).innerHTML = 'Too many troops';
          return;
        }
      }    
      document.getElementById('pbSrcExpResult').innerHTML = '';
      doNextLevel ();
    }
    
    function endBulkAdd (msg){
      unsafeWindow.Modal.hideModalAll();
      curLevel = 0;
      showMe ();
      popExp.show(true);
      document.getElementById('pbSrcExpResult').innerHTML += msg;
    }
    
    function doNextLevel (){
      while ( curLevel<10 && cList['lvl'+ ++curLevel].length==0)
        ;
      if (curLevel>=10){
        endBulkAdd ('done!<BR>');
        return;
      }
     e_attackDialog(false);
    }
        
    function e_attackDialog (tf){
      if (!tf){
       hideMe();
       popExp.show (false);
       unsafeWindow.Modal.hideModalAll();
       unsafeWindow.modal_attack(4,0,0);
       new CwaitForElement ('BulkAddAttackDiv', 1000, e_attackDialog );
      }
      var div = searchDOM (document.getElementById('BulkAddAttackDiv'), 'node.tagName=="DIV" && node.style.display=="none"', 10);
      if (div==null){
        endBulkAdd ('<SPAN class=boldRed>ERROR: Unexpected attack dialog format (1).</span>');
        return;  
      }
      var ta = searchDOM (div, 'node.tagName=="TEXTAREA"', 10);
      var but = searchDOM (div, 'node.tagName=="A"', 10);
      if (ta==null || but==null){
        endBulkAdd ('<SPAN class=boldRed>ERROR: Unexpected attack dialog format (2).</span>');
        return;  
      }
      for (var trp=1; trp<13; trp++){
        var inp = document.getElementById('modal_attack_unit_ipt' +trp);
        inp.value = t.troops['b'+curLevel][trp-1];
        if (t.troops['b'+curLevel][trp-1] > 0)
          inp.style.backgroundColor = 'yellow';
        else
          inp.style.backgroundColor = 'white';
      }
      div.style.display = 'block';
      document.getElementById('KOCAttackBulkAddForce').checked = true;
      if (DISABLE_BULKADD_LIST)
        ta.value = '';
      else {
        var m = '';
        var list = cList['lvl'+ (curLevel)];
        for (i=0; i<list.length; i++)
          m += list[i].x +','+ list[i].y +'\n';
        ta.value = m;
      }
      clickWin (unsafeWindow, but, 'click');   
      unsafeWindow.Modal.hideModal();
      document.getElementById('pbSrcExpResult').innerHTML += 'Added '+ list.length +' targets for '+ city.name +'<BR>';
      setTimeout (doNextLevel, 500);
    }    
  },
}

  function searchDOM (node, condition, maxLevel, doMult){
    var found = [];
    eval ('var compFunc = function (node) { return ('+ condition +') }');
    doOne(node, 1);
    if(!doMult){
      if (found.length==0)
        return null;
      return found[0];
    }
    return found;
    function doOne (node, curLevel){
      try {
        if (compFunc(node))
          found.push(node);
      } catch (e){
      }      
      if (!doMult && found.length>0)
        return;
      if (++curLevel<maxLevel && node.childNodes!=undefined)
        for (var c=0; c<node.childNodes.length; c++)
          doOne (node.childNodes[c], curLevel);
    }
  }



/*********************************** Test TAB ***********************************/
Tabs.Test = {
  tabOrder: 13,
//  tabDisabled : !ENABLE_TEST_TAB,         // if true, tab will not be added or initialized
  tabLabel : 'Test',
  myDiv : null,

  init : function (div){
    var t = Tabs.Test;
    t.myDiv = div;
	var citySelect = '   <SELECT id=fakeCity>';
	    for (var c=0; c<Cities.numCities; c++) {
		 	 aCity = Cities.cities[c].name + ' ('+Cities.cities[c].x + ','+ Cities.cities[c].y+')';
	         citySelect += '<option value=\''+c+'\'>'+aCity+'</option>';
	    }
	    citySelect += '</select>';
    var m = '<TABLE><TR><TD align=right>Scout: </td><TD><INPUT type=checkbox id=fakeIsScout></td></tr>\
                  <TR><TD align=right>Wild: </td><TD><INPUT type=checkbox id=fakeIsWild></td></tr>\
                  <TR><TD align=right>False Report: </td><TD><INPUT type=checkbox disabled id=fakeFalse></td></tr>\
                  <TR><TD align=right>seconds: </td><TD><INPUT type=text size=4 value=300 id=fakeSeconds></td></tr>\
                  <TR><TD align=right># of supply troops: </td><TD><INPUT type=text size=6 value=0 id=faketroop0></td></tr>\
	          <TR><TD align=right># of militiamen: </td><TD><INPUT type=text size=6 value=0 id=faketroop1></td></tr>\
		  <TR><TD align=right># of scouts: </td><TD><INPUT type=text size=6 value=0 id=faketroop2></td></tr>\
		  <TR><TD align=right># of pikeman: </td><TD><INPUT type=text size=6 value=0 id=faketroop3></td></tr>\
		  <TR><TD align=right># of swordsmen: </td><TD><INPUT type=text size=6 value=0 id=faketroop4></td></tr>\
		  <TR><TD align=right># of archers: </td><TD><INPUT type=text size=6 value=0 id=faketroop5></td></tr>\
		  <TR><TD align=right># of Light Cav.: </td><TD><INPUT type=text size=6 value=0 id=faketroop6></td></tr>\
		  <TR><TD align=right># of heavey cav.: </td><TD><INPUT type=text size=6 value=0 id=faketroop7></td></tr>\
		  <TR><TD align=right># of supply wagons: </td><TD><INPUT type=text size=6 value=0 id=faketroop8></td></tr>\
		  <TR><TD align=right># of Ballests: </td><TD><INPUT type=text size=6 value=0 id=faketroop9></td></tr>\
		  <TR><TD align=right># of b.rams: </td><TD><INPUT type=text size=6 value=0 id=faketroop10></td></tr>\
		  <TR><TD align=right># of Catapults: </td><TD><INPUT type=text size=6 value=0 id=faketroop11></td></tr>\
		  <TR><TD align=right>false name: </td><TD><INPUT type=text size=13 value=Probando id=fakeName></td></tr>\
      		  <TR><TD align=right>city ??attack: </td><TD>'+citySelect+'</td></tr>\
                  <BR>Send alerts the Alliance chat and whisper: <INPUT type=checkbox id=ptalertWhisper>\
        <TR><TD colspan=2 align=center><INPUT id=testSendMarch type=submit value="False attack" \></td></tr>\
        <TR><TD colspan=2 align=center><INPUT id=ptReloadKOC type=submit value="Reload KOC" \></td></tr></table>\
        <BR><DIV id=testDiv style="background-color:#fffff0; width=100%; height=0%; overflow-y:auto;"></div>';
    t.myDiv.innerHTML = m;
    document.getElementById('testSendMarch').addEventListener ('click', t.clickFakeAttack, false);
    document.getElementById('ptReloadKOC').addEventListener ('click', reloadKOC, false);
    document.getElementById('ptalertWhisper').addEventListener ('click', function (){SEND_ALERT_AS_WHISPER=this.checked}, false);
    function xyNotify(city, x, y){
      var m = '[ Notified: '+ (city?city.name:'null') +', x='+ x +', y='+ y +' ]';
      document.getElementById('testNotify').innerHTML = m;
    }
  },

  hide : function (){
  },

  show : function (){
  },
  
  writeDiv : function (msg){
    var t = Tabs.Test;
    if (t.state != null)
    document.getElementById('testDiv').innerHTML = msg;
  },

  addDiv : function (msg){
    var t = Tabs.Test;
    if (t.state != null)
    document.getElementById('testDiv').innerHTML += msg;
  },

  createFakeAttack : function (cityNum, isScout, isWild, isFalse, secs, troops, name){
    var marchId = 'm'+ (88888 + Math.floor(Math.random()*11111));
    var march = {};
    if (matTypeof(Seed.queue_atkinc)=='array')
      Seed.queue_atkinc = {};
    if (isFalse)
      march.marchType = 0;
    else if (isScout)
      march.marchType = 3;
    else
      march.marchType = 4;
    march.toCityId = Cities.cities[cityNum].id;
    if (isWild) {
      keys = unsafeWindow.Object.keys(Seed.wilderness['city'+Cities.cities[cityNum].id]);
      march.toTileId = Seed.wilderness['city'+Cities.cities[cityNum].id][keys[0]].tileId;
    } else {
      march.toTileId = Cities.cities[cityNum].tileId;
    }
    secs = parseInt(secs);
    march.arrivalTime = unixTime() + secs;
    march.departureTime = unixTime() - 10;
     march.unts = {}
	for(i=0; i<12; i++){
	  if(troops[i] > 0)
		march.unts["u"+(i+1)] = addCommas(troops[i]);
	}
    march.pid = 1234567;
    march.score = 9;
    march.mid = marchId.substr(1);
    march.players = {}
    march.players.u1234567 = {}
    march.players.u1234567.n = name;
    march.players.u1234567.t = 60;
    march.players.u1234567.m = 5441192;
    march.players.u1234567.s = 'M';
    march.players.u1234567.w = 1;
    march.players.u1234567.a = 1;
    march.players.u1234567.i = 5;
    Seed.queue_atkinc[marchId] = march;
    Seed.players.u1234567 = march.players.u1234567;
  },

  clickFakeAttack : function (){
    var t = Tabs.Test;
    var isScout = document.getElementById('fakeIsScout').checked;
    var isWild = document.getElementById('fakeIsWild').checked;
    var isFalse = document.getElementById('fakeFalse').checked;
	var troops = [];
	for(i=0; i<12; i++)
		troops[i] = parseInt(document.getElementById('faketroop'+i).value);
    var secs = parseInt(document.getElementById('fakeSeconds').value);
	var name = document.getElementById('fakeName').value;
	var city = document.getElementById('fakeCity').value;
    t.createFakeAttack (city, isScout, isWild, isFalse, secs, troops ,name);
  },
}



/*********************************  Cresting Tab ***********************************/
 Tabs.Crest = {
  tabOrder : 10,
  myDiv : null,
  tabLabel: 'Crest',
  rallypointlevel:null,
  error_code: 0,
  knt:{},
    
/** window display **/   
  init : function (div){
    var t = Tabs.Crest;
    Options.crestMarchError = 0;
    setInterval(t.sendCrestReport, 1*60*1000);	
    setTimeout(function(){ t.Rounds(1,0,0);}, 5*1000);
    t.myDiv = div;
    var selbut=0;
    var m = '<DIV id=pbTowrtDivF class=pbStat>AUTOMATED CRESTING FUNCTION</div><TABLE id=pbcrestfunctions width=100% height=0% class=pbTab><TR align="center">';

        m += '<TD align=center><INPUT id=Cresttoggle type=submit value="Cresting = '+ (Options.crestRunning?'ON':'OFF')+'"></td>';
	updatebotbutton('Cresting-'+ (Options.crestRunning?'ON':'OFF')+'', 'pbcresttab'); 

    m += '<TD><INPUT id=CrestHelp type=submit value="Help"></td>';
    m += '<td><INPUT id=showCrestTargets type=submit value="Show Target"></td>';
    m += '<TD><INPUT id=pbsendreport type=checkbox '+ (Options.crestreport?' CHECKED':'') +'\> Send crests report every ';
    m += '<INPUT id=pbsendcrestreportint value='+ Options.CrestMsgInterval +' type=text size=3 \> hours </td></table>';
  
    m += '<DIV id=pbOpt class=pbStat>Crest options</div><TABLE id=pbcrestopt	 width=100% height=0% class=pbTab><TR align="center"></table>';
    m += '<DIV style="margin-bottom:10px;">crest from city: <span id=crestcity></span></div>';
    
    m += '<TABLE class=ptTab><TR><TD>coordinates: X:<INPUT id=pbcrestx type=text size=3 maxlength=3 value=""></td>';
    m += '<TD>Y:<INPUT id=pbcresty type=text size=3 maxlength=3 value=""></td></tr></table>';
   

    m += '<TABLE class=ptTab><TR><TD>wave <b>1</b>: </td><TD>&nbsp;&nbsp;<img src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_1_30.png></td><TD><INPUT id=R1ST type=text size=7 maxlength=6 value=0></td>';
    m += '<TD>&nbsp;&nbsp;<img src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_2_30.png></td><TD><INPUT id=R1MM type=text size=7 maxlength=6 value=0></td>';
    m += '<TD>&nbsp;&nbsp;<img src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_3_30.png></td><TD><INPUT id=R1Scout type=text size=7 maxlength=6 value=0></td>';
    m += '<TD>&nbsp;&nbsp;<img src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_4_30.png></td><TD><INPUT id=R1Pike type=text size=7 maxlength=6 value=0></td>';
    m += '<TD>&nbsp;&nbsp;<img src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_5_30.png></td><TD><INPUT id=R1Sword type=text size=7 maxlength=6 value=0></td>';
    m += '<TD>&nbsp;&nbsp;<img src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_6_30.png></td><TD><INPUT id=R1Arch type=text size=7 maxlength=6 value=0></td></tr>';
    m += '<tr><td></td><TD>&nbsp;&nbsp;<img src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_7_30.png></td><TD><INPUT id=R1LC type=text size=7 maxlength=6 value=0></td>';
    m += '<TD>&nbsp;&nbsp;<img src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_8_30.png></td><TD><INPUT id=R1HC type=text size=7 maxlength=6 value=0></td>';
    m += '<TD>&nbsp;&nbsp;<img src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_9_30.png></td><TD><INPUT id=R1SW type=text size=7 maxlength=6 value=0></td>';
    m += '<TD>&nbsp;&nbsp;<img src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_10_30.png></td><TD><INPUT id=R1Ball type=text size=7 maxlength=6 value=0></td>';
    m += '<TD>&nbsp;&nbsp;<img src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_11_30.png></td><TD><INPUT id=R1Ram type=text size=7 maxlength=6 value=0></td>';
    m += '<TD>&nbsp;&nbsp;<img src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_12_30.png></td><TD><INPUT id=R1Cat type=text size=7 maxlength=6 value=0></td></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr><tr><td>&nbsp;</td><td>&nbsp;</td></tr>';
    
    m += '<TR><TD>wave <b>2</b>: </td><TD>&nbsp;&nbsp;<img src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_1_30.png></td><TD><INPUT id=R2ST type=text size=7 maxlength=6 value=0></td>';
    m += '<TD>&nbsp;&nbsp;<img src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_2_30.png></td><TD><INPUT id=R2MM type=text size=7 maxlength=6 value=0></td>';
    m += '<TD>&nbsp;&nbsp;<img src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_3_30.png></td><TD><INPUT id=R2Scout type=text size=7 maxlength=6 value=0></td>';
    m += '<TD>&nbsp;&nbsp;<img src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_4_30.png></td><TD><INPUT id=R2Pike type=text size=7 maxlength=6 value=0></td>';
    m += '<TD>&nbsp;&nbsp;<img src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_5_30.png></td><TD><INPUT id=R2Sword type=text size=7 maxlength=6 value=0></td>';
    m += '<TD>&nbsp;&nbsp;<img src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_6_30.png></td><TD><INPUT id=R2Arch type=text size=7 maxlength=6 value=0></td></tr>';
    m += '<tr><td></td><TD>&nbsp;&nbsp;<img src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_7_30.png></td><TD><INPUT id=R2LC type=text size=7 maxlength=6 value=0></td>';
    m += '<TD>&nbsp;&nbsp;<img src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_8_30.png></td><TD><INPUT id=R2HC type=text size=7 maxlength=6 value=0></td>';
    m += '<TD>&nbsp;&nbsp;<img src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_9_30.png></td><TD><INPUT id=R2SW type=text size=7 maxlength=6 value=0></td>';
    m += '<TD>&nbsp;&nbsp;<img src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_10_30.png></td><TD><INPUT id=R2Ball type=text size=7 maxlength=6 value=0></td>';
    m += '<TD>&nbsp;&nbsp;<img src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_11_30.png></td><TD><INPUT id=R2Ram type=text size=7 maxlength=6 value=0></td>';
    m += '<TD>&nbsp;&nbsp;<img src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_12_30.png></td><TD><INPUT id=R2Cat type=text size=7 maxlength=6 value=0></td></tr></table>';
    m += '<DIV style="text-align:center; margin-top:15px"><INPUT id=pbSaveRouteCrest type=submit value="Add Attack"></div>';

    
    t.myDiv.innerHTML = m;
	
	document.getElementById('pbsendreport').addEventListener('change', function(){
		Options.crestreport = document.getElementById('pbsendreport').checked;
		saveOptions();
	}, false);
	document.getElementById('pbsendcrestreportint').addEventListener('change', function(){
		Options.CrestMsgInterval = parseInt(document.getElementById('pbsendcrestreportint').value);
		saveOptions();
	}, false);
    
    for (var i=0;i<Seed.cities.length;i++){
		if (CrestOptions.CrestCity == Seed.cities[i][0]){
			selbut=i;
			break;
		}
	}
		
    t.tcp = new CdispCityPicker ('crestcityselect', document.getElementById('crestcity'), true, t.clickCitySelect, selbut);
    
    if (CrestOptions.CrestCity == 0) {
    	CrestOptions.CrestCity = t.tcp.city.id
    }

      document.getElementById('pbcrestx').addEventListener('keyup', function(){
          if (isNaN(document.getElementById('pbcrestx').value)) document.getElementById('pbcrestx').value='' ;
      }, false);

      document.getElementById('pbcresty').addEventListener('keyup', function(){
          if (isNaN(document.getElementById('pbcresty').value)) document.getElementById('pbcresty').value='' ;
      }, false);

      document.getElementById('R1ST').addEventListener('keyup', function(){
          if (isNaN(document.getElementById('R1ST').value)) document.getElementById('R1ST').value=0 ;
      }, false);

      document.getElementById('R1MM').addEventListener('keyup', function(){
          if (isNaN(document.getElementById('R1MM').value)) document.getElementById('R1MM').value=0 ;
      }, false);

      document.getElementById('R1Pike').addEventListener('keyup', function(){
          if (isNaN(document.getElementById('R1Pike').value)) document.getElementById('R1Pike').value=0 ;
      }, false);

      document.getElementById('R1Scout').addEventListener('keyup', function(){
          if (isNaN(document.getElementById('R1Scout').value)) document.getElementById('R1Scout').value=0 ;
      }, false);

      document.getElementById('R1Sword').addEventListener('keyup', function(){
          if (isNaN(document.getElementById('R1Sword').value)) document.getElementById('R1Sword').value=0 ;
      }, false);

      document.getElementById('R1Arch').addEventListener('keyup', function(){
          if (isNaN(document.getElementById('R1Arch').value)) document.getElementById('R1Arch').value=0 ;
      }, false);

      document.getElementById('R1LC').addEventListener('keyup', function(){
          if (isNaN(document.getElementById('R1LC').value)) document.getElementById('R1LC').value=0 ;
      }, false);

      document.getElementById('R1HC').addEventListener('keyup', function(){
          if (isNaN(document.getElementById('R1HC').value)) document.getElementById('R1HC').value=0 ;
      }, false);

      document.getElementById('R1SW').addEventListener('keyup', function(){
          if (isNaN(document.getElementById('R1SW').value)) document.getElementById('R1SW').value=0 ;
      }, false);

      document.getElementById('R1Ball').addEventListener('keyup', function(){
          if (isNaN(document.getElementById('R1Ball').value)) document.getElementById('R1Ball').value=0 ;
      }, false);

      document.getElementById('R1Ram').addEventListener('keyup', function(){
          if (isNaN(document.getElementById('R1Ram').value)) document.getElementById('R1Ram').value=0 ;
      }, false);

      document.getElementById('R1Cat').addEventListener('keyup', function(){
          if (isNaN(document.getElementById('R1Cat').value)) document.getElementById('R1Cat').value=0 ;
      }, false);
	  
      document.getElementById('R2ST').addEventListener('keyup', function(){
          if (isNaN(document.getElementById('R2ST').value)) document.getElementById('R2ST').value=0 ;
      }, false);

      document.getElementById('R2MM').addEventListener('keyup', function(){
          if (isNaN(document.getElementById('R2MM').value)) document.getElementById('R2MM').value=0 ;
      }, false);

      document.getElementById('R2Pike').addEventListener('keyup', function(){
          if (isNaN(document.getElementById('R2Pike').value)) document.getElementById('R2Pike').value=0 ;
      }, false);

      document.getElementById('R2Scout').addEventListener('keyup', function(){
          if (isNaN(document.getElementById('R2Scout').value)) document.getElementById('R2Scout').value=0 ;
      }, false);

      document.getElementById('R2Sword').addEventListener('keyup', function(){
          if (isNaN(document.getElementById('R2Sword').value)) document.getElementById('R2Sword').value=0 ;
      }, false);

      document.getElementById('R2Arch').addEventListener('keyup', function(){
          if (isNaN(document.getElementById('R2Arch').value)) document.getElementById('R2Arch').value=0 ;
      }, false);

      document.getElementById('R2LC').addEventListener('keyup', function(){
          if (isNaN(document.getElementById('R2LC').value)) document.getElementById('R2LC').value=0 ;
      }, false);

      document.getElementById('R2HC').addEventListener('keyup', function(){
          if (isNaN(document.getElementById('R2HC').value)) document.getElementById('R2HC').value=0 ;
      }, false);

      document.getElementById('R2SW').addEventListener('keyup', function(){
          if (isNaN(document.getElementById('R2SW').value)) document.getElementById('R2SW').value=0 ;
      }, false);

      document.getElementById('R2Ball').addEventListener('keyup', function(){
          if (isNaN(document.getElementById('R2Ball').value)) document.getElementById('R2Ball').value=0 ;
      }, false);

      document.getElementById('R2Ram').addEventListener('keyup', function(){
          if (isNaN(document.getElementById('R2Ram').value)) document.getElementById('R2Ram').value=0 ;
      }, false);

      document.getElementById('R2Cat').addEventListener('keyup', function(){
          if (isNaN(document.getElementById('R2Cat').value)) document.getElementById('R2Cat').value=0 ;
      }, false);
         
    document.getElementById('crestcity').addEventListener('click', function(){CrestOptions.CrestCity = t.tcp.city.id;} , false);
    document.getElementById('Cresttoggle').addEventListener('click', function(){t.toggleCrestState(this)} , false);
    document.getElementById('pbcrestx').addEventListener('change', function(){CrestOptions.X = document.getElementById('pbcrestx').value;;} , false);
    document.getElementById('pbcresty').addEventListener('change', function(){CrestOptions.Y = document.getElementById('pbcresty').value;} , false);
    document.getElementById('R1ST').addEventListener('change', function(){CrestOptions.R1ST = document.getElementById('R1ST').value;} , false);
    document.getElementById('R1MM').addEventListener('change', function(){CrestOptions.R1MM = document.getElementById('R1MM').value;} , false);
    document.getElementById('R1Scout').addEventListener('change', function(){CrestOptions.R1Scout = document.getElementById('R1Scout').value;} , false);
    document.getElementById('R1Pike').addEventListener('change', function(){CrestOptions.R1Pike = document.getElementById('R1Pike').value;} , false);
    document.getElementById('R1Sword').addEventListener('change', function(){CrestOptions.R1Sword = document.getElementById('R1Sword').value;} , false);
    document.getElementById('R1Arch').addEventListener('change', function(){CrestOptions.R1Arch = document.getElementById('R1Arch').value;} , false);
    document.getElementById('R1LC').addEventListener('change', function(){CrestOptions.R1LC = document.getElementById('R1LC').value;} , false);
    document.getElementById('R1HC').addEventListener('change', function(){CrestOptions.R1HC = document.getElementById('R1HC').value;} , false);
    document.getElementById('R1SW').addEventListener('change', function(){CrestOptions.R1SW = document.getElementById('R1SW').value;} , false);
    document.getElementById('R1Ball').addEventListener('change', function(){CrestOptions.R1Ball = document.getElementById('R1Ball').value;} , false);
    document.getElementById('R1Ram').addEventListener('change', function(){CrestOptions.R1Ram = document.getElementById('R1Ram').value;} , false);
    document.getElementById('R1Cat').addEventListener('change', function(){CrestOptions.R1Cat = document.getElementById('R1Cat').value;} , false);
    document.getElementById('R2ST').addEventListener('change', function(){CrestOptions.R2ST = document.getElementById('R2ST').value;} , false);
    document.getElementById('R2MM').addEventListener('change', function(){CrestOptions.R2MM = document.getElementById('R2MM').value;} , false);
    document.getElementById('R2Scout').addEventListener('change', function(){CrestOptions.R2Scout = document.getElementById('R2Scout').value;} , false);
    document.getElementById('R2Pike').addEventListener('change', function(){CrestOptions.R2Pike = document.getElementById('R2Pike').value;} , false);
    document.getElementById('R2Sword').addEventListener('change', function(){CrestOptions.R2Sword = document.getElementById('R2Sword').value;} , false);
    document.getElementById('R2Arch').addEventListener('change', function(){CrestOptions.R2Arch = document.getElementById('R2Arch').value;} , false);
    document.getElementById('R2LC').addEventListener('change', function(){CrestOptions.R2LC = document.getElementById('R2LC').value;} , false);
    document.getElementById('R2HC').addEventListener('change', function(){CrestOptions.R2HC = document.getElementById('R2HC').value;} , false);
    document.getElementById('R2SW').addEventListener('change', function(){CrestOptions.R2SW = document.getElementById('R2SW').value;} , false);
    document.getElementById('R2Ball').addEventListener('change', function(){CrestOptions.R2Ball = document.getElementById('R2Ball').value;} , false);
    document.getElementById('R2Ram').addEventListener('change', function(){CrestOptions.R2Ram = document.getElementById('R2Ram').value;} , false);
    document.getElementById('R2Cat').addEventListener('change', function(){CrestOptions.R2Cat = document.getElementById('R2Cat').value;} , false);
    document.getElementById('CrestHelp').addEventListener('click', function(){t.helpPop();} , false);
    document.getElementById('pbSaveRouteCrest').addEventListener('click', function(){t.addCrestRoute();}, false);
    document.getElementById('showCrestTargets').addEventListener('click', function(){t.showCrestRoute();}, false);
  },
  
  helpPop : function (){
    var helpText = '<BR>It is designed to attack wilds repeatedly.<BR>';
    helpText += 'Normally with a single ground attack would be sufficient to remove blasones.Pero can be attacked from all cities.<BR>';
    helpText += 'Make sure you have an empty space to conquer / or neglect to attack land is best for the method<BR>';
    helpText += 'land we have implemented for now. If the last attack on the ground was less than 5 minutes, 10% send powerKoc <BR>';
    helpText += 'of "full wave" to keep the suicide troops to the fullest. So do not panic if the second group has only one<BR>';
    helpText += '29MM, compared with a 299MM. <BR>';
    helpText += 'The earth will be attacked in two waves, abandoned and re-attack.<BR>';
    helpText += 'You must have a free land space in the castle!<BR>';
    helpText += 'Just fill out the coordinates, the troops, adding the attack and click on "ON".<BR><BR>';
    helpText += 'Aims to show all the attacks really well kept and you can delete the.<BR>';
    helpText += 'Can also be used to attack players or to empty a city with cars<BR>';
    helpText += 'You can find more information on Koc Wikia:<BR>';
    helpText += '<A target="_tab" href="http://andalusies.no-ip.biz/kofc/guia_ataques.php">Guide number of troops on (attack)</a>';
    helpText += '<TABLE width=100%><TR><TD>Level</td><TD>wave 1</td><TD>wave 2</td><TD>Loss of troops</td><TD>Min. level fletch</td></tr>';
    helpText += '<TR><TD>1</td><TD>n/a</td><TD>160 MM</td><TD>12 MM</td><TD>0</td></tr>';
    helpText += '<TR><TD>1</td><TD>n/a</td><TD>80 archers</td><TD>none</td><TD>1+</td></tr>';
    helpText += '<TR><TD>2</td><TD>5 MM</td><TD>130 archers</td><TD>1st wave</td><TD>2+</td></tr>';
    helpText += '<TR><TD>3</td><TD>10 MM</td><TD>520 archers</td><TD>1st wave</td><TD>3+</td></tr>';
    helpText += '<TR><TD>4</td><TD>20 MM</td><TD>1600 archers</td><TD>1st wave</td><TD>4+</td></tr>';
    helpText += '<TR><TD>5</td><TD>50 MM</td><TD>2200 archers</td><TD>1st wave</td><TD>6+</td></tr>';
    helpText += '<TR><TD>6</td><TD>100 MM</td><TD>3000 archers</td><TD>1st wave</td><TD>7+</td></tr>';
    helpText += '<TR><TD>7</td><TD>150 MM</td><TD>6000 archers</td><TD>1st wave</td><TD>8+</td></tr>';
    helpText += '<TR><TD>8</td><TD>299 MM + 1Ball.</td><TD>9000 archers + 900 Ball.</td><TD>1st wave + 1 archers</td><TD>9+</td></tr>';
    helpText += '<TR><TD>9</td><TD>599 MM + 1Ball.</td><TD>13000 archers + 900 Ball.</td><TD>1st wave + 2 archers</td><TD>10</td></tr>';
    helpText += '<TR><TD>10</td><TD>1199 MM + 1Cats.</td><TD>35000 archers + 2500 Cata.</td><TD>1st wave + 6 archers + 50 Cats.</td><TD>10</td></tr></table>';

    var pop = new CPopup ('giftHelp', 0, 0, 785, 530, true);
    pop.centerMe (mainPop.getMainDiv());
    pop.getMainDiv().innerHTML = helpText;
    pop.getTopDiv().innerHTML = '<div class=showBadged><center>HELP MENU </center></div>';
    pop.show (true);
  },

/** Add crest route **/
    addCrestRoute : function () {
		if(CrestOptions.X == "" || CrestOptions.Y == "") {
			alert("Please enter Coords");
			return;
		}
		
		var t = Tabs.Crest;
		var CrestLength = CrestData.length;
		
		CrestData[CrestLength] = new CrestFunc(CrestOptions);
		saveCrestData();
                document.getElementById('pbOpt').style.background ='#99FF99';
		setTimeout(function(){ (document.getElementById('pbOpt').style.background =''); }, 1000);

    },
	
	

/** Show Crest Targets **/
    showCrestRoute : function () {
		var t = Tabs.Crest;
		var popCrestTargets = null;
		t.popCrestTargets = new CPopup('pbShowCrestTargets', 50, 50, 900, 500, true, function() {clearTimeout (1000);});
		var m = '<DIV style="max-height:460px; height:460px; overflow-y:auto"><TABLE align=center cellpadding=0 cellspacing=0 width=100% class="pbShowCrestTargets" id="pbCrestTargets">';       
		t.popCrestTargets.getMainDiv().innerHTML = '</table></div>' + m;
		t.popCrestTargets.getTopDiv().innerHTML = '<div class=showBadged><center>OBJETIVOS</center></div>';
		t.paintCrestTargets();
		t._addTabHeader();
		t.popCrestTargets.show(true);

    },
	
    _addTabHeader : function () {
		var row = document.getElementById('pbCrestTargets').insertRow(0);
		row.vAlign = 'top';
	      	row.insertCell(0).innerHTML = "City / Objective";
	     	row.insertCell(1).innerHTML = "Wave #";
	     	row.insertCell(2).innerHTML = "supply troops.";
	     	row.insertCell(3).innerHTML = "Milis";
	     	row.insertCell(4).innerHTML = "scout";
	     	row.insertCell(5).innerHTML = "Pike.";
	     	row.insertCell(6).innerHTML = "sword.";
	     	row.insertCell(7).innerHTML = "Archer";
	     	row.insertCell(8).innerHTML = "cav";
	     	row.insertCell(9).innerHTML = "H.Cav";
	     	row.insertCell(10).innerHTML = "supply wagons";
	     	row.insertCell(11).innerHTML = "Ballest.";
	     	row.insertCell(12).innerHTML = "rams";
	     	row.insertCell(13).innerHTML = "Cats";
	     	row.insertCell(14).innerHTML = "&nbsp;&nbsp;&nbsp;&nbsp;";
    },


	
	

/** paintCrestTargets **/
    paintCrestTargets : function () {
		t = Tabs.Crest;

		for(var i = 0; i < CrestData.length; i++) {
			t._addTabCrest(i, "Attack: " + CrestData[i].X + "," + CrestData[i].Y, "wave 2", CrestData[i].R2ST, CrestData[i].R2MM, CrestData[i].R2Scout, CrestData[i].R2Pike, CrestData[i].R2Sword, CrestData[i].R2Arch, CrestData[i].R2LC, CrestData[i].R2HC, CrestData[i].R2SW, CrestData[i].R2Ball, CrestData[i].R2Ram, CrestData[i].R2Cat, " ");
			t._addTabCrest(i, CrestData[i].CrestCity, "wave 1", CrestData[i].R1ST, CrestData[i].R1MM, CrestData[i].R1Scout, CrestData[i].R1Pike, CrestData[i].R1Sword, CrestData[i].R1Arch, CrestData[i].R1LC, CrestData[i].R1HC, CrestData[i].R1SW, CrestData[i].R1Ball, CrestData[i].R1Ram, CrestData[i].R1Cat, "Delete");
			t._addTabCrest(i, "","","","","","","","","","","","","","","");
		}

	},
	
	

/** Add Tab Crest **/
    _addTabCrest : function (QueID, col0, col1, col2, col3, col4, col5, col6, col7, col8, col9, col10, col11, col12, col13, col14) {
		var t = Tabs.Crest;
		var row = document.getElementById('pbCrestTargets').insertRow(0);

		for (var i = 0; i <= 14; i++) {
			if (i == 14 && col14 == "Delete") {
				row.insertCell(i).innerHTML = "<a id=pbCrestDel_" + QueID + " value=" + i + ">Delete</a>";
				document.getElementById('pbCrestDel_' + QueID).addEventListener('click', function(){t.cancelCrestTarget(QueID);}, false);
			} else if (col14 == "Delete" && i == 0) {
				row.insertCell(i).innerHTML = Cities.byID[col0].name;
			} else {
				row.insertCell(i).innerHTML = eval("col" + i) + "&nbsp; &nbsp;";
			}
		}
		
    },
	
	

/** Cancel Crest Target **/
    cancelCrestTarget : function (QueID) {
	     var t = Tabs.Crest;
	     var queueId = parseInt(QueID);
	     CrestData.splice(queueId, 1);
	     saveCrestData();
	     t.showCrestRoute();
    },
	
	

	getRallypointLevel: function(cityId){
		var t = Tabs.Crest;
		for (var o in Seed.buildings[cityId]){
			var buildingType = parseInt(Seed.buildings[cityId][o][0]);
			var buildingLevel = parseInt(Seed.buildings[cityId][o][1]);
			if (buildingType == 12) 
				t.rallypointlevel=parseInt(buildingLevel);
		}
	},
  
 

	getAtkKnight : function(cityID){
		var t = Tabs.Crest;
		t.knt = new Array();
		for (k in Seed.knights[cityID]){
			if (Seed.knights[cityID][k]["knightStatus"] == 1 && Seed.leaders[cityID]["resourcefulnessKnightId"] != Seed.knights[cityID][k]["knightId"] && Seed.leaders[cityID]["politicsKnightId"] != Seed.knights[cityID][k]["knightId"] && Seed.leaders[cityID]["combatKnightId"] != Seed.knights[cityID][k]["knightId"] && Seed.leaders[cityID]["intelligenceKnightId"] != Seed.knights[cityID][k]["knightId"]){
     			t.knt.push ({
     				Name:   Seed.knights[cityID][k]["knightName"],
     				Combat:	parseInt(Seed.knights[cityID][k]["combat"]),
     				ID:		Seed.knights[cityID][k]["knightId"],
     			});
     		}
		}
		t.knt = t.knt.sort(function sort(a,b) {a = parseInt(a['Combat']);b = parseInt(b['Combat']);return a == b ? 0 : (a > b ? -1 : 1);});
	},
   

   
 	sendMarch: function(p,callback,r,retry, CrestDataNum){
		var t = Tabs.Crest;			
		new AjaxRequest(unsafeWindow.g_ajaxpath + "ajax/march.php" + unsafeWindow.g_ajaxsuffix, {	
			 method: "post",
			 parameters: p,
			 loading: true,
			 onSuccess: function (transport) {		
				var rslt = eval("(" + transport.responseText + ")");
				if (rslt.ok) {
					var timediff = parseInt(rslt.eta) - parseInt(rslt.initTS);
					var ut = unsafeWindow.unixtime();
					var unitsarr=[0,0,0,0,0,0,0,0,0,0,0,0,0];
					var resources=[0,0,0,0,0,0,0,0,0,0,0,0,0];
					for(i = 0; i <= unitsarr.length; i++){
						if(p["u"+i]){
							unitsarr[i] = p["u"+i];
						}
					}

					var currentcityid = p.cid;
					unsafeWindow.attach_addoutgoingmarch(rslt.marchId, rslt.marchUnixTime, ut + timediff, p.xcoord, p.ycoord, unitsarr, p.type, p.kid, resources, rslt.tileId, rslt.tileType, rslt.tileLevel, currentcityid, true);
					unsafeWindow.update_seed(rslt.updateSeed)
				
					if (rslt.updateSeed) {
						unsafeWindow.update_seed(rslt.updateSeed);
					}
			 
					GM_log(r);
			 
					if(r==1){
						Options.Crest1Count++;
						r = 2;
					} else {
						Options.Crest2Count++;
					}				
			
					var now = new Date().getTime()/1000.0;
					now = now.toFixed(0);
					CrestData[CrestDataNum].lastRoundTwo = now;
					saveCrestData();
					setTimeout (function(){callback(r,0,CrestDataNum);}, 5000);	
					return;
					
				} else {

					if (rslt.user_action) {
						new CdialogCancelContinue('<SPAN class=boldRed>CAPTCHA ALERT! These sending too many attacks!</span>', null, null, mainPop.getMainDiv);
						logit('send march captcha');
						setTimeout (function(){callback(r,retry,CrestDataNum);}, 1*60*1000);
						return;
					}
					setTimeout (function(){callback(r,retry,CrestDataNum);}, 5000);
					return;
				}
			},
			 onFailure: function () {
				setTimeout (function(){callback(r,retry,CrestDataNum);}, 5000);
				return;
			 }
  		});	
	},
	

	
	abandonWilderness: function(tid,x,y,cid,callback,retry, CrestDataNum){
		var t = Tabs.Crest;		
		if (!Options.crestRunning) return;
		
		var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
		var cityID = cid;
		var tileid = tid;
		params.tid=tid;
		params.cid=cid;
		params.x=x;
  		params.y=y; 		  		
  		new AjaxRequest(unsafeWindow.g_ajaxpath + "ajax/abandonWilderness.php" + unsafeWindow.g_ajaxsuffix, {
			method: "post",
  		    parameters: params,
  		    loading: true,
  		    onSuccess:function(transport){
				var rslt=eval("("+transport.responseText+")");
				if (rslt.ok) {
					t.error_code = 0;	
					if (rslt.returningMarches) {
						var cities = Object.keys(rslt.returningMarches);
						for (var i = 0; i < cities.length; i++) {
							for (var j = 0; j < rslt.returningMarches[cities[i]].length; j++) {
				                var cid = cities[i].split("c")[1];
				                var mid = rslt.returningMarches[cities[i]][j];
				                var march = Seed.queue_atkp["city" + cid]["m" + mid];
								if (march) {
									var marchtime = Math.abs(parseInt(march.destinationUnixTime) - parseInt(march.marchUnixTime));
				                    var ut = unsafeWindow.unixtime();
				                    Seed.queue_atkp["city" + cid]["m" + mid].destinationUnixTime = ut;
				                    Seed.queue_atkp["city" + cid]["m" + mid].marchUnixTime = ut - marchtime;
				                    Seed.queue_atkp["city" + cid]["m" + mid].returnUnixTime = ut + marchtime;
				                    Seed.queue_atkp["city" + cid]["m" + mid].marchStatus = 8
				                }
				            }
				        }
				    }
					if(rslt.updateSeed){unsafeWindow.update_seed(rslt.updateSeed)};
				    if (Object.keys(Seed.wilderness["city" + cityID]).length == 1) {
						Seed.wilderness["city" + cityID] = []
  		         	} else	{
						delete Seed.wilderness["city"+cityID]["t"+tileid];
  		         	}
				} else {
					if (rslt.error_code != 401) {
						t.error_code = rslt.error_code; 
               			if(retry > 5){
							reloadKOC();
							return;
						}
               		}
  		        }				
  		    },
  		    onFailure: function () {}
  		});
    },
    
	
	
	Rounds : function (r, retry, CrestDataNum) {
		var t = Tabs.Crest;
		
		//r = (typeof r === 'undefined') ? 0 : r;
		//retry = (typeof retry === 'undefined') ? 0 : retry;
		//CrestDataNum = (typeof CrestDataNum === 'undefined') ? 0 : CrestDataNum;

		if (!Options.crestRunning) return;
		if (CrestData.length == 0)
			return;
		if (CrestDataNum >= CrestData.length)
			CrestDataNum = 0;

		cityID = 'city' + CrestData[CrestDataNum].CrestCity;
		retry++;
		
		for (var k in Seed.wilderness[cityID] ){
			if (Seed.wilderness[cityID][k]['xCoord']==CrestData[CrestDataNum].X && Seed.wilderness[cityID][k]['yCoord']==CrestData[CrestDataNum].Y && t.error_code!=401) {
				t.abandonWilderness(Seed.wilderness[cityID][k]['tileId'],Seed.wilderness[cityID][k]['xCoord'],Seed.wilderness[cityID][k]['yCoord'],CrestData[CrestDataNum].CrestCity,t.Rounds,retry,CrestDataNum);
			}
		}

		switch (retry) {
			case 10:
				setTimeout(function(){ t.Rounds(r,retry,CrestDataNum);},30000);
				return;
				break;
			case 20:
				setTimeout(function(){ t.Rounds(r,retry,CrestDataNum);},30000);
				return;
				break;
			case 30:
				reloadKOC();
				return;
				break;
		}

		if (parseInt(Seed.units[cityID]['unt1']) < CrestData[CrestDataNum].R1ST || parseInt(Seed.units[cityID]['unt2']) < CrestData[CrestDataNum].R1MM || parseInt(Seed.units[cityID]['unt3']) < CrestData[CrestDataNum].R1Scout || parseInt(Seed.units[cityID]['unt4']) < CrestData[CrestDataNum].R1Pike || parseInt(Seed.units[cityID]['unt5']) < CrestData[CrestDataNum].R1Sword || parseInt(Seed.units[cityID]['unt6']) < CrestData[CrestDataNum].R1Arch || parseInt(Seed.units[cityID]['unt7']) < CrestData[CrestDataNum].R1LC || parseInt(Seed.units[cityID]['unt8']) < CrestData[CrestDataNum].R1HC || parseInt(Seed.units[cityID]['unt9']) < CrestData[CrestDataNum].R1SW || parseInt(Seed.units[cityID]['unt10']) < CrestData[CrestDataNum].R1Ball || parseInt(Seed.units[cityID]['unt11']) < CrestData[CrestDataNum].R1Ram || parseInt(Seed.units[cityID]['unt12']) < CrestData[CrestDataNum].R1Cat || parseInt(Seed.units[cityID]['unt1']) < CrestData[CrestDataNum].R2ST || parseInt(Seed.units[cityID]['unt2']) < CrestData[CrestDataNum].R2MM || parseInt(Seed.units[cityID]['unt3']) < CrestData[CrestDataNum].R2Scout || parseInt(Seed.units[cityID]['unt4']) < CrestData[CrestDataNum].R2Pike || parseInt(Seed.units[cityID]['unt5']) < CrestData[CrestDataNum].R2Sword || parseInt(Seed.units[cityID]['unt6']) < CrestData[CrestDataNum].R2Arch || parseInt(Seed.units[cityID]['unt7']) < CrestData[CrestDataNum].R2LC || parseInt(Seed.units[cityID]['unt8']) < CrestData[CrestDataNum].R2HC || parseInt(Seed.units[cityID]['unt9']) < CrestData[CrestDataNum].R2SW || parseInt(Seed.units[cityID]['unt10']) < CrestData[CrestDataNum].R2Ball || parseInt(Seed.units[cityID]['unt11']) < CrestData[CrestDataNum].R2Ram || parseInt(Seed.units[cityID]['unt12']) < CrestData[CrestDataNum].R2Cat) {
			if (CrestData.length == 1) {
				setTimeout(function(){ t.Rounds(r,retry,CrestDataNum);},20000);
				return;
			 } else
				setTimeout(function(){ t.Rounds(1,retry,parseInt(CrestDataNum)+1);},5000);
			return;
		}

		t.getAtkKnight(cityID);
		slots=0;
		
		for (z in Seed.queue_atkp[cityID]) {
			slots++;
		}
		if  (Seed.queue_atkp[cityID].toSource() == "[]")
			slots=0;
		
		t.getRallypointLevel(cityID);
		switch (t.rallypointlevel) {
			case 12:
				t.rallypointlevel = t.rallypointlevel - 1;
			default:
				if (t.rallypointlevel <= slots) {
					if (CrestData.length == 1) {
						setTimeout(function(){ t.Rounds(r,retry,CrestDataNum);},20000);
					} else {
						setTimeout(function(){ t.Rounds(1,retry,parseInt(CrestDataNum)+1);},5000);
					}
					return;
					break;
				}
		}

       
		if  (t.knt.toSource() == "[]") {
			setTimeout(function(){ t.Rounds(1,retry,parseInt(CrestDataNum)+1);},5000);
			return;
		} 
		var kid = t.knt[0].ID;
		if (CrestData[CrestDataNum].R1ST == 0 && CrestData[CrestDataNum].R1MM == 0 && CrestData[CrestDataNum].R1Scout == 0 && CrestData[CrestDataNum].R1Pike == 0 && CrestData[CrestDataNum].R1Sword == 0 && CrestData[CrestDataNum].R1Arch == 0 && CrestData[CrestDataNum].R1LC == 0 && CrestData[CrestDataNum].R1HC == 0 && CrestData[CrestDataNum].R1SW == 0 && CrestData[CrestDataNum].R1Ball == 0 && CrestData[CrestDataNum].R1Ram == 0 && CrestData[CrestDataNum].R1Cat == 0) {
		   r=2;
	   }else {
			var now = new Date().getTime()/1000.0;
			now = now.toFixed(0);
			if (now > (parseInt(CrestData[CrestDataNum].lastRoundTwo) + 300)) {
				r=1;
			}
		}

		switch(r) {
			case 1:
				if ((t.rallypointlevel-slots) < 2) {
					setTimeout(function(){ t.Rounds(1,retry,CrestDataNum+1);},5000);
					return;
				}
				var params 		= 	unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
				params.cid		= 	CrestData[CrestDataNum].CrestCity;
				params.type		=	4;
				params.kid		= 	kid;
				params.xcoord 	= 	CrestData[CrestDataNum].X;
				params.ycoord 	= 	CrestData[CrestDataNum].Y;
				if (now < (parseInt(CrestData[CrestDataNum].lastRoundTwo) + 300)) { 
				
					params.u2 	= 	(CrestData[CrestDataNum].R1MM / 10);
					params.u2 	= 	params.u2.toFixed(0);
					
					if (params.u2 < (CrestData[CrestDataNum].R1MM / 10)) 
						params.u2++;
				} else {
					params.u2	= 	CrestData[CrestDataNum].R1MM;
				}
				params.u1 		= 	CrestData[CrestDataNum].R1ST;
				params.u2 		= 	CrestData[CrestDataNum].R1MM;
				params.u3 		= 	CrestData[CrestDataNum].R1Scout;
				params.u4 		= 	CrestData[CrestDataNum].R1Pike;
				params.u5 		= 	CrestData[CrestDataNum].R1Sword;
				params.u6 		= 	CrestData[CrestDataNum].R1Arch;
				params.u7 		= 	CrestData[CrestDataNum].R1LC;
				params.u8 		= 	CrestData[CrestDataNum].R1HC;
				params.u9 		= 	CrestData[CrestDataNum].R1SW;
				params.u10 		= 	CrestData[CrestDataNum].R1Ball;
				params.u11 		= 	CrestData[CrestDataNum].R1Ram;
				params.u12 		= 	CrestData[CrestDataNum].R1Cat;
				
				t.sendMarch(params,t.Rounds,r,retry, CrestDataNum);
				break;
			default:
				var params 		= 	unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
				params.cid		= 	CrestData[CrestDataNum].CrestCity;
				params.type		= 	4;
				params.kid		= 	kid;
				params.xcoord 	= 	CrestData[CrestDataNum].X;
				params.ycoord 	= 	CrestData[CrestDataNum].Y;
				params.u1 		= 	CrestData[CrestDataNum].R2ST;
				params.u2 		= 	CrestData[CrestDataNum].R2MM;
				params.u3 		= 	CrestData[CrestDataNum].R2Scout;
				params.u4 		= 	CrestData[CrestDataNum].R2Pike;
				params.u5 		= 	CrestData[CrestDataNum].R2Sword;
				params.u6 		= 	CrestData[CrestDataNum].R2Arch;
				params.u7 		= 	CrestData[CrestDataNum].R2LC;
				params.u8 		= 	CrestData[CrestDataNum].R2HC;
				params.u9 		= 	CrestData[CrestDataNum].R2SW;
				params.u10 		= 	CrestData[CrestDataNum].R2Ball;
				params.u11 		= 	CrestData[CrestDataNum].R2Ram;
				params.u12 		= 	CrestData[CrestDataNum].R2Cat;
				t.sendMarch(params,t.Rounds,r,retry, CrestDataNum);
				break;
		}

	},
	
	toggleCrestState: function(obj) {
		var t = Tabs.Crest;
                obj = document.getElementById('Cresttoggle');
                if (Options.crestRunning == true) {
		  Options.crestRunning = false;
		  obj.value = "crest = OFF";
                  updatebotbutton('crest-OFF', 'pbcresttab');
		  saveOptions();

		} else {
                     Options.crestRunning = true;
                     obj.value = "crest = ON";
	             updatebotbutton('crest-ON', 'pbcresttab');
		     for (crest in Options.Creststatus) {
					owned = Seed.items['i'+crest];
					if (owned == undefined) owned=0;
					Options.Creststatus[crest] = owned;
//                        		Options.CrestLevel = 0;
//                        		Options.CrestType = 0;
					Options.Crest1Count = 0;
					Options.Crest2Count = 0;
				}
				var now = new Date().getTime()/1000.0;
				now = now.toFixed(0);
				Options.LastCrestReport = now;
                                saveOptions();
				setTimeout(function(){ t.Rounds(1,0,0);}, 5*1000);
			}
	},
	

	
	
	

	sendCrestReport: function(){
		if(!Options.crestreport || !CrestOptions.Running) 
			return;
			
		var t = Tabs.Crest;
		var now = new Date().getTime()/1000.0;
		now = now.toFixed(0);
		
		if (now < (parseInt(Options.LastCrestReport)+(Options.CrestMsgInterval*60*60))) 
			return;

		var total = 0;
		var wildtype = 	'';

		switch (Options.CrestType) {
			case '10':
				wildtype = unsafeWindow.g_js_strings.commonstr.grassland;
				break;
			case '11': 
				wildtype = unsafeWindow.g_js_strings.commonstr.lake;
				break;
			case '20': 
				wildtype = unsafeWindow.g_js_strings.commonstr.woods;
				break;
			case '30': 
				wildtype = unsafeWindow.g_js_strings.commonstr.hills;
				break;
			case '40': 
				wildtype = unsafeWindow.g_js_strings.commonstr.mountain;
				break;
			case '50': 
				wildtype = unsafeWindow.g_js_strings.commonstr.plain;
				break;
		}
		
		var message = 'Crest Stats: %0A';
		message += '%0A Crests Gained (for '+ Options.CrestMsgInterval +' hour of cresting) on a Level: '+Options.CrestLevel+' '+wildtype+'%0A';

		for (crest in Options.Creststatus) {
			owned = Seed.items['i'+crest];
			if (owned == undefined) 
				owned =	0;
			if ((owned - Options.Creststatus[crest]) > 0) 
				message	+= 	'<DIV><B>' + unsafeWindow.itemlist['i'+crest]['name'] +': '+ (owned - Options.Creststatus[crest]) +'%0A </b></div>';
			else 
				message	+= 	unsafeWindow.itemlist['i'+crest]['name'] +': '+ (owned - Options.Creststatus[crest]) +'%0A';
				
			total += (owned - Options.Creststatus[crest]);
			Options.Creststatus[crest] = owned;
		}
		
		message += '%0A Total Crests gained: '+ total +'%0A';
		message += '%0A Numbers of 1st Wave send: '+ Options.Crest1Count +'%0A';
		message += 'Numbers of 2nd Wave send: '+ Options.Crest2Count +'%0A';

		Options.Crest1Count = 0;
		Options.Crest2Count = 0;

		var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
		params.emailTo = Seed.player['name'];
		params.subject = "Crest Overview";
		params.message = message;
		params.requestType = "COMPOSED_MAIL";
		
		new AjaxRequest(unsafeWindow.g_ajaxpath + "ajax/getEmail.php" + unsafeWindow.g_ajaxsuffix, {
			method: "post",
			parameters: params,
			onSuccess: function (message) {
				var rslt = eval("(" + message.responseText + ")");
				if (rslt.ok) {
					Options.LastCrestReport = now;
				} 
			},
			onFailure: function () {
			},
		});

		saveOptions();
	},	


	hide : function (){
		var t = Tabs.Crest;
	},

	show : function (){
	},
 };
/** End Cresting tab **/

/*************** TRANSPORT **********/
Tabs.TranspAuto = {
 tabOrder: 6,
 tabLabel: 'Transport',
 cont : null,
 displayTimer : null,
 state : null,
 curTabBut : null,
 curTabName : null,
 sourceCity : {},
 destinationCity : {},
 rows : [],
  timer: null,
  traderState: [],
  reapproState: [],
  lTR: [],
  tradeRoutes: [],
  checkdotradetimeout: null,
  count:0,
  check:false,
 show : function (){
   var t = Tabs.TranspAuto;
   if (document.getElementById ('maparea_map').style.display!="none") {
     if (t.destinationCityx) {
                      t.destinationCityx.value = document.getElementById ('mapXCoor').value;
                      t.destinationCityy.value = document.getElementById ('mapYCoor').value;
                     }
   }
   if (t.curTabBut) {
    var but=t.curTabBut;
    t.show2();
   }
 },
 hide : function (){
    var t = Tabs.TranspAuto;
    clearTimeout (t.displayTimer);
    clearTimeout (t.timer);
  },
  
  init : function (div){  
   var t = Tabs.TranspAuto;
   unsafeWindow.BOestimeres = t.estimerRes;
   t.traderState = {running: false,};
   t.reapproState = {running: false,city:-1,unit:9};
   t.readTraderState();
   t.readReapproState();
   t.readTradeRoutes();
   t.e_tradeRoutes();
	  
	  
   // Calcul du temps pour le reappor :
   // - recherche du temps le plus elev??? entre els vilels secondaires et le QG
   var final = 0;
   if (t.reapproState.city>=0) {
   for(var i=0; i<Cities.numCities; i++) {
      var x2 = parseInt(Cities.cities[i].x);
      var x1 = parseInt(Cities.cities[t.reapproState.city].x);
      var y2 = parseInt(Cities.cities[i].y);
      var y1 = parseInt(Cities.cities[t.reapproState.city].y);
      var dist = distance (x1, y1, x2, y2);
      var m = estETA(dist,t.reapproState.unit,Cities.cities[t.reapproState.city].id);  
       if (m.friendETA>final)
        final=m.friendETA;
    }
    Options.reapprointerval = parseInt(final/60*2+10);
    
   }  
  
   
   
   AddSubTabLink('Transport', t.toggleTraderState, 'pbtrantab');
   if (t.reapproState.running == false) {
       	       updatebotbutton('Provide - OFF', 'boreapprotab');
             } else {
       	      updatebotbutton('Provide - ON', 'boreapprotab');
       	      t.actionreappro();
   }
   if (t.traderState.running == false) {
       	       updatebotbutton('Transport - OFF', 'pbtrantab');
             } else {
       	       updatebotbutton('Transport - ON', 'pbtrantab');
    }
    window.addEventListener('unload', t.onUnload, false);
    t.cont = div;
    t.cont.innerHTML = '<TABLE class=ptTab align=center><TR><TD><INPUT class=bopbSubtab ID=BoTrpSubM type=submit value="Manual"></td>\
             <TD><INPUT class=bopbSubtab ID=BoTrpSubA type=submit  value="Automatic"></td><TD><INPUT class=bopbSubtab ID=BoTrpSubR type=submit  value="Provide"></td></tr></table>\
         <DIV id="BoTrpOutput" style="margin-top:5px; background-color:white; height:'+(Options.HauteurBoite-65)+'px;max-height:'+(Options.HauteurBoite-65)+'px;overflow-y:auto"></div>';
        t.TransportDiv = ById('BoTrpOutput'); 
  ById('BoTrpSubA').addEventListener('click', e_butSubtab, false);
  ById('BoTrpSubM').addEventListener('click', e_butSubtab, false);
  ById('BoTrpSubR').addEventListener('click', e_butSubtab, false);
     changeSubtab (ById('BoTrpSubM'));  

      function e_butSubtab (evt){
          changeSubtab (evt.target);   
      }
    
      function changeSubtab (but){
          if (but == t.curTabBut)
            return;
          if (t.curTabBut){
            t.curTabBut.className='bopbSubtab'; 
            t.curTabBut.disabled=false;
          }
          t.curTabBut = but;
          but.className='bopbSubtab bopbSubtabSel'; 
          but.disabled=true;
          t.curTabName = but.id.substr(8);
          t.show2();
      }  
    
  },
   show2 : function (){
     var t = Tabs.TranspAuto
     t.state = null;
     clearTimeout (t.displayTimer);
     clearTimeout (t.timer);
     if (t.curTabName == 'M')
       t.showManuel();
     else  if (t.curTabName == 'R')
       t.showReappro();
     else {
       t.showAuto();
       t.showTimer();	
     }
  },
  showTimer: function() {
   var t = Tabs.TranspAuto;
   t.updateTroops();
   t.updateResources();  
   t.timer = setTimeout (t.showTimer, 1000); 
  },
  showReappro: function () {
   var t = Tabs.TranspAuto;
   var m = '<DIV id=pbTowrtDivF class=boStat>AUTO Provide- CONFIGURATION</div><TABLE id=pbtraderfunctions width=100% height=0% class=pbTab><TR align="center">';
   if (t.reapproState.running == false) {
               m += '<TD><INPUT id=boReapproState type=submit value="Provide = Off"></td>';
     	       updatebotbutton('PROVIDE - OFF', 'boreapprotab');
           } else {
               m += '<TD><INPUT id=boReapproState type=submit value="Provide = ON"></td>';
     	      updatebotbutton('PROVIDE - ON', 'boreapprotab');
   }
   m += '<td><input type=button value="AUTOMATIC values" id=BORecupReappro></td><td><input type=button value="sAVE" id="boReappro"><td><span title="This time is only computed at every opening of POWER!   ,  defined by the time more and more between headquarters citt ,  secondary + 10 minutes.">Inervals: <INPUT id=pbreapprointerval type=text size=2 READONLY value="'+Options.reapprointerval+'"\> minutes</td></tr></table>';
   m += '<DIV id=pbReapproDivDRoute class=boStat>CONFIGURE YOUR CITY</div>';
   m += '<TABLE id=pbaddReapproroute width=95% height=0% class=pbTab><TR align="left">';
   m += '<TR align="left"><TD colspan=2> City of refueling :</td> <TD colspan=3><DIV style="margin-bottom:10px;"><span id=borescity></span></div></td><td colspan=3>Type Troop: <select id="BOApproUnit"><option value=9>wagons</option><option value=7>Cavalry</option><option value=8>Heavy Cavalry</option></select></tr>';
  
  var Types = ['gold','food','wood','stone','iron','aetherstone'];
   
   m += '<TR align="left"><td colspan=2>Fornire</td>';
   for (var y=0; y< Seed.cities.length;y++)
    m += '<td>'+Seed.cities[y][1]+'</td>';
   for (var i=0;i<=5;i++) {
    m += '</tr><tr><td align=center valign=middle rowspan=2><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/'+Types[i]+'_30.png"></td><td>Supply</td>';
    for (var y=0; y< Seed.cities.length;y++)
     m += '<td><span id="ReappRec_'+y+'_'+i+'"></span></td>';
    m += '</tr><tr><td>Minimum to keep</td>';
        for (var y=0; y< Seed.cities.length;y++)
     m += '<td><input id="ReappRes_'+y+'_'+i+'" type=text size=10 maxlength=12 value=0></td>';  
    m +='</tr>';
   }
   m += '</table><br>Attenzione : VERSION BETA<br><u><b>Istruzioni :</b></u><br>1. Choose your bunker (where resources should be sent)<br>2. Click on AUTOMATIC values : Ensure that the transport is configured automatically <br>3. Enter the quantity   City to take on your secondary (for example 5kk of minerals and stone 5kk)<br>4. If the\'interval equal to 0, update by pressing F5<br>5. Click to Activate !!!';
   t.TransportDiv.innerHTML = m;
   if (t.reapproState.city==undefined ||t.reapproState.city==-1) {
    
    t.reapproState.city=0;
   }
   t.reacp = new CdispCityPicker ('botrader', ById('borescity'), true, t.updateResources2, t.reapproState.city);
   ById('boReapproState').addEventListener('click', function(){t.toggleReapproState(this);}, false);
    ById('boReappro').addEventListener('click', function(){t.saveReappro();}, false);
   
   ById('pbreapprointerval').addEventListener('keyup', function(){
      		if (isNaN(ById('pbreapprointerval').value)){ ById('pbreapprointerval').value=60 ;}
      		Options.reapprointerval = ById('pbreapprointerval').value;
      		saveOptions();
   }, false);
   
   ById('BORecupReappro').addEventListener('click', function(){t.RecupReappro();}, false);
   ById('BOApproUnit').value = t.reapproState.unit;
   ById('BOApproUnit').addEventListener('change', function(){
    t.reapproState.unit = ById('BOApproUnit').value;
    t.saveReappro();
    
   }, false);
   
   t.updateResources2();
  },
  RecupReappro:function() {
   var t = Tabs.TranspAuto;
   var r = t.tradeRoutes;
   for (var y=0; y< Seed.cities.length;y++) {
    for (var i=0;i<(r.length);i++) {
     if (parseInt(Seed.cities[y][0]) == r[i].city) {
   ById('ReappRes_'+y+'_0').value=r[i].target_Gold;
   ById('ReappRes_'+y+'_1').value=r[i].target_Food;
   ById('ReappRes_'+y+'_2').value=r[i].target_Wood;
   ById('ReappRes_'+y+'_3').value=r[i].target_Stone;
   ById('ReappRes_'+y+'_4').value=r[i].target_Ore;
   ById('ReappRes_'+y+'_5').value=r[i].target_Astone;
   
     }
    } 
   }
   t.saveReappro();
   
   
  },
  saveReapproState: function(){
    var t = Tabs.TranspAuto;
    var serverID = getServerId();
    GM_setValue('reapproState_' + serverID, JSON2.stringify(t.reapproState));
  },
  saveReappro:function() {
   var t = Tabs.TranspAuto;
   for (var y=0; y< Seed.cities.length;y++) {
    t.reapproState['ReappRes_'+y+'_0'] = parseIntNan(ById('ReappRes_'+y+'_0').value);
    for (var i=1;i<=5;i++) {
     t.reapproState['ReappRes_'+y+'_'+i] = parseIntNan(ById('ReappRes_'+y+'_'+i).value);
    }
   }
   t.saveReapproState();
  },
  readReapproState: function(){
             var t = Tabs.TranspAuto;
             var serverID = getServerId();
             s = GM_getValue('reapproState_' + serverID);
             if (s != null) {
                 state = JSON2.parse(s);
                 for (k in state)
                     t.reapproState[k] = state[k];
             }
  },
  toggleReapproState: function(obj){
     	   var t = Tabs.TranspAuto;
     	   obj = ById('boReapproState');
             if (t.reapproState.running == true) {
                 t.reapproState.running = false;
                 if (obj)  obj.value = "Fornire = OFF";
     	       updatebotbutton('Forn - OFF', 'boreapprotab');
     	      clearTimeout(t.checkdoreapprotimeout);
     	      //t.count2 = 0;
             }
             else {
                t.reapproState.running = true;
                if (obj) obj.value = "Fornire = ACCESO";
     		updatebotbutton('Forn - ON', 'boreapprotab');
     		t.actionreappro();
             }
  },
  nbcity:-1,
  actionreappro:function() {
   var t = Tabs.TranspAuto;
   
   t.nbcity++;
   
   if (t.reapproState.running == false) {
     clearTimeout(t.checkdoreapprotimeout);
     return;
   }
 
   
   // on test la premiere ville
   if (t.nbcity==t.reapproState.city) // si c'est le QG on ++
   	t.nbcity++;
   
   var tempsprochainevisite = 10000;
   if ((Seed.cities.length-1)<t.nbcity) {
    tempsprochainevisite = Options.reapprointerval*60*1000;
    t.nbcity=-1;
   } else {
     var besoin=[0,0,0,0,0,0];     
     qtemin = parseIntNan(t.reapproState['ReappRes_'+t.nbcity+'_0']);
     qtest = parseIntNan(Seed.citystats["city" + Seed.cities[t.nbcity][0]]['gold'][0]);
     if (qtest<qtemin)
        besoin[0] = parseInt(qtemin - qtest);
     for (var i=1;i<=5;i++) {
        qtemin = parseIntNan(t.reapproState['ReappRes_'+t.nbcity+'_'+i]);
        if(i==5)
         qtest = parseInt(Seed.resources["city" + Seed.cities[t.nbcity][0]]['rec'+i][0]);
        else
         qtest = parseInt(Seed.resources["city" + Seed.cities[t.nbcity][0]]['rec'+i][0]/3600);
        if (qtest<qtemin)
        besoin[i] = parseInt(qtemin - qtest);
        //logit(i + " : " + besoin[i]);
     }   
     if (besoin[0]>0 || besoin[1]>0 || besoin[2]>0 || besoin[3]>0 || besoin[4]>0 || besoin[5]>0) {
          // il y a bien besoin de quelque chose
          // Cb il me faut de Wagons lol ?!
          // var unit = 9; // wagons pour le moment !
          var unit = 'unt' + t.reapproState.unit
       	  Troops = parseInt(Seed.units['city' + Seed.cities[t.reapproState.city][0]][unit]);
       	  featherweight = parseInt(Seed.tech.tch10);
          Load = parseInt(unsafeWindow.unitstats[unit]['5'])
       	  LoadUnit = (featherweight * ((Load/100)*10)) + Load;
       	  TroopsNeeded = (besoin[0] + besoin[1] + besoin[2] + besoin[3] + besoin[4] + (besoin[5]*5))  / LoadUnit;
       	  TroopsNeeded = TroopsNeeded.toFixed(0);
       	  if (TroopsNeeded < ((besoin[0] + besoin[1] + besoin[2] + besoin[3] + besoin[4] + (besoin[5]*5))  / LoadUnit )) TroopsNeeded++;	
       	  // test sur l'envoi au cas ou !
       	  var rallypointlevel = t.getRallypoint('city' +Seed.cities[t.reapproState.city][0]);	
       	  //logit("rallypointlevel "+Seed.cities[t.reapproState.city][0]+" : " + rallypointlevel);
	  if (rallypointlevel == 11) rallypointlevel = 15;
	  if (rallypointlevel == 12) rallypointlevel = 20;
       	  if (parseInt(TroopsNeeded) > parseInt(rallypointlevel*10000)){ TroopsNeeded = (rallypointlevel*10000); }
       	  
       	  //logit("Besoin en troupe :" + TroopsNeeded + " / " +  Troops);
       	  if (TroopsNeeded<=Troops) {
       	   // ok on as assez de troupes !      	  
       	   var city = Seed.cities[t.reapproState.city][0]
       	   var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
	   params.gold =besoin[0];
	   params.r1 =besoin[1];
	   params.r2 =besoin[2];
	   params.r3 =besoin[3];
	   params.r4 =besoin[4] ;
	   params.r5 =besoin[5] ;
   	   params.kid = 0;
   	   params.type = "1";
       	   params.cid=city;
       	   switch (unit){
	            case 'unt1': params.u1 = TroopsNeeded;break;
	            case 'unt2': params.u2 = TroopsNeeded;break;
	            case 'unt3': params.u3 = TroopsNeeded;break;
	            case 'unt4': params.u4 = TroopsNeeded;break;
	            case 'unt5': params.u5 = TroopsNeeded;break;
	            case 'unt6': params.u6 = TroopsNeeded;break;
	            case 'unt7': params.u7 = TroopsNeeded;break;
	            case 'unt8': params.u8 = TroopsNeeded;break;
	            case 'unt9': params.u9 = TroopsNeeded;break;
	            case 'unt10': params.u10 = TroopsNeeded;break;
	            case 'unt11': params.u11 = TroopsNeeded;break;
	            case 'unt12': params.u12 = TroopsNeeded;break;
           }
       	   params.xcoord = Seed.cities[t.nbcity][2];
   	   params.ycoord = Seed.cities[t.nbcity][3];
       	  
       	  // logit(" Envoi en cours... sur "+ params.xcoord+","+ params.ycoord);
       	  new AjaxRequest(unsafeWindow.g_ajaxpath + "ajax/march.php" + unsafeWindow.g_ajaxsuffix, {
	                       method: "post",
	                       parameters: params,
	                       loading: true,
	                       onSuccess: function (transport) {
	                       var rslt = eval("(" + transport.responseText + ")");
	                       if (rslt.ok) {
	                       var timediff = parseInt(rslt.eta) - parseInt(rslt.initTS);
	                       var ut = unsafeWindow.unixtime();
	                       var unitsarr=[0,0,0,0,0,0,0,0,0,0,0,0,0];
	                       for(i = 0; i <= unitsarr.length; i++){
	                       	if(params["u"+i]){
	                       	unitsarr[i] = params["u"+i];
	                       	}
	                       }
	                       var resources=new Array();
	                       resources[0] = params.gold;
	                       for(i=1; i<=5; i++){
	                       	resources[i] = params["r"+i];
	                       }
	                       var currentcityid = city;
	                       unsafeWindow.attach_addoutgoingmarch(rslt.marchId, rslt.marchUnixTime, ut + timediff, params.xcoord, params.ycoord, unitsarr, params.type, params.kid, resources, rslt.tileId, rslt.tileType, rslt.tileLevel, currentcityid, true);
	                       unsafeWindow.update_seed(rslt.updateSeed)
	                       if(rslt.updateSeed){unsafeWindow.update_seed(rslt.updateSeed)};
	                       } else {
	  
	                       }
	                       },
	                       onFailure: function () {}
             });
             
       	  }
       	  
       	
      }
        
 

   
   
   
   }
   t.checkdoreapprotimeout = setTimeout(function() { t.actionreappro();}, tempsprochainevisite);
  },
  showAuto: function() {
   var t = Tabs.TranspAuto;
    var m = '<DIV id=pbTowrtDivF class=boStat>AUTO TRANSPORT - CONFIGURATION</div><TABLE id=pbtraderfunctions width=100% height=0% class=pbTab><TR align="center">';
         if (t.traderState.running == false) {
             m += '<TD><INPUT id=pbTraderState type=submit value="Transport = OFF"></td>';
   	       updatebotbutton('Transport - OFF', 'pbtrantab');
         } else {
             m += '<TD><INPUT id=pbTraderState type=submit value="Transport = ON"></td>';
   	      updatebotbutton('Transport - ON', 'pbtrantab');
         }
         m += '<TD><INPUT id=pbShowRoutes type=submit value="Show"></td>';
         m += '</tr></table></div>';
         m += '<DIV id=pbTraderDivDRoute class=boStat>TRANSPORTATION OPTIONS</div>';
         m += '<TABLE id=pbtraderfunctions width=100% height=0% class=pbTab><TR align="left">';
   	 m += '<TD colspan=4>Send a transport each <INPUT id=pbtransportinterval type=text size=2 value="'+Options.transportinterval+'"\> minutes</td><TR align="left">';
         m += '<TD colspan=4>Do not send transport below <INPUT id=pbminwagons type=text size=2 value="'+Options.minwagons+'"\> wagons.</td></tr></table>';
         m += '</table>';
         m += '<DIV id=pbTraderDivDRoute class=boStat>ADD A TRANSPORT</div>';
         m += '<TABLE id=pbaddtraderoute width=95% height=0% class=pbTab><TR align="left">';
         m += '<TR align="left"><TD>From the city :</td> <TD colspan=4><DIV style="margin-bottom:10px;"><span id=ptrescity></span></div></td></tr>';
   
         m += '<TR align="left">';
         m += '<TD>To city  :</td> <TD width=310px><DIV style="margin-bottom:10px;"><span id=ptcityTo></span></div></td>';
         m += '<TD>O</td>';
         m += '<TD>X:<INPUT id=ptcityX type=text size=3\></td>';
         m += '<TD>Y:<INPUT id=ptcityY type=text size=3\></td></tr>';
         m += '<TABLE id=pbaddtraderoute height=0% class=pbTab><TR align="left">';
         m += '<TD width=75px>Type of troops :</td><TD width=150px><SELECT id="TransportTroop">';
         for (y in unsafeWindow.unitcost) m+='<option value="'+y+'">'+unsafeWindow.unitcost[y][0]+'</option>';
         m+='</select></td><TD width=75px>Available:</td><TD id=TroopAmount align=left width=75px></td>';
         m+='<TD width=75px>estimate :</td><TD id=CarryAmount align=left width=75px></td>';
         m += '<TR><TD >Troops: </td><TD><INPUT id=TroopsToSend type=text size=6 maxlength=6 value="0">&nbsp;&nbsp;<INPUT id=MaxTroops type=submit value="Max"></td>';
         m += '<TD width=50px><INPUT id=FillInMax type=submit value="<----"></td>';
         m +='<TD id=Calc colspan=3></td></tr>';
         m += '<TABLE id=pbaddtraderoute height=0% class=pbTab><TR align="center">';
         m += '<TD width=5%><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/food_30.png"></td>';
         m += '<TD id=TransRec1 align=right width=110px></td>';
         m += '<TD id=HaveRec1 align=right width=110px></td>';
         m += '<TD width=55px align=right><INPUT id=pbshipFood type=checkbox unchecked=true\></td>';
         m += '<TD width=180px  align=left>keep : <INPUT id=pbtargetamountFood type=text size=11 maxlength=12 value="0" disabled=true\></td>';
         m += '<TD width=100px>send: <INPUT id=pbtradeamountFood type=text size=11 maxlength=12 value="0"\></td>';
         m += '<TD width=50px><INPUT id=MaxFood type=submit value="Max"></td></tr>';
         m += '<TR align="center">';
         m += '<TD width=5%><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/wood_30.png"></td>';
         m += '<TD id=TransRec2 align=right width=110px></td>';
         m += '<TD id=HaveRec2 align=right width=110px></td>';
         m += '<TD width=55px align=right><INPUT id=pbshipWood type=checkbox unchecked=true\></td>';
         m += '<TD width=180px align=left>keep : <INPUT id=pbtargetamountWood type=text size=11 maxlength=12 value="0" disabled=true\></td>';
         m += '<TD width=100px>send: <INPUT id=pbtradeamountWood type=text size=11 maxlength=12 value="0"\></td>';
         m += '<TD width=50px><INPUT id=MaxWood type=submit value="Max"></td></tr>';
         m += '<TR align="center">';
         m += '<TD width=5%><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/stone_30.png"></td>';
         m += '<TD id=TransRec3 align=right width=110px></td>';
         m += '<TD id=HaveRec3 align=right width=110px></td>';
         m += '<TD width=55px align=right><INPUT id=pbshipStone type=checkbox unchecked=true\></td>';
         m += '<TD width=180px align=left>keep : <INPUT id=pbtargetamountStone type=text size=11 maxlength=12 value="0" disabled=true\></td>';
         m += '<TD width=100px>send: <INPUT id=pbtradeamountStone type=text size=11 maxlength=12 value="0"\></td>';
         m += '<TD width=50px><INPUT id=MaxStone type=submit value="Max"></td></tr>';
         m += '<TR align="center">';
         m += '<TD width=5%><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/iron_30.png"></td>';
         m += '<TD id=TransRec4 align=right width=110px></td>';
         m += '<TD id=HaveRec4 align=right width=110px></td>';
         m += '<TD width=55px align=right><INPUT id=pbshipOre type=checkbox unchecked=true\></td>';
         m += '<TD width=180px align=left>keep : <INPUT id=pbtargetamountOre type=text size=11 maxlength=12 value="0" disabled=true\></td>';
         m += '<TD width=100px>send: <INPUT id=pbtradeamountOre type=text size=11 maxlength=12 value="0"\></td>';
         m += '<TD width=50px><INPUT id=MaxOre type=submit value="Max"></td></tr>';
          m += '<TR align="center">';
      m += '<TD width=5%><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/aetherstone_30.png"></td>';
      m += '<TD id=TransRec5 align=right width=110px></td>';
      m += '<TD id=HaveRec5 align=right width=110px></td>';
      m += '<TD width=55px align=right><INPUT id=pbshipAstone type=checkbox unchecked=true\></td>';
      m += '<TD width=180px align=left>keep : <INPUT id=pbtargetamountAstone type=text size=11 maxlength=12 value="0" disabled=true\></td>';
      m += '<TD width=100px>send: <INPUT id=pbtradeamountAstone type=text size=11 maxlength=12 value="0"\></td>';
      m += '<TD width=50px><INPUT id=MaxAstone type=submit value="Max"></td></tr>';
      m += '<TR align="center">';
         m += '<TD width=5%><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/gold_30.png"></td>';
         m += '<TD id=TransGold align=right width=110px></td>';
         m += '<TD id=HaveGold align=right width=110px></td>';
         m += '<TD width=55px align=right><INPUT id=pbshipGold type=checkbox unchecked=true\></td>';
         m += '<TD width=180px align=left>keep : <INPUT id=pbtargetamountGold type=text size=11 maxlength=12 value="0" disabled=true\></td>';
         m += '<TD width=100px>send: <INPUT id=pbtradeamountGold type=text size=11 maxlength=12 value="0"\></td>';
         m += '<TD width=50px><INPUT id=MaxGold type=submit value="Max"></td></tr>';
   
         m += '</table>';
   
         m += '<DIV style="text-align:center; margin-top:15px"><INPUT id=pbSaveRoute type=submit value="Add a Route"><INPUT id=pbManualSend type=submit value="Transport Manual"></div>';
         m += '<DIV id=errorSpace></div>'
      
  	 t.TransportDiv.innerHTML = m; 
   
    ById('TransportTroop').value = 'unt9';
         
         t.tcp = new CdispCityPicker ('pttrader', ById('ptrescity'), true, t.updateResources, 0);
         t.tcpto = new CdispCityPicker ('pttraderTo', ById('ptcityTo'), true, t.clickCitySelect).bindToXYboxes(document.getElementById ('ptcityX'), document.getElementById ('ptcityY'));
         
         
       ById('TransportTroop').addEventListener('change', function(){t.updateTroops();}, false);
         ById('pbTraderState').addEventListener('click', function(){t.toggleTraderState(this);}, false);
         ById('pbSaveRoute').addEventListener('click', function(){t.addTradeRoute();}, false);
         ById('pbManualSend').addEventListener('click', function(){t.ManualTransport();}, false);
         ById('pbShowRoutes').addEventListener('click', function(){t.showTradeRoutes();}, false);
         ById('FillInMax').addEventListener('click', function(){ById('TroopsToSend').value = t.TroopsNeeded;}, false);
         
         ById('MaxTroops').addEventListener('click', function(){
   			var rallypointlevel = t.getRallypoint('city' + t.tcp.city.id);
   			if (rallypointlevel == 11) rallypointlevel = 15;
   			if (rallypointlevel == 12) rallypointlevel = 20;
   			var max = t.Troops;
   			if (t.Troops > (rallypointlevel*10000) ) max = (rallypointlevel*10000);
   			ById('TroopsToSend').value = max;
   	  }, false);
         ById('MaxFood').addEventListener('click', function(){
         		t.Food = 0;
   			var input = t.MaxLoad - (t.Food + t.Wood + t.Stone + t.Ore + t.Gold + t.Astone);
         		ById('pbtradeamountFood').value = (parseInt(input) <= parseIntCommas(ById('TransRec1').innerHTML))?input:parseIntCommas(ById('TransRec1').innerHTML);
         }, false);
         ById('MaxWood').addEventListener('click', function(){
         		t.Wood = 0;
   			var input = t.MaxLoad - (t.Food + t.Wood + t.Stone + t.Ore + t.Gold + t.Astone);
         		ById('pbtradeamountWood').value = (parseInt(input) <= parseIntCommas(ById('TransRec2').innerHTML))?input:parseIntCommas(ById('TransRec2').innerHTML);
         }, false);
         ById('MaxStone').addEventListener('click', function(){
         		t.Stone = 0;
   			var input = t.MaxLoad - (t.Food + t.Wood + t.Stone + t.Ore + t.Gold + t.Astone);
         		ById('pbtradeamountStone').value = (parseInt(input) <= parseIntCommas(ById('TransRec3').innerHTML))?input:parseIntCommas(ById('TransRec3').innerHTML);
         }, false);
         ById('MaxOre').addEventListener('click', function(){
         		t.Ore = 0;
   			var input = t.MaxLoad - (t.Food + t.Wood + t.Stone + t.Ore + t.Gold + t.Astone);
         		ById('pbtradeamountOre').value = (parseInt(input) <= parseIntCommas(ById('TransRec4').innerHTML))?input:parseIntCommas(ById('TransRec4').innerHTML);
         }, false);
         ById('MaxGold').addEventListener('click', function(){
   			t.Gold = 0;
   			var input = t.MaxLoad - (t.Food + t.Wood + t.Stone + t.Ore + t.Gold + t.Astone);
         		ById('pbtradeamountGold').value = (parseInt(input) <= parseIntCommas(ById('TransGold').innerHTML))?input:parseIntCommas(ById('TransGold').innerHTML);
         }, false);
   	   ById('MaxAstone').addEventListener('click', function(){
         		t.Astone = 0;
   			var input = t.MaxLoad - (t.Food + t.Wood + t.Stone + t.Ore + t.Gold + t.Astone);
         		ById('pbtradeamountAstone').value = (parseInt(input) <= parseIntCommas(ById('TransRec5').innerHTML))?input:parseIntCommas(ById('TransRec5').innerHTML);
         }, false);
         
         ById('pbtransportinterval').addEventListener('keyup', function(){
   		if (isNaN(ById('pbtransportinterval').value)){ ById('pbtransportinterval').value=60 ;}
   		Options.transportinterval = ById('pbtransportinterval').value;
   		saveOptions();
         }, false);
         
         ById('pbtargetamountFood').addEventListener('keyup', function(){
             if (isNaN(ById('pbtargetamountFood').value)) ById('pbtargetamountFood').value=0 ;
         }, false);
         ById('pbtargetamountWood').addEventListener('keyup', function(){
             if (isNaN(ById('pbtargetamountWood').value)) ById('pbtargetamountWood').value=0 ;
         }, false);
         ById('pbtargetamountStone').addEventListener('keyup', function(){
             if (isNaN(ById('pbtargetamountStone').value)) ById('pbtargetamountStone').value=0 ;
         }, false);
         ById('pbtargetamountOre').addEventListener('keyup', function(){
             if (isNaN(ById('pbtargetamountOre').value)) ById('pbtargetamountOre').value=0 ;
         }, false);
   	  ById('pbtargetamountAstone').addEventListener('keyup', function(){
             if (isNaN(ById('pbtargetamountAstone').value)) ById('pbtargetamountAstone').value=0 ;
         }, false);
         ById('pbtargetamountGold').addEventListener('keyup', function(){
             if (isNaN(ById('pbtargetamountGold').value)) ById('pbtargetamountGold').value=0 ;
         }, false);
         ById('pbtradeamountFood').addEventListener('keyup', function(){
             if (isNaN(ById('pbtradeamountFood').value)) ById('pbtradeamountFood').value=0 ;
         }, false);
         ById('pbtradeamountWood').addEventListener('keyup', function(){
             if (isNaN(ById('pbtradeamountWood').value)) ById('pbtradeamountWood').value=0 ;
         }, false);
         ById('pbtradeamountStone').addEventListener('keyup', function(){
             if (isNaN(ById('pbtradeamountStone').value)) ById('pbtradeamountStone').value=0 ;
         }, false);
         ById('pbtradeamountOre').addEventListener('keyup', function(){
             if (isNaN(ById('pbtradeamountOre').value)) ById('pbtradeamountOre').value=0 ;
         }, false);
   	  ById('pbtradeamountAstone').addEventListener('keyup', function(){
             if (isNaN(ById('pbtradeamountAstone').value)) ById('pbtradeamountAstone').value=0 ;
         }, false);
         ById('pbtradeamountGold').addEventListener('keyup', function(){
             if (isNaN(ById('pbtradeamountGold').value)) ById('pbtradeamountGold').value=0 ;
         }, false);
        ById('pbminwagons').addEventListener('keyup', function(){
            if (isNaN(ById('pbminwagons').value)) ById('pbminwagons').value=100 ;
            Options.minwagons = parseInt(ById('pbminwagons').value);
            saveOptions();
        }, false)
         
         ById('pbshipFood').addEventListener('click', function(){
             if (ById('pbshipFood').checked==false) {
                 ById('pbtargetamountFood').disabled = true;
             }
             else {
               ById('pbtargetamountFood').disabled = false;
             }
         },false);
         ById('pbshipWood').addEventListener('click', function(){
             if (ById('pbshipWood').checked==false) {
                 ById('pbtargetamountWood').disabled = true;
             }
             else {
               ById('pbtargetamountWood').disabled = false;
             }
         },false);
         ById('pbshipStone').addEventListener('click', function(){
             if (ById('pbshipStone').checked==false) {
                 ById('pbtargetamountStone').disabled = true;
             }
             else {
               ById('pbtargetamountStone').disabled = false;
             }
         },false);
         ById('pbshipOre').addEventListener('click', function(){
             if (ById('pbshipOre').checked==false) {
                 ById('pbtargetamountOre').disabled = true;
             }
             else {
               ById('pbtargetamountOre').disabled = false;
             }
         },false);
   	   ById('pbshipAstone').addEventListener('click', function(){
             if (ById('pbshipAstone').checked==false) {
                 ById('pbtargetamountAstone').disabled = true;
             }
             else {
               ById('pbtargetamountAstone').disabled = false;
             } 
         },false);
          ById('pbshipGold').addEventListener('click', function(){
             if (ById('pbshipGold').checked==false) {
                 ById('pbtargetamountGold').disabled = true;
             }
             else {
               ById('pbtargetamountGold').disabled = false;
             }
         },false);
  
       }, 
       updateResources : function (){
       	var t = Tabs.TranspAuto
       	var ToCity = null;
       	for (var i=1;i<=5;i++)
   			if(i==5)
   			   ById('TransRec'+i).innerHTML = addCommas ( parseInt(Seed.resources["city" + t.tcp.city.id]['rec'+i][0]) );
   			else
                  ById('TransRec'+i).innerHTML = addCommas ( parseInt(Seed.resources["city" + t.tcp.city.id]['rec'+i][0]/3600) );
       	ById('TransGold').innerHTML = addCommas ( parseInt(Seed.citystats["city" + t.tcp.city.id]['gold'][0]) );
       	for (ii in Seed.cities)
           if (Seed.cities[ii][2] == document.getElementById ('ptcityX').value && Seed.cities[ii][3] == document.getElementById ('ptcityY').value)
             ToCity = Seed.cities[ii][0];
         for (var i=1;i<=5;i++)
             if (ToCity != null)
   			if(i==5)
   			   ById('HaveRec'+i).innerHTML = addCommas ( parseInt(Seed.resources["city" + ToCity]['rec'+i][0]) );
   			else
                  ById('HaveRec'+i).innerHTML = addCommas ( parseInt(Seed.resources["city" + ToCity]['rec'+i][0]/3600) );
       	  else ById('HaveRec'+i).innerHTML = "----";
         if (ToCity != null) ById('HaveGold').innerHTML = addCommas ( parseInt(Seed.citystats["city" + ToCity]['gold'][0]) );
         else  ById('HaveGold').innerHTML =  "----";   
       },
       
       updateTroops : function (city){
       	var t = Tabs.TranspAuto;
       	var fontcolor = 'black';
       	t.Food = parseInt(ById('pbtradeamountFood').value);
         	t.Wood = parseInt(ById('pbtradeamountWood').value);
         	t.Stone = parseInt(ById('pbtradeamountStone').value);
         	t.Ore = parseInt(ById('pbtradeamountOre').value);
         	t.Gold = parseInt(ById('pbtradeamountGold').value);
   		t.Astone = parseInt(ById('pbtradeamountAstone').value*5);
       	var unit = ById('TransportTroop').value;
       	t.Troops = parseInt(Seed.units['city' + t.tcp.city.id][unit]);
       	var featherweight = parseInt(Seed.tech.tch10);
       	var Load = parseInt(unsafeWindow.unitstats[unit]['5'])
       	var LoadUnit = (featherweight * ((Load/100)*10)) + Load;
       	var GlobalMaxLoad = t.Troops * LoadUnit;
       	t.MaxLoad = parseInt(ById('TroopsToSend').value) * LoadUnit;
        	t.TroopsNeeded = (t.Food + t.Wood + t.Stone + t.Ore + t.Gold + t.Astone) / LoadUnit;
        	t.TroopsNeeded = t.TroopsNeeded.toFixed(0);	
   		if (t.TroopsNeeded < ((t.Food + t.Wood + t.Stone + t.Ore + t.Gold + t.Astone) / LoadUnit)) t.TroopsNeeded++;	
           
           if ( t.TroopsNeeded > t.Troops) fontcolor = 'red';
       	if (t.Troops > 0 ) ById('TroopAmount').innerHTML = '<FONT color='+fontcolor+'>' + addCommas(t.Troops) + '</font>';
       	else ById('TroopAmount').innerHTML = 0;
       	if (GlobalMaxLoad > 0) ById('CarryAmount').innerHTML = addCommas(GlobalMaxLoad);
       	else  ById('CarryAmount').innerHTML = 0;
       	
       	ById('Calc').innerHTML = 'resources: ' +  addCommas(t.Food + t.Wood + t.Stone + t.Ore + t.Gold  + t.Astone) + ' / ' + addCommas(t.MaxLoad) + '&nbsp;&nbsp;(troops needed : <FONT color='+fontcolor+'>' + addCommas(t.TroopsNeeded) + '</font> )' ;
       },    
       
       getRallypoint: function(cityId){
         var t = Tabs.TranspAuto;
         for (var o in Seed.buildings[cityId]){
   		var buildingType = parseInt(Seed.buildings[cityId][o][0]);
   		var buildingLevel = parseInt(Seed.buildings[cityId][o][1]);
   		if (buildingType == 12){
   			return parseInt(buildingLevel);
   			break;
   		}
   	   }
   	  return 0;
       },
         	  
   
    e_tradeRoutes: function(){
         var t = Tabs.TranspAuto;
         var now = new Date();
         if (t.traderState.running == true)    {
         	var now = new Date().getTime()/1000.0;
         	now = now.toFixed(0);
         	var last = Options.lasttransport;
          		if ( now > (parseInt(last) + (Options.transportinterval*60))){
   				  t.checkdoTrades();
         		}
         }
   	  setTimeout(function(){ t.e_tradeRoutes();}, Options.transportinterval*1000);
   	  
       },
       	
   	delTradeRoutes: function() {
   		var t = Tabs.TranspAuto;	
   		t.tradeRoutes= [];
   	},
   	
   	checkcoords : function (obj){
   		var t = Tabs.TranspAuto;
   		if(obj.id == 'pbok'){
   			t.check = true;
   			t.addTradeRoute();
   		}
   		return;			
   	},
   	
   	addTradeRoute: function () {
   		var valid = true;
   		var t = Tabs.TranspAuto;
   		var city = t.tcp.city.id;
   		if (ById('ptcityX').value==0 && ById('ptcityY').value ==0 && !t.check)
   		{
   			return;
   		}
   		var ship_Food = ById('pbshipFood').checked;
   		var ship_Wood = ById('pbshipWood').checked;
   		var ship_Stone = ById('pbshipStone').checked;
   		var ship_Ore = ById('pbshipOre').checked;
   		var ship_Astone = ById('pbshipAstone').checked;
   		var ship_Gold = ById('pbshipGold').checked;
   		var target_Food = ById('pbtargetamountFood').value;
   		var target_Wood = ById('pbtargetamountWood').value;
   		var target_Stone = ById('pbtargetamountStone').value;
   		var target_Ore = ById('pbtargetamountOre').value;
   		var target_Astone = ById('pbtargetamountAstone').value;
   		var target_Gold = ById('pbtargetamountGold').value;
   		var trade_Food = ById('pbtradeamountFood').value;
   		var trade_Wood = ById('pbtradeamountWood').value;
   		var trade_Stone = ById('pbtradeamountStone').value;
   		var trade_Ore = ById('pbtradeamountOre').value;
   		var trade_Astone = ById('pbtradeamountAstone').value;
   		var trade_Gold = ById('pbtradeamountGold').value;
   		var target_x = ById('ptcityX').value;
   		var target_y = ById('ptcityY').value;
   		var TroopType = ById('TransportTroop').value;
   		var route_state = true;
   				
   		if (valid == true) {
   			var lTR = t.tradeRoutes;
   			lTR.push({
   				city:				city,
   				ship_Food:			ship_Food,
   				target_Food:		target_Food,
   				trade_Food: 		trade_Food,
   				ship_Wood:			ship_Wood,
   				target_Wood:		target_Wood,
   				trade_Wood: 		trade_Wood,
   				ship_Stone:			ship_Stone,
   				target_Stone:		target_Stone,
   				trade_Stone: 		trade_Stone,
   				ship_Ore:			ship_Ore,
   				target_Ore:			target_Ore,
   				trade_Ore:	 		trade_Ore,
   				ship_Astone:	    ship_Astone,
   				target_Astone:		target_Astone,
   				trade_Astone:	 	trade_Astone,
   				ship_Gold:			ship_Gold,
   				target_Gold:		target_Gold,
   				trade_Gold: 		trade_Gold,
   				target_x: 			target_x,
   				target_y: 			target_y,
   				TroopType:      TroopType,
   				route_state: 		"true"
   			});
   		}
   		ById('pbTraderDivDRoute').style.background ='#99FF99';
   		setTimeout(function(){ (ById('pbTraderDivDRoute').style.background =''); }, 1000);
   	},
   	showTradeRoutes: function () {
   		var t = Tabs.TranspAuto;
   		if (t.popTradeRoutes == null) {
   		 t.popTradeRoutes = new CPopup('pbShowTrade', 0, 0, 750, 500, true, function() {clearTimeout (1000);});
   		 t.popTradeRoutes.centerMe (mainPop.getMainDiv());
   		}
   		var m = '<DIV style="max-height:460px; height:460px; overflow-y:auto"><TABLE align=center cellpadding=0 cellspacing=0 width=100% class="pbTab" id="pbRoutesQueue">';       
   		t.popTradeRoutes.getMainDiv().innerHTML = '</table></div>' + m;
   		t.popTradeRoutes.getTopDiv().innerHTML = '<TD><B>The routes Transport Automatic : </td>';
   		t.paintTradeRoutes();
   		t.popTradeRoutes.show(true)	;
   	},
   	paintTradeRoutes: function(){
   	        var t = Tabs.TranspAuto;
   	        var r = t.tradeRoutes;
   	        var cityname;
   	        var citynameTo = null;
   	    var m= '<TABLE id=paintRoutes class=pbTab>'; 
   			for (var i=0;i<(r.length);i++) {
   			  citynameTo = null;
   				for (var y=0; y< Seed.cities.length;y++) {
   					if ( parseInt(Seed.cities[y][0]) == r[i].city) var cityname = Seed.cities[y][1];
   					if ( parseInt(Seed.cities[y][2]) == r[i].target_x && parseInt(Seed.cities[y][3]) == r[i].target_y) var citynameTo = Seed.cities[y][1];
   				}    
   				var queueId = i;
   				if (citynameTo == null) var TO = r[i].target_x +','+ r[i].target_y;
   				else TO = citynameTo;
   				if (r[i].route_state) var status = '<FONT color=green>active</font>';
   				else var status = '<FONT color=red>D&acture;activ&eacute;</font>';
   				if (r[i].TroopType == undefined) var unit = 'unt9';
           else var unit = r[i].TroopType;
   				m += '<TR><TD TD width=12px>&nbsp;&nbsp;</td></tr>';
           m +='<TR><TD width=20px>'+(i+1)+'</td><TD width=175px>Da:&nbsp;&nbsp;'+ cityname +'</TD><TD width=175px>A:&nbsp;&nbsp;'+ TO +'</td><TD width=175px>'+status+'</td>';
           m +='<TD width=60px><A onclick="traceEdit('+queueId+')">Modification</a></td><TD width=60px><A onclick="traceDelete('+queueId+')">view</a></td></tr>';
           m += '<TR><TD></td><TD>Troops:&nbsp;&nbsp;'+unsafeWindow.unitcost[unit][0]+'</td></tr>';
           if (r[i].ship_Food) m += '<TR><TD></td><TD align=center><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/food_30.png"></td><TD>obiettivo: '+ addCommas(r[i].target_Food) +'</td><TD>Invia: '+ addCommas(r[i].trade_Food)+'</td>';
   				if (r[i].ship_Wood) m += '<TR><TD></td><TD align=center><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/wood_30.png"></td><TD>obiettivo: '+ addCommas(r[i].target_Wood) +'</td><TD>Invia: '+ addCommas(r[i].trade_Wood)+'</td>';
   				if (r[i].ship_Stone) m += '<TR><TD></td><TD align=center><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/stone_30.png"></td><TD>obiettivo: '+ addCommas(r[i].target_Stone) +'</td><TD>Invia: '+ addCommas(r[i].trade_Stone)+'</td>';
   				if (r[i].ship_Ore) m += '<TR><TD></td><TD align=center><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/iron_30.png"></td><TD>obiettivo: '+ addCommas(r[i].target_Ore) +'</td><TD>Invia: '+ addCommas(r[i].trade_Ore)+'</td>';
   				if (r[i].ship_Astone) m += '<TR><TD></td><TD align=center><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/aetherstone_30.png"></td><TD>obiettivo: '+ addCommas(r[i].target_Astone) +'</td><TD>Invia: '+ addCommas(r[i].trade_Astone)+'</td>';
   				if (r[i].ship_Gold) m += '<TR><TD></td><TD align=center><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/gold_30.png"></td><TD>obiettivo: '+ addCommas(r[i].target_Gold) +'</td><TD>Invia: '+ addCommas(r[i].trade_Gold)+'</td>';
          }
   	     m +='</table>';
   	     ById('pbRoutesQueue').innerHTML= m; 
          unsafeWindow.traceEdit = t.editQueueElement;
          unsafeWindow.traceDelete = t.cancelQueueElement;
   	    },
   	  
   	 cancelQueueElement: function(queueId){
   	     var t = Tabs.TranspAuto;
   	     var queueId = parseInt(queueId);
   	     t.tradeRoutes.splice(queueId, 1);
   	     t.showTradeRoutes();
   	 },
   	 
   	 editQueueElement: function(queueId){
   	     var t = Tabs.TranspAuto;
   	     var r = t.tradeRoutes;
          var queueId = parseInt(queueId);
   	     var cityname;
   	     var citynameTo = null;
   	     var Types = ['food','wood','stone','iron','aetherstone','gold'];
   	     for (var y=0; y< Seed.cities.length;y++) {
   					if ( parseInt(Seed.cities[y][0]) == r[queueId].city) var cityname = Seed.cities[y][1];
   					if ( parseInt(Seed.cities[y][2]) == r[queueId].target_x && parseInt(Seed.cities[y][3]) == r[queueId].target_y) var citynameTo = Seed.cities[y][1];
   			 }
          if (citynameTo == null) var TO = r[queueId].target_x +','+ r[queueId].target_y;
   			 else TO = citynameTo; 
          var n = '<TABLE id=editRoutes class=pbTab>';
   	     n +='<TD>Da :'+ cityname +'</td><TD>a :'+ TO +'</td>';
   	     n +='<TD><INPUT id=TradeStatus type=checkbox>active Route</td>';
   	     n += '<TD width=150px>type troops :<SELECT id="pbbTransportTroop">';
          for (y in unsafeWindow.unitcost) n+='<option value="'+y+'">'+unsafeWindow.unitcost[y][0]+'</option>';
          n+='</select></td></table><BR><TABLE  id=editRoutes class=pbTab>';
          for (var i=0;i<Types.length;i++){
   	    var icon = Types[i];
            n += '<TR><TD width=50px align=center><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/'+icon+'_30.png"></td>';
            n += '<TD width=50px align=center><INPUT id=pbbship'+Types[i]+' type=checkbox></td>';
            n += '<TD width=125px>Keep : <INPUT id=pbbtargetamount'+Types[i]+' type=text size=11 maxlength=12 value="0"></td>';
            n += '<TD width=125px>Transport : <INPUT id=pbbtradeamount'+Types[i]+' type=text size=11 maxlength=12 value="0"\></td></tr>';
          }
          n+='</table><BR><TABLE id=editRoutes class=pbTab><TR><TD><a class="button20" id="Cancel"><span>Cancel</span></a></td>';
          n+='<TD><a class="button20" id="Save"><span>Save</span></a></td></tr>';
          n +='</table>';
          
          ById('pbRoutesQueue').innerHTML= n;
          ById('TradeStatus').checked = r[queueId].route_state;
          if (r[queueId].TroopType == undefined) var unit = 'unt9';
          else var unit = r[queueId].TroopType;
          ById('pbbTransportTroop').value = unit;
	         ById('pbbshipfood').checked = r[queueId].ship_Food;
	         ById('pbbshipwood').checked = r[queueId].ship_Wood;
	         ById('pbbshipstone').checked = r[queueId].ship_Stone;
	         ById('pbbshipiron').checked = r[queueId].ship_Ore;
	  	   ById('pbbshipaetherstone').checked = r[queueId].ship_Astone;
	         ById('pbbshipgold').checked = r[queueId].ship_Gold;
	         ById('pbbtargetamountfood').value = r[queueId].target_Food;
	         ById('pbbtargetamountwood').value = r[queueId].target_Wood;
	         ById('pbbtargetamountstone').value = r[queueId].target_Stone;
	         ById('pbbtargetamountiron').value = r[queueId].target_Ore;
	  	   ById('pbbtargetamountaetherstone').value = r[queueId].target_Astone;
	         ById('pbbtargetamountgold').value = r[queueId].target_Gold;
	         ById('pbbtradeamountfood').value = r[queueId].trade_Food;
	         ById('pbbtradeamountwood').value = r[queueId].trade_Wood;
	         ById('pbbtradeamountstone').value = r[queueId].trade_Stone;
	         ById('pbbtradeamountiron').value = r[queueId].trade_Ore;
	  	   ById('pbbtradeamountaetherstone').value = r[queueId].trade_Astone;
	         ById('pbbtradeamountgold').value = r[queueId].trade_Gold;
	         ById('Cancel').addEventListener('click', function(){t.showTradeRoutes();}, false);
	         ById('Save').addEventListener('click', function(){
	              r[queueId].route_state = ById('TradeStatus').checked;
	              r[queueId].TroopType = ById('pbbTransportTroop').value;
	              r[queueId].ship_Food = ById('pbbshipfood').checked;
	              r[queueId].ship_Wood = ById('pbbshipwood').checked;
	              r[queueId].ship_Stone = ById('pbbshipstone').checked;
	              r[queueId].ship_Ore = ById('pbbshipiron').checked;
	  			r[queueId].ship_Astone = ById('pbbshipaetherstone').checked;
	              r[queueId].ship_Gold = ById('pbbshipgold').checked;
	              r[queueId].target_Food = ById('pbbtargetamountfood').value;
	              r[queueId].target_Wood = ById('pbbtargetamountwood').value;
	              r[queueId].target_Stone = ById('pbbtargetamountstone').value;
	              r[queueId].target_Ore = ById('pbbtargetamountiron').value;
	  			r[queueId].target_Astone = ById('pbbtargetamountaetherstone').value;
	              r[queueId].target_Gold = ById('pbbtargetamountgold').value;
	              r[queueId].trade_Food = ById('pbbtradeamountfood').value;
	              r[queueId].trade_Wood = ById('pbbtradeamountwood').value;
	              r[queueId].trade_Stone = ById('pbbtradeamountstone').value;
	              r[queueId].trade_Ore = ById('pbbtradeamountiron').value;
	  			r[queueId].trade_Astone = ById('pbbtradeamountaetherstone').value;
	              r[queueId].trade_Gold = ById('pbbtradeamountgold').value;
	              t.showTradeRoutes();
	          }, false);
	 },
   	   
   	saveTradeRoutes: function(){
   		var t = Tabs.TranspAuto;
           var serverID = getServerId();
           GM_setValue('tradeRoutes_' + serverID, JSON2.stringify(t.tradeRoutes));
       },
     readTradeRoutes: function(){
           var t = Tabs.TranspAuto;
           var serverID = getServerId();
           s = GM_getValue('tradeRoutes_' + serverID);
           if (s != null) {
               route = JSON2.parse(s);
               for (k in route)
                   t.tradeRoutes[k] = route[k];
           }
       },
   	saveTraderState: function(){
   		var t = Tabs.TranspAuto;
           var serverID = getServerId();
           GM_setValue('traderState_' + serverID, JSON2.stringify(t.traderState));
       },
       readTraderState: function(){
           var t = Tabs.TranspAuto;
           var serverID = getServerId();
           s = GM_getValue('traderState_' + serverID);
           if (s != null) {
               state = JSON2.parse(s);
               for (k in state)
                   t.traderState[k] = state[k];
           }
       },
       toggleTraderState: function(obj){
   	   var t = Tabs.TranspAuto;
   	   obj = ById('pbTraderState');
           if (t.traderState.running == true) {
               t.traderState.running = false;
               if (obj)  obj.value = "Transport = OFF";
   	       updatebotbutton('Transport - OFF', 'pbtrantab');
   	       clearTimeout(t.checkdotradetimeout);
   	       t.count = 0;
           }
           else {
               t.traderState.running = true;
               if (obj) obj.value = "Transport = ON";
   		updatebotbutton('Transport - ON', 'pbtrantab');
   			t.e_tradeRoutes();
           }
       },
   	
   	checkdoTrades: function(){
   	var t = Tabs.TranspAuto;
   	if(t.tradeRoutes.length==0) return;
   	t.doTrades(t.count);
   	t.count++;
   	if(t.count < t.tradeRoutes.length){
   			  t.checkdotradetimeout = setTimeout(function() { t.checkdoTrades();}, 5000);
   			} else {
   			  var now = new Date().getTime()/1000.0;
   			  now = now.toFixed(0);
   			  Options.lasttransport = now;
   			  saveOptions();	
   			  t.count = 0;
   			}
   	},
       
     doTrades: function(count){
       var t = Tabs.TranspAuto;
      	if(t.tradeRoutes.length==0) return;
      	if(!t.tradeRoutes[count]["route_state"]) return;
      	var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
   		params.gold =0;
   		params.r1 =0;
   		params.r2 =0;
   		params.r3 =0;
   		params.r4 =0 ;
   		params.r5 =0 ;
   		params.kid = 0;
   		
   		var carry_amount= 0;
   		var wagons_needed=0;
   		var citymax = 0;
   		var city = t.tradeRoutes[count]["city"];
   		var cityID = 'city' + city;
   		
   		if(!Cities.byID[city]) return;
   		
      	 	var xcoord = t.tradeRoutes[count]["target_x"];
       	var ycoord = t.tradeRoutes[count]["target_y"];
       	var trade_Food = t.tradeRoutes[count]["trade_Food"];
       	var trade_Wood = t.tradeRoutes[count]["trade_Wood"];
       	var trade_Stone = t.tradeRoutes[count]["trade_Stone"];
       	var trade_Ore = t.tradeRoutes[count]["trade_Ore"];
   		var trade_Astone = t.tradeRoutes[count]["trade_Astone"];
       	var trade_Gold = t.tradeRoutes[count]["trade_Gold"];
       	var target_Food = t.tradeRoutes[count]["target_Food"];
       	var target_Wood = t.tradeRoutes[count]["target_Wood"];
       	var target_Stone = t.tradeRoutes[count]["target_Stone"];
       	var target_Ore = t.tradeRoutes[count]["target_Ore"];
   		var target_Astone = t.tradeRoutes[count]["target_Astone"];
       	var target_Gold = t.tradeRoutes[count]["target_Gold"];
       	var ship_Food = t.tradeRoutes[count]["ship_Food"];
       	var ship_Wood = t.tradeRoutes[count]["ship_Wood"];
       	var ship_Stone = t.tradeRoutes[count]["ship_Stone"];
       	var ship_Ore = t.tradeRoutes[count]["ship_Ore"];
   		var ship_Astone = t.tradeRoutes[count]["ship_Astone"];
       	var ship_Gold = t.tradeRoutes[count]["ship_Gold"];
       	var citymax_Food = parseIntNan(Seed.resources[cityID]['rec1'][0] / 3600);
       	var citymax_Wood = parseIntNan(Seed.resources[cityID]['rec2'][0] / 3600);
       	var citymax_Stone = parseIntNan(Seed.resources[cityID]['rec3'][0] / 3600);
       	var citymax_Ore = parseIntNan(Seed.resources[cityID]['rec4'][0] / 3600);
   		var citymax_Astone = parseIntNan(Seed.resources[cityID]['rec5'][0]);
       	var citymax_Gold = parseIntNan(Seed.citystats[cityID]['gold']);
       	var carry_Food = parseIntNan(citymax_Food - target_Food);
       	var carry_Wood = parseIntNan(citymax_Wood - target_Wood);
       	var carry_Stone = parseIntNan(citymax_Stone - target_Stone);
       	var carry_Ore = parseIntNan(citymax_Ore - target_Ore);
   		var carry_Astone = parseIntNan(citymax_Astone - target_Astone);
       	var carry_Gold = 0;
       	if (carry_Food < 0 || ship_Food==false) carry_Food = 0;
       	if (carry_Wood < 0 || ship_Wood==false) carry_Wood = 0;
       	if (carry_Stone < 0 || ship_Stone==false) carry_Stone = 0;
       	if (carry_Ore < 0 || ship_Ore==false) carry_Ore = 0;
   		if (carry_Astone < 0 || ship_Astone==false) carry_Astone = 0;
       	if (trade_Food > 0 && (carry_Food > trade_Food)) carry_Food = parseIntNan(trade_Food);
       	if (trade_Wood > 0 && (carry_Wood > trade_Wood)) carry_Wood = parseIntNan(trade_Wood);
       	if (trade_Stone > 0 && (carry_Stone > trade_Stone)) carry_Stone = parseIntNan(trade_Stone);
       	if (trade_Ore > 0 && (carry_Ore > trade_Ore)) carry_Ore = parseIntNan(trade_Ore);
   		if (trade_Astone > 0 && (carry_Astone > trade_Astone)) carry_Astone = parseIntNan(trade_Astone);
   		carry_Astone *= 5; //Multiply by 5 to account for 5 times less carrying capacity
         
         if (t.tradeRoutes[count]['TroopType'] == undefined) var wagons = parseInt(Seed.units[cityID]['unt'+ 9]); 
         else var wagons =  parseInt(Seed.units[cityID][t.tradeRoutes[count]['TroopType']]);
         var rallypointlevel = t.getRallypoint(cityID);	
   		  if (rallypointlevel == 11) rallypointlevel = 15;
   		  if (rallypointlevel == 12) rallypointlevel = 20;
       	if (parseInt(wagons) > parseInt(rallypointlevel*10000)){ wagons = (rallypointlevel*10000); }
       	
         if (t.tradeRoutes[count]['TroopType'] == undefined) var unit = 'unt9';
         else var unit = t.tradeRoutes[count]['TroopType'];
         var Troops = parseInt(Seed.units[cityID][unit]);
   	  if(parseInt(Troops)>parseInt(wagons)) Troops = wagons;
         var featherweight = parseInt(Seed.tech.tch10);
       	var Load = parseInt(unsafeWindow.unitstats[unit]['5'])
         var maxloadperwagon = (featherweight * ((Load/100)*10)) + Load;
   		  var maxload = (maxloadperwagon * Troops);
   		  if(wagons <= 0) {return; }
   
   	   	for (var t=0; t< Seed.cities.length;t++) {
   			   if ( parseInt(Seed.cities[t][0]) == city) var cityname = Seed.cities[t][1];
   		  }                     
   		
   		  var shift_Food = parseIntNan(maxload / 9); //Total of 9 portions
   		  var shift_Wood = parseIntNan(maxload / 9);
   		  var shift_Stone = parseIntNan(maxload / 9);
   		  var shift_Ore = parseIntNan(maxload / 9);
   		  var shift_Astone = parseIntNan(maxload / 9 * 5); //Aetherstone takes 5 of 9 portions	
   		  if ((maxload - carry_Food - carry_Wood - carry_Stone - carry_Ore - carry_Astone) < 0){
   			 var shift_num=0;
   			 var shift_spare=0;
   			
   			// Check: See if load/4 is to big for some resources...
   			if (carry_Food < shift_Food) {
   				shift_spare += (shift_Food - carry_Food);
   				shift_Food = carry_Food;
   			}
   			if (carry_Wood < shift_Wood) {
   				shift_spare += (shift_Wood - carry_Wood);
   				shift_Wood = carry_Wood;	
   			}
   			if (carry_Stone < shift_Stone) {
   				shift_spare += (shift_Stone - carry_Stone);
   				shift_Stone = carry_Stone;
   			}
   			if (carry_Ore < shift_Ore) {
   				shift_spare += (shift_Ore - carry_Ore);
   				shift_Ore = carry_Ore;
   			}
               if (carry_Astone < shift_Astone) {
   				shift_spare += (shift_Astone - carry_Astone);
   				shift_Astone = carry_Astone;
   			}						
   			 
   		  while (shift_spare >1) {
   				 if (carry_Food < (shift_Food + shift_spare)){
   				    shift_spare = shift_spare - carry_Food;;
   				    shift_Food = carry_Food;
   				 }
   				 else{
   				  shift_Food = (shift_Food + shift_spare);
   				  shift_spare = shift_spare- shift_spare;
   				}
   				 if (carry_Wood < (shift_Wood + shift_spare)){
   				    shift_spare = shift_spare - carry_Wood;;
   				    shift_Wood = carry_Wood;
   				 }
   				 else{
   				  shift_Wood = shift_Wood + shift_spare;
   				  shift_spare = shift_spare- shift_spare;
   				}
           		if (carry_Stone < (shift_Stone + shift_spare)){
   				    shift_spare = shift_spare - carry_Stone;
   				    shift_Stone = carry_Stone;
   				 }
   				 else{
   				  shift_Stone = shift_Stone + shift_spare;
   				  shift_spare = shift_spare- shift_spare;
   				}
   				 if (carry_Ore < (shift_Ore + shift_spare)){
   				    shift_spare = shift_spare - carry_Ore;
   				    shift_Ore = carry_Ore;
   				 }
   				 else{
   				  shift_Ore = shift_Ore + shift_spare;
   				  shift_spare = shift_spare- shift_spare;
   				}
   				if (carry_Astone < (shift_Astone + shift_spare)){
   				    shift_spare = shift_spare - carry_Astone;
   				    shift_Astone = carry_Astone;
   				 }
   				 else{
   				  shift_Astone = shift_Astone + shift_spare;
   				  shift_spare = shift_spare- shift_spare;
   				}
   			 }
   
   		carry_Food = shift_Food;
   		carry_Wood = shift_Wood;
   		carry_Stone = shift_Stone;
   		carry_Ore = shift_Ore;
   		carry_Astone = shift_Astone;
   		}
   		
   		if (maxload > (carry_Food + carry_Wood + carry_Stone + carry_Ore + carry_Astone) && ship_Gold==true) {
   		    if ((maxload-(carry_Food + carry_Wood + carry_Stone + carry_Ore + carry_Astone)) > (citymax_Gold - target_Gold)){
   		    	  carry_Gold = (citymax_Gold - target_Gold);
   		    	  if (carry_Gold < 0 ) carry_Gold = 0;
   		   	}
   		    else carry_Gold = (maxload-(carry_Food + carry_Wood + carry_Stone + carry_Ore + carry_Astone));
   		    if (trade_Gold > 0 && (carry_Gold > trade_Gold)) carry_Gold = parseInt(trade_Gold);
   		}
   		
   		wagons_needed = ((carry_Food + carry_Wood + carry_Stone + carry_Ore + carry_Astone + carry_Gold) / maxloadperwagon);
   		wagons_needed = wagons_needed.toFixed(0);	
   		if (wagons_needed < ((carry_Food + carry_Wood + carry_Stone + carry_Ore + carry_Astone + carry_Gold) / maxloadperwagon)) wagons_needed++;	
   		if ( wagons_needed < Options.minwagons ) { return; }
           
   		params.cid= city;
   		params.type = "1";
   		params.xcoord = xcoord;
   		params.ycoord = ycoord;
   		params.r1 = carry_Food;
   		params.r2 = carry_Wood;
   		params.r3 = carry_Stone;
   		params.r4 = carry_Ore;
   		params.r5 = parseInt(carry_Astone/5);
   		params.gold = carry_Gold;
   		
   		switch (unit){
         case 'unt1': params.u1 = wagons_needed;break;
         case 'unt2': params.u2 = wagons_needed;break;
         case 'unt3': params.u3 = wagons_needed;break;
         case 'unt4': params.u4 = wagons_needed;break;
         case 'unt5': params.u5 = wagons_needed;break;
         case 'unt6': params.u6 = wagons_needed;break;
         case 'unt7': params.u7 = wagons_needed;break;
         case 'unt8': params.u8 = wagons_needed;break;
         case 'unt9': params.u9 = wagons_needed;break;
         case 'unt10': params.u10 = wagons_needed;break;
         case 'unt11': params.u11 = wagons_needed;break;
         case 'unt12': params.u12 = wagons_needed;break;
       }
      if ((carry_Food + carry_Wood + carry_Stone + carry_Ore + carry_Astone + carry_Gold) > 0) {
    
            new AjaxRequest(unsafeWindow.g_ajaxpath + "ajax/march.php" + unsafeWindow.g_ajaxsuffix, {
                     method: "post",
                     parameters: params,
                     loading: true,
                     onSuccess: function (transport) {
                     var rslt = eval("(" + transport.responseText + ")");
                     if (rslt.ok) {
                     var timediff = parseInt(rslt.eta) - parseInt(rslt.initTS);
                     var ut = unsafeWindow.unixtime();
                     var unitsarr=[0,0,0,0,0,0,0,0,0,0,0,0,0];
                     for(i = 0; i <= unitsarr.length; i++){
                     	if(params["u"+i]){
                     	unitsarr[i] = params["u"+i];
                     	}
                     }
                     var resources=new Array();
                     resources[0] = params.gold;
                     for(i=1; i<=5; i++){
                     	resources[i] = params["r"+i];
                     }
                     var currentcityid = city;
                     unsafeWindow.attach_addoutgoingmarch(rslt.marchId, rslt.marchUnixTime, ut + timediff, params.xcoord, params.ycoord, unitsarr, params.type, params.kid, resources, rslt.tileId, rslt.tileType, rslt.tileLevel, currentcityid, true);
                     unsafeWindow.update_seed(rslt.updateSeed)
                     if(rslt.updateSeed){unsafeWindow.update_seed(rslt.updateSeed)};
                     } else {

                     }
                     },
                     onFailure: function () {}
             });
           }
   	},
   	
   ManualTransport: function(){
       var t = Tabs.TranspAuto;
 
    if (document.getElementById ('ptcityX').value == "" || document.getElementById ('ptcityY').value == "") return;
    if ( t.TroopsNeeded > t.Troops) return;
       
      	var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
       var unitType = ById('TransportTroop').value;
       var LoadUnit = (parseInt(Seed.tech.tch10) * ((parseInt(unsafeWindow.unitstats[unitType]['5'])/100)*10)) + parseInt(unsafeWindow.unitstats[unitType]['5']);
       var MaxLoad =  parseInt(Seed.units['city' + t.tcp.city.id][unitType]) * LoadUnit;
       document.getElementById ('errorSpace').innerHTML = '';
         	
   	params.kid = 0;
        params.cid=  t.tcp.city.id;
   	params.type = "1";
   	params.xcoord = parseInt(document.getElementById ('ptcityX').value);
   	params.ycoord = parseInt(document.getElementById ('ptcityY').value);
   	params.r1 = parseInt(document.getElementById ('pbtradeamountFood').value);
   	params.r2 = parseInt(document.getElementById ('pbtradeamountWood').value);
   	params.r3 = parseInt(document.getElementById ('pbtradeamountStone').value);
   	params.r4 = parseInt(document.getElementById ('pbtradeamountOre').value);
   	params.r5 = parseInt(document.getElementById ('pbtradeamountAstone').value);
   	params.gold = parseInt(document.getElementById ('pbtradeamountGold').value);
   		
       switch (unitType){
         case 'unt1': params.u1 = parseInt(document.getElementById ('TroopsToSend').value);break;
         case 'unt2': params.u2 = parseInt(document.getElementById ('TroopsToSend').value);break;
         case 'unt3': params.u3 = parseInt(document.getElementById ('TroopsToSend').value);break;
         case 'unt4': params.u4 = parseInt(document.getElementById ('TroopsToSend').value);break;
         case 'unt5': params.u5 = parseInt(document.getElementById ('TroopsToSend').value);break;
         case 'unt6': params.u6 = parseInt(document.getElementById ('TroopsToSend').value);break;
         case 'unt7': params.u7 = parseInt(document.getElementById ('TroopsToSend').value);break;
         case 'unt8': params.u8 = parseInt(document.getElementById ('TroopsToSend').value);break;
         case 'unt9': params.u9 = parseInt(document.getElementById ('TroopsToSend').value);break;
         case 'unt10': params.u10 = parseInt(document.getElementById ('TroopsToSend').value);break;
         case 'unt11': params.u11 = parseInt(document.getElementById ('TroopsToSend').value);break;
         case 'unt12': params.u12 = parseInt(document.getElementById ('TroopsToSend').value);break;
       }
   
       if ((params.r1 + params.r2 + params.r3 + params.r4 + params.r5 + params.gold) > 0) {   
            new AjaxRequest(unsafeWindow.g_ajaxpath + "ajax/march.php" + unsafeWindow.g_ajaxsuffix, {
                     method: "post",
                     parameters: params,
                     loading: true,
                     onSuccess: function (transport) {
                     var rslt = eval("(" + transport.responseText + ")");
                     if (rslt.ok) {                  
   		                  var timediff = parseInt(rslt.eta) - parseInt(rslt.initTS);
   		                  var ut = unixTime();
   		                  var unitsarr=[0,0,0,0,0,0,0,0,0,0,0,0,0];
   		                  for(i = 0; i <= unitsarr.length; i++){
   		                  	if(params["u"+i]){
   		                  	unitsarr[i] = params["u"+i];
   		                  	}
   		                  }
   		                  var resources=new Array();
   		                  resources[0] = params.gold;
   		                  for(i=1; i<=5; i++){
   		                  	resources[i] = params["r"+i];
   		                  }
   		                  var currentcityid = t.tcp.city.id;
   		                  unsafeWindow.attach_addoutgoingmarch(rslt.marchId, rslt.marchUnixTime, ut + timediff, params.xcoord, params.ycoord, unitsarr, params.type, params.kid, resources, rslt.tileId, rslt.tileType, rslt.tileLevel, currentcityid, true);
   		                  if(rslt.updateSeed){unsafeWindow.update_seed(rslt.updateSeed)};
   		                  document.getElementById ('errorSpace').innerHTML = 'Envoy&eacute;: ' + addCommas(params.r1+params.r2+params.r3+params.r4+params.r5+params.gold) + ' Ressources avec ' + addCommas(parseInt(document.getElementById ('TroopsToSend').value)) + ' ' + unsafeWindow.unitcost[unitType][0];
   		                  document.getElementById ('pbtradeamountFood').value = 0;
   		                  document.getElementById ('pbtradeamountWood').value = 0;
   		                  document.getElementById ('pbtradeamountStone').value = 0;
   		                  document.getElementById ('pbtradeamountOre').value = 0;
   						  document.getElementById ('pbtradeamountAstone').value = 0;
   		                  document.getElementById ('pbtradeamountGold').value = 0;
   		                  document.getElementById ('TroopsToSend').value = 0;
                     } else {
   		                  var errorcode =  'err_' + rslt.error_code;
   		                  if (rlst.msg == undefined)document.getElementById ('errorSpace').innerHTML = '<HR><FONT COLOR=red>Error: ' + unsafeWindow.g_js_strings.errorcode[errorcode] +'</font>';
   		                  else document.getElementById ('errorSpace').innerHTML = '<HR><FONT COLOR=red>Erreur : ' + rslt.msg +'</font>'; 
                     }
                     },
                     onFailure: function () {}
             });
           }
   	},
	
  onUnload: function(){
     var t = Tabs.TranspAuto;
     if (!ResetAll) t.saveTradeRoutes();
     if (!ResetAll) t.saveTraderState();
  },
  showManuel : function() {
   var t = Tabs.TranspAuto
   var rownum = 0;

   var ModelCity = {};
   
   function _row (name, row, noTotal){
      if (rownum++ % 2)
        style = '';
      else
        style = ' style = "background: #e8e8e8"';
      var tot = 0;
      var m = [];
      m.push ('<TR style="background: #fff" align=right');
      m.push (style);
      m.push ('><TD');
      m.push (style);
      m.push ('><B>');
      m.push (name);
      m.push ('</td>');
      if (noTotal){
        m.push ('<TD');
        m.push (style);
        m.push ('>&nbsp;</td>');
      } else {
        for (i=0; i<row.length; i++)
          tot += row[i];
        m.push ('<TD style="background: #ffc">');
        m.push (addCommas(tot));
        m.push ('</td>');
      }
      for (i=0; i<row.length; i++){
        m.push ('<TD');
        m.push (style);
        m.push ('>');
        m.push (addCommas(row[i]));
        m.push ('</td>');
      }
      m.push ('</tr>');
      return m.join('');
    }
    dt = new Date ();
    dt.setTime (Seed.player.datejoinUnixTime * 1000);
    if (t.state == null) {  
      m = "<DIV class=boStat>Transport goods from one city to \'other</div>";
      m +="<div id='statpourTr'></div>";
      m += "<TABLE width=100% class=ptTab border=0>\
       <tr align=center><td colspan=2><HR></td></tr>\
       <tr align=center valign=top><td colspan=1 width=50%><b><u>City </b></u><br><span id=srcptspeedcity></span></td>\
       <td colspan=1 width=50%  rowspan=2><b><u>target</b></u><br><span id=desptspeedcity></span><br>\
       or coord <br>X: <input type=text size=4 id=typetrpx value=0>&nbsp;Y: <input type=text size=4 id=typetrpy value=0><br><a href='javascript:void(0);' id='chargelistelieux'>Members</a> : <select id='BOlisteFavori'></select><br><br><INPUT id='ptttButTransport' type=submit value='Transport' style='font-weight:bold'>\
       </td></tr>\
       <tr align=center><td colspan=1>Troops : <select id=typetrp><option selected value='1'>Troops supply</option><option selected value='9'>supply wagons</option><option value='7'>Cavalry</option><option value='8'>Heavy Cavalry</option></select>\
       <br>Quantity : <input type=text size=6 value='1000' id='Choixnbwagon'><input type=button id='trswagmax' value='Max'\><br><i>((The quantity of resources is the most select troops))</i>\
       <br><b>resources :</b><input type=radio id='ChoixRess0' name='ChoixRess' value='gold' style='visibility:hidden'><img src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/gold_30.png onclick=document.getElementById('ChoixRess0').checked=true;BOestimeres(); height=20>\
       <input type=radio id='ChoixRess1' name='ChoixRess' value='rec1' style='visibility:hidden'><img src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/food_30.png onclick=document.getElementById('ChoixRess1').checked=true;BOestimeres(); height=20>\
       <input type=radio id='ChoixRess2' name='ChoixRess' value='rec2' style='visibility:hidden'><img src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/wood_30.png onclick=document.getElementById('ChoixRess2').checked=true;BOestimeres(); height=20>\
       <input type=radio id='ChoixRess3' name='ChoixRess' value='rec3' style='visibility:hidden'><img src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/stone_30.png onclick=document.getElementById('ChoixRess3').checked=true;BOestimeres(); height=20>\
       <input type=radio id='ChoixRess4' name='ChoixRess' value='rec4' style='visibility:hidden'><img src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/iron_30.png onclick=document.getElementById('ChoixRess4').checked=true;BOestimeres(); height=20>\
       <input type=radio id='ChoixRess5' name='ChoixRess' value='rec5' style='visibility:hidden'><img src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/aetherstone_30.png onclick=document.getElementById('ChoixRess5').checked=true;BOestimeres(); height=20>\
       </td></tr>\
       <tr><td colspan=2>Estimate of resources transported : <span id=BOEstimationR></td></tr>\
       </table>\
       <TABLE align=center width=100% class=ptTab><TR><TD><div id=ptTranportStatus style='text-align:center;overflow-y:auto; max-height:78px; height: 78px;'></div></td></tr></table>";
    t.TransportDiv.innerHTML = m; 
    t.destinationCityx = document.getElementById ('typetrpx');
    t.destinationCityy = document.getElementById ('typetrpy');
    
    t.destinationCityx.addEventListener ('change', t.estimerRes, false);
    t.destinationCityy.addEventListener ('change', t.estimerRes, false);
    document.getElementById ('ChoixRess0').addEventListener ('click', t.estimerRes, false);
    document.getElementById ('ChoixRess1').addEventListener ('click', t.estimerRes, false);
    document.getElementById ('ChoixRess2').addEventListener ('click', t.estimerRes, false);
    document.getElementById ('ChoixRess3').addEventListener ('click', t.estimerRes, false);
    document.getElementById ('ChoixRess4').addEventListener ('click', t.estimerRes, false);
    document.getElementById ('ChoixRess5').addEventListener ('click', t.estimerRes, false);     
    t.listeFavoris = document.getElementById ('BOlisteFavori');
    t.estimationRes = document.getElementById ('BOEstimationR');
    t.chargelistelieux = document.getElementById ('chargelistelieux');
    t.chargelistelieux.addEventListener ('click', t.chercherFavoris, false);
    t.listeFavoris.addEventListener ('change', t.SelectFavoris, false);   
    var dcp1 = new CdispCityPicker ('ptspeed1', ById('desptspeedcity'), false, t.clickCityDestinationSelect, 1);
    t.TTbutTransport = document.getElementById ('ptttButTransport');
    t.TTbutTransport.addEventListener ('click', t.clickTransportDo, false);
    t.divTranportStatus = document.getElementById ('ptTranportStatus');
    t.statpourTr = document.getElementById ('statpourTr');
    t.typetrp = document.getElementById ('typetrp');
    t.typetrp.addEventListener ('click', t.estimerRes, false); 
    t.trswagmax = document.getElementById ('trswagmax');
    t.trswagmax.addEventListener ('click', t.clickUniteMax, false);
    t.Choixnbwagon  = document.getElementById ('Choixnbwagon');
    t.Choixnbwagon.addEventListener ('keyup', t.verifierWagons, false);
    var dcp0 = new CdispCityPicker ('ptspeed0', ById('srcptspeedcity'), false, t.clickCitySourceSelect, Cities.byID[unsafeWindow.currentcityid].idx);
    t.state = 1;
   }
   if (t.state == 1) {
    if (document.getElementById ('maparea_map').style.display!="none") {
       t.destinationCityx.value = document.getElementById ('mapXCoor').value;
       t.destinationCityy.value = document.getElementById ('mapYCoor').value;
       t.destinationCityx.style.backgroundColor="#FF9999";
       t.destinationCityy.style.backgroundColor="#FF9999";
       setTimeout(function() {
             t.destinationCityx.style.backgroundColor="#fff";
       t.destinationCityy.style.backgroundColor="#fff";
       }, 3000);
                    
    }
    t.state = 2;
   }
   rows=[];
   rows[0]=[];
   m = "<TABLE class=ptTabLined cellspacing=0><TR valign=top align=right><TD width=65></td><TD width=88 style='background: #ffc'><B>TOTAL</b></td>";
      for(i=0; i<Cities.numCities; i++)
         m += '<TD width=81><B>'+ Cities.cities[i].name.substring(0,10) +'</b></td>';
      for(i=0; i<Cities.numCities; i++) {
        cityID = 'city'+ Cities.cities[i].id;
        rows[0][i] = parseInt(Seed.citystats[cityID].gold[0]);
      }
      for (r=1; r<6; r++){
        rows[r] = [];
        for(i=0; i<Cities.numCities; i++) {
          cityID = 'city'+ Cities.cities[i].id;
           if (r==5)
	    rows[r][i] = parseInt(Seed.resources[cityID]['rec'+r][0]);
	            else
           rows[r][i] = parseInt(Seed.resources[cityID]['rec'+r][0] / 3600);
        }
      }
      m += _row ('<img height=20 src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/gold_30.png>', rows[0]);
      m += _row ('<img height=20 src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/food_30.png>', rows[1]);
      m += _row ('<img height=20 src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/wood_30.png>', rows[2]);
      m += _row ('<img height=20 src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/stone_30.png>', rows[3]);
      m += _row ('<img height=20 src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/iron_30.png>', rows[4]);
      m += _row ('<img height=20 src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/aetherstone_30.png>', rows[5]);
      m += '<TR><TD><font size=1><BR></td></tr>';
      row = [];
      var totalbouffe = 0;
      for(i=0; i<Cities.numCities; i++) {
	var rp = getResourceProduction (Cities.cities[i].id);
	var usage = parseInt(Seed.resources["city" + Cities.cities[i].id]['rec1'][3]);
	row[i] = rp[1] - usage;
      }
      m += _row ('Prod', row, false,  0);
      for(i=0; i<Cities.numCities; i++) {
                    if (row[i] >= 0)
                      row[i] = '----';
                    else {
                      var timeLeft = parseInt(Seed.resources["city" + Cities.cities[i].id]['rec1'][0]) / 3600 / (0-row[i]) * 3600;
                      if (timeLeft > 86313600)
                        row[i] = '----';
                      else {
                        if (Options.enableFoodWarn && timeLeft<(Options.foodWarnHours*3600))
                          row[i] = '<SPAN class=whiteOnRed>'+ timestrShort(timeLeft) +'</span>';
                        else
                          row[i] = timestrShort(timeLeft);
                      }
                    }
      }    
      m += _row ('Aut.', row, true, 0);
      m += '<TR><TD><font size=1><BR></td></tr>';
      for (r=1; r<13; r++){
        rows[r] = [];
        for(i=0; i<Cities.numCities; i++) {
          cityID = 'city'+ Cities.cities[i].id;
          rows[r][i] = parseInt(Seed.units[cityID]['unt'+r]);
        }
      }
      m += _row ('<img height=20 title="'+unsafeWindow.unitcost['unt1'][0]+'" src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_1_30_s34.jpg>', rows[1]);
      m += _row ('<img height=20 title="'+unsafeWindow.unitcost['unt7'][0]+'" src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_7_30_s34.jpg>', rows[7]);
      m += _row ('<img height=20 title="'+unsafeWindow.unitcost['unt8'][0]+'" src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_8_30_s34.jpg>', rows[8]);
      m += _row ('<img height=20 title="'+unsafeWindow.unitcost['unt9'][0]+'" src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_9_30_s34.jpg>', rows[9]);
          row = [];
    for(i=0; i<Cities.numCities; i++) {
    	        var cityId = 'city'+ Cities.cities[i].id;
    	        var slots = 0;
    	        for (var k in Seed.queue_atkp[cityId]){   
    	         march = Seed.queue_atkp[cityId][k];
    	         if (typeof (march) == 'object'){
    	           slots++;
    	         }
    	        }
	  var niveauPointRall=parseInt(getCityBuilding (Cities.cities[i].id, 12).maxLevel); // 12=Point de ralliement
	 if (niveauPointRall==12) niveauPointRall=11;  // fix : Send eleven armies at a time for level 12
    	        row[i] = '<SPAN><B>'+ slots +'/'+ niveauPointRall +'</b></span>';
     }
    m += _row ('RP', row, true, 0);   m += "</table>";
     t.statpourTr.innerHTML = m;
     clearTimeout (t.displayTimer);
     t.displayTimer = setTimeout (t.showManuel, 4000);
  },
  
  SelectFavoris:function() {
   var t = Tabs.TranspAuto;
   if (t.listeFavoris.value!='') {
    var valeur=t.listeFavoris.value;
    var x=valeur.substr(0, valeur.lastIndexOf(','));
    var y=valeur.substr(valeur.lastIndexOf(',')+1, valeur.length);
    t.destinationCityx.value = x;
    t.destinationCityy.value = y;
   }
   t.estimerRes();
  },
  
  chercherFavoris: function() {
   var t = Tabs.TranspAuto;
   var myA = getMyAlliance ();
   if (myA[0]!=0) {
      var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
      params.perPage = 100;
      params.allianceId = myA[0];
          new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/getUserLeaderboard.php" + unsafeWindow.g_ajaxsuffix, {
	        method: "post",
	        parameters: params,
	        onSuccess: function (rslt) {
	          // on vide la liste
	          //t.listeFavoris.innerHTML=null;
	          if (rslt.ok){
	           var z=0;
	           var m="";
	           for (var i=0; i<rslt.results.length; i++){
     		      p = rslt.results[i];
		      if (p.userId != 0){
		       for (var c=0; c<p.cities.length; c++){
		         if (Seed.player.name!=p.displayName) {
		          m += "<option value='" + p.cities[c].xCoord + ","+ p.cities[c].yCoord+"'>" + p.displayName + " - Citt   " + (c+1) + " - " + p.cities[c].xCoord + "," + p.cities[c].yCoord+"</option>";
		         }
		       }  //fin for cities  	       
		      }   //fin if user 
      	            } //fin for resultat
      	            t.listeFavoris.innerHTML="<option value=''>Seleziona...</option>"+m;
	          }// fin
	        },
	        onFailure: function (rslt) {
	          t.listeFavoris.innerHTML="<option>Errore</option>";
	        },
    	});
          
   } else {
     // Si pas d'alliance !
     t.listeFavoris.innerHTML="<option>Nessuna alleanza !</option>";
   }
      
  },
  /******* transport ****/
  verifierWagons: function() {
   var t = Tabs.TranspAuto;
   var maxw=parseInt(rows[t.typetrp.value][t.sourceCity.idx]);
   var saisw=parseInt(t.Choixnbwagon.value);
   if (saisw > maxw) {
      t.Choixnbwagon.value=maxw;
      t.divTranportStatus.innerHTML = '<FONT COLOR=#550000>L\'importo non pu superare '+maxw+' !.</font>';
   }
   t.estimerRes();
  },
  estimerRes: function() {
   var t = Tabs.TranspAuto;
      // test sur les ressources choisit !
      var cityID = 'city'+ t.sourceCity.id;
      var ic=0;
      var resact=0;
      var ic_ty="gold"; 
      var ic_text="d'or";
   
   if (ById("ChoixRess1").checked) { ic_ty="rec1";ic=1;ic_text="de "+unsafeWindow.g_js_strings.commonstr.food; }
   if (ById("ChoixRess2").checked) { ic_ty="rec2";ic=2;ic_text="de bois"; }
   if (ById("ChoixRess3").checked) { ic_ty="rec3";ic=3;ic_text="de pierre"; }
   if (ById("ChoixRess4").checked) { ic_ty="rec4";ic=4;ic_text="de minerais"; }
   if (ById("ChoixRess5").checked) { ic_ty="rec5";ic=5;ic_text="d'aetherstone"; }
   if (ById("ChoixRess0").checked) { ic_ty="gold";ic=0;ic_text="d'or"; }
   
   var esti = parseInt(unsafeWindow.unitstats['unt'+t.typetrp.value][5] * t.Choixnbwagon.value * (1 + (0.10 * Seed.tech.tch10)));
   if (ic==5) {
     esti = parseInt(esti / 5);
   }
   // CAlcul de ETA = Estimation du temps de marches
   var x1 = parseInt(t.sourceCity.x);
   var x2 = parseInt(t.destinationCityx.value);
   var y1 = parseInt(t.sourceCity.y);
   var y2 = parseInt(t.destinationCityy.value);
   var dist = distance (x1, y1, x2, y2);
   var m = estETA(dist,ById('typetrp').value,t.sourceCity.id);
   var a="";
   switch(ic){
    case 0:a=unsafeWindow.g_js_strings.commonstr.gold;break;
    case 1:a=unsafeWindow.g_js_strings.commonstr.food;break;
    case 2:a=unsafeWindow.g_js_strings.commonstr.wood;break;
    case 3:a=unsafeWindow.g_js_strings.commonstr.stone;break;
    case 4:a=unsafeWindow.g_js_strings.commonstr.ore;break;
    case 5:a=unsafeWindow.g_js_strings.commonstr.aetherstone;break;
   }
   t.estimationRes.innerHTML = "<b>" + addCommas(esti) + " "+a+"</b>";
   t.estimationRes.innerHTML += "<br>Running time: <b>" + m.friendEtaStr + "</b>" ; 
   
     if (ic==5)
      resact = parseIntNan(Seed.resources[cityID][ic_ty][0]);
     else {
      if (ic==0)
       resact = parseIntNan(Seed.citystats[cityID].gold[0]);
      else
       resact = parseIntNan(Seed.resources[cityID][ic_ty][0] / 3600);
     } 

    if (resact < esti) {
     var nbparunit = parseInt(unsafeWindow.unitstats['unt'+t.typetrp.value][5] * 1 * (1 + (0.10 * Seed.tech.tch10)));
     if (ic==5) nbparunit=parseInt(nbparunit/5);
     
     
     var uniteness = Math.floor(resact / nbparunit);
     if (uniteness<1) uniteness=0;
     
  
     t.Choixnbwagon.value = uniteness;
     t.TTbutTransport.disabled = false;  
     t.estimerRes();
   
   }
  }, 
  clickUniteMax: function() {
    var t = Tabs.TranspAuto;
    var maxw=parseInt(rows[t.typetrp.value][t.sourceCity.idx]);
    var niveauPointRall=parseInt(getCityBuilding (t.sourceCity.id, 12).maxLevel); // 12=Point de ralliement
    var maxtroupe=parseInt(niveauPointRall*10000);
    if (niveauPointRall==11) maxtroupe=150000;
    if (niveauPointRall==12) maxtroupe=200000;
    if (maxw>maxtroupe) maxw=maxtroupe;
    t.Choixnbwagon.value=maxw;
    t.estimerRes();
  },
  clickTransportDo: function() {   // fonction pour faire le transport
   var t = Tabs.TranspAuto;
   var SourceId = t.sourceCity.id;
   var DestinationId = t.destinationCity.id;

   if (!ById("ChoixRess0").checked && !ById("ChoixRess1").checked && !ById("ChoixRess2").checked && !ById("ChoixRess3").checked && !ById("ChoixRess4").checked && !ById("ChoixRess5").checked) {
       t.divTranportStatus.innerHTML = '<FONT COLOR=#550000>Grazie contrassegnare un tipo di risorsa!</font>';
      return;
   }
   if (t.sourceCity.x==t.destinationCityx.value && t.sourceCity.y==t.destinationCityy.value) {
      t.divTranportStatus.innerHTML = '<FONT COLOR=#550000>Non pu lavorare alle citt   !.</font>';
     return;
   }
   if (parseInt(t.Choixnbwagon.value)=="0") {
   t.divTranportStatus.innerHTML = '<FONT COLOR=#550000>Non  possibile trasportare con truppe 0; .. pfff !.</font>';
     return;
   }
   var x=t.destinationCityx.value;
   var y=t.destinationCityy.value;
   if (x == 0 && y == 0) {
      t.divTranportStatus.innerHTML = '<FONT COLOR=#550000>Impossibile trasportare alle coord 0,0!.</font>';
     return;
   }
   t.TTbutTransport.disabled=true;
   
   var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
   params.kid = 0;
   params.cid= t.sourceCity.id;
   params.type = "1";
   params.xcoord = x;
   params.ycoord = y;
   params.r1 = 0;
   params.r2 = 0; 
   params.r3 = 0; 
   params.r4 = 0; 
   params.r5 = 0; 
   params.gold = 0; 
   params.u9 = 0;

   var esti = parseInt(unsafeWindow.unitstats['unt'+t.typetrp.value][5] * t.Choixnbwagon.value * (1 + (0.10 * Seed.tech.tch10)));
   if (ById("ChoixRess5").checked) { 
    esti = parseInt(esti / 5);
   }
   if (ById("ChoixRess0").checked) { params.gold = esti; }
   if (ById("ChoixRess1").checked) { params.r1 = esti; }
   if (ById("ChoixRess2").checked) { params.r2 = esti; }
   if (ById("ChoixRess3").checked) { params.r3 = esti; }
   if (ById("ChoixRess4").checked) { params.r4 = esti; }
   if (ById("ChoixRess5").checked) { params.r5 = esti; }	
   if (t.typetrp.value==1)  params.u1 = t.Choixnbwagon.value;
   if (t.typetrp.value==9)  params.u9 = t.Choixnbwagon.value;
   if (t.typetrp.value==7)  params.u7 = t.Choixnbwagon.value;
   if (t.typetrp.value==8)  params.u8 = t.Choixnbwagon.value;

  t.divTranportStatus.innerHTML = "<i><b> in lavoro....</b></i>";
   new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/march.php" + unsafeWindow.g_ajaxsuffix, {
              method: "post",
              parameters: params,
              loading: true,
              onSuccess: function (transport) {
                  var t = Tabs.TranspAuto;  
                  var rslt = transport;
                  if (rslt.ok) {
		   var timediff = parseInt(rslt.eta) - parseInt(rslt.initTS);
                   var ut = unsafeWindow.unixtime();
                   var unitsarr=[0,0,0,0,0,0,0,0,0,0,0,0,0];
                   for(i = 0; i <= unitsarr.length; i++){
                   	if(params["u"+i]){
                  	unitsarr[i] = params["u"+i];
                  	}
                   }
                   var resources=new Array();
                   resources[0] = params.gold;
                   for(i=1; i<=4; i++){
                  	resources[i] = params["r"+i];
                   }
                   var currentcityid =  t.sourceCity.id;
                   unsafeWindow.attach_addoutgoingmarch(rslt.marchId, rslt.marchUnixTime, ut + timediff, params.xcoord, params.ycoord, unitsarr, params.type, params.kid, resources, rslt.tileId, rslt.tileType, rslt.tileLevel, currentcityid, true);
                   unsafeWindow.update_seed(rslt.updateSeed)
                   if(rslt.updateSeed){unsafeWindow.update_seed(rslt.updateSeed)};
                   t.divTranportStatus.innerHTML = "<font size='3px'><b>Trasporto Effetuato.</b>";
                   t.TTbutTransport.disabled=false;
                  } else {
		    t.divTranportStatus.innerHTML ="<font color=red size='3px'><b>Errore! Grazie a te !<b></font>";
		     if (rslt.msg) {
		       t.divTranportStatus.innerHTML +="<br><font color=black size='2px'>" + rslt.msg +"</font>";
		       t.TTbutTransport.disabled=false;
         	     } else {
         	      t.divTranportStatus.innerHTML +="<br>Tentativo in 2 secondi !</font>";
         	      setTimeout(function() { t.clickTransportDo(); }, 2000);
         	     }
                  }
                  },
                  onFailure: function () {
                    var t = Tabs.TranspAuto;
                     t.divTranportStatus.innerHTML ="<font color=red size='3px'><b>Errore! Grazie a te !<b></font>";
                    t.TTbutTransport.disabled=false;
                  }
          });
  },
  clickCitySourceSelect : function (city){
    var t = Tabs.TranspAuto;
    t.sourceCity = city;
    t.TTbutTransport.disabled=false;
    var maxw=parseInt(rows[t.typetrp.value][t.sourceCity.idx]);
    var saisw=parseInt(t.Choixnbwagon.value);
    if (saisw > maxw)  t.Choixnbwagon.value=maxw;
    t.estimerRes();
   },
   clickCityDestinationSelect : function (city){
    var t = Tabs.TranspAuto;
    t.destinationCity = city;
    t.destinationCityx.value=t.destinationCity.x;
    t.destinationCityy.value=t.destinationCity.y;
    t.TTbutTransport.disabled=false;
    t.estimerRes();
   }, 
 
}


/*********************************  Raid Tab ***********************************/


 Tabs.Raid = {
  tabDisabled : false,
  tabOrder : 7,
  myDiv : null,
  rallypointlevel:null,
  knt:{},
  Troops:{},
  city:0,
  raidtimer:null,
  rslt:{},
  save:{},
  stopping:false,
  resuming:false,
  deleting:false,
  stopprogress:0,
  stopcount:0,
  activecount:0,
  count:0,

  init : function (div){
    var t = Tabs.Raid;
    t.myDiv = div;
	t.raidtimer = setTimeout(t.checkRaids, 30000);
	setInterval(t.lookup, 2500);
	setInterval(t.sendreport, 1*60*1000);
	AddSubTabLink('Parar Raid', t.StopAllRaids, 'pbraidtab');
	AddSubTabLink('Reanudar Raid', t.ResumeAllRaids, 'pbraidtabRes');
	AddSubTabLink('Borrar Raid', t.DeleteAllRaids, 'pbraidtabDel');
	var m = '<DIV class=pbStat>RAID Functions</div><TABLE width=100% height=0% class=pbTab><TR align="center">';
	    m += '<TD><INPUT id=pbRaidStart type=submit value="Auto Reset = '+ (Options.RaidRunning?'ON':'OFF') +'" ></td>';
 	    m += '<TD><INPUT id=pbsendraidreport type=checkbox '+ (Options.foodreport?'CHECKED':'') +'\> Send the report of raids ';
	    m += 'every <INPUT id=pbsendreportint value='+ Options.MsgInterval +' type=text size=3 \> hours </td>';
	    m += '</tr></table></div>';
	    m += '<DIV class=pbStat>RAID ON</div><TABLE width=100% height=0% class=pbTab><TR align="center">';
	    m += '<TD><DIV style="margin-bottom:10px;"><span id=ptRaidCity></span></div></td></tr>';
	    m+='<TR><TD><DIV style="margin-bottom:10px;"><span id=ptRaidTimer></span></div></td></tr></table>';
	    m += '<DIV id=PaintRaids></div>';
	    m += '<DIV class=pbStat>BEWARE RAID</div><TABLE width=100% height=0% class=pbTab><TR align="center">';
	    m += '<DIV id=SavedRaids></div>';
	t.myDiv.innerHTML = m;
	t.from = new CdispCityPicker ('ptRaidpicker', document.getElementById('ptRaidCity'), true, t.clickCitySelect, 0);
	document.getElementById('pbRaidStart').addEventListener('click', t.toggleRaidState, false);
	document.getElementById('pbsendraidreport').addEventListener('change', function(){
        Options.foodreport = document.getElementById('pbsendraidreport').checked; 
		saveOptions();
	}, false);
	document.getElementById('pbsendreportint').addEventListener('change', function(){
		Options.MsgInterval = parseInt(document.getElementById('pbsendreportint').value);
		saveOptions();
	}, false);
	var serverID = getServerId();
	t.save = GM_getValue ('SavedRaids_'+serverID);
	if (t.save != undefined) t.save = JSON2.parse (t.save);
	setInterval (t.paint,1000);
  },

  lookup : function (){
		var t = Tabs.Raid;
		t.activecount=0;
      	t.stopcount=0;
      	for (c=0; c< Seed.cities.length;c++) {
      			cityID = 'city' + Seed.cities[c][0];
   				for (b in Seed.queue_atkp[cityID]){
   					destinationUnixTime = Seed.queue_atkp[cityID][b]['destinationUnixTime'];
   					MarchStatus = Seed.queue_atkp[cityID][b]['marchStatus'];
   					MarchType = Seed.queue_atkp[cityID][b]['marchType'];
   					botMarchStatus = Seed.queue_atkp[cityID][b]['botMarchStatus'];
   					if (MarchType == 9 &&  MarchStatus == 3 || MarchStatus==10) t.stopcount++;
   					else if (MarchType == 9) t.activecount++;
					//alert(MarchType +'/'+  MarchStatus);
   				}
   		}
	   	if (t.resuming == false && t.stopping == false && t.deleting == false && t.activecount != 0)
			document.getElementById('pbraidtab').innerHTML = '<span style="color: #ff6">stop ('+ t.activecount + ') Raid</span>';
	   	else if (t.resuming == false && t.stopping == false && t.deleting == false)
			document.getElementById('pbraidtab').innerHTML = '<span style="color: #CCC">stop ('+ t.activecount + ') Raid</span>';
   		if (t.resuming == false && t.resuming == false && t.deleting == false && t.stopcount !=0)
			document.getElementById('pbraidtabRes').innerHTML = '<span style="color: #ff6">resume ('+ t.stopcount + ') Raid</span>';
   		else if (t.resuming == false && t.stopping == false && t.deleting == false)
			document.getElementById('pbraidtabRes').innerHTML = '<span style="color: #CCC">resume ('+ t.stopcount + ') Raid</span>';
   		if (t.resuming == false && t.stopping == false && t.deleting == false && t.stopcount !=0)
			document.getElementById('pbraidtabDel').innerHTML = '<span style="color: #ff6">delete('+ t.stopcount + ') Raid</span>';
   		else if (t.resuming == false && t.stopping == false && t.deleting == false)
			document.getElementById('pbraidtabDel').innerHTML = '<span style="color: #CCC">delete ('+ t.stopcount + ') Raid</span>';
   },

  paint : function ()	{
	var t = Tabs.Raid;
	var botMarchStat = {0:'Inactive',
  						1:'Attacking',
  						2:'Returning',
  						3:'Stopped',
  						4:'resting',
  						5:'unknown',
  						7:'Change in status',
  						8:'Returning',
  						9:'aborting'};
  	var botStat = {0:'indefinite',
  						1:'marching',
  						2:'Returning',
  						3:'Stopped',
  						4:'insufficient troops',
  						5:'Exceeded max. raid',
  						7:'Timeout',
  						8:'resting'};
        var o = '';
  	if (t.rslt.settings != undefined) o+= '<FONT size=2px><B>Raid time: '+ timestr( 86400 - ( unixTime() - t.rslt.settings.lastUpdated )) +'</b></font>';
    	document.getElementById('ptRaidTimer').innerHTML = o;
  	var z ='<TABLE class=pbTab><TR><TD width=60px align=center><A onclick="pbStopAll()">STOP</a></td><TD width=70px>time</td><TD width=85px>Coord.</td><TD width=50px>level</td><TD width=50px></td><TD width=50px><A onclick="pbDeleteAll()">DELETE</a></td></TR>';
  	if (t.rslt['queue'] != ""){
  		for (y in t.rslt['queue']) {
  			if (t.rslt['queue'][y]['botMarches'] != undefined) {
  				for (k in Seed.queue_atkp['city' + t.cityId]){
  					if (Seed.queue_atkp['city' + t.cityId][k]['marchId'] == t.rslt['queue'][y]['botMarches']['marchId']) {
  						botMarchStatus = Seed.queue_atkp['city' + t.cityId][k]['botMarchStatus'];
  						MarchStatus = Seed.queue_atkp['city' + t.cityId][k]['marchStatus'];
  						restPeriod = (Seed.queue_atkp['city' + t.cityId][k]['restPeriod']/60);
  						destinationUnixTime = Seed.queue_atkp['city' + t.cityId][k]['destinationUnixTime'];
  						returnUnixTime = Seed.queue_atkp['city' + t.cityId][k]['returnUnixTime']
  						now = unixTime();
						z+='<TR>';
  						if (MarchStatus ==1) z+='<TD align=center><img src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/attacking.jpg></td>';
  						if (MarchStatus ==8 && (destinationUnixTime - now) <= 0 && botMarchStatus !=3 && returnUnixTime > now) z+='<TD align=center><img src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/returning.jpg></td>';
  						if (MarchStatus == 3) z+='<TD align=center><img src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/autoAttack/raid_stopped_desat.png></td>';
  						if (MarchStatus == 4 || (returnUnixTime < now  && botMarchStatus !=3)) z+='<TD align=center><img src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/autoAttack/raid_resting.png></td>';
  						if (destinationUnixTime >= now) z+='<TD>'+ timestr(Seed.queue_atkp['city' + t.cityId][k]['destinationUnixTime'] - unixTime())+'</td>';
  						if (destinationUnixTime <= now) {
  							if ((destinationUnixTime - now) <= 0 && returnUnixTime > now) z+='<TD>'+ timestr(returnUnixTime - now)+'</td>';
  							if (returnUnixTime <= now) z+='<TD>'+ timestr(now - returnUnixTime)+'</td>';
  						}
  					}
  				}
  				z+='<TD>('+ t.rslt['queue'][y]['botMarches']['toXCoord'] +','+ t.rslt['queue'][y]['botMarches']['toYCoord']+')</td>';
  				z+='<TD align=center>'+ t.rslt['queue'][y]['botMarches']['toTileLevel'] +'</td>';
  				if (botMarchStatus == 3) z+='<TD><A onclick="pbEditRaid('+ y +')">edit</a></td>';
	  				else z+='<TD><FONT COLOR= "CCCCCC">edit</font></td>';
  				if (botMarchStatus == 3) z+='<TD align=center><A onclick="pbDeleteRaid('+ t.rslt['queue'][y]['botMarches']['marchId']+')">DELETE</a></td>';
  				        else z+='<TD align=center><FONT COLOR= "CCCCCC">DELETE</font></td>';
  				z +='<TD width=25px></td><TD>Time-Out: '+ timestr(restPeriod) +'</td>';
  				z+='</tr>';
  			}
  		}
  	}
  	z+='</table>';
  	if (t.rslt['queue'] == "") z ='<TABLE class=pbTab><TR><TD>No raids in the city!</td></TR>';
  	document.getElementById('PaintRaids').innerHTML = z;
 	var check = true;
  		if (t.save != ""){
  			var a ='<TABLE class=pbTab><TR><TD width=60px></td><TD width=70px></td><TD width=85px>Coords.</td><TD width=50px>level</td><TD width=50px></td><TD width=50px></td></tr>';
  			for (y in t.save){
  				if (t.save[y] != undefined && t.cityId == t.save[y]['cityId']){
  					a +='<TR><TD align=center><A onclick="pbDeleteSavedRaid('+ t.save[y]['marchId'] +')">DELETE</a></td>';
  					a +='<TD></td><TD><FONT COLOR= "CC0000">('+t.save[y]['toXCoord']+','+t.save[y]['toYCoord']+')</font></td>';
  					a +='<TD align=center>'+t.save[y]['toTileLevel']+'</td>';
  					a +='<TD><A onclick="pbEditSavedRaid('+ y +')">edit</a></td>';
  					a +='<TD align=center><A onclick="pbAddRaid('+ t.save[y]['marchId']+')">add</a></td></tr>';
  					check = false;
  				}
  			}
  			m+='</table>';
  		}
  	if (check) a ='<TABLE class=pbTab><TR><TD>No raids saved in this city! (If you delete the really cool the stored here).</td></TR>';
        	document.getElementById('SavedRaids').innerHTML = a;
        	unsafeWindow.pbDeleteRaid = t.DeleteRaid;
	  	unsafeWindow.pbEditRaid = t.EditRaid;
	  	unsafeWindow.pbAddRaid = t.AddRaid;
	  	unsafeWindow.pbDeleteSavedRaid = t.DeleteSavedRaid;
	  	unsafeWindow.pbEditSavedRaid = t.EditSavedRaid;
	  	unsafeWindow.pbStopAll = t.StopCityRaids;
 	 	unsafeWindow.pbDeleteAll = t.DeleteCityRaids;
  },

  DeleteSavedRaid : function (Id){
    	  var t = Tabs.Raid;
    	  for (yy=0;yy<t.save.length;yy++){
    	  	if (t.save[yy]['marchId'] == Id){
    	  		  t.save.splice (yy,1);
    	  	}
    	  }
    	  var serverID = getServerId();
    	  setTimeout (function (){GM_setValue ('SavedRaids_'+serverID, JSON2.stringify(t.save));}, 0);
    	  t.paint();
    },

  EditSavedRaid : function (y){
      var t = Tabs.Raid;
	  var pop = new CPopup ('pbEditRaid', 0,0, 750,350, true);
	  if (t.popFirst){
	    pop.centerMe (mainPop.getMainDiv());
	    t.popFirst = false;
	  }
	  pop.getTopDiv().innerHTML = '<div class=showBadged><center>Saved Raids</center></div>';
	  cityId =  t.save[y]['cityId'];
		  var m = '<BR><TABLE id=pbRaidAdd height=0% class=pbTab><TR align="center">';
		  m+='<TR></tr><TR><TD width=25px>X= <INPUT id=toXCoord type=text size=3 maxlength=3 value='+t.save[y]['toXCoord']+'></td>';
		  m+='<TD width=10px></td><TD widht=25px>Y= <INPUT id=toYCoord type=text size=3 maxlength=3 value='+ t.save[y]['toYCoord'] +'></td>';
		  m+='<TD width=25px></td><TD>Ida y vuelta: '+ timestr((t.save[y]['returnUnixTime'] - t.save[y]['destinationUnixTime'])*2)+ '</td></tr></table>';
		  m += '<BR><TABLE id=pbRaidAdd width=100% height=0% class=pbTab><TR align="center">';
		  m += '<TR><TD rowspan="2"><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_1_50.jpg?6545"></td>';
		  m += '<TD>'+ addCommas(Seed.units['city'+cityId]['unt1']) +'</td>'
		  m += '<TD rowspan="2"><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_2_50.jpg?6545"></td>'
		  m += '<TD>'+ addCommas(Seed.units['city'+cityId]['unt2']) +'</td>'
		  m += '<TD rowspan="2"><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_3_50.jpg?6545"></td>'
		  m += '<TD>'+ addCommas(Seed.units['city'+cityId]['unt3']) +'</td>'
		  m += '<TD rowspan="2"><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_4_50.jpg?6545"></td>'
		  m += '<TD>'+ addCommas(Seed.units['city'+cityId]['unt4']) +'</td></tr>'
		  m += '<TR><TD><INPUT id=Unit1 type=text size=6 maxlength=6 value="'+ t.save[y]['unit1Count']+'"></td>';
		  m += '<TD><INPUT id=Unit2 type=text size=6 maxlength=6 value="'+ t.save[y]['unit2Count']+'"></td>';
		  m += '<TD><INPUT id=Unit3 type=text size=6 maxlength=6 value="'+ t.save[y]['unit3Count']+'"></td>';
		  m += '<TD><INPUT id=Unit4 type=text size=6 maxlength=6 value="'+ t.save[y]['unit4Count']+'"></td></tr>';
		  m += '<TR><TD rowspan="2"><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_5_50.jpg?6545"></td>';
		  m += '<TD>'+ addCommas(Seed.units['city'+cityId]['unt5']) +'</td>'
		  m += '<TD rowspan="2"><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_6_50.jpg?6545"></td>'
		  m += '<TD>'+ addCommas(Seed.units['city'+cityId]['unt6']) +'</td>'
		  m += '<TD rowspan="2"><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_7_50.jpg?6545"></td>'
		  m += '<TD>'+ addCommas(Seed.units['city'+cityId]['unt7']) +'</td>'
		  m += '<TD rowspan="2"><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_8_50.jpg?6545"></td>'
		  m += '<TD>'+ addCommas(Seed.units['city'+cityId]['unt8']) +'</td></tr>'
		  m += '<TR><TD><INPUT id=Unit5 type=text size=6 maxlength=6 value="'+ t.save[y]['unit5Count']+'"></td>';
		  m += '<TD><INPUT id=Unit6 type=text size=6 maxlength=6 value="'+ t.save[y]['unit6Count']+'"></td>';
		  m += '<TD><INPUT id=Unit7 type=text size=6 maxlength=6 value="'+ t.save[y]['unit7Count']+'"></td>';
		  m += '<TD><INPUT id=Unit8 type=text size=6 maxlength=6 value="'+ t.save[y]['unit8Count']+'"></td></tr>';
		  m += '<TR><TD rowspan="2"><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_9_50.jpg?6545"></td>';
		  m += '<TD>'+ addCommas(Seed.units['city'+cityId]['unt9']) +'</td>'
		  m += '<TD rowspan="2"><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_10_50.jpg?6545"></td>'
		  m += '<TD>'+ addCommas(Seed.units['city'+cityId]['unt10']) +'</td>'
		  m += '<TD rowspan="2"><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_11_50.jpg?6545"></td>'
		  m += '<TD>'+ addCommas(Seed.units['city'+cityId]['unt11']) +'</td>'
		  m += '<TD rowspan="2"><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_12_50.jpg?6545"></td>'
		  m += '<TD>'+ addCommas(Seed.units['city'+cityId]['unt12']) +'</td></tr>'
		  m += '<TR><TD><INPUT id=Unit9 type=text size=6 maxlength=6 value="'+ t.save[y]['unit9Count']+'"></td>';
		  m += '<TD><INPUT id=Unit10 type=text size=6 maxlength=6 value="'+ t.save[y]['unit10Count']+'"></td>';
		  m += '<TD><INPUT id=Unit11 type=text size=6 maxlength=6 value="'+ t.save[y]['unit11Count']+'"></td>';
		  m += '<TD><INPUT id=Unit12 type=text size=6 maxlength=6 value="'+ t.save[y]['unit12Count']+'"></td></tr></table>';
		  m += '<BR><CENTER><SELECT id=AddKnights type=list></select></center>';
		  m+= '<BR><CENTER>'+ strButton20('Save', 'id=pbSaveRaid') +'</center>';
	  pop.getMainDiv().innerHTML = m;
	  t.getKnights(cityId);
	  document.getElementById ('AddKnights').value =  t.save[y]['knightId'];
	  document.getElementById ('pbSaveRaid').addEventListener ('click', function(){
	  			t.save[y]['knightId'] = parseInt(document.getElementById ('AddKnights').value);
	  			t.save[y]['toXCoord'] = parseInt(document.getElementById ('toXCoord').value);
	  			t.save[y]['toYCoord'] = parseInt(document.getElementById ('toYCoord').value);
	  			t.save[y]['unit1Count'] = parseInt(document.getElementById ('Unit1').value);
	  			t.save[y]['unit2Count'] = parseInt(document.getElementById ('Unit2').value);
	  			t.save[y]['unit3Count'] = parseInt(document.getElementById ('Unit3').value);
	  			t.save[y]['unit4Count'] = parseInt(document.getElementById ('Unit4').value);
	  			t.save[y]['unit5Count'] = parseInt(document.getElementById ('Unit5').value);
	  			t.save[y]['unit6Count'] = parseInt(document.getElementById ('Unit6').value);
	  			t.save[y]['unit7Count'] = parseInt(document.getElementById ('Unit7').value);
	  			t.save[y]['unit8Count'] = parseInt(document.getElementById ('Unit8').value);
	  			t.save[y]['unit9Count'] = parseInt(document.getElementById ('Unit9').value);
	  			t.save[y]['unit10Count'] = parseInt(document.getElementById ('Unit10').value);
	  			t.save[y]['unit11Count'] = parseInt(document.getElementById ('Unit11').value);
	  			t.save[y]['unit12Count'] = parseInt(document.getElementById ('Unit12').value);
	  			var serverID = getServerId();
	  			setTimeout (function (){GM_setValue ('SavedRaids_'+serverID, JSON2.stringify(t.save));}, 0);
	  			pop.show (false);
	  }, false);
	  pop.show (true);
    },

  EditRaid : function (y){
 	  var t = Tabs.Raid;
  	  var pop = new CPopup ('pbEditRaid', 0,0, 750,350, true);
  	  if (t.popFirst){
  	    pop.centerMe (mainPop.getMainDiv());
  	    t.popFirst = false;
  	  }
  	  pop.getTopDiv().innerHTML = '<div class=showBadged><center>RAID Function</center></div>';
  	  cityId = t.rslt['queue'][y]['botMarches']['cityId'];
  		  var m = '<BR><TABLE id=pbRaidAdd height=0% class=pbTab><TR align="center">';
  		  m+='<TR></tr><TR><TD width=25px>X= <INPUT id=toXCoord type=text size=3 maxlength=3 value='+t.rslt['queue'][y]['botMarches']['toXCoord']+'></td>';
  		  m+='<TD width=10px></td><TD widht=25px>Y= <INPUT id=toYCoord type=text size=3 maxlength=3 value='+ t.rslt['queue'][y]['botMarches']['toYCoord'] +'></td>';
  		  m+='<TD width=25px></td><TD>Ida y vuelta: '+ timestr((t.rslt['queue'][y]['botMarches']['returnUnixTime'] - t.rslt['queue'][y]['botMarches']['destinationUnixTime'])*2)+ '</td></tr></table>';
  		  m += '<BR><TABLE id=pbRaidAdd width=100% height=0% class=pbTab><TR align="center">';
  		  m += '<TR><TD rowspan="2"><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_1_50.jpg?6545"></td>';
  		  m += '<TD>'+ addCommas(Seed.units['city'+cityId]['unt1']) +'</td>'
  		  m += '<TD rowspan="2"><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_2_50.jpg?6545"></td>'
  		  m += '<TD>'+ addCommas(Seed.units['city'+cityId]['unt2']) +'</td>'
  		  m += '<TD rowspan="2"><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_3_50.jpg?6545"></td>'
  		  m += '<TD>'+ addCommas(Seed.units['city'+cityId]['unt3']) +'</td>'
  		  m += '<TD rowspan="2"><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_4_50.jpg?6545"></td>'
  		  m += '<TD>'+ addCommas(Seed.units['city'+cityId]['unt4']) +'</td></tr>'
  		  m += '<TR><TD><INPUT id=Unit1 type=text size=6 maxlength=6 value="'+ t.rslt['queue'][y]['botMarches']['unit1Count']+'"></td>';
  		  m += '<TD><INPUT id=Unit2 type=text size=6 maxlength=6 value="'+ t.rslt['queue'][y]['botMarches']['unit2Count']+'"></td>';
  		  m += '<TD><INPUT id=Unit3 type=text size=6 maxlength=6 value="'+ t.rslt['queue'][y]['botMarches']['unit3Count']+'"></td>';
  		  m += '<TD><INPUT id=Unit4 type=text size=6 maxlength=6 value="'+ t.rslt['queue'][y]['botMarches']['unit4Count']+'"></td></tr>';
  		  m += '<TR><TD rowspan="2"><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_5_50.jpg?6545"></td>';
  		  m += '<TD>'+ addCommas(Seed.units['city'+cityId]['unt5']) +'</td>'
  		  m += '<TD rowspan="2"><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_6_50.jpg?6545"></td>'
  		  m += '<TD>'+ addCommas(Seed.units['city'+cityId]['unt6']) +'</td>'
  		  m += '<TD rowspan="2"><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_7_50.jpg?6545"></td>'
  		  m += '<TD>'+ addCommas(Seed.units['city'+cityId]['unt7']) +'</td>'
  		  m += '<TD rowspan="2"><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_8_50.jpg?6545"></td>'
  		  m += '<TD>'+ addCommas(Seed.units['city'+cityId]['unt8']) +'</td></tr>'
  		  m += '<TR><TD><INPUT id=Unit5 type=text size=6 maxlength=6 value="'+ t.rslt['queue'][y]['botMarches']['unit5Count']+'"></td>';
  		  m += '<TD><INPUT id=Unit6 type=text size=6 maxlength=6 value="'+ t.rslt['queue'][y]['botMarches']['unit6Count']+'"></td>';
  		  m += '<TD><INPUT id=Unit7 type=text size=6 maxlength=6 value="'+ t.rslt['queue'][y]['botMarches']['unit7Count']+'"></td>';
  		  m += '<TD><INPUT id=Unit8 type=text size=6 maxlength=6 value="'+ t.rslt['queue'][y]['botMarches']['unit8Count']+'"></td></tr>';
  		  m += '<TR><TD rowspan="2"><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_9_50.jpg?6545"></td>';
  		  m += '<TD>'+ addCommas(Seed.units['city'+cityId]['unt9']) +'</td>'
  		  m += '<TD rowspan="2"><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_10_50.jpg?6545"></td>'
  		  m += '<TD>'+ addCommas(Seed.units['city'+cityId]['unt10']) +'</td>'
  		  m += '<TD rowspan="2"><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_11_50.jpg?6545"></td>'
  		  m += '<TD>'+ addCommas(Seed.units['city'+cityId]['unt11']) +'</td>'
  		  m += '<TD rowspan="2"><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_12_50.jpg?6545"></td>'
  		  m += '<TD>'+ addCommas(Seed.units['city'+cityId]['unt12']) +'</td></tr>'
  		  m += '<TR><TD><INPUT id=Unit9 type=text size=6 maxlength=6 value="'+ t.rslt['queue'][y]['botMarches']['unit9Count']+'"></td>';
  		  m += '<TD><INPUT id=Unit10 type=text size=6 maxlength=6 value="'+ t.rslt['queue'][y]['botMarches']['unit10Count']+'"></td>';
  		  m += '<TD><INPUT id=Unit11 type=text size=6 maxlength=6 value="'+ t.rslt['queue'][y]['botMarches']['unit11Count']+'"></td>';
  		  m += '<TD><INPUT id=Unit12 type=text size=6 maxlength=6 value="'+ t.rslt['queue'][y]['botMarches']['unit12Count']+'"></td></tr></table>';
  		  m += '<BR><CENTER><SELECT id=AddKnights type=list></select></center>';
  		  m+= '<BR><CENTER>'+ strButton20('Save', 'id=pbRaidSave') +'</center>';
  	  pop.getMainDiv().innerHTML = m;
  	  t.getKnights(cityId);
  	  document.getElementById ('AddKnights').value =  t.rslt['queue'][y]['botMarches']['knightId'];
  	  document.getElementById ('pbRaidSave').addEventListener ('click', function(){
		var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
  		params.pf = 0;
  		params.ctrl = 'BotManager';
  		params.action = 'editMarch';
		params.settings = {};
  		params.settings.cityId = t.rslt['queue'][y]['botMarches']['fromCityId'];
  	  	params.queue = {0:{botMarches:{botMarchStatus:1,botState:1},cityMarches:{}}};
  	  	params.queue[0].cityMarches.knightId = parseInt(document.getElementById ('AddKnights').value);
  	  	params.queue[0].cityMarches.toXCoord =  parseInt(document.getElementById ('toXCoord').value);
  	  	params.queue[0].cityMarches.toYCoord =  parseInt(document.getElementById ('toYCoord').value);
  	  	params.queue[0].cityMarches.unit0Count = 0; //document.getElementById ('Unit0').value;
  	  	params.queue[0].cityMarches.unit1Count =  parseInt(document.getElementById ('Unit1').value);
  	  	params.queue[0].cityMarches.unit2Count = parseInt(document.getElementById ('Unit2').value);
  	  	params.queue[0].cityMarches.unit3Count = parseInt(document.getElementById ('Unit3').value);
  	  	params.queue[0].cityMarches.unit4Count = parseInt(document.getElementById ('Unit4').value);
  	  	params.queue[0].cityMarches.unit5Count = parseInt(document.getElementById ('Unit5').value);
  	  	params.queue[0].cityMarches.unit6Count = parseInt(document.getElementById ('Unit6').value);
  	  	params.queue[0].cityMarches.unit7Count = parseInt(document.getElementById ('Unit7').value);
  	  	params.queue[0].cityMarches.unit8Count = parseInt(document.getElementById ('Unit8').value);
  	  	params.queue[0].cityMarches.unit9Count = parseInt(document.getElementById ('Unit9').value);
  	  	params.queue[0].cityMarches.unit10Count = parseInt(document.getElementById ('Unit10').value);
  	  	params.queue[0].cityMarches.unit11Count = parseInt(document.getElementById ('Unit11').value);
  	  	params.queue[0].cityMarches.unit12Count = parseInt(document.getElementById ('Unit12').value);
  	  	params.queue[0].cityMarches.marchId =  t.rslt['queue'][y]['botMarches']['marchId'];
  		new AjaxRequest2(unsafeWindow.g_ajaxpath + "ajax/_dispatch.php" + unsafeWindow.g_ajaxsuffix, {
  		         method: "post",
  		         parameters: params,
				 loading: true,
				 onSuccess: function(transport){
					var rslt = eval("(" + transport.responseText + ")");
                        if (rslt.ok) {
							pop.show (false);
							unsafeWindow.cityinfo_army();
                            setTimeout(unsafeWindow.update_seed_ajax, 250);
							setTimeout(t.GetRaids, (750),Seed.cities[i][0]);
						}
				 },
  		 });
  }, false);
  	  pop.show (true);
  },
   DeleteRaid : function (Id){
    var t = Tabs.Raid;
    var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
  	for (y in t.rslt['queue']) {
  		if (t.rslt['queue'][y]['botMarches'] != undefined) {
	  		if (t.rslt['queue'][y]['botMarches']['marchId'] == Id) {
	  				marchId = t.rslt['queue'][y]['botMarches']['marchId'];
	  				cityId = t.rslt['queue'][y]['botMarches']['cityId'];
	  				knightId = t.rslt['queue'][y]['botMarches']['knightId'];
	  				toTileLevel = t.rslt['queue'][y]['botMarches']['toTileLevel'];
	  				returnUnixTime = t.rslt['queue'][y]['botMarches']['returnUnixTime'];
	  				destinationUnixTime = t.rslt['queue'][y]['botMarches']['destinationUnixTime'];
	  				toXCoord = t.rslt['queue'][y]['botMarches']['toXCoord'];
	  				toYCoord = t.rslt['queue'][y]['botMarches']['toYCoord'];
	  				var units = {};
	  				for (i=1;i<13;i++) units[i] = t.rslt['queue'][y]['botMarches']['unit'+i+'Count'];
	  		}
		}
    }
  	params.pf = 0;
  	params.ctrl = 'BotManager';
  	params.action = 'deleteMarch';
  	params.marchId = marchId;
  	params.settings = {};
  	params.settings.cityId = cityId;
    new AjaxRequest(unsafeWindow.g_ajaxpath + "ajax/_dispatch.php" + unsafeWindow.g_ajaxsuffix, {
  	         method: "post",
  	         parameters: params,
  			 loading: true,
  			 onSuccess: function(transport){
  				var rslt = eval("(" + transport.responseText + ")");
  	              if (rslt.ok) {
  	              	  var serverID = getServerId();
  	              	  t.save = GM_getValue ('SavedRaids_'+serverID);
  	              	  if (t.save == undefined) t.save =new Array();
					  else t.save = JSON2.parse (t.save);
  	              	  t.save.push ({
  	              	  	marchId:		marchId,
  	              	  	cityId:   		cityId,
  	              	  	knightId:		knightId,
  	              	  	toTileLevel:	toTileLevel,
  	              	  	returnUnixTime:	destinationUnixTime,
  	              	  	toXCoord:		toXCoord,
  	              	  	toYCoord:		toYCoord,
  	              	  	unit1Count: 	units[1],
  	              	  	unit2Count: 	units[2],
  	              	  	unit3Count: 	units[3],
  	              	  	unit4Count: 	units[4],
  	              	  	unit5Count: 	units[5],
  	              	  	unit6Count: 	units[6],
  	              	  	unit7Count: 	units[7],
  	              	  	unit8Count: 	units[8],
  	              	  	unit9Count: 	units[9],
  	              	  	unit10Count: 	units[10],
  	              	  	unit11Count: 	units[11],
  	              	  	unit12Count: 	units[12],
  	              	  });
  	              	  var troops = Seed.units["city" + cityId];
                      for (var u = 1; u <= 12; ++u) {
                          var troop_number = parseInt(rslt["unit" + u + "Return"]);
                          if (isNaN(troop_number)) {
                              troop_number = parseInt(Seed.units["city" + cityId]["unt" + u]);
                          } else troop_number = parseInt(rslt["unit" + u + "Return"]) + parseInt(Seed.units["city" + cityId]["unt" + u]);
                          troops["unt" + u] = troop_number;
                      }
                      for (u in Seed.queue_atkp['city' + cityId]){
                      	if (Seed.queue_atkp['city' + cityId][u]['marchId'] == marchId){
							Seed.queue_atkp['city' + cityId][u] = "";
                      		unsafeWindow.seed.queue_atkp['city' + cityId] = Seed.queue_atkp['city' + cityId];
                      	}
                      }

                      for (u in Seed.knights['city' + cityId]){
                      	if (Seed.knights['city' + cityId][u]['knightId'] == knightId){
                      		Seed.knights['city' + cityId][u]["knightStatus"] = 1;
                      		unsafeWindow.seed.knights['city' + cityId] = Seed.knights['city' + cityId];
                      	}
                      }
  	              	  GM_setValue ('SavedRaids_'+serverID, JSON2.stringify(t.save));
  	              	  t.save = null;
                          unsafeWindow.cityinfo_army();
  	                  setTimeout(unsafeWindow.update_seed_ajax, 250);
  	                  t.GetRaids(cityId);
  					}
  			 },
  	 });
  },

  StopCityRaids : function (cityId){
    	var t = Tabs.Raid;
    	var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
    	params.pf = 0;
    	params.ctrl = 'BotManager';
    	params.action = 'stopAll';
    	params.settings = {};
  	params.settings.cityId = cityId;
    	new AjaxRequest2(unsafeWindow.g_ajaxpath + "ajax/_dispatch.php" + unsafeWindow.g_ajaxsuffix, {
    		  method: "post",
    		  parameters: params,
    	          loading: true,
    		  onSuccess: function(transport){
    		  var rslt = eval("(" + transport.responseText + ")");
    	          if (rslt.ok) {

    					  }
    				 },
    		 });
    setTimeout(t.GetRaids, (750), cityId);
    },

  StopAllRaids : function (){
      	var t = Tabs.Raid;
      	if (t.stopping == true || t.resuming == true || t.deleting == true) return;
      	if (t.activecount == 0) return;
	    t.stopping = true;
	      	for (i=0;i<Seed.cities.length;i++){
		      	setTimeout(t.DoAllStop, (i*1500),i);
		     }
   },

   ResumeAllRaids : function (){
       	var t = Tabs.Raid;
       	if (t.stopping == true || t.resuming == true || t.deleting == true) return;
       	if (t.stopcount == 0) return;
       	t.resuming = true;
   			for (i=0;i<Seed.cities.length;i++){
   			    setTimeout(t.DoAllResume, (i*1500),i);
   			}
    },


   DeleteAllRaids : function (){
       	var t = Tabs.Raid;
       	if (t.stopping == true || t.resuming == true || t.deleting == true) return;
       	if (t.stopcount == 0) return;
       	t.deleting = true;
       	count=0;
       	t.count = t.stopcount;
				for (d=0; d< Seed.cities.length;d++) {
						cityID = 'city' + Seed.cities[d][0];
							for (e in Seed.queue_atkp[cityID]){
								destinationUnixTime = Seed.queue_atkp[cityID][e]['destinationUnixTime'];
								MarchStatus = Seed.queue_atkp[cityID][e]['marchStatus'];
								MarchType = Seed.queue_atkp[cityID][e]['marchType'];
								if (MarchType == 9 && (botMarchStatus == 3 || MarchStatus == 3)) {
									count++;
									setTimeout(t.DoAllDelete, (count*1250), (Seed.queue_atkp[cityID][e]['marchId']),d,count);
				}
			 }
		}
   },


  DoAllStop: function(i) {
    var t = Tabs.Raid;
    var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
  	params.pf = 0;
  	params.ctrl = 'BotManager';
  	params.action = 'stopAll';
  	params.settings = {};
  	params.settings.cityId = Seed.cities[i][0];

  		 new AjaxRequest2(unsafeWindow.g_ajaxpath + "ajax/_dispatch.php" + unsafeWindow.g_ajaxsuffix, {
  			  		method: "post",
  			         parameters: params,
  					 loading: true,
  					 onSuccess: function(transport){
  						var rslt = eval("(" + transport.responseText + ")");
  		                  if (rslt.ok) {
  		                  		t.stopprogress = t.stopprogress + (100/Seed.cities.length);
  		                  		actionLog('Parando: '+ Seed.cities[i][1]);
  		                  		updatebotbutton('Parando: '+ t.stopprogress.toFixed(0) + '%', 'pbraidtab');
								if (t.stopprogress.toFixed(0) == 100) {
  		                  			t.stopprogress = 0;
  		                  			setTimeout(function(){updatebotbutton(' ('+ t.activecount + ')Stop Raid ', 'pbraidtab');t.stopping = false;}, (5000));
								}
  						  }
  						  else {
  						  		if (rslt.msg == "The system is busy, please try again later") setTimeout (t.DoAllStop, (2000),i);
  						  		else {
  					 	  			t.stopprogress = t.stopprogress + (100/Seed.cities.length);
  					 	  			actionLog('Parando: '+ Seed.cities[i][1] + ' - ' + rslt.msg);
  					 	  			updatebotbutton('Parando: '+ t.stopprogress.toFixed(0) + '%', 'pbraidtab')
									if (t.stopprogress.toFixed(0) == 100) {
  					 	  				 t.stopprogress = 0;
										 setTimeout(function(){updatebotbutton(' ('+ t.activecount + ') Stopped Raid', 'pbraidtab');t.stopping = false;}, (5000));
									}
								}
						  }
					},
		 });
   },

  DoAllResume: function(i) {
    var t = Tabs.Raid;
    var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
  	params.pf = 0;
  	params.ctrl = 'BotManager';
  	params.action = 'resumeAll';
  	params.settings = {};
    params.settings.cityId = Seed.cities[i][0];

  		 new AjaxRequest2(unsafeWindow.g_ajaxpath + "ajax/_dispatch.php" + unsafeWindow.g_ajaxsuffix, {
  			  		method: "post",
  			         parameters: params,
  					 loading: true,
  					 onSuccess: function(transport){
  						var rslt = eval("(" + transport.responseText + ")");
  		                  if (rslt.ok) {
  		                  		t.stopprogress = t.stopprogress + (100/Seed.cities.length);
  		                  		actionLog('Reanudando: '+ Seed.cities[i][1]);
								updatebotbutton('Reanudando: '+ t.stopprogress.toFixed(0) + '%', 'pbraidtabRes');
  		                  		if (t.stopprogress.toFixed(0) == 100) {
  		                  			 t.stopprogress = 0;
	    							setTimeout(function(){updatebotbutton('Reanudar ('+ t.stopcount + ') redadas', 'pbraidtabRes');t.resuming = false;}, (5000));
				}
		}
  						  else {
  						  		if (rslt.msg == "El sistema est  ocupado, por favor intente m s tarde") setTimeout (t.DoAllResume, (2000),i);
  						  		else {
  					 	  			t.stopprogress = t.stopprogress + (100/Seed.cities.length);
  					 	  			actionLog('Parando: '+ Seed.cities[i][1]  + ' - ' + rslt.msg);
  					 	  			updatebotbutton('Reanudando: '+ t.stopprogress.toFixed(0) + '%', 'pbraidtabRes')
  					 	  			if (t.stopprogress.toFixed(0) == 100) {
  					 	  				 t.stopprogress = 0;
  					 	  				 setTimeout(function(){updatebotbutton('Reanudar ('+ t.stopcount + ') redadas', 'pbraidtabRes');t.resuming = false;}, (5000));
  					 	  			}
								}
						  }
  					 },
		 });
  },

  DoAllDelete : function (Id,city,count){
		var t = Tabs.Raid;
		var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);

		cityID = 'city'+ Seed.cities[city][0];

    	for (f in Seed.queue_atkp[cityID]){
    		if (Seed.queue_atkp[cityID][f]['marchId'] == Id) {
    				marchId = Seed.queue_atkp[cityID][f]['marchId'];
    				cityId = Seed.queue_atkp[cityID][f]['cityId'];
    				knightId = Seed.queue_atkp[cityID][f]['knightId'];
    				toTileLevel = Seed.queue_atkp[cityID][f]['toTileLevel'];
    				returnUnixTime = Seed.queue_atkp[cityID][f]['returnUnixTime'];
    				destinationUnixTime = Seed.queue_atkp[cityID][f]['destinationUnixTime'];
    				toXCoord = Seed.queue_atkp[cityID][f]['toXCoord'];
    				toYCoord = Seed.queue_atkp[cityID][f]['toYCoord'];
    				var units = {};
    				for (i=1;i<13;i++) units[i] = Seed.queue_atkp[cityID][f]['unit'+i+'Count'];
  			}
      }

    	params.pf = 0;
    	params.ctrl = 'BotManager';
    	params.action = 'deleteMarch';
    	params.marchId = marchId;
    	params.settings = {};
    	params.settings.cityId = cityId;

      new AjaxRequest(unsafeWindow.g_ajaxpath + "ajax/_dispatch.php" + unsafeWindow.g_ajaxsuffix, {
    	         method: "post",
    	         parameters: params,
    			 loading: true,
    			 onSuccess: function(transport){
    				var rslt = eval("(" + transport.responseText + ")");
    	              if (rslt != "") {
    	              	  var serverID = getServerId();
    	              	  t.save = GM_getValue ('SavedRaids_'+serverID, "[]");
    	              	  if (t.save != undefined) t.save = JSON2.parse (t.save);
    	              	  if (t.save == undefined) t.save =new Array();

    	              	  t.save.push ({
    	              	  	marchId:		marchId,
    	              	  	cityId:   		cityId,
    	              	  	knightId:		knightId,
    	              	  	toTileLevel:	toTileLevel,
    	              	  	returnUnixTime:	destinationUnixTime,
    	              	  	toXCoord:		toXCoord,
    	              	  	toYCoord:		toYCoord,
    	              	  	unit1Count: 	units[1],
    	              	  	unit2Count: 	units[2],
    	              	  	unit3Count: 	units[3],
    	              	  	unit4Count: 	units[4],
    	              	  	unit5Count: 	units[5],
    	              	  	unit6Count: 	units[6],
    	              	  	unit7Count: 	units[7],
    	              	  	unit8Count: 	units[8],
    	              	  	unit9Count: 	units[9],
    	              	  	unit10Count: 	units[10],
    	              	  	unit11Count: 	units[11],
    	              	  	unit12Count: 	units[12],
    	              	  });

    	              	  var troops = Seed.units["city" + cityId];
    	              	  for (var u = 1; u <= 12; ++u) {
    	              	      var troop_number = parseInt(rslt["unit" + u + "Return"]);
    	              	      if (isNaN(troop_number)) {
    	              	          troop_number = parseInt(Seed.units["city" + cityId]["unt" + u]);
    	              	      } else troop_number = parseInt(rslt["unit" + u + "Return"]) + parseInt(Seed.units["city" + cityId]["unt" + u]);
    	              	      troops["unt" + u] = troop_number;
    	              	  }

    	              	  setTimeout (function (){GM_setValue ('SavedRaids_'+serverID, JSON2.stringify(t.save));}, 0);
                          unsafeWindow.cityinfo_army();
    	                  setTimeout(unsafeWindow.update_seed_ajax, 250);
    					}
    			 },
    	 });
  		  	 t.stopprogress = count * (100/t.count);
  		  	 actionLog('deleting: '+ Seed.cities[city][1]);
  		  	 updatebotbutton('deleting: '+ t.stopprogress.toFixed(0) + '%', 'pbraidtabDel');
  		  	 if (t.stopprogress.toFixed(0) == 100) {
  		  	 	 t.stopprogress = 0;
  		  	 	 t.GetRaids(cityId);
  		  	 	 setTimeout(function(){updatebotbutton('deleting ('+ t.stopcount + ') Raid', 'pbraidtabDel');t.deleting  = false;}, (5000));
  	}

},


  DeleteCityRaids : function (){
      	var t = Tabs.Raid;
      	alert('This button needs to be added...');
      	/*var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);


      	params.pf = 0;
      	params.ctrl = 'BotManager';
      	params.action = 'stopAll';
      	params.settings = {};

    	    params.settings.cityId = t.cityId;

      	 new AjaxRequest2(unsafeWindow.g_ajaxpath + "ajax/_dispatch.php" + unsafeWindow.g_ajaxsuffix, {
      		  		method: "post",
      		         parameters: params,
      				 loading: true,
      				 onSuccess: function(transport){
      					var rslt = eval("(" + transport.responseText + ")");
      	                  if (rslt.ok) {

      					  }
      				 },
      		 }); */
      },


  AddRaid : function (Id){
    	var t = Tabs.Raid;
    	var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
    	update = {};
    	params.pf = 0;
    	params.ctrl = 'BotManager';
    	params.action = 'saveMarch';
    	params.settings = {};
    	params.queue = {0:{botMarches:{botMarchStatus:1,botState:1},cityMarches:{}}};
    	for (y in t.save){
    		if (t.save[y]['marchId'] == Id){
	    		params.settings.cityId = t.save[y]['cityId'];
	    		params.queue[0].cityMarches.knightId = t.save[y]['knightId']; 
	    		params.queue[0].cityMarches.toXCoord = t.save[y]['toXCoord'];
	    		params.queue[0].cityMarches.toYCoord = t.save[y]['toYCoord'];
	    		params.queue[0].cityMarches.unit0Count = 0;
	    		params.queue[0].cityMarches.unit1Count = t.save[y]['unit1Count'];
	    		params.queue[0].cityMarches.unit2Count = t.save[y]['unit2Count'];
	    		params.queue[0].cityMarches.unit3Count = t.save[y]['unit3Count'];
	    		params.queue[0].cityMarches.unit4Count = t.save[y]['unit4Count'];
	    		params.queue[0].cityMarches.unit5Count = t.save[y]['unit5Count'];
	    		params.queue[0].cityMarches.unit6Count = t.save[y]['unit6Count'];
	    		params.queue[0].cityMarches.unit7Count = t.save[y]['unit7Count'];
	    		params.queue[0].cityMarches.unit8Count = t.save[y]['unit8Count'];
	    		params.queue[0].cityMarches.unit9Count = t.save[y]['unit9Count'];
	    		params.queue[0].cityMarches.unit10Count = t.save[y]['unit10Count'];
	    		params.queue[0].cityMarches.unit11Count = t.save[y]['unit12Count'];
	    		params.queue[0].cityMarches.unit12Count = t.save[y]['unit12Count'];
 			}
 			}

    	 new AjaxRequest2(unsafeWindow.g_ajaxpath + "ajax/_dispatch.php" + unsafeWindow.g_ajaxsuffix, {
    		  		method: "post",
    		         parameters: params,
    				 loading: true,
    				 onSuccess: function(transport){
    					var rslt = eval("(" + transport.responseText + ")");
    	                  if (rslt.ok) {
								t.GetRaids(params.settings.cityId);
      					        unsafeWindow.cityinfo_army();
      	                  		setTimeout(unsafeWindow.update_seed_ajax, 250);
      	                  		for (yy=0;yy<t.save.length;yy++){
      	                  			if (t.save[yy]['marchId'] == Id){
      	                  				  t.save.splice (yy,1);
			}
		}
      	                  		var serverID = getServerId();
      	                  		setTimeout (function (){GM_setValue ('SavedRaids_'+serverID, JSON2.stringify(t.save));}, 0);
      	                  		t.paint();
 		} else {
    					 	 /* var pop = new CPopup ('pbEditRaid', 0,0, 750,250, true);
				 		  	  if (t.popFirst){
				 		  	    pop.centerMe (mainPop.getMainDiv());
				 		  	    t.popFirst = false;
				 		  	  }
				 		  	  pop.getTopDiv().innerHTML = '<div class=showBadged><center>ERROR</center></div>';
				 		  	  var m= '<TABLE id=pbRaidAdd width=100% height=0% class=pbTab><TR align="center">';
				 			  m +=  '<TR><TD rowspan="2"><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/merlin_img.jpg"></td>';
				 			  m+='<TD style="align;left; max-width:200px; text-wrap:normal;word-wrap:break-word"><B>'+ rslt.msg+'</b></td>';
				 		  	  m+='<TD><CENTER>'+ strButton20('OK', 'id=pbOK') +'</center></td></tr>';
				 		  	  pop.getMainDiv().innerHTML = m;
				 			  document.getElementById('pbOK').addEventListener ('click', function(){pop.show (false)},false);
				 		  	  pop.show (true);*/
				 		  	  alert('Error: '+ rslt.msg);
 		}
 		},
 	});
   },


  getKnights : function(cityId){
         var t = Tabs.Raid;
         var knt = new Array();
         var status ="";
         for (k in Seed.knights['city' + cityId]){
         		if ( Seed.leaders['city' + cityId]["resourcefulnessKnightId"] != Seed.knights['city' + cityId][k]["knightId"] && Seed.leaders['city' + cityId]["politicsKnightId"] != Seed.knights['city' + cityId][k]["knightId"] && Seed.leaders['city' + cityId]["combatKnightId"] != Seed.knights['city' + cityId][k]["knightId"] && Seed.leaders['city' + cityId]["intelligenceKnightId"] != Seed.knights['city' + cityId][k]["knightId"]){
         		   if (Seed.knights['city' + cityId][k]["knightStatus"] == 1 ) status = "Free";
         		   else status = "Marching";
         			knt.push ({
         				Name:   Seed.knights['city' + cityId][k]["knightName"],
         				Combat:	parseInt(Seed.knights['city' + cityId][k]["combat"]),
         				ID:		Seed.knights['city' + cityId][k]["knightId"],
         				Status: status,
         			});
         		}
         }
         knt = knt.sort(function sort(a,b) {a = a['Combat'];b = b['Combat'];return a == b ? 0 : (a > b ? -1 : 1);});
         document.getElementById('AddKnights').options.length=0;
  		var o = document.createElement("option");
  		o.text = '--Choose a Knight--';
  		o.value = 0;
  		document.getElementById("AddKnights").options.add(o);
         for (k in knt){
      			if (knt[k]["Name"] !=undefined){
  	    			var o = document.createElement("option");
  	    			o.text = (knt[k]["Name"] + ' (' + knt[k]["Combat"] +') (' + knt[k]["Status"] +')');
  	    			o.value = knt[k]["ID"];
  	    			document.getElementById("AddKnights").options.add(o);
      			}
      	}
      },


  clickCitySelect : function (city){
  	var t = Tabs.Raid;
  	t.cityId = city['id'];
  	t.GetRaids(t.cityId);
  },

  checkRaids : function (){
	var t = Tabs.Raid;
	var now = unixTime();
	if(!Options.RaidRunning) return;
	if ( (now - Options.RaidReset) > 7200 ) {
		Options.RaidReset = now;
		saveOptions();
		for (g=0;g<Seed.cities.length;g++){
				t.citiesdone = "";
				setTimeout(t.resetRaids, (1500*g), Seed.cities[g][0],Seed.cities[g][1]);
		}
		setTimeout(t.postLog, 30000);
	}
	t.raidtimer = setTimeout(t.checkRaids, 900000);
  },

  GetRaids : function(cityId){
  		var t = Tabs.Raid;
  		var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);

  		params.pf = 0;
  		params.ctrl = 'BotManager';
  		params.action = 'getMarches';
  		params.settings = {};
  		params.settings.cityId = cityId;


   		new AjaxRequest(unsafeWindow.g_ajaxpath + "ajax/_dispatch.php" + unsafeWindow.g_ajaxsuffix, {
  		         method: "post",
  		         parameters: params,
  				 loading: true,
  				 onSuccess: function(transport){
  					var rslt = eval("(" + transport.responseText + ")");
                        if (rslt.ok) {
                        	t.rslt = rslt;
  							t.paint();
  							unsafeWindow.cityinfo_army();
  							setTimeout(unsafeWindow.update_seed_ajax, 250);
  						}
  				 },
  		 });
  },


  resetRaids : function(cityId,cityName){
  		var t = Tabs.Raid;
  		var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);

  		params.pf = 0;
  		params.ctrl = 'BotManager';
  		params.action = 'resetRaidTimer';
		params.settings = {};
  		params.settings.cityId = cityId;


   		new AjaxRequest(unsafeWindow.g_ajaxpath + "ajax/_dispatch.php" + unsafeWindow.g_ajaxsuffix, {
  		         method: "post",
  		         parameters: params,
				 loading: true,
				 onSuccess: function(transport){
					var rslt = eval("(" + transport.responseText + ")");
                        if (rslt.ok) {
							unsafeWindow.cityinfo_army();
                            setTimeout(unsafeWindow.update_seed_ajax, 250);
                            t.citiesdone += cityName + ' ';
						}
				 },
  		 });
  },

  postLog : function (){
  		var t = Tabs.Raid;
  		actionLog('Reset Raidtimer: ' + t.citiesdone);
  },

   sendreport: function(){
	  var t = Tabs.Raid;
	  if(!Options.foodreport) return;
	  var now = new Date().getTime()/1000.0;
      now = now.toFixed(0);
      if (now < (parseInt(Options.LastReport)+(Options.MsgInterval*60*60))) return;

	var total = 0;
    var message = 'Raid Stats: %0A';
    message += '%0A Livestock Feed (during '+ Options.MsgInterval +' hours of raids) %0A';
    for (q=1;q<=Seed.cities.length;q++){
    	var cityID = 'city' + Seed.cities[q-1][0];
    	var gain = parseInt(Seed.resources[cityID]['rec1'][0] / 3600) - Options.Foodstatus[q];
    	message+= Seed.cities[q-1][1] + ': Inicio: ' + addCommas(Options.Foodstatus[q]) + ' Fin :' + addCommas(parseInt(Seed.resources[cityID]['rec1'][0] / 3600)) + ' Ganancia: ';    	message+= Seed.cities[q-1][1] + ': Inicio: ' + addCommas(Options.Foodstatus[q]) + ' Fin :' + addCommas(parseInt(Seed.resources[cityID]['rec1'][0] / 3600)) + ' Ganancia: ';
    	message += addCommas(gain)  + '%0A';
		total += gain;
		Options.Foodstatus[q] = parseInt(Seed.resources[cityID]['rec1'][0] / 3600);
    }
	message += '%0A Alimento total ganado : '+addCommas(total)+'%0A';

    var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
    params.emailTo = Seed.player['name'];
    params.subject = "Informe de Raid General";
    params.message = message;
    params.requestType = "COMPOSED_MAIL";
    new AjaxRequest(unsafeWindow.g_ajaxpath + "ajax/getEmail.php" + unsafeWindow.g_ajaxsuffix, {
        method: "post",
        parameters: params,
        onSuccess: function (message) {
            var rslt = eval("(" + message.responseText + ")");
            if (rslt.ok) {
            } else {
            }
        },
        onFailure: function () {
        },
    });

	Options.LastReport = now;
    saveOptions();
  },

  toggleRaidState : function (){
  	var t = Tabs.Raid;
  	if(Options.RaidRunning){
  		Options.RaidRunning = false;
  		t.raidtimer = null;
  		document.getElementById('pbRaidStart').value = 'Auto Reset = OFF';
  	} else {
  		Options.RaidRunning = true;
  		t.raidtimer = setTimeout(t.checkRaids, 5000);
  		document.getElementById('pbRaidStart').value = 'Auto Reset = ON';
  	}
	saveOptions();
  },


  hide : function (){
  },

  show : function (){
  },
};



/*********************************** Log Tab ***********************************/
Tabs.ActionLog = {
  tabOrder: 120,
  tabLabel : 'Log',
  myDiv : null,
  logTab : null,
  maxEntries: 300,
  last50 : [],
  state : null,
    
  init : function (div){
    var t = Tabs.ActionLog;
    t.myDiv = div;
    t.myDiv.innerHTML = '<DIV class=pbStat>ACTION LOG - VERSION: '+ Version+'</div><DIV style="height:535px; max-height:535px; overflow-y:auto">\
      <TABLE cellpadding=0 cellspacing=0 id=pbactionlog class=pbTabLined><TR><TD></td><TD width=95%></td></table></div>';
    t.logTab = document.getElementById('pbactionlog');  
    t.state = 1;
    var a = JSON2.parse(GM_getValue ('log_'+getServerId(), '[]'));
    if (matTypeof(a) == 'array'){
      t.last50 = a;
      for (var i=0; i<t.last50.length; i++)
        t._addTab (t.last50[i].msg, t.last50[i].ts);
    }
    window.addEventListener('unload', t.onUnload, false);
  },

  hide : function (){
  },

  show : function (){
  },

  onUnload : function (){
    var t = Tabs.ActionLog;
    if (!ResetAll) GM_setValue ('log_'+getServerId(), JSON2.stringify(t.last50));
  },
    
  _addTab : function (msg, ts){
    var t = Tabs.ActionLog;
    if (t.state != 1)
      return;
    if (t.logTab.rows.length >= t.maxEntries)
      t.logTab.deleteRow(t.maxEntries-1);
    var row = t.logTab.insertRow(0);
    row.vAlign = 'top';
    row.insertCell(0).innerHTML = ts;
    row.insertCell(1).innerHTML = msg;
  },
  
  log : function (msg){
    var t = Tabs.ActionLog;
    var ts = new Date().toTimeString().substring (0,8);
    t._addTab (msg, ts);
    while (t.last50.length >= 50)
      t.last50.shift();
    t.last50.push ({msg:msg, ts:ts});
  },
}

function actionLog (msg){
  if (!Tabs.ActionLog.tabDisabled)
    Tabs.ActionLog.log (msg);  
}
  



/*********************************** Options Tab ***********************************/
Tabs.Options = {
  tabOrder: 130,
  tabLabel : 'Options',
  cont : null,
  curTabBut : null,
  curTabName : null,
  fixAvailable : {},

  init : function (div){
    var t = Tabs.Options;
	var chat = document.getElementById('kocmain_bottom').childNodes[1];
	 if (chat) {
	 var channel_input = nHtml.FindByXPath(chat,".//div[contains(@class,'mod_comm_forum')]");
	 logit(channel_input);
 	 var ab = document.createElement('a');
	 ab.className="mod_comm_set";
	 channel_input.appendChild(ab);
	 ab.innerHTML="Smileys";
		
	 ab.addEventListener ('click', function() {
	 t.EmoHelp();
	 }, false);
}
    t.cont = div; 
    var main = '<TABLE class=ptTab align=center><TR><TD><INPUT class=pbSubtab ID=ptmrchSubU type=submit value="options"></td>';    
    main +='<TD><INPUT class=pbSubtab ID=ptmrchSubV type=submit value="Colores"></td></tr></table><HR class=ptThin>';
    main += '<TD width = "100px" ; border:none"><a href="http://code.google.com/p/koc-power-tools/wiki/HowToOptions" target="_blank">Help</a></td></tr>';
    main +='<DIV id=ptOptOutput style="margin-top:10px; margin-left:150px; background-color:white; maxheight:500px; height:500px; width:800px; overflow-y:auto;"></div>';
	
    t.cont.innerHTML = main;
    t.Overv = document.getElementById('ptOptOutput');
    
    document.getElementById('ptmrchSubU').addEventListener('click', e_butSubtab, false);
    document.getElementById('ptmrchSubV').addEventListener('click', e_butSubtab, false);

    
    changeSubtab (document.getElementById('ptmrchSub'+Options.curOptTab));
    
    function e_butSubtab (evt){            
      changeSubtab (evt.target);   
    }

    function changeSubtab (but){
      if (but == t.curTabBut)
        return;
      if (t.curTabBut){
        t.curTabBut.className='pbSubtab'; 
        t.curTabBut.disabled=false;
      }
      t.curTabBut = but;
      but.className='pbSubtab pbSubtabSel'; 
      but.disabled=true;
      t.curTabName = but.id.substr(9);
	  Options.curOptTab = t.curTabName;
      t.show ();
    }
    },


    Options : function (){ 
    var t = Tabs.Options; 

    try {  
       m = '<TABLE class=ptTab>';
        m+='<TR><TD colspan=2><U><B>Configuring PowerKoc:</b></u></td></tr>';
        m+='<TR><TD><INPUT id=ptAllowWinMove type=checkbox /></td><TD>Enable dragging of the window (move the window by dragging the top bar with the mouse).</td></tr>';
        m+='<TR><TD><INPUT id=pbTrackWinOpen type=checkbox /></td><TD>Remember window position after refresh.</td></tr>';
        m+='<TR><TD><INPUT id=ptHideOnGoto type=checkbox /></td><TD>Hide window by clicking on the map coordinates</td></tr>';
        m+='<TR><TD><INPUT id=pbWideOpt type=checkbox '+ (GlobalOptions.pbWideScreen?'CHECKED ':'') +'/></td><TD>Enable display style: '+ htmlSelector({normal:'Normal', wide:'wide', ultra:'Ultra'},GlobalOptions.pbWideScreenStyle,'id=selectScreenMode') +' (requires cooling in all domains.)</td></tr>';
	m+='<TR><TD><INPUT id=ptEnableFoodWarn type=checkbox /></td><TD>Remaining food show in red if it will end in less than';
        m+='<INPUT id=optFoodHours type=text size=3 value="'+ Options.foodWarnHours +'"> hours, this does not affect the food alert!!!</td></tr>';
        m+='<TR><TD><INPUT id=ptEnableFoodTower type=checkbox /></td><TD>Turn on food alert in the chat (Established in 6 hours, checking every half hour)</td></tr>';
        m+='<TR><TD><INPUT id=ptEnableWisperAlert type=checkbox /></td><TD>turn sound on whisper</td></tr>';
        m+='<TR><TD><INPUT id=ptEnableTowerAlert type=checkbox /></td><TD>Enable sound alerts the tower in chat</td></tr></table>';

        m+='<TABLE class=ptTab><TR><TD colspan=2><U><B>general Options:</b></u></td></tr>';
		m+='<TR><TD><INPUT id=togRptGift type=checkbox /></td><TD>Enable delete gifts report button in inbox</td></tr>';
        m+='<TR><TD><INPUT id=pbFairie type=checkbox /></td><TD>Disable all pop-KOC</td></tr>';		
        m+='<TR><TD><INPUT id=pbWatchEnable type=checkbox '+ (GlobalOptions.pbWatchdog?'CHECKED ':'') +'/></td><TD>KOC Refresh if no charges in 1 minute</td></tr>';
        m+='<TR><TD><INPUT id=pbEveryEnable type=checkbox /></td><TD>Refresh every KOC<INPUT id=pbeverymins type=text size=2 maxlength=3 \> minutes</td></tr>';
        m+='<TR><TD><INPUT id=pbChatREnable type=checkbox /></td><TD>Put chat right (requires Widescreen)</td></tr>';
        m+='<TR><TD><INPUT id=pbGoldEnable type=checkbox /></td><TD>Auto pick up gold when happiness comes to <INPUT id=pbgoldLimit type=text size=2 maxlength=3 \>%</td></tr>';
	m+='<TR><TD><INPUT id=pbWMapEnable type=checkbox /></td><TD>Use map width (requires Widescreen)</td></tr>';
        m+='<TR><TD><INPUT id=togSmiley type=checkbox /></td><TD>Smileys <INPUT id=EmoHelp type=submit value="HELP"></td></tr></table>';

        m+='<TABLE class=ptTab><TR><TD colspan=2><U><B>features:</b></u></td></tr>';
	m+='<TR><TD><INPUT id=ptEnableReportNumber type=checkbox /></td><TD>Number of report</td></tr>';
	m+='<TR><TD><INPUT id=ptAtkAlliance type=checkbox /></td><TD>Alliance attacker</td></tr>';
	m+='<TR><TD><INPUT id=ptTgtAlliance type=checkbox /></td><TD>Alliance attacked</td></tr>';
	m+='<TR><TD></TD><TD>city ??attacker: <SELECT id=ptAtkCityName>';
	m+='<OPTION value="no" '+ (Options.atkCityName=='no'?'SELECTED':'') +'>No</option><OPTION value="same" '+ (Options.atkCityName=='same'?'SELECTED':'') +'>on the same line</option>';
	m+='<OPTION value="new" '+ (Options.atkCityName=='new'?'SELECTED':'') +'>in another line</option></select>&nbsp;&nbsp;&nbsp;city ??attacked: <SELECT id=ptTgtCityName>';
	m+='<OPTION value="no" '+ (Options.tgtCityName=='no'?'SELECTED':'') +'>No</option><OPTION value="same" '+ (Options.tgtCityName=='same'?'SELECTED':'') +'>on the same line</option>';
	m+='<OPTION value="new" '+ (Options.tgtCityName=='new'?'SELECTED':'') +'>in another line</option></select></td></tr>';
	m+='<TR><TD><INPUT id=togAllowAlter type=checkbox /></td><TD>Allow other scripts change to change the format of the reports of the alliance.</td></tr>';
        m+='<TR><TD><INPUT id=togGmtClock type=checkbox /></td><TD>Enable GMT relog next to the camelot </td></tr>';
        m+='<TR><TD><INPUT id=togCoordBox type=checkbox /></td><TD>Favorite maintain map box above the activity of the troops</td></tr>';
        m+='<TR><TD><INPUT id=HelReq type=checkbox /></td><TD>Help alliance build/research posts</td></tr>';
        m+='<TR><TD><INPUT id=DelReq type=checkbox /></td><TD>Hide alliance requests in chat<</td></tr>';
        m+='<TR><TD><INPUT id=PubReq type=checkbox '+ (GlobalOptions.autoPublishGamePopups?'CHECKED ':'') +'/></td><TD>Auto post to facebook posts '+ htmlSelector({0:'----', 80:'Everyone', 50:'Friends of Friends', 40:'Friends Only', 10:'Only Me'},GlobalOptions.autoPublishPrivacySetting,'id=selectprivacymode') +' (I recommend "just Friends")</td>';
	m+='<TR><TD><INPUT id=pbsendmeaway type=checkbox '+ (GlobalOptions.pbNoMoreKabam?'CHECKED ':'')+'/></td><TD>Im out!!!<sup><span class="boldRed">(Only Kabam!)</span></sup></td></tr>';
        m+='<TR><TD><INPUT id=MapExtra type=checkbox /></td><TD>Show power and players on the map.</td></tr></table>';

        m+='<TABLE class=ptTab><TR><TD colspan=2><U><B>Automatic Clearing reports:</b></u></td></tr>';
        m+='<TR><TD><INPUT id=deletetoggle type=checkbox /></td><TD>Barb / Transport</td></tr>';
        m+='<TR><TD><INPUT id=deletes0toggle type=checkbox /></td><TD>Transportation (To you)</td></tr>';
        m+='<TR><TD><INPUT id=deletes1toggle type=checkbox /></td><TD>wilds</td></tr>';
        m+='<TR><TD><INPUT id=deletes2toggle type=checkbox /></td><TD>darkforests</td></tr>';
        m+='<TR><TD><INPUT id=deletes3toggle type=checkbox /></td><TD>reinforcement</td></tr>';
        m+='<TR><TD><INPUT id=delete4toggle type=checkbox /></td><TD>scout(the enemy)</td></tr>';
        m+='<TR><TD><INPUT id=deletes5toggle type=checkbox /></td><TD>attacks</td></tr>';
        m+='<TR><TD><INPUT id=deletes6toggle type=checkbox /></td><TD>cresting </td></tr>';
	m+='<TR><TD></td><td>Interval: <input type=text size=1 id=Ksdeletetimer value="' + Options.DeleteTimerMinute + '"> Minutes (Minimum 2, but may delete before you go slower).</td></tr></table>';
        m+='<TR><TD><INPUT id="optResetOverviewOptions" type=submit value="Reset Options General tab"\></td></tr>';
        m += strButton20('Reset ALL Options', 'id=ResetALL')
      t.Overv.innerHTML = m;

                            document.getElementById('optResetOverviewOptions').addEventListener ('click', function () {
				Options.showBuildings = false;
				Options.showDefenses = false;
				Options.includeMarching = false;
				Options.showPopulation = false;
				Options.resourceProd = false;
				Options.showTroops = false;
				Options.wrapCityName = false;
				Options.includeCityHome = false;
				Options.includeCityMarch = false;
				Options.includeCityRaid = false;
				Options.includeCityTrain = false;
			}, false);
			document.getElementById('ptAtkCityName').addEventListener ('change', function () {
				Options.atkCityName = document.getElementById('ptAtkCityName').value;
				saveOptions();
			}, false);
			document.getElementById('ptTgtCityName').addEventListener ('change', function () {
				Options.tgtCityName = document.getElementById('ptTgtCityName').value;
				saveOptions();
			}, false);
      document.getElementById('optFoodHours').addEventListener ('change', function () {
          var x = document.getElementById('optFoodHours').value; 
          if (isNaN(x) || x<0.01 || x>99999){
            document.getElementById('optFoodHours').value = Options.foodWarnHours;
            return;
          }
          Options.foodWarnHours = x; 
          saveOptions();
        }, false);
      document.getElementById('selectScreenMode').addEventListener ('change', function(){
      		GlobalOptions.pbWideScreenStyle = document.getElementById('selectScreenMode').value;
      		GM_setValue ('Options_??', JSON2.stringify(GlobalOptions));
      },false);
	  
      ById('Ksdeletetimer').addEventListener ('change', function () {
	  if (parseInt(ById('Ksdeletetimer').value) < 2) {
	    ById('Ksdeletetimer').value=2;
	  }
	  Options.DeleteTimerMinute = ById('Ksdeletetimer').value;
	  saveOptions();
	}, false);
	

       document.getElementById('selectprivacymode').addEventListener ('change', function(){
      		GlobalOptions.autoPublishPrivacySetting = document.getElementById('selectprivacymode').value;
			GM_setValue ('Options_??', JSON2.stringify(GlobalOptions));
      },false);
	  document.getElementById('PubReq').addEventListener ('change', function(){
      		GlobalOptions.autoPublishGamePopups = document.getElementById('PubReq').checked;
			GM_setValue ('Options_??', JSON2.stringify(GlobalOptions));
      },false);	
          document.getElementById('ResetALL').addEventListener ('click', function(){
	  		var serverID = getServerId();
	  		RemoveList = (GM_listValues());
	  		for (i=0;i<RemoveList.length;i++){
	  			logit(RemoveList[i]);
	  			GM_deleteValue(RemoveList[i]);
	  		}
	  		ResetAll=true;
	  		reloadKOC();
	  },false);	
//      	  document.getElementById('selecttil').addEventListener ('change', function(){
//		Options.ThroneDeleteLevel = this.value;
//		saveOptions();
//      },false);

     document.getElementById('pbsendmeaway').addEventListener ('click', function(){
       GlobalOptions.pbNoMoreKabam = document.getElementById('pbsendmeaway').checked;
       GM_setValue ('Options_??', JSON2.stringify(GlobalOptions));
     },false);
	 
      
      document.getElementById('pbWatchEnable').addEventListener ('change', t.e_watchChanged, false);
      document.getElementById('pbWideOpt').addEventListener ('change', t.e_wideChanged, false);	  
      document.getElementById('EmoHelp').addEventListener('click', function(){ t.EmoHelp(); }, false);
      t.togOpt ('togSmiley', 'Smiley');
      t.togOpt ('ptEnableFoodWarn', 'enableFoodWarn');
	  t.togOpt ('togRptGift', 'enhancedinbox', DispReport.setEnable, DispReport.isDispReportAvailable);
      t.togOpt ('ptEnableFoodTower', 'enableFoodTower');
      t.togOpt ('ptEnableWisperAlert', 'enableWhisperAlert');  
      t.togOpt ('ptEnableTowerAlert', 'enableTowerAlert'); 	
      t.togOpt ('ptHideOnGoto', 'hideOnGoto');
      t.togOpt ('ptAllowWinMove', 'pbWinDrag', mainPop.setEnableDrag);
      t.togOpt ('togAllowAlter', 'allowAlterAR');
      t.togOpt ('pbTrackWinOpen', 'pbTrackOpen');
      t.togOpt ('pbFairie', 'pbKillFairie', FairieKiller.setEnable);
      t.togOpt ('pbGoldEnable', 'pbGoldEnable', CollectGold.setEnable);
      t.changeOpt ('pbgoldLimit', 'pbGoldHappy');
      t.changeOpt ('pbeverymins', 'pbEveryMins' , RefreshEvery.setTimer);
      t.togOpt ('pbChatREnable', 'pbChatOnRight', WideScreen.setChatOnRight);
      t.togOpt ('pbWMapEnable', 'pbWideMap', WideScreen.useWideMap);
      t.togOpt ('pbEveryEnable', 'pbEveryEnable', RefreshEvery.setEnable);
      t.togOpt ('HelReq', 'HelpRequest');
      t.togOpt ('DelReq', 'DeleteRequest');
      t.togOpt ('MapExtra', 'MapShowExtra');
      t.togOpt ('deletetoggle', 'DeleteMsg');
      t.togOpt ('deletes0toggle', 'DeleteMsgs0');
      t.togOpt ('deletes1toggle', 'DeleteMsgs1'); 
      t.togOpt ('deletes2toggle', 'DeleteMsgs2');
      t.togOpt ('deletes3toggle', 'DeleteMsgs3');
      t.togOpt ('delete4toggle', 'DeleteMsgs4');
      t.togOpt ('deletes5toggle', 'DeleteMsgs5');
      t.togOpt ('deletes6toggle', 'DeleteMsgs6');
      t.togOpt ('togGmtClock', 'gmtClock', GMTclock.setEnable);
      t.togOpt ('togCoordBox', 'mapCoordsTop', CoordBox.setEnable, CoordBox.isAvailable);
      t.togOpt ('ptEnableReportNumber', 'enableReportNumber');
      t.togOpt ('ptAtkAlliance', 'atkAlliance');
      t.togOpt ('ptTgtAlliance', 'tgtAlliance');
      document.getElementById('optFoodHours').addEventListener ('change', function () {
          var x = document.getElementById('optFoodHours').value; 
          if (isNaN(x) || x<0.01 || x>99999){
            document.getElementById('optFoodHours').value = Options.foodWarnHours;
            return;
          }
          Options.foodWarnHours = x; 
          saveOptions();
        }, false);
    } catch (e) {
      t.Overv.innerHTML = '<PRE>'+ e.name +' : '+ e.message +'</pre>';  
    }      
  },

  Layout :function (){
    var t = Tabs.Options;  
    try {      
      m= '<TABLE class=ptTab>';
	  m+='<TR><TD colspan=2><U><B>Chat Layout:</b></u></td></tr>';
          m+='<TR><TD><INPUT id=togChatGlobal type=checkbox /></td><TD>Enable overall background color.</td></tr>';
          m+='<TR><TD><INPUT id=togChatAlliance type=checkbox /></td><TD>Toggle background color of the Alliance chat.</td></tr>';
          m+='<TR><TD><INPUT id=togChatWhisper type=checkbox /></td><TD>Toggle Background color whispers.</td></tr>';
	  m+='<TR><TD><INPUT id=togChatBold type=checkbox /></td><TD>Enable chat in bold.</td></tr>';
	  m+='<TR><TD><INPUT id=togChatAttack type=checkbox /></td><TD>Toggle background color alerts of attacks.</td></tr>';
	  m+='<TR><TD><INPUT id=togChatLead type=checkbox /></td><TD>Toggle background color for leadership.</td></tr></table>';

      m+='<TABLE class=ptTab><BR><TR><TD colspan=2><U><B>Colour:</b></u></td></tr>';
      m+='<TR><TD>Chat Color - Global: </td><TD><INPUT id=togGlobal type=text size=7 maxlength=7 value="'+Colors.ChatGlobal+'"></td>&nbsp;<TD style="background-color:'+Colors.ChatGlobal+'" width=30px>&nbsp;</td></tr>';
      m+='<TR><TD>Chat Color - Aliance: </td><TD><INPUT id=togAll type=text size=7 maxlength=7 value="'+Colors.ChatAll+'"></td>&nbsp;<TD style="background-color:'+Colors.ChatAll+'" width=30px>&nbsp;</td></tr>';
      m+='<TR><TD>Chat Color - alert tower: </td><TD><INPUT id=togChatAtt type=text size=7 maxlength=7 value="'+Colors.ChatAtt+'"></td>&nbsp;<TD style="background-color:'+Colors.ChatAtt+'" width=30px>&nbsp;</td></tr>';
      m+='<TR><TD>Chat Color - whisper: </td><TD><INPUT id=togWhisper type=text size=7 maxlength=7 value="'+Colors.ChatWhisper+'"></td>&nbsp;<TD style="background-color:'+Colors.ChatWhisper+'" width=30px>&nbsp;</td></tr>';
      m+='<TR><TD>Chat Color - chancellor: </td><TD><INPUT id=togChatC type=text size=7 maxlength=7 value="'+Colors.ChatChancy+'"></td>&nbsp;<TD style="background-color:'+Colors.ChatChancy+'" width=30px>&nbsp;</td></tr>';
      m+='<TR><TD>Chat Color - Vice-C: </td><TD><INPUT id=togChatVC type=text size=7 maxlength=7 value="'+Colors.ChatVC+'"></td>&nbsp;<TD style="background-color:'+Colors.ChatVC+'" width=30px>&nbsp;</td></tr>';
      m+='<TR><TD>Chat Color - Officer: </td><TD><INPUT id=togChatLeaders type=text size=7 maxlength=7 value="'+Colors.ChatLeaders+'"></td>&nbsp;<TD style="background-color:'+Colors.ChatLeaders+'" width=30px>&nbsp;</td></tr>';   
      m+='<TR><TD>General - Dark Row: </td><TD><INPUT id=togDarkRow type=text size=7 maxlength=7 value="'+Colors.DarkRow+'"></td>&nbsp;<TD style="background-color:'+Colors.DarkRow+'" width=30px>&nbsp;</td></tr>';
      m+='<TR><TD>General - selected button: </td><TD><INPUT id=togButClick type=text size=7 maxlength=7 value="'+Colors.ButtonSelected+'"></td>&nbsp;<TD style="background-color:'+Colors.ButtonSelected+'" width=30px>&nbsp;</td></tr>';
      m+='<TR><TD>Overview rows:</td><TD><INPUT id=togOverDarkRow type=text size=7 maxlength=7 value="'+Colors.OverviewDarkRow+'"></td>&nbsp;<TD style="background-color:'+Colors.OverviewDarkRow+'" width=30px>&nbsp;</td></tr>';
	  m+='<TR><TD>Transparency:&nbsp;&nbsp;<span style="color:#800;"><sup>(0.7 - 2)</sup></span></td><TD><INPUT id=togOpacity type=text size=3 maxlength=3 value="'+Colors.Opacity+'"/></td><TD></tr>';
	  
      m+='</table><BR><BR><DIV>HTML colors:&nbsp;&nbsp;&nbsp;';
      m+='<a href="http://www.colorpicker.com/" target="_blank">Color Picker</a>&nbsp;&nbsp;&nbsp;/&nbsp;&nbsp;&nbsp;';
      m+='<a href="http://www.w3schools.com/html/html_colors.asp" target="_blank">Colors</a>';
      m+='</table><BR><BR><HR>To apply the colors need a refresher!<BR>';
      m+= strButton20('reset Colours', 'id=ResetALL');
      t.Overv.innerHTML = m;
      t.togOpt ('togChatGlobal', 'chatglobal');
      t.togOpt ('togChatAlliance', 'chatalliance');
      t.togOpt ('togChatWhisper', 'chatwhisper');	
      t.togOpt ('togChatBold', 'chatbold');
      t.togOpt ('togChatAttack', 'chatAttack');
      t.togOpt ('togChatLead', 'chatLeaders');
      
      document.getElementById('togGlobal').addEventListener('change', function(){Colors.ChatGlobal = document.getElementById('togGlobal').value;t.Layout()}, false);
      document.getElementById('togChatLeaders').addEventListener('change', function(){Colors.ChatLeaders = document.getElementById('togChatLeaders').value;t.Layout()}, false);
      document.getElementById('togChatC').addEventListener('change', function(){Colors.ChatChancy = document.getElementById('togChatC').value;t.Layout()}, false);
      document.getElementById('togChatVC').addEventListener('change', function(){Colors.ChatVC = document.getElementById('togChatVC').value;t.Layout()}, false);
      document.getElementById('togDarkRow').addEventListener('change', function(){Colors.DarkRow = document.getElementById('togDarkRow').value;t.Layout()}, false);
      document.getElementById('togButClick').addEventListener('change', function(){Colors.ButtonSelected = document.getElementById('togButClick').value;t.Layout()}, false);  
      document.getElementById('togOverDarkRow').addEventListener('change', function(){Colors.OverviewDarkRow = document.getElementById('togOverDarkRow').value;t.Layout()}, false);
      document.getElementById('togAll').addEventListener('change', function(){Colors.ChatAll = document.getElementById('togAll').value;t.Layout()}, false);
      document.getElementById('togChatAtt').addEventListener('change', function(){Colors.ChatAtt = document.getElementById('togChatAtt').value;t.Layout()}, false);
      document.getElementById('togWhisper').addEventListener('change', function(){Colors.ChatWhisper = document.getElementById('togWhisper').value;t.Layout()}, false);
	  document.getElementById('togOpacity').addEventListener('change', function(){Colors.Opacity = document.getElementById('togOpacity').value;t.Layout()}, false);
      document.getElementById('ResetALL').addEventListener ('click', function(){
      		RemoveList = (GM_listValues());
      		for (i=0;i<RemoveList.length;i++){
      			if (RemoveList[i] == "Colors") GM_deleteValue(RemoveList[i]);
      		}
      		ResetColors=true;
      		reloadKOC();
      },false);	
       saveColors();
    } catch (e) {
      t.cont.innerHTML = '<PRE>'+ e.name +' : '+ e.message +'</pre>';  
    }
  },

  hide : function (){
  },

  show : function (){
        var t = Tabs.Options;
    if (t.curTabName == 'U') 
         t.Options();
    else if (t.curTabName == 'V')
      t.Layout();
  },

    togOpt : function (checkboxId, optionName, callOnChange){
      var t = Tabs.Options;
      var checkbox = ById(checkboxId);
      if (Options[optionName])
        checkbox.checked = true;
      checkbox.addEventListener ('change', eventHandler, false);
      function eventHandler (){
        Options[optionName] = this.checked;
        saveOptions();
        if (callOnChange)
          callOnChange (this.checked);
        
        if (optionName=="DeleteMsgs5" || optionName=="DeleteMsgs6" || "DeleteMsgs4" || optionName=="DeleteMsg" || optionName=="DeleteMsgs0" || optionName=="DeleteMsgs1" || optionName=="DeleteMsgs2" || optionName=="DeleteMsgs3") {
           DeleteReports.init();
        }
      }
    },
  
  changeOpt : function (valueId, optionName, callOnChange){
    var t = Tabs.Options;
    var e = document.getElementById(valueId);
    e.value = Options[optionName];
    e.addEventListener ('change', eventHandler, false);
    function eventHandler (){
      Options[optionName] = this.value;
      saveOptions();
      if (callOnChange)
        callOnChange (this.value);
    }
  },
  
 
 
  
  e_watchChanged : function (){
    GlobalOptions.pbWatchdog = document.getElementById('pbWatchEnable').checked;
    GM_setValue ('Options_??', JSON2.stringify(GlobalOptions));  
  },
  
  e_wideChanged : function (){
    GlobalOptions.pbWideScreen = document.getElementById('pbWideOpt').checked;
    GM_setValue ('Options_??', JSON2.stringify(GlobalOptions));  
  },

    EmoClick: function(what) {
  document.getElementById ("mod_comm_input").value += " " + what + " ";
  }, 

  EmoHelp : function (){
	var t = Tabs.Options;
	unsafeWindow.pdxEmoClick = t.EmoClick;
	var helpText = '<DIV style="max-height:295px; overflow-y:auto">';
	helpText += '<TABLE width=95% cellspacing=0 cellpadding=4 border=1 bordercolor=black>';
	helpText += '<TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00100-smile.gif\" onclick="pdxEmoClick(\':-)\')"></td><TD>:) :-) :=) ^^</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00101-sadsmile.gif\" onclick="pdxEmoClick(\':-(\')"></td><TD>:-( :=(</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00102-bigsmile.gif\" onclick="pdxEmoClick(\':-D\')"></td><TD>:D :-D :=D</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00106-crying.gif\" onclick="pdxEmoClick(\';-(\')"></td><TD>;-( ;=(</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00109-kiss.gif\" onclick="pdxEmoClick(\':-*\')"></td><TD>:-* :=*</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00112-wondering.gif\" onclick="pdxEmoClick(\':^)\')"></td><TD>:^)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00105-wink.gif\" onclick="pdxEmoClick(\';-)\')"></td><TD>;-) ;=)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00113-sleepy.gif\" onclick="pdxEmoClick(\'I-)\')"></td><TD>I-) I=)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00103-cool.gif\" onclick="pdxEmoClick(\'8-)\')"></td><TD>8-) 8=) B-) B=)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00121-angry.gif\" onclick="pdxEmoClick(\'x=(\')"></td><TD>x=( x-( :-@ :=@</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00119-puke.gif\" onclick="pdxEmoClick(\':-& \')"></td><TD>:-& :=&</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00107-sweating.gif\" onclick="pdxEmoClick(\'(:I\')"></td><TD>(:I</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00110-tongueout.gif\" onclick="pdxEmoClick(\':=P\')"></td><TD>:P :=P :-P :=p</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00111-blush.gif\" onclick="pdxEmoClick(\':-$\')"></td><TD>:-$ :=$ :"></td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00123-party.gif\" onclick="pdxEmoClick(\'(party)\')"></td><TD>(party)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00176-smoke.gif\" onclick="pdxEmoClick(\'(ci)\')"></td><TD>(smoke) (smoking) (ci) (rauchen)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00181-fubar.gif\" onclick="pdxEmoClick(\'(fubar)\')"></td><TD>(fubar)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00115-inlove.gif\" onclick="pdxEmoClick(\'(inlove)\')"></td><TD>(inlove)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00152-heart.gif\" onclick="pdxEmoClick(\'(heart)\')"></td><TD>(heart)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00128-hi.gif\" onclick="pdxEmoClick(\'(hi)\')"></td><TD>(hi)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00137-clapping.gif\" onclick="pdxEmoClick(\'(clap)\')"></td><TD>(clap) (bravo) (klatschen)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00140-rofl.gif\" onclick="pdxEmoClick(\'(rofl)\')"></td><TD>(rofl)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00168-drink.gif\" onclick="pdxEmoClick(\'(drink)\')"></td><TD>(drink)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00162-coffee.gif\" onclick="pdxEmoClick(\'(cafe)\')"></td><TD>(cafe) (kaffee) (coffee)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00154-mail.gif\" onclick="pdxEmoClick(\'(m)\')"></td><TD>(m) (e)</td></tr><TR><TD><img class=emoicon src=\"http://factoryjoe.s3.amazonaws.com/emoticons/emoticon-0180-bug.gif\" onclick="pdxEmoClick(\'(bug)\')"></td><TD>(bug)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00134-bear.gif\" onclick="pdxEmoClick(\'(bear)\')"></td><TD>(bear)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00118-yawn.gif\" onclick="pdxEmoClick(\'I()\')"></td><TD>I()</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00148-yes.gif\" onclick="pdxEmoClick(\'(like)\')"></td><TD>(like)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00116-evilgrin.gif\" onclick="pdxEmoClick(\'>:)\')"></td><TD>]: >:) </td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00182-poolparty.gif\" onclick="pdxEmoClick(\'(pool)\')"></td><TD>(pool)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00174-bandit.gif\" onclick="pdxEmoClick(\'(bandit)\')"></td><TD>(bandit)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00175-drunk.gif\" onclick="pdxEmoClick(\'(drunk)\')"></td><TD>(drunk)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00173-middlefinger.gif\" onclick="pdxEmoClick(\'(finger)\')"></td><TD>(finger)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00172-mooning.gif\" onclick="pdxEmoClick(\'(mooning)\')"></td><TD>(mooning)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00178-rock.gif\" onclick="pdxEmoClick(\'(rock)\')"></td><TD>(rock)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00183-swear.gif\" onclick="pdxEmoClick(\'(swear)\')"></td><TD>(swear)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00184-tmi.gif\" onclick="pdxEmoClick(\'(tmi)\')"></td><TD>(tmi)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00177-toivo.gif\" onclick="pdxEmoClick(\'(toivo)\')"></td><TD>(toivo)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00139-bow.gif\" onclick="pdxEmoClick(\'(bow)\')"></td><TD>(bow)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00170-ninja.gif\" onclick="pdxEmoClick(\'(ninja)\')"></td><TD>(ninja)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00167-beer.gif\" onclick="pdxEmoClick(\'(beer)\')"></td><TD>(beer)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00165-muscle.gif\" onclick="pdxEmoClick(\'(muscle)\')"></td><TD>(muscle)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00163-pizza.gif\" onclick="pdxEmoClick(\'(pizza)\')"></td><TD>(pizza)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00159-music.gif\" onclick="pdxEmoClick(\'(music)\')"></td><TD>(music)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00146-punch.gif\" onclick="pdxEmoClick(\'(punch)\')"></td><TD>(punch)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00148-yes.gif\" onclick="pdxEmoClick(\'(yes)\')"></td><TD>(yes)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00150-handshake.gif\" onclick="pdxEmoClick(\'(handshake)\')"></td><TD>(handshake)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00149-no.gif\" onclick="pdxEmoClick(\'(no)\')"></td><TD>(no)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00155-flower.gif\" onclick="pdxEmoClick(\'(flower)\')"></td><TD>(flower)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00161-phone.gif\" onclick="pdxEmoClick(\'(phone)\')"></td><TD>(phone)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00179-headbang.gif\" onclick="pdxEmoClick(\'(headbang)\')"></td><TD>(headbang)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/icq_kissing.gif\" onclick="pdxEmoClick(\'(beso)\')"></td><TD>(beso)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/icq_angel.gif\" onclick="pdxEmoClick(\'(angel)\')"></td><TD>(angel)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/icq_beer.gif\" onclick="pdxEmoClick(\'(beer2)\')"></td><TD>(beer2)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/icq_blushing.gif\" onclick="pdxEmoClick(\'(blushing)\')"></td><TD>(blushing)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/icq_bomb.gif\" onclick="pdxEmoClick(\'(bomb)\')"></td><TD>(bomb)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/icq_cool.gif\" onclick="pdxEmoClick(\'(cool)\')"></td><TD>(cool)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/icq_crying.gif\" onclick="pdxEmoClick(\'(crying)\')"></td><TD>(crying)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/icq_devil.gif\" onclick="pdxEmoClick(\'(devil)\')"></td><TD>(devil)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/icq_gross.gif\" onclick="pdxEmoClick(\'(gross)\')"></td><TD>(gross)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/icq_kiss.gif\" onclick="pdxEmoClick(\'(kiss)\')"></td><TD>(kiss)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/icq_kissed.gif\" onclick="pdxEmoClick(\'(kissed)\')"></td><TD>(kissed)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/icq_laughing.gif\" onclick="pdxEmoClick(\'(laughing)\')"></td><TD>(laughing)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/icq_lol.gif\" onclick="pdxEmoClick(\'(lol)\')"></td><TD>(lol)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/icq_love.gif\" onclick="pdxEmoClick(\'(love)\')"></td><TD>(love)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/icq_mad.gif\" onclick="pdxEmoClick(\'(mad)\')"></td><TD>(mad)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/icq_music.gif\" onclick="pdxEmoClick(\'(cascos)\')"></td><TD>(cascos)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/icq_nothingtosay.gif\" onclick="pdxEmoClick(\'(nothingtosay)\')"></td><TD>(nothingtosay)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/icq_sad.gif\" onclick="pdxEmoClick(\'(sad)\')"></td><TD>(sad)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/icq_scream.gif\" onclick="pdxEmoClick(\'(scream)\')"></td><TD>(scream)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/icq_shutup.gif\" onclick="pdxEmoClick(\'(shutup)\')"></td><TD>(shutup)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/icq_smile.gif\" onclick="pdxEmoClick(\'(smile)\')"></td><TD>(smile)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/icq_stop.gif\" onclick="pdxEmoClick(\'(stop)\')"></td><TD>(stop)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/icq_surprised.gif\" onclick="pdxEmoClick(\'(surprised)\')"></td><TD>(surprised)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/icq_thankyou.gif\" onclick="pdxEmoClick(\'(thankyou)\')"></td><TD>(thankyou)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/icq_thumbsup.gif\" onclick="pdxEmoClick(\'(thumbsup)\')"></td><TD>(thumbsup)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/icq_tired.gif\" onclick="pdxEmoClick(\'(tired)\')"></td><TD>(tired)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/icq_tongueout.gif\" onclick="pdxEmoClick(\'(tongueout)\')"></td><TD>(tongueout)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/icq_winkblink.gif\" onclick="pdxEmoClick(\'(winkblink)\')"></td><TD>(winkblink)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00114-dull.gif\" onclick="pdxEmoClick(\'(dull)\')"></td><TD>(dull)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00117-talking.gif\" onclick="pdxEmoClick(\'(talking)\')"></td><TD>(talking)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00120-doh.gif\" onclick="pdxEmoClick(\'(doh)\')"></td><TD>(doh)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00122-itwasntme.gif\" onclick="pdxEmoClick(\'(itwasntme)\')"></td><TD>(itwasntme)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00124-worried.gif\" onclick="pdxEmoClick(\'(worried)\')"></td><TD>(worried)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00125-mmm.gif\" onclick="pdxEmoClick(\'(mmm)\')"></td><TD>(mmm)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00126-nerd.gif\" onclick="pdxEmoClick(\'(nerd)\')"></td><TD>(nerd)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00127-lipssealed.gif\" onclick="pdxEmoClick(\'(lipssealed)\')"></td><TD>(lipssealed)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00129-call.gif\" onclick="pdxEmoClick(\'(call)\')"></td><TD>(call)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00130-devil.gif\" onclick="pdxEmoClick(\'(devil)\')"></td><TD>(devil)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00131-angel.gif\" onclick="pdxEmoClick(\'(angel)\')"></td><TD>(angel)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00132-envy.gif\" onclick="pdxEmoClick(\'(envy)\')"></td><TD>(envy)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00133-wait.gif\" onclick="pdxEmoClick(\'(wait)\')"></td><TD>(wait)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00135-makeup.gif\" onclick="pdxEmoClick(\'(makeup)\')"></td><TD>(makeup)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00136-giggle.gif\" onclick="pdxEmoClick(\'(giggle)\')"></td><TD>(giggle)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00138-thinking.gif\" onclick="pdxEmoClick(\'(thinking)\')"></td><TD>(thinking)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00141-whew.gif\" onclick="pdxEmoClick(\'(whew)\')"></td><TD>(whew)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00142-happy.gif\" onclick="pdxEmoClick(\'(happy)\')"></td><TD>(happy)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00143-smirk.gif\" onclick="pdxEmoClick(\'(smirk)\')"></td><TD>(smirk)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00144-nod.gif\" onclick="pdxEmoClick(\'(nod)\')"></td><TD>(nod)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00145-shake.gif\" onclick="pdxEmoClick(\'(shake)\')"></td><TD>(shake)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00147-emo.gif\" onclick="pdxEmoClick(\'(emo)\')"></td><TD>(emo)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00153-brokenheart.gif\" onclick="pdxEmoClick(\'(brokenheart)\')"></td><TD>(brokenheart)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00156-rain.gif\" onclick="pdxEmoClick(\'(rain)\')"></td><TD>(rain)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00157-sun.gif\" onclick="pdxEmoClick(\'(sun)\')"></td><TD>(sun)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00158-time.gif\" onclick="pdxEmoClick(\'(time)\')"></td><TD>(time)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00160-movie.gif\" onclick="pdxEmoClick(\'(movie)\')"></td><TD>(movie)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00164-cash.gif\" onclick="pdxEmoClick(\'(cash)\')"></td><TD>(cash)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00166-cake.gif\" onclick="pdxEmoClick(\'(cake)\')"></td><TD>(cake)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00169-dance.gif\" onclick="pdxEmoClick(\'(dance)\')"></td><TD>(dance)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00170-ninja.gif\" onclick="pdxEmoClick(\'(ninja)\')"></td><TD>(ninja)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00171-star.gif\" onclick="pdxEmoClick(\'(star)\')"></td><TD>(star)</td></tr><TR><TD><img class=emoicon src=\"http://www.skype-emoticons.com/images/emoticon-00185-heidy.gif\" onclick="pdxEmoClick(\'(heidy)\')"></td><TD>(heidy)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/abrazo.gif\" onclick="pdxEmoClick(\'(abrazo)\')"></td><TD>(abrazo)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/afeitado.gif\" onclick="pdxEmoClick(\'(afeitado)\')"></td><TD>(afeitado)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/amoroso.gif\" onclick="pdxEmoClick(\'(amoroso)\')"></td><TD>(amoroso)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/aplauso.gif\" onclick="pdxEmoClick(\'(aplauso)\')"></td><TD>(aplauso)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/bebe.gif\" onclick="pdxEmoClick(\'(bebe)\')"></td><TD>(bebe)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/besazo.gif\" onclick="pdxEmoClick(\'(besazo)\')"></td><TD>(besazo)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/cabezazo.gif\" onclick="pdxEmoClick(\'(cabezazo)\')"></td><TD>(cabezazo)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/callate.gif\" onclick="pdxEmoClick(\'(callate)\')"></td><TD>(callate)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/cama.gif\" onclick="pdxEmoClick(\'(cama)\')"></td><TD>(cama)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/camina.gif\" onclick="pdxEmoClick(\'(camina)\')"></td><TD>(camina)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/cansado.jpg\" onclick="pdxEmoClick(\'(cansado)\')"></td><TD>(cansado)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/cari.gif\" onclick="pdxEmoClick(\'(cari)\')"></td><TD>(cari)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/chulo.gif\" onclick="pdxEmoClick(\'(chulo)\')"></td><TD>(chulo)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/corazonrisa.gif\" onclick="pdxEmoClick(\'(corazonrisa)\')"></td><TD>(corazonrisa)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/enamorado.gif\" onclick="pdxEmoClick(\'(enamorado)\')"></td><TD>(enamorado)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/enamorado2.gif\" onclick="pdxEmoClick(\'(enamorado2)\')"></td><TD>(enamorado2)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/enamorados.gif\" onclick="pdxEmoClick(\'(enamorados)\')"></td><TD>(enamorados)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/estampa.gif\" onclick="pdxEmoClick(\'(estampa)\')"></td><TD>(estampa)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/fumador.gif\" onclick="pdxEmoClick(\'(fumador)\')"></td><TD>(fumador)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/gato.gif\" onclick="pdxEmoClick(\'(gato)\')"></td><TD>(gato)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/gesto.gif\" onclick="pdxEmoClick(\'(gesto)\')"></td><TD>(gesto)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/gira.gif\" onclick="pdxEmoClick(\'(gira)\')"></td><TD>(gira)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/guinha.gif\" onclick="pdxEmoClick(\'(guinha)\')"></td><TD>(guinha)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/lanzabeso.gif\" onclick="pdxEmoClick(\'(lanzabeso)\')"></td><TD>(lanzabeso)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/lengua.gif\" onclick="pdxEmoClick(\'(lengua)\')"></td><TD>(lengua)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/lengua2.gif\" onclick="pdxEmoClick(\'(lengua2)\')"></td><TD>(lengua2)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/lenguaguino.jpg\" onclick="pdxEmoClick(\'(lenguaguino)\')"></td><TD>(lenguaguino)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/llora.gif\" onclick="pdxEmoClick(\'(llora)\')"></td><TD>(llora)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/llora2.gif\" onclick="pdxEmoClick(\'(llora2)\')"></td><TD>(llora2)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/madrid.jpg\" onclick="pdxEmoClick(\'(madrid)\')"></td><TD>(madrid)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/maria.gif\" onclick="pdxEmoClick(\'(maria)\')"></td><TD>(maria)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/nenahola.gif\" onclick="pdxEmoClick(\'(nenahola)\')"></td><TD>(nenahola)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/nenallora.gif\" onclick="pdxEmoClick(\'(nenallora)\')"></td><TD>(nenallora)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/nocabreo.gif\" onclick="pdxEmoClick(\'(nocabreo)\')"></td><TD>(nocabreo)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/nono.gif\" onclick="pdxEmoClick(\'(nono)\')"></td><TD>(nono)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/parte2.gif\" onclick="pdxEmoClick(\'(parte2)\')"></td><TD>(parte2)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/pistolas.gif\" onclick="pdxEmoClick(\'(pistolas)\')"></td><TD>(pistolas)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/pregunta.gif\" onclick="pdxEmoClick(\'(pregunta)\')"></td><TD>(pregunta)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/puerta.gif\" onclick="pdxEmoClick(\'(puerta)\')"></td><TD>(puerta)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/quteden.gif\" onclick="pdxEmoClick(\'(quteden)\')"></td><TD>(quteden)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/raro.gif\" onclick="pdxEmoClick(\'(raro)\')"></td><TD>(raro)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/recibebeso.gif\" onclick="pdxEmoClick(\'(recibebeso)\')"></td><TD>(recibebeso)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/relame.gif\" onclick="pdxEmoClick(\'(relame)\')"></td><TD>(relame)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/reverencia.gif\" onclick="pdxEmoClick(\'(reverencia)\')"></td><TD>(reverencia)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/rosas.gif\" onclick="pdxEmoClick(\'(rosas)\')"></td><TD>(rosas)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/saludo.gif\" onclick="pdxEmoClick(\'(saludo)\')"></td><TD>(saludo)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/separte.gif\" onclick="pdxEmoClick(\'(separte)\')"></td><TD>(separte)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/sisi.gif\" onclick="pdxEmoClick(\'(sisi)\')"></td><TD>(sisi)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/siva.gif\" onclick="pdxEmoClick(\'(siva)\')"></td><TD>(siva)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/sorprendido.gif\" onclick="pdxEmoClick(\'(sorprendido)\')"></td><TD>(sorprendido)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/sorpresa.gif\" onclick="pdxEmoClick(\'(sorpresa)\')"></td><TD>(sorpresa)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/tequiero.gif\" onclick="pdxEmoClick(\'(tequiero)\')"></td><TD>(tequiero)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/timido.gif\" onclick="pdxEmoClick(\'(timido)\')"></td><TD>(timido)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/triste.gif\" onclick="pdxEmoClick(\'(triste)\')"></td><TD>(triste)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/tuu.gif\" onclick="pdxEmoClick(\'(tuu)\')"></td><TD>(tuu)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/XD.gif\" onclick="pdxEmoClick(\'(XD)\')"></td><TD>(XD)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/zumbao.gif\" onclick="pdxEmoClick(\'(zumbao)\')"></td><TD>(zumbao)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/avatar-amor-378.gif\" onclick="pdxEmoClick(\'(besocorazon)\')"></td><TD>(besocorazon)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/abrazomortal.gif\" onclick="pdxEmoClick(\'(abrazomortal)\')"></td><TD>(abrazomortal)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/partidura.gif\" onclick="pdxEmoClick(\'(partidura)\')"></td><TD>(partidura)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/wc.gif\" onclick="pdxEmoClick(\'(wc)\')"></td><TD>(wc)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/comida.gif\" onclick="pdxEmoClick(\'(comida)\')"></td><TD>(comida)</td></tr><TR><TD><img class=emoicon src=\"http://thorastur.99h.com.ar/Emoticones/bull.gif\" onclick="pdxEmoClick(\'(bull)\')"></td><TD>(bull)</td></tr>';
	helpText += '</table></div>';

	var inputtext=document.getElementById('mod_comm_input');
	var pop = new CPopup ('EmoHelp', 280, 200, 350, 350, true);
	pop.getMainDiv().innerHTML = helpText;
	pop.getTopDiv().innerHTML = '<div class=showBadged><center>SMILEYS</center></div>';
	pop.show (true);
  },
};



/****************************  Reassign Implementation  *******************************/
var troops = {1:'SupplyTroops',
			  2:'Militiaman',
			  3:'Scout',
			  4:'Pikeman',
			  5:'Swordsman',
			  6:'Archer',
			  7:'Cavalry',
			  8:'HeavyCavalry',
			  9:'SupplyWagon',
			  10:'Ballista',
			  11:'BatteringRam',
			  12:'Catapult'};  
Tabs.Reassign = {
  tabOrder: 30,
  tabLabel: 'Reassign',
  myDiv: null,
  timer: null,
  reassignState: [],
  lRE: [],
  reassignRoutes: [],
  rallypointlevel:null,
  count:0,
  check:false,

    init: function(div){
		var t = Tabs.Reassign;
        t.myDiv = div;
		t.reassignState = {
            running: false,
        };
        t.readReassignState();
		t.readReassignRoutes();
		t.e_reassignRoutes();

      var m = '<DIV id=pbReMainDivF class=pbStat>AUTOMATED REASSIGN FUNCTION</div><TABLE id=pbtraderfunctions width=100% height=0% class=pbTab><TR align="center">';
      if (t.reassignState.running == false) {
          m += '<TD><INPUT id=pbReassignState type=submit value="Reassign = OFF"></td>';
      } else {
          m += '<TD><INPUT id=pbReassignState type=submit value="Reassign = ON"></td>';
      }
      m += '<TD><INPUT id=pbReassShowRoutes type=submit value="Show Routes"></td>';
      m += '</tr></table></div>';
      m += '<DIV id=pbReassignDivD class=pbStat>ADD REASSIGN ROUTE</div>';

      m += '<TABLE id=pbaddreasignroute width=95% height=0% class=pbTab><TR align="left">';
      m += '<TD width=20px>From City:</td> <TD width=310px><DIV style="margin-bottom:10px;"><span id=ptassigncity></span></div></td></tr>';

      m += '<TR align="left">';
      m += '<TD width=20px>To City:</td> <TD width=310px><DIV style="margin-bottom:10px;"><span id=ptassigncityTo></span></div></td>';
	  
	    m += '<TR align="left">';
	    m += '<TD colspan=4>Time inbetween to check reassign: <INPUT id=pbreassigninterval type=text size=2 value="'+Options.reassigninterval+'"\> minutes</td></tr>';
	    m += '<TR><TD><INPUT id=autofilloff type=checkbox unchecked=true\> Lock troop values</TR></TD></table>';
      m += '<DIV style="margin-top:10px;margin-bottom:5px;">Fill in the number of troops you want to keep in a city:</div>';
      m += '<TABLE id=pbaddreasignroute width=100% height=0% class=pbTab><TR align="center">';
      
      m += '<TR><TD rowspan="2"><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_1_50.jpg?6545"></td>';
      m += '<TD>Supply Troop</td>'
      m += '<TD rowspan="2"><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_2_50.jpg?6545"></td>'
      m += '<TD>Militiaman</td>'
      m += '<TD rowspan="2"><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_3_50.jpg?6545"></td>'
      m += '<TD>Scout</td>'
      m += '<TD rowspan="2"><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_4_50.jpg?6545"></td>'
      m += '<TD>Pikeman</td></tr>'
      m += '<TR><TD><INPUT id=pbSupplyTroops type=checkbox unchecked=true\>';
      m += '<INPUT id=pbtargetSupplyTroops disabled=true type=text size=10 maxlength=10 value="0"\></td>';
      m += '<TD><INPUT id=pbMilitiaman type=checkbox unchecked=true\>';
      m += '<INPUT id=pbtargetMilitiaman disabled=true type=text size=10 maxlength=10 value="0"\></td>';
      m += '<TD><INPUT id=pbScout type=checkbox unchecked=true\>';
      m += '<INPUT id=pbtargetScout disabled=true type=text size=10 maxlength=10 value="0"\></td>';
      m += '<TD><INPUT id=pbPikeman type=checkbox unchecked=true\>';
      m += '<INPUT id=pbtargetPikeman disabled=true type=text size=10 maxlength=10 value="0"\></td></tr>';
      
      m += '<TR><TD rowspan="2"><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_5_50.jpg?6545"></td>';
      m += '<TD>Swordsman</td>'
      m += '<TD rowspan="2"><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_6_50.jpg?6545"></td>'
      m += '<TD>Archer</td>'
      m += '<TD rowspan="2"><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_7_50.jpg?6545"></td>'
      m += '<TD>Cavalry</td>'
      m += '<TD rowspan="2"><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_8_50.jpg?6545"></td>'
      m += '<TD>Heavy Cavalry</td></tr>'
      m += '<TR><TD><INPUT id=pbSwordsman type=checkbox unchecked=true\>';
      m += '<INPUT id=pbtargetSwordsman disabled=true type=text size=10 maxlength=10 value="0"\></td>';
      m += '<TD><INPUT id=pbArcher type=checkbox unchecked=true\>';
      m += '<INPUT id=pbtargetArcher disabled=true type=text size=10 maxlength=10 value="0"\></td>';
      m += '<TD><INPUT id=pbCavalry type=checkbox unchecked=true\>';
      m += '<INPUT id=pbtargetCavalry disabled=true type=text size=10 maxlength=10 value="0"\></td>';
      m += '<TD><INPUT id=pbHeavyCavalry type=checkbox unchecked=true\>';
      m += '<INPUT id=pbtargetHeavyCavalry disabled=true type=text size=10 maxlength=10 value="0"\></td></tr>';
      
      m += '<TR><TD rowspan="2"><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_9_50.jpg?6545"></td>';
      m += '<TD>Supply Wagon</td>'
      m += '<TD rowspan="2"><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_10_50.jpg?6545"></td>'
      m += '<TD>Ballista</td>'
      m += '<TD rowspan="2"><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_11_50.jpg?6545"></td>'
      m += '<TD>Battering Ram</td>'
      m += '<TD rowspan="2"><img src="http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_12_50.jpg?6545"></td>'
      m += '<TD>Catapult</td></tr>'
      m += '<TR><TD><INPUT id=pbSupplyWagon type=checkbox unchecked=true\>';
      m += '<INPUT id=pbtargetSupplyWagon disabled=true type=text size=10 maxlength=10 value="0"\></td>';
      m += '<TD><INPUT id=pbBallista type=checkbox unchecked=true\>';
      m += '<INPUT id=pbtargetBallista disabled=true type=text size=10 maxlength=10 value="0"\></td>';
      m += '<TD><INPUT id=pbBatteringRam type=checkbox unchecked=true\>';
      m += '<INPUT id=pbtargetBatteringRam disabled=true type=text size=10 maxlength=10 value="0"\></td>';
      m += '<TD><INPUT id=pbCatapult type=checkbox unchecked=true\>';
      m += '<INPUT id=pbtargetCatapult disabled=true type=text size=10 maxlength=10 value="0"\></td></tr></table>';
      
      m += '<DIV style="text-align:center; margin-top:15px"><INPUT id=pbSaveRouteReassign type=submit value="Add Route"></div>';
      
      t.myDiv.innerHTML = m;
      
      t.tcp = new CdispCityPicker ('ptreassign', document.getElementById('ptassigncity'), true, null, 0);
	  t.tcpto = new CdispCityPicker ('ptreassignTo', document.getElementById('ptassigncityTo'), true);
	  for(var k in troops){
      document.getElementById('pbtarget'+troops[k]).value = parseInt(Seed.units['city' + t.tcp.city.id]['unt'+k]);
	  }

      document.getElementById('ptassigncity').addEventListener('click', function(){
		  if(document.getElementById('autofilloff').checked == false)
	    for(var k in troops)
        document.getElementById('pbtarget'+troops[k]).value = parseInt(Seed.units['city' + t.tcp.city.id]['unt'+k]);
      }, false);
      
      document.getElementById('pbReassignState').addEventListener('click', function(){
      	t.toggleReassignState(this);
      }, false);
      document.getElementById('pbSaveRouteReassign').addEventListener('click', function(){
      t.addReassignRoute();
      }, false);
      document.getElementById('pbReassShowRoutes').addEventListener('click', function(){
      t.showReassignRoutes();
      }, false);
      
      document.getElementById('pbreassigninterval').addEventListener('keyup', function(){
		if (isNaN(document.getElementById('pbreassigninterval').value)){ document.getElementById('pbreassigninterval').value=0 ;}
		Options.reassigninterval = document.getElementById('pbreassigninterval').value;
		saveOptions();
      }, false);
      
      document.getElementById('pbtargetSupplyTroops').addEventListener('keyup', function(){
          if (isNaN(document.getElementById('pbtargetSupplyTroops').value)) document.getElementById('pbtargetSupplyTroops').value=0 ;
      }, false);
      document.getElementById('pbtargetMilitiaman').addEventListener('keyup', function(){
          if (isNaN(document.getElementById('pbtargetMilitiaman').value)) document.getElementById('pbtargetMilitiaman').value=0 ;
      }, false);
      document.getElementById('pbtargetScout').addEventListener('keyup', function(){
          if (isNaN(document.getElementById('pbtargetScout').value)) document.getElementById('pbtargetScout').value=0 ;
      }, false);
      document.getElementById('pbtargetPikeman').addEventListener('keyup', function(){
          if (isNaN(document.getElementById('pbtargetPikeman').value)) document.getElementById('pbtargetPikeman').value=0 ;
      }, false);
      document.getElementById('pbtargetSwordsman').addEventListener('keyup', function(){
          if (isNaN(document.getElementById('pbtargetSwordsman').value)) document.getElementById('pbtargetSwordsman').value=0 ;
      }, false);
      document.getElementById('pbtargetArcher').addEventListener('keyup', function(){
          if (isNaN(document.getElementById('pbtargetArcher').value)) document.getElementById('pbtargetArcher').value=0 ;
      }, false);
      document.getElementById('pbtargetCavalry').addEventListener('keyup', function(){
          if (isNaN(document.getElementById('pbtargetCavalry').value)) document.getElementById('pbtargetCavalry').value=0 ;
      }, false);
      document.getElementById('pbtargetHeavyCavalry').addEventListener('keyup', function(){
          if (isNaN(document.getElementById('pbtargetHeavyCavalry').value)) document.getElementById('pbtargetHeavyCavalry').value=0 ;
      }, false);
      document.getElementById('pbtargetSupplyWagon').addEventListener('keyup', function(){
          if (isNaN(document.getElementById('pbtargetSupplyWagon').value)) document.getElementById('pbtargetSupplyWagon').value=0 ;
      }, false);
      document.getElementById('pbtargetBallista').addEventListener('keyup', function(){
          if (isNaN(document.getElementById('pbtargetBallista').value)) document.getElementById('pbtargetBallista').value=0 ;
      }, false);
     document.getElementById('pbtargetBatteringRam').addEventListener('keyup', function(){
         if (isNaN(document.getElementById('pbtargetBatteringRam').value)) document.getElementById('pbtargetBatteringRam').value=0 ;
     }, false);
     document.getElementById('pbtargetCatapult').addEventListener('keyup', function(){
         if (isNaN(document.getElementById('pbtargetCatapult').value)) document.getElementById('pbtargetCatapult').value=0 ;
     }, false);
     
      
      document.getElementById('pbSupplyTroops').addEventListener('click', function(){
          if (document.getElementById('pbSupplyTroops').checked==false) {
              document.getElementById('pbtargetSupplyTroops').disabled = true;
          }
          else {
            document.getElementById('pbtargetSupplyTroops').disabled = false;
          }
      },false);
      document.getElementById('pbMilitiaman').addEventListener('click', function(){
          if (document.getElementById('pbMilitiaman').checked==false) {
              document.getElementById('pbtargetMilitiaman').disabled = true;
          }
          else {
            document.getElementById('pbtargetMilitiaman').disabled = false;
          }
      },false);
      document.getElementById('pbScout').addEventListener('click', function(){
          if (document.getElementById('pbScout').checked==false) {
              document.getElementById('pbtargetScout').disabled = true;
          }
          else {
            document.getElementById('pbtargetScout').disabled = false;
          }
      },false);
      document.getElementById('pbPikeman').addEventListener('click', function(){
          if (document.getElementById('pbPikeman').checked==false) {
              document.getElementById('pbtargetPikeman').disabled = true;
          }
          else {
            document.getElementById('pbtargetPikeman').disabled = false;
          }
      },false);
      document.getElementById('pbSwordsman').addEventListener('click', function(){
          if (document.getElementById('pbSwordsman').checked==false) {
              document.getElementById('pbtargetSwordsman').disabled = true;
          }
          else {
            document.getElementById('pbtargetSwordsman').disabled = false;
          }
      },false);
      document.getElementById('pbArcher').addEventListener('click', function(){
          if (document.getElementById('pbArcher').checked==false) {
              document.getElementById('pbtargetArcher').disabled = true;
          }
          else {
            document.getElementById('pbtargetArcher').disabled = false;
          }
      },false);
      document.getElementById('pbCavalry').addEventListener('click', function(){
          if (document.getElementById('pbCavalry').checked==false) {
              document.getElementById('pbtargetCavalry').disabled = true;
          }
          else {
            document.getElementById('pbtargetCavalry').disabled = false;
          }
      },false);
      document.getElementById('pbHeavyCavalry').addEventListener('click', function(){
          if (document.getElementById('pbHeavyCavalry').checked==false) {
              document.getElementById('pbtargetHeavyCavalry').disabled = true;
          }
          else {
            document.getElementById('pbtargetHeavyCavalry').disabled = false;
          }
      },false);
      document.getElementById('pbSupplyWagon').addEventListener('click', function(){
          if (document.getElementById('pbSupplyWagon').checked==false) {
              document.getElementById('pbtargetSupplyWagon').disabled = true;
          }
          else {
            document.getElementById('pbtargetSupplyWagon').disabled = false;
          }
      },false);
      document.getElementById('pbBallista').addEventListener('click', function(){
          if (document.getElementById('pbBallista').checked==false) {
              document.getElementById('pbtargetBallista').disabled = true;
          }
          else {
            document.getElementById('pbtargetBallista').disabled = false;
          }
      },false);
      document.getElementById('pbBatteringRam').addEventListener('click', function(){
          if (document.getElementById('pbBatteringRam').checked==false) {
              document.getElementById('pbtargetBatteringRam').disabled = true;
          }
          else {
            document.getElementById('pbtargetBatteringRam').disabled = false;
          }
      },false);
      document.getElementById('pbCatapult').addEventListener('click', function(){
          if (document.getElementById('pbCatapult').checked==false) {
              document.getElementById('pbtargetCatapult').disabled = true;
          }
          else {
            document.getElementById('pbtargetCatapult').disabled = false;
          }
      },false);
      
      
      window.addEventListener('unload', t.onUnload, false);
    },
    
    getRallypoint: function(cityId){
      var t = Tabs.Reassign;
      for (var o in Seed.buildings[cityId]){
		var buildingType = parseInt(Seed.buildings[cityId][o][0]);
		var buildingLevel = parseInt(Seed.buildings[cityId][o][1]);
		if (buildingType == 12) t.rallypointlevel=parseInt(buildingLevel);
	   }  
	},
      	  
    

	e_reassignRoutes: function(){
      var t = Tabs.Reassign;
      var now = new Date();
      if (t.reassignState.running == true)    {
      	var now = new Date().getTime()/1000.0;
      	now = now.toFixed(0);
      	var last = Options.lastreassign;
       		if ( now > (parseInt(last) + (Options.reassigninterval*60))){
    			  t.checkdoReassign();
      		}
      }
      setTimeout(function(){ t.e_reassignRoutes();}, Options.reassigninterval*1000);
      
    },
    	
	delReassignRoutes: function() {
    	
		var t = Tabs.Reassign;
    	
		t.reassignRoutes= [];
    
	},
	checkcoords : function (obj){
		var t = Tabs.Reassign;
		if(obj.id == 'pbok'){
			t.check = true;
			t.addReassignRoute();
		}
		return;			
	},
	addReassignRoute: function () {
		var t = Tabs.Reassign;
		var city = t.tcp.city.id;
		if(t.tcpto.city == null){
			new CdialogCancelContinue('<SPAN class=boldRed>No destination selected!</span>', null, null, mainPop.getMainDiv);
			return;
		}
		if(t.tcp.city.id == t.tcpto.city.id){
			new CdialogCancelContinue('<SPAN class=boldRed>Can\'t reassign to same city!</span>', null, null, mainPop.getMainDiv);
			return;
		}
		if ((t.tcpto.city.x == 0 && t.tcpto.city.y == 0)&& !t.check)
		{
			new CdialogConfirm ('<SPAN class=boldRed>You are about to set a route to location 0,0!</span>', t.checkcoords, unsafeWindow.modal_attack_check, mainPop.getMainDiv); 
			return;
		}
		t.check = false;
		
		var SendSupplyTroop = document.getElementById('pbSupplyTroops').checked;
		var SendMilitiaman = document.getElementById('pbMilitiaman').checked;
		var SendScout = document.getElementById('pbScout').checked;
		var SendPikeman = document.getElementById('pbPikeman').checked;
		var SendSwordsman = document.getElementById('pbSwordsman').checked;
		var SendArchers = document.getElementById('pbArcher').checked;
		var SendCavalry = document.getElementById('pbCavalry').checked;
		var SendHeavyCavalry = document.getElementById('pbHeavyCavalry').checked;
		var SendSupplyWagons = document.getElementById('pbSupplyWagon').checked;
		var SendBallista = document.getElementById('pbBallista').checked;
		var SendBatteringRam = document.getElementById('pbBatteringRam').checked;
		var SendCatapult = document.getElementById('pbCatapult').checked;
		var SupplyTroop = document.getElementById('pbtargetSupplyTroops').value;
		var Militiaman = document.getElementById('pbtargetMilitiaman').value;
		var Scout = document.getElementById('pbtargetScout').value;
		var Pikeman = document.getElementById('pbtargetPikeman').value;
		var Swordsman = document.getElementById('pbtargetSwordsman').value;
		var Archers = document.getElementById('pbtargetArcher').value;
		var Cavalry = document.getElementById('pbtargetCavalry').value;
		var HeavyCavalry = document.getElementById('pbtargetHeavyCavalry').value;
		var SupplyWagons = document.getElementById('pbtargetSupplyWagon').value;
		var Ballista = document.getElementById('pbtargetBallista').value;
		var BatteringRam = document.getElementById('pbtargetBatteringRam').value;
		var Catapult = document.getElementById('pbtargetCatapult').value;
		var target_x = t.tcpto.city.x;
		var target_y = t.tcpto.city.y;
				
		var lRE = t.reassignRoutes;
			lRE.push({
				city:				city,
				target_x:			target_x,
				target_y:			target_y,
				SendSupplyTroop:	SendSupplyTroop,
				SupplyTroop:		SupplyTroop,
				SendMilitiaman:		SendMilitiaman,
				Militiaman:			Militiaman,
				SendScout:			SendScout,
				Scout:				Scout,
				SendPikeman: 		SendPikeman,
				Pikeman: 			Pikeman,
				SendSwordsman:		SendSwordsman,
				Swordsman:			Swordsman,
				SendArchers:		SendArchers,
				Archers:			Archers,
				SendCavalry: 		SendCavalry,
				Cavalry: 			Cavalry,
				SendHeavyCavalry:	SendHeavyCavalry,
				HeavyCavalry:		HeavyCavalry,
				SendSupplyWagons:	SendSupplyWagons,
				SupplyWagons:		SupplyWagons,
				SendBallista: 		SendBallista,
				Ballista: 			Ballista,
				SendBatteringRam:	SendBatteringRam,
				BatteringRam:		BatteringRam,
				SendCatapult:		SendCatapult,
				Catapult:			Catapult,
			});
		document.getElementById('pbReassignDivD').style.background ='#99FF99';
		setTimeout(function(){ (document.getElementById('pbReassignDivD').style.background =''); }, 1000);
	},
	showReassignRoutes: function () {
		var t = Tabs.Reassign;
		var popReassignRoutes = null;
		t.popReassignRoutes = new CPopup('pbShowTrade', 0, 0, 1100, 500, true, function() {clearTimeout (1000);});
		var m = '<DIV style="max-height:500px; height:500px; overflow-y:auto"><TABLE align=center cellpadding=0 cellspacing=0 width=100% class="pbShowReassignRoutes" id="pbRoutesQueue">';       
		t.popReassignRoutes.getMainDiv().innerHTML = '</table></div>' + m;
		t.popReassignRoutes.getTopDiv().innerHTML = '<TD><B>Reassign routes:</td>';
		t.paintReassignRoutes();
		t._addTabHeader();
		t.popReassignRoutes.show(true)	;
	},
	paintReassignRoutes: function(){
	        var t = Tabs.Reassign;
	        var r = t.reassignRoutes;
	        var cityname;
			for (var i = (r.length-1); i>=0; i--) {
				for (var y=0; y< Seed.cities.length;y++) {
					if ( parseInt(Seed.cities[y][0]) == r[i].city) var cityname = Seed.cities[y][1];
				}    
				var queueId = i;
				t._addTab(queueId,cityname, r[i].target_x, r[i].target_y, r[i].SendSupplyTroop,r[i].SupplyTroop, r[i].SendMilitiaman, r[i].Militiaman, r[i].SendScout, r[i].Scout, r[i].SendPikeman, r[i].Pikeman, r[i].SendSwordsman, r[i].Swordsman, r[i].SendArchers, r[i].Archers, r[i].SendCavalry, r[i].Cavalry, r[i].SendHeavyCavalry, r[i].HeavyCavalry, r[i].SendSupplyWagons, r[i].SupplyWagons, r[i].SendBallista, r[i].Ballista, r[i].SendBatteringRam, r[i].BatteringRam, r[i].SendCatapult, r[i].Catapult);
	        }
	    },
	  
	 _addTab: function(queueId,cityname,target_x,target_y,SendSupplyTroop,SupplyTroop,SendMilitiaman,Militiaman,SendScout,Scout,SendPikeman,Pikeman,SendSwordsman,Swordsman,SendArchers,Archers,SendCavalry,Cavalry,SendHeavyCavalry,HeavyCavalry,SendSupplyWagons,SupplyWagons,SendBallista,Ballista,SendBatteringRam,BatteringRam,SendCatapult,Catapult){
	 	var t = Tabs.Reassign;
	     var row = document.getElementById('pbRoutesQueue').insertRow(0);
	     row.vAlign = 'top';
	     row.insertCell(0).innerHTML = queueId;
	     row.insertCell(1).innerHTML = cityname;
	     row.insertCell(2).innerHTML = target_x + ',' + target_y;
	     row.insertCell(3).innerHTML = SendSupplyTroop;
	     row.insertCell(4).innerHTML = addCommas(SupplyTroop);
	     row.insertCell(5).innerHTML = SendMilitiaman;
	     row.insertCell(6).innerHTML = addCommas(Militiaman);
	 	 row.insertCell(7).innerHTML = SendScout;
	 	 row.insertCell(8).innerHTML = addCommas(Scout);
	 	 row.insertCell(9).innerHTML = SendPikeman;
	 	 row.insertCell(10).innerHTML = addCommas(Pikeman);
	 	 row.insertCell(11).innerHTML = SendSwordsman;
	 	 row.insertCell(12).innerHTML = addCommas(Swordsman);
	 	 row.insertCell(13).innerHTML = SendArchers;
	 	 row.insertCell(14).innerHTML = addCommas(Archers);
	 	 row.insertCell(15).innerHTML = SendCavalry;
	 	 row.insertCell(16).innerHTML = addCommas(Cavalry);
	 	 row.insertCell(17).innerHTML = SendHeavyCavalry;
	 	 row.insertCell(18).innerHTML = addCommas(HeavyCavalry);
	 	 row.insertCell(19).innerHTML = SendSupplyWagons;
	 	 row.insertCell(20).innerHTML = addCommas(SupplyWagons);
	 	 row.insertCell(21).innerHTML = SendBallista;
	 	 row.insertCell(22).innerHTML = addCommas(Ballista);
	 	 row.insertCell(23).innerHTML = SendBatteringRam;
	 	 row.insertCell(24).innerHTML = addCommas(BatteringRam);
	 	 row.insertCell(25).innerHTML = SendCatapult;
	 	 row.insertCell(26).innerHTML = addCommas(Catapult);
	     row.insertCell(27).innerHTML = '<a class="button20" id="tradecancel_' + queueId + '"><span>Delete</span></a>';
	     document.getElementById('tradecancel_' + queueId).addEventListener('click', function(){
	        t.cancelQueueElement(queueId);
	     }, false);
	 },
	 
	 _addTabHeader: function() {
	 var t = Tabs.transport;
	     var row = document.getElementById('pbRoutesQueue').insertRow(0);
	     row.vAlign = 'top';
	     row.insertCell(0).innerHTML = "ID";
	     row.insertCell(1).innerHTML = "From";
	     row.insertCell(2).innerHTML = "To";
	     row.insertCell(3).innerHTML = "Sup. Tr.";
	     row.insertCell(4).innerHTML = "";  
	     row.insertCell(5).innerHTML = "MM";
	     row.insertCell(6).innerHTML = "";
	 	 row.insertCell(7).innerHTML = "Scouts";
	     row.insertCell(8).innerHTML = "";
	     row.insertCell(9).innerHTML = "Pike";
	     row.insertCell(10).innerHTML = "";
	     row.insertCell(11).innerHTML = "Swords";
	     row.insertCell(12).innerHTML = "";
	     row.insertCell(13).innerHTML = "Archers";
	     row.insertCell(14).innerHTML = "";
	     row.insertCell(15).innerHTML = "Cav.";
	     row.insertCell(16).innerHTML = "";
	     row.insertCell(17).innerHTML = "HC";
	     row.insertCell(18).innerHTML = "";
	     row.insertCell(19).innerHTML = "Wagons";
	     row.insertCell(20).innerHTML = "";
	     row.insertCell(21).innerHTML = "Ballista";
	     row.insertCell(22).innerHTML = "";
	     row.insertCell(23).innerHTML = "Rams";
	     row.insertCell(24).innerHTML = "";
	     row.insertCell(25).innerHTML = "Catapults";
	     row.insertCell(26).innerHTML = "";
	     row.insertCell(27).innerHTML = "Delete";
	   },   
	   
	 cancelQueueElement: function(queueId){
	     var t = Tabs.Reassign;
	     var queueId = parseInt(queueId);
	     t.reassignRoutes.splice(queueId, 1);
	     t.showReassignRoutes();
	 },
	   
	saveReassignRoutes: function(){
		var t = Tabs.Reassign;
        var serverID = getServerId();
        GM_setValue('reassignRoutes_' + serverID, JSON2.stringify(t.reassignRoutes));
    },
    readReassignRoutes: function(){
        var t = Tabs.Reassign;
        var serverID = getServerId();
        s = GM_getValue('reassignRoutes_' + serverID);
        if (s != null) {
            route = JSON2.parse(s);
            for (k in route)
                t.reassignRoutes[k] = route[k];
        }
    },
	saveReassignState: function(){
		var t = Tabs.Reassign;
        var serverID = getServerId();
        GM_setValue('reassignState_' + serverID, JSON2.stringify(t.reassignState));
    },
    readReassignState: function(){
        var t = Tabs.Reassign;
        var serverID = getServerId();
        s = GM_getValue('reassignState_' + serverID);
        if (s != null) {
            state = JSON2.parse(s);
            for (k in state)
                t.reassignState[k] = state[k];
        }
    },
    toggleReassignState: function(obj){
		var t = Tabs.Reassign;
        if (t.reassignState.running == true) {
            t.reassignState.running = false;
            obj.value = "Reassign = OFF";
			t.checkdoreassigntimeout = null;
			t.count = 0;
        }
        else {
            t.reassignState.running = true;
            obj.value = "Reassign = ON";
			t.e_reassignRoutes();
        }
    },
	
	checkdoReassign: function(){
	var t = Tabs.Reassign;
	t.doReassign(t.count);
	t.count++;
		if(t.count < t.reassignRoutes.length && t.reassignState.running){
		  t.checkdoreassigntimeout = setTimeout(function() { t.checkdoReassign();}, 5000);
		} else {
		  var now = new Date().getTime()/1000.0;
		  now = now.toFixed(0);
		  Options.lastreassign = now;
		  saveOptions();	
		  t.count = 0;
		}
	},
    
    doReassign: function(count){
    	var t = Tabs.Reassign;
   		var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
   		if(t.reassignRoutes.length==0) return;
   		var send=[];
   		var citytotal=0;
   		var totalsend=0;
		params.u1 = 0;
		params.u2 = 0;
		params.u3 = 0;
		params.u4 = 0;
		params.u5 = 0;
		params.u6 = 0;
		params.u7 = 0;
		params.u8 = 0;
		params.u9 = 0;
		params.u10 = 0;
		params.u11 = 0;
		params.u12 = 0;	
				
   	 	var city = t.reassignRoutes[count]["city"];
   	 	var xcoord = t.reassignRoutes[count]["target_x"];
   	 	var ycoord = t.reassignRoutes[count]["target_y"];
    	
    	var cityID = 'city' + city;
		if(!Cities.byID[city]) return;
		var marching = getMarchInfo(cityID);
    	t.getRallypoint(cityID);
		if(t.rallypointlevel == 11) t.rallypointlevel = 15;
		else if(t.rallypointlevel == 12) t.rallypointlevel = 20;
    	var maxsend = (t.rallypointlevel * 10000);
    	totalsend=0;
    	
    	var troopsselect=["SupplyTroop","Militiaman","Scout","Pikeman","Swordsman","Archers","Cavalry","HeavyCavalry","SupplyWagons","Ballista","BatteringRam","Catapult"];
    	for (k=0; k<troopsselect.length; k++) {
			var citytroops = Seed.units[cityID]['unt'+(parseInt(k)+1)];
			var marchtroops = marching.marchUnits[parseInt(k)+1];
			citytotal = parseInt(citytroops) + parseInt(marchtroops);
			//alert(citytotal + ' > ' + t.reassignRoutes[count][troopsselect[k]] + ' - ' + totalsend + ' <= ' + maxsend + ' - ' + t.reassignRoutes[count]['Send'+troopsselect[k]]);
			//if(k== 5) GM_log(citytotal +'  ' + t.reassignRoutes[count][troopsselect[k]]);
			if(t.reassignRoutes[count]['Send'+troopsselect[k]]==false) {continue; }
			if(citytotal > t.reassignRoutes[count][troopsselect[k]]){
				var sendtroops = parseInt(citytotal) - parseInt(t.reassignRoutes[count][troopsselect[k]]);
				if (parseInt(sendtroops) > parseInt(citytroops)) sendtroops = citytroops;
				if (parseInt(sendtroops) < 0) sendtroops = 0;
				send[(parseInt(k)+1)] = sendtroops;
				totalsend += send[(parseInt(k)+1)];
				//alert(parseInt(k)+1 + ' - ' + citytotal+ ' : ' + troopsselect[k] + ' / ' + t.reassignRoutes[0][troopsselect[k]]);    			
				
			}
			if(totalsend > maxsend){
				totalsend -= send[(parseInt(k)+1)];
				send[(parseInt(k)+1)] = parseInt(maxsend-totalsend);
				totalsend += send[(parseInt(k)+1)];
				break;
			}
       	}
    	
    	for (var t=0; t< Seed.cities.length;t++) {
    		if ( parseInt(Seed.cities[t][0]) == city) var cityname = Seed.cities[t][1];
    	}
    	
  		params.cid= city;
		params.type = "5";
		params.kid=0;
		params.xcoord = xcoord;
		params.ycoord = ycoord;
		params.u1 = send[1];
		params.u2 = send[2];
		params.u3 = send[3];
		params.u4 = send[4];
		params.u5 = send[5];
		params.u6 = send[6];
		params.u7 = send[7];
		params.u8 = send[8];
		params.u9 = send[9];
		params.u10 = send[10];
		params.u11 = send[11];
		params.u12 = send[12];	
		
   		if (totalsend >0) {
           
      		new AjaxRequest(unsafeWindow.g_ajaxpath + "ajax/march.php" + unsafeWindow.g_ajaxsuffix, {
                  method: "post",
                  parameters: params,
                  loading: true,
                  onSuccess: function (transport) {
                  var rslt = eval("(" + transport.responseText + ")");
                  if (rslt.ok) {
                  actionLog('Reassign   From: '  + cityname + "   To: " + xcoord + ',' + ycoord + "    ->   Troops: " + totalsend);
                  var timediff = parseInt(rslt.eta) - parseInt(rslt.initTS);
                  var ut = unixTime();
                  var unitsarr=[0,0,0,0,0,0,0,0,0,0,0,0,0];
                  					for(i = 0; i <= unitsarr.length; i++){
                  						if(params["u"+i]){
                  								unitsarr[i] = params["u"+i];
                  						}
                  					}
                  var resources=[0,0,0,0,0,0,0,0,0,0,0,0,0];
                  var currentcityid = city;
                  unsafeWindow.attach_addoutgoingmarch(rslt.marchId, rslt.marchUnixTime, ut + timediff, params.xcoord, params.ycoord, unitsarr, params.type, params.kid, resources, rslt.tileId, rslt.tileType, rslt.tileLevel, currentcityid, true);
                  if(rslt.updateSeed){unsafeWindow.update_seed(rslt.updateSeed)};
                  } else {
                  actionLog('REASSIGN FAIL :' + cityname + ' - ' + rslt.error_code + ' -  ' + rslt.msg + ' -  ' + rslt.feedback);
                  //unsafeWindow.Modal.showAlert(printLocalError((rslt.error_code || null), (rslt.msg || null), (rslt.feedback || null)))
                  }
                  },
                  onFailure: function () {}
          });
   	 }      
	},
	
	show: function(){
		var t = Tabs.Reassign;
    },
	hide: function(){
        var t = Tabs.Reassign;
    },
    onUnload: function(){
        var t = Tabs.Reassign;
        if (!ResetAll) t.saveReassignRoutes();
		if (!ResetAll) t.saveReassignState();
        
    },
}
/****************************  Spam Tab  ******************************/
Tabs.Spam = {
  tabOrder : 28,                    // order to place tab in top bar
  tabLabel : 'Spam',            // label to show in main window tabs
  tabDisabled : !ENABLE_TEST_TAB,
  myDiv : null,
  timer : null,

  init : function (div){    // called once, upon script startup
    var t = Tabs.Spam;
    t.myDiv = div;
    var m = '<DIV class=pbStat>advertising</div><TABLE class=pbTab width=100% height=0% ><TR align="center">';

       if (Options.spamconfig.aspam == true) {
        m += '<TD><INPUT id=pbSpamEnable type=submit value="Spam On"></td>';
       }
       else {
        m += '<TD><INPUT id=pbSpamEnable type=submit value="Spam Off"></td>';
       }

       if (Options.spamconfig.spamstate == 'a') {
        m += '<TD><INPUT id=pbSpamState type=submit value="Send to Aliance"></td>';
       }
       else {
        m += '<TD><INPUT id=pbSpamState type=submit value="Send to Global "></td>';
       }
        m += '</tr></table></div>';
       m += '<DIV class=pbStat>configuration</div><TABLE class=pbTab>';
        m += '<tr><td>Automatically post all each <INPUT id=pbSpamMin type=text size=2 maxlength=3 value="'+ Options.spamconfig.spammins +'"  \> minutes</td></tr><BR>\
              <tr><TD><TABLE cellpadding=0 cellspacing=0>\
              <TD align=left>your Message: &nbsp; </td><TD><INPUT id=pbSpamAd type=text size=60 maxlength=500 value="'+ Options.spamconfig.spamvert +'" \></td></tr>\
              </table><BR>';

    t.myDiv.innerHTML = m;

    document.getElementById('pbSpamEnable').addEventListener ('click', function(){t.toggleon(this);}, false);
    document.getElementById('pbSpamAd').addEventListener ('change', t.e_spamOptChanged, false);
    document.getElementById('pbSpamMin').addEventListener ('change', t.e_spamOptChanged, false);
    document.getElementById('pbSpamState').addEventListener ('click', function(){t.togglespam(this);}, false);
 },

  hide : function (){         // called whenever the main window is hidden, or another tab is selected
    var t = Tabs.Spam;
  },

  show : function (){         // called whenever this tab is shown
    var t = Tabs.Spam;

  },

 e_spamOptChanged : function (){
  var t = Tabs.Spam;
  Options.spamconfig.spamvert = document.getElementById('pbSpamAd').value;
  Options.spamconfig.spammins = document.getElementById('pbSpamMin').value;
 },

 togglespam: function(obj){
  var t = Tabs.Spam;
  if (Options.spamconfig.spamstate == 'a') {
   Options.spamconfig.spamstate = 'g';
   obj.value = "send to Global ";
  }
  else {
   Options.spamconfig.spamstate = 'a';
   obj.value = "Send to Alliance";
  }
  saveOptions ();

 },

 toggleon: function(obj){
  var t = Tabs.Spam;
  if (Options.spamconfig.aspam == true) {
   Options.spamconfig.aspam = false;
   obj.value = "Spam Off";
  }
  else {
   Options.spamconfig.aspam = true;
   obj.value = "Spam On";
   SpamEvery.init();
  }
  saveOptions ();

 },
};

var SpamEvery  = {
  timer : null,
  init : function (){
    if (Options.spamconfig.spammins < 1)
      Options.spamconfig.spammins = 1;
    SpamEvery.setEnable (Options.spamconfig.aspam);
  },
  setEnable : function (tf){
    var t = SpamEvery;
    clearTimeout (t.timer);
    if (tf)
      t.timer = setTimeout (t.count, 60*1000);
  },
  count : function (){
   var t = SpamEvery;
   if (Options.spamconfig.atime > Options.spamconfig.spammins) {  
    Options.spamconfig.atime = 2;
    t.doit ();
   } else {
    Options.spamconfig.atime = (Options.spamconfig.atime + 1);
    SpamEvery.init ();
   }
  },
  doit : function (){
    actionLog ('Espameando ('+ Options.spamconfig.spammins +' minutos caducado)');
    sendChat ("/" + Options.spamconfig.spamstate + " " +  Options.spamconfig.spamvert);
    SpamEvery.init ();
  }
}

/************** ChatPane **********/
var ChatPane = {
  init : function(){
    var t = ChatPane;
	setInterval(t.HandleChatPane, 2500);
  },
  
  HandleChatPane : function() {
	var DisplayName = GetDisplayName();
	var AllianceChatBox=document.getElementById('mod_comm_list2');
	
	if(AllianceChatBox){
		var chatPosts = document.evaluate(".//div[contains(@class,'chatwrap')]", AllianceChatBox, null, XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE, null );
		if(chatPosts){
			for (var i = 0; i < chatPosts.snapshotLength; i++) {
				thisPost = chatPosts.snapshotItem(i);
				if(Options.HelpRequest){
					var postAuthor = document.evaluate('.//*[@class="nm"]', thisPost, null, XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE, null );
					if(postAuthor.snapshotItem(0)){
						var postAuthorName = postAuthor.snapshotItem(0).innerHTML;
						if(postAuthorName != DisplayName){
							var helpAllianceLinks=document.evaluate(".//a[contains(@onclick,'claimAllianceChatHelp')]", thisPost, null, XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE, null );  
							if(helpAllianceLinks){
								for (var j = 0; j < helpAllianceLinks.snapshotLength; j++) {
									thisLink = helpAllianceLinks.snapshotItem(j);
									var alreadyClicked = thisLink.getAttribute("clicked");
									if(!alreadyClicked){
										thisLink.setAttribute('clicked', 'true');
										var myregexp = /(claimAllianceChatHelp\(.*\);)/;
										var match = myregexp.exec(thisLink.getAttribute("onclick"));
										
										if (match != null) {
											onclickCode = match[0];
											if(true){
												DoUnsafeWindow(onclickCode);
											}
										}
									}
								}
							}
						}
					}
				}
				// Hide alliance requests in chat
				if(Options.DeleteRequest){
					var helpAllianceLinks=document.evaluate(".//a[contains(@onclick,'claimAllianceChatHelp')]", thisPost, null, XPathResult.UNORDERED_NODE_SNAPSHOT_TYPE, null );
					if(helpAllianceLinks){
						for (var j = 0; j < helpAllianceLinks.snapshotLength; j++) {
							thisLink = helpAllianceLinks.snapshotItem(j);
							thisLink.parentNode.parentNode.parentNode.parentNode.parentNode.removeChild(thisLink.parentNode.parentNode.parentNode.parentNode);
						}
					}
				// Hide alliance reports in chat
					var myregexp1 = /You are # [0-9]+ of 10 to help/i;
					var myregexp2 = /\'s Kingdom does not need help\./i;
					var myregexp3 = /\'s project has already been completed\./i;
					var myregexp4 = /\'s project has received the maximum amount of help\./i;
					var myregexp5 = /You already helped with (.*?)\'s project\./i;
					if (thisPost.innerHTML.match(myregexp1) || thisPost.innerHTML.match(myregexp2) || thisPost.innerHTML.match(myregexp3) || thisPost.innerHTML.match(myregexp4) || thisPost.innerHTML.match(myregexp5)) {
						thisPost.parentNode.removeChild(thisPost);
					}
				}
			}	
		}	
	}
  },

}

/******************* Throne Savlager **********************/

Tabs.throneSalvage = {
	tabOrder    : 200,
    tabLabel    : 'Salvage',
    tabDisabled : false,
	myDiv    : null,
	timer    : null,
	city     : null,
	cityNum  : 0,
	delItems        : [],
	rowNum   : 0,
	sTimer : null,

    init : function (div) {
       var t = Tabs.throneSalvage;
       t.myDiv = div;
       var m = '<Div><DIV id=trSalvage class=trStat>AUTOMATED SALVAGE</div>';
       m += "<div id='trInfoArea'>";
       m += '</div>';
       m += '<TABLE id=trupgrader width =100% height=0% class=trTab style="padding-left: 20px;">';
       if (salvageData.salvageActive == false) {
	       m += '<tr><TD><div><INPUT id=trSalvagerPower type=submit value="Salvager = OFF"/></div></td>';
	   } else {
	       m += '<tr><TD><div><INPUT id=trSalvagerPower type=submit value="Salvager = ON"/></div></td>';
	   }
       m += '<td><b> City to put aetherstones: </b></td>';
       m += "<td><div id='trSalvageCity'></td><td></td></tr>";
       
       m += '<tr><td><div> Always keep: <select id="trSalvageQuality">';
       m += '<option value="1">Common</option>';
       m += '<option value="2">Uncommon</option>';
       m += '<option value="3">Rare</option>';
       m += '<option value="4">Epic</option>';
       m += '<option value="5">Wondrous</option>';
       m += '</select> and higher</div></td>';
       
       m += '<td>Keep the first <INPUT id=trSaveNum type=text size=3 maxlength=3 value="' + salvageData.throneSaveNum+ '"/> items</td>';
       m += '<td><div><INPUT id=trSalAnyCity type=checkbox '+ (salvageData.anyCity?' CHECKED':'') +'/> When full put stones in any city</div></td>';
       
       m += "</tr></table><hr>";
       
       m += "<div id='trRulesCreate' class='trRuleCreate'>";
       
       //  rules definition
 	   m += '<TABLE width=100% class=trTabPad style="padding-left: 10px;">';
 	   m += '<tr><td>  <b>Define the TR items to keep: </b> </td>';
 	   
 	   m += '<td alight="left"><div><span>Faction: <select id="trFactionType">';
 	   m += '  <option value="any">Any</option>';
 	   m += '  <option value="fey">Fey</option>';
 	   m += '  <option value="briton">Briton</option>';
 	   m += '  <option value="druid">Druid</option>';
       m += '</select></span></div></td>';
 	   m += '<td alight="left"><div><span>Card type: <select id="trCardType">';
 	   m += '  <option value="any">Any</option>';
 	   m += '  <option value="chair">Chair</option>';
 	   m += '  <option value="table">Table</option>';
 	   m += '  <option value="window">Window</option>';
 	   m += '  <option value="banner">Banner</option>';
 	   m += '  <option value="advisor">Advisor</option>';
 	   m += '  <option value="trophy">Trophy</option>';
       m += '</select></span></div></td>';
       m += '<td align="right"><INPUT id=trAddRule type=submit value="Create Rule"/></td>';
       m += '</tr></table>';
       m += '<TABLE  class=trTabPad width=100% id="trConditionTable"  style="padding-left: 5px;">';
       m += '<tr><td align=left colspan=1><INPUT id=trAddRow type=submit value="Add Row"/></td>';
       m += '<td></td><td></td><td></td><td></td><td></td></tr>';
       m += '</table>';
       m += '</div><hr/>';
       m += '<div id="trSalvStatus" style="text-align: center;" >Loading ... </div><hr/>';
       m += '<div class=trRulePane>';
       m += '<div align=center> <b> Salvager will keep items matching any of these rules </b></div><hr/>'; 
       m += "<div id='trRuleDisplay' style='width: 740px; max-height:350px; height:250px; overflow-x: auto; overflow-y:scroll;'>";
       m += '</div></div>';
       t.myDiv.innerHTML = m;
       new CdispCityPicker ('trcitysel', document.getElementById('trSalvageCity'), true, t.e_CityButton, upgradeData.sCityNum);
       t.createRow();
       t.buildRuleDisplay();
        
       document.getElementById('trSaveNum').addEventListener('change', function(){
		  salvageData.throneSaveNum = parseInt(document.getElementById('trSaveNum').value);
		  if (upgradeData.retryInterval < 0) salvageData.throneSaveNum = 0;
		  saveSalvageData();
	    }, false);    
       document.getElementById ('trSalvageQuality').addEventListener ('click', function() {t.setSalvageLevel(this.value);}, false);
       document.getElementById ('trSalvageQuality').value = salvageData.minQuality;
       
       document.getElementById ('trAddRow').addEventListener ('click', function() {t.createRow();}, false);
       document.getElementById ('trAddRule').addEventListener ('click', function() {t.createRule();}, false);
       
       document.getElementById('trSalAnyCity').addEventListener('change', function(){
		  salvageData.anyCity = document.getElementById('trSalAnyCity').checked;
		  saveSalvageData();
	    }, false); 
       
       t.start();       
   },
   
   createRow : function()
   {
	   var t = Tabs.throneSalvage;
       var table = document.getElementById('trConditionTable');
       var rowCount = table.rows.length;
       var row = table.insertRow(rowCount-1);
       var rowId = "r" + t.rowNum;
       t.rowNum++;
       row.id = rowId;
       
       var h  = "<td> <select id='" + rowId + "sel1'> <option value='true'> </option> <option value='false'>NOT</option></select></td>";
           h += "<td> <select id='" + rowId + "sel2'>";
           h += "  <option value='1'>1x</option>";
           h += "  <option value='2'>2x</option>";
           h += "  <option value='3'>3x</option>";
           h += "  <option value='4'>4x</option>";
           h += "  <option value='5'>5x</option>";
           h += "</select></td>";
           h += "<td> <select id='" + rowId + "sel3'>";
           h += "</select></td>";
           h += "<td> <select id='" + rowId + "sel4'>";
           h += "  <option value='e'>Either</option>";
           h += "  <option value='b'>Buff</option>";
           h += "  <option value='d'>Debuff</option>";
           h += "</select></td>";
           
           h += "<td> Slots: ";
           h += "  <input type=checkbox value='1' checked=true id='" + rowId + "slot1'/>1";
           h += "  <input type=checkbox value='2' checked=true id='" + rowId + "slot2'/>2";
           h += "  <input type=checkbox value='3' checked=true id='" + rowId + "slot3'/>3";
           h += "  <input type=checkbox value='4' checked=true id='" + rowId + "slot4'/>4";
           h += "  <input type=checkbox value='5' checked=true id='" + rowId + "slot5'/>5";
           h += "</td>";
           
       row.innerHTML = h;
       
       var effects = [];
       
       for (e in CM.thronestats.effects)
       {
           var effectName = CM.thronestats.effects[e][1].split(" Debuff")[0];
           if (effects.indexOf(effectName) < 0) effects.push(effectName); 
       }
       
       var select = document.getElementById(rowId + "sel3");
       for(index in effects) {
         select.options.add(new Option(effects[index], effects[index]));
       }
              
       var c = row.insertCell(5);
       var btn = document.createElement("input");
       btn.type = "submit";
       btn.value = "X";
       btn.onclick = function () { t.removeRow(row);};
       c.appendChild(btn);
   },
   
   setSalvageLevel : function(level)
   {
       salvageData.minQuality = level;
       saveSalvageData();
   },
   
   pickCity : function () {
	  var t = Tabs.throneSalvage;
	  var cid = upgradeData.sCityNum;
	  if ( Seed.resources["city" + Seed.cities[cid][0]]["rec5"][0] <= salvageData.maxStones) return cid;
	  
	  if (salvageData.anyCity)
	  {
	    for (i= 0; i < Seed.cities.length; i++)
	    {
		  if ( Seed.resources["city" + Seed.cities[i][0]]["rec5"][0] <= salvageData.maxStones) return i;
	    }
      }
	  return -1;
  },
   
   createRule : function()
   {
	   var t = Tabs.throneSalvage;
	   t.readRows();
	   t.buildRuleDisplay();
   },
   
   buildRuleDisplay : function ()
   {
	   var t = Tabs.throneSalvage;
	   var rd = document.getElementById('trRuleDisplay');
	   
	   var m = '<TABLE  width=100% class="trTabPad">';
	   
	   for (i =0; i < salvageData.ruleSet.length; i++)
	   {
		   var rule = salvageData.ruleSet[i];
		   
		   m += '<tr>';
		   m += "<td width=90%><div class='trRule'>";
		   
		   m += "Type: " + rule.type;
		   m += " Faction: " + rule.faction;
		   
		   for (ii = 0; ii < rule.conditions.length; ii++)
		   {
			  var condition = rule.conditions[ii];
			  
			  if (ii ==0 )
			     m += "<br> Item";
			  else
			     m += "<br> <u>and</u>";
			     
		      if (condition.mustHave)
		        m += " must have ";
		      else
		        m += " must NOT have ";
		     
		      m += condition.number + "x ";		   
		      m += condition.effect + " ";
		   
		      if (condition.buffType == "b")
		         m += "buff ";
		      else if (condition.buffType == "d")
		        m += "debuff ";
		      else
		        m += "buff or debuff ";
		   
		      m += " in slot(s): ";
		   
		      for (j = 0; j < condition.slots.length; j++)
		      {
			     if (condition.slots[j] ) m += (j+1) + " ";   
		      }
		      
	       }
	       m += "</div></td>";
	       m += "<td width=20%><INPUT id=trDelRule" + i + " type=submit value='Delete Rule' /></td>";
		   m += '</tr>';
	   }
	   
	   rd.innerHTML = m;
	   
	   for (var j=0; j < salvageData.ruleSet.length; j++)
	   {
    	   document.getElementById('trDelRule' +j).v1 = j;
		   document.getElementById('trDelRule' +j).addEventListener ('click', function() { t.deleteRule(this.v1)}, false);
       }
       
       document.getElementById('trSalvagerPower').addEventListener('click', function(){t.togglePower(this)} , false);
	   
   },
   
   updateTRTab : function() {
     // this may or may not be present
     var tab = document.getElementById('trexecsalvage');
     if (tab)
	 {
         tab.innerHTML = "Salvage " + (salvageData.salvageActive ? "ON" : "OFF"); 
     } 
   },
   
   
   	togglePower: function(obj){
	  var t = Tabs.throneSalvage;
	  if (salvageData.salvageActive == true) {
    	var btn = document.getElementById('trSalvagerPower');
		salvageData.salvageActive = false;
		btn.value = "Salvager = OFF";
		clearInterval(t.sTimer);	
	 } else {
		salvageData.salvageActive = true;
		var btn = document.getElementById('trSalvagerPower');
		btn.value = "Salvager = ON";
		t.doSalvage();
		t.start();
	 }
	 t.updateTRTab();

	 saveSalvageData();
  },
   
   // delete a rule from the ruleset
   deleteRule : function(i)
   {
	   var t = Tabs.throneSalvage;
	   salvageData.ruleSet.splice(i,1);
	   saveSalvageData();
	   t.buildRuleDisplay();
   },
   
   readRows : function()
   {	   
	   var t = Tabs.throneSalvage;
       var table = document.getElementById('trConditionTable');
       var rowCount = table.rows.length;
       
       var cType = document.getElementById('trCardType').value;
       var faction = document.getElementById('trFactionType').value;
             
       var conditions = [];
       for (i=0; i < table.rows.length; i++)
       {
	      var row = table.rows[i];
	      if (row.id)
	      {
	         var s1 = document.getElementById(row.id + "sel1");
	         var s2 = document.getElementById(row.id + "sel2");
	         var s3 = document.getElementById(row.id + "sel3");
	         var s4 = document.getElementById(row.id + "sel4");
	         
	         var slots = [];
	         for (j =1; j <= 5; j++)
	         {
		         var ch = document.getElementById(row.id + "slot" + j);
		         slots.push(ch.checked);
             }
             
             var c = new Condition(s1.value, s2.value, s3.value, s4.value, slots );
             conditions.push(c);
          }
       }
       var rule1 = new Rule(cType, faction, conditions);
       t.addRule(rule1);
   },
   
   removeRow : function(row)
   {
       var table = document.getElementById('trConditionTable');
	   
	   for (i=0; i < table.rows.length  ; i++ )
	   {
		   if (table.rows[i] == row)
		   {
			   table.deleteRow(i);
			   break;
		   }
       }
   },

   // add a new rule
   addRule : function(rule)
   {
	   salvageData.ruleSet.push(rule);
	   saveSalvageData();
   },

   // callback for when salvage city is changed
    e_CityButton : function (city, x, y){
      var t = Tabs.throneSalvage;
	  upgradeData.sCityNum = city.idx;
	  saveUpgradeData();
    },

	start : function(){
		var t = Tabs.throneSalvage;
		if(salvageData.salvageActive) {
			t.sTimer = setInterval(t.doSalvage, 1*30*1000);
		}
	},

	// do the actual discard of TR items
	doSalvage : function() {
	    var t = Tabs.throneSalvage;
	    if(!salvageData.salvageActive) {
			return;
		}

		if (t.deleting == true) return;
		t.deleting = true;
		t.setStatus('Salvaging items');

		t.delItems = t.buildList(false);

		if (t.delItems.length > 0) {
			t.doDelete();
		} else {
    		t.deleting = false;
    		t.setStatus('No items to salvage.  Waiting for next cycle.');
		}
	},

	// Create the list of items to delete.
	// If 'test' is set to true, then broken/equipted items are included.
    buildList : function(test){
		var t = Tabs.throneSalvage;

        var throneSaveNum = salvageData.throneSaveNum;
        var countItem = 0;
		var retList = [];

		for (k in unsafeWindow.kocThroneItems) {
			var throne_item = unsafeWindow.kocThroneItems[k];
			countItem++;

			// ignore these things 
			if (throne_item.level !=0) continue;
			
			// in test mode, include these items
			// These items are at risk if they are repaired or unequiped.
			if (test != true)
			{
		 	  if (throne_item.isEquipped) continue;
			  if (throne_item.isBroken) continue;
		    }

			// keep the first X items
			if ( countItem <= throneSaveNum) continue;

			// keep things w/ at least minQuality
            if (throne_item.quality >= salvageData.minQuality) continue;

            // check the rules
            if (t.applyRules(throne_item.id)) continue;

            // passes all tests
            retList.push(throne_item.id);
        }
        return retList;
    },
    
    setStatus : function(msg)
    {
        document.getElementById('trSalvStatus').innerHTML = msg;
    },

    // returns true if the item should be saved and not salvaged
    applyRules : function(id) {
	    var t = Tabs.throneSalvage;
	    for (r in salvageData.ruleSet)
	    {
		   var rule = salvageData.ruleSet[r];
		   if ( rule.applyRule(id)) return true;    
	    }
	    return false;
    },
        
    doDelete : function(){
        
	    if(!salvageData.salvageActive) {
			return;
		}
		var t = Tabs.throneSalvage;
		var id = t.delItems[0];
		var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
		
		
	    var num_city = t.pickCity();
		if ( num_city < 0)
		{
		   t.setStatus("All cities are (nearly) full of aetherstone");
		   num_city = upgradeData.sCityNum;
		}
		
		t.setStatus('Salvaging ' + unsafeWindow.kocThroneItems[id].name); 
		
		params.ctrl = 'throneRoom\\ThroneRoomServiceAjax';
		params.action = 'salvage';
		params.itemId = id;
		params.cityId = Seed.cities[num_city][0];
      	new AjaxRequest(unsafeWindow.g_ajaxpath + "ajax/_dispatch53.php" + unsafeWindow.g_ajaxsuffix, {
			method: "post",
			parameters: params,
			loading: true,
			onSuccess: function (transport) {
				var rslt = eval("(" + transport.responseText + ")");
				var throne_item = unsafeWindow.kocThroneItems[id];
				if(rslt.ok) {
					actionLog('Deleted Throne room item '+ throne_item.name);
					salvageData.numSalvagedItems++;
					saveSalvageData();
					
					// temporarily set the city id
					var tmp = unsafeWindow.currentcityid;
					unsafeWindow.currentcityid = Seed.cities[num_city][0];
					unsafeWindow.kocThroneItems[id].salvage();
					unsafeWindow.currentcityid = tmp;
				}
				else
				{
					logit("salvage failed");
					logit("rslt: " + inspect(rslt,3,1));
					t.setStatus('Unable to salvage item ' + throne_item.name);
				}
				
				var idx = t.delItems.indexOf(id);
				if (idx >=0)
				{
				  t.delItems.splice(idx,1); //Remove item from array regardless of success. Catch on next refresh
			    }
				if (t.delItems.length > 0) { //Check if the array is empty
					setTimeout (t.doDelete, 600);
				} else {
					t.deleting = false;
					t.setStatus('Salvaging complete.  Waiting for next cycle.');
			    	return;
				}
			},
			onFailure: function () {
					t.delIems = [];
					t.deleting = false;
					logit("salvage failed for item " + unsafeWindow.kocThroneItems[id].name );
					//unsafeWindow.update_seed_ajax(false, function() {unsafeWindow.cm.ThroneView.renderInventory(unsafeWindow.kocThroneItems);});
					//unsafeWindow.createThroneItems();
					//unsafeWindow.cm.ThroneView.renderInventory(unsafeWindow.kocThroneItems);
					return;
			},
		});
	},
	
	show: function(){
	},
	
	hide: function(){
	},	
}

// class definition for rules and conditions
function Rule(type, faction, conditions)
{
	this.type = type;
	this.faction = faction;
	if (conditions)
	  this.conditions = conditions;
	else
	  this.conditions = [];
 
	this.addCondition = addCondition;
	this.applyRule    = applyRule;
}

function cloneRule( rule)
{
   this.type = rule.type;
   this.faction = rule.faction;
   this.conditions = [];
   if (rule.conditions) this.conditions = rule.conditions;
   
   this.addCondition = addCondition; 
   this.applyRule    = applyRule;  
}

function addCondition(c)
{
   this.conditions.push(c);	
}

function applyRule(id)
{
	var throne_item = unsafeWindow.kocThroneItems[id];
	
	if (this.type != "any" && (this.type != throne_item.type)) return false;
	if (this.faction != "any" && (this.faction != throne_item.faction)) return false;
	for (r in this.conditions)
	{
		if (!this.conditions[r].checkCondition(id)) return false;
	}
	return true;
}

function Condition(mustHave, number, effect, buffType, slots )
{
	this.mustHave = mustHave;
	this.number   = number;
	this.effect   = effect;
	this.buffType = buffType;
	this.slots    = slots;

	this.checkCondition = checkCondition;
}

function checkCondition(id)
{
   var numberFound  = 0;
   var effectsFound = false;
	// get card
	var throne_item = unsafeWindow.kocThroneItems[id];
	
	if (!throne_item) return false;
	
	// for loop for stat
	//    count up occurances
	for (i in throne_item.effects)
	{
    	var card_effect = CM.thronestats.effects[throne_item.effects[i].id][1];
		var slotid = i.split("slot")[1];
		
		if (!this.slots[slotid-1])
		{
    	   continue;
		}
		
		if ( (this.buffType == "e" || this.buffType == "b") && card_effect == this.effect)
		{
    	   numberFound++;
		}
		
		if ( (this.buffType == "e" || this.buffType == "d") && card_effect == (this.effect + " Debuff"))
		{
    	   numberFound++;
		}
	}
	
	if ( numberFound >= this.number)
	{
	   effectsFound = true;
    }

    if (this.mustHave)
      return effectsFound;
    else
      return (!effectsFound);
}


/******************* Apothecary Tab **********************/
Tabs.Apothecary = {
  tabOrder : 50,                    // order to place tab in top bar
  tabDisabled : false, // if true, tab will not be added or initialized
  tabLabel : "Apothecary",            // label to show in main window tabs
  cities : [],
  pop : null,
  pop2 : null,
  myDiv : null,
  timer : null,
  
  init : function (div){    // called once, upon script startup
    var t = Tabs.Apothecary;
    t.myDiv = div;
    unsafeWindow.BOAPO = t.display_action;
    var m = '<DIV class=pbStat >Apothecary</div><table width=100% height=0% class=pbTab><tr align=center >';
    m += '<td><input type=submit id=pbapothecary_power value="Auto Heal = '+(ApothecaryOptions.Active?'ON':'OFF')+'" /></td>\
          <td><input type=submit id=pbapothecary_show value="Show" /></td></tr></table>';
	m += '<DIV class=pbStat id=pbapothecary_options >OPTIONS</div></div><table></tr>\
	      <td>Keep Gold : <INPUT type=text id="pbapothecary_gold" size=6 value='+ApothecaryOptions.goldkeep+' /></td>\
		  <td colspan=4><span id="pbapothecary_citysel"></span></td></tr><tr>\
		  <td>'+uW.g_js_strings.commonstr.troops+' : <SELECT id="pbapothecary_troops"><option value=0>--Select--</options>';
	for (y in unsafeWindow.unitcost)
		m += '<option value="'+y.substr(3)+'">'+unsafeWindow.unitcost[y][0]+'</option>';
    m += '</select></td>\
		  <td>Min.: <INPUT id=pbapothecary_min type=text size=4 \></td>\
		  <td><INPUT type=checkbox id=pbapothecary_maxcheck /> Max.: <INPUT id=pbapothecary_max type=text size=4 DISABLED \></td>\
		  <td><INPUT type=submit id=pbapothecary_save value="Add" /></td>';
	m += '</tr></table><br>';
	
	m +="<DIV class=pbStat>wounded troops</div><br><span id=boapostat></span>";
    div.innerHTML = m;
    
     for (var cid in Cities.byID){
    		var city = 'city'+cid;
    		var x = Cities.byID[cid].idx;
    		t.cities[x] = true;
    		for (var y in Seed.buildings[city]) {
        		if (Seed.buildings[city][y][0] == 21){
    				t.cities[x] = false;
    				continue;
    			}
        		}
    	}
	t.citysel = new CdispCityPicker('BOapo_sel', ById("pbapothecary_citysel"), true, null, 0, t.cities);
    
    ById("pbapothecary_gold").addEventListener('change', function(){
		ApothecaryOptions.goldkeep = parseIntNan(this.value);
	},false);
    ById("pbapothecary_maxcheck").addEventListener('click', function(){
		ById("pbapothecary_max").disabled = !(ById("pbapothecary_maxcheck").checked);
	},false);
    ById("pbapothecary_save").addEventListener('click', function(){
		t.e_addqueue();
	},false);
	ById("pbapothecary_power").addEventListener('click', function(){
		t.e_toggleswitch(this);
	},false);
	ById("pbapothecary_show").addEventListener('click', function(){
		t.e_displayarray();
	},false);
     
	t.timer = setTimeout(t.loop,15000);
	t.displayStat();
  },
  displayStat: function() {
   var t = Tabs.Apothecary;
   var m="<table width=98% align=center  class=pbTab><tr><td>&nbsp;</td>";
	 for(var i=0; i<Cities.numCities; i++) {
    	  var cityID = 'city'+ Cities.cities[i].id;
    	         m += "<TD width=80><SPAN class=oohfancy>"+ Cities.cities[i].name.substring(0,10) +"</SPAN></td>";
   
    	  }
    	  m+="</tr>";
    	  var unitwounded = Seed.woundedUnits;
	  for (var r=1; r<13; r++){
	      m+='<tr><td><img height=18 title="'+unsafeWindow.unitcost['unt'+r][0]+'" src=http://cdn1.kingdomsofcamelot.com/fb/e2/src/img/units/unit_'+r+'_30_s34.jpg></td>';
	   
	   for(i=0; i<Cities.numCities; i++) {
	     if (unitwounded) {
	      var a=unitwounded["city"+Cities.cities[i].id];
	      if (a) {
	     
	       var nbunit=parseIntNan(a["unt"+r]);
	      }
	      
	     }
	     m+="<td>"+addCommas(nbunit)+"</td>";
	     
	     
	   }
	
	   m+="</tr>";
	 }
	     // Reviving
	             m +='<TR><TD style="font-size:6px"><BR></td></tr><tr><td><img src="'+URL_HOSPITAL+'"></b></td>';
	             for(i=0; i<Cities.numCities; i++) {
	              var totTime = 0;
	              var ah=Seed.queue_revive["city" + Cities.cities[i].id];
	              var l=0;
	              if (ah) {
	               for(var an=0;an<Math.min(ah.length,1);an++){
	                  var P=uW.unixtime();
	                  l=parseInt(ah[an][3])-P;
	               }
	               var totTime = 0;
	               totTime = parseIntNan(l);
	               if (totTime < 0)
	                 totTime = 0;
	                 affuichage = timestr(totTime);
	               
	               m +="<td><span>"+ affuichage + "</span></td>";  
	        
	              } else {
	              affuichage = timestr(totTime);
	                 
	              m +="<td><span>"+affuichage+"</span></td>";
	              }
	             }    
             m +="</tr>"; 
	m+="</table>";
     ById("boapostat").innerHTML=m;
  },
  
  e_addqueue : function (){
    var t = Tabs.Apothecary;
    var city = t.citysel.city.idx;
	var troopsel = ById("pbapothecary_troops").value;
	var min = parseIntNan(ById("pbapothecary_min").value);
	var max = parseIntNan(ById("pbapothecary_max").value);
	var max_sel = ById("pbapothecary_maxcheck").checked;
	try {
		if((troopsel < 1 || min < 1) || (max_sel && max < 1) || (max_sel && (max < min)))
			throw "Incomplete/Invalid Input!";
		ApothecaryOptions.city[city].push({troop:troopsel,min:min,max:max,max_sel:max_sel});
		saveApothecaryOptions();
		ById('pbapothecary_options').style.background ='#99FF99';
		setTimeout(function(){ (ById('pbapothecary_options').style.background =''); }, 1000);
	} catch (e){
		ById('pbapothecary_options').style.background ='#FF0000';
		setTimeout(function(){ (ById('pbapothecary_options').style.background =''); }, 1000);
	}
  },
  
  e_displayarray : function(){
    var t = Tabs.Apothecary;
    if(t.pop == null)
	t.pop = new CPopup('pbapothecary_pop',290,40,400,500,true,function(){t.pop.destroy(); t.pop = null;});
	t.pop.getTopDiv().innerHTML = '<div class=showBadged><center>>Auto Heal Array</center></div>';
	var m = '<div style="max-height:380px; height:380px; overflow-y:auto"><table><tr>';
	for (var city in ApothecaryOptions.city){
		if(!Cities.cities[city] || ApothecaryOptions.city[city].length < 1) continue;
		m += '<td colspan=2><b>'+Cities.cities[city].name+'</b></td>\
			  <td>Minimo</td><td>Maximo</td><tr>';
		for(var i=0; i<ApothecaryOptions.city[city].length; i++){
			var info = ApothecaryOptions.city[city][i];
			m += '<td>'+(i+1)+'</td><td>'+unsafeWindow.unitcost['unt'+info.troop][0]+'</td>\
				  <td>'+info.min+'</td><td>'+info.max+'</td><td>'+strButton20('Edit','title="Apothecary edit" onclick="BOAPO(this,'+i+','+city+')"')+'</td><td>'+strButton20('Delete','title="Apothecary delete" onclick="BOAPO(this,'+i+','+city+')"')+'</td>';
			m += '</tr><tr>';
		}
		m += '</tr><tr>';
	}
	t.pop.getMainDiv().innerHTML = m + "</table></div>";
	
	t.pop.show(true);
  },
  
  display_action : function(obj,id,city){
    var t = Tabs.Apothecary;
	var evt = null;
	if(obj.title.indexOf("edit") > 0)
		evt = "edit";
	if(obj.title.indexOf("delete") > 0)
		evt = "delete";
	if(evt == null || id == null) return;
	if(evt == "delete"){
		ApothecaryOptions.city[city].splice(id,1);
	}
	if(evt == "edit"){
		t.display_edit(id,city);
	}
	saveApothecaryOptions();
	t.e_displayarray();
  },
  
  display_edit : function(id, city){
	var t = Tabs.Apothecary;
    if(t.pop2 == null)
	t.pop2 = new CPopup('pbapodisp_pop',50,40,300,155,true,function(){t.pop2.destroy(); t.pop2 = null;});
        t.pop2.getTopDiv().innerHTML = '<div class=showBadged><center>Edit</center></div>'; 
	var m = '<table><tr><td><b>'+Cities.cities[city].name+'</b></td></tr>';
	var info = ApothecaryOptions.city[city][id];
	m += '<tr><td>'+uW.g_js_strings.commonstr.troops+' : </td><td>'+uW.unitcost['unt'+info.troop][0]+'</td></tr>\
		  <tr><td>Minimo: </td><td><INPUT id=pbapodisp_min type=text size=4 value="'+info.min+'" \>\
		  <tr><td><INPUT type=checkbox id=pbapodisp_maxcheck '+(info.max_sel?'CHECKED':'')+' /> Max: </td><td><INPUT id=pbapodisp_max type=text size=4 value="'+info.max+'" '+(info.max_sel?'':'DISABLED')+' \></td></tr>\
		  <tr><td><INPUT type=submit id=pbapodisp_save value='+uW.g_js_strings.commonstr.save+' /></td></tr>';
	t.pop2.getMainDiv().innerHTML = m;
	t.pop2.show(true);
	ById('pbapodisp_save').addEventListener('click', function(){
		var min = parseIntNan(ById("pbapodisp_min").value);
		var max = parseIntNan(ById("pbapodisp_max").value);
		var max_sel = ById("pbapodisp_maxcheck").checked;
		if(min < 1 || (max_sel && max < 1) || (max_sel && (max < min))){
			alert("Invalid/Incorrect input!");
			return;
		}
		info.min = min;
		info.max = max;
		info.max_sel = max_sel;
		saveApothecaryOptions();
		t.pop2.show(false);
		t.e_displayarray();
	},false);
  },
  
  loop : function(){
    var t = Tabs.Apothecary;
    clearTimeout(t.timer);
    if(!ApothecaryOptions.Active) return;
    for (var city in ApothecaryOptions.city){
		if(!Cities.cities[city] || ApothecaryOptions.city[city].length < 1) continue;
		if(t.cities[city]) continue; //Skip if Apothecary doesn't exist
		if(Seed.queue_revive['city'+Cities.cities[city].id].length > 0) continue; 
		if(Seed.citystats["city" + Cities.cities[city].id].gold[0] < parseInt(ApothecaryOptions.goldkeep)) continue; 
		for(var i=0; i<ApothecaryOptions.city[city].length; i++){
			var info = ApothecaryOptions.city[city][i];
			var cid = Cities.cities[city].id;
			var amt = 0;
			if(Seed.woundedUnits['city'+cid]['unt'+info.troop] < info.min) continue;
			if(Seed.woundedUnits['city'+cid]['unt'+info.troop] > info.max && info.max_sel){
				amt = info.max;
			} else {
				amt = Seed.woundedUnits['city'+cid]['unt'+info.troop];
			}
			if(cid > 0 && info.troop > 0 && amt > 0){
				t.do_revive(cid,info.troop,amt);
				break;
			}
		}
	}
	t.timer = setTimeout(t.loop, 10000);
  },
  
  e_toggleswitch : function(obj){
    var t = Tabs.Apothecary;
	if(ApothecaryOptions.Active){
		obj.value = "Auto Heal = OFF";
		ApothecaryOptions.Active = false;
		clearTimeout(t.timer);
	} else {
		obj.value = "Auto Heal = ON";
		ApothecaryOptions.Active = true;
		t.timer = setTimeout(t.loop,5000);
	}
	saveApothecaryOptions();
  },
  
  do_revive : function(currentcityid,unitId,num,notify){
    var t = Tabs.Apothecary;
	var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
	params.cid = currentcityid;
    params.type = unitId;
    params.quant = num;
    params.apothecary = true;
	var time = unsafeWindow.cm.RevivalModel.getRevivalStats(unitId, num).time;

	new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/train.php" + unsafeWindow.g_ajaxsuffix, {
		method: "post",
		parameters: params,
		onSuccess: function(rslt) {
		  if (rslt.ok) {
			for (var i = 1; i < 5; i++) {
				var resourceLost = parseInt(unsafeWindow.unitcost["unt" + unitId][i]) * 3600 * parseInt(num);
				if(rslt.gamble) resourceLost = resourceLost*rslt.gamble[i];
				unsafeWindow.seed.resources["city" + currentcityid]["rec" + i][0] = parseInt(unsafeWindow.seed.resources["city" + currentcityid]["rec" + i][0]) - resourceLost;
			}
			if (!rslt.initTS) {
				rslt.initTS = unixTime() - 1;
			}
			Seed.queue_revive["city" + currentcityid].push([unitId, num, rslt.initTS, parseInt(rslt.initTS) + time, 0, time, null]);
			var cost = unsafeWindow.cm.RevivalModel.getRevivalStats(unitId, num).cost;
			Seed.citystats["city" + currentcityid].gold[0] -= parseInt(cost);
			unsafeWindow.update_gold();
			unsafeWindow.cm.WoundedModel.sub(unitId, num);
		  } else {
			
		  }
		},
	});
  },
  
  hide : function (){
    var t = Tabs.Apothecary;
    clearInterval(t.timerStat);
  },
  
  show : function (){
    var t = Tabs.Apothecary;
    t.timerStat = setInterval(t.displayStat,10000);
  },
}


/********************************       TABS FARM      *******************************************/
 
Tabs.farm = {
	tabLabel: "FARM ",
	tabDisabled : !ENABLE_TEST_TAB,
	tabOrder : 52,
	myDiv : null,
	MapAjax : new CMapAjax(),
	popFirst : true,
	opt : {},
	nextattack : null,
	updateSeedTimer: null,
	searchRunning : false,
	tilesSearched : 0,
	tilesFound : 0,
	curX : 0,
	curY : 0,
	lastX : 0,
	firstX : 0,
	firstY : 0,
	lastY : 0,
	rallypointlevel:0,
	knt:{},
	helpArray:{},
	FarmArray:{},
	marchArray:[],
	lookup:1,
	city:0,
	deleting:false,
	DipArray: ["friendly","hostile","friendlyToThem","friendlyToYou","neutral","unallied"],
	interval: ["Continuously","1 hour","2 hours","3 hours","6 hours","12 hours","24 hours"],

	init : function (div){
		var t = Tabs.farm;
		t.myDiv = div;

		var m = '<DIV id=pbFarmTab class=pbStat>AUTOMATED FARMING FUNCTION</div><TABLE id=pbFarmOptions width=100% height=0% class=pdxTab><TR align="center">';
		if (FarmOptions.Running == false) {
			m += '<TD><INPUT id=FarmAttSearch type=submit value="Farming = OFF"></td>';
		} else {
			m += '<TD><INPUT id=FarmAttSearch type=submit value="Farming = ON"></td>';
		}
		m +='<TD title="You must stop the search to see the farms..."><INPUT id=pbpaintFarms type=submit value="Show Farms">';
		m += '<SELECT id=pbFarmcity type=list></td></tr></table>';
		m += '</tr></table></div>';

		m += '<DIV id=pbTraderDivD class=pbStat>FARMING STATS</div>';

		m += '<TABLE id=pbfarmstats width=95% height=0% class=pdxTab><TR align="left"><TR>';
		for(i=0;i<Seed.cities.length;i++){
			m += '<TD>' + Seed.cities[i][1] +'</td>';
		}
		m+='</tr><TR>';
		for(i=0;i<Seed.cities.length;i++){
			m += '<TD><DIV><span id='+ 'pdtotalFarm' + i +'></span></div></td>';
		}
		m+='</tr><TR>';
		for(i=0;i<Seed.cities.length;i++){
			m += '<TD><DIV><span id='+ 'pddataFarm' + i +'></span></div></td>';
		}
		m+='</tr><TR>'
		for(i=0;i<Seed.cities.length;i++){
			m += '<TD><DIV><span id='+ 'pddataFarmarray' + i +'></span></div></td>';
		}
		m+='</tr></table>';

		m+='<DIV id=FarmCheck></div>';

		m += '<DIV id=pbTraderDivD class=pbStat>FARMING OPTIONS</div>';
		m += '<TABLE id=pbfarmstats width=90% height=0% class=pdxTab>';
		m += '<TR><TD width=180>Keep rallypoint slot(s) free: </td><TD><INPUT id=FarmRallyClip type=text size=2 maxlength=2 value=' + FarmOptions.RallyClip +'>  </td></tr>';
		m += '<TR><TD>Farm Interval:</td><TD><SELECT id=FarmInterval type=list></td></tr>';
		m += '<TR><TD>Delete reports:</td><TD><INPUT id=FarmReports type=checkbox '+(FarmOptions.DeleteReports?'CHECKED':'')+'></td><tr>';
		m += '<TR><TD>Search distance:</td><TD><INPUT type=text id=FarmRadius size=3 maxlength=3 value='+ FarmOptions.MaxDistance +'><INPUT id=FarmSearch type=submit value="Farm Search"></td><tr>';
		m += '<TR><TD>'+uW.g_js_strings.commonstr.might+':</td>';
		m += '<TD width=50>Min.: <INPUT type=text id=FarmMinMight size=8 maxlength=8 value='+ FarmOptions.MinMight +'></td>';
		m += '<TD>Mx.: <INPUT type=text id=FarmMaxMight size=9 maxlength=9 value='+ FarmOptions.MaxMight +'></td></tr>';
		m += '<TR><TD>Farm if inactive for more then: </td>';
		m += '<TD><INPUT type=text id=FarmInactive size=3 value='+ FarmOptions.Inactive +'> days (checked every 6 hours)</td></table>';
		m += '<TABLE id=pbfarmstats width=90% height=0% class=pdxTab><TR align="left"><TR><TD width=100>Ciudad:</td>';
		for (i=1;i<=Seed.cities.length;i++) {
			m+='<TD class=pbCityEn><INPUT id=CityEnable'+ i +'  type=checkbox '+(FarmOptions.CityEnable[i]?'CHECKED':'')+'>'+ Seed.cities[i-1][1] +'</td>';
		}
		m += '</tr></table><TABLE id=pbfarmstats width=90% height=0% class=pdxTab><TR align="left"><TD width=100>City Level:</td>';
		for (i=1;i<=12;i++) {
			m+='<TD class=pbCityOpt><INPUT id=CityLevel'+ i +'  type=checkbox '+(FarmOptions.CityLevel[i]?'CHECKED':'')+'>'+ i +'</td>';
		}
		m += '</tr></table><TABLE id=pbfarmstats width=90% height=0% class=pdxTab><TR align="left"><TR><TD width=100>Diplomacy: </td>';
		for (i=0;i<t.DipArray.length;i++) {
			m+='<TD class=pbDipOpt><INPUT id=Diplomacy'+ t.DipArray[i] +'  type=checkbox '+(FarmOptions.Diplomacy[t.DipArray[i]]?'CHECKED':'')+'>'+ t.DipArray[i] +'</td>';
		}
		m+='</tr></table>';

		m += '<DIV id=pbTraderDivD class=pbStat>FARMING TROOPS</div>';
		m += '<TABLE id=pbaddreasignroute width=100% height=0% class=pdxTab><TR align="center">';
		m += '<TR><TD rowspan="2"><img src="'+IMGmiddleSupplyTroop+'"></td>';
		m += '<TD>Supply Troop</td>'
		m += '<TD rowspan="2"><img src="'+IMGmiddleMilitiaman+'"></td>'
		m += '<TD>Militiaman</td>'
		m += '<TD rowspan="2"><img src="'+IMGmiddleScout+'"></td>'
		m += '<TD>Scout</td>'
		m += '<TD rowspan="2"><img src="'+IMGmiddlePikeman+'"></td>'
		m += '<TD>Pikeman</td></tr>'
		m += '<TR><TD  class=pbTroopOpt><INPUT id=FarmTroop1  type=text size=10 maxlength=10 value='+ FarmOptions.Troops[1] +'\></td>';
		m += '<TD  class=pbTroopOpt><INPUT id=FarmTroop2  type=text size=10 maxlength=10 value='+ FarmOptions.Troops[2] +'\></td>';
		m += '<TD  class=pbTroopOpt><INPUT id=FarmTroop3  type=text size=10 maxlength=10 value='+ FarmOptions.Troops[3] +'\></td>';
		m += '<TD  class=pbTroopOpt><INPUT id=FarmTroop4  type=text size=10 maxlength=10 value='+ FarmOptions.Troops[4] +'\></td></tr>';
		m += '<TR><TD rowspan="2"><img src="'+IMGmiddleSwordsman+'"></td>';
		m += '<TD>Swordsman</td>'
		m += '<TD rowspan="2"><img src="'+IMGmiddleArcher+'"></td>'
		m += '<TD>Archer</td>'
		m += '<TD rowspan="2"><img src="'+IMGmiddleCavalry+'"></td>'
		m += '<TD>Cavalry</td>'
		m += '<TD rowspan="2"><img src="'+IMGmiddleHeavyCavalry+'"></td>'
		m += '<TD>HeavyCavalry</td></tr>'
		m += '<TR><TD  class=pbTroopOpt><INPUT id=FarmTroop5  type=text size=10 maxlength=10 value='+ FarmOptions.Troops[5] +'\></td>';
		m += '<TD  class=pbTroopOpt><INPUT id=FarmTroop6  type=text size=10 maxlength=10 value='+ FarmOptions.Troops[6] +'\></td>';
		m += '<TD  class=pbTroopOpt><INPUT id=FarmTroop7  type=text size=10 maxlength=10 value='+ FarmOptions.Troops[7] +'\></td>';
		m += '<TD  class=pbTroopOpt><INPUT id=FarmTroop8  type=text size=10 maxlength=10 value='+ FarmOptions.Troops[8] +'\></td></tr>';
		m += '<TR><TD rowspan="2"><img src="'+IMGmiddleSupplyWagon+'"></td>';
		m += '<TD>SupplyWagon</td>'
		m += '<TD rowspan="2"><img src="'+IMGmiddleBallista+'"></td>'
		m += '<TD>Ballista</td>'
		m += '<TD rowspan="2"><img src="'+IMGmiddleBatteringRam+'"></td>'
		m += '<TD>BatteringRam</td>'
		m += '<TD rowspan="2"><img src="'+IMGmiddleCatapult+'"></td>'
		m += '<TD>Catapult</td></tr>'
		m += '<TR><TD  class=pbTroopOpt><INPUT id=FarmTroop9  type=text size=10 maxlength=10 value='+ FarmOptions.Troops[9] +'\></td>';
		m += '<TD  class=pbTroopOpt><INPUT id=FarmTroop10  type=text size=10 maxlength=10 value='+ FarmOptions.Troops[10] +'\></td>';
		m += '<TD  class=pbTroopOpt><INPUT id=FarmTroop11  type=text size=10 maxlength=10 value='+ FarmOptions.Troops[11] +'\></td>';
		m += '<TD  class=pbTroopOpt><INPUT id=FarmTroop12 type=text size=10 maxlength=10 value='+ FarmOptions.Troops[12] +'\></td></tr></table>';

		t.myDiv.innerHTML = m;
		t.checkFarmData();
		if(t.nextattack == null) t.nextattack = setInterval(t.getnextCity, FarmOptions.SendInterval*1000);
		setInterval(t.startdeletereports,(120000));
		setInterval( t.checkMarches ,2000);
		document.getElementById('pbFarmcity').options.length=0;
		for (i=0;i<Seed.cities.length;i++){
			var o = document.createElement("option");
			o.text = Seed.cities[i][1]
			o.value = i+1;
			document.getElementById("pbFarmcity").options.add(o);
		}
		document.getElementById('FarmInterval').options.length=0;
		for (i=0;i<t.interval.length;i++){
			var o = document.createElement("option");
			o.text = t.interval[i];
			o.value = i;
			document.getElementById("FarmInterval").options.add(o);
		}
		document.getElementById('FarmInterval').value = FarmOptions.Interval;
		for(i=0;i<Seed.cities.length;i++){
			var elem = 'pdtotalFarm'+i;
			if (t.FarmArray[i+1] == undefined) document.getElementById(elem).innerHTML = '<i>No Data</i>';
			else document.getElementById(elem).innerHTML =  'Farms  ' + t.FarmArray[i+1].length +'/'+ t.helpArray[i+1].length;
		}
		document.getElementById('FarmInterval').addEventListener('change', function(){
			FarmOptions.Interval = document.getElementById('FarmInterval').value;
			saveFarmOptions();
		} , false);
		document.getElementById('FarmRallyClip').addEventListener('change', function(){
			FarmOptions.RallyClip = document.getElementById('FarmRallyClip').value;
			saveFarmOptions();
		} , false);
		document.getElementById('FarmReports').addEventListener('change', function(){
			FarmOptions.DeleteReports = document.getElementById('FarmReports').checked;
			saveFarmOptions();
		} , false);
		document.getElementById('FarmRadius').addEventListener('change', function(){
			FarmOptions.MaxDistance = parseInt(document.getElementById('FarmRadius').value);
			saveFarmOptions();
		} , false);
		document.getElementById('FarmAttSearch').addEventListener('click', function(){t.toggleBarbState(this)} , false);
		document.getElementById('FarmSearch').addEventListener('click', function(){
			for (i=1;i<=Seed.cities.length;i++) GM_deleteValue('Farms_' + Seed.player['name'] + '_city_' + i + '_' + getServerId());
			for(i=0;i<Seed.cities.length;i++){
				var elem = 'pdtotalFarm'+i;
				document.getElementById(elem).innerHTML = '<i>No Data</i>';
			}
			t.checkFarmData();
		} , false);
		document.getElementById('pbpaintFarms').addEventListener('click', function(){t.showFarms(document.getElementById("pbFarmcity").value,Seed.cities[document.getElementById("pbFarmcity").value -1][1]);},false);

		document.getElementById('FarmMinMight').addEventListener('change', function(){
			FarmOptions.MinMight = parseInt(document.getElementById('FarmMinMight').value);
			t.FilterFarms();
			saveFarmOptions();
		} , false);
		document.getElementById('FarmMaxMight').addEventListener('change', function(){
			FarmOptions.MaxMight = parseInt(document.getElementById('FarmMaxMight').value);
			t.FilterFarms();
			saveFarmOptions();
		} , false);
		document.getElementById('FarmInactive').addEventListener('change', function(){
			FarmOptions.Inactive = parseInt(document.getElementById('FarmInactive').value);
			t.FilterFarms();
			saveFarmOptions();
		} , false);

		var element = document.getElementsByClassName('pbTroopOpt');
		for (k=0;k<element.length;k++){
			element[k].addEventListener('change', function(){
				for (i=1;i<=10;i++){
					FarmOptions.Troops[i] = document.getElementById('FarmTroop' + i).value;
					saveFarmOptions();
				}
			}, false);
		}

		element = document.getElementsByClassName('pbCityOpt');
		for (k=0;k<element.length;k++){
			element[k].addEventListener('change', function(){
				for (i=1;i<=12;i++){
					FarmOptions.CityLevel[i] = document.getElementById('CityLevel' + i).checked;
					saveFarmOptions();
				}
				t.FilterFarms();
			}, false);
		}

		element = document.getElementsByClassName('pbCityEn');
		for (k=0;k<element.length;k++){
			element[k].addEventListener('change', function(){
				for (i=1;i<=Seed.cities.length;i++){
					FarmOptions.CityEnable[i] = document.getElementById('CityEnable' + i).checked;
					saveFarmOptions();
				}
				t.FilterFarms();
			}, false);
		}

		element = document.getElementsByClassName('pbDipOpt');
		for (k=0;k<element.length;k++){
			element[k].addEventListener('change', function(){
				for (i=0;i<t.DipArray.length;i++){
					FarmOptions.Diplomacy[t.DipArray[i]] = document.getElementById('Diplomacy' + t.DipArray[i]).checked;
					saveFarmOptions();
				}
				t.FilterFarms();
			}, false);

		}

	},


	checkMarches: function () {
		var t = Tabs.farm;
		for (i=0;i<FarmOptions.FarmMarches.length;i++){
			var cityId = "city"+ FarmOptions.FarmMarches[i]["cityId"];
			var city = FarmOptions.FarmMarches[i]["city"];
			var marchId = "m" + FarmOptions.FarmMarches[i]["marchId"];
			if (Seed.queue_atkp[cityId][marchId] !=undefined){
				if (Seed.queue_atkp[cityId][marchId].marchStatus == 8  && Seed.queue_atkp[cityId][marchId].hasUpdated) {
					FarmOptions.Checks++;
					saveFarmOptions();
					document.getElementById('FarmCheck').innerHTML = "Attacks: " + FarmOptions.Attacks + " - Checks:" + FarmOptions.Checks;
					for(u=1;u<=12;u++) if (parseInt(Seed.queue_atkp[cityId][marchId]["unit"+u+"Return"]) < parseInt(Seed.queue_atkp[cityId][marchId]["unit"+u+"Count"])){
						t.FarmArray[FarmOptions.FarmMarches[i]["city"]][FarmOptions.FarmMarches[i]["number"]]["lost"] = true;
						t.FarmArray[FarmOptions.FarmMarches[i]["city"]][FarmOptions.FarmMarches[i]["number"]]["enabled"] = false;
					}
					for (a=0;a<t.helpArray[FarmOptions.FarmMarches[i]["city"]].length;a++){
						for (b=0;b<t.FarmArray[FarmOptions.FarmMarches[i]["city"]].length;b++){
							if (parseInt(t.FarmArray[FarmOptions.FarmMarches[i]["city"]][b]['x']) == parseInt(t.helpArray[FarmOptions.FarmMarches[i]["city"]][b]['x']) && parseInt(t.FarmArray[FarmOptions.FarmMarches[i]["city"]][b]['y']) == parseInt(t.helpArray[FarmOptions.FarmMarches[i]["city"]][b]['y'])){
								t.helpArray[FarmOptions.FarmMarches[i]["city"]][a]['gold'] = t.FarmArray[FarmOptions.FarmMarches[i]["city"]][b]['gold'];
								t.helpArray[FarmOptions.FarmMarches[i]["city"]][a]['resource1'] = t.FarmArray[FarmOptions.FarmMarches[i]["city"]][b]['resource1'];
								t.helpArray[FarmOptions.FarmMarches[i]["city"]][a]['resource2'] = t.FarmArray[FarmOptions.FarmMarches[i]["city"]][b]['resource2'];
								t.helpArray[FarmOptions.FarmMarches[i]["city"]][a]['resource3'] = t.FarmArray[FarmOptions.FarmMarches[i]["city"]][b]['resource3'];
								t.helpArray[FarmOptions.FarmMarches[i]["city"]][a]['resource4'] = t.FarmArray[FarmOptions.FarmMarches[i]["city"]][b]['resource4'];
								t.helpArray[FarmOptions.FarmMarches[i]["city"]][a]['empty'] = t.FarmArray[FarmOptions.FarmMarches[i]["city"]][b]['empty'];
								t.helpArray[FarmOptions.FarmMarches[i]["city"]][a]['lost'] = t.FarmArray[FarmOptions.FarmMarches[i]["city"]][b]['lost'];
							}
						}
					}
					GM_setValue('Farms_' + Seed.player['name'] + '_city_' + FarmOptions.FarmMarches[i]["city"] + '_' + getServerId(), JSON2.stringify(t.helpArray[FarmOptions.FarmMarches[i]["city"]]));
					FarmOptions.FarmMarches.splice(i,1);
					saveFarmOptions();
				}
			} else {
				FarmOptions.FarmMarches.splice(i,1);
				saveFarmOptions();
			}
		}
	},

	checkInactives : function (citynumber,city,FarmNumber,xcoord,ycoord,kid,uid,u1,u2,u3,u4,u5,u6,u7,u8,u9,u10,u11,u12){
		var t = Tabs.farm;
		var now = new Date().getTime()/1000.0;
		var hours = (now - t.FarmArray[city][FarmOptions.FarmNumber[city]]['LastCheck']) / 3600;
		if (t.FarmArray[city][FarmOptions.FarmNumber[city]]['DaysInactive'] == "?" || hours > 6){
			var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
			params.pid = uid;
			new AjaxRequest(unsafeWindow.g_ajaxpath + "ajax/viewCourt.php" + unsafeWindow.g_ajaxsuffix, {
				method: "post",
				parameters: params,
				onSuccess: function (transport) {
					var rslt = eval("(" + transport.responseText + ")");
					var lastLogin = rslt.playerInfo.lastLogin;
					var fullDate = lastLogin.substr(0,4) +", "+ lastLogin.substr(5,2) +", "+ lastLogin.substr(8,2) ;
					var time = new Date (fullDate).getTime()/1000;
					var days = Math.floor((now - time) / 86400);
					t.FarmArray[city][FarmOptions.FarmNumber[city]]['DaysInactive'] = days;
					for (i=0;i<t.helpArray[city].length;i++){
						if (xcoord == parseInt(t.helpArray[city][i]['x']) && ycoord == parseInt(t.helpArray[city][i]['y'])){
							t.helpArray[city][i]['DaysInactive'] = days;
							t.helpArray[city][i]['LastCheck'] = now;
						}
					}
					GM_setValue('Farms_' + Seed.player['name'] + '_city_' + city + '_' + getServerId(), JSON2.stringify(t.helpArray[city]));
					if (days > FarmOptions.Inactive) {
						t.doBarb(citynumber,city,FarmNumber,xcoord,ycoord,kid,u1,u2,u3,u4,u5,u6,u7,u8,u9,u10,u11,u12);
					} else 	{
						FarmOptions.FarmNumber[city]++;
						saveFarmOptions();
						t.barbing();
					}
				},
				onFailure: function (rslt) {
					notify (rslt);
				},
			});
		} else {
			if (t.FarmArray[city][FarmOptions.FarmNumber[city]]['DaysInactive'] > FarmOptions.Inactive) {
				t.doBarb(citynumber,city,FarmNumber,xcoord,ycoord,kid,u1,u2,u3,u4,u5,u6,u7,u8,u9,u10,u11,u12);
			} 	else{
				FarmOptions.FarmNumber[city]++;
				saveFarmOptions();
				t.barbing();
			}
		}
	},

	showFarms: function (citynumber,cityname) {
		var t = Tabs.farm;
		var popTradeRoutes = null;
		t.popTradeRoutes = new CPopup('pbShowFarms', 0, 0, 1100, 485, true, function() {clearTimeout (1000);});
		var m = '<DIV style="max-height:440px; overflow-y:auto"><TABLE align=center cellpadding=0 cellspacing=0 width=100% class="pbShowBarbs" id="pbBars">';
		t.popTradeRoutes.getMainDiv().innerHTML = '</table></div>' + m;
		t.popTradeRoutes.getTopDiv().innerHTML = '<div class=showBadged><center>Farms for city: '+cityname+'</center></div>';
		t.paintFarms(citynumber,cityname);
		t._addTabHeader(citynumber,cityname);
		t.popTradeRoutes.show(true)	;
	},


	ToggleFarms: function(citynumber) {
		var t = Tabs.farm;
		var id=0;
		var element_class = document.getElementsByClassName('Farm');
		for (d = 1; d <= t.FarmArray[citynumber].length; d++) {
			id = d-1;
			var ele = document.getElementById('FarmToggle' + d);
			if (ele.checked) {
				t.FarmArray[citynumber][id].enabled = true;
				t.FarmArray[citynumber][id].lost = false;
				t.FarmArray[citynumber][id].empty = 0;
			}
			else t.FarmArray[citynumber][id].enabled = false;
		}
		for (i=0;i<t.helpArray[citynumber].length;i++){
			for (j=0;j<t.FarmArray[citynumber].length;j++){
				if (parseInt(t.FarmArray[citynumber][j]['x']) == parseInt(t.helpArray[citynumber][i]['x']) && parseInt(t.FarmArray[citynumber][j]['y']) == parseInt(t.helpArray[citynumber][i]['y'])) t.helpArray[citynumber][i].enabled = t.FarmArray[citynumber][j].enabled;
			}
		}
		GM_setValue('Farms_' + Seed.player['name'] + '_city_' + citynumber + '_' + getServerId(), JSON2.stringify(t.helpArray[citynumber]));
	},

	paintFarms: function(i,cityname){
		var t = Tabs.farm;
		for (k=(t.FarmArray[i].length-1);k>=0;k--){t._addTab(i,cityname,k+1,t.FarmArray[i][k]['enabled'], t.FarmArray[i][k]['x'], t.FarmArray[i][k]['y'],t.FarmArray[i][k]['dist'], t.FarmArray[i][k]['level'],t.FarmArray[i][k]['AllianceName'], t.FarmArray[i][k]['Diplomacy'], t.FarmArray[i][k]['PlayerName'], t.FarmArray[i][k]['cityName'],t.FarmArray[i][k]['might'], t.FarmArray[i][k]['cityNumber'], t.FarmArray[i][k]['attacked'],t.FarmArray[i][k]['DaysInactive'],t.FarmArray[i][k]['lost'],t.FarmArray[i][k]['empty'],t.FarmArray[i][k]['gold'],t.FarmArray[i][k]['resource1'],t.FarmArray[i][k]['resource2'],t.FarmArray[i][k]['resource3'],t.FarmArray[i][k]['resource4']);}
	},


	_addTab: function(citynumber,cityname,queueId,status,X,Y,dist,level,AllianceName,diplomacy,playerName,cityName,might,cityNumber,attacked,DaysInactive,lost,empty,gold,rec1,rec2,rec3,rec4){
		var t = Tabs.farm;
		var row = document.getElementById('pbBars').insertRow(0);
		row.vAlign = 'top';
		if (lost) row.style.color = "red";
		if (!lost && empty == 0) row.style.color = "black";
		if (FarmOptions.Inactive > DaysInactive) row.style.color = "orange";
		row.insertCell(0).innerHTML = queueId;
		row.insertCell(1).innerHTML = "<a href='javascript:void(0)' onclick='cm.utils.CoordinateLinkController.onClick(event)' class='coordinateLink'>("+X+","+Y+")</a>";
		row.insertCell(2).innerHTML = dist;
		row.insertCell(3).innerHTML = level;
		row.insertCell(4).innerHTML = AllianceName;
		row.insertCell(5).innerHTML = diplomacy;
		row.insertCell(6).innerHTML = playerName;
		row.insertCell(7).innerHTML = cityName;
		row.insertCell(8).innerHTML = addCommas(might);
		row.insertCell(9).innerHTML = DaysInactive;
		row.insertCell(10).innerHTML = attacked;
		row.insertCell(11).innerHTML = '<INPUT class=Farm id="FarmToggle' + queueId + '" type=checkbox>';

		var element_class = document.getElementsByClassName('Farm');
		for (c = 0; c < element_class.length; c++) {
			element_class[c].checked = t.FarmArray[citynumber][c].enabled;
			element_class[c].addEventListener('click', function(){t.ToggleFarms(citynumber)}, false);
		}
	},

	_addTabHeader: function(citynumber,cityname) {
		var t = Tabs.farm;
		var row = document.getElementById('pbBars').insertRow(0);
		row.vAlign = 'top';
	    row.insertCell(0).innerHTML = "Id";
	    row.insertCell(1).innerHTML = "Coords";
	    row.insertCell(2).innerHTML = "Dist.";
        row.insertCell(3).innerHTML = "Level";
        row.insertCell(4).innerHTML = "Allaince Name";
	   row.insertCell(5).innerHTML = "Diplomacy";
	   row.insertCell(6).innerHTML = "Player Name";
	   row.insertCell(7).innerHTML = "City Name";
	   row.insertCell(8).innerHTML = "Might";
	   row.insertCell(9).innerHTML = "Inactive";
       row.insertCell(10).innerHTML = "# Attacks";
	},


	startdeletereports : function (){
		var t = Tabs.farm;
		if (!FarmOptions.DeleteReports) return;
		if(!t.deleting){
			t.deleting = true;
			t.fetchbarbreports(0, t.checkbarbreports);
		}
	},
	fetchbarbreports : function (pageNo, callback){
		var t = Tabs.farm;
		var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
		if(pageNo > 0)
			params.pageNo = pageNo;
		new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/listReports.php" + unsafeWindow.g_ajaxsuffix, {
			method: "post",
			parameters: params,
			onSuccess: function (rslt) {
				callback(rslt);
			},
			onFailure: function () {
			},
		});
	},
	checkbarbreports : function (rslt){
		var t = Tabs.farm;
		if(!rslt.ok){
			return;
		}
		if(rslt.arReports.length < 1){
			return;
		}
		var reports = rslt.arReports;
		var totalPages = rslt.totalPages;
		var deletes1 = new Array();
		for(k in reports){
			for (i=1;i<=Seed.cities.length;i++){
				var x=Seed.cities[i-1]["2"];
				var y=Seed.cities[i-1]["3"];
				for (j=0;j<t.FarmArray[i].length;j++){
					if (reports[k].side1XCoord == x && reports[k].side1YCoord == y && reports[k].side0XCoord == t.FarmArray[i][j]["x"] && reports[k].side0YCoord == t.FarmArray[i][j]["y"]) deletes1.push(k.substr(2));
				}
			}
		}
		if(deletes1.length > 0){
			t.deletereports(deletes1);
		} else {
			t.deleting = false;
			return;
		}
	},

	deletereports : function (deletes1){
		var t = Tabs.farm;
		var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
		params.s1rids = deletes1.join(",");
		params.s0rids = '';
		params.cityrids = '';
		new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/deleteCheckedReports.php" + unsafeWindow.g_ajaxsuffix, {
			method: "post",
			parameters: params,
			onSuccess: function (rslt) {
				Seed.newReportCount = parseInt(Seed.newReportCount) - parseInt(deletes1.length);
				t.fetchbarbreports(0, t.checkbarbreports);
			},
			onFailure: function () {
			},
		});
	},

	isMyself: function(userID){
		if(!Seed.players["u"+userID])
			return false;
		if(Seed.players["u"+userID].n == Seed.player.name)
			return true;
		else
			return false;
		return false;
	},

	checkFarmData: function(){
		var t = Tabs.farm;
		for (i=1;i<=Seed.cities.length;i++){
			t.helpArray[i] = [];
			var myarray = (GM_getValue('Farms_' + Seed.player['name'] + '_city_' + i + '_' + getServerId()));
			if (myarray == undefined && t.searchRunning==false) {
				t.searchRunning = true;
				t.lookup=i;
				t.opt.startX=parseInt(Seed.cities[(i-1)][2]);
				t.opt.startY=parseInt(Seed.cities[(i-1)][3]);
				t.clickedSearch();
			}
			if (myarray != undefined){
				myarray = JSON2.parse(myarray);
				//if(AttackOptions.Method == 'distance') 
				t.helpArray[i] = myarray.sort(function sortBarbs(a,b) {a = a['dist'];b = b['dist'];return a == b ? 0 : (a < b ? -1 : 1);});
				//if(AttackOptions.Method == 'level') t.helpArray[i] = myarray.sort(function function (a,b) {a = parseInt(a['level']);b = parseInt(b['level']);return (a > b )? -1 : ((a < b ? 1 : t.SortDist(a,b)));});
				//if(AttackOptions.Method == 'lowlevel') t.helpArray[i] = myarray.sort(function function (a,b) {a = parseInt(a['level']);b = parseInt(b['level']);return (a < b )? -1 : ((a > b ? 1 : t.SortDist(a,b)));});
				GM_setValue('Farms_' + Seed.player['name'] + '_city_' + i + '_' + getServerId(), JSON2.stringify(t.helpArray[i]));
			}
		}
		t.FilterFarms();
	},

	FilterFarms: function() {
		var t = Tabs.farm;
		if (t.searchRunning) return;
		t.FarmArray = new Array();
		t.FarmArray["1"] = new Array();
		t.FarmArray["2"] = new Array();
		t.FarmArray["3"] = new Array();
		t.FarmArray["4"] = new Array();
		t.FarmArray["5"] = new Array();
		t.FarmArray["6"] = new Array();
		t.FarmArray["7"] = new Array();
		t.FarmArray["8"] = new Array();
		for (u=1;u<=Seed.cities.length;u++){
			for (i=0;i<t.helpArray[u].length;i++){
				var checkLvl = false;
				var checkMight = false;
				var checkDip = false;
				var checkAlliance = false;
				var AllianceName = "";
				for (j=1;j<=12;j++) if (FarmOptions.CityLevel[j] && t.helpArray[u][i].level == j) checkLvl=true;
				if (Seed.allianceDiplomacies.allianceName != undefined) AllianceName = Seed.allianceDiplomacies.allianceName;
				if (t.helpArray[u][i].AllianceName != AllianceName) checkAlliance = true;
				if (t.helpArray[u][i].might >= FarmOptions.MinMight && t.helpArray[u][i].might <= FarmOptions.MaxMight) checkMight = true;
				for (j in FarmOptions.Diplomacy) if (FarmOptions.Diplomacy[j] && t.helpArray[u][i].Diplomacy == j) checkDip=true;
				if (checkLvl && checkMight && checkDip && checkAlliance) t.FarmArray[u].push (t.helpArray[u][i]);
			}
			var elem = 'pdtotalFarm'+(u-1);
			if (t.FarmArray[u] == undefined) document.getElementById(elem).innerHTML = '<i>No Data</i>';
			else document.getElementById(elem).innerHTML =  'Farms ' + t.FarmArray[u].length +'/'+ t.helpArray[u].length;
		}
	},


	SortDist: function(a,b) {
		a = parseFloat(a['dist']);
		b = parseFloat(b['dist']);
		return (a < b )? -1 : ((a > b ? 1 : 0));
	},

	toggleBarbState: function(obj){
		var t = Tabs.farm;
		if (FarmOptions.Running == true) {
			FarmOptions.Running = false;
			obj.value = "Farm = OFF";
			saveFarmOptions();
			t.nextattack = null;
			t.updateSeedTimer = null;
		} else {
			FarmOptions.Running = true;
			obj.value = "Farm = ON";
			saveFarmOptions();
			t.checkFarmData();
			t.nextattack = setInterval(t.getnextCity,(FarmOptions.SendInterval*1000));
		}
	},

	barbing : function(){
		var t = Tabs.farm;
		var city = t.city;
		var u1 = FarmOptions.Troops[1];
		var u2 = FarmOptions.Troops[2];
		var u3 = FarmOptions.Troops[3];
		var u4 = FarmOptions.Troops[4];
		var u5 = FarmOptions.Troops[5];
		var u6 = FarmOptions.Troops[6];
		var u7 = FarmOptions.Troops[7];
		var u8 = FarmOptions.Troops[8];
		var u9 = FarmOptions.Troops[9];
		var u10 = FarmOptions.Troops[10];
		var u11 = FarmOptions.Troops[11];
		var u12 = FarmOptions.Troops[12];
		var now = new Date().getTime()/1000.0;
		now = now.toFixed(0);
		citynumber = Seed.cities[city-1][0];
		cityID = 'city' + citynumber;

		t.getAtkKnight(cityID);
		t.getRallypointLevel(cityID);
		var slots=0;
		if (Seed.queue_atkp[cityID] != undefined){
			for(var k in Seed.queue_atkp[cityID])
				slots++;
			if(Seed.queue_atkp[cityID].toSource() == "[]")
				slots = 0;
		}
		else slots=0;

		var element2 = 'pddataFarmarray'+(city-1);
		document.getElementById(element2).innerHTML =  'PR: (' + slots + '/' + t.rallypointlevel +')';

		if (!FarmOptions.CityEnable[city]) return;
		if ((t.rallypointlevel-FarmOptions.RallyClip) <= slots) return;
		if (t.knt.toSource() == "[]") return;
		if (u1 > parseInt(Seed.units[cityID]['unt1']) || u2 > parseInt(Seed.units[cityID]['unt2']) || u3 > parseInt(Seed.units[cityID]['unt3']) || u4 > parseInt(Seed.units[cityID]['unt4']) || u5 > parseInt(Seed.units[cityID]['unt5']) || u6 > parseInt(Seed.units[cityID]['unt6']) || u7 > parseInt(Seed.units[cityID]['unt7']) || u8 > parseInt(Seed.units[cityID]['unt8']) || u9 > parseInt(Seed.units[cityID]['unt9']) || u10 > parseInt(Seed.units[cityID]['unt10']) || u11 > parseInt(Seed.units[cityID]['unt11']) || u12 > parseInt(Seed.units[cityID]['unt12'])) return;
		if (FarmOptions.FarmNumber[city]>=t.FarmArray[city].length) FarmOptions.FarmNumber[city]=0;
		var kid = t.knt[0].ID;

		var interval = 0;
		switch(FarmOptions.Interval){
			case "1":interval = 1;break;
			case "2":interval = 2;break;
			case "3":interval = 3;break;
			case "4":interval = 6;break;
			case "5":interval = 12;break;
			case "6":interval = 24;break;
		}

		var check=0;
		while (check == 0){
			check=1;
			for (i=1;i<=12;i++){
				if (FarmOptions.Troops[i] > parseInt(Seed.units[cityID]['unt'+i])) check=0;
			}
			if (FarmOptions.Troops[1] == 0 && FarmOptions.Troops[2] == 0 && FarmOptions.Troops[3] == 0 && FarmOptions.Troops[4] == 0 && FarmOptions.Troops[5] == 0 && FarmOptions.Troops[6] == 0 && FarmOptions.Troops[7] == 0 && FarmOptions.Troops[8] == 0 && FarmOptions.Troops[9] == 0 &&FarmOptions.Troops[10] == 0 && FarmOptions.Troops[11] == 0 && FarmOptions.Troops[12] == 0) check=0;
			if (!t.FarmArray[city][FarmOptions.FarmNumber[city]]['enabled']) check=0;
			if (now < (parseInt(t.FarmArray[city][FarmOptions.FarmNumber[city]]['time']) + (3600 * interval))) check=0;
			if (check ==0) FarmOptions.FarmNumber[city]++;
			if (FarmOptions.FarmNumber[city]>=t.FarmArray[city].length) {
				FarmOptions.FarmNumber[city]=0;
				break;
			}
		}
		if (check == 0) return;

		var xcoord = t.FarmArray[city][FarmOptions.FarmNumber[city]]['x'];
		var ycoord = t.FarmArray[city][FarmOptions.FarmNumber[city]]['y'];
		var uid = t.FarmArray[city][FarmOptions.FarmNumber[city]]['UserId'];
		saveFarmOptions();
		if ((t.rallypointlevel - FarmOptions.RallyClip) > slots) t.checkInactives(citynumber,city,FarmOptions.FarmNumber[city],xcoord,ycoord,kid,uid,u1,u2,u3,u4,u5,u6,u7,u8,u9,u10,u11,u12);
	},

	getnextCity: function(){
		var t = Tabs.farm;
		if (!FarmOptions.Running) return;
		if(t.searchRunning) return;
		var city = t.city+1;
		if (city>Seed.cities.length){
			city=1;
		}
		t.city = city;
		t.barbing();
	},

	getRallypointLevel: function(cityId){
		var t = Tabs.farm;
		for (var o in Seed.buildings[cityId]){
			var buildingType = parseInt(Seed.buildings[cityId][o][0]);
			var buildingLevel = parseInt(Seed.buildings[cityId][o][1]);
			if (buildingType == 12) t.rallypointlevel=parseInt(buildingLevel);
		}
	},

	getAtkKnight : function(cityID){
		var t = Tabs.farm;
		t.knt = new Array();
		t.getRallypointLevel(cityID);
		for (k in Seed.knights[cityID]){
			if (Seed.knights[cityID][k]["knightStatus"] == 1 && Seed.leaders[cityID]["resourcefulnessKnightId"] != Seed.knights[cityID][k]["knightId"] && Seed.leaders[cityID]["politicsKnightId"] != Seed.knights[cityID][k]["knightId"] && Seed.leaders[cityID]["combatKnightId"] != Seed.knights[cityID][k]["knightId"] && Seed.leaders[cityID]["intelligenceKnightId"] != Seed.knights[cityID][k]["knightId"]){
				t.knt.push ({
					Name:   Seed.knights[cityID][k]["knightName"],
					Combat:	Seed.knights[cityID][k]["combat"],
					ID:		Seed.knights[cityID][k]["knightId"],
				});
			}
		}
		t.knt = t.knt.sort(function sort(a,b) {a = a['Combat'];b = b['Combat'];return a == b ? 0 : (a > b ? -1 : 1);});
	},

	doBarb: function(cityID,counter,number,xcoord,ycoord,kid,u1,u2,u3,u4,u5,u6,u7,u8,u9,u10,u11,u12){
		var t = Tabs.farm;
		var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
		params.cid=cityID;
		params.type=4;
		params.kid=kid;
		params.xcoord = xcoord;
		params.ycoord = ycoord;
		if (u1>0) params.u1=u1;
		if (u2>0)params.u2=u2;
		if (u3>0)params.u3=u3;
		if (u4>0)params.u4=u4;
		if (u5>0)params.u5=u5;
		if (u6>0)params.u6=u6;
		if (u7>0)params.u7=u7;
		if (u8>0)params.u8=u8;
		if (u9>0)params.u9=u9;
		if (u10>0)params.u10=u10;
		if (u11>0)params.u11=u11;
		if (u12>0)params.u12=u12;
		params.gold =0;
		params.r1=0;
		params.r2=0,
			params.r3=0;
		params.r4=0;
		params.r5=0;

		new AjaxRequest(unsafeWindow.g_ajaxpath + "ajax/march.php" + unsafeWindow.g_ajaxsuffix, {
			method: "post",
			parameters: params,
			loading: true,
			onSuccess: function (transport) {
				var rslt = eval("(" + transport.responseText + ")");
				if (rslt.ok) {
					var timediff = parseInt(rslt.eta) - parseInt(rslt.initTS);
					var ut = unsafeWindow.unixtime();
					var unitsarr=[0,0,0,0,0,0,0,0,0,0,0,0,0];
					var resources=[0,0,0,0,0,0,0,0,0,0,0,0,0];
					for(i = 0; i <= unitsarr.length; i++){
						if(params["u"+i]){
							unitsarr[i] = params["u"+i];
						}
					}
					var currentcityid = params.cid;
					unsafeWindow.attach_addoutgoingmarch(rslt.marchId, rslt.marchUnixTime, ut + timediff, params.xcoord, params.ycoord, unitsarr, params.type, params.kid, resources, rslt.tileId, rslt.tileType, rslt.tileLevel, currentcityid, true);
					if(rslt.updateSeed){unsafeWindow.update_seed(rslt.updateSeed)};
					var slots=0;
					for(var k in Seed.queue_atkp['city'+cityID]) slots++;
					if(Seed.queue_atkp['city'+cityID].toSource() == "[]") slots = 0;
					var element1 = 'pddataFarmarray'+(counter-1);
					document.getElementById(element1).innerHTML =  'RP: (' + slots + '/' + t.rallypointlevel +')';
					var now = new Date().getTime()/1000.0;
					now = now.toFixed(0);
					t.FarmArray[counter][number]['time'] = now;
					t.FarmArray[counter][number]['attacked']++;
					FarmOptions.FarmMarches.push ({city:counter,cityId:cityID,marchId:rslt.marchId,number:number});
					FarmOptions.FarmNumber[counter]++;
					FarmOptions.Attacks++;
					saveFarmOptions();
					document.getElementById('FarmCheck').innerHTML = "Attacks: " + FarmOptions.Attacks + " - # Checks: " + FarmOptions.Checks;
					for (i=0;i<t.helpArray[counter].length;i++){
						for (j=0;j<t.FarmArray[counter].length;j++){
							if (parseInt(t.FarmArray[counter][j]['x']) == parseInt(t.helpArray[counter][i]['x']) && parseInt(t.FarmArray[counter][j]['y']) == parseInt(t.helpArray[counter][i]['y'])){
								t.helpArray[counter][i]['time'] = t.FarmArray[counter][j]['time'];
								t.helpArray[counter][i]['attacked'] = t.FarmArray[counter][j]['attacked'];
							}
						}
					}
					GM_setValue('Farms_' + Seed.player['name'] + '_city_' + counter + '_' + getServerId(), JSON2.stringify(t.helpArray[counter]));
				}
			},
			onFailure: function () {}
		});
		saveFarmOptions();
	},

	clickedSearch : function (){
		var t = Tabs.farm;
		t.opt.searchType = 0;
		t.opt.maxDistance = FarmOptions.MaxDistance;
		t.opt.searchShape = 'circle';
		t.mapDat = [];
		t.firstX =  t.opt.startX - t.opt.maxDistance;
		t.lastX = t.opt.startX + t.opt.maxDistance;
		t.firstY =  t.opt.startY - t.opt.maxDistance;
		t.lastY = t.opt.startY + t.opt.maxDistance;
		t.tilesSearched = 0;
		t.tilesFound = 0;
		t.curX = t.firstX;
		t.curY = t.firstY;
		var xxx = t.MapAjax.normalize(t.curX);
		var yyy = t.MapAjax.normalize(t.curY);
		var element = 'pddataFarm'+(t.lookup-1);
		document.getElementById(element).innerHTML = 'Searching at '+ xxx +','+ yyy;

		setTimeout (function(){t.MapAjax.request (xxx, yyy, 15, t.mapCallback)}, MAP_DELAY);
	},

	mapCallback : function (left, top, width, rslt){
		var t = Tabs.farm;
		if (!t.searchRunning)
			return;
		if (!rslt.ok){
			t.stopSearch ('Error: '+ rslt.errorMsg);
			return;
		}
		map = rslt.data;
		for (k in map){
			var dist = distance (t.opt.startX, t.opt.startY, map[k].xCoord, map[k].yCoord);
			var CityCheck = true;
			var who = "u" + map[k].tileUserId;
			var AllianceName = "";
			if (map[k].cityName == null && map[k].misted ==false) CityCheck = false;
			if (t.isMyself(map[k].tileUserId)) CityCheck = false;
			if (map[k].tileType== 51 && CityCheck) {
				var Diplomacy = "neutral";
				for (DipStatus in t.DipArray) {
					var AllianceId = 0;
					if (rslt.userInfo[who] != undefined) AllianceId = "a" + rslt.userInfo[who].a;
					for (alliance in Seed.allianceDiplomacies[t.DipArray[DipStatus]]) if (Seed.allianceDiplomacies[t.DipArray[DipStatus]][AllianceId] != undefined) Diplomacy = t.DipArray[DipStatus];
				}
				if (rslt.allianceNames[AllianceId] != undefined) AllianceName = rslt.allianceNames[AllianceId];
				if (Diplomacy == "neutral" && AllianceName =="") Diplomacy = "unallied";
				t.mapDat.push ({time:0,empty:0,lost:false,enabled:'true',attacked:0,DaysInactive:"?",LastCheck:0,Diplomacy:Diplomacy,UserId:map[k].tileUserId,AllianceName:AllianceName,x:map[k].xCoord,y:map[k].yCoord,dist:dist,level:map[k].tileLevel,PlayerName:rslt.userInfo[who].n,cityName:map[k].cityName,might:rslt.userInfo[who].m,cityNumber:map[k].cityNum});
			}
		}
		t.tilesSearched += (15*15);

		t.curX += 15;
		if (t.curX > t.lastX){
			t.curX = t.firstX;
			t.curY += 15;
			if (t.curY > t.lastY){
				var element = 'pdtotalFarm'+(t.lookup-1);
				document.getElementById(element).innerHTML = 'Found: ' + t.mapDat.length;
				var element = 'pddataFarm'+(t.lookup-1);
				document.getElementById(element).innerHTML = "";
				GM_setValue('Farms_' + Seed.player['name'] + '_city_' + t.lookup + '_' + getServerId(), JSON2.stringify(t.mapDat));
				t.searchRunning = false;
				for (y=1;y<=8;y++) FarmOptions.FarmNumber[y] = 0;
				t.checkFarmData();
				return;
			}
		}
		var x = t.MapAjax.normalize(t.curX);
		var y = t.MapAjax.normalize(t.curY);
		var element = 'pddataFarm'+(t.lookup-1);
		document.getElementById(element).innerHTML = 'Searching at '+ x +','+ y;
		setTimeout (function(){t.MapAjax.request (x, y, 15, t.mapCallback)}, MAP_DELAY);
	},

	stopSearch : function (msg){
		var t = Tabs.farm;
		var element = 'pddataFarm'+(t.lookup-1);
		document.getElementById(element).innerHTML = msg;
		t.searchRunning = false;
	},

	hide : function (){

	},

	show : function (){

	},

};


/******************* Combat Tab **********************/
Tabs.Combat = {
        tabLabel: 'Combat',
	tabDisabled : !ENABLE_TEST_TAB,
        tabOrder: 24,
	myDiv: null,
	troops: [{},{}], //Array[Defender, Attacker]
	active: [{},{}],
	lost: [{},{}],
	total: [],
	stats: unsafeWindow.unitstats,   //  Life, Attack, Defense, Speed, Range, Load
	priority: [[3,7,8,4,5,6,2,1,9,11,10,12],[12,10,6,3,7,8,4,5,2,1,9,11]],
	round: 0,
	range: [0,0,0], //[Defender, Attacker, Max]
	distance: [{},{}], // [Defender, Attacker]
	speed: [0,0], // [Defender max, Attacker max]
	start: 0,
	pop : null,
	
	init: function(div){
		var t = Tabs.Combat;
		t.myDiv = div;
		var m = '<table><TR><TD colspan=2><b>Attcker</b>&nbsp;&nbsp;<INPUT id=pbcombat_1 type=submit value=research></td><TD colspan=2><b>Defender</b>&nbsp;&nbsp;<INPUT id=pbcombat_0 type=submit value=research></td></TR>';
		for(var troops in unsafeWindow.unitcost){
			var name = unsafeWindow.unitcost[troops][0];
			m+='<tr><td>'+name+' :</td><td><input type=text id="pbcombata_'+troops+'" /></td><td>'+name+' :</td><td><input type=text id="pbcombatd_'+troops+'" /></td></tr>';
		}
		m+='</table><DIV id=pbcombat_rslt></div>';
		t.myDiv.innerHTML = m;
		
		for(var troops in unsafeWindow.unitcost){
			document.getElementById('pbcombata_'+troops).addEventListener('change', t.e_calculate, false);
			document.getElementById('pbcombatd_'+troops).addEventListener('change', t.e_calculate, false);
		}
		document.getElementById('pbcombat_1').addEventListener('click', function() t.e_research(1),false);
		document.getElementById('pbcombat_0').addEventListener('click', function() t.e_research(0),false);
	},
	
	e_research : function(side){
		var t = Tabs.Combat;
		t.pop = new CPopup ('pbcombatresearch', 0, 0, 275, 300, true, function(){t.c_ratio(); t.pop.destroy();});
		t.pop.centerMe (mainPop.getMainDiv()); 
		t.pop.getTopDiv().innerHTML = '<div class=showBadged><CENTER><B>Research levels</b>: '+ (side?'Attacker':'defender') +'</center></div>';
		var m = '<DIV><TABLE>';
		for(var k in CombatOptions.research[side]){
			m += '<TR><TD>'+unsafeWindow.techcost[k][0]+':</td><td><input id="pbcombat_'+k+'" /></td></tr>';
		}
		m += '<TR><TD>Combat.knight:</td><td><input id="pbcombat_knt" value='+ CombatOptions.knt[side] +' /></td></tr>';
		m += '<TR><TD>Guardian: </td><td> \
			  <table><tr><td>Tipo: </td><td>'+ htmlSelector({wood:'wood',ore:'ore'},CombatOptions.guardian[side][0],'id=pbcombat_guartype') +'</td></tr><tr>\
			  <td>Nivel: </td><td><input id="pbcombat_guarlvl" value='+ CombatOptions.guardian[side][1] +' size=4 /></td></tr></table>\
			  </td></tr>';
		m += '<TR><TD colspan=2><CENTER><button id=pbcombatresearchsave>Guardar</button></CENTER></td></tr></table></div>';
		t.pop.getMainDiv().innerHTML = m;
		t.pop.centerMe (mainPop.getMainDiv());  
		t.pop.show (true);
		for(var k in CombatOptions.research[side]){
			t.e_saveresearch('pbcombat_'+k, k, side);
		}
		document.getElementById('pbcombat_knt').addEventListener('change',function(){
			CombatOptions.knt[side] = parseInt(document.getElementById('pbcombat_knt').value);
			saveCombatOptions();
		},false);
		document.getElementById('pbcombat_guartype').addEventListener('change',function(){
			CombatOptions.guardian[side][0] = document.getElementById('pbcombat_guartype').value;
			saveCombatOptions();
		},false);
		document.getElementById('pbcombat_guarlvl').addEventListener('change',function(){
			CombatOptions.guardian[side][1] = parseInt(document.getElementById('pbcombat_guarlvl').value);
			saveCombatOptions();
		},false);
		document.getElementById('pbcombatresearchsave').addEventListener('click',t.c_ratio,false);
	},
	
	e_saveresearch : function(checkboxId, optionName, side){
		var t = Tabs.Combat;
		var checkbox = document.getElementById(checkboxId);
		if (CombatOptions.research[side][optionName])
		  checkbox.value = CombatOptions.research[side][optionName];
		checkbox.addEventListener ('change', new eventToggle(checkboxId, optionName, side).handler, false);
		function eventToggle (checkboxId, optionName, side){
		  this.handler = handler;
		  var optName = optionName;
		  function handler(event){
			CombatOptions.research[side][optionName] = parseInt(this.value);
			saveCombatOptions();
		  }
		}
	},
	
	c_ratio : function (){
		var t = Tabs.Combat;
		for(var k in CombatOptions.ratio[0]){
			var attack = parseFloat(t.c_attack(k,0));
			for(var tr in unsafeWindow.unitcost){
				var defense = parseFloat(t.c_defense(tr,1));
				var life = parseFloat(t.c_life(tr,1));
				var ratio = ((life+defense)/attack);
				CombatOptions.ratio[0][k][tr] = ratio.toFixed(20);
			}
		}
		for(var k in CombatOptions.ratio[1]){
			var attack = parseFloat(t.c_attack(k,1));
			for(var tr in unsafeWindow.unitcost){
				var defense = parseFloat(t.c_defense(tr,0));
				var life = parseFloat(t.c_life(tr,0));
				var ratio = ((life+defense)/attack);
				CombatOptions.ratio[1][k][tr] = ratio.toFixed(20);
			}
		}
	},
	
	e_calculate: function(){
		var t = Tabs.Combat;
		t.round = 0;
		t.total[0] = 0;
		t.total[1] = 0;
		t.range[0] = 0
		t.range[1] = 0;
		t.speed[0] = 0;
		t.speed[1] = 0;
		for(var tr in unsafeWindow.unitcost){
			var name = unsafeWindow.unitcost[tr][0];
			t.troops[0][tr] = parseIntNan(document.getElementById('pbcombatd_'+tr).value);
			t.troops[1][tr] = parseIntNan(document.getElementById('pbcombata_'+tr).value);
			t.total[0] += t.troops[0][tr];
			t.total[1] += t.troops[1][tr];
			t.lost[0][tr] = 0;
			t.lost[1][tr] = 0;
			t.active[0][tr] = 0;
			t.active[1][tr] = 0;
			if(t.troops[0][tr]>0 && parseInt(t.stats[tr][4]) > t.range[0]) t.range[0] = parseInt(t.stats[tr][4]);
			if(t.troops[1][tr]>0 && parseInt(t.stats[tr][4]) > t.range[1]) t.range[1] = parseInt(t.stats[tr][4]);
			if(t.troops[0][tr]>0 && parseInt(t.stats[tr][3]) > t.speed[0]) t.speed[0] = parseInt(t.stats[tr][3]);
			if(t.troops[1][tr]>0 && parseInt(t.stats[tr][3]) > t.speed[1]) t.speed[1] = parseInt(t.stats[tr][3]);
		}
		if(t.range[1]>t.range[0]){
			t.start = 1; //Attacker starts first if range is longer than defender
			t.range[2] = t.range[1];
		} else {
			t.start = 0;
			t.range[2] = t.range[0];
		}
		for(var tr in unsafeWindow.unitcost){
			if(t.troops[0][tr]>0)
				t.distance[0][tr] = parseInt(t.range[2]/((t.speed[1]/t.speed[0])+1));
			else
				t.distance[0][tr] = 0;
			if(t.troops[1][tr]>0)
				t.distance[1][tr] = parseInt(t.range[2]/((t.speed[0]/t.speed[1])+1));
			else
				t.distance[1][tr] = 0;
		}
		t.c_rounds();
	},
	
	c_rounds: function(){
		var t = Tabs.Combat;
		if(t.total[0]<1 || t.total[1]<1 || t.round>99){
			t.print();
			return;
		}
		t.round++;
		if(t.round>1){
			for(var tr in t.distance[0]){
				t.distance[0][tr] -= t.stats[tr][3];
				if(t.distance[0][tr] < 1) t.distance[0][tr] = 0;
			}
			for(var tr in t.distance[1]){
				t.distance[1][tr] -= t.stats[tr][3];
				if(t.distance[1][tr] < 1) t.distance[1][tr] = 0;
			}
		}
		t.c_remainder();
	},
	
	c_remainder: function(){  //  Life, Attack, Defense, Speed, Range, Load
		var t = Tabs.Combat;
		for(var tr in t.troops[0]){ //Only troops in range are counted
			if(t.stats[tr][4] >= (t.distance[0][tr]))
				t.active[0][tr] = t.troops[0][tr];
		}
		for(var tr in t.troops[1]){
			if(t.stats[tr][4] >= (t.distance[1][tr]))
				t.active[1][tr] = t.troops[1][tr];
		}
		//Defender
		for(var tr in t.active[0]){
			if(t.active[0][tr] < 1) continue;
			var range = t.stats[tr][4] - t.distance[0][tr];
			var count = 0;
			var type = 0;
			if(tr == 'unt6' || tr == 'unt10' || tr == 'unt12') type = 1;
			while(t.active[0][tr] > 0 && count<t.priority[type].length){
				var trr = 'unt'+t.priority[type][count];
				if((t.troops[1][trr] < 1) || (range < t.distance[1][trr])){
					count++;
					continue;
				}
				if(parseInt(CombatOptions.ratio[0][tr][trr]) < 1){
					if(t.active[0][tr] > t.troops[1][trr]){
						t.active[0][tr] -= t.troops[1][trr];
						t.lost[1][trr] += t.troops[1][trr];
						t.total[1] -= t.troops[1][trr];
						t.troops[1][trr] = 0;
					}else {
						t.lost[1][trr] += t.active[0][tr];
						t.total[1] -= t.active[0][tr];
						t.troops[1][trr] -= t.active[0][tr];
						t.active[0][tr] = 0;
					}
				} else {
					var killed = parseInt(t.active[0][tr]/CombatOptions.ratio[0][tr][trr]);
					if(killed > t.troops[1][trr]){
						t.lost[1][trr] += t.troops[1][trr];
						t.total[1] -= t.troops[1][trr];
						t.active[0][tr] -= parseInt(CombatOptions.ratio[0][tr][trr]* t.troops[1][trr]);
						t.troops[1][trr] = 0;
					} else {
						t.lost[1][trr] += killed;
						t.total[1] -= killed;
						t.troops[1][trr] -= killed;
						t.active[0][tr] = 0;
					}
				}
				count++;
			}
		}
		
		//Attacker
		for(var tr in t.active[1]){
			if(t.active[1][tr] < 1) continue;
			var range = t.stats[tr][4] - t.distance[1][tr];
			var count = 0;
			var type = 0;
			if(tr == 'unt6' || tr == 'unt10' || tr == 'unt12') type = 1;
			while(t.active[1][tr] > 0 && count<t.priority[type].length){
				var trr = 'unt'+t.priority[type][count];
				if((t.troops[0][trr] < 1) || (range < t.distance[0][trr])){
					count++;
					continue;
				}
				if(parseInt(CombatOptions.ratio[1][tr][trr]) < 1){
					if(t.active[1][tr] > t.troops[0][trr]){
						t.active[1][tr] -= t.troops[0][trr];
						t.lost[0][trr] += t.troops[0][trr];
						t.total[0] -= t.troops[0][trr];
						t.troops[0][trr] = 0;
					}else {
						t.lost[0][trr] += t.active[1][tr];
						t.total[0] -= t.active[1][tr];
						t.troops[0][trr] -= t.active[1][tr];
						t.active[1][tr] = 0;
					}
				} else {
					var killed = parseInt(t.active[1][tr]/CombatOptions.ratio[1][tr][trr]);
					if(killed > t.troops[0][trr]){
						t.lost[0][trr] += t.troops[0][trr];
						t.total[0] -= t.troops[0][trr];
						t.active[1][tr] -= parseInt(CombatOptions.ratio[1][tr][trr]* t.troops[0][trr]);
						t.troops[0][trr] = 0;
					} else {
						t.lost[0][trr] += killed;
						t.total[0] -= killed;
						t.troops[0][trr] -= killed;
						t.active[1][tr] = 0;
					}
				}
				count++;
			}
		}
		t.c_rounds();
	},
	
	c_attack: function(tr,side){
		var t = Tabs.Combat;
		var att = t.stats[tr][1];
		if(CombatOptions.research[side].tch8) //Add Poison Edge
			att += t.stats[tr][1]*parseFloat(CombatOptions.research[side].tch8*5/100);
		if(CombatOptions.guardian[side][0] == 'ore' && side == 1){ //Add Guardian Boost
			var boost = 0;
			switch(CombatOptions.guardian[side][1]){
				case 1:
					boost = 0.02;
					break;
				case 2:
					boost = 0.04;
					break;
				case 3:
					boost = 0.06;
					break;
				case 4:
					boost = 0.08;
					break;
				case 5:
					boost = 0.12;
					break;
				case 6:
					boost = 0.16;
					break;
				case 7:
					boost = 0.20;
					break;
				case 8:
					boost = 0.26;
					break;
				case 9:
					boost = 0.32;
					break;
				case 10:
					boost = 0.40;
					break;
				default:
					boost = 0;
			}
			att += t.stats[tr][1]*boost;
		}
		if(CombatOptions.knt[side]) //Add knight boost
			att += t.stats[tr][1]*parseFloat((CombatOptions.knt[side]/2)/100);
		return att;
	},
	c_defense: function(tr,side){
		var t = Tabs.Combat;
		var def = t.stats[tr][2];
		if(CombatOptions.research[side].tch9) //Add Metal Alloy
			def += t.stats[tr][2]*parseFloat(CombatOptions.research[side].tch9*5/100);
		if(CombatOptions.knt[side]) //Add knight boost
			def += t.stats[tr][2]*parseFloat((CombatOptions.knt[side]/2)/100);
		return def;
	},
	c_life: function(tr,side){
		var t = Tabs.Combat;
		var life = t.stats[tr][0];
		if(CombatOptions.research[side].tch15) //Add Healing Potions
			life += t.stats[tr][0]*parseFloat(CombatOptions.research[side].tch15*5/100);
		if(CombatOptions.guardian[side][0] == 'wood' && side == 0){ //Add Guardian Boost
			var boost = 0;
			switch(CombatOptions.guardian[side][1]){
				case 1:
					boost = 0.01;
					break;
				case 2:
					boost = 0.02;
					break;
				case 3:
					boost = 0.03;
					break;
				case 4:
					boost = 0.04;
					break;
				case 5:
					boost = 0.06;
					break;
				case 6:
					boost = 0.08;
					break;
				case 7:
					boost = 0.10;
					break;
				case 8:
					boost = 0.13;
					break;
				case 9:
					boost = 0.16;
					break;
				case 10:
					boost = 0.20;
					break;
				default:
					boost = 0;
			}
			life += t.stats[tr][0]*boost;
		}
		return life;
	},
	
	print: function (){
		var t = Tabs.Combat;
		var m = '<div class=pbStat>results</div><table><TR><TD colspan=3><b>Attacker</b></td><TD colspan=3><b>defender</b></td><TD>round  :'+t.round+'</td></TR>';
		for(var tr in unsafeWindow.unitcost){
			var name = unsafeWindow.unitcost[tr][0];
			m+='<tr><td>'+name+' :</td><td>'+ t.troops[1][tr] +'</td><td><span class=boldRed>'+ t.lost[1][tr] +'</span></td><td>'+name+' :</td><td>'+ t.troops[0][tr] +'</td><td><span class=boldRed>'+ t.lost[0][tr] +'</span></td></tr>';
		}
		m+='</table>';
		document.getElementById('pbcombat_rslt').innerHTML = m;
	},
	show: function(){
	
	},
	
	hide: function(){
	
	},
}

/******************* Throne upgrade **********************/



Tabs.upgrader = {   
	tabOrder: 500,
    tabLabel: 'Upgrader',
    tabDisabled : false,
	myDiv : null,
	timer : null,
	repairId : 0,
	repairEnd : 0,
		
	init : function (div){
       var t = Tabs.upgrader;
       t.myDiv = div;
 
       // header stuff
       var m = '<Div><DIV id=pbUpgrader class=pbStat>AUTOMATED UPGRADER</div><TABLE id=pbupgrader width=100% height=0% class=pbTab><TR align="center">';
	   if (upgradeData.active == false) {
	       m += '<TD><INPUT id=UpgraderPower type=submit value="Upgrade = OFF"></td>';
	   } else {
	       m += '<TD><INPUT id=UpgraderPower type=submit value="Upgrader = ON"></td>';
	   }
	   
	   if (upgradeData.enhanceAction == false) {
	       m += '<TD><INPUT id=UpgraderSelect type=submit value="Action = Upgrade"></td>';
	   } else {
	       m += '<TD><INPUT id=UpgraderSelect type=submit value="Action = Enhance"></td>';
	   }
	   
	   // retry interval entry
 	   m += '<td>Retry interval (seconds): <INPUT id=pbUpRefresh type=text size=3 maxlength=3 value="' +upgradeData.retryInterval+ '"></td>';
 	   m += '</tr>';
 	   m += '<tr><td><div><br></div></td></tr></table></div>';
	   
 	   // upgrade selector
 	   m += '<TABLE  class=pbTabPad2><tr align="center"><td><div><span>Upgrade: <select id="UpgradeList">';
 	   m += '<option value="0">--Items--</option>';
	   for (k in unsafeWindow.kocThroneItems) {
         var throne_item = unsafeWindow.kocThroneItems[k];
         m += '<option value="'+k+'">'+throne_item.name+'</option>';
	   }
       m += '</select></span></div></td>';
       m += '<td><div id=pbUpgradeCost class=indent25> <br> </div></td>';
       m += '</tr></table>';
       
       m += '<tr><td><div> <br> </div></td></tr>';
       
       // enhance selector
 	   m += '<TABLE  class=pbTabPad2><tr align="center"><td><div><span>Enhance: <select id="EnhanceList">';
 	   m += '<option value="0">--Items--</option>';
	   for (k in unsafeWindow.kocThroneItems) {
         var throne_item = unsafeWindow.kocThroneItems[k];
         m += '<option value="'+k+'">'+throne_item.name+'</option>';
	   }
       m += '</select></span></div></td>';
       m += '<td><div> Maximum quality: <select id="MaxQuality">';
       m += '<option value="1">Common</option>';
       m += '<option value="2">Uncommon</option>';
       m += '<option value="3">Rare</option>';
       m += '<option value="4">Epic</option>';
       m += '<option value="5">Wonderous</option>';
       m += '</select></div></td>';
       m += '<td><div id=pbEnhanceCost class=indent25> <br> </div></td></tr>';
       
       m += '<tr><TD><INPUT id=pbSwithUpgrade type=checkbox '+ (upgradeData.switchToUpgrade?' CHECKED':'') +'\>  Switch from enchance to upgrade when complete</td></tr>';
       m += '</tr></table>';
       
       m += '<tr><td><div> <br> </div></td></tr>';
       m += '<tr align="center"><td><div id=pbLastResult class=indent25> <br> </div></td></tr>';
       m += '<tr align="center"><td><div id=pbUpgradeStatus class=indent25> <br> </div></td></tr>';
       m += '<tr><td><div> <br> </div></td></tr>';
       
       m+='</div>';
       t.myDiv.innerHTML = m;
       
       document.getElementById ('UpgradeList').addEventListener ('click', function() {t.setUpgradeItem(this.value);}, false);
	   document.getElementById ('EnhanceList').addEventListener ('click', function() {t.setEnhanceItem(this.value);}, false);
	    
	   document.getElementById ('MaxQuality').addEventListener ('click', function() {
    	  if (this.value >= 0) {
    		  logit(" Enhance max set to: " + this.value);
    		  upgradeData.enhanceMax = this.value;
    		  saveUpgradeData();
    	  }
	    }, false);
	    
	   document.getElementById('pbUpRefresh').addEventListener('change', function(){
		  upgradeData.retryInterval = parseInt(document.getElementById('pbUpRefresh').value);
		  if (upgradeData.retryInterval < 15) upgradeData.retryInterval = 15;
		  saveUpgradeData();
	    }, false);

	   document.getElementById('UpgraderPower').addEventListener('click', function(){t.togglePower(this)} , false);
	   document.getElementById('UpgraderSelect').addEventListener('click', function(){t.toggleSelect(this)} , false);
	   
	   if (unsafeWindow.kocThroneItems[upgradeData.item] != null)
	   {
		 document.getElementById('UpgradeList').value = upgradeData.item;  
	     t.setUpgradeItem(upgradeData.item);
       }
	     
	   if (unsafeWindow.kocThroneItems[upgradeData.enhanceItem] != null)
	   {
		 document.getElementById('EnhanceList').value = upgradeData.enhanceItem;  
	     t.setEnhanceItem(upgradeData.enhanceItem);
       }
	   
	   document.getElementById('MaxQuality').value = upgradeData.enhanceMax;
	   
	   document.getElementById('pbSwithUpgrade').addEventListener('change', function(){
		  upgradeData.switchToUpgrade = document.getElementById('pbSwithUpgrade').checked;
		  saveUpgradeData();
	    }, false); 
	   
	   // wait for the current repair to finish before starting
       t.setResult(Seed.resources["city" + Seed.cities[0][0]]["rec5"][0] + " aetherstones remaing.");
	   t.setStatus("Loading ....");
	   var d = 5;
	   if (Seed.queue_throne != null && Seed.queue_throne.end != null)
	   {
	      var repairTimeLeft = Seed.queue_throne.end- unixTime();
	      //logit("repair time left: " + repairTimeLeft);
	          
	      t.repairEnd = Seed.queue_throne.end;
	      t.repairId = Seed.queue_throne.itemId;
	      var n = new Date(t.repairEnd *1000);

	      t.setStatus("Waiting until " + n.toLocaleTimeString() + " for repair to complete");
	      setTimeout(t.clearRepair, (repairTimeLeft+1)*1000);
	      if (repairTimeLeft >0) d += repairTimeLeft;
      }
	  setTimeout(t.doAction, d*1000);
   },
   
   setUpgradeItem : function(item)
   {
	  if (item <1) item =0;
      upgradeData.item = item;
	  if (item > 0 && unsafeWindow.kocThroneItems[item] != null)
	  {
         logit(" Item selected to upgrade: " + item + "/" + unsafeWindow.kocThroneItems[item].name);
         var lev = unsafeWindow.kocThroneItems[item].level;
         if (lev == 10) lev =9;
         document.getElementById('pbUpgradeCost').innerHTML = "<div> Cost = " + unsafeWindow.cm.thronestats.upgrade[lev+1].Stones + " stones</div>";
      }
      else
      {
	      document.getElementById('pbUpgradeCost').innerHTML = "<div></div>";
      }
      saveUpgradeData();
   },
   
   setEnhanceItem : function(item)
   {
	  if (item <1) item =0;
      upgradeData.enhanceItem = item;
      
      if (item > 0 && unsafeWindow.kocThroneItems[item] != null)
      {
         logit(" Item selected to enhance: " + item + "/" + unsafeWindow.kocThroneItems[item].name);
         var q = unsafeWindow.kocThroneItems[item].quality;
         if (q == 5) q =4;
         document.getElementById('pbEnhanceCost').innerHTML = "<div> Cost = " + unsafeWindow.cm.thronestats.enhance[q+1].Stones + " stones</div>";
      }
      else
      {
	      document.getElementById('pbEnhanceCost').innerHTML = "<div></div>";
      }
      saveUpgradeData();
   },
	
	togglePower: function(obj){
	 var t = Tabs.upgrader;
	 if (upgradeData.active == true) {
		upgradeData.active = false;
		obj.value = "Upgrade = OFF";
		t.setStatus("Powered off");
	} else {
		upgradeData.active = true;
		obj.value = "Upgrade = ON";
		t.setStatus("Power on");
	}
	
	if (upgradeData.active == false)
	{
	   logit("Current stats: " + inspect(upgradeStats,4,1));
	   logit("throne stats: " + inspect(unsafeWindow.cm.thronestats,9,1));
    }
    
	saveUpgradeData();
  },
  
  	toggleSelect: function(obj){
	 var t = Tabs.upgrader;
	 if (upgradeData.enhanceAction == true) {
		upgradeData.enhanceAction = false;
		obj.value = "Action = Upgrade";
	} else {
		upgradeData.enhanceAction = true;
		obj.value = "Action = Enhance";
	}
	saveUpgradeData();
  },
  
  setStatus : function (s)
  {
	  document.getElementById('pbUpgradeStatus').innerHTML = "<div>" + s + "</div>";
  },
  
   setResult : function (s)
  {
	  document.getElementById('pbLastResult').innerHTML = "<div>" + s + "</div>";
  },
  
  doAction :function ()
  {
	  var t = Tabs.upgrader;
	  var retryTime = upgradeData.retryInterval;
	  //logit("do action");
	  try {
		// check if repair is done
		var ti = t.clearRepair();
	    if ( ti <= 0)
	    {
	      // do something
          if (upgradeData.enhanceAction == true)
          {
	        t.doEnhance();
          }	  
          else
          {
	        t.doUpgrade();
          }
        } else {
	        // come back after repair is complete 
	        retryTime = ti + 5;	        
	        var n = new Date(t.repairEnd *1000);
	        t.setStatus("Waiting until " + n.toLocaleTimeString() + " for repair to complete");
        }
        unsafeWindow.cm.ThroneView.renderInventory(unsafeWindow.kocThroneItems);
      } catch(e) {
	      logit ("exception: " + inspect(e,3,1));
      }
      // recycle
      setTimeout(t.doAction, retryTime*1000);
  },
  
  doEnhance : function() {
	    //logit("enhance");
		var t = Tabs.upgrader;
		var eItem = upgradeData.enhanceItem;
		try {
		if (upgradeData.active == false || upgradeData.enhanceAction == false || eItem ==0)
		{ 
			t.setStatus("Powered off");
			return;
		}
		var y = unsafeWindow.kocThroneItems[eItem];
		
		if (!y) return;
		if ( y.quality >= upgradeData.enhanceMax)
		{
			t.setStatus("Enhancing complete");
			actionLog('Throne room item '+unsafeWindow.kocThroneItems[eItem].name + ' is already at quality ' + y.quality);
			
			// switch to upgrade
			if (upgradeData.switchToUpgrade == true && upgradeData.enhanceAction == true)
			{
			  t.toggleSelect(document.getElementById('UpgraderSelect'));
		    }
			return;
		}
		if (y.isBroken) 
		{
			// repair and then try again later
			t.doRepair(eItem);
			return;
		}
		
		if ( Seed.resources["city" + Seed.cities[0][0]]["rec5"][0] < upgradeData.minStones)
		{
		   t.setStatus("Not enough aetherstones to enhance.  Minimum 100k needed.  Waiting for more ...");
		   return;	
		}
		
		var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
		params.ctrl = 'throneRoom\\ThroneRoomServiceAjax';
		params.action = 'upgradeQuality';
		params.throneRoomItemId = eItem;
		params.buffItemId = 0;
		params.payment = "aetherstone";
		params.cityId = Seed.cities[0][0];
		
	    t.setStatus("Sending enhance request");
      	new AjaxRequest(unsafeWindow.g_ajaxpath + "ajax/_dispatch53.php" + unsafeWindow.g_ajaxsuffix, {
			method: "post",
			parameters: params,
			loading: true,
			onSuccess: function (transport) {
				var rslt = eval("(" + transport.responseText + ")");
				//logit("rslt: " + inspect(rslt,3,1));
				if(rslt.ok){
					Seed.resources["city" + Seed.cities[0][0]]["rec5"][0] -= rslt.aetherstones;

					if (rslt.success)
					{					
					   actionLog('Enhanced Throne room item '+unsafeWindow.kocThroneItems[eItem].name + ' to quality ' + rslt.item.quality);
					   upgradeStats.enhanceSuccess[y.quality][y.level]++;
					   y.level = rslt.item.level;
	                   y.quality = rslt.item.quality
					   y.status = rslt.item.status;
					   saveUpgradeStats();
					   y.name = y.createName();
					   t.setResult("Enhance successful.  "  + rslt.aetherstones + " aetherstones used, " +  Seed.resources["city" + Seed.cities[0][0]]["rec5"][0] + " remaing."  );
					   t.setStatus("Waiting for next cycle");
					   // update the cost line
					   t.setEnhanceItem(upgradeData.enhanceItem);
				    }
				    else
				    {
					   actionLog('Enhance failed Throne room item '+unsafeWindow.kocThroneItems[eItem].name);
					   upgradeStats.enhanceFailure[y.quality][y.level]++;
					   y.level = rslt.item.level;
	                   y.quality = rslt.item.quality
					   y.status = rslt.item.status;
					   saveUpgradeStats();
					   y.isBroken = true;
					   y.brokenType = "quality";
					   y.name = y.createName();
					   t.setResult("Enhance failed.  "  + rslt.aetherstones + " aetherstones used, " +  Seed.resources["city" + Seed.cities[0][0]]["rec5"][0] + " remaing.");
					   t.setStatus("Starting repair ...");
					   t.doRepair(y.id);
				    }
				    if (rslt.gems > 0)
				    {
					    actionLog('Upgrader accidentally spent gems!  Turning upgrader off');
					    t.setStatus("Error ... shutting down");
					    upgradeData.active = false;
					    saveUpgradeData();
				    }
				    unsafeWindow.cm.ThroneView.renderInventory(unsafeWindow.kocThroneItems);
				}
				else
			    {
				  logit("Enhance result:" + inspect (rslt, 3, 1));
				  t.setStatus("Unable to enhance at this time ... waiting for next cycle");
			    }
			    return;
			},
			onFailure: function () {
			   logit("Enhance error.  Waiting for next cycle.");
			   t.setStatus("Unable to send enhance request.  Waiting for next cycle");
			   return;
			},
		});
	} catch (e) {
		logit ("excpetion: "+ inspect(e,3,1));
	}
	   return;
	},
	   
	doUpgrade : function() {
		var t = Tabs.upgrader;
		var uItem = upgradeData.item;
		var y = unsafeWindow.kocThroneItems[uItem];
		if (upgradeData.active == false || upgradeData.enhanceAction == true || uItem ==0 || y == null)
		{ 
			t.setStatus("Powered off.");
			return;
		}
		if (y.isBroken) 
		{
			// repair and then try again later
			t.doRepair(uItem);
			return;
		}
		if ( Seed.resources["city" + Seed.cities[0][0]]["rec5"][0] < upgradeData.minStones)
		{
		   t.setStatus("Not enough aetherstones to upgrade.  Minimum 100k needed.  Waiting for more ...");
		   return;	
		}
		
		var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
		params.ctrl = 'throneRoom\\ThroneRoomServiceAjax';
		params.action = 'upgradeLevel';
		params.throneRoomItemId = uItem;
		params.buffItemId = 0;
		params.payment = "aetherstone";
		params.cityId = Seed.cities[0][0];
		t.setStatus("Sending upgrade request ...");
      	new AjaxRequest(unsafeWindow.g_ajaxpath + "ajax/_dispatch53.php" + unsafeWindow.g_ajaxsuffix, {
			method: "post",
			parameters: params,
			loading: true,
			onSuccess: function (transport) {
				var rslt = eval("(" + transport.responseText + ")");
				//logit("rslt: " + inspect(rslt,3,1));
				if(rslt.ok){
					Seed.resources["city" + Seed.cities[0][0]]["rec5"][0] -= rslt.aetherstones;
					if (rslt.success)
					{
					   actionLog('Upgraded Throne room item '+unsafeWindow.kocThroneItems[uItem].name + ' to level ' + rslt.item.level);
					   upgradeStats.upgradeSuccess[y.quality][y.level]++;
					   saveUpgradeStats();
					   y.level = rslt.item.level;
					   y.quality = rslt.item.quality;
					   y.name = y.createName();
					   t.setResult("Upgrade successful.  "  + rslt.aetherstones + " aetherstones used, " +  Seed.resources["city" + Seed.cities[0][0]]["rec5"][0] + " remaing.");
					   t.setStatus("Waiting for next cycle");
					   // update the cost line
					   t.setUpgradeItem(upgradeData.item);
				    }
				    else
				    {
					   actionLog('Upgrade failed Throne room item '+unsafeWindow.kocThroneItems[uItem].name);
					   upgradeStats.upgradeFailure[y.quality][y.level]++;
					   saveUpgradeStats();
					   y.isBroken = true;
					   y.brokenType = "level";
					   y.status = rslt.item.status;
                       y.name = y.createName();
                       t.setResult("Upgrade failed.  "  + rslt.aetherstones + " aetherstones used, " +  Seed.resources["city" + Seed.cities[0][0]]["rec5"][0] + " remaing.");
                       t.setStatus("Starting repair ... ");
                       t.doRepair(uItem);  //fix item
				    }
				    unsafeWindow.cm.ThroneView.renderInventory(unsafeWindow.kocThroneItems);				    
				    if (rslt.gems > 0)
				    {
					    t.setStatus("Error .... Shutting down.");
					    actionLog('Upgrader accidentally spent gems!  Turning upgrader off');
					    upgradeData.active = false;
					    saveUpgradeData();
				    }
				    return;
				}
				else
				{
					t.setStatus("Upgrade request not accepted.  Waiting for next cycle.");
				    logit("Upgrade result:" + inspect (rslt, 3, 1));
			    }
			    //unsafeWindow.cm.ThroneView.renderInventory(unsafeWindow.kocThroneItems);
			    return;
			},
			onFailure: function () {
			   t.setStatus("Unable to transmitt upgrade request.  Waiting for next cycle.");
			   unsafeWindow.cm.ThroneView.renderInventory(unsafeWindow.kocThroneItems);
			   return;
			},
		});
		
		return;
	},
		
	 doRepair : function( rItem) {
		var t = Tabs.upgrader;	
		var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
		
		//logit ("repair");
		if (upgradeData.active == false || rItem == 0 || unsafeWindow.kocThroneItems[rItem] == null)
		{ 
			logit("repair is turned off");
			return;
		}
		var theItem = unsafeWindow.kocThroneItems[rItem];
	
		//var rItem = upgradeData.item;
		params.ctrl = 'throneRoom\\ThroneRoomServiceAjax';
		params.action = 'timeRepair';
		params.throneRoomItemId = rItem;
		params.cityId = Seed.cities[0][0];
	    
      	new AjaxRequest(unsafeWindow.g_ajaxpath + "ajax/_dispatch53.php" + unsafeWindow.g_ajaxsuffix, {
			method: "post",
			parameters: params,
			loading: true,
			onSuccess: function (transport) {
				var rslt = eval("(" + transport.responseText + ")");
				   //logit("rslt: " + inspect(rslt,3,1));
				   if(rslt.ok){
				 	 actionLog('Starting repair for Throne room item '+unsafeWindow.kocThroneItems[rItem].name);
				 	 Seed.queue_throne.itemId= rItem;
		             Seed.queue_throne.start=unixTime();
					 Seed.queue_throne.end= rslt.eta;
					 t.repairId = rItem;
					 t.repairEnd = rslt.eta;
					 var n = new Date(t.repairEnd *1000);
	                 t.setStatus("Repair begun ... Repair will be complete at " + n.toLocaleTimeString());
					 var x = rslt.eta - unixTime();
					 unsafeWindow.cm.ThroneView.renderInventory(unsafeWindow.kocThroneItems);
					 setTimeout(t.clearRepair, (x+1)*1000);
				   }
				   else
				   {
					   if (rslt.msg == "Item is not broken")
					   {
						   t.setStatus("Item is repaired.");
						   t.repairId = rItem;
						   t.repairEnd = 0;
						   t.clearRepair();
					   }
				   }
				   return;
			},
			onFailure: function () {
			    logit("repair error");
			    // this usually means a repair is in progress (such as a manual repair).  Grab the seed data (if possible)
			    if (Seed.queue_throne && Seed.queue_throne.Seed.queue_throne.end)
			    {
				    t.repairEnd = Seed.queue_throne.end;
				    t.repairId = Seed.queue_throne.itemId;
			    }
			   return;
			},
		});
		return;
	},
	
	clearRepair : function () {
		var t = Tabs.upgrader;
		var timeUntilDone = 0;
		//logit(" time, end, id: " + unixTime() +", " + t.repairEnd + ", " + t.repairId);
		
		if (t.repairEnd == 0)
		{
			return timeUntilDone;
		}
		timeUntilDone = t.repairEnd - unixTime();
		   
	    if (timeUntilDone <= 0)
		{
	      //logit("clearing repair");
	      if (t.repairId != 0 && unsafeWindow.kocThroneItems[t.repairId]  != null)
	      {
		     if (unsafeWindow.kocThroneItems[t.repairId].isBroken == true)
	         {
		        t.setStatus("Repair time complete.");
	         }
		     unsafeWindow.kocThroneItems[t.repairId].isBroken = false;
		     unsafeWindow.kocThroneItems[t.repairId].brokenType = "";
		     t.repairId = 0;
	      } 
	      
      }
      unsafeWindow.cm.ThroneView.renderInventory(unsafeWindow.kocThroneItems);
      return timeUntilDone;
	},
		
	show: function(){
	},
	
	hide: function(){
	},		
};






/************************************** END Tabs   ***************************************/


/************  LIB classes/functions .... **************/

function distance (d, f, c, e) {
  var a = 750;
  var g = a / 2;
  var b = Math.abs(c - d);
  if (b > g)
    b = a - b;
  var h = Math.abs(e - f);
  if (h > g)
    h = a - h;
  return Math.round(100 * Math.sqrt(b * b + h * h)) / 100;
};

var MapDistanceFix = {
  popSlotsFunc : null,
  init : function (){
    var t = MapDistanceFix;
    t.popSlotsFunc = new CalterUwFunc ('MapObject.prototype.populateSlots', [['this.distance', 'fixMapDistance_hook']]);
    if (t.popSlotsFunc.isAvailable()){
      unsafeWindow.fixMapDistance_hook = t.fixMapDistance_hook;
      if (Options.fixMapDistance)
        t.enable (true);

    }
  },
  fixMapDistance_hook : function (cityX, cityY, tileX, tileY){
    var city = Cities.byID[unsafeWindow.currentcityid];
    return distance (city.x, city.y, tileX, tileY);
  },
  enable : function (tf){
    var t = MapDistanceFix;
    t.popSlotsFunc.setEnable (tf);
  },
  isAvailable : function (){
    var t = MapDistanceFix;
    return false;
  },
}

    

var GMTclock = {
  span : null,
  timer : null,
  
  init : function (){
    this.span = document.createElement ('span');
    this.span.style.fontWeight = 'bold';
    document.getElementById('kochead_time').parentNode.appendChild (this.span);
    this.setEnable (Options.gmtClock);
  },

  setEnable : function (tf){
    var t = GMTclock;
    clearInterval (t.timer);
    if (tf){
      t.timer = setInterval (t.everySecond, 900);
    } else {
      t.span.innerHTML = '';
    }
  },
    
  everySecond : function (){
    var now = new Date();  
    now.setTime(now.getTime() + (now.getTimezoneOffset()*60000));
    GMTclock.span.innerHTML = ' &nbsp; ('+ now.toLocaleFormat('%H:%M:%S') +' GMT)';
  },
}

function getResourceProduction (cityId){
  var ret = [0,0,0,0,0];
  var now = unixTime ();
  
  var wilds = [0, 0, 0, 0, 0];
  var w = Seed.wilderness["city" + cityId];
  for (var k in w){
    var type = parseInt(w[k].tileType);

    if (type==10 || type==11)
	      wilds[1] += parseInt(w[k].tileLevel);
	    else 
	      wilds[type/10] += parseInt(w[k].tileLevel);
  }  
  knight = 0;       
  var s = Seed.knights["city" + cityId];
  if (s) {
    s = s["knt" + Seed.leaders["city" + cityId].resourcefulnessKnightId];
    if (s){
      var knight = parseInt(s.resourcefulness);
      if (s.resourcefulnessBoostExpireUnixtime > now)
        knight *= 1.25;
    }
  }
  var workerFactor = 1;
  var c = parseInt(Seed.citystats["city" + cityId]["pop"][0]);  // Current  population
  var w = parseInt(Seed.citystats["city" + cityId]["pop"][3]);  // Labor force
  if (w > c)
    workerFactor = c / w;
  
  for (var i=1; i<5; i++){
    var usage = Seed.resources["city" + cityId]["rec" + i];
    var items = 0;
    if (parseInt(Seed.playerEffects["r" + i + "BstExp"]) > now) {
      items = 0.25;
    }
    var tech = Seed.tech["tch" + i];
    ret[i] = parseInt((usage[2] * (1 + tech/10 + knight/100 + items + 0.05 * wilds[i]) * workerFactor + 100));
  }
  return ret;  
}

/************************ Gold Collector ************************/
var CollectGold = {
  timer : null,
  lastCollect : {},
      
  init : function (){
    var t = CollectGold;
    for (var c=0; c<Cities.numCities; c++)
      t.lastCollect['c'+ Cities.cities[c].id] = 0;
    if (Options.pbGoldEnable)
      t.setEnable (true);
  },
  
  setEnable : function (tf){
    var t = CollectGold;
    clearTimeout (t.timer);
    if (tf)
      t.tick();
  },

  colCityName : null,
  colHappy : 0,  
  tick : function (){
    var t = CollectGold;
    for (var c=0; c<Cities.numCities; c++){
      var city = Cities.cities[c];
      var happy = Seed.citystats['city'+ city.id].pop[2];
      var since = unixTime() - t.lastCollect['c'+city.id];
      if (happy>=Options.pbGoldHappy && since>15*60){
        t.lastCollect['c'+city.id] = unixTime();
        t.colCityName = city.name;
        t.colHappy = happy;
        t.ajaxCollectGold (city, t.e_ajaxDone);
        break;
      }
    }
    t.timer = setTimeout (t.tick, 15000);    
  },

  e_ajaxDone : function (rslt){
    var t = CollectGold;
    if (rslt.ok)
      actionLog ('Collected '+ rslt.goldGained +' gold for '+ t.colCityName +' (happiness was '+ t.colHappy +')');
    else
      actionLog ('Error collecting gold for '+ t.colCityName +': <SPAN class=boldRed>'+ rslt.errorMsg +'</span>');
  },
  
  ajaxCollectGold : function (city, notify){
    var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
    params.cid = city.id;
    new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/levyGold.php" + unsafeWindow.g_ajaxsuffix, {
      method: "post",
      parameters: params,
      onSuccess: function (rslt) {
        if (notify)  
          notify (rslt);
      },
      onFailure: function (rslt) {
        if (notify)  
          notify (rslt);
      }
    });
  },
}

/************************ Refresh Every X minutes ************************/
var RefreshEvery  = {
  timer : null,
  PaintTimer : null,
  NextRefresh : 0,
  content : null,
  Original : null,
  alliance: null,
  
  init : function (){
    var t = RefreshEvery;
    t.Original = ById('comm_tabs').innerHTML;
    t.alliance = getMyAlliance()[1];
    if (t.alliance.length >19) t.alliance = t.alliance.substr(0,19);
      if (Options.pbEveryMins < 1)
        Options.pbEveryMins = 1;
      RefreshEvery.setEnable (Options.pbEveryEnable);
  },

  creatediv : function(){
		var t = RefreshEvery;
		t.target = ById('comm_tabs');
		if(t.target == null){
			setTimeout(t.creatediv, 2000);
			return;
		}
		t.box = document.createElement('div');
		t.target.appendChild(t.box);
	},

  setEnable : function (tf){
    var t = RefreshEvery;
    clearTimeout (t.timer);
    if (tf) {
      t.NextRefresh = unixTime() + (Options.pbEveryMins*60); 
      t.timer = setTimeout (t.Paint, 1000);
    }else {
        clearTimeout (t.PaintTimer);
        t.content = t.Original;
        t.content += '<DIV><BR><FONT color=white><B>&nbsp;&nbsp;&nbsp;&nbsp;'+ t.alliance + ' (' + GetServerId() +')</b></font>';
        ById('comm_tabs').innerHTML = t.content;
    }
  },

  doit : function (){
    actionLog ('Refreshing ('+ Options.pbEveryMins +' minutes expired)');
    reloadKOC();
  },

  setTimer : function (){
    var t = RefreshEvery;
    clearTimeout (t.timer);
    if (Options.pbEveryMins < 1) Options.pbEveryMins = 1;
    RefreshEvery.setEnable (Options.pbEveryEnable);
  },

  Paint : function(){
     if (Options.pbEveryEnable){
     var t = RefreshEvery;
     if(t.timer == null) return;
     now = unixTime();
     var Left = parseInt(t.NextRefresh - now);
     if ( Left < 0) {
       Left = 0;
       t.doit();
      }
     t.content = t.Original;
     t.content += '<DIV><BR><FONT color=white><B>&nbsp;&nbsp;&nbsp;&nbsp;'+ t.alliance+ ' (' + GetServerId() +')</b></font>';
     if ( Left < 60) t.content += '<BR><blink><B>Time to refresh: </b></blink><span class=boldRed>'+ timestr(Left) +'</span></div>';
     else t.content += '<BR><B>Time to refresh: </b><span class=boldGreen>'+ timestr(Left) +'</span></div>';
     ById('comm_tabs').innerHTML = t.content;
     t.Timer = setTimeout (t.Paint, 1000);
     }
  },
}

/************************ Fairie Killer ************************/
var FairieKiller  = {
  saveFunc : null,
  init : function (tf){
    FairieKiller.saveFunc = unsafeWindow.Modal.showModalUEP;
    FairieKiller.setEnable (tf);
  },
  setEnable : function (tf){
    if (tf)
      unsafeWindow.Modal.showModalUEP = eval ('function FairieKiller (a,b,c) {actionLog ("Blocked Faire popup");}');
    else
      unsafeWindow.Modal.showModalUEP = FairieKiller.saveFunc;
  },
}

function KOCnotFound(secs){
  var div;
  var countdownTimer = null;
  var endSecs = (new Date().getTime()/1000) + secs;
  div = document.createElement('div');
  div.innerHTML = '<DIV style="font-size:18px; background-color:#a00; color:#fff"><CENTER><BR>KOC KOC PowerKoc detected that is not loaded<BR>\
      refreshing in <SPAN id=pbwdsecs></span><BR><INPUT id=pbwdcan type=submit value="Cancel Refresh"><BR><BR></div>';
  document.body.insertBefore (div, document.body.firstChild);
  document.getElementById('pbwdcan').addEventListener('click', cancel, false);
  countdown();
      
  function countdown (){
    var secsLeft = endSecs - (new Date().getTime()/1000);
    document.getElementById('pbwdsecs').innerHTML = timestr(secsLeft);
    if (secsLeft < 0)
      reloadKOC();
    countdownTimer = setTimeout (countdown, 1000);
  }
  function cancel (){
    clearTimeout (countdownTimer);
    document.body.removeChild (div);
  }
}

var WideScreen = {
  chatIsRight : false,
  rail : null,
  
  init : function (){
    t = WideScreen;
    if (GlobalOptions.pbWideScreen){
      t.rail = searchDOM (document.getElementById('mod_maparea'), 'node.className=="maparea_rrail"', 10);
      GM_addStyle ('.modalCurtain {width:760px !important} .mod_comm_mmb{z-index:0 !important}');  
      try {
        document.getElementById('progressBar').parentNode.removeChild(document.getElementById('progressBar'));
        document.getElementById('crossPromoBarContainer').parentNode.removeChild(document.getElementById('crossPromoBarContainer'));
      } catch (e) {
      }
    }
  },
        
  setChatOnRight : function (tf){
    t = WideScreen;
    if (tf == t.chatIsRight || !GlobalOptions.pbWideScreen)
      return;
    if (tf){
      var chat = document.getElementById('kocmain_bottom').childNodes[1];
      if (!chat || chat.className!='mod_comm')
        setTimeout (function (){t.setChatOnRight(tf)}, 1000);
      chat.style.top = '-637px';
      chat.style.left = '760px';
      chat.style.height = '785px';
      chat.style.background = 'url("'+ CHAT_BG_IMAGE +'")';
      document.getElementById('mod_comm_list1').style.height = '562px'; // 562
      document.getElementById('mod_comm_list2').style.height = '562px';
    } else {
      var chat = document.getElementById('kocmain_bottom').childNodes[1];
      chat.style.top = '0px';
      chat.style.left = '0px';
      chat.style.height = '';
      chat.style.background = '';
      document.getElementById('mod_comm_list1').style.height = '287px';
      document.getElementById('mod_comm_list2').style.height = '287px';
    }
    t.chatIsRight = tf;
  },
  
  useWideMap : function (tf) {
  	t = WideScreen;
  	if (tf == t.useWideMap || !GlobalOptions.pbWideScreen)
  		return;
  	if (tf){
      t.rail.style.display = 'none';
      document.getElementById('mapwindow').style.height = "436px";
      document.getElementById('mapwindow').style.width = "1220px";
      document.getElementById('mapwindow').style.zIndex = "50";
  	} else {
      t.rail.style.display = 'block';
      document.getElementById('mapwindow').style.height = "439px";
      document.getElementById('mapwindow').style.width = "760px";
      document.getElementById('mapwindow').style.zIndex = "";
  	}
  },
}



/*******************   KOC Map interface ****************/
// 0:bog, 10:grassland, 11:lake, 20:woods, 30:hills, 40:mountain, 50:plain, 51:city / barb, 53:misted city
function CMapAjax (){
  this.normalize = normalize;  
  this.request = request;

  function request (left, top, width, notify){    
    var left = parseInt(left / 5) * 5;
    var top = parseInt(top / 5) * 5;
    var width = parseInt((width+4) / 5) * 5;
    
    var blockString = generateBlockList(left, top, width);
    var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
    params.blocks = blockString;
    new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/fetchMapTiles.php" + unsafeWindow.g_ajaxsuffix, {
      method: "post",
      parameters: params,
      onSuccess: function (rslt) {
        notify(left, top, width, rslt);
      },
      onFailure: function (rslt) {
        notify(left, top, width, rslt);
      }
    });
    function generateBlockList (left, top, width) {
      var width5 = parseInt(width / 5);
      var bl = [];
      for (x=0; x<width5; x++){
        var xx = left + (x*5);
        if (xx > 745)
          xx -= 750;
        for (y=0; y<width5; y++){
          var yy = top + (y*5);
          if (yy > 745)
            yy -= 750;
          bl.push ('bl_'+ xx +'_bt_'+ yy);
        }
      }
      return bl.join(",");
    }
  }
 
  function normalize  (x){
    if ( x >= 750)
      x -= 750;
    else if (x < 0)
      x += 750;
    return parseInt (x/5) * 5;
  }
}

var WarnZeroAttack = {
  modalAttackFunc : null,  
  
  init : function (){
    var t = WarnZeroAttack;
    t.modalAttackFunc = new CalterUwFunc ('modal_attack', [['modal_attack_check()', 'modalAttack_hook()']]);
    uW.modalAttack_hook = t.hook;
    t.modalAttackFunc.setEnable(Options.fixWarnZero);
  },
   
  setEnable : function (tf){
    var t = WarnZeroAttack;
    t.modalAttackFunc.setEnable (tf);
  },
  
  isAvailable : function (){
    var t = WarnZeroAttack;
    return t.modalAttackFunc.isAvailable();
  },
    
  hook : function (){
    var t = WarnZeroAttack;
    if (parseIntZero(document.getElementById('modal_attack_target_coords_x').value) == 0
    && parseIntZero(document.getElementById('modal_attack_target_coords_y').value) == 0){
      new CdialogCancelContinue ('<SPAN class=boldRed>You are about to march to location 0,0!</span>', null, uW.modal_attack_check, document.getElementById('modalInner1'));      
    } else {
      uW.modal_attack_check();
    }
  },
  
}



var tabManager = {
  tabList : {},           // {name, obj, div}
  currentTab : null,
  
  init : function (mainDiv){
    var t = tabManager;
    var sorter = [];
    for (k in Tabs){
      if (!Tabs[k].tabDisabled){  
        t.tabList[k] = {};
        t.tabList[k].name = k;
        t.tabList[k].obj = Tabs[k];
        if (Tabs[k].tabLabel != null)
          t.tabList[k].label = Tabs[k].tabLabel;
        else
          t.tabList[k].label = k;
        if (Tabs[k].tabOrder != null)
          sorter.push([Tabs[k].tabOrder, t.tabList[k]]);
        else
          sorter.push([1000, t.tabList[k]]);
        t.tabList[k].div = document.createElement('div');
      }
    }

 sorter.sort (function (a,b){return a[0]-b[0]});   // cambia la distribucion de las pesta as
    var m = '<TABLE cellspacing=3 class=ptMainTab><TR>';
    for (var i=0; i<sorter.length; i++) {
      m += '<TD align=center class=notSel id=pbtc'+ sorter[i][1].name +' ><A><SPAN>'+ sorter[i][1].label +'</span></a></td>';
      if (i==13 || i==27) m+='</tr><TR>';   // indica el numero de pesta as por fila
    }
    m+='</tr></table>';  
    mainPop.getMainTopDiv().innerHTML = m;
    t.currentTab = null;
    for (k in t.tabList) {
      if (t.tabList[k].name == Options.currentTab)
        t.currentTab =t.tabList[k] ;
      document.getElementById('pbtc'+ k).addEventListener('click', this.e_clickedTab, false);
      var div = t.tabList[k].div;
      div.style.display = 'none';
      div.style.height = '100%';
      div.style.maxWidth = '1300px';
      div.style.overflowX = 'auto';
      mainDiv.appendChild(div);
      try {
        t.tabList[k].obj.init(div);
      } catch (e){
        div.innerHTML = "INIT ERROR: "+ e;
      }
    }
    if (t.currentTab == null)
      t.currentTab = sorter[0][1];    
    t.setTabStyle (document.getElementById ('pbtc'+ t.currentTab.name), true);
    t.currentTab.div.style.display = 'block';
  },
  
  hideTab : function (){
    var t = tabManager;
    t.currentTab.obj.hide();
  },
  
  showTab : function (){
    var t = tabManager;
    t.currentTab.obj.show();
  },
    
  setTabStyle : function (e, selected){
    if (selected){
      e.className = 'sel';
    } else {
      e.className = 'notSel';
    }
  },
  
  e_clickedTab : function (e){
    var t = tabManager;
    var newTab = t.tabList[e.target.parentNode.parentNode.id.substring(4)];
    if (t.currentTab.name != newTab.name){
      t.setTabStyle (document.getElementById ('pbtc'+ t.currentTab.name), false);
      t.setTabStyle (document.getElementById ('pbtc'+ newTab.name), true);
      t.currentTab.obj.hide ();
      t.currentTab.div.style.display = 'none';
      t.currentTab = newTab;
      newTab.div.style.display = 'block';
      Options.currentTab = newTab.name;      
    }
    newTab.obj.show();
  },
}

function onUnload (){
  Options.pbWinPos = mainPop.getLocation();
  saveOptions();
  if (!ResetColors) saveColors();
}

function mouseMainTab (me){   // right-click on main button resets window location
  if (me.button == 2){
    var c = getClientCoords (document.getElementById('main_engagement_tabs'));
    mainPop.setLocation ({x: c.x+4, y: c.y+c.height});
  }
}

function eventHideShow (){
  if (mainPop.toggleHide(mainPop)){
    tabManager.showTab();
    Options.pbWinIsOpen = true;
  } else {
    tabManager.hideTab();
    Options.pbWinIsOpen = false;
  }
  saveOptions();
}

function hideMe (){
  mainPop.show (false);
  tabManager.hideTab();
  Options.pbWinIsOpen = false;
  saveOptions();
}

function showMe (){
  mainPop.show (true);
  tabManager.showTab();
  Options.pbWinIsOpen = true;
  saveOptions();
}

function addMyFunction (func){      // add function to run in our own scope
  unsafeWindow[func.name] = func;
}

function addUwFunction (func){      // add function to run in unsafeWindow's scope
  var scr = document.createElement('script');
	scr.innerHTML = func.toString();
	document.body.appendChild(scr);
}

function alterUwFunction (funcName, frArray){
  try {
    funcText = unsafeWindow[funcName].toString();
    rt = funcText.replace ('function '+funcName, 'function');
    for (i=0; i<frArray.length; i++){
      x = rt.replace(frArray[i][0], frArray[i][1]);
      if (x == rt)
        return false;
      rt = x;
    }
    js = funcName +' = '+ rt;
  	var scr=document.createElement('script');
  	scr.innerHTML=js;
  	document.body.appendChild(scr);
  	return true;
  } catch (err) {
    return false;
  }
}

function getResearchLevels () {
	for (var t=1; t < 17; t++) {
		if (t != 7) {
			researchLevels[t] = {};
			researchLevels[t].Id = t;
			researchLevels[t].Name = unsafeWindow.techcost['tch'+t][0].replace (/&#39;/img, '\'');
			researchLevels[t].Level = parseInt(Seed.tech['tch'+t]);
			researchLevels[t].NextLevelETA = 0;
		}
	}
	var q;
	var now = unixTime();
	for(var i=0; i<Cities.numCities; i++) { // each city
		var cityID = 'city'+ Cities.cities[i].id;
		q = Seed.queue_tch[cityID];
		if (q[0] != undefined)
			researchLevels[parseInt(q[0][0])].NextLevelETA = parseInt(q[0][3]) - now;
	}
}

function highlightLowBuilding (noBuildings, buildingLevel, buildingPrefix){
	var ret = '';
	if (buildingLevel<9)
		ret += '<SPAN class=boldRed>';
	if (noBuildings>1)
		ret += noBuildings + ' x ';
	if (buildingPrefix)
		ret += buildingPrefix;
	ret += 'lvl ' + buildingLevel;
	if (buildingLevel<9)
		ret += '</SPAN>';
	return ret;
}

function getAllCityBuildings (cityID){
	var b = Seed.buildings[cityID];
	var castleLevel = parseInt(b['pos0'][1]);
	var noFields = 10 + 3 * castleLevel;
	if (castleLevel==11)
	noFields = 40;
	sumCastle = highlightLowBuilding(1,castleLevel);
	sumCottage = '';
	sumTavern = '';
	sumKnightsHall = '';
	sumEmbassy = '';
	sumStorehouse = '';
	sumMarket = '';
	sumAlchemyLab = '';
	sumRallyPoint = '';
	sumBarracks = '';
	sumWatchTower = '';
	sumBlacksmith = '';
	sumWorkshop = '';
	sumStable = '';
	sumReliefStation = '';
	sumWall = '';
	sumGuardian = '';
	sumInside = 0;
	sumFarm = '';
	sumSawmill = '';
	sumQuarry = '';
	sumMine = '';
	sumOutside = 0;
	arrCottage = [];
	arrBarracks = [];
	arrFarm = [];
	arrSawmill = [];
	arrQuarry = [];
	arrMine = [];
	for (var i=1; i<12; i++){
		arrCottage[i]=0;
		arrBarracks[i]=0;
		arrFarm[i]=0;
		arrSawmill[i]=0;
		arrQuarry[i]=0;
		arrMine[i]=0;
	}
	for (var i=1; i<33; i++){
		if (b['pos'+i]) {
			bname = b['pos'+i][0];
			blvl = b['pos'+i][1];
			if (bname==5)
				arrCottage[blvl]++;
			if (bname==6)
				sumTavern = highlightLowBuilding(1,blvl);
			if (bname==7)
				sumKnightsHall = highlightLowBuilding(1,blvl);
			if (bname==8)
				sumEmbassy = highlightLowBuilding(1,blvl);
			if (bname==9)
				sumStorehouse = highlightLowBuilding(1,blvl);
			if (bname==10)
				sumMarket = highlightLowBuilding(1,blvl);
			if (bname==11)
				sumAlchemyLab = highlightLowBuilding(1,blvl);
			if (bname==12)
				sumRallyPoint = highlightLowBuilding(1,blvl);
			if (bname==13)
				arrBarracks[blvl]++;
			if (bname==14)
				sumWatchTower = highlightLowBuilding(1,blvl);
			if (bname==15)
				sumBlacksmith = highlightLowBuilding(1,blvl);
			if (bname==16)
				sumWorkshop = highlightLowBuilding(1,blvl);
			if (bname==17)
				sumStable = highlightLowBuilding(1,blvl);
			if (bname==18)
				sumReliefStation = highlightLowBuilding(1,blvl);
			if (bname==19)
				sumWall = highlightLowBuilding(1,blvl);
		}
		else
			sumInside += 1;
	}
	for (var i=100; i<100+noFields; i++){
		if (b['pos'+i]) {
			bname = b['pos'+i][0];
			blvl = b['pos'+i][1];
			if (bname==1) arrFarm[blvl]++;
			if (bname==2) arrSawmill[blvl]++;
			if (bname==3) arrQuarry[blvl]++;
			if (bname==4) arrMine[blvl]++;
		}
		else
			sumOutside += 1;
	}
	for (var i=1; i<12; i++){
		if(arrCottage[i]>0)
			sumCottage+=highlightLowBuilding(arrCottage[i],i)+'<BR>';
		if(arrBarracks[i]>0)
			sumBarracks+=highlightLowBuilding(arrBarracks[i],i)+'<BR>';
		if(arrFarm[i]>0)
			sumFarm+=highlightLowBuilding(arrFarm[i],i)+'<BR>';
		if(arrSawmill[i]>0)
			sumSawmill+=highlightLowBuilding(arrSawmill[i],i)+'<BR>';
		if(arrQuarry[i]>0)
			sumQuarry+=highlightLowBuilding(arrQuarry[i],i)+'<BR>';
		if(arrMine[i]>0)
			sumMine+=highlightLowBuilding(arrMine[i],i)+'<BR>';
	}
	if (sumCottage.length>0)
		sumCottage=sumCottage.substring (0,sumCottage.length-4);
	if (sumBarracks.length>0)
		sumBarracks=sumBarracks.substring (0,sumBarracks.length-4);
	if (sumFarm.length>0)
		sumFarm=sumFarm.substring (0,sumFarm.length-4);
	if (sumSawmill.length>0)
		sumSawmill=sumSawmill.substring (0,sumSawmill.length-4);
	if (sumQuarry.length>0)
		sumQuarry=sumQuarry.substring (0,sumQuarry.length-4);
	if (sumMine.length>0)
		sumMine=sumMine.substring (0,sumMine.length-4);
	if (b['pos500']) {
		blvl = b['pos500'][1];
		bname = unsafeWindow.buildingcost['bdg' + b['pos500'][0]][0];
		bname = bname.substr(0,bname.length-8);
		sumGuardian = highlightLowBuilding(1,blvl,bname);
	}
	else
		sumInside += 1;
	if (sumInside==0)
		sumInside='Full';
	else
		sumInside='<SPAN class=boldRed>'+sumInside+' empty</SPAN>';
	if (sumOutside==0)
		sumOutside='Full';
	else
		sumOutside='<SPAN class=boldRed>'+sumOutside+' empty</SPAN>';
}

function getBuildingLevels (cityID){
	var b = Seed.buildings[cityID];
	city.levelTavern = 0;
	city.levelKnightsHall = 0;
	city.levelEmbassy = 0;
	city.levelStorehouse = 0;
	city.levelMarket = 0;
	city.levelAlchemyLab = 0;
	city.levelRallyPoint = 0;
	city.slotsRallyPoint = 0;
	city.troopsRallyPoint = 0;
	city.numBarracks = 0;
	city.maxBarracks = 0;
	city.totLevelsBarracks = 0;
	city.levelWatchTower = 0;
	city.levelBlacksmith = 0;
	city.levelWorkshop = 0;
	city.levelStable = 0;
	city.levelReliefStation = 0;
	city.levelWall = 0;
	for (var j=1; j<33; j++){
		if (b['pos'+j]) {
			var bname = parseInt(b['pos'+j][0]);
			var blvl = parseInt(b['pos'+j][1]);
			if (bname==6)
				city.levelTavern = blvl;
			else if (bname==7)
				city.levelKnightsHall = blvl;
			else if (bname==8)
				city.levelEmbassy = blvl;
			else if (bname==9)
				city.levelStorehouse = blvl;
			else if (bname==10)
				city.levelMarket = blvl;
			else if (bname==11)
				city.levelAlchemyLab = blvl;
			if (bname==12) {
				city.levelRallyPoint = blvl;
				if (blvl < 11) {
					city.slotsRallyPoint = blvl;
					city.troopsRallyPoint = blvl * 10000;
				} else if (blvl == 11) {
					city.slotsRallyPoint = 11;
					city.troopsRallyPoint = 150000;
				} else {
					city.slotsRallyPoint = 11;
					city.troopsRallyPoint = 200000;
				}
			} else if (bname==13) {
				city.numBarracks++;
				city.totLevelsBarracks += parseInt(blvl);
				if (blvl>city.maxBarracks)
					city.maxBarracks=blvl;
			} else if (bname==14)
				city.levelWatchTower = blvl;
			else if (bname==15)
				city.levelBlacksmith = blvl;
			else if (bname==16)
				city.levelWorkshop = blvl;
			else if (bname==17)
				city.levelStable = blvl;
			else if (bname==18)
				city.levelReliefStation = blvl;
			else if (bname==19)
				city.levelWall = blvl;
		}
	}
}

function getRaidTroops (cityID){
	city.raidMarch = {};
	for (var r in Seed.queue_atkp[cityID]){
		march = Seed.queue_atkp[cityID][r];
		if (typeof (march) == 'object'){
			if (march.botMarchStatus != undefined) {
				city.raidMarch[r] = [];
				for (ii=0; ii<13; ii++)
					city.raidMarch[r][ii] = parseInt (march['unit'+ ii +'Count']);
			}
		}
	}
}

function getTroopDefTrainEstimates (cityID,cityId){
	var b = Seed.buildings[cityID];
	city.numBarracks = 0;
	city.maxBarracks = 0;
	city.totLevelsBarracks = 0;
	city.blacksmithLevel = 0;
	city.stableLevel = 0;
	city.workshopLevel = 0;
	city.wallLevel = 0;
	for (var j=1; j<33; j++){
		if (b['pos'+j]) {
			var bname = parseIntNan(b['pos'+j][0]);
			var blvl = parseIntNan(b['pos'+j][1]);
			if (bname==13) {
				city.numBarracks++;
				city.totLevelsBarracks += parseInt(blvl);
				if (blvl>city.maxBarracks) city.maxBarracks=blvl;
			}
			if (bname==16)
				city.blacksmithLevel = blvl;
			if (bname==15)
				city.workshopLevel = blvl;
			if (bname==17)
				city.stableLevel = blvl;
			if (bname==19)
				city.wallLevel = blvl;
		}
	}

	var now = unixTime();
	city.marshallCombatScore = 0;
	var s = Seed.knights[cityID];
	if (s) {
		s = s["knt" + Seed.leaders[cityID].combatKnightId];
		if (s){
			city.marshallCombatScore = s.combat;
			if (s.combatBoostExpireUnixtime > now)
				city.marshallCombatScore *= 1.25;
		}
	}
	city.foremanBasePoliticsScore = 0;
	var s = Seed.knights[cityID];
	if (s) {
		s = s["knt" + Seed.leaders[cityID].politicsKnightId];
		if (s) {
			city.foremanBasePoliticsScore = s.politics;
	 	     if (s.politicsBoostExpireUnixtime > now)
				city.foremanBasePoliticsScore *= 1.25;
	 }
	}

	city.loggingLevel = parseInt(Seed.tech["tch2"]);
	city.geometryLevel = parseInt(Seed.tech["tch5"]);
	city.eagleEyesLevel = parseInt(Seed.tech["tch6"]);
	city.poisonedEdgeLevel = parseInt(Seed.tech["tch8"]);
	city.metalAlloysLevel = parseInt(Seed.tech["tch9"]);
	city.featherweightPowderLevel = parseInt(Seed.tech["tch10"]);
	city.alloyHorseshoesLevel = parseInt(Seed.tech["tch12"]);
	city.fletchingLevel = parseInt(Seed.tech["tch13"]);
	city.giantsStrengthLevel = parseInt(Seed.tech["tch16"]);
	var bm = city.numBarracks + 0.1 * (city.totLevelsBarracks - city.numBarracks);
	var mf = city.marshallCombatScore/200;
	var gf = city.geometryLevel/10;
	var sf = city.stableLevel/10;
	var wf = city.blacksmithLevel/10;
	var isf = bm * (1+mf+gf);
	var csf = bm * (1+mf+gf+sf);
	var ssf = bm * (1+mf+gf+sf+wf);
	var pf = city.foremanBasePoliticsScore/200;
	var gsf = city.giantsStrengthLevel/10;
	var dsf = 1+pf+gsf;
	var h=EffetTronePrc(77).percent;
	var boost=(1+(h/100));
        if(uW.cm.WorldSettings.isOn("GUARDIAN_MARCH_EFFECT")){
        var SPD={0:0,1:1,2:1,3:2,4:2,5:3,6:3,7:4,8:5,9:7,10:10};
          var b=0,y=false,v=false,w=0;
          var mm=Seed.guardian;
          for (var ii in mm) {
           var ww = mm[ii];
            if (ww.cityId==cityId) {
            if (ww.type== "stone") y=true;
            if (ww.guardianCount==4) v=true;
            var level=0;
            if (ww.cityGuardianLevels.stone!=undefined) level = ww.cityGuardianLevels.stone;
            w = SPD[level] / 100;
            var bx = 0;
                if (y && v) {
                    bx = 1.5;
                }
                if (y && !v) {
                    bx = 1;
                }
                if (!y && v) {
                    bx = 0.5;
                }
                if (!y && !v) {
                    bx = 0;
                }
                b = w * bx;
                
                
                boost=boost*(1+b);
           }     
         
         }
       }

	city.Troop1Time = ((city.maxBarracks > 0)?((parseInt(unsafeWindow.unitcost["unt1"][7])/boost)/isf):0);
	city.Troop2Time = ((city.maxBarracks > 0)?((parseInt(unsafeWindow.unitcost["unt2"][7])/boost)/isf):0);
	city.Troop3Time = ((city.maxBarracks > 1 && city.eagleEyesLevel > 0)?((parseInt(unsafeWindow.unitcost["unt3"][7])/boost)/isf):0);
	city.Troop4Time = ((city.maxBarracks > 1 && city.poisonedEdgeLevel > 0)?((parseInt(unsafeWindow.unitcost["unt4"][7])/boost)/isf):0);
	city.Troop5Time = ((city.maxBarracks > 2 && city.workshopLevel > 0 && city.metalAlloysLevel > 0)?((parseInt(unsafeWindow.unitcost["unt5"][7])/boost)/isf):0);
	city.Troop6Time = ((city.maxBarracks > 3 && city.fletchingLevel > 0)?((parseInt(unsafeWindow.unitcost["unt6"][7])/boost)/isf):0);
	city.Troop7Time = ((city.maxBarracks > 4 && city.stableLevel > 0 && city.alloyHorseshoesLevel > 0)?((parseInt(unsafeWindow.unitcost["unt7"][7])/boost)/csf):0);
	city.Troop8Time = ((city.maxBarracks > 6 && city.workshopLevel > 4 && city.stableLevel > 4 && city.alloyHorseshoesLevel > 4)?((parseInt(unsafeWindow.unitcost["unt8"][7])/boost)/csf):0);
	city.Troop9Time = ((city.maxBarracks > 5 && city.stableLevel > 0 && city.blacksmithLevel > 2 && city.featherweightPowderLevel > 0)?((parseInt(unsafeWindow.unitcost["unt9"][7])/boost)/ssf):0);
	city.Troop10Time = ((city.maxBarracks > 7 && city.stableLevel > 1 && city.blacksmithLevel > 4 && city.geometryLevel > 4 && city.fletchingLevel > 5)?((parseInt(unsafeWindow.unitcost["unt10"][7])/boost)/ssf):0);
	city.Troop11Time = ((city.maxBarracks > 8 && city.workshopLevel > 4 && city.stableLevel > 2 && city.blacksmithLevel > 6 && city.metalAlloysLevel > 7 && city.geometryLevel > 6)?((parseInt(unsafeWindow.unitcost["unt11"][7])/boost)/ssf):0);
	city.Troop12Time = ((city.maxBarracks > 9 && city.stableLevel > 1 && city.blacksmithLevel > 8 && city.geometryLevel > 9 && city.fletchingLevel > 9)?((parseInt(unsafeWindow.unitcost["unt12"][7])/boost)/ssf):0);

	city.Def53Time = ((city.wallLevel > 5 && city.blacksmithLevel > 5 && city.fletchingLevel > 4)?(180/dsf):0);
	city.Def55Time = ((city.wallLevel > 7 && city.blacksmithLevel > 7 && city.fletchingLevel > 6 && city.geometryLevel > 6)?(135/dsf):0);
	city.Def60Time = ((city.wallLevel > 3 && city.blacksmithLevel > 3 && city.poisonedEdgeLevel > 1)?(90/dsf):0);
	city.Def61Time = ((city.wallLevel > 0 && city.metalAlloysLevel > 0)?(30/dsf):0);
	city.Def62Time = ((city.wallLevel > 1 && city.blacksmithLevel > 1 && city.loggingLevel > 1)?(60/dsf):0);
}


function estimateTroopETA (dist, cityId, troopId, fhFlag) { // Need Relief Station Levels to estimate transport, reinf, or reassign times.
	var ret = {ETAstr: '', hsec: 0, fsec: 0};
	if (dist < 0.1 || parseInt(troopId) == 0) {
		ret.ETAstr = 'No ETA';
	} else {
		var baseSpeed = unsafeWindow.unitstats['unt'+troopId][3];
		var mmLvl = parseInt(Seed.tech.tch11);//Magical Mapping
		var Speed;
		if (troopId > 6) { // HorsesSiegeSpeed = Base * (1 + MM/10) * (1 + AH/20)
			var hsLvl = parseInt(Seed.tech.tch12);//Alloy Horse Shoes
			Speed = baseSpeed * (1.0 + 0.1*mmLvl) * (1.0 + 0.05*hsLvl);
		} else {
			//FootSpeed = Base * (1 + MM/10)
			Speed = baseSpeed * (1 + 0.1*mmLvl);
		}
		var gSpeed = Speed / 6000; // Grid Speed (tiles/second) = Speed (100ths/min) / 6000
		ret.hsec = (30 + dist/gSpeed).toFixed(0);
		if (fhFlag == 'FH' || fhFlag == 'H') {
			ret.ETAstr = 'Attack ETA: <B>' + timestr(ret.hsec, 1) +'</B>';
		}
		if (cityId > -1) {
			var building = getCityBuilding (cityId, 18);
			if (building) {
				fSpeed = Speed * (1 + parseInt(building.maxLevel)/2);
				gSpeed = fSpeed/6000;
				ret.fsec = (30 + dist/gSpeed).toFixed(0);
				var friendTimestr = 'Friendly ETA: <B>' + timestr(ret.fsec, 1) +'</B>';
				if (fhFlag == 'F')
					ret.ETAstr = friendTimestr;
				else if (fhFlag == 'FH')
					ret.ETAstr = friendTimestr + ', ' + ret.ETAstr;
			}
		}
	}
	return ret;
}

function formatUnixTime (unixTimeString,format){
	var rtn = unsafeWindow.formatDateByUnixTime (unixTimeString);
	return rtn;
}

function officerId2String (oid){
  if (oid==null)
    return '';
 else if (oid==3) 	
    return uW.allianceOfficerTypeMapping[3];
  else if (oid==2)
    return uW.allianceOfficerTypeMapping[2];
  else if (oid==1)
    return uW.allianceOfficerTypeMapping[1];
     else if (oid==4)
    return uW.allianceOfficerTypeMapping[4];
  return '';
}

function officerId2FullString (oid){
	if (oid==null)
		return '';
	else if (oid==4)
		return 'MEMBER';
	else if (oid==3)
		return 'Officer';
	else if (oid==2)
		return 'Vice Chance';
	else if (oid==1)
		return 'Chancellor';
	return '';
}

// returns: 'neutral', 'friendly', ally, or 'hostile'
function getDiplomacy2 (aid) {
  if (Seed.allianceDiplomacies == null)
    return 'Neutral';
  if (Seed.allianceDiplomacies.friendly && Seed.allianceDiplomacies.friendly['a'+aid] != null)
    return 'friendly';
  if (Seed.allianceDiplomacies.hostile && Seed.allianceDiplomacies.hostile['a'+aid] != null)
    return 'Hostile';
  if(getMyAlliance()[0] == aid)
  return 'ally'; 
  return 'Neutral';
};

// returns {count, maxlevel}
function getCityBuilding (cityId, buildingId){
  var b = Seed.buildings['city'+cityId];
  var ret = {count:0, maxLevel:0};
  for (var i=1; i<33; i++){
    if (b['pos'+i] && b['pos'+i][0] == buildingId){
      ++ret.count;
      if (parseInt(b['pos'+i][1]) > ret.maxLevel)
        ret.maxLevel = parseInt(b['pos'+i][1]);
    }
  }
  return ret;
}

/************ DEBUG WIN *************/
var debugWin = {
	popDebug:			null,
	dbDefaultNot:	'tech,tutorial,items,quests,wilderness,wildDef,buildings,knights,allianceDiplomacies,appFriends,players',
	dbSelect:			{},
	sortSeed:			[],
	sortNonSeed:	[],

	doit: function (){
		var t = debugWin;

		function syncBoxes (){
			for (var i=0; i<t.sortSeed.length; i++){
				var name = t.sortSeed[i];
				var box = document.getElementById('dbpop_'+name);
				box.checked = t.dbSelect[name];
			}
		}
		function clickedAll (){
			for (var k in t.dbSelect)
				t.dbSelect[k] = true;
			syncBoxes();
		}
		function clickedNone (){
			for (var k in t.dbSelect)
				t.dbSelect[k] = false;
			syncBoxes();
		}
		function clickedDefaults (){
			for (k in t.dbSelect)
				t.dbSelect[k] = true;
			var not = t.dbDefaultNot.split(',');
			for (var i=0; i<not.length; i++)
				t.dbSelect[not[i]] = false;
			syncBoxes();
		}
		function clickedShow (){
			var resultsDiv = document.getElementById('idDebugResultsDiv')
			var s = '<PRE>';
			for (var i=0; i<t.sortSeed.length; i++){
				var name = t.sortSeed[i];
				var box = document.getElementById('dbpop_'+name);
				if (box.checked)
					s += name + " =\n" + inspect (Seed[name], 10, 1);
			}
			resultsDiv.innerHTML = s + '</PRE>';
		}

		function clickedShowNonSeed (){
			var resultsDiv = document.getElementById('idDebugResultsDiv');
			nsvalue = document.getElementById('dbnonseed').value;
			if (nsvalue != '') {
				val = unsafeWindow[nsvalue];
				valtype = typeof(val);
				resultsDiv.innerHTML = '<PRE>(' + valtype + ') ' + nsvalue + ((valtype == 'string')?(" = " + val):(" =\n" + inspect (val, 10, 1))) + '</PRE>';
			}
		}

		function clickedShowScripts (){
			var resultsDiv = document.getElementById('idDebugResultsDiv')
			var scripts = document.getElementsByTagName('script');
			var s = '';
			for (var i=0; i<scripts.length; i++)
				if (scripts[i].src!=null && scripts[i].src!='')
					s+='<A TARGET=_tab HREF="'+ scripts[i].src +'">'+ scripts[i].src +'</A><BR />';
			resultsDiv.innerHTML = s;
		}

		if (t.popDebug == null){
			t.popDebug = new CPopup ('db', 0, 45, 749, 900, true);
			t.popDebug.getTopDiv().innerHTML = '<DIV align=center><B>DEBUG</B></DIV>';
			var sl = 0;
			for (var k in Seed) {
				t.dbSelect[k] = true;
				t.sortSeed[sl] = k;
				sl++;
			}
			t.sortSeed.sort();
			sl = 0;
			for (var k in unsafeWindow) {
				kType = typeof(unsafeWindow[k]);
				if ((k.indexOf('actionlink_data') != 0) && (k != 'content') && (k != 'document') && (k.indexOf('feed') != 0) && (k.indexOf('frame') != 0) && (k != 'globalStorage') &&
					(k != 'g_mapObject') && (k != 'history') && (k != 'Modal') && (k != 'navigator') && (k != 'parent') && (k.indexOf('pb') != 0) && (k.indexOf('pt') != 0) && (k != 'seed') &&
					(k != 'self') && (k.indexOf('template_data') != 0) && (k != 'that') && (k != 'window') && (k != '_htmlElement') && (kType != 'function') && (kType != 'undefined')) {
					t.sortNonSeed[sl] = k;
					sl++;
				}
			}
			t.sortNonSeed.sort(function(x,y) {var a = String(x).toUpperCase(); var b = String(y).toUpperCase(); if (a > b) return 1; else if (a < b) return -1; else return 0;});
			var nsSelect = '<SELECT id="dbnonseed"><OPTION value="" ></option>';
			for (var i=0; i<t.sortNonSeed.length; i++)
				nsSelect += '<OPTION value="' + t.sortNonSeed[i] + '" >' + t.sortNonSeed[i] + '</option>';
			nsSelect += '</SELECT>';
			var not = t.dbDefaultNot.split(',');
			for (var i=0; i<not.length; i++)
				t.dbSelect[not[i]] = false;
			var m = '<DIV class=ptentry><B>Seed: </B><INPUT type=submit id=dbsuball value=ALL>&nbsp;<INPUT type=submit id=dbsubnone value=NONE>&nbsp;' +
				'<INPUT type=submit id=dbdefaults value=DEFAULTS>&nbsp;<INPUT type=submit id=dbsubdo value=SHOW>&nbsp;<INPUT type=submit id=dbsubscripts value=SCRIPTS><BR /><TABLE width=100%>';
			var cols = 5;
			var entries = t.sortSeed.length;
			var rows = parseInt (0.99 + entries / cols);
			for (var rowno=1; rowno<=rows; rowno++) {
				m += '<TR>';
				for (colno=1; colno<=cols; colno++) {
					var slvalue = rows*(colno-1)+rowno-1;
					m += ((slvalue < entries)?('<TD class=xtab><INPUT type=checkbox id="dbpop_'+t.sortSeed[slvalue]+'">&nbsp;'+t.sortSeed[slvalue]+'</TD>'):'<TD class=xtab></TD>');
				}
				m += '</TR>';
			}
			m += '</TABLE><B>Non-Seed: </B>' + nsSelect + '</DIV><DIV id="idDebugResultsDiv" style="width:738px; height:600px; max-height:600px; overflow-y:auto; white-space:pre-wrap;"></DIV>';
			t.popDebug.getMainDiv().innerHTML = m;
			document.getElementById('dbsuball').addEventListener('click', clickedAll, false);
			document.getElementById('dbsubnone').addEventListener('click', clickedNone, false);
			document.getElementById('dbdefaults').addEventListener('click', clickedDefaults, false);
			document.getElementById('dbsubdo').addEventListener('click', clickedShow, false);
			document.getElementById('dbsubscripts').addEventListener('click', clickedShowScripts, false);
			document.getElementById('dbnonseed').addEventListener('change', clickedShowNonSeed, false);
			syncBoxes();
		}
		t.popDebug.show (true);
	},
}

function getTrainInfo (){
  var ret = {};

  ret.trainUnts = [];
  for (i=0; i<13; i++){
    ret.trainUnts[i] = 0;
  }
  
  var q = Seed.queue_unt;
  for(i=0; i<Cities.numCities; i++) {   // each city
    cityID = 'city'+ Cities.cities[i].id;
	q = Seed.queue_unt[cityID];
	if (q && q.length>0){
	  for (qi=0; qi<q.length; qi++)
          ret.trainUnts[q[qi][0]] += parseInt(q[qi][1]);
	  }
    }
  return ret;
}

var fortNamesShort = {
  53: "crossbows",
  55: "trebuchets",
  60: "trap",
  61: "Caltrop",
  62: "Spiked Barrier",
}

// onClick (city{name, id, x, y}, x, y)   city may be null!
function CdispCityPicker (id, span, dispName, notify, selbut){
  function CcityButHandler (t){
    var that = t;
    this.clickedCityBut = clickedCityBut;
    function clickedCityBut (e){
      if (that.selected != null)
        that.selected.className = "castleBut castleButNon";
      that.city = Cities.cities[e.target.id.substr(that.prefixLen)];
      if (that.dispName)
        document.getElementById(that.id+'cname').innerHTML = that.city.name;
      e.target.className = "castleBut castleButSel";
      that.selected = e.target;
      if (that.coordBoxX){
        that.coordBoxX.value = that.city.x;
        that.coordBoxY.value = that.city.y;
        var evt = document.createEvent("HTMLEvents");
        evt.initEvent('change', true, true ); // event type,bubbling,cancelable
        that.coordBoxX.dispatchEvent(evt);
        that.coordBoxY.dispatchEvent(evt);
        that.coordBoxX.style.backgroundColor = '#ffffff';
        that.coordBoxY.style.backgroundColor = '#ffffff';
      }
      if (that.notify != null)
        that.notify(that.city, that.city.x, that.city.y);
    }
  }

  function selectBut (idx){
    document.getElementById(this.id+'_'+idx).click();
  }

  function bindToXYboxes (eX, eY){
    function CboxHandler (t){
      var that = t;
      this.eventChange = eventChange;
      if (that.city){
        eX.value = that.city.x;
        eY.value = that.city.y;
      }
      function eventChange (){
		var xValue=that.coordBoxX.value.trim();
			var xI=/^\s*([0-9]+)[\s|,|-|.]+([0-9]+)/.exec(xValue); 				
			if(xI) {
				that.coordBoxX.value=xI[1]
				that.coordBoxY.value=xI[2]
			}
        var x = parseInt(that.coordBoxX.value, 10);
        var y = parseInt(that.coordBoxY.value, 10);
        if (isNaN(x) || x<0 || x>750){
          that.coordBoxX.style.backgroundColor = '#ff8888';
          return;
        }
        if (isNaN(y) || y<0 || y>750){
          that.coordBoxY.style.backgroundColor = '#ff8888';
          return;
        }
        that.coordBoxX.style.backgroundColor = '#ffffff';
        that.coordBoxY.style.backgroundColor = '#ffffff';
        if (that.notify != null)
          that.notify (null, x, y);
      }
      return false;
    }
    this.coordBoxX = eX;
    this.coordBoxY = eY;
    var bh = new CboxHandler(this);
    eX.maxLength=8;
    eY.maxLength=3;
    eX.style.width='2em';    
    eY.style.width='2em';    
    eX.addEventListener('change', bh.eventChange, false);
    eY.addEventListener('change', bh.eventChange, false);
  }

  this.selectBut = selectBut;
  this.bindToXYboxes = bindToXYboxes;
  this.coordBoxX = null;
  this.coordBoxY = null;
  this.id = id;
  this.dispName = dispName;
  this.prefixLen = id.length+1;
  this.notify = notify;
  this.selected = null;
  this.city = null;
  var m = '';
  for (var i=0; i<Cities.cities.length; i++)
    m += '<INPUT class="castleBut castleButNon" id="'+ id +'_'+ i +'" value="'+ (i+1) +'" type=submit \>';
  if (dispName)
    m += ' &nbsp; <SPAN style="display:inline-block; width:85px; font-weight:bold;" id='+ id +'cname' +'></span>';
  span.innerHTML = m;
  var handler = new CcityButHandler(this);
  for (var i=0; i<Cities.cities.length; i++)
    document.getElementById (id+'_'+i).addEventListener('click', handler.clickedCityBut, false);
  if (selbut != null)
    this.selectBut(selbut);
};

function setCities(){
	var il = unsafeWindow.itemlist, cityID;
	for (var i=1101; i < 1115; i++)
		crestname[i] = il['i'+i].name
	getResearchLevels();
	Cities.numCities = Seed.cities.length;
	Cities.cities = [];
	Cities.byID = {};
	for (i=0; i<Cities.numCities; i++){
		city = {};
		city.idx = i;
		city.id = parseInt(Seed.cities[i][0]);
		cityID = 'city'+ city.id
		city.name = Seed.cities[i][1];
		city.x = parseInt(Seed.cities[i][2]);
		city.y = parseInt(Seed.cities[i][3]);
		city.tileId = parseInt(Seed.cities[i][5]);
		city.provId = parseInt(Seed.cities[i][4]);
		getTroopDefTrainEstimates('city'+ city.id, city);
		getRaidTroops(cityID);
		Cities.cities[i] = city;
		Cities.byID[Seed.cities[i][0]] = city;
	}
}



function getCityIdFromXY(x, y) {
	for(var i=0; i<Cities.numCities; i++) {
		if (Cities.cities[i].x == x && Cities.cities[i].y == y) {
			return Cities.cities[i].id;
		}
	}
	return -1;
}


function dialogRetry (errMsg, seconds, onRetry, onCancel, errCode){
  seconds = parseInt(seconds);
  var pop = new CPopup ('pbretry', 0, 0, 400,200, true);
  pop.centerMe(mainPop.getMainDiv());
  pop.getTopDiv().innerHTML = '<div class=showBadged><center>PowerKoc</center></div>';
  pop.getMainDiv().innerHTML = '<CENTER><BR><FONT COLOR=#550000><B>An error occurred:</b></font><BR><BR><DIV id=paretryErrMsg></div>\
      <BR><BR><B>Automatic retry on <SPAN id=paretrySeconds></b></span> second ...<BR><BR><INPUT id=paretryCancel type=submit value="CANCEL retry" \>';
  document.getElementById('paretryCancel').addEventListener ('click', doCancel, false);
  pop.show(true);
  
  if(errCode && unsafeWindow.g_js_strings.errorcode['err_'+errCode])
	document.getElementById('paretryErrMsg').innerHTML = unsafeWindow.g_js_strings.errorcode['err_'+errCode];
  else
  document.getElementById('paretryErrMsg').innerHTML = errMsg;
  document.getElementById('paretrySeconds').innerHTML = seconds;
  var rTimer = setTimeout (doRetry, seconds*1000);
  countdown ();

  function countdown (){
    document.getElementById('paretrySeconds').innerHTML = seconds--;
    if (seconds > 0)
      cdTimer = setTimeout (countdown, 1000);
  }
  function doCancel(){
    clearTimeout (rTimer);
    clearTimeout (cdTimer);
    pop.destroy();
    onCancel ();
  }
  function doRetry (){
    clearTimeout (rTimer);
    clearTimeout (cdTimer);
    pop.show(false);
    onRetry();
  }
}

function implodeUrlArgs (obj){
  var a = [];
  for (var k in obj)
    a.push (k +'='+ encodeURI(obj[k]) );
  return a.join ('&');    
}

// NOTA: args can be either a string which will be appended as is to url or an object of name->values
function addUrlArgs (url, args){
  if (!args)
    return url;
  if (url.indexOf('?') < 0)
    url += '?';
  else if (url.substr(url.length-1) != '&')
    url += '&';    
  if (matTypeof(args == 'object'))
    return url + implodeUrlArgs (args);    
  return url + args;
}

function GM_AjaxGet (url, args, notify, label){
	GM_xmlhttpRequest({
		method: "get",
		url: addUrlArgs(url, args),
		onload: function (rslt) {
			notify (rslt.responseText);
		},
		onerror: function () {
			notify (null);
		},
	});
}

function GM_AjaxPost (url, args, notify, label){
	GM_xmlhttpRequest({
		method: "post",
		url: url,
		data: implodeUrlArgs(args),
		headers: { "Content-Type": "application/x-www-form-urlencoded", 'X-Requested-With': 'XMLHttpRequest', 'X-Prototype-Version': '1.6.1',
			'Accept': 'text/javascript, text/html, application/xml, text/xml, */*' },
		onload: function (rslt) {
			notify (rslt.responseText);
		},
		onerror: function () {
			notify (null);
		},
	});
}

// emulate protoype's Ajax.Request ...
function AjaxRequest (url, opts){
  var headers = {
    'X-Requested-With': 'XMLHttpRequest',
    'X-Prototype-Version': '1.6.1',
    'Accept': 'text/javascript, text/html, application/xml, text/xml, */*'
  };
  var ajax = null;

if (DEBUG_TRACE_AJAX) logit ("AJAX: "+ url +"\n" + inspect (opts, 3, 1));  
    
  if (window.XMLHttpRequest)
    ajax=new XMLHttpRequest();
  else
    ajax=new ActiveXObject("Microsoft.XMLHTTP");
  
  if (opts.method==null || opts.method=='')
    method = 'GET';
  else
    method = opts.method.toUpperCase();  
    
  if (method == 'POST'){
    headers['Content-type'] = 'application/x-www-form-urlencoded; charset=UTF-8';
  } else if (method == 'GET'){
    addUrlArgs (url, opts.parameters);
  }

  ajax.onreadystatechange = function(){
//  ['Uninitialized', 'Loading', 'Loaded', 'Interactive', 'Complete']; states 0-4
    if (ajax.readyState==4) {
      if (ajax.status >= 200 && ajax.status < 305)
        if (opts.onSuccess) opts.onSuccess(ajax);
      else
        if (opts.onFailure) opts.onFailure(ajax);
    } else {
      if (opts.onChange) opts.onChange (ajax);
    }
  }  
    
  ajax.open(method, url, true);   // always async!

  for (var k in headers)
    ajax.setRequestHeader (k, headers[k]);
  if (matTypeof(opts.requestHeaders)=='object')
    for (var k in opts.requestHeaders)
      ajax.setRequestHeader (k, opts.requestHeaders[k]);

  if (method == 'POST'){
    var a = [];
    for (k in opts.parameters){
	  if(matTypeof(opts.parameters[k]) == 'object')
		for(var h in opts.parameters[k])
			a.push (k+'['+h+'] ='+ opts.parameters[k][h] );
	  else
        a.push (k +'='+ opts.parameters[k] );
	}
    ajax.send (a.join ('&'));
  } else               {
    ajax.send();
  }
}         

function MyAjaxRequest (url, o, noRetryX){
  //logit (" 0 myAjaxRequest: "+ url +"\n" + inspect (o, 2, 1));
  var opts = unsafeWindow.Object.clone(o);
  var wasSuccess = o.onSuccess;
  var wasFailure = o.onFailure;
  var retry = 0;
  var delay = 3;
  var show=true;
  var silentTimer;
  var noRetry = noRetry===true?true:false;
  opts.onSuccess = mySuccess;
  opts.onFailure = myFailure;
  new AjaxRequest(url, opts);
  return;

  function myRetry(){
    ++retry;
    if (retry>5) {
       actionLog(error, "<font color=res>retrying</font>");
       return false;
       }
    new AjaxRequest(url, opts);
  
    delay = delay * 1.25;
  }
  function myFailure(){
    var o = {};
    o.ok = false;
    o.errorMsg = "AJAX Communication Failure";
    wasFailure (o);
  }
  function mySuccess (msg){
  //logit(msg);
    var rslt;
   try {
    rslt = JSON2.parse(msg.responseText);
   } catch(e) {
   
    if (retry<2) {
      rslt = {"ok":false,"error_code":9,"errorMsg":"Failed due to invalid json"}
    } else {
      rslt = {"ok":true,"error_code":9,"data":[]};
    }
    
    }
    var x;
    if (window.EmulateAjaxError){
      rslt.ok = false;  
      rslt.error_code=8;
    }
    if (rslt.ok){
      if (rslt.updateSeed)
        unsafeWindow.update_seed(rslt.updateSeed);
      wasSuccess (rslt);
      return;
    }
    
    rslt.errorMsg = unsafeWindow.printLocalError((rslt.error_code || null), (rslt.msg || null), (rslt.feedback || null));

    if (!noRetry && (rslt.error_code==0 ||rslt.error_code==8 || rslt.error_code==1 || rslt.error_code==3)){
      actionLog(error, "<font color=res>"+ msg.responseText +"</font>");
      dialogRetry (inspect(rslt.errorMsg), delay, function(){myRetry()}, function(){wasSuccess (rslt)}, rslt.error_code);
    } else if (!noRetry && rslt.error_code==9) {
      silentTimer = setTimeout(silentRetry, delay*100);  
    } else {
      wasSuccess (rslt);
    }
  }

  function silentRetry() {
   	    clearTimeout(silentTimer);
   	    myRetry();
   }
}

function getDiplomacy (aid) { // returns: 'neutral', 'friendly', 'ally', or 'hostile'
	if (Seed.allianceDiplomacies == null)
		return 'Neutral';
	if (Seed.allianceDiplomacies.friendly && Seed.allianceDiplomacies.friendly['a'+aid] != null)
		return 'friendly';
	if (Seed.allianceDiplomacies.hostile && Seed.allianceDiplomacies.hostile['a'+aid] != null)
		return 'Hostile';
	if (aid == Seed.allianceDiplomacies.allianceId)
		return 'alliance';
	return 'neutral';
};

function getMyAlliance (){
  if (Seed.allianceDiplomacies==null || Seed.allianceDiplomacies.allianceName==null)
    return [0, 'None'];
  else
    return [Seed.allianceDiplomacies.allianceId, Seed.allianceDiplomacies.allianceName];
}

function getMyUserId (){
	return parseInt([Seed.tutorial.userId]);
}

function ShowExtraInfo(){
  alert('ineter');
  content = document.getElementById('mod_citylist').innerHTML
  content += "O";
	document.getElementById('mod_citylist').innerHTML = content; 
}

function distance (d, f, c, e) {
  var a = 750;
  var g = a / 2;
  var b = Math.abs(c - d);
  if (b > g)
    b = a - b;
  var h = Math.abs(e - f);
  if (h > g)
    h = a - h;
  return Math.round(100 * Math.sqrt(b * b + h * h)) / 100;
};

// example: http://www150.kingdomsofcamelot.com
function GetServerId() {
  var m=/^[a-zA-Z]+([0-9]+)\./.exec(document.location.hostname);
  if(m)
    return m[1];
  return '';
}

function logit (msg){
  var serverID = GetServerId();
  var now = new Date();
  GM_log (serverID +' @ '+ now.toTimeString().substring (0,8) +'.' + now.getMilliseconds() +': '+  msg);
}

function saveUpgradeData (){
  var serverID = getServerId();
  setTimeout (function (){GM_setValue ('UpgradeDataMM_'+serverID, JSON2.stringify(upgradeData));}, 0);
}

function saveSalvageData (){
  var serverID = getServerId();
  setTimeout (function (){GM_setValue ('SalvageDataMM2_'+serverID, JSON2.stringify(salvageData));}, 0);
}


function saveUpgradeStats (){
  var serverID = getServerId();
  setTimeout (function (){GM_setValue ('UpgradeStats_'+serverID, JSON2.stringify(upgradeStats));}, 0);
}

function saveOptions (){
  var serverID = GetServerId();
  GM_setValue ('Options_'+serverID, JSON2.stringify(Options));
}

function saveChatOptions (){
  var serverID = getServerId();
  setTimeout (function (){GM_setValue ('ChatOptions_'+serverID, JSON2.stringify(ChatOptions));}, 0);
}

function saveTrainOptions (){
  var serverID = getServerId();
  setTimeout (function (){GM_setValue ('TrainOptions_' + Seed.player['name'] + '_' +serverID, JSON2.stringify(TrainOptions));}, 0);
}

function saveCombatOptions (){
  var serverID = getServerId();
  setTimeout (function (){GM_setValue ('CombatOptions_' + Seed.player['name'] + '_' +serverID, JSON2.stringify(CombatOptions));}, 0);
}

function saveAttackOptions (){
  var serverID = getServerId();
  setTimeout (function (){GM_setValue ('AttackOptions_' + Seed.player['name'] + '_' +serverID, JSON2.stringify(AttackOptions));}, 0);
}

function saveColors (){
  var serverID = GetServerId();
  GM_setValue ('Colors_'+serverID, JSON2.stringify(Colors));
}

function readUpgradeData (){
  var serverID = getServerId();
  s = GM_getValue ('UpgradeDataMM_'+serverID);
  if (s != null){
    opts = JSON2.parse (s);
    for (k in opts){
      if (matTypeof(opts[k]) == 'object')
        for (kk in opts[k])
          upgradeData[k][kk] = opts[k][kk];
      else
        upgradeData[k] = opts[k];
    }
  }
}

function readSalvageData (){
  var serverID = getServerId();
  s = GM_getValue ('SalvageDataMM2_'+serverID);
  if (s != null){
    opts = JSON2.parse (s);
    for (k in opts){
      if (matTypeof(opts[k]) == 'object')
        for (kk in opts[k])
          salvageData[k][kk] = opts[k][kk];
      else
        salvageData[k] = opts[k];
    }
  }
  
  // recreate the objects w/ functions
  for (k in salvageData.ruleSet)
  {
     var r = salvageData.ruleSet[k];
     var rule = new Rule(r.type, r.faction, r.conditions);
     for (j in rule.conditions)
     {
         rule.conditions[j].checkCondition = checkCondition;
     }
     salvageData.ruleSet[k] = rule;
  }
}

function readOptions (){
  var serverID = getServerId();
  s = GM_getValue ('Options_'+serverID);
  if (s != null){
    opts = JSON2.parse (s);
    for (k in opts){
      if (matTypeof(opts[k]) == 'object')
        for (kk in opts[k])
          Options[k][kk] = opts[k][kk];
      else
        Options[k] = opts[k];
    }
  }
}


function readUpgradeStats (){
  var serverID = getServerId();
  s = GM_getValue ('UpgradeStats_'+serverID);
  if (s != null){
    opts = JSON2.parse (s);
    for (k in opts){
      if (matTypeof(opts[k]) == 'object')
        for (kk in opts[k])
          upgradeStats[k][kk] = opts[k][kk];
      else
        upgradeStats[k] = opts[k];
    }
  }
}



function readWallTrainOptions (){
var serverID = getServerId();
	s = GM_getValue ('WallTrainOptions_' + Seed.player['name'] + '_' +serverID);
	if (s != null){
		opts = JSON2.parse (s);
		for (k in opts){
			if (WallTrainOptions[k] != undefined) {
				if (matTypeof(opts[k]) == 'object') {
					for (kk in opts[k])
						if (WallTrainOptions[k][kk] != undefined)
							WallTrainOptions[k][kk] = opts[k][kk];
				} else
					WallTrainOptions[k] = opts[k];
			}
		}
	}
}

function saveWallTrainOptions (){
var serverID = getServerId();	
GM_setValue ('WallTrainOptions_' + Seed.player['name'] + '_' +serverID, JSON2.stringify(WallTrainOptions));}

function saveApothecaryOptions (){
  var serverID = getServerId();
  setTimeout (function (){GM_setValue ('ApothecaryOptions_' + Seed.player['name'] + '_' +serverID, JSON2.stringify(ApothecaryOptions));}, 0);
}


function saveCrestData (){
  var serverID = getServerId();
  setTimeout (function (){GM_setValue ('CrestData_' + Seed.player['name'] + '_' +serverID, JSON2.stringify(CrestData));}, 0);
}

function saveTrainingOptions(){
   var serverID =getServerId();
     setTimeout(function(){GM_setValue("TrainOptions_" + Seed.player['name'] + '_' +serverID, JSON2.stringify(TrainOptions))},0)}
	 
function saveFarmOptions() {
    var serverID = getServerId();
    setTimeout(function () {
        GM_setValue('FarmOptions_' + Seed.player['name'] + '_' + serverID, JSON2.stringify(FarmOptions));
    }, 0);
}	 


function saveThroneOptions() {
   var serverID = getServerId();
   setTimeout(function () { GM_setValue('ThroneOptions_' + Seed.player['name'] + '_' + serverID, JSON2.stringify(ThroneOptions)); }, 0);}

function readColors (){
  var serverID = GetServerId();
  s = GM_getValue ('Colors_'+serverID);
  if (s != null){
    opts = JSON2.parse (s);
    for (k in opts)
      Colors[k] = opts[k];
  }else{
	s = GM_getValue ('Colors');
	if (s != null){
		opts = JSON2.parse (s);
		for (k in opts)
		  Colors[k] = opts[k];
	}
  }
}

function readOptions (){
  var serverID = GetServerId();
  s = GM_getValue ('Options_'+serverID);
  if (s != null){
    opts = JSON2.parse (s);
    for (k in opts) Options[k] = opts[k];
     }
}

function readChatOptions (){
  var serverID = getServerId();
  s = GM_getValue ('ChatOptions_'+serverID, '[]');
  if (s != null){
    opts = JSON2.parse (s);
    for (k in opts){
      if (matTypeof(opts[k]) == 'object')
        for (kk in opts[k])
          ChatOptions[k][kk] = opts[k][kk];
      else
        ChatOptions[k] = opts[k];
    }
  }
}

function readCrestData (){
  var serverID = getServerId();
  s = GM_getValue ('CrestData_' + Seed.player['name'] + '_' +serverID);

  if (s != null) {
    opts = JSON2.parse (s);

	for (var i = 0; i < opts.length; i++) {
		CrestData[i] = new CrestFunc(opts[i]);
	}
  }
}

function readFarmOptions() {
    var serverID = getServerId();
    s = GM_getValue('FarmOptions_' + Seed.player['name'] + '_' + serverID);
    if (s != null) {
        opts = JSON2.parse(s);
        for (k in opts) {
            if (matTypeof(opts[k]) == 'object') for (kk in opts[k])
            FarmOptions[k][kk] = opts[k][kk];
            else FarmOptions[k] = opts[k];
        }
    }
}


function readApothecaryOptions (){
  var serverID = getServerId();
  s = GM_getValue ('ApothecaryOptions_' + Seed.player['name'] + '_' +serverID, '[]');
  if (s != null){
    opts = JSON2.parse (s);
    for (k in opts){
      if (matTypeof(opts[k]) == 'object')
        for (kk in opts[k])
          ApothecaryOptions[k][kk] = opts[k][kk];
      else
        ApothecaryOptions[k] = opts[k];
    }
  }
}


function readCombatOptions (){
  var serverID = getServerId();
  s = GM_getValue ('CombatOptions_' + Seed.player['name'] + '_' +serverID);
  if (s != null){
    opts = JSON2.parse (s);
    for (k in opts){
      if (matTypeof(opts[k]) == 'object')
        for (kk in opts[k])
			if (matTypeof(opts[k][kk]) == 'object')
				for (kkk in opts[k][kk])
				  CombatOptions[k][kk][kkk] = opts[k][kk][kkk];
			else
				CombatOptions[k][kk] = opts[k][kk];
      else
        CombatOptions[k] = opts[k];
    }
  }
}

function readTrainingOptions (){
  var serverID = getServerId();
  s = GM_getValue ('TrainOptions_' + Seed.player['name'] + '_' +serverID);
  if (s != null){
    opts = JSON2.parse (s);
    for (k in opts){
      if (matTypeof(opts[k]) == 'object')
        for (kk in opts[k])
          TrainOptions[k][kk] = opts[k][kk];
      else
        TrainOptions[k] = opts[k];
    }
  }
}

function readAttackOptions (){
  var serverID = getServerId();
  s = GM_getValue ('AttackOptions_' + Seed.player['name'] + '_' +serverID);
  if (s != null){
    opts = JSON2.parse (s);
    for (k in opts){
      if (matTypeof(opts[k]) == 'object')
        for (kk in opts[k])
          AttackOptions[k][kk] = opts[k][kk];
      else
        AttackOptions[k] = opts[k];
    }
  }
}

var myServers = {   // incomplete, untested
  serverlist : null,
  
  get : function (notify){
    if (myServers.serverlist){
      notify (myServers.serverlist);
      return;
    }
    var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
    
    new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/myServers.php" + unsafeWindow.g_ajaxsuffix, {
      method: "post",
      parameters: params,
      onSuccess: function(rslt) {
logit (inspect (rslt, 3, 1));  
        if (notify)      
          notify (myServers.serverlist);
      },
      onFailure: function(rslt) {
      }
    });
  },
};

function createButton (label,id){
  var a=document.createElement('a');
  a.className='button20';
  a.id = id;
  a.innerHTML='<span style="color: white">'+ label +'</span>';
  return a;
}

function updatebotbutton2(a,b){var c=ById(b);if(c)c.innerHTML='<span style="color: green">'+a.replace("-ON",butON).replace("-OFF",butOFF)+"</span>"}
function updatebotbutton(a,b){var c=ById(b);if(c)c.innerHTML='<span style="color: white">'+a.replace("-ON",butON).replace("-OFF",butOFF)+"</span>"}

function createYellowButton (label,id){
  var a=document.createElement("label");
  a.className='button20';
  a.id = id;
  a.innerHTML='<span style="color: green">'+label.replace("-ON",butON).replace("-OFF",butOFF)+'</span>';
  return a;
}

function createRedButton (label,id){
  var a=document.createElement('a');
  a.className='button20';
  a.id = id;
  a.innerHTML='<span style="color: white">'+ label +'</span>';
  return a;
}

function AddMainTabLink(text, eventListener, mouseListener) {
  var a = createButton (text,'botbutton');
  a.className='tab';
  var tabs=document.getElementById('main_engagement_tabs');
  if(!tabs) {
    tabs=document.getElementById('topnav_msg');
    if (tabs)
      tabs=tabs.parentNode;
  }
  if (tabs) {
    var e = tabs.parentNode;
    var gmTabs = null;
    for (var i=0; i<e.childNodes.length; i++){
      var ee = e.childNodes[i];
      if (ee.tagName && ee.tagName=='DIV' && ee.className=='tabs_engagement' && ee.id!='main_engagement_tabs'){
        gmTabs = ee;
        break;
      }
    }
    if (gmTabs == null){
      gmTabs = document.createElement('div');
      gmTabs.className='tabs_engagement';
      gmTabs.style.background='black';
      tabs.parentNode.insertBefore (gmTabs, tabs);
      gmTabs.style.whiteSpace='nowrap';
      gmTabs.style.width='1000px';
	  gmTabs.style.height='50px';
      gmTabs.lang = 'en_PB';
    }
    gmTabs.appendChild(a);
    a.addEventListener('click',eventListener, false);
    if (mouseListener != null)
      a.addEventListener('mousedown',mouseListener, true);
    return a;
  }
  return null;
}

function AddSubTabLink(text, eventListener, id) {
  var a = createYellowButton (text,'botbutton');
  a.className='tab';
  var tabs=document.getElementById('main_engagement_tabs');
  if(!tabs) {
    tabs=document.getElementById('topnav_msg');
    if (tabs)
      tabs=tabs.parentNode;
  }
  if (tabs) {
    var e = tabs.parentNode;
    var gmTabs = null;
    for (var i=0; i<e.childNodes.length; i++){
      var ee = e.childNodes[i];
      if (ee.tagName && ee.tagName=='DIV' && ee.className=='tabs_engagement' && ee.id!='main_engagement_tabs'){
        gmTabs = ee;
        break;
      }
    }
    if (gmTabs == null){
      gmTabs = document.createElement('div');
      gmTabs.className='tabs_engagement';
      gmTabs.style.background='black';
      tabs.parentNode.insertBefore (gmTabs, tabs);
      gmTabs.style.whiteSpace='nowrap';
      gmTabs.style.width='735px';
	  gmTabs.style.height='60px';
      gmTabs.lang = 'en_PB';
    }
    gmTabs.appendChild(a);
    a.addEventListener('click',eventListener, false);
    if (id != null)
      a.id = id;
    return a;
  }
  return null;
}

function AddTowerTab(text, eventListener, id) {
  var a = createRedButton (text,'botbutton');
  a.className='tab';
  var tabs=document.getElementById('main_engagement_tabs');
  if(!tabs) {
    tabs=document.getElementById('topnav_msg');
    if (tabs)
      tabs=tabs.parentNode;
  }
  if (tabs) {
    var e = tabs.parentNode;
    var gmTabs = null;
    for (var i=0; i<e.childNodes.length; i++){
      var ee = e.childNodes[i];
      if (ee.tagName && ee.tagName=='DIV' && ee.className=='tabs_engagement' && ee.id!='main_engagement_tabs'){
        gmTabs = ee;
        break;
      }
    }
    if (gmTabs == null){
      gmTabs = document.createElement('div');
      gmTabs.className='tabs_engagement';
      gmTabs.style.background='#ca5';
      tabs.parentNode.insertBefore (gmTabs, tabs);
      gmTabs.style.whiteSpace='nowrap';
      gmTabs.style.width='735px';
	  gmTabs.style.height='60px';
      gmTabs.lang = 'en_PB';
    }
    gmTabs.appendChild(a);
    a.addEventListener('click',eventListener, false);
    if (id != null)
      a.id = id;
    return a;
  }
  return null;
}

function coordLink (x, y){
  var m = [];
  m.push ('(<a onclick="pbGotoMap (');
  m.push (x);
  m.push (',');
  m.push (y);
  m.push ('); return false">');
  m.push (x);
  m.push (',');
  m.push (y);
  m.push ('</a>)');  
  return m.join('');
}

unsafeWindow.pbGotoMap = function (x, y){
  if (Options.hideOnGoto)
    hideMe ();
  setTimeout (function (){
    document.getElementById('mapXCoor').value = x;
    document.getElementById('mapYCoor').value = y;
    unsafeWindow.reCenterMapWithCoor();
    var a = document.getElementById("mod_views").getElementsByTagName("a");
    for (var b = 0; b < a.length; b++) {
        a[b].className = ""
    }
    document.getElementById('mod_views_map').className = "sel";
    document.getElementById("maparea_city").style.display = 'none';
    document.getElementById("maparea_fields").style.display = 'none';
    document.getElementById("maparea_map").style.display = 'block';
    unsafeWindow.tutorialClear()
  }, 0);
};

unsafeWindow.ptGotoMapHide = function (x, y){
	try {
		unsafeWindow.Modal.hideModal();
	} catch (e){ }
	try {
		Modal.hideModal();
	} catch (e){ }
	unsafeWindow.ptGotoMap (x, y);
}

unsafeWindow.ptGotoMap = function (x, y, gotoCityNum){
	if (Options.hideOnGoto)
		hideMe ();
	if (gotoCityNum != undefined)
		setTimeout (function(){unsafeWindow.citysel_click(document.getElementById('citysel_'+gotoCityNum));}, 0);
	setTimeout (function (){
		document.getElementById('mapXCoor').value = x;
		document.getElementById('mapYCoor').value = y;
		unsafeWindow.reCenterMapWithCoor();
		var a = document.getElementById("mod_views").getElementsByTagName("a");
		for (var b = 0; b < a.length; b++) {
				a[b].className = ""
		}
		document.getElementById('mod_views_map').className = "sel";
		document.getElementById("maparea_city").style.display = 'none';
		document.getElementById("maparea_fields").style.display = 'none';
		document.getElementById("maparea_map").style.display = 'block';
		unsafeWindow.tutorialClear()
	}, 0);
};

unsafeWindow.ptGotoCity = function (gotoCityNum){
	setTimeout (function(){unsafeWindow.citysel_click(document.getElementById('citysel_'+gotoCityNum));}, 0);
}


function addScript (scriptText){
	var scr = document.createElement('script');   
	scr.innerHTML = scriptText;
	document.body.appendChild(scr);
}
addScript ('uwuwuwFunc = function (text){ eval (text);  }');  

var CalterUwFunc = function (funcName, findReplace) {
  var t = this;
  this.isEnabled = false;
  this.isAvailable = isAvailable;
  this.setEnable = setEnable;
  this.funcOld = null;  
  this.funcNew = null;
  try {
    var x = funcName.split('.');
    var f = unsafeWindow;
    for (var i=0; i<x.length; i++)
      f = f[x[i]];
    ft = f.toString();
    this.funcOld = f;
    var rt = f.toString().replace ('function '+ funcName, 'function');
    for (var i=0; i<findReplace.length; i++){
      x = rt.replace(findReplace[i][0], findReplace[i][1]);
      if (x == rt)  // if not found
        return;
      rt = x;
    }
    this.funcNew = rt;
  } catch (err) {
  }
      
  function setEnable (tf){
    if (t.funcNew == null)
      return;
    if (t.isEnabled != tf){
      if (tf){
        var scr = document.createElement('script');    // <== need to remove on disable!!!
        scr.innerHTML = funcName +' = '+ t.funcNew;
        document.body.appendChild(scr);
        setTimeout ( function (){document.body.removeChild(scr);}, 500);
        t.isEnabled = true;
      } else {
      var x = funcName.split('.');
      var f = unsafeWindow;
      for (var i=0; i<x.length-1; i++)
        f = f[x[i]];
      f[x[x.length-1]] = this.funcOld;
        t.isEnabled = false;
      }
    }
  }

  function isAvailable (){
    if (t.funcNew == null)
      return false;
    return true;
  }
};

function makeButton20 (label){
  var a = document.createElement('a');
  a.className = "button20 ptButton20";
  var s = document.createElement('span');
  s.innerHTML = label;
  a.appendChild (s);
  return a;
}

function strButton20 (label, tags){
  if (tags == null)
    tags = '';
  return ('<TABLE class=ptNoPad><TR><TD><A class="button20 ptButton20" '+ tags +'><SPAN>'+ label +'</span></a></td></tr></table>' );
}

function strButton14 (label, tags){
  if (tags == null)
    tags = '';
  return ('<A class="button14 ptButton20" '+ tags +'><SPAN>'+ label +'</span></a>' );
}

function reloadKOC (){
  var serverId = getServerId();
  if(serverId == '??') window.location.reload(true);
  var goto = window.location.protocol+'//apps.facebook.com/kingdomsofcamelot/?s='+serverId;
  if(document.URL.match(/standalone=1/i)){
	goto = window.location.protocol+'//www.kabam.com/kingdoms-of-camelot/play?s='+serverId;
  }
  var t = '<FORM target="_top" action="'+ goto +'" method=post><INPUT id=xxpbButReload type=submit value=RELOAD><INPUT type=hidden name=s value="'+ serverId +'"</form>';
  var e = document.createElement ('div');
  e.innerHTML = t;
  document.body.appendChild (e);
  setTimeout (function (){document.getElementById('xxpbButReload').click();}, 0);
}
  
function htmlSelector (valNameObj, curVal, tags){
  var m = [];
  m.push ('<SELECT');
  if (tags){
    m.push (' ');
    m.push (tags);
  }  
  for (var k in valNameObj){
    m.push ('><OPTION ');
    if (k == curVal)
      m.push ('SELECTED ');
    m.push ('value="');
    m.push (k);
    m.push ('">');
    m.push (valNameObj[k]);
    m.push ('</option>');
  }
  m.push ('</select>');
  return m.join ('');
}

function cityStatusString (cs){
  if (cs==4)
    return 'Vacation';
  if (cs==3)
    return 'Truce';
  if (cs==2)
    return 'Beg Protection';
  return 'Normal';
}    

// Simple method, as if it were typed in thru DOM
function sendChat (msg){
  document.getElementById ("mod_comm_input").value = msg;
  uW.Chat.sendChat ();
}

// works well, but message is not echoed back to local client
Chat = {
  params : null,

  sendWhisper : function (msg, who, notify){
    this.params = uW.Object.clone(uW.g_ajaxparams);
    this.params.ctype = 3;
    this.params.name = who;
    this._sendit (msg, notify);
  },

  sendGlobal : function (msg, notify){
    this.params = uW.Object.clone(uW.g_ajaxparams);
    this.params.ctype = 1;
    this._sendit (msg, notify);
  },

  sendAlliance : function (msg, notify){
    this.params = uW.Object.clone(uW.g_ajaxparams);
    this.params.ctype = 2;
    this._sendit (msg, notify);
  },

  _sendit : function (msg, notify){
    function strip(s) {
       return s.replace(/^\s+/, '').replace(/\s+$/, '');
    }
    this.params.comment = strip (msg);
    new MyAjaxRequest(uW.g_ajaxpath + "ajax/sendChat.php" + uW.g_ajaxsuffix, {
      method: "post",
      parameters: this.params,
      onSuccess: function(transport) {
        if (notify)
          notify ();
      },
      onFailure: function(transport) {
        if (notify)
          notify ();
      }
    });
  },
}

function doDefTrain (cityId, unitId, num, notify){
  var time = unsafeWindow.modal_walls_traintime(unitId, num);
  var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
  params.cid = cityId;
  params.type = unitId;
  params.quant = num;
  params.items = 0;
  new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/fortify.php" + unsafeWindow.g_ajaxsuffix, {
      method: "post",
      parameters: params,
      onSuccess: function (rslt) {
        if (rslt.ok) {
          unsafeWindow.seed.queue_fort["city" + cityId].push([unitId, num, rslt.initTS, parseInt(rslt.initTS) + time, 0, time, rslt.fortifyId]);
          if (notify != null)
            setTimeout (function (){notify(null);}, 500);
        } else {
          if (notify != null)
            setTimeout (function (){notify(rslt.errorMsg);}, 500);
        }
      },
      onFailure: function () {
        if (notify != null)
          notify(rslt.errorMsg);
      },
  });
}
function doTrain (cityId, tut, gamble, unitId, num, notify){
  var time = unsafeWindow.modal_barracks_traintime(unitId, num);
  var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
  params.cid = cityId;
  params.type = unitId;
  params.quant = num;
  params.items = tut;
  params.gambleId = gamble;

  new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/train.php" + unsafeWindow.g_ajaxsuffix, {
    method: "post",
    parameters: params,
    onSuccess: function(rslt) {
      if (rslt.ok) {
        for (var i = 1; i < 5; i++) {
                  var resourceLost = parseInt(unsafeWindow.unitcost["unt" + unitId][i]) * 3600 * parseInt(num);
		  if(rslt.gamble) resourceLost = resourceLost*rslt.gamble[i];
          unsafeWindow.seed.resources["city" + cityId]["rec" + i][0] = parseInt(unsafeWindow.seed.resources["city" + cityId]["rec" + i][0]) - resourceLost;
        }
        unsafeWindow.seed.citystats["city" + cityId].gold[0] = parseInt(unsafeWindow.seed.citystats["city" + cityId].gold[0]) - parseInt(unsafeWindow.unitcost["unt" + unitId][5]) * parseInt(num);
        unsafeWindow.seed.citystats["city" + cityId].pop[0] = parseInt(unsafeWindow.seed.citystats["city" + cityId].pop[0]) - parseInt(unsafeWindow.unitcost["unt" + unitId][6]) * parseInt(num);
        unsafeWindow.seed.queue_unt["city" + cityId].push([unitId, num, rslt.initTS, parseInt(rslt.initTS) + time, 0, time, null]);
        if (notify != null)
          setTimeout (function (){notify(null);}, 500);
      } else {
        if (notify != null){
          setTimeout (function (){notify(rslt.errorMsg);}, 500);
        }
      }
    },
    onFailure: function(o) {
      if (notify != null)
        notify(rslt.errorMsg);
    }
  });
}

function getAbsoluteOffsets (e){
  ret = {left:0, top:0};
  while (e.offsetParent){
    if (e.style.position == 'absolute')
      break;
    ret.left += e.offsetLeft;
    ret.top += e.offsetTop;
    e = e.offsetParent;
  }      
  return ret;  
}

DebugTimer = {
  startTime : 0,
  start : function (){
    now = new Date();
    DebugTimer.startTime = now.getTime();
  },
  getMillis : function (){
    now = new Date();
    return now.getTime() - DebugTimer.startTime;
  },
  display : function (label, noReset){
    now = new Date();
    elapsed = now.getTime() - DebugTimer.startTime;
    logit (label +": "+ elapsed/1000);
    if (noReset===null || !noReset)
      DebugTimer.startTime = now.getTime();
  },
};

function debugPos  (e){
  return '['+ e.tagName +'] client - offset: '+ e.clientLeft +','+ e.clientTop +','+ e.clientWidth +','+ e.clientHeight
          +' - '+ e.offsetLeft +','+ e.offsetTop +','+ e.offsetWidth +','+ e.offsetHeight +' '+ e +' --OP--> '+ e.offsetParent;
}

function CwaitForElement (id, timeout, notify){
  this.check = check;
  this.end = new Date().getTime() + timeout;
  var t = this;
  this.check();
  function check(){
    if (document.getElementById (id))
      notify (true);
    else if (new Date().getTime() > t.end)
      notify (false);
    else
      setTimeout (t.check, 500);
  }
}

function clickWin (win,obj,evtName) {
	var evt = win.document.createEvent("MouseEvents");
	evt.initMouseEvent(evtName, true, true, win, 0, 0, 0, 0, 0, false, false, false, false, 0, null);
	return !obj.dispatchEvent(evt);
}
    
function debugElement  (e){
  var x = unsafeWindow.Object.clone (e.wrappedJSObject);
  x.innerHTML = '';
  x.innerText = '';
  x.textContent = '';
  return inspect (x, 1, 1);
}     

function getClientCoords(e){
  if (e==null)
    return {x:null, y:null, width:null, height:null};
  var x=0, y=0;
  ret = {x:0, y:0, width:e.clientWidth, height:e.clientHeight};
  while (e.offsetParent != null){
    ret.x += e.offsetLeft;
    ret.y += e.offsetTop;
    e = e.offsetParent;
  }
  return ret;
}

function DOMtree (e, levels){
  var m = [];
  level (e, levels, 0);
  
  function level (e, levels, cur){
    try {        
      for (var i=0; i<cur; i++)
        m.push('  ');
      if (!e.tagName)
        m.push ('?');
      else
        m.push (e.tagName);
      if (e.id){
        m.push (' id=');
        m.push (e.id);
      }
      if (e.name){
        m.push (' name=');
        m.push (e.name);
      }
      if (e.className){
        m.push (' class=');
        m.push (e.className);
      }
      if (e.style && e.style.display && e.style.display.indexOf('none')>0)
        m.push (' hidden');
       m.push ('\n');
      if (cur < levels){
        for (var c=0; c<e.childNodes.length; c++){
          level (e.childNodes[c], levels, cur+1);
        }
      }
    } catch (e) {
      m.push ('UNAVAILBLE!\n');
    }
  }
  return m.join('');  
}

function parseIntNan (n){
  x = parseInt(n, 10);
  if (isNaN(x))
    return 0;
  return x;
}

function parseIntCommas (n){
 n = n.split(',');
 n = n.join('');
 x = parseInt(n, 10);
 if (isNaN(x))
 return 0;
 return x;
} 

function parseIntZero (n){  
  if (n == '')
    return 0;
  return parseInt(n, 10);
}

function show2DPs(num) {
	if (num == parseInt(num))
		return num + '.00';
	else if (10*num == parseInt(10*num))
		return num + '0';
	else
		return num;
};

function getFirefoxVersion (){
  var ver='', i;
  var ua = navigator.userAgent;  
  if (ua==null || (i = ua.indexOf('Firefox/'))<0)
    return;
  return ua.substr(i+8);
}

function htmlTitleLine (msg){
  return '<TABLE width=100% cellspacing=0><TR><TD style="padding:0px" width=50%><HR></td><TD style="padding:0px">[ '+ msg +' ]</td><TD style="padding:0px" width=50%><HR></td></tr></table>';  
}

var WinManager = {
  wins : {},    // prefix : CPopup obj
  didHide : [],
  
  
  get : function (prefix){
    var t = WinManager;
    return t.wins[prefix];
  },
  
  add : function (prefix, pop){
    var t = WinManager;
    t.wins[prefix] = pop;
    if (unsafeWindow.cpopupWins == null)
      unsafeWindow.cpopupWins = {};
    unsafeWindow.cpopupWins[prefix] = pop;
  },
  
  hideAll : function (){
    var t = WinManager;
    t.didHide = [];
    for (k in t.wins){
      if (t.wins[k].isShown()){
        t.didHide.push (t.wins[k]);
        t.wins[k].show (false);
      }
    }
  },
  restoreAll : function (){
    var t = WinManager;
    for (var i=0; i<t.didHide.length; i++)
      t.didHide[i].show (true);
  },
  
  delete : function (prefix){
    var t = WinManager;
    delete t.wins[prefix];
    delete unsafeWindow.cpopupWins[prefix];
  }    
}

function CPopup (prefix, x, y, width, height, enableDrag, onClose) {
  var pop = WinManager.get(prefix);
  if (pop){
    pop.show (false);
    return pop;
  }
  this.BASE_ZINDEX = 123457;
  this.stmaxh = height;
  this.stmaxw = width;
  this.show = show;
  this.toggleHide = toggleHide;
  this.getTopDiv = getTopDiv;
  this.getMainTopDiv = getMainTopDiv;
  this.getMainDiv = getMainDiv;
  this.getLayer = getLayer;
  this.setLayer = setLayer;
  this.setEnableDrag = setEnableDrag;
  this.getLocation = getLocation;
  this.setLocation = setLocation;
  this.focusMe = focusMe;
  this.isShown = isShown;
  this.unfocusMe = unfocusMe;
  this.centerMe = centerMe;
  this.destroy = destroy;
  this.autoHeight = autoHeight;
  this.autoWidth = autoWidth;
  // object vars ...
  this.div = document.createElement('div');
  this.prefix = prefix;
  this.onClose = onClose;
  
  var t = this;
  this.div.className = 'CPopup '+ prefix +'_CPopup';
  this.div.id = prefix +'_outer';
  this.div.style.background = "#fff";
  this.div.style.zIndex = this.BASE_ZINDEX        // KOC modal is 100210 ?
  this.div.style.display = 'none';
  this.div.style.width = width + 'px';
  this.div.style.height = height + 'px';
  this.div.style.maxHeight = height + 'px';
  this.div.style.overflowY = 'show';
  this.div.style.position = "absolute";
  this.div.style.top = y +'px';
  this.div.style.left = x + 'px';
  this.div.style.maxWidth = width + 'px';
  if (CPopUpTopClass==null)
    topClass = 'CPopupTop '+ prefix +'_CPopupTop';
  else
    topClass = CPopUpTopClass +' '+ prefix +'_'+ CPopUpTopClass;
    
  var m = '<TABLE cellspacing=0 width=100% height=100%><TR id="'+ prefix +'_bar" class="'+ topClass +'"><TD width=99% valign=bottom><SPAN id="'+ prefix +'_top"></span></td>\
     <TD id='+ prefix +'_X align=right valign=middle onmouseover="this.style.cursor=\'pointer\'" style="color:#fff; background:#333; font-weight:bold; font-size:14px; padding:0px 5px">X</td></tr>\
     <TR><TD height=100% valign=top class="CPopMain '+ prefix +'_CPopMain" colspan=2 id="'+ prefix +'_main"></td></tr></table>';
  document.body.appendChild(this.div);
  this.div.innerHTML = m;
  document.getElementById(prefix+'_X').addEventListener ('click', e_XClose, false);
  this.dragger = new CWinDrag (document.getElementById(prefix+'_bar'), this.div, enableDrag);
  this.div.addEventListener ('mousedown', e_divClicked, false);
  WinManager.add(prefix, this);
  
  function e_divClicked (){
    t.focusMe();
  }  
  function e_XClose (){
    t.show(false);
    if (t.onClose != null)
      t.onClose();
  }

  function autoHeight (onoff){
     if (onoff) {
       t.div.style.height = '';  
       t.div.style.maxHeight ='';
    } else{
       t.div.style.height = t.stmaxh;
       t.div.style.maxHeight = t.stmaxh;
       }
  }

  function autoWidth (onoff){
         if (onoff) {
           t.div.style.width = '';  
           t.div.style.maxWidth ='';
        } else{
           t.div.style.width = t.stmaxw;
           t.div.style.maxWidth = t.stmaxw;
           }
  }

  function focusMe (){
    t.setLayer(5);
    for (k in unsafeWindow.cpopupWins){
      if (k != t.prefix)
        unsafeWindow.cpopupWins[k].unfocusMe();
    }
  }
  function unfocusMe (){
    t.setLayer(-5);
  }
  function getLocation (){
    return {x: parseInt(this.div.style.left), y: parseInt(this.div.style.top)};
  }
  function setLocation (loc){
    t.div.style.left = loc.x +'px';
    t.div.style.top = loc.y +'px';
  }
  function destroy (){
    document.body.removeChild(t.div);
    WinManager.delete (t.prefix);
  }
  function centerMe (parent){
    if (parent == null){
      var coords = getClientCoords(document.body);
    } else
      var coords = getClientCoords(parent);
    var x = ((coords.width - parseInt(t.div.style.width)) / 2) + coords.x;
    var y = ((coords.height - parseInt(t.div.style.height)) / 2) + coords.y;
    if (x<0)
      x = 0;
    if (y<0)
      y = 0;
    t.div.style.left = x +'px';
    t.div.style.top = y +'px';
  }
  function setEnableDrag (tf){
    t.dragger.setEnable(tf);
  }
  function setLayer(zi){
    t.div.style.zIndex = ''+ (this.BASE_ZINDEX + zi);
  }
  function getLayer(){
    return parseInt(t.div.style.zIndex) - this.BASE_ZINDEX;
  }
  function getTopDiv(){
    return document.getElementById(this.prefix+'_top');
  }
  function getMainDiv(){
    return document.getElementById(this.prefix+'_main');
  }
  function getMainTopDiv(){
  	return document.getElementById(this.prefix+'_top');
  }
  function isShown (){
    return t.div.style.display == 'block';
  }
  function show(tf){
    if (tf){
      t.div.style.display = 'block';
      t.focusMe ();
    } else {
      t.div.style.display = 'none';
    }
    return tf;
  }
  function toggleHide(t){
    if (t.div.style.display == 'block') {
      return t.show (false);
    } else {
      return t.show (true);
    }
  }
}

function CWinDrag (clickableElement, movingDiv, enabled) {
  var t=this;
  this.setEnable = setEnable;
  this.setBoundRect = setBoundRect;
  this.debug = debug;
  this.dispEvent = dispEvent;
  this.lastX = null;
  this.lastY = null;
  this.enabled = true;
  this.moving = false;
  this.theDiv = movingDiv;
  this.body = document.body;
  this.ce = clickableElement;
  this.moveHandler = new CeventMove(this).handler;
  this.outHandler = new CeventOut(this).handler;
  this.upHandler = new CeventUp(this).handler;
  this.downHandler = new CeventDown(this).handler;
  this.clickableRect = null;
  this.boundRect = null;
  this.bounds = null;
  this.enabled = false;
  if (enabled == null)
    enabled = true;
  this.setEnable (enabled);

  function setBoundRect (b){    // this rect (client coords) will not go outside of current body
    this.boundRect = boundRect;
    this.bounds = null;
  }

  function setEnable (enable){
    if (enable == t.enabled)
      return;
    if (enable){
      clickableElement.addEventListener('mousedown',  t.downHandler, false);
      t.body.addEventListener('mouseup', t.upHandler, false);
    } else {
      clickableElement.removeEventListener('mousedown', t.downHandler, false);
      t.body.removeEventListener('mouseup', t.upHandler, false);
    }
    t.enabled = enable;
  }

  function CeventDown (that){
    this.handler = handler;
    var t = that;
    function handler (me){
      if (t.bounds == null){
        t.clickableRect = getClientCoords(clickableElement);
        t.bodyRect = getClientCoords(document.body);
        if (t.boundRect == null)
          t.boundRect = t.clickableRect;
        t.bounds = {top:10-t.clickableRect.height, bot:t.bodyRect.height-25, left:40-t.clickableRect.width, right:t.bodyRect.width-25};
      }
      if (me.button==0 && t.enabled){
        t.body.addEventListener('mousemove', t.moveHandler, true);
        t.body.addEventListener('mouseout', t.outHandler, true);
        t.lastX = me.clientX;
        t.lastY = me.clientY;
        t.moving = true;
      }
    }
  }

  function CeventUp  (that){
    this.handler = handler;
    var t = that;
    function handler (me){
      if (me.button==0 && t.moving)
        _doneMoving(t);
    }
  }

  function _doneMoving (t){
    t.body.removeEventListener('mousemove', t.moveHandler, true);
    t.body.removeEventListener('mouseout', t.outHandler, true);
    t.moving = false;
  }

  function CeventOut  (that){
    this.handler = handler;
    var t = that;
    function handler (me){
      if (me.button==0){
        t.moveHandler (me);
      }
    }
  }
  
  function CeventMove (that){
    this.handler = handler;
    var t = that;
    function handler (me){
      if (t.enabled && !t.wentOut){
        var newTop = parseInt(t.theDiv.style.top) + me.clientY - t.lastY;
        var newLeft = parseInt(t.theDiv.style.left) + me.clientX - t.lastX;
        if (newTop < t.bounds.top){     // if out-of-bounds...
          newTop = t.bounds.top;
          _doneMoving(t);
        } else if (newLeft < t.bounds.left){
          newLeft = t.bounds.left;
          _doneMoving(t);
        } else if (newLeft > t.bounds.right){
          newLeft = t.bounds.right;
          _doneMoving(t);
        } else if (newTop > t.bounds.bot){
          newTop = t.bounds.bot;
          _doneMoving(t);
        }
        t.theDiv.style.top = newTop + 'px';
        t.theDiv.style.left = newLeft + 'px';
        t.lastX = me.clientX;
        t.lastY = me.clientY;
      }
    }
  }

  function debug  (msg, e){
    logit ("*************** "+ msg +" ****************");
    logit ('clientWidth, Height: '+ e.clientWidth +','+ e.clientHeight);
    logit ('offsetLeft, Top, Width, Height (parent): '+ e.offsetLeft +','+ e.offsetTop +','+ e.offsetWidth +','+ e.offsetHeight +' ('+ e.offsetParent +')');
    logit ('scrollLeft, Top, Width, Height: '+ e.scrollLeft +','+ e.scrollTop +','+ e.scrollWidth +','+ e.scrollHeight);
  }

  function dispEvent (msg, me){
    logit (msg + ' Button:'+ me.button +' Screen:'+ me.screenX +','+ me.screenY +' client:'+  me.clientX +','+ me.clientY +' rTarget: '+ me.relatedTarget);
  }
}

function entier_1dec (nombre){
	if (parseInt(nombre*10)!=0){
		return parseInt(nombre*10)/10;
	} else {
	return nombre;
	}	
}

function inspect(obj, maxLevels, level, doFunctions){
  var str = '', type, msg;
  if(level == null)  level = 0;
  if(maxLevels == null) maxLevels = 1;
  if(maxLevels < 1)
      return 'Inspect Error: Levels number must be > 0';
  if(obj == null)
    return 'ERROR: Object is NULL\n';
  var indent = '';
  for (var i=0; i<level; i++)
    indent += '  ';
  for(property in obj) {
    try {
        type =  matTypeof(obj[property]);
        if (doFunctions==true && (type == 'function')){
          str += indent + '(' + type + ') ' + property + "[FUNCTION]\n";
        } else if (type != 'function') {
          str += indent + '(' + type + ') ' + property + ( (obj[property]==null)?(': null'):('')) +' = '+ obj[property] +"\n";
        }
        if((type=='object' || type=='array') && (obj[property] != null) && (level+1 < maxLevels))
          str += inspect(obj[property], maxLevels, level+1, doFunctions);  // recurse
    }
    catch(err) {
      // Is there some properties in obj we can't access? Print it red.
      if(typeof(err) == 'string') msg = err;
      else if(err.message)        msg = err.message;
      else if(err.description)    msg = err.description;
      else                        msg = 'Unknown';
      str += '(Error) ' + property + ': ' + msg +"\n";
    }
  }
  str += "\n";
  return str;
}

Array.prototype.compare = function(testArr) {
    if (this.length != testArr.length) return false;
    for (var i = 0; i < testArr.length; i++) {
        if (this[i].compare) {
            if (!this[i].compare(testArr[i])) return false;
        }
        if (this[i] !== testArr[i]) return false;
    }
    return true;
}
String.prototype.StripQuotes = function() {
	return this.replace(/"/g,'');
}
String.prototype.entityTrans = { '&':'&amp;', '<':'&lt;',  '>':'&gt;',  '\"':'&quot;', '\'':'&#039', '<':'\\u003c', '/':'\\/', '\\':'\\\\', '\"':'\\\"'};
String.prototype.htmlSpecialChars = function() {
  var ret = this.toString();
  for (k in this.entityTrans)
     ret  = ret.split(k).join(this.entityTrans[k]);
  return ret;
}
String.prototype.htmlSpecialCharsDecode = function() {
  var ret = this.toString();
  for (k in this.entityTrans)
     ret = ret.split(this.entityTrans[k]).join(k);
  return ret;
}
String.prototype.trim = function () {
    return this.replace(/^\s*/, "").replace(/\s*$/, "");
}
String.prototype.stripTags = function(){
	return this.replace(/<\w+(\s+("[^"]*"|'[^']*'|[^>])+)?>|<\/\w+>/gi, '');
}

String.prototype.capitalize = function(){
	return this.charAt(0).toUpperCase() + this.substring(1).toLowerCase();
}

String.prototype.htmlEntities = function() {
  var ret = this.toString();
  for (k in this.entityTrans)
     ret  = ret.split(k).join(this.entityTrans[k]);
  return ret;
}

function objectName (o){
  var s = o.toString();
  return s.substr(7,s.length-8);
}

function matTypeof (v){
  if (v == undefined)
    return 'undefined';
  if (typeof (v) == 'object'){
    if (!v)
      return 'null';
    else if (v.constructor.toString().indexOf("Array")>=0 && typeof(v.splice)=='function')
      return 'array';
    else return 'object';
  }
  return typeof (v);
}

function tbodyScroller (tbody, maxHeight){  
  tbody.style.maxHeight = '';
  tbody.style.height = '';
  tbody.style.overflowX = 'hidden';
  if (parseInt(tbody.clientHeight) > maxHeight){
    tbody.style.height = maxHeight + 'px';
    tbody.style.maxHeight = maxHeight + 'px';
    tbody.style.overflowY = 'auto';
  }
}
function getRemainingHeight (e, cont){
  var ec = getClientCoords(e);
  var cc = getClientCoords(cont);
  return cont.clientHeight - (ec.y - cc.y);
}

function addCommasInt(n){
  nStr = parseInt(n) + '';
  var rgx = /(\d+)(\d{3})/;
  while (rgx.test(nStr)) {
    nStr = nStr.replace(rgx, '$1' + ',' + '$2');
  }
  return nStr;
}

function addCommas(nStr){
  nStr += '';
  x = nStr.split('.');
  x1 = x[0];
  x2 = x.length > 1 ? '.' + x[1] : '';
  var rgx = /(\d+)(\d{3})/;
  while (rgx.test(x1)) {
    x1 = x1.replace(rgx, '$1' + ',' + '$2');
  }
  return x1 + x2;
}



function unixTime (){
  return parseInt (new Date().getTime() / 1000) + unsafeWindow.g_timeoff;
}
function htmlOptions (a, curVal){
  m = '';
  for (k in a)
    m += '<OPTION value="'+ k +'"'+ (k==curVal?' SELECTED':'')  +'>'+ a[k] +'</option>';
  return m;
}
function getFunctionName (func){
  var name=/\W*function\s+([\w\$]+)\(/.exec(func);
  if (!name)
    return '';
  return name[1];
}

function DateStringToSortString(sDate, sFormat) {
	// sFormat: 'DD Mon YYYY' or 'Mon DD, HH:MM AM'
	var ShortMths = ["Jan", "Feb", "Mar", "Apr", "May", "Jun", "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"];
	if (sFormat == 'DD Mon YYYY') {
		var DD = sDate.substr(0,2);
		var Mon = sDate.substr(3,3);
		var Year = sDate.substr(7,4);
		var Hour = '00';
		var Min = '00';
	} else if (sFormat == 'Mon DD, HH:MM AM') {
		var DD = sDate.substr(4,2);
		var Mon = sDate.substr(0,3);
		var Year = '0000';
		var Hour = sDate.substr(8,2);
		var Min = sDate.substr(11,2);
		if (sDate.substr(14,2) == 'PM')
			Hour = '' + (12 + parseInt(Hour));
	}
	var i = ShortMths.indexOf(Mon) + 1
	Mon = '' + ((i < 10)?"0" + i:"" + i);
	return Year+Mon+DD+Hour+Min;
}

function thouormil(value,roundToK){
	if (value == 0)
		return '0';
	else if (value == '')
		return '';
	else if (value != parseFloat(value))
		return value;
	var val=value;
	if (roundToK && val > 9999)
		val = 1000 * Math.round(val/1000);
	if ((val%1000000)==0)
		return addCommas(val/1000000)+'m';
	else if ((val%1000)==0)
		return addCommas(val/1000)+'k';
	else
		return addCommas(val);
}

function shorten(value){
	var myvalue = parseInt(value);
	if (myvalue < 99999999)
		return addCommasInt(myvalue);
	else if (myvalue == '')
		return '';
	else
		return addCommasInt(myvalue/1000000) + 'm';
}

function findAllBetween (txt, find1, find2){
  var m = [];
  var last = 0;
  while ( (i1=txt.indexOf(find1, last))>=0 && (i2=txt.indexOf (find2, i1))>=0 ) {
    m.push (txt.substring(i1+find1.length, i2));
    last = i2 + find2.length;
  }
  return m;
}

function strUpTo (s, find){
  var i = s.indexOf(find);
  if (i > 0)
    return s.substr(0, i);
  return s;
}

/********
 Xd Xh
 Xh Xm
 Xm Xs
 Xs
********/
function timestrShort(time) {
  time = parseInt (time);
  if (time > 86400){
    var m = [];
    time /= 3600;
    m.push (parseInt(time/24));
    m.push ('d ');
    m.push (parseInt(time%24));
    m.push ('h ');
    return m.join ('');    
  } else
    return timestr (time);
}

/**********************
 part       full
 Xd Xh Xm   Xd Xh Xm Xs
 Xh Xm      Xh Xm Xs
 Xm Xs      Xm Xs
 Xs         Xs
**********************/
function timestr(time, full) {
  time = parseInt (time);
  var m = [];
  var t = time;
  if (t < 61)
    return  t + 's';
  if (t > 86400){
    m.push (parseInt(t/86400));
    m.push ('d ');
    t %= 86400;
  }  
  if (t>3600 || time>3600){
    m.push (parseInt(t/3600));
    m.push ('h ');
    t %= 3600;
  }  
  m.push (parseInt(t/60));
  m.push ('m');
  if (full || time<=3600 ){
    m.push (' ');
    m.push (t%60);
    m.push ('s');  
  }
  return m.join ('');
}

function timestrcolon(time) {
	seconds = parseInt (time);
	var t, u;
	var secs86400 = seconds % 86400;
	var numhours = Math.floor(secs86400 / 3600);
	t = '00' + numhours;
	t = t.substr(t.length-2,2) + ':';
	var numminutes = Math.floor((secs86400 % 3600) / 60);
	u = '00' + numminutes;
	t += u.substr(u.length-2,2) + ':';
	var numseconds = (secs86400 % 3600) % 60;
	u = '00' + numseconds;
	t += u.substr(u.length-2,2);
	return t;
}

function tidyKnightCombat (cityId, knightId, knightCombat) {
	var tidyCombat = '???';
	if (typeof (knightCombat) == 'string')
		tidyCombat = ((knightId == 0)?'':knightCombat);
	else {
		var k = Seed.knights['city'+cityId]['knt'+knightId];
		if (k == undefined)
			tidyCombat = '';
		else
			tidyCombat = k.combat;
	}
	return tidyCombat;
}

function fetchOtherAllianceInfo(pageNum, notify) { // as in alliance list, sorted by rank, 10 per page
	var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
	params.pageNo = pageNum;
	params.cityId = unsafeWindow.currentcityid;
	new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/allianceGetOtherInfo.php" + unsafeWindow.g_ajaxsuffix, {
		method: "post",
		parameters: params,
		onSuccess: function (rslt) {
			notify (rslt);
		},
		onFailure: function (rslt) {
			notify ({errorMsg:'AJAX error'});
		},
	});
}

function storeAllianceNames(rslt) {
	if (!rslt.ok){
		document.getElementById('allListOut').innerHTML = rslt.errorMsg;
		return;
	}
	var currentPage=parseInt(rslt.currentPage);
	var maxPage=parseInt(rslt.noOfPages);

	for (var i=0; i<rslt.otherAlliances.length; i++) {
		allianceName[parseInt(rslt.otherAlliances[i].allianceId)]=rslt.otherAlliances[i].name;
	}
	GM_log(currentPage+' of '+maxPage);
	if (currentPage < 5) // maxPage
		fetchOtherAllianceInfo(currentPage+1,storeAllianceNames);
	else {
		for (var k=0; k<allianceName.length; k++) {
			if (allianceName[k] != undefined)
				GM_log(k+':'+allianceName[k]);
		}
	}
}

/************  LIB singletons .... **************/
// TODO: fix REopening window
var WINLOG_MAX_ENTRIES = 1000;     // TODO
var WinLog = {
  state : null,
  win: null,
  eOut : null,
  lastE : null,
  enabled : true,
  reverse : true,
  busy : false,
isOpening : false,

  open : function (){
    var t = WinLog;

    function eventButClear(){
      var t = WinLog;
      t.lastE = null;
      t.eOut.innerHTML ='';
    }
    function eventButReverse(){
      var t = WinLog;
      if (t.busy)
        return;
      t.busy = true;
      if (t.reverse){
        t.win.document.getElementById('wlRev').value= 'Top';
        t.reverse = false;
      } else{
        t.win.document.getElementById('wlRev').value= 'Bottom';
        t.reverse = true;
      }
      var n = t.eOut.childNodes.length;
      if (n < 2)
        return;
      for (i=n-2; i>=0; i--){
        t.eOut.appendChild (t.eOut.childNodes[i]);
      }
      t.busy = false;
    }
    
    if (!t.win || t.win.closed){
t.isOpening = true;  
// Firefox bug??? It appears as if a new thread is started on open, withOUT reusing same window? huh?
      t.win = window.open('', 'uwtrace', 'top=30,left=0,width=900,height=700,scrollbars=no,location=no,menubar=no,directories=no,status=no');
	  t.win.show(true);
t.isOpening = false;
t.state = null;
    }
    
    if (t.state == null){
      t.win.document.body.innerHTML = '<STYLE>pre{margin:0px} hr{margin:3px; height:1px; border:0px; color:#cee; background-color:#cee}</style>\
        <BODY style="margin:0px; padding:0px; border:none">\
        <DIV id=winlogtop style="background-color:#d0d0d0; margin:0px; padding:0px; border:1px solid">\
        <INPUT id=wlClear type=submit value="Clear"> &nbsp; <INPUT id=wlRev type=submit value="Bottom"></div>\
        <DIV id=wlOut style="overflow-y:auto; height:100%; max-height:100%"></div></body>';
      t.win.document.getElementById('wlClear').addEventListener('click', eventButClear, false);
      t.win.document.getElementById('wlRev').addEventListener('click', eventButReverse, false);
      t.eOut =  t.win.document.getElementById('wlOut');
      t.lastE = null;
      t.state = 1;
    }
  },

  writeText : function (msg){
    WinLog.write (msg.htmlEntities()); 
  },
  
  write : function (msg){
    var t = WinLog;
    if (!t.enabled || t.isOpening)
      return;
    t.open();
    var te = document.createElement('pre');
    var now = new Date();
    var m = [];
    var millis = now.getMilliseconds();
    m.push (now.toTimeString().substring (0,8));
    m.push ('.');
    if (millis<100)
      m.push('0');
    if (millis<10)
      m.push('0');
    m.push(millis);
    m.push (': ');
    m.push (msg);
    te.innerHTML = m.join('');
    if (t.reverse){
      if (t.lastE == null){
        t.eOut.appendChild(te);
        t.lastE = te;
      } else {
        t.eOut.insertBefore(te, t.lastE);
      }
      var hr = document.createElement('hr');
      t.eOut.insertBefore(hr, te);
      t.lastE = hr;
    } else {
      t.eOut.appendChild(te);
      t.eOut.appendChild(document.createElement('hr'));
    }
  },

};

function getAllianceLeaders (){
    var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
    new AjaxRequest(unsafeWindow.g_ajaxpath + "ajax/allianceGetLeaders.php" + unsafeWindow.g_ajaxsuffix, {
		 method: "post",
		 parameters: params,
		 loading: true,
		 onSuccess: function (rslt) {
		 rslt = eval("(" + rslt.responseText + ")");
		 if (rslt.officers) {
			 Options.AllianceLeaders = [];
      		 for (add in rslt.officers) Options.AllianceLeaders.push(rslt.officers[add]['userId']);
       
     } 
     else {
			  setTimeout(function(){getAllianceLeaders;}, 1500);
		  }
		},
		onFailure: function () {}
  		});
};

function addCommasWhole(nStr){
  nStr += '';
  x = nStr.split('.');
  x1 = x[0];
  x2 = x.length > 1 ? '.' + x[1] : '';
  var rgx = /(\d+)(\d{3})/;
  while (rgx.test(x1)) {
    x1 = x1.replace(rgx, '$1' + ',' + '$2');
  }
  return x1;
}

function encode_utf8( s ){
  return unescape( encodeURIComponent( s ) );
}

function decode_utf8( s ){
  return decodeURIComponent( escape( s ) );
}

function CdialogCancelContinue (msg, canNotify, contNotify, centerElement){
  var pop = new CPopup ('ptcancont', 10, 10, 400,200, true, canNotify);
  if (centerElement)
    pop.centerMe(centerElement);
  else
    pop.centerMe(document.body);
  pop.getTopDiv().innerHTML = '<div class=showBadged><center>Koc PowerKoc</center></div>';
  pop.getMainDiv().innerHTML = '<TABLE class=ptTab align=center style="height: 100%"><TR align=center height=90%><TD>'+ msg +'</td></tr>\
      <TR align=center><TD><INPUT id=ptok type=submit value="OK" \> &nbsp; &nbsp; </td></tr></table>';
  document.getElementById('ptok').addEventListener ('click', function (){pop.destroy(false); if (canNotify) canNotify();}, false);
  pop.show(true);
}

function CdialogConfirm (msg, canNotify, contNotify, centerElement){
  var pop = new CPopup ('ptcancont', 10, 10, 400,200, true, canNotify);
  if (centerElement)
    pop.centerMe(centerElement);
  else
    pop.centerMe(document.body);
  pop.getTopDiv().innerHTML = '<div class=showBadged><center>PowerKoc</center></div>';
  pop.getMainDiv().innerHTML = '<TABLE class=ptTab align=center style="height: 100%"><TR align=center height=90%><TD colspan=2>'+ msg +'</td></tr>\
      <TR align=center><TD><INPUT id=pbok type=submit value="OK" \> &nbsp; &nbsp; </td><TD><INPUT id=pbcancel type=submit value="CANCEL" \> &nbsp; &nbsp; </td></tr></table>';
  document.getElementById('pbok').addEventListener ('click', function (){pop.destroy(false); if (canNotify) canNotify(this);}, false);
  document.getElementById('pbcancel').addEventListener ('click', function (){pop.destroy(false); if (canNotify) canNotify(this);}, false);
  pop.show(true);
}

function hexDump (dat){
  var i = 0;
  var s = [];
  while (i < dat.length) {
    asc = [];
    s.push (hex4(i));
    s.push (': ');
    for (var ii=0; ii<16; ii++) {
      c = dat.charCodeAt(i+ii);
      s.push (hex2(c));
      s.push (' ');
      if (c>31 && c<128)
        asc.push (dat.charAt(i+ii));
      else
        asc.push ('.');
    }
    s.push ('  ');
    s.push (asc.join(''))
    s.push ('\n');
    i += 16;
  }
  return s.join ('');
  function hex4(d){
    return hexDig(d>>12) + hexDig(d>>8) + hexDig(d>>4) + hexDig(d&15);
  }
  function hex2(d){
    return hexDig(d>>4) + hexDig(d&15);
  }
  function hexDig (d){
    hexdigs = '0123456789ABCDEF';
    return hexdigs.charAt(d&15);      
  }
}
 
function SliderBar (container, width, height, value, classPrefix, margin){
  var self = this;
  this.listener = null;
  if (value==null)
    value = 0;
  if (!margin)
    margin = parseInt(width*.05);
  this.value = value;
  if (width<20) width=20;
  if (height<5) height=5;
  if (classPrefix == null){
    classPrefix = 'slider';
    var noClass = true;
  }      
  var sliderHeight = parseInt(height/2);  
  var sliderTop = parseInt(height/4);
  this.sliderWidth = width - (margin*2);
    
  this.div = document.createElement ('div');  
  this.div.style.height = height +'px';
  this.div.style.width = width +'px';
  this.div.className = classPrefix +'Cont';
  if (noClass)
    this.div.style.backgroundColor='#ddd';
  
  this.slider = document.createElement ('div');
  this.slider.setAttribute ('style', 'position:relative;');
  this.slider.style.height = sliderHeight + 'px'
  this.slider.style.top = sliderTop + 'px';
  this.slider.style.width = this.sliderWidth +'px';
  this.slider.style.left = margin +'px';   
  this.slider.className = classPrefix +'Bar';
  this.slider.draggable = true;
  if (noClass)
    this.slider.style.backgroundColor='#fff';
  
  this.sliderL = document.createElement ('div');
  this.sliderL.setAttribute ('style', 'width:100px; height:100%; position:relative; ');
  this.sliderL.className = classPrefix +'Part';
  this.sliderL.draggable = true;
  if (noClass)
    this.sliderL.style.backgroundColor='#0c0';
  
  this.knob = document.createElement ('div');
  this.knob.setAttribute ('style', 'width:3px; position:relative; left:0px; background-color:#222');
  this.knob.style.height = height +'px';
  this.knob.style.top = (0-sliderTop) +'px';
  this.knob.className = classPrefix +'Knob';
  this.knob.draggable = true;
  this.slider.appendChild(this.sliderL);
  this.sliderL.appendChild (this.knob);
  this.div.appendChild (this.slider);
  container.appendChild (this.div);
  this.div.addEventListener('mousedown',  mouseDown, false);

  this.getValue = function (){
    return self.value;
  }

  this.setValue = function (val){   // todo: range check
    var relX = (val * self.sliderWidth);
    self.sliderL.style.width = relX + 'px';
    self.knob.style.left =  relX + 'px';
    self.value = val;
    if (self.listener)
      self.listener(self.value);
  }
  
  this.setChangeListener = function (listener){
    self.listener = listener;
  }

  function moveKnob (me){
    var relX = me.clientX - self.divLeft;
    if (relX < 0)
      relX = 0;
    if (relX > self.sliderWidth)
      relX = self.sliderWidth;
    self.knob.style.left = (relX - (self.knob.clientWidth/2) ) +'px';   // - half knob width !?!?
    self.sliderL.style.width = relX + 'px';
    self.value =  relX / self.sliderWidth;   
    if (self.listener)
      self.listener(self.value);
  }
  function doneMoving (){
    self.div.removeEventListener('mousemove', mouseMove, true);
    document.removeEventListener('mouseup', mouseUp, true);
  }  
  function mouseUp (me){
    moveKnob (me);
    doneMoving();
  }
  
  function mouseDown(me){
    var e = self.slider;
    self.divLeft = 0;
    while (e.offsetParent){   // determine actual clientX
      self.divLeft += e.offsetLeft;
      e = e.offsetParent;
    }
    moveKnob (me);
    document.addEventListener('mouseup',  mouseUp, true);
    self.div.addEventListener('mousemove',  mouseMove, true);
  }
  function mouseMove(me){
    moveKnob (me);
  }
}

function pause(milliseconds) {
	var dt = new Date();
	while ((new Date()) - dt <= milliseconds) { /* Do nothing */ }
}


function CmatSimpleSound (playerUrl, container, attrs, onLoad, flashVars) {
  var self = this;
  this.player = null;
  this.volume = 100;
  this.isLoaded = false;
  this.onSwfLoaded = null;
  
  var div = document.createElement ('div');
  this.onSwfLoaded = onLoad;
  if (navigator.appName.toLowerCase().indexOf('microsoft')+1) {
    div.innerHTML = '<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" codebase="http://download.macromedia.com/pub/shockwave/cabs/flash/swflash.cab#version=6,0,0,0"><param name="movie" value="'+playerUrl+'"><param name="quality" value="high"></object>';
    this.player = div.getElementsByTagName('object')[0];
  } else {
    div.innerHTML = '<embed src="'+playerUrl+'"  bgcolor="#eeeeee" allowfullscreen=false FlashVars="'+ flashVars +'" quality="high" allowscriptaccess="always" pluginspage="http://www.macromedia.com/go/getflashplayer" type="application/x-shockwave-flash" ></embed>';
    this.player = div.getElementsByTagName('embed')[0].wrappedJSObject;
  }
  if (container)
    container.appendChild (div);
  else
    document.body.appendChild (div);
  for (k in attrs)
    this.player.setAttribute(k, attrs[k]);
       
  this.setVolume = function (chanNum, vol){
    if (!self.isLoaded)
      return;
    self.player.jsSetVolume (chanNum, vol);
    volume = vol;
  }
  
  this.load = function (chanNum, url, bStream, bAutoplay, bUsePolicyFile){   // loop ?
    self.player.jsLoad (chanNum, url, bStream, bAutoplay, bUsePolicyFile);
  }
  
  this.play = function (chanNum, position){
    self.player.jsPlay (chanNum, position);
  }
    
  this.stop = function (chanNum){
    self.player.jsStop (chanNum);
  }
    
  this.getStatus = function (chanNum){           // returns null if sound channel is 'empty'
    return self.player.jsGetStatus (chanNum);
  }
  
  this.debugFunc = function (msg){  // overload to use
  }
      
  this.swfDebug = function (msg){    // called by plugin
    self.debugFunc('SWF: '+ msg);
  }
  this.swfLoaded = function (){    // called by plugin when ready to go!
    self.isLoaded = true;
    self.debugFunc ('playerIsReady');
    if (self.onSwfLoaded)
      self.onSwfLoaded();
  }
  this.swfPlayComplete = function (chanNum){    // called by plugin when a sound finishes playing (overload to be notified)
  }
  this.swfLoadComplete = function (chanNum, isError){    // called by plugin when a sound finishes loading  (overload to be notified)
  }
}
	
function DoUnsafeWindow(func, execute_by_embed) {
	if(this.isChrome || execute_by_embed) {
		var scr=document.createElement('script');
		scr.innerHTML=func;
		document.body.appendChild(scr);
	} else {
		try {  
			eval("unsafeWindow."+func);
		} catch (error) {
			logit("A javascript error has occurred when executing a function via DoUnsafeWindow. Error description: "+error.description);
		}
	}
}	

function GetDisplayName(){
	var DisplayName = document.getElementById('topnavDisplayName');
	if(DisplayName){
		DisplayName = DisplayName.innerHTML;
	}else{
		DisplayName = null;
	}
	return DisplayName
}

function DrawLevelIcons() {
	var maptileRe = /modal_maptile.([^,]+),([^,]+),([^,]+),([^,]+),([^,]+),([^,]+),([^,]+),([^,]+),([^,]+),([^,]+),([^,]+),([^,]+),([^,]+),([^,]+),([^,]+),([^,]+),([^,]+),([^,]+),([^,]+)/;
	var mapwindow=document.getElementById('mapwindow');
	if(!mapwindow) return;
	var levelIcons=document.getElementById('LevelIcons');
	if(levelIcons) return;

	var ss=document.evaluate(".//a[contains(@class,'slot')]",mapwindow,null,XPathResult.ORDERED_NODE_SNAPSHOT_TYPE,null);
	var lvRe=/_([0-9]+)/;
	var idDone=false;
	for(var s=0; s<ss.snapshotLength; s++) {
		var a=ss.snapshotItem(s);
		var onclick=a.getAttribute('onclick');
		var owner='';
		if(onclick) {
			var onclickM=maptileRe.exec(onclick);
			if(onclickM && onclickM[6]!='"null"') {
				var might=onclickM[7].StripQuotes();
				var alliance=onclickM[15].StripQuotes();
				var dip=getDiplomacy(alliance);
				owner=" "+onclickM[6].StripQuotes();
			}
		}
		var m=lvRe.exec(a.className);
		if(!m) continue;
		var sp=a.getElementsByTagName('span');
		if(sp.length==0) continue;

		if(!idDone) { a.id='levelIcons'; idDone=true; }
		sp[0].style.color='#cc0';
		
		if (alliance == 'null' && onclickM[12]=='"city"') sp[0].style.color='#33CCFF';
		if (dip == 'hostile' && onclickM[12]=='"city"') sp[0].style.color='#FF0000';
		if (onclickM[12]!='"city"' &&  onclickM[6]!='"null"') sp[0].style.color='#FF9900';
		if (onclickM[12]!='"city"' &&  onclickM[5]=='"null"' && onclickM[6]=='"null"' && onclickM[7]=='"null"' && onclickM[8]=='"null"' && onclickM[15]=='"null"' && onclickM[10]=='"null"') sp[0].style.color='#CC0033';
		if (Options.MapShowExtra) {
			if (onclickM && onclickM[6]!='"null"' ) sp[0].innerHTML='&nbsp;'+m[1]+owner+'<br />Might:'+addCommas(might);
			else sp[0].innerHTML='&nbsp;'+m[1]+addCommas(owner);
		}
		else {  
			if (onclickM && onclickM[6]!='"null"' ) sp[0].innerHTML='&nbsp;'+m[1];
			else sp[0].innerHTML='&nbsp;'+m[1]+addCommas(owner);
		}
		
	}

}

function ThroneItemName(e) {

  return e.createPrefix()+" "+e.type+" "+e.faction+" +"+e.level;
 
}

function getMarchInfo (){
  var ret = {};

  ret.marchUnits = [];
  ret.returnUnits = [];
  ret.resources = [];
  for (i=0; i<13; i++){
    ret.marchUnits[i] = 0;
    ret.returnUnits[i] = 0;
  }
  for (i=0; i<5; i++){
    ret.resources[i] = 0;
  }

  var now = unixTime();

  for(i=0; i<Cities.numCities; i++) {   // each city
    cityID = 'city'+ Cities.cities[i].id;
    for (k in Seed.queue_atkp[cityID]){   // each march
      march = Seed.queue_atkp[cityID][k];
      if (typeof (march) == 'object'){
        for (ii=0; ii<13; ii++){
          ret.marchUnits[ii] += parseInt (march['unit'+ ii +'Count']);
          ret.returnUnits[ii] += parseInt (march['unit'+ ii +'Return']);
        }
        for (ii=1; ii<5; ii++){
          ret.resources[ii] += parseInt (march['resource'+ ii]);
        }
          ret.resources[0] += parseInt (march['gold']);
      }
    }
  }
  return ret;
}

function AjaxRequest2 (url, opts){
    var headers = {
        'X-Requested-With': 'XMLHttpRequest',
        'X-Prototype-Version': '1.6.1',
        'Accept': 'text/javascript, text/html, application/xml, text/xml, */*'
    };
    var ajax = null;   
    if (window.XMLHttpRequest)
      ajax=new XMLHttpRequest();
    else
      ajax=new ActiveXObject("Microsoft.XMLHTTP");   
    if (opts.method==null || opts.method=='')
      method = 'GET';
    else
      method = opts.method.toUpperCase();    
    if (method == 'POST'){
        headers['Content-type'] = 'application/x-www-form-urlencoded; charset=UTF-8';
    } else if (method == 'GET'){
        addUrlArgs (url, opts.parameters);
    }    
    ajax.onreadystatechange = function(){
        if (ajax.readyState==4) {
            if (ajax.status >= 200 && ajax.status < 305)
            if (opts.onSuccess) opts.onSuccess(ajax);
            else
                if (opts.onFailure) opts.onFailure(ajax);
            } else {
                if (opts.onChange) opts.onChange (ajax);
            }
    }    
    ajax.open(method, url, true); // always async!
    for (var k in headers)
      ajax.setRequestHeader (k, headers[k]);
     if (matTypeof(opts.requestHeaders)=='object')
          for (var k in opts.requestHeaders)
            ajax.setRequestHeader (k, opts.requestHeaders[k]);
    if (method == 'POST'){
        var a = [];
        for (k in opts.parameters){
              if(matTypeof(opts.parameters[k]) == 'object'){
                  for(var h in opts.parameters[k]){
                      if(matTypeof(opts.parameters[k][h]) == 'object'){
                          for(var i in opts.parameters[k][h]){
                              if(matTypeof(opts.parameters[k][h][i]) == 'object'){
                              for(var j in opts.parameters[k][h][i]){
                                  a.push (k+'['+h+']['+i+']['+j+'] ='+ opts.parameters[k][h][i][j] );
                              }
                              } else
                              	a.push (k+'['+h+']['+i+']'+' ='+ opts.parameters[k][h][i]);
                          }
                      } else
                      a.push (k+'['+h+'] ='+ opts.parameters[k][h] );
                  }
              } else
              a.push (k +'='+ opts.parameters[k] );
        }
        ajax.send (a.join ('&'));
    } else {
        ajax.send();
    }
}

var DeleteReports = {
    deleting : false,
    deletes1 : new Array(),
    deletes0 : new Array(),
    timer:null,
    init : function(){
		var t = DeleteReports;
		clearInterval(t.timer);
		if(!t.deleting && (Options.DeleteMsg || Options.DeleteMsgs0 || Options.DeleteMsgs4 || Options.DeleteMsgs5 || Options.DeleteMsgs6 || Options.DeleteMsgs1 || Options.DeleteMsgs2 || Options.DeleteMsgs3)){
		 if (parseIntNan(Options.DeleteTimerMinute)<2) Options.DeleteTimerMinute=2;
		 t.timer = setInterval(t.startdeletereports, Options.DeleteTimerMinute*60000);
		}
    },	
	
    startdeletereports : function(){
		var t = DeleteReports;
		t.deletes1 = new Array();
		t.deletes0 = new Array();
	  	if(!t.deleting && (Options.DeleteMsg || Options.DeleteMsgs0 || Options.DeleteMsgs4 || Options.DeleteMsgs5 || Options.DeleteMsgs6 || Options.DeleteMsgs1 || Options.DeleteMsgs2 || Options.DeleteMsgs3)){
	  		t.deleting = true;
	  		t.fetchreport(0, t.checkreports);
	  	}
    },
    
    fetchreport : function(pageNo, callback){
		var t = DeleteReports;
		var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
		if(pageNo > 1)
			params.pageNo = pageNo;
		new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/listReports.php" + unsafeWindow.g_ajaxsuffix, {
			method: "post",
			parameters: params,
			onSuccess: function (rslt) {
				callback(rslt,pageNo);
			},
				onFailure: function () {
				callback();
			},
		});
    },
	
    checkreports : function(rslt, pageNo){
		var t = DeleteReports;
//		actionLog("Informes", "Informes de la pgina "+(pageNo+1)+"/"+rslt.totalPages+" borrados con xito");
		if(!rslt.ok){
			return;
		}
		if(rslt.arReports.length < 1){
			return;
		}
		var reports = rslt.arReports;
		var totalPages = rslt.totalPages;
	
		for(k in reports){
			if(Options.DeleteMsg){
				if((reports[k].marchType==9 || reports[k].marchType==4) && reports[k].side0PlayerId==0 && reports[k].side0TileType > 50)
					t.deletes1.push(k.substr(2));
				else if(reports[k].marchType==1 && t.isMyself(reports[k].side1PlayerId))
					t.deletes1.push(k.substr(2));
			}
			if (Options.DeleteMsgs0){
				if(reports[k].marchType==1 && !t.isMyself(reports[k].side1PlayerId)) {
					t.deletes0.push(k.substr(2));
				}
			}
			if (Options.DeleteMsgs1){
				if(reports[k].marchType==4 && (reports[k].side0TileType <= 50)&& reports[k].side0PlayerId==0)
					t.deletes1.push(k.substr(2));
			}
			if (Options.DeleteMsgs2){
				if(reports[k].side0TileType==54)
					t.deletes1.push(k.substr(2));
			}
			if (Options.DeleteMsgs3){
				if(reports[k].side0TileType==51 && reports[k].marchType==2 && t.isMyself(reports[k].side0PlayerId))
					t.deletes1.push(k.substr(2));
			}
			if (Options.DeleteMsgs4){
				if(reports[k].side0TileType==51 && reports[k].marchType==3)
					t.deletes1.push(k.substr(2));
			}
			if (Options.DeleteMsgs5){
				if(reports[k].side0TileType==51 && reports[k].marchType==4)
					t.deletes1.push(k.substr(2));
			}
			if (Options.DeleteMsgs6){
		         for(var i = 0; i < CrestData.length; i++) {
					x= CrestData[i].X;
					y= CrestData[i].Y;
					if (reports[k].side0XCoord == x && reports[k].side0YCoord == y) {
					 t.deletes1.push(k.substr(2));
					}
		
					
		         }
		        }
		}
		if ((pageNo+1)==totalPages || parseInt(pageNo+1)>10) {
		
		if(t.deletes1.length > 0 || t.deletes0.length > 0){
			t.deleteCheckedReports(t.deletes1, t.deletes0);
		} else {
			actionLog("Report", "No removal of required reports");
			t.deleting = false;
			return;
		}
		
		} else {
		  t.fetchreport(pageNo+1, t.checkreports);
		}
    },

    deleteCheckedReports : function(deletes1, deletes0){
		var t = DeleteReports;
		var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
		params.s1rids = deletes1.join(",");
		params.s0rids = deletes0.join(",");
		params.cityrids = '';
		new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/deleteCheckedReports.php" + unsafeWindow.g_ajaxsuffix, {
			method: "post",
			parameters: params,
			onSuccess: function (rslt) {
				if(rslt.ok){
					Seed.newReportCount = parseInt(Seed.newReportCount) - parseInt(deletes1.length) - parseInt(deletes0.length);
					actionLog("report", "Clearing "+(parseInt(deletes1.length)+parseInt(deletes0.length))+" automatically reports");
				} else {
				  actionLog("report", "Error deleting reports : "+ rslt.msg);
				}
				t.deleting = false;
			},
			onFailure: function () {
			 actionLog("Report "," Error deleting reports : "+ rslt.msg);
			 t.deleting = false;
			},
		});
    },	
    isMyself: function(userID){
		var t = DeleteReports;
		if(!Seed.players["u"+userID])
			return false;
		if(Seed.players["u"+userID].n == Seed.player.name)
			return true;
		else
			return false;
		return false;
    },
}

   

var RepairAuto = {
 timer : null,
 repairtimer: null,
 init: function (){
     if (!Options.salvageconfig.Repairrunning) return;
     if (upgradeData.active == true) { 
      upgradeData.active = false;
      saveUpgradeData();
      //return;
     }
     RepairAuto.setEnable();
  },
 setEnable: function (){
     var t = RepairAuto;
     clearTimeout (t.repairtimer);
     t.tableau=[];
     t.repairtimer = setTimeout (t.count, 1*1000);
 },
 
 count:function() {
  var t = RepairAuto;
  var lignauto = Seed.throne.rowNum * 5, i=uW.kocThroneItems;
  var nbl=0;
  t.tableau=[];
  clearTimeout (t.repairtimer);
   if (!Options.salvageconfig.Repairrunning) return;
   
  for (var z in i) {
       if (i[z].id) {
        e=uW.kocThroneItems[i[z].id];
        if (e) {
	nbl++;
	if (e.isBroken && nbl<=lignauto ) {
	  if (Seed.queue_throne) {
	   if (Seed.queue_throne.itemId!=e.id)
	     t.tableau.push(i[z].id); 
	  } else {
	   t.tableau.push(i[z].id);
	  }
	}   
       }
    }	
  }
  var timeLeft=-1;
  if (Seed.queue_throne) {
         if (Seed.queue_throne.end)
            timeLeft = Seed.queue_throne.end - uW.unixtime();
  }
  if (t.tableau.length>0 && timeLeft<0) {
     var itemId = t.tableau[Math.floor(Math.random()*t.tableau.length)];
     actionLog("Throne", "Repair " + uW.kocThroneItems[itemId].name + " - are: " + t.tableau.length + "");
     t.repair(itemId);
  } else {
   if (timeLeft>0) {
    actionLog("Throne", "You can only repair 1 item, wait "+timeLeft+"s +5");
    t.repairtimer = setTimeout (t.count, (timeLeft+5)*1000);
   } else {
    actionLog("Throne", "There are no items to clear - wait 5 minutes...");
    t.repairtimer = setTimeout (t.count, (5*60)*1000);   
   }
  }
 },
 
 repairId:0,
 repariend:null,
 countRepair:0,
 clearRepair:function() {
   var t = RepairAuto;
     if (t.repairId != 0) {
		unsafeWindow.kocThroneItems[t.repairId].isBroken = false;
		unsafeWindow.cm.ThroneView.renderInventory(unsafeWindow.kocThroneItems);
		t.repairId = 0;
   	      }
 },
 repair: function(id) {
    var t = RepairAuto; 
    clearTimeout (t.repairtimer);
    if (!Options.salvageconfig.Repairrunning) return;
    if (uW.kocThroneItems[id]) {
        var params = uW.Object.clone(uW.g_ajaxparams);
        params.action="timeRepair";
        params.ctrl="throneRoom\\ThroneRoomServiceAjax";
        params.throneRoomItemId=id; 
        uW.ajax.Request(uW.g_ajaxpath+"ajax/_dispatch53.php"+uW.g_ajaxsuffix,{method:"post",parameters:params,loading:true,
         onSuccess:function(transport) {
          var m = eval("(" + transport.responseText + ")");
          if (m.ok === true){
           Seed.queue_throne.start = uW.unixtime();
           Seed.queue_throne.end = m.eta; //uW.unixtime() + L;
           Seed.queue_throne.itemId = id;
           t.repairId = id;
	   t.repairend = m.eta;
	   unsafeWindow.cm.ThroneView.renderInventory(unsafeWindow.kocThroneItems);
	   var x = m.eta - unixTime();
	   setTimeout(t.clearRepair, (x+1)*1000);
           t.countRepair=0;
           duree= Seed.queue_throne.end - Seed.queue_throne.start + 5;
           actionLog("throne", "Repair ok " + ThroneItemName(uW.kocThroneItems[id]) + " - are: " +duree +"sec");
            t.repairtimer = setTimeout (t.count, (duree)*1000);
           } else {
            t.countRepair++;
            actionLog("throne", "<font color=red>Failed to repair</font> " + ThroneItemName(uW.kocThroneItems[id]) );
            if (t.countRepair>5) {
              t.countRepair=0; 
              t.repairtimer = setTimeout (t.count, (2*60)*1000);
            } else {
              setTimeout(function() { t.repair(id); },2000);
            }
            
           }
         }
    });
    
   } else {
     actionLog("throne", "Not found repair ID");
     t.repairtimer = setTimeout (t.count, (2*60)*1000);
   }
  },
}

/****Request**/
   var KoC = {
	_ServerID: null,
	getServerId: function () {
		if (this._ServerID == null) {
			var m = /^[a-zA-Z]+([0-9]+)\./.exec(document.location.hostname);
			if (m)
				this._ServerId = m[1];
			else
				this._ServerId = '??';
		}
		return this._ServerId;
	},

	_PlayerName: null,
	getPlayerName: function () {
		if (this._PlayerName == null) {
			var e = Tools.getElementByXPath("//*[@id='topnavDisplayName']");
			_PlayerName = e.text;
		};
		return this._PlayerName;
	}
};


   var Tools = {
	getElementByXPath: function (expr) {
		var d = document;
		var elmFirstResult = d.evaluate(expr, document,
			null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;
		return elmFirstResult;
	},

	click: function (element) {
		if (element == null) throw "Element not specified!";
		var evt = document.createEvent("MouseEvents");
		evt.initMouseEvent("click", true, true, window,
			0, 0, 0, 0, 0, false, false, false, false, 0, null);
		var canceled = !element.dispatchEvent(evt);
		if (canceled) {
			// A handler called preventDefault
		} else {
			// None of the handlers called preventDefault
		}
	},

	typeKeys: function (element, char) {
		try {
			for (var i = 0; i < char.length; i++) {
				// Create the key press event.
				var pressEvent = document.createEvent('KeyboardEvent');
				pressEvent.initKeyEvent("keypress", true, true, window,
					false, false, false, false,
					0, char.charCodeAt(i));

				element.dispatchEvent(pressEvent); // Press the key.
			}
		}
		catch (e) {
			alert("Your browser does not support this example!");
		}
	},

	type: function (element, char) {
		try {
			if (element.type == 'text') {
				element.focus();
				element.value = char;
			} else {
				alert("Unknown element!");
			}
		} catch (e) {
			alert("Your browser does not support this example!");
		}
	}
};

   
   ResourceRequest = {
	Destination: "xxx,yyy",
	Type:"ore",
	Amount:"50 k"
};



var Selenium = {

	click: function (locator) {
		logit("Selenium: click | " + locator);
		var elmt = this.getElementNoLog(locator);
		if (elmt == null) {
			throw "Element not found (" + locator + ")";
		}
		Tools.click(elmt);
	},

	getAttribute: function (attributeLocator) {
		logit("Selenium: getAttribute | " + attributeLocator);
		var index = attributeLocator.lastIndexOf('@');
		var locator = attributeLocator.substr(0, index);
		var attribute = attributeLocator.substring(index + 1, attributeLocator.length);
		var elmt = this.getElement(locator);
		var attrValue = elmt.getAttribute(attribute);
		return attrValue;
	},

	getElementNoLog: function (locator) {
		if (locator.search('//') == 0) return Tools.getElementByXPath(locator);
		if (locator.search('xpath=') == 0) return Tools.getElementByXPath(locator.substr(6, locator.length - 6));
		var elmt = document.getElementById(locator); if (elmt != null) return elmt;
		return document.getElementsByName(locator);
	},

	getElement: function (locator) {
		logit("Selenium: getElement | " + locator);
		return this.getElementNoLog(locator);
	},

	getElementPresentNoLog: function (locator) {
		return this.getElementNoLog(locator) != null;
	},
	getElementPresent: function (locator) {
		logit("Selenium: getElementPresent | " + locator);
		return this.getElementNoLog(locator) != null;
	},

	waitforElementPresent: function (locator) {
		logit("Selenium: waitforElementPresent | " + locator);
		var tot = new Date().getTime() + 30000;
		do {
			if (this.getElementPresentNoLog(locator)) return true;
		} while (new Date().getTime() < tot)
		throw "Timeout on waiting for element!";
	}

};

var Builder = {
	BlueButton: function (caption, onclick) {
		var a = document.createElement('a');
		if (typeof (onclick) == "string") { a.setAttribute("onclick", onclick); }
		else if (typeof (onclick) == "function") { a.addEventListener("click", onclick, true); }
		else throw "Invalid argument!";
		a.setAttribute("class", "button20");
		var span = document.createElement('span');
		a.appendChild(span);
		span.appendChild(document.createTextNode(caption));
		return a;
	},
	BlueTab: function (caption, onclick) {
		var a = document.createElement('a');
		a.addEventListener("click", onclick, true);
		a.setAttribute("class", "tab");
		a.appendChild(document.createTextNode(caption));
		return a;
	},

	Html: function (html) {
		var span = document.createElement('span');
		span.innerHTML = html;
		return span;
	},

	Element: function (elementName, innerElement) {
		var elmt = document.createElement(elementName);
		if (innerElement != null) elmt.appendChild(innerElement);
		return elmt;
	}
};

 function InitResourceRequest() {
	var div = document.createElement('div');
	div.style.fontSize = 'small';
	div.style.textAlign = 'left';
	div.style.borderBottom = '1px solid silver';
	div.style.margin = '0 0 0 10px';
	div.appendChild(Builder.BlueButton(" request ", atResourceRequestClick));
		div.appendChild(Builder.Html("<input id='rrDestination' type='text' size='7' maxlength='7' /><select id='rrType' ><option>gold</option><option>food</option><option>wood</option><option>stone</option><option selected='selected'>Ore</option></select><input id='rrAmount' type='text' size='7' maxlength='7'/>"));

	var e = Tools.getElementByXPath("//*[@class='comm_body comm_global']/form");
	e.parentNode.insertBefore(div, e);
	
	var s = GM_getValue("ResourceRequest_" + KoC.getServerId());
	var rrDestination = Tools.getElementByXPath("//*[@id='rrDestination']");
	var rrType        = Tools.getElementByXPath("//*[@id='rrType']");
	var rrAmount      = Tools.getElementByXPath("//*[@id='rrAmount']");
	if (s != null) {
		var rr = JSON2.parse(s);
		rrDestination.value = rr.Destination;
		rrType       .value = rr.Type;
		rrAmount     .value = rr.Amount;
	} else {
		rrDestination.value = "xxx,yyy";
		rrType       .value = "Mineral";
		rrAmount     .value = "50 kk";
	}
};

function atResourceRequestClick() {
	var rrDestination = Tools.getElementByXPath("//*[@id='rrDestination']").value;
	var rrType        = Tools.getElementByXPath("//*[@id='rrType']").value;
	var rrAmount      = Tools.getElementByXPath("//*[@id='rrAmount']").value;

	ResourceRequest.Amount = rrAmount;
	ResourceRequest.Type = rrType;
	ResourceRequest.Destination = rrDestination;

	GM_setValue("ResourceRequest_" + KoC.getServerId(), JSON2.stringify(ResourceRequest));

	var e = Tools.getElementByXPath("//*[@id='mod_comm_input']");
	if (e == null) { alert("XPath no encontrado!"); return; }
	Tools.type(e, "/a need someone to send me " + rrType + " a " + rrDestination + " if possible " + rrAmount + ", thank you !!");
	var b = e.nextSibling;
	Tools.click(b);
}

function estETA(dist, unit, cityID, typemarche) {
 var ret={ETA:0,etaStr:'N/D',friendETA:0,friendEtaStr:'N/D'};    
 if (dist <= 0) return ret;
 var troop_type = unit;
 var horse=0;
 if(troop_type>6) horse=1;
 var troop_speed=parseInt(unsafeWindow.unitstats["unt"+troop_type][3])*(1+0.1*parseInt(Seed.tech.tch11));
 if (horse){
               troop_speed=troop_speed*(1+0.05*parseInt(Seed.tech.tch12))
 } 
 var Speed = troop_speed;
  var throne67=EffetTronePrc(67).percent;
  var throne68,throne69,throne70,throne71,throne72;throne68=throne69=throne70=throne71=throne72=0;
  if(typemarche==4){
   throne68=EffetTronePrc(68).percent // attaque
  }else{
   if(typemarche==3){ //eclaireur
    throne72=EffetTronePrc(72).percent
   }else{
    if(typemarche==2){ //renforce
     throne69=EffetTronePrc(69).percent
    }else{
     if(typemarche==5){ // reassign
      throne71=EffetTronePrc(71).percent
     }else{
      if(typemarche==1){ // transport
       throne70=EffetTronePrc(70).percent
       }}}}}
       
  var throneBoost=throne67+throne68+throne69+throne70+throne71+throne72;
 
 Speed=Speed*(1+(throneBoost*0.01));
 
 var gi=unsafeWindow.cm.guardianModalModel.getMarchBonus();
 var multiplier=1+(gi*0.01);
 Speed=Speed*multiplier;
 var gSpeed = 0;
 var estSec;
 if (Speed>0) {
  gSpeed = Speed/6000;
  estSec = Math.ceil(parseFloat(dist)/gSpeed);
 }

 var e=1;
 if (ById("BOitem_55")) {
  var l_elem=ById("BOitem_55");
  if(l_elem&&l_elem.checked>0){ e=0.75;     }
 }
 if (ById("BOitem_57")) {
  var l_elem=ById("BOitem_57");
  if(l_elem&&l_elem.checked){   e=0.5;   }
 }
 ret.ETA = (parseInt((estSec*e+''))+30); 
 if(Seed.playerEffects.returnExpire>unsafeWindow.unixtime()){
  ret.ETA=parseInt(ret.ETA*0.5);
 }
 ret.etaStr = timestr (ret.ETA,1);
 if (cityID!=0) {
  var building = getCityBuilding (cityID, 18);
  if (building) {
   fSpeed = Speed * (1 + parseInt(building.maxLevel)/2);
   gSpeed = fSpeed/6000;
   estSec = (dist/gSpeed).toFixed(0);
   ret.friendETA = parseInt((estSec*e+''))+30; 
   ret.friendEtaStr = timestr ((ret.friendETA+''),1);
  }
 } else {
  ret.friendETA = ret.ETA; 
  ret.friendEtaStr = timestr ((ret.friendETA+''),1);
 }
 return ret;
}

function EffetTronePrc(effet) {
  var k=Seed.throne.slotEquip[Seed.throne.activeSlot],i=Seed.throne.inventory,e,faction;
  var B=0, w={}, x, C;
  for (var K in k) {
 	     var F = uW.kocThroneItems[k[K]];
 	     if (F) {
 	               x=0;
 	               for (var M in F.effects) {
 	               x++;
 	               if (F.quality >= x) {
 	                B++;
 	                I = uW.cm.thronestats.effects[F.effects[M].id];
 	                z = uW.cm.thronestats.tiers[F.effects[M].id][F.effects[M].tier];
 	                C = + z.base + (F.level * F.level + F.level) * + z.growth * 0.5;
 	                //C = C;
 	                if (!F.isBroken) { 
 	                   if (!w[F.effects[M].id]) {
 	                     w[F.effects[M].id] = {};
 	                     w[F.effects[M].id].nameitem="";
 	                   }
 	                   if (!w[F.effects[M].id].percent) { 
 	                     w[F.effects[M].id].percent = C; 
 	                   } else {
 	                    w[F.effects[M].id].percent += C; 
 	                   }
 	                   w[F.effects[M].id].name = I[1];
 	                }
 	               }
 	               }
 	               }
           }
           if (!w[effet]) {
           
            w[effet]={};
            w[effet].percent=0;
            
           }
 return w[effet];
}

function scan_allianceChat() {
	try {		
		var reqStyle = "background: lightgreen";

		div = Selenium.getElement("mod_comm_list2");
		for (var i = 0; i < div.childNodes.length; i++) {
			var msgdiv = div.childNodes[i];
			if (msgdiv.getAttribute("style") == reqStyle) return;
			if (msgdiv.innerHTML.indexOf('*Request*')==-1) continue;
			for (var j = 0; j < msgdiv.childNodes.length; j++) {
				var txdiv = msgdiv.childNodes[j];
				if (txdiv.innerHTML.indexOf('*Request*') == -1) continue;
				var actiondiv = document.createElement('div');
				var tReq = txdiv.textContent;
				var t1 = tReq.indexOf("*Request*");
				tReq = tReq.substring(t1, tReq.length);
				var t2 = tReq.indexOf("'");
				if (t2 >= 0) tReq = tReq.substr(0, t2);
				
				var tAck = tReq.replace('*Request*', "*Confirmed*");
				var tDly = tReq.replace('*Request*', "*Delivered*");
				var cA = "var chat = document.getElementById('mod_comm_input'); chat.value = '" + tAck + "';chat.focus();return false;";
				var cD = "var chat = document.getElementById('mod_comm_input'); chat.value = '" + tDly + " / ??min';chat.focus();return false;";
				actiondiv.appendChild(Builder.BlueButton("*Confirmed*", cA));
				actiondiv.appendChild(Builder.BlueButton("*Delivered*", cD));
				msgdiv.appendChild(actiondiv);
				msgdiv.setAttribute("style", reqStyle);
			}
		}
	} catch (err) {
		alert(err);
	}
}



/******************* Throne Enhancing Stats **********************/

Tabs.estats = {   
	tabOrder: 400,
    tabLabel: 'Enhance Stats',
    tabDisabled : !ENABLE_TEST_TAB,
    myDiv : null,
    
    init : function (div){
       var t = Tabs.estats;
       t.myDiv = div;
       t.buildDisplay();
    },
       
    buildDisplay :function()   {
       var t = Tabs.estats;
       var m = '<DIV class=trstat style="margin-top:5px; margin-bottom:5px;"><DIV id=trStatsMain class=trStat>ENHANCEMENT STATISTICS</div>';
       m += '<DIV id= trStatsTabDiv align=left style="margin-top:10px; margin-bottom:10px; margin-left: 30px; background-color:"#F8F8F8"; height:680px; overflow:scroll;">';
       m += '<TABLE class=trStatTab align=center cellspacing=0>';
       
       m += '<TR valign=top align=center><TH colspan=6>Enhancing Numbers  (successes/failures)</TH></TR>';
       
       var qstrings = new Array(uW.g_js_strings.throneRoom.simple,  uW.g_js_strings.throneRoom.common, uW.g_js_strings.throneRoom.uncommon, 
                                uW.g_js_strings.throneRoom.rare,    uW.g_js_strings.throneRoom.epic,   uW.g_js_strings.throneRoom.wondrous);

       
       m += '<TR valign=top align=center><th></th>';
       for( q =1; q <=5; q++)
       {
          m += "<td style='font-weight: bold;' class='td" + (q%2+1) +"'  >";
          m += qstrings[q];
          m += '</td>';
       }
       
       m += '</tr>';
       
       
       var st = [0,0,0,0,0];
       var ft = [0,0,0,0,0];
       
       for (l=0; l<=10; l++)
       {
	      m += '<TR valign=top align=center>';
	      m += "<th>";
	      if (l !=0) m += "+";
	      m+=  l + '</th>';
          for( q =0; q <5; q++)
          {
	         if (upgradeStats.enhanceSuccess[q][l] == null) upgradeStats.enhanceSuccess[q][l] =0;
	         if (upgradeStats.enhanceFailure[q][l] == null) upgradeStats.enhanceFailure[q][l] =0;
	         st[q] += upgradeStats.enhanceSuccess[q][l];
	         ft[q] += upgradeStats.enhanceFailure[q][l];
	         
	         m += "<td class='td" + (q%2) +"'  >";
	         m += upgradeStats.enhanceSuccess[q][l] + " / " + upgradeStats.enhanceFailure[q][l]; 
	         m += "</td>";
          }
          m += '</TR>';
       }
       
       m += '<TR valign=top align=center><th> Totals: </th>';
       for( q =0; q <5; q++)
       {
	      m += "<td style='font-weight: bold;' class='td" + (q%2) +"'  >";
	      m += st[q] + " / " + ft[q]; 
	      m += "</td>";
       }
       m += '</TR>';
       
       m += '<TR valign=top align=center><th> Percents: </th>';
       for( q =0; q <5; q++)
       {
	      m += "<td style='font-weight: bold;' class='td" + (q%2) +"'  >";
	      if ( (st[q] + ft[q]) == 0 )
	         m += "--";
	      else
	      {
		     var p = (100* st[q] / (st[q] + ft[q])); 
	         m += p.toFixed(2) + "%";
          }
	      m += "</td>";
       }
       m += '</TR>';
       
       m += '</TABLE></DIV>';
       
       m += "<div id='trStats'></div>";
       m += '</div>';
       t.myDiv.innerHTML = m;
   },
     
    show: function(){
	    var t = Tabs.estats;
	    t.buildDisplay();
	},
	
	hide: function(){
	},		
}

/******************* Throne Upgrade Stats **********************/

Tabs.ustats = {   
	tabOrder: 300,
    tabLabel: 'Upgrade Stats',
    tabDisabled : !ENABLE_TEST_TAB,
    myDiv : null,
    
    init : function (div){
       var t = Tabs.ustats;
       t.myDiv = div;
       t.buildTab();
   },
   
   buildTab : function ()
   {
	   var t = Tabs.ustats;
       var m = '<DIV class=trstat style="margin-top:5px; margin-bottom:5px;"><DIV id=trStatsMain2 class=trStat>UPGRADE STATISTICS</div>';
       m += '<DIV id= trStatsTabDiv2 align=left style="margin-top:10px; margin-bottom:10px; margin-left: 30px; background-color:"#F8F8F8"; height:680px; overflow:scroll;">';
       m += '<TABLE class=trStatTab align=center cellspacing=0>';
       
       m += '<TR valign=top align=center><TH colspan=12>Upgrading Numbers  (successes/failures)</TH></TR>';
       
       var qstrings = new Array(uW.g_js_strings.throneRoom.simple,  uW.g_js_strings.throneRoom.common, uW.g_js_strings.throneRoom.uncommon, 
                                uW.g_js_strings.throneRoom.rare,    uW.g_js_strings.throneRoom.epic,   uW.g_js_strings.throneRoom.wondrous);
       
       
       m += '<TR valign=top align=center><th></th>';
       
       for (l= 0; l<10; l++)
       {
	      m += "<td style='font-weight: bold;' class='td" + (l%2) +"'  >";
	      m+= "+" +(l+1) + "</td>";
       }  
       m += '</TR>';
       var st = [0,0,0,0,0,0,0,0,0,0,0];
       var ft = [0,0,0,0,0,0,0,0,0,0,0];
       
       for( q =0; q <=5; q++)
       {
	      m += '<TR valign=top align=center><th>' + qstrings[q] + '</th>';
          for (l=0; l<10; l++)
          {
	         if (upgradeStats.upgradeSuccess[q][l] == null) upgradeStats.upgradeSuccess[q][l] =0;
	         if (upgradeStats.upgradeFailure[q][l] == null) upgradeStats.upgradeFailure[q][l] =0;
	         st[l] += upgradeStats.upgradeSuccess[q][l];
	         ft[l] += upgradeStats.upgradeFailure[q][l];
	         
	         m += "<td class='td" + (l%2) +"'  >";
	         m += upgradeStats.upgradeSuccess[q][l] + " / " + upgradeStats.upgradeFailure[q][l]; 
	         m += "</td>";
          }
          m += '</TR>';
       }
       
       m += '<TR valign=top align=center><th> Totals: </th>';
       for( l =0; l<10; l++)
       {
	      m += "<td style='font-weight: bold;' class='td" + (l%2) +"'  >";
	      m += st[l] + " / " + ft[l]; 
	      m += "</td>";
       }
       m += '</TR>';
       
       m += '<TR valign=top align=center><th> Percents: </th>';
       for( l =0; l <10; l++)
       {
	      m += "<td style='font-weight: bold;' class='td" + (l%2) +"'  >";
	      if ( (st[l] + ft[l]) == 0 )
	         m += "--";
	      else
	      {
		     var p = (100* st[l] / (st[l] + ft[l])); 
	         m += p.toFixed(2) + "%";
          }
	      m += "</td>";
       }
       m += '</TR>';
       
       m += '</TABLE></DIV>';
       
       m += "<div id='trStats2'></div>";
       m += '</div>';
       t.myDiv.innerHTML = m;
       
   },
     
    show: function(){
	    var t = Tabs.ustats;
	    t.buildTab();
	},
	
	hide: function(){
	},		
}

/****************** Throne organizer **********************/

Tabs.organizer = {   
	tabOrder: 200,
    tabLabel: 'Organize',
    tabDisabled : !ENABLE_TEST_TAB,
	myDiv : null,
	itemLists : [],
	itemTypes : { chair: 0, table: 1, window: 2, banner: 3, advisor: 4, trophy: 5},
	selectedItems : [],
	
	init : function (div){
       var t = Tabs.organizer;
       // setup the lists for tables, chairs, etc.
       t.fillLists();
       t.myDiv = div;
       
       // setup the tab
       var m = '<Div style="width: 720px; height:710px;"><DIV id=trOrganizer class=trStat style="width: 740px;">ORGANIZER</div>';
       
       //m += "<div> Current preset: " + Seed.throne.activeSlot + "</div>";
       
       // header stuff
       //m += '<TABLE id=trOrgHeader width=100% height=0% class=trTab><TR align="center">';
	   //m += '<TD><INPUT id=presetSelect type=submit value="Preset = "' +  '></td>';
	   //m += '</tr>';    	   
 	   //m += '<tr><td><div><br></div></td></tr></table>';
 	   
 	   // preset selector
 	   m += '<TABLE  width=50% class=trTabPad2><tr align="center"><td width=80%><div><span>Preset: <select id="PresetList">';
 	   m += '<option value="0">--Presets--</option>';
 	   
	   for (k= 1; k <= Seed.throne.slotNum; k++)
	   {
         m += '<option value="'+k+'"> Preset:  '+ k +'</option>';
	   }
	   for (k= 1; k <= 10; k++)
	   {
         m += '<option value="local'+k+'"> Local:  '+ k +'</option>';
	   }
       m += '</select></span></div></td>';
       //m += '<TD width=10%><INPUT id=presetActive type=submit value=" Activate "></td>';
       //m += '<TD width=10%><INPUT id=presetSelect type=submit value=" Save "></td>';
       m += '</tr>';    	   
 	   m += '<tr><td><div><br></div></td></tr></table>';
       
       m += "<div id='trScrollDiv' style='width: 740px; max-height:705px; height:600px; overflow-x: auto; overflow-y:scroll;'>";
        var ii = Math.max(t.itemLists['chair'].length, t.itemLists['table'].length, t.itemLists['window'].length, t.itemLists['banner'].length, t.itemLists['advisor'].length, t.itemLists['trophy'].length);
       //m += "<div id='trTableDiv' style='width: 720px; height: " + (ii*155+20) + "px; overflow: hidden;'>";
       
       m += "<div id='trTableDiv' style='width: 740px; overflow: hidden; position: relative; left: 5px;'>";
       m += '<TABLE id=trDisplayTable align=center width=100% height=0% cellpadding="4" class=trTab >'; 
        m += "<th>Chairs</th><th>Tables</th><th>Windows</th><th>Banners</th><th>Advisors</th><th>Trophies</th>";
	   m += '</table></div>';
	   m += '</div>';
	   m += '</div>';
	   
	   //m+= '<div id="kofcNewTooltipDiv"></div>';
       t.myDiv.innerHTML = m;
       t.paintTable();
       
       document.getElementById ('PresetList').addEventListener ('click', function() {t.selectPreset(this.value);}, false);
       
       unsafeWindow.trSelectCard = t.selectCard;
       
       // default to highlight the active preset
       t.selectPreset(Seed.throne.activeSlot);
       document.getElementById ('PresetList').value = Seed.throne.activeSlot;
   },
   
   paintTable : function() {
	   // fill in the table
	   var t = Tabs.organizer;
	   var m = "";
       var mm;      
       var tab = document.getElementById('trDisplayTable');
       var ii = Math.max(t.itemLists['chair'].length, t.itemLists['table'].length, t.itemLists['window'].length, t.itemLists['banner'].length, t.itemLists['advisor'].length, t.itemLists['trophy'].length);
       
       m += "<th>Chairs</th><th>Tables</th><th>Windows</th><th>Banners</th><th>Advisors</th><th>Trophies</th>";
	   for (var k= 0; k < ii ; k++) 
	   {
		 mm = '<TR>';
		 for (i in t.itemTypes)
		 {
			var item = t.itemLists[i][k];
			var id="card";
			if (item != null)
			{
				id += item.id;
			}
		    mm += '<TD style="border: 5px solid white;" id="' + id +'" >';
            mm += t.buildCard(t.itemLists[i][k]);
            mm += '</TD>';
         }
         mm += '</TR>';
         m+= mm;
	   }
	   tab.innerHTML = m;
	   // repair the height/width caused by the 2d transform
       var d = document.getElementById ('trTableDiv');
	   var t = document.getElementById ('trDisplayTable');
       if (t.offsetHeight !=0) d.style.height = (TABLE_SCALE * t.offsetHeight) + "px";
       if (t.offsetWidth !=0) d.style.width   = (TABLE_SCALE * t.offsetWidth) + "px";
   },
   
   // select a kabam preset
   selectPreset : function (p)
   {
	   var t = Tabs.organizer;
	   t.clearCards();
	   var equipedItems = Seed.throne.slotEquip[p];
	   if (equipedItems != null)
	   {
         for (ll =0; ll < equipedItems.length; ll++)
         {
	       t.selectCard(equipedItems[ll]);
         }
       }
   },
   
   // fill the lists w/ the current TR items
   fillLists : function ()
   {
	   var t = Tabs.organizer;
	   
	   for (i in t.itemTypes)
	   {
	      t.itemLists[i] = new Array;   
	   }

	   for (k in unsafeWindow.kocThroneItems) {
         var throne_item = unsafeWindow.kocThroneItems[k];
         t.itemLists[throne_item.type].push(throne_item);
       }
   },
   
   // highlight a card
   selectCard : function(itemId)
   {
	   var t = Tabs.organizer;
	   var item = unsafeWindow.kocThroneItems[itemId];
	   var td;
	   
	   if (t.selectedItems[item.type] != null)
	   {
           td = document.getElementById( "card" + t.selectedItems[item.type]);
           if (td)
	       {
		      td.style.borderColor = "white";
	       }           
	   }
	   
	   t.selectedItems[item.type] = itemId;
	   td = document.getElementById( "card"+itemId);
	   if (td)
	   {
		   td.style.borderColor = "green";
	   }
   },
   
   clearCards : function()
   {
	   var t = Tabs.organizer;
	   for (k in t.selectedItems)
	   {
		   var td = document.getElementById( "card" + t.selectedItems[k]);
           if (td)
	       {
		      td.style.borderColor = "white";
	       }
	   }
	   t.selectedItems = [];
   },
   
   // create the card to display
   buildCard : function(I){
     var t = Tabs.organizer;
     var D = [];
     var w=CM.thronestats.mightByQuality;
     var z=CM.thronestats.mightByLevel;
     if (I == null)
     {
	    D.push("<div>");
	    D.push("</div>");
	    return D.join("");
     }
     D.push(" <div class='trCard' style='white-space: normal; padding: 0px;' onclick='trSelectCard(" + I.id + ");'> ");
     D.push("<div class='section'>");
     D.push(" <div class='title "+I.createPrefix().toLowerCase()+"' style='text-transform: capitalize;'> ");
     D.push(I.name);
     D.push(" </div> ");
     D.push(" <div class='description'> ");
     D.push(" <div class='portrait "+I.faction+" "+I.type+"'> </div> ");
     D.push("<ul>");
     D.push("<li>"+uW.g_js_strings.commonstr.faction+": "+I.faction+"</li>");
     D.push("<li>"+uW.g_js_strings.commonstr.quality+": "+I.createPrefix()+"</li>");
     D.push("<li>"+uW.g_js_strings.commonstr.type+": "+I.type+"</li>"); 
     D.push("<li>"+uW.g_js_strings.commonstr.level+": "+I.level+"</li>");
     D.push("<li>"+uW.g_js_strings.commonstr.might+": "+(w[I.quality].Might+z[I.level].Might)+"</li>");
     D.push("</ul>");
     D.push(" </div> ");
     D.push(" <ul> ");
   
     for (M in I.effects)
     {
       var N = I.effects[M];
       effect=CM.thronestats.effects[N.id];
       tier=CM.thronestats.tiers[N.id][N.tier];
       percent=+(tier.base+((I.level*I.level+I.level)*tier.growth*0.5));
       percent=(percent>0)?"+"+percent:+percent;
       percent=Math.ceil(percent);
       css=(M%2===0)?"even":"odd";
       B=+(M.split("slot")[1]);
       if(B<=I.quality){
          D.push(" <li class='effect "+css+"'> "+percent+"% "+effect[1]+" </li> ");
       }else{
          D.push(" <li class='effect disabled "+css+"'> "+percent+"% "+effect[1]+" </li> ");
       }
     }
     D.push(" </ul> ");
     D.push(" </div> ");
     D.push(" </ul> ")
     D.push(" </div> ");
     return D.join("");
        
   },
	
    show: function(){
	    var t = Tabs.organizer;
	    t.fillLists();
	    t.paintTable();
	    t.selectPreset(Seed.throne.activeSlot);
        document.getElementById ('PresetList').value = Seed.throne.activeSlot;
	},
	
	hide: function(){
	},	
}



function trActionLog (msg){
  if (!Tabs.trActionLog.tabDisabled)
    Tabs.trActionLog.log (msg);  
}




function unixTime (){
  return parseInt (new Date().getTime() / 1000) + unsafeWindow.g_timeoff;
}

function trActionLog (msg){
  if (!Tabs.trActionLog.tabDisabled)
    Tabs.trActionLog.log (msg);  
}


// example: http://www150.kingdomsofcamelot.com
var myServerId = null;
function getServerId() {
  if (myServerId == null){
    var m=/^[a-zA-Z]+([0-9]+)\./.exec(document.location.hostname);
    if (m)
      myServerId = m[1];
    else
      myServerId = '??';
  }
  return myServerId;
}

function logit (msg){
  var now = new Date();
  GM_log (getServerId() +' @ '+ now.toTimeString().substring (0,8) +'.' + now.getMilliseconds() +': '+  msg);
}

function inspect(obj, maxLevels, level, doFunctions){
  var str = '', type, msg;
  if(level == null)  level = 0;
  if(maxLevels == null) maxLevels = 1;
  if(maxLevels < 1)
      return 'Inspect Error: Levels number must be > 0';
  if(obj == null)
    return 'ERROR: Object is NULL\n';
  var indent = '';
  for (var i=0; i<level; i++)
    indent += '  ';
  for(property in obj) {
    try {
        type =  matTypeof(obj[property]);
        if (doFunctions==true && (type == 'function')){
          str += indent + '(' + type + ') ' + property + "[FUNCTION]\n";
        } else if (type != 'function') {
          str += indent + '(' + type + ') ' + property + ( (obj[property]==null)?(': null'):('')) +' = '+ obj[property] +"\n";
        }
        if((type=='object' || type=='array') && (obj[property] != null) && (level+1 < maxLevels))
          str += inspect(obj[property], maxLevels, level+1, doFunctions);  // recurse
    }
    catch(err) {
      // Is there some properties in obj we can't access? Print it red.
      if(typeof(err) == 'string') msg = err;
      else if(err.message)        msg = err.message;
      else if(err.description)    msg = err.description;
      else                        msg = 'Unknown';
      str += '(Error) ' + property + ': ' + msg +"\n";
    }
  }
  str += "\n";
  return str;
}


function matTypeof (v){
  if (typeof (v) == 'object'){
    if (!v)
      return 'null';
//    else if (unsafeWindow.Object.prototype.toString.apply(v) === '[object Array]')
    else if (v.constructor.toString().indexOf("Array")>=0 && typeof(v.splice)=='function')
      return 'array';
    else return 'object';
  }
  return typeof (v);
}	
 
 /****************************  Population Control Tab  ******************************/
Tabs.popcontrol = {
  tabOrder : 850,
  tabDisabled : false,
  tabLabel : 'Stack',
  myDiv : null,
  timer : null,
  timer_del : null,
  timer_cycle : null,
	del_count : 0,
	cycle_running : false,
	busy : false,
	cycle_step : 0,

  logtable : null,
  logmaxEntries: 300,
  loglast99 : [],
  poptab_troop_dismiss : 1,
  last_ran : 'train',


  init : function (div)
  	{
		var t = Tabs.popcontrol;
		t.myDiv = div;
		var selbut=0;
		
		var m = '<DIV class=pbStat>Population Control</div>';

		m += '<table border=0 width="100%">';	
		m += '<tr align=center>';
		m += '<td align=left><input type=submit id=pophelp_button value="HELP!"></td>';
		m += '<td align=center>Pick City:<span id=popcity></span></td>';
		m += '<td align=center>Population Gain per cycle: <span id=poptab_cycle_pop></span></td>';
		m += '<td align=center> Troops to dismiss: <select id=poptab_troop_dismiss><option value=1>ST</option><option value=2>MM</option><option value=3>Scout</option><option value=4>Pike</option><option value=5>Sword</option><option value=6>Archer</option></select>';
		m += '</tr>';
		m += '</table>';
		
		m += '<DIV class=pbStat>City Requirements:</div>';
		m += '<table border="0" width="100%">';		
		m += '<tr>';
		m += '<td>Current Food: &nbsp<span id=poptab_cur_food></span></td>';
		m += '<td>Current Wood: &nbsp<span id=poptab_cur_wood></span></td>';
		m += '<td>Current Ore: &nbsp&nbsp<span id=poptab_cur_ore></span></td>';
		m += '<td>Current dismissable troops: <span id=poptab_cur_mm></span></td>';
		m += '</tr>';
		m += '<tr>';
		m += '<td>Needed Food: &nbsp<span id=poptab_needed_food></span></td>';
		m += '<td>Needed Wood: &nbsp<span id=poptab_needed_wood></span></td>';
		m += '<td>Needed Ore: &nbsp&nbsp<span id=poptab_needed_ore></span></td>';
		m += '<td>Needed dismissable troops: <span id=poptab_needed_mm></span></td>';
		m += '</tr>';
		m += '</table>';

		m += '<DIV class=pbStat>City Status:</div>';
		m += '<table border="0" width="100%">';	
		m += '<tr align=center>';
		m += '<td>Maximum Idle Population: <span id=poptab_max_idle_pop></span></td>';
		m += '<td># Slots Used: <span id=poptab_slots_used></span><br></td>';
		m += '<td># of barracks: <span id=poptab_barracks></span></td>';
		//m += '<td> </td>';
		m += '</tr>';
		m += '<tr align=center>';
		m += '<td>Current Idle Population: <span id=poptab_cur_idle_pop></span></td>';
		m += '<td># Slots Free: <span id=poptab_slots_free></span></td>';
		m += '<td># of cottages: <span id=poptab_cottages></span></td>';
		//m += '<td> </td>';
		m += '</tr>';		
		m += '</table>';

		m += '<DIV class=pbStat>Commands:</div>';
		m += '<table border="0" width="100%">';	
		m += '<tr align=center>';
		m += '<td><input type="submit" id="poptab_dismiss_mm" value="Dismiss troops" disabled></td>';
		m += '<td><input type="submit" id="poptab_queue_st" value="Queue Supply Troops" disabled></td>';
		m += '<td><input type="submit" id="poptab_del_queues" value="Delete All Queues" disabled></td>';
		m += '<td><input type="submit" id="poptab_run_cycle" value="Run cycle" disabled></td>';
		//m += '<td><input type="submit" id="poptab_test" value="Test"></td>';
		m += '</tr>';		
		m += '</table>';
	
		m += '<DIV class=pbStat>Action Log:</div>';

		m += '<DIV style="height:250px; max-height:250px; overflow-y:auto">';
		m += '<TABLE cellpadding=0 cellspacing=0 id=poptab_log class=pbTabLined>';
		m += '<TR><TD></td><TD width=95%></td>';
		m += '</table></div>';

		t.myDiv.innerHTML = m;

		t.logtable = document.getElementById('poptab_log');  
		var a = JSON2.parse(GM_getValue ('poptab_log_'+getServerId(), '[]'));
		if (matTypeof(a) == 'array')
			{
			t.loglast99 = a;
			for (var i=0; i<t.loglast99.length; i++)		t.addlogrow (t.loglast99[i].msg, t.loglast99[i].ts);
			}
		window.addEventListener('unload', t.onUnload, false);

		t.tcp = new CdispCityPicker ('popcityselect', document.getElementById('popcity'), true, null, selbut);
		
		document.getElementById('pophelp_button').addEventListener		('click', function(){	t.helpPop(this);							} , false);
		document.getElementById('popcity').addEventListener						('click', function(){	t.show_city	(t.tcp.city.id);	} , false);
		document.getElementById('poptab_dismiss_mm').addEventListener	('click', function(){	t.dismiss_mm(t.tcp.city.id);	} , false);
		document.getElementById('poptab_queue_st').addEventListener		('click', function(){	t.queue_st	(t.tcp.city.id);	} , false);
		document.getElementById('poptab_del_queues').addEventListener	('click', function(){	t.del_queues_start(t.tcp.city.id);	} , false);
		document.getElementById('poptab_run_cycle').addEventListener	('click', function(){	t.run_cycle	(t.tcp.city.id);	} , false);
		//document.getElementById('poptab_test').addEventListener	('click', function(){	t.btest	();	} , false);
 	    	document.getElementById('poptab_troop_dismiss').addEventListener('change', function(){t.poptab_troop_dismiss = document.getElementById('poptab_troop_dismiss').value;} , false);
  
  	},

	disable_btns : function ()
		{
		var t = Tabs.popcontrol;
		t.busy = true;
		document.getElementById('poptab_del_queues'	).disabled = true;
		document.getElementById('poptab_queue_st').disabled = true;
		document.getElementById('poptab_dismiss_mm').disabled = true;
		document.getElementById('poptab_run_cycle').disabled = true; 
		},

	onUnload : function ()
		{
		var t = Tabs.popcontrol;
		//if (!ResetAll) GM_setValue ('log_'+getServerId(), JSON2.stringify(t.last50));
		GM_setValue ('poptab_log_'+getServerId(), JSON2.stringify(t.loglast99));
		},
    
	addlogrow : function (msg, ts)
		{
		var t = Tabs.popcontrol;
		if (t.logtable.rows.length >= t.maxEntries)	t.logtable.deleteRow(t.maxEntries-1);
		var row = t.logtable.insertRow(0);
		row.vAlign = 'top';
		row.insertCell(0).innerHTML = ts;
		row.insertCell(1).innerHTML = msg;
		},
  
	log : function (msg)
		{
		var t = Tabs.popcontrol;
		var ts = new Date().toTimeString().substring (0,8);
		for (postcity in Seed.cities) if (Seed.cities[postcity][0] == t.tcp.city.id) logcity = Seed.cities[postcity][1];
		msg = logcity + ": " + msg;
		t.addlogrow (msg, ts);
		while (t.loglast99.length >= 99)
		t.loglast99.shift();
		t.loglast99.push ({msg:msg, ts:ts});
		},

  hide : function (){         // called whenever the main window is hidden, or another tab is selected
    var t = Tabs.popcontrol;
    clearTimeout (t.timer);
  },
  
  show : function (){         // called whenever this tab is shown
    var t = Tabs.popcontrol;
    clearTimeout (t.timer);
    t.timer = setTimeout (t.show, 2000);
		t.show_city(t.tcp.city.id);
  },

	helpPop : function ()
		{
		var helpText = "";
		
		helpText += '<p>** This is a work in progress... If it gets stuck, refresh. By ADABman / Lurkin **';
		helpText += 'Probably a good idea to temporarily turn off auto transport, auto reassign, and auto train, when using this.';
		
		helpText += '<p>POPULATION CONTROL tab will help you convert your excess/useless millitiamen ';
		helpText += 'into massive amounts of idle population. Massive idle population is very useful ';
		helpText += 'to have before a might tournament starts, or if you want to do a massive siege ';
		helpText += 'build with a Merlins tutelage.';
		helpText += '</p>';
		
		helpText += '<p>The CITY REQUIREMENTS area displays the amount of resouces and Militiamen ';
		helpText += 'required for a \'full cycle\' of building massive idle population. If any of these ';
		helpText += 'requirements are not met, they will be displayed in red.';
		helpText += '</p>';
		
		helpText += '<p>The CITY STATUS area displays the maximum amount of population your cottages ';
		helpText += 'provide, and the current amount of idle population in your city. This area also ';
		helpText += 'shows the number of training queue slots total and in use.';
		helpText += '</p>';
		
		helpText += '<p>The COMMANDS area displays the buttons that automate this process:';
		helpText += '</p>';

		helpText += '<UL>';
		
		helpText += 'DISMISS MM BUTTON<BR><li>' + dismissBtn_help1 + '</li>';
		helpText += '<li>' + dismissBtn_help2 + '</li><BR>';
		
		helpText += 'QUEUE SUPPLY TROOP BUTTON<BR><li>' + queueBtn_help1 + '</li>';
		helpText += '<li>' + queueBtn_help2 + '</li><BR>';
		
		helpText += 'DELETE QUEUE BUTTON<BR><li>' + deleteBtn_help1 + '</li>';
		helpText += '<li>' + deleteBtn_help2 + '</li>';
		helpText += '<li>' + deleteBtn_help3 + '</li><BR>';
		
		helpText += 'RUN CYCLE BUTTON<BR><li>' + runcycleBtn_help1 + '</li>';
		helpText += '<li>' + runcycleBtn_help2 + '</li>';
		helpText += '<li>' + runcycleBtn_help3 + '</li><BR>';
	
		helpText += '</UL><BR>';
		
		//function CPopup (prefix, x, y, width, height, enableDrag, onClose)
		var pop = new pbPopup ('popcontrol_Help', 0, 0, 740, 600, true);
		pop.centerMe (mainPop.getMainDiv());  
		pop.getMainDiv().innerHTML = helpText;
		pop.getTopDiv().innerHTML = '<CENTER><B>Power Bot Help</b>:  Population Control</center>';
		pop.show (true);
		},

	show_city : function (cityId)
		{
		var t = Tabs.popcontrol;

		t.st_food = 50;
		t.st_wood = 150;
		//t.st_stone = 0;
		t.st_ore = 10;
		
		var green = '#03F003';
		var red =   '#F0303';

		t.max_idle_pop = (parseInt(Seed.citystats['city'+cityId].pop[1])).toFixed(0);
		t.cur_idle_pop = (parseInt(Seed.citystats['city'+cityId].pop[0])).toFixed(0);
		document.getElementById('poptab_max_idle_pop').innerHTML	= t.max_idle_pop;
		document.getElementById('poptab_cur_idle_pop').innerHTML	= t.cur_idle_pop;

		t.barracks = parseInt(getCityBuilding(cityId, 13).count);
		t.cottages = parseInt(getCityBuilding(cityId, 5).count);
		t.slots_used = parseInt(Seed.queue_unt['city'+cityId].length);
		t.slots_free = parseInt(t.barracks - t.slots_used);
		document.getElementById('poptab_barracks').innerHTML = t.barracks;
		document.getElementById('poptab_cottages').innerHTML = t.cottages;
		document.getElementById('poptab_slots_used').innerHTML = t.slots_used;
		document.getElementById('poptab_slots_free').innerHTML = t.slots_free;

		t.cycle_pop = (parseInt(t.barracks) * parseInt(t.max_idle_pop)) + (parseInt(t.max_idle_pop) * 2);
		document.getElementById('poptab_cycle_pop').innerHTML	= addCommas( t.cycle_pop / 2 );

//		var now = unixTime();
//		var knights = Seed.knights["city" + cityId];
//		if (knights)
//			{
//			var comKniId = parseInt(Seed.leaders['city' + cityId].combatKnightId);
//			if (comKniId)
//				{
//				var comValue = parseInt(Seed.knights['city' + cityId]['knt' + comKniId].combat);
//				var comBoost = parseInt(Seed.knights['city' + cityId]['knt' + comKniId].combatBoostExpireUnixtime);
//				if ((comBoost - now) > 0)	{	comValue = parseInt(comValue * 1.25);	}
//				} 
//			else	{	comValue = 0;	}
//			}
//		else	{	comValue = 0;	}
//		t.marshal_combat = comValue;
//		document.getElementById('poptab_marshal').innerHTML = t.marshal_combat;

		t.cur_food = parseInt(Seed.resources['city'+cityId].rec1[0]/3600);
		t.cur_wood = parseInt(Seed.resources['city'+cityId].rec2[0]/3600);
		//t.cur_stone = parseInt(Seed.resources['city'+cityId].rec3[0]/3600);
		t.cur_ore = parseInt(Seed.resources['city'+cityId].rec4[0]/3600);
		
		document.getElementById('poptab_cur_food').innerHTML = addCommas (t.cur_food);
		document.getElementById('poptab_cur_wood').innerHTML = addCommas (t.cur_wood);
		//document.getElementById('poptab_cur_stone').innerHTML = addCommas (t.cur_stone);
		document.getElementById('poptab_cur_ore').innerHTML = addCommas (t.cur_ore);
		
		t.needed_food = parseInt(t.cycle_pop) * parseInt(t.st_food);
		t.needed_wood = parseInt(t.cycle_pop) * parseInt(t.st_wood);
		//t.needed_stone = 0;//parseInt(t.cycle_pop) * parseInt(t.st_Stone);
		t.needed_ore = parseInt(t.cycle_pop) * parseInt(t.st_ore);
		
		document.getElementById('poptab_needed_food').innerHTML = addCommas (t.needed_food);
		document.getElementById('poptab_needed_wood').innerHTML = addCommas (t.needed_wood);
		//document.getElementById('poptab_needed_stone').innerHTML = addCommas (t.needed_stone);
		document.getElementById('poptab_needed_ore').innerHTML = addCommas (t.needed_ore);
		
		document.getElementById('poptab_needed_food').style.color = (t.needed_food  > t.cur_food?'red':'green');
		document.getElementById('poptab_cur_food').style.color = (t.needed_food  > t.cur_food?'red':'green');
		document.getElementById('poptab_needed_wood').style.color  = (t.needed_wood  > t.cur_wood?'red':'green');
		document.getElementById('poptab_cur_wood').style.color = (t.needed_wood  > t.cur_wood?'red':'green');
		//document.getElementById('poptab_needed_stone').style.color = (t.needed_stone > t.cur_stone?'red':'green');
		//document.getElementById('poptab_cur_stone').style.color = (t.needed_stone > t.cur_stone?'red':'green');
		document.getElementById('poptab_needed_ore').style.color = (t.needed_ore  > t.cur_ore?'red':'green');
		document.getElementById('poptab_cur_ore').style.color = (t.needed_ore  > t.cur_ore?'red':'green');

		t.needed_mm = t.cycle_pop;
		t.cur_mm = parseInt(Seed.units['city'+cityId]['unt' + t.poptab_troop_dismiss]);
		document.getElementById('poptab_needed_mm').innerHTML = addCommas(t.needed_mm);
		document.getElementById('poptab_cur_mm').innerHTML = addCommas(t.cur_mm);
		
		document.getElementById('poptab_needed_mm').style.color = (t.needed_mm  > t.cur_mm?'red':'green')
		document.getElementById('poptab_cur_mm').style.color = (t.needed_mm  > t.cur_mm?'red':'green')
		
		dismissBtn_help1 = "This button is used to quickly get your city to its maximum idle population allowed by dismissing just the right amount of militiamen.";
		dismissBtn_help2 = "This button will only light up when when your city is not at its maximum population, and then only if you have enough MM in your city to dismiss.";
		need_to_dismiss = parseInt(t.max_idle_pop - t.cur_idle_pop);
		dismissBtn = document.getElementById('poptab_dismiss_mm');
		if(parseInt(need_to_dismiss) > 0 && parseInt(need_to_dismiss) <= parseInt(t.cur_mm) && !t.busy && !t.cycle_running)
			{
			dismissBtn.disabled = false;
			dismissBtn.value = "Dismiss " + addCommas(need_to_dismiss) + " Troops";
			}
		else
			{
			dismissBtn.disabled = true;
			dismissBtn.value = "Dismiss Troops";
			}

		queueBtn_help1 = "This button is used to train all the idle population into Supply Troops.";
		queueBtn_help2 = "This button will only light up when your city is at full idle population, and then only if you have enough resources to train all those Supply Troops and at least 1 free training slot.";
		unitId = 1;	
		var res_ok = 0;
		for (var i = 1; i < 5; i++)
			{
			var res_need = parseInt(unsafeWindow.unitcost["unt" + unitId][i]) * 3600 * parseInt(t.cur_idle_pop);
			var res_have = parseInt(unsafeWindow.seed.resources["city" + cityId]["rec" + i][0]);
			if(parseInt(res_need) > parseInt(res_have))	{	res_ok++;	}
			}
		queueBtn = document.getElementById('poptab_queue_st');
		if(parseInt(t.slots_free) > 0 && parseInt(t.cur_idle_pop) >= parseInt(t.max_idle_pop) && parseInt(res_ok)==0 && !t.busy && !t.cycle_running)
			{
			queueBtn.disabled = false;
			queueBtn.value = "Queue " + addCommas(t.cur_idle_pop) + " Supply Troops";
			}
		else
			{
			queueBtn.disabled = true;
			queueBtn.value = "Queue Supply Troops";
			}

		deleteBtn_help1 = "This button is used to quickly delete all those queued up Supply Troops, returning 1/2 the used population (and resources?).";
		deleteBtn_help2 = "This button will only light up when there is at least 1 training queue slot used.";
		//deleteBtn_help3 = "** Due to a bug, you should refresh your game before using this button! **";
		deleteBtn_help3 = "If you have any problems with this button, refresh and try again.";
		deletebtn = document.getElementById('poptab_del_queues'	);
		if(Seed.queue_unt['city'+cityId].length > 0 && !t.busy && !t.cycle_running)
			{
			deletebtn.disabled = false;
			deletebtn.value = " Delete " + Seed.queue_unt['city'+cityId].length + " Queues";
			}
		else
			{
			deletebtn.disabled = true;
			deletebtn.value = "Delete All Queues";
			}

		runcycleBtn_help1 = "This button is used to automate the entire process of repeatedly dismissing Militiamen then queueing Supply Troops, and then finally delete all of those queues.";
		runcycleBtn_help2 = "This button will only light up when your city has the required amount of resources and Militiamen";
		//runcycleBtn_help3 = "------ This button is disabled for now. -----";
		runcycleBtn_help3 = "If the queue slots wont delete, refresh and hit the 'Delete All Queues' button.";
		res_ok = 0;
		t.cycle_pop_continue = (parseInt(t.slots_free) * parseInt(t.max_idle_pop)) + (parseInt(t.max_idle_pop) * 2);
		for (var i = 1; i < 5; i++)
			{
			var res_need = parseInt(unsafeWindow.unitcost["unt" + unitId][i]) * 3600 * parseInt(t.cycle_pop_continue);
			var res_have = parseInt(unsafeWindow.seed.resources["city" + cityId]["rec" + i][0]);
			if(parseInt(res_need) > parseInt(res_have))	{	res_ok++;	}
			}
		runcycleBtn = document.getElementById('poptab_run_cycle');
		//if(parseInt(t.cur_idle_pop) >= parseInt(t.max_idle_pop) && parseInt(res_ok)==0 && !t.busy && !t.cycle_running)
		t.needed_mm_continue = t.cycle_pop_continue;
		if(parseInt(t.needed_mm) <= parseInt(t.cur_mm) && parseInt(res_ok)==0 && !t.busy && !t.cycle_running)
			{
			runcycleBtn.disabled = false;
			}
		else
			{
			runcycleBtn.disabled = true; 
			}
		
		},

	run_cycle : function (cityId)
		{
		// Temp disable auto train for this city & auto reassign & auto transport & auto refresh
		// log all that
		// here dan
		
		var t = Tabs.popcontrol;
		clearTimeout (t.timer);
		clearTimeout (t.timer_cycle);
		t.disable_btns();
		if(!t.cycle_running)
			{
			t.log("Starting population build cycle. Population at start: " + t.cur_idle_pop);
			t.cycle_running = true;
			t.cycle_step = 1;
			}
		
		//t.actionlog("1");
		t.max_idle_pop = (parseInt(Seed.citystats['city'+cityId].pop[1])).toFixed(0);
		t.cur_idle_pop = (parseInt(Seed.citystats['city'+cityId].pop[0])).toFixed(0);
		//num = parseInt(t.max_idle_pop) - parseInt(t.cur_idle_pop);
		if(parseInt(t.cur_idle_pop) < parseInt(t.max_idle_pop))	// Need to Dismiss MM
			{
			if (t.cycle_running && t.last_ran == 'train') {
				t.dismiss_mm(cityId);
				t.last_ran = 'dismiss';
			} else {
				t.timer_cycle = setTimeout (function() {t.run_cycle(cityId)}, 1500);
			}
				
			
			//t.actionlog("2");
			}
		else if(parseInt(t.slots_free) > 0 && parseInt(t.cur_idle_pop) >= parseInt(t.max_idle_pop)) // Need to queue supply troops
			{
			if (t.cycle_running)	{
				t.queue_st(cityId);
				t.last_ran = 'train';
			}
			//t.actionlog("3");
			}
		else if(parseInt(t.slots_free) == 0)	// Delete all the queues
			{
			//t.actionlog("4");
			t.cycle_running = false;
			setTimeout(unsafeWindow.update_seed_ajax, 250);
			t.del_queues_start(t.tcp.city.id);
			t.timer = setTimeout (t.show, 1000);
			return;
			}
		else
			{
			t.log("Waiting...");	// Wait
			}
		//t.actionlog("5");
		setTimeout(unsafeWindow.update_seed_ajax, 250);
		t.timer_cycle = setTimeout (function() {t.run_cycle(cityId)}, 1500);
		},

	dismiss_mm : function (cityId)
		{
		var t = Tabs.popcontrol;
		t.disable_btns();
		
		unitId = t.poptab_troop_dismiss;

		t.max_idle_pop = (parseInt(Seed.citystats['city'+cityId].pop[1])).toFixed(0);
		t.cur_idle_pop = (parseInt(Seed.citystats['city'+cityId].pop[0])).toFixed(0);
		num = parseInt(t.max_idle_pop) - parseInt(t.cur_idle_pop);
		//t.log(num);
		
		var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
		params.cid = cityId;
		params.type = unitId;
		params.quant = num;

		new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/dismissUnits.php" + unsafeWindow.g_ajaxsuffix,
			{
			method: "post",
			parameters: params,
			onSuccess: function(rslt)
				{
				if (rslt.ok) 
					{
 					//t.log("Dismissed "+ addCommas(num) +" "+ troops[unitId]);
					t.log("Dismissed "+ addCommas(num) +" Troops");
					Seed.units['city'+cityId]['unt'+unitId] -= num;
					if(rslt.updateSeed){unsafeWindow.update_seed(rslt.updateSeed)};
					//setTimeout(unsafeWindow.update_seed_ajax, 250);
					t.busy = false;
					t.show_city(cityId);
					
					// Dismiss gets back 1/2 res ?
					//for (var i = 1; i < 5; i++)
					//	{
					//	var resourceGain = parseInt(unsafeWindow.unitcost["unt" + unitId][i]) * 3600 * parseInt(num) / 2;
					//	unsafeWindow.seed.resources["city" + cityId]["rec" + i][0] = parseInt(unsafeWindow.seed.resources["city" + cityId]["rec" + i][0]) + resourceGain;
					//	}
					}
				else
					{
					//t.log("FAILED to dismiss "+ addCommas(num) +" "+ troops[unitId] + " :(");
					t.log("FAILED to dismiss "+ addCommas(num) +" Militiamen :(");
					t.busy = false;
					}
				},
			});		
		setTimeout(unsafeWindow.update_seed_ajax, 250);
		},

	queue_st : function (cityId)
		{
		var t = Tabs.popcontrol;
		t.disable_btns();

		unitId = 1;
		num = t.cur_idle_pop;
		//num = 15;
		
		var time = unsafeWindow.modal_barracks_traintime(unitId, num);
		var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
		params.cid = cityId;
		params.type = unitId;
		params.quant = num;
		params.gambleId = 0;

		new MyAjaxRequest(unsafeWindow.g_ajaxpath + "ajax/train.php" + unsafeWindow.g_ajaxsuffix,
			{
			method: "post",
			parameters: params,
			onSuccess: function(rslt)
				{
				if (rslt.ok) 
					{
					//t.log("Trained "+ addCommas(num) +" "+ troops[unitId]);
					t.log("Trained "+ addCommas(num) +" Supply Troops");
					if(rslt.updateSeed){unsafeWindow.update_seed(rslt.updateSeed)};
					for (var i = 1; i < 5; i++)
						{
						var resourceLost = parseInt(unsafeWindow.unitcost["unt" + unitId][i]) * 3600 * parseInt(num);
						if(rslt.gamble) resourceLost = resourceLost*rslt.gamble[i];
						unsafeWindow.seed.resources["city" + cityId]["rec" + i][0] = parseInt(unsafeWindow.seed.resources["city" + cityId]["rec" + i][0]) - resourceLost;
						}
					unsafeWindow.seed.citystats["city" + cityId].gold[0] = parseInt(unsafeWindow.seed.citystats["city" + cityId].gold[0]) - parseInt(unsafeWindow.unitcost["unt" + unitId][5]) * parseInt(num);
					unsafeWindow.seed.citystats["city" + cityId].pop[0] = parseInt(unsafeWindow.seed.citystats["city" + cityId].pop[0]) - parseInt(unsafeWindow.unitcost["unt" + unitId][6]) * parseInt(num);
					//unsafeWindow.seed.queue_unt["city" + cityId].push([unitId, num, rslt.initTS, parseInt(rslt.initTS) + time, 0, time, null]);
					unsafeWindow.seed.queue_unt["city" + cityId].push([unitId, num, rslt.initTS, parseInt(rslt.initTS) + time, 0, rslt.ticksNeeded, null]);
					t.busy = false;
					t.show_city(cityId);
					}
				else
					{
					//t.log("FAILED to train "+ addCommas(num) +" "+ troops[unitId] + " :(");
					t.log("FAILED to train "+ addCommas(num) +" Supply Troops :(");
					t.busy = false;
					}
				},
			});
		setTimeout(unsafeWindow.update_seed_ajax, 250);
		},


	del_queues_start : function (cityId)
		{
		var t = Tabs.popcontrol;
		t.disable_btns();

		t.del_count = Seed.queue_unt['city'+cityId].length;
		t.log("Attempting to delete " + t.del_count + " Queue slots...");
		t.del_queues(cityId);
		},

 	del_queues : function (cityId)
		{
		var t = Tabs.popcontrol;
		clearTimeout (t.timer_del);

		var q = Seed.queue_unt['city'+cityId];
		var qs = q.toString();

		var skip = false; 		// for dan

		if((q.length > 0 || t.del_count > 0) && skip == false)
			{
			t.del_count -= 1;
			typetrn =		q[0][0];
			numtrptrn =	q[0][1];
			trnTmp =		q[0][2];
			trnETA = 		q[0][3];
			trnNeeded =	q[0][5];
			trainingId = 0;

			t.delete_queue_slot(typetrn, numtrptrn, trnTmp, trnETA, trnNeeded, cityId, trainingId)
			t.delete_queue_slot(typetrn, numtrptrn, trnTmp, parseInt(trnETA)-1, trnNeeded, cityId, trainingId)	//?!
						}
		else
			{
			t.log("No more queue slots to delete.");
			t.del_count = 0;
			t.busy = false;
			return;
			}
		setTimeout(unsafeWindow.update_seed_ajax, 250);
		t.timer_del = setTimeout (function() {t.del_queues(cityId)}, 1500);
		},

	delete_queue_slot : function (typetrn, numtrptrn, trnTmp, trnETA, trnNeeded, cityId, trainingId)
		{
		var t = Tabs.popcontrol;
		var uW = unsafeWindow;
		var params = uW.Object.clone(uW.g_ajaxparams);
		params.pf =0;
		params.requestType = "CANCEL_TRAINING";
		params.cityId = cityId;
		params.typetrn = typetrn;
		params.numtrptrn = numtrptrn;
		params.trnETA = trnETA;
		params.trnTmp = trnTmp;
		params.trnNeeded = trnNeeded;

		new AjaxRequest(uW.g_ajaxpath + "ajax/cancelTraining.php" + uW.g_ajaxsuffix,
			{
			method: "post",
			parameters: params,
			onSuccess: function (message)
				{
				var rslt=eval("("+message.responseText+")");
				if (rslt.ok)
					{
					t.log("Deleted queue of "+ addCommas(numtrptrn) +" "+ troops[typetrn]);
					if(rslt.updateSeed){unsafeWindow.update_seed(rslt.updateSeed)};
					var k=0;
					for(var j=0;j<Seed.queue_unt["city"+cityId].length;j++)
						{
						if(j>trainingId)
							{
							Seed.queue_unt["city"+cityId][j][2]=parseInt(rslt.dateTraining[k]["start"]);
							Seed.queue_unt["city"+cityId][j][3]=parseInt(rslt.dateTraining[k]["end"]);
							k++;
							}
						}
					Seed.queue_unt["city"+cityId].splice(trainingId,1);
					for(var i=1;i<5;i++)
						{
						var totalReturn=parseInt(uW.unitcost["unt"+typetrn][i])*parseInt(numtrptrn)*3600/2;
						Seed.resources["city"+cityId]["rec"+i][0]=parseInt(Seed.resources["city"+cityId]["rec"+i][0])+totalReturn;
						}
					}
				else
					{
					}
				},
			onFailure: function ()
				{
				},
			});
		},


}
	

//
 
 /*********************************** Stealth TAB ***********************************/
Tabs.ss = {
tabOrder: 800,
tabDisabled : !ENABLE_TEST_TAB,
tabLabel : 'Stealth',
MyCities	:	new Array(),
myDiv : null,
xcoord : 0,
ycoord : 0,
init: function(div){
var t = Tabs.ss;
t.myDiv = div;
var m = '<DIV class=pbStat>FLOOD A TARGETS TOWERS WITH SCOUTS!!</div><TABLE width=100% height=30% class=pbTab><TR align="center">';
m += '<CENTER><br>x coords? <INPUT id=pbssxcoords type=text size=3 value="0" maxlength=3 \> </center>';
m += '<CENTER><br>y coords? <INPUT id=pbssycoords type=text size=3 value="0" maxlength=3 \> </center>';
m += '<CENTER><br><INPUT id=pbssattack type=submit value="LAUNCH SMOKESCREEN ATTACKS"> </center>';
m += '<TD align=right><INPUT id=pbShowStealthHelp type=submit value="HELP"></td>';
t.myDiv.innerHTML = m;
document.getElementById('pbShowStealthHelp').addEventListener('click', function(){
		t.helpPop(this);
    }, false);
       
    document.getElementById('pbssattack').addEventListener ('click', function(){t.smokescreen(document.getElementById('pbssxcoords').value,document.getElementById('pbssycoords').value)}, false);
},
  
  
  helpPop : function (){
    var helpText = '<BR><DL><dt>Stealth:<dd><LI>If you want to have a better shot at getting kills you may try to hide your main attack force....</dd>\
    	<dd><LI>This lets you enter the location of an enemy and then flood them with many many many waves of 1 troop marches to hide your real force.</dd>\
        <dd><LI>Fill in the X and Y coord of your target.</dd>\
          <dd><LI>Click the Launch Smoke Screen Attacks button and it launches a batch of multiple wave smokescreen attacks to clog the enemies towers.</dd></ul>';
    var pop = new pbPopup ('giftHelp', 0, 0, 550, 250, true);
    pop.centerMe (mainPop.getMainDiv());  
    pop.getMainDiv().innerHTML = helpText;
    pop.getTopDiv().innerHTML = '<CENTER><B>Power Bot Help</b>:  Stealth Attacking</center>';
    pop.show (true);
  },
hide : function (){
},
show : function (){
},
smokescreen : function (xcoord, ycoord) {
var t = Tabs.ss;
t.xcoord = xcoord;
t.ycoord = ycoord;
for (var i=0;i<Seed.cities.length;i++){
var sccity = Seed.cities[i][0];
var rallypointlevel = 0;
for (var o in Seed.buildings['city'+sccity]){
var buildingType = parseInt(Seed.buildings['city'+sccity][o][0]);
var buildingLevel = parseInt(Seed.buildings['city'+sccity][o][1]);
if (buildingType == 12) rallypointlevel=parseInt(buildingLevel);
};
var slots=0;
for (aa in Seed.queue_atkp['city'+sccity]) {
slots++;
};
if (slots == 39)
slots = 12;
for (var aa = slots; aa <= rallypointlevel;aa++) {
	if (parseInt(Seed.units['city'+sccity]['unt3']) > 10) 
t.MyCities.push(sccity);
};


};
t.doattack();
},
doattack : function () {
var t = Tabs.ss;
if(t.MyCities[0] == null)
return;

var params = unsafeWindow.Object.clone(unsafeWindow.g_ajaxparams);
params.cid=t.MyCities.shift();
params.type=3;
params.xcoord = t.xcoord;
params.ycoord = t.ycoord;
params.u3= 1;
		new AjaxRequest(unsafeWindow.g_ajaxpath + "ajax/march.php" + unsafeWindow.g_ajaxsuffix, {
			 method: "post",
			 parameters: params,
			 loading: true,
			 onSuccess: function (transport) {
			 var rslt = eval("(" + transport.responseText + ")");
			 if (rslt.ok) {
			 var timediff = parseInt(rslt.eta) - parseInt(rslt.initTS);
			 var ut = unsafeWindow.unixtime();
			 var unitsarr=[0,0,0,0,0,0,0,0,0,0,0,0,0];
			 var resources=[0,0,0,0,0,0,0,0,0,0,0,0,0];
			 for(i = 0; i <= unitsarr.length; i++){
				if(params["u"+i]){
				unitsarr[i] = params["u"+i];
				}
			 }
			 var currentcityid = params.cid;
			 unsafeWindow.attach_addoutgoingmarch(rslt.marchId, rslt.marchUnixTime, ut + timediff, params.xcoord, params.ycoord, unitsarr, params.type, 0, resources, rslt.tileId, rslt.tileType, rslt.tileLevel, currentcityid, true);
			 unsafeWindow.update_seed(rslt.updateSeed)
			 if(rslt.updateSeed){unsafeWindow.update_seed(rslt.updateSeed)};
		   } else {
			if(rslt.user_action){
				new CdialogCancelContinue('<SPAN class=boldRed>CAPTCHA ALERT! You have been sending too many attacks!</span>', null, null, mainPop.getMainDiv);

			}
			 }
			 },
			 onFailure: function () {
				 }
			 
			 
  		 });
setTimeout (function() {t.doattack()}, 5000);
},
}

function addScript (scriptText){
	var scr = document.createElement('script');   
	scr.innerHTML = scriptText;
	document.body.appendChild(scr);
//    setTimeout ( function (){document.body.removeChild(scr);}, 500);
}
addScript ('uwuwuwFunc = function (text){ eval (text);  }');  


/************* Updater code *************/






pbStartup ();