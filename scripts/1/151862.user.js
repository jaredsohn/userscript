// ==UserScript==
// @name ** TEST ** Edit by Arash  . 55 . Golden .Silver . ** TEST **
// @version 55
// @description ** TEST **
// @author scoobydoo ** TEST **
// @namespace ** TEST **
// @grant none
// @website ** TEST **
// @include http://*.the-west.*/game.php*
// @include http://*.tw.innogames.*/game.php*
// ==/UserScript==
(function(f){var d=document,s=d.createElement('script');s.setAttribute('type','application/javascript');s.textContent='('+f.toString()+')()';(d.body||d.head||d.documentElement).appendChild(s);s.parentNode.removeChild(s)})(function(){TWDB = {};TWDB.script = new Object({version: 20,revision: 55,name: "The West - tw-db.info Cloth Calc",update: "tw-db.ir/cache/userscripts/clothcalc/dev_clothcalc_eng.user.arash",check: "tw-db.info/cache/userscripts/clothcalc/dev_version.arash",url: "tw-db.info", gameversion: 2.01,lang:"eng"});try{TWDB.script.notes=jQuery.parseJSON('[{\"version\":\"20\",\"notes\":\"[general] reworked the Script for the-west Version 2.0 <br \\\/>\\r\\n[general] Release Notes for Script is added ingame <br \\\/>\\r\\n[Importer] the Import Userscript is now included in ClothCalc Userscript (for Gameversion 1.36 you will still need it) <br \\\/>\\r\\n[Importer] the Alliance Import Script is now directly available through the script <br \\\/>\\r\\n[ClothCalc] Basic Function is working (showing best cloth) <br \\\/>\\r\\n[ClothCalc] <b>Values for Wages and Danger when sorting the Joblist are wrong!<\\\/b> <br \\\/>\\r\\n[ClothCalc] preselecting the selected Job on Minimap is ready for Version 2.0 <br \\\/>\\r\\n[ClothCalc] the sorted job List (experience, wages) could be changed from normal mode to value per minute to value per energy point <br \\\/>\\r\\n[ClothCalc] Joblist is reworked, jobs could now be searched and jobs have little popup with complete job data <br \\\/>\\r\\n[FavoriteJob] this Feature has been removed because it now emulates a premium feature <br \\\/>\\r\\n[SearchJob] this Feature has been removed because it now emulates a premium feature <br \\\/>\\r\\n[ReportAnalyser] the basic function is reworked for game version 2.0 <br \\\/>\\r\\n[ReportAnalyser] detailed job report and detailed item report will be added later <br \\\/>\\r\\n[Chat] still not ready for Game Version 2.0 <br \\\/>\"},{\"version\":\"10\",\"notes\":\"[ClothCalc] added Favorite Job Feature (petee)<br \\\/>disabled script for TW2.0\"},{\"version\":\"9\",\"notes\":\"[Chat] added popup on permanent whisper icon<br \\\/>\\r\\n[Chat] history ist now saved on localStorage (color, whisper)<br \\\/>\\r\\n[Chat] added permanent whisper to player menu<br \\\/>\\r\\n[Chat] added inputfield to direct input color number<br \\\/>\\r\\n[Chat] added bold and captialize options<br \\\/>\\r\\n[analyser] added table footer with overall values<br \\\/>\\r\\n[analyser] added statistics reset function<br \\\/>\\r\\n[analyser] exclude questitems from item statistic<br \\\/>\\r\\n[analyser] granular report for items (Item-Report), click on items at new table footer<br \\\/>\\r\\n[calc] added option to switch position of cloth calc window between left and right<br \\\/>\\r\\n[enhancements] added feature so you can hold the +\\\/- buttons in the skills window to change the value faster<br \\\/>\\r\\n\"},{\"version\":\"8\",\"notes\":\"added settings window<br \\\/>\\r\\nadded chat features (permanent wisper, color, smilies)<br \\\/>\\r\\nadded Report Analyser<br \\\/>\\r\\nadded second Buytip Icon if item gives bonus for current selected job<br \\\/>\\r\\nfixed with * marker for new items on market<br \\\/>\\r\\nfixed several small bugs on job search feature<br \\\/>\\r\\nfixed buyTip was not shown without calcdata update<br \\\/>\"},{\"version\":\"7\",\"notes\":\"add new feature jobsearch (petee)<br \\\/>\\r\\n\\\"new\\\" Icon will now also look at Wear Items (thx Inno optimizing your Wear Object)<br \\\/>\\r\\nchanged max gameversion to 1.36 for coming new gameversion (no problems found with new gameversion)<br \\\/>\\r\\nadded new Script Loader with Info on footer (next to servertime)<br \\\/>\"},{\"version\":\"6\",\"notes\":\"code cleaning and optimising<br \\\/>\\r\\nupdate minimap on jobchange if minimap is opend<br \\\/>\\r\\nset limit for custom jobs from 10 to 15<br \\\/>\\r\\nfixed several problems with attributes on customs<br \\\/>\\r\\nadded images for fort-customs and for attributes on customs<br \\\/>\\r\\nadded icon on Traders with tooltip for which jobs this item would give a better bonus<br \\\/>\\r\\nadded icon on Inventory with tooltip of bonus on selected job<br \\\/>\\r\\non rev. 59 added colored tooltip for better visibility<br \\\/>\\r\\non rev. 59 added icon for unused items on inventory<br \\\/>\"},{\"version\":\"5\",\"notes\":\"eleminating browser freezes<br \\\/>\\r\\nmaking custom section customisable<br \\\/>\\r\\nshowing best and current \\\"job\\\" values on custom section<br \\\/>\\r\\nchanges on cache system<br \\\/>\\r\\ncorrected code verification on rev. 34<br \\\/>\"},{\"version\":\"4\",\"notes\":\"fixed removed indexedDB.setVersion on Mozilla<br \\\/>\\r\\nbetter error handling of indexedDB, click on \\\"cache error\\\" icon will initiate a reset of indexedDB<br \\\/>\\r\\nsolution for Cache Problem on Scriptupdate with Chrome (not working on this update :( )<br \\\/>\\r\\nearlier button add, opacity to 50% until initializing isn\\u0027t finished<br \\\/>\\r\\nten second sleeper on initializing to handle chrome freezes<br \\\/>\\r\\nadded marker for items on traders which are not at own inventory<br \\\/>\\r\\nadded \\\"*\\\" prefix on market for all items which are not at own inveontory<br \\\/>\\r\\nfixed wrong levelbonus for soldiers<br \\\/>\\r\\nprevent script from be active in more than one language<br \\\/>\"},{\"version\":\"3\",\"notes\":\"fixed problem with need of cache update<br \\\/>\\r\\nfixed problem that inventory window was closed<br \\\/>\\r\\nadded best animal to every job<br \\\/>\\r\\nadded mark of weared items\"},{\"version\":\"2\",\"notes\":\"recreate the script as whole userscript without reloading javascript code (in combine with indexedDB the script will working also if tw-db is temporary down)<br \\\/>\\r\\nimplementation of an update system (user get a new Window with update link if new script version is available)<br \\\/>\\r\\ncustom section with static custom activities (is prepared for making it user adjustable later)<br \\\/>\\r\\ndisplay skill images for selected jobs<br \\\/>\\r\\nsome important internal management parts\"}]');}catch(e){};var TWDBData={};try{TWDBData.sets=jQuery.parseJSON('{\"gold_set\":{\"2\":{\"skills\":{\"9\":10},\"jobs\":{\"all\":25},\"attributes\":[]}},\"greenhorn_set\":{\"2\":{\"skills\":[],\"jobs\":{\"6\":10},\"attributes\":[]},\"3\":{\"skills\":[],\"jobs\":{\"27\":40,\"6\":10},\"attributes\":[]},\"4\":{\"skills\":[],\"jobs\":{\"27\":40,\"6\":10,\"17\":25},\"attributes\":[]},\"5\":{\"skills\":[],\"jobs\":{\"27\":40,\"20\":20,\"6\":10,\"17\":25},\"attributes\":[]},\"6\":{\"skills\":[],\"jobs\":{\"27\":40,\"20\":20,\"6\":10,\"17\":25,\"22\":30},\"attributes\":[]},\"7\":{\"skills\":[],\"jobs\":{\"all\":10,\"17\":25,\"22\":30,\"27\":40,\"20\":20,\"6\":10},\"attributes\":[]},\"8\":{\"skills\":{\"5\":1,\"6\":1,\"7\":1,\"8\":1,\"9\":1,\"20\":1,\"21\":1,\"22\":1,\"23\":1,\"24\":1},\"jobs\":{\"all\":50,\"22\":30,\"17\":25,\"27\":40,\"6\":10,\"20\":20},\"attributes\":{\"1\":1,\"4\":1}}},\"set_dancer\":{\"2\":{\"skills\":{\"24\":12,\"20\":2,\"21\":2,\"22\":2,\"23\":2},\"jobs\":{\"all\":5},\"attributes\":{\"4\":2}},\"3\":{\"skills\":{\"20\":5,\"21\":5,\"22\":5,\"23\":15,\"24\":15},\"jobs\":{\"all\":15},\"attributes\":{\"4\":5}},\"4\":{\"skills\":{\"18\":12,\"23\":19,\"24\":19,\"20\":9,\"21\":9,\"22\":9},\"jobs\":{\"all\":30},\"attributes\":{\"4\":9}},\"5\":{\"skills\":{\"20\":11,\"21\":11,\"22\":11,\"23\":21,\"24\":27,\"8\":6,\"18\":12},\"jobs\":{\"all\":50},\"attributes\":{\"4\":11}},\"6\":{\"skills\":{\"20\":15,\"21\":15,\"22\":15,\"23\":25,\"24\":40,\"8\":6,\"18\":12},\"jobs\":{\"all\":75},\"attributes\":{\"4\":15}},\"7\":{\"skills\":{\"23\":30,\"24\":45,\"20\":20,\"21\":20,\"22\":20,\"18\":12,\"8\":18},\"jobs\":{\"all\":100},\"attributes\":{\"4\":20}}},\"set_farmer\":{\"2\":{\"skills\":{\"10\":1,\"11\":1,\"12\":1,\"13\":1,\"14\":1,\"5\":1,\"6\":1,\"7\":1,\"8\":1,\"9\":1},\"jobs\":{\"12\":10,\"13\":10,\"8\":10},\"attributes\":{\"2\":1,\"1\":1}},\"3\":{\"skills\":{\"20\":1,\"21\":1,\"22\":1,\"23\":1,\"24\":1,\"15\":1,\"16\":1,\"17\":1,\"18\":1,\"19\":1,\"10\":1,\"11\":1,\"12\":1,\"13\":1,\"14\":1,\"5\":1,\"6\":1,\"7\":1,\"8\":1,\"9\":1},\"jobs\":{\"12\":10,\"22\":20,\"88\":20,\"30\":20,\"13\":10,\"8\":10},\"attributes\":{\"4\":1,\"3\":1,\"2\":1,\"1\":1}},\"4\":{\"skills\":{\"10\":2,\"11\":2,\"12\":2,\"13\":2,\"14\":2,\"5\":2,\"6\":2,\"7\":2,\"8\":2,\"9\":2,\"20\":2,\"21\":2,\"22\":2,\"23\":2,\"24\":2,\"15\":2,\"16\":2,\"17\":2,\"18\":2,\"19\":2},\"jobs\":{\"13\":10,\"8\":10,\"44\":40,\"12\":10,\"22\":20,\"88\":20,\"84\":40,\"48\":40,\"30\":20},\"attributes\":{\"2\":2,\"1\":2,\"4\":2,\"3\":2}},\"5\":{\"skills\":{\"20\":2,\"21\":2,\"22\":2,\"23\":2,\"24\":2,\"5\":2,\"6\":2,\"7\":2,\"8\":2,\"9\":2,\"10\":2,\"11\":2,\"12\":2,\"13\":2,\"14\":2,\"15\":2,\"16\":2,\"17\":2,\"18\":2,\"19\":2},\"jobs\":{\"88\":20,\"84\":40,\"48\":40,\"8\":10,\"22\":20,\"44\":40,\"95\":40,\"12\":10,\"13\":10,\"30\":20},\"attributes\":{\"4\":2,\"1\":2,\"2\":2,\"3\":2}},\"6\":{\"skills\":{\"15\":2,\"16\":2,\"17\":2,\"18\":2,\"19\":2,\"20\":2,\"21\":2,\"22\":2,\"23\":2,\"24\":2,\"5\":2,\"6\":2,\"7\":2,\"8\":2,\"9\":2,\"10\":2,\"11\":2,\"12\":2,\"13\":2,\"14\":2},\"jobs\":{\"22\":20,\"12\":10,\"96\":40,\"30\":20,\"8\":10,\"95\":40,\"84\":40,\"44\":40,\"13\":10,\"48\":40,\"88\":20},\"attributes\":{\"3\":2,\"4\":2,\"1\":2,\"2\":2}}},\"set_gentleman\":{\"2\":{\"skills\":{\"24\":9,\"20\":1,\"21\":1,\"22\":1,\"23\":1},\"jobs\":{\"all\":5},\"attributes\":{\"4\":1}},\"3\":{\"skills\":{\"24\":11,\"20\":11,\"21\":3,\"22\":3,\"23\":3},\"jobs\":{\"all\":15},\"attributes\":{\"4\":3}},\"4\":{\"skills\":{\"20\":14,\"21\":6,\"22\":14,\"23\":6,\"24\":14},\"jobs\":{\"all\":30},\"attributes\":{\"4\":6}},\"5\":{\"skills\":{\"24\":26,\"20\":18,\"21\":10,\"22\":18,\"23\":10},\"jobs\":{\"all\":50},\"attributes\":{\"4\":10}},\"6\":{\"skills\":{\"20\":23,\"24\":40,\"21\":15,\"22\":23,\"23\":15},\"jobs\":{\"all\":75},\"attributes\":{\"4\":15}},\"7\":{\"skills\":{\"20\":28,\"24\":45,\"21\":20,\"22\":40,\"23\":20},\"jobs\":{\"all\":100},\"attributes\":{\"4\":20}}},\"set_indian\":{\"2\":{\"skills\":{\"13\":10,\"10\":2,\"11\":2,\"12\":2,\"14\":2},\"jobs\":{\"51\":30},\"attributes\":{\"2\":2}},\"3\":{\"skills\":{\"14\":13,\"10\":5,\"11\":5,\"12\":5,\"13\":13},\"jobs\":{\"51\":30,\"52\":40},\"attributes\":{\"2\":5}},\"4\":{\"skills\":{\"10\":8,\"11\":8,\"12\":8,\"13\":16,\"14\":16,\"17\":8},\"jobs\":{\"52\":40,\"58\":50,\"51\":30},\"attributes\":{\"2\":8}},\"5\":{\"skills\":{\"10\":12,\"11\":12,\"12\":12,\"13\":20,\"14\":20,\"17\":8,\"23\":8},\"jobs\":{\"58\":50,\"51\":30,\"52\":40,\"66\":60},\"attributes\":{\"2\":12}},\"6\":{\"skills\":{\"10\":16,\"11\":16,\"12\":16,\"13\":24,\"14\":24,\"23\":8,\"17\":8,\"16\":8},\"jobs\":{\"66\":60,\"52\":40,\"114\":70,\"58\":50,\"51\":30},\"attributes\":{\"2\":16}},\"7\":{\"skills\":{\"14\":29,\"13\":29,\"10\":21,\"11\":21,\"12\":21,\"23\":8,\"16\":8,\"17\":8,\"7\":8},\"jobs\":{\"52\":40,\"114\":70,\"58\":50,\"all\":25,\"51\":30,\"66\":60},\"attributes\":{\"2\":21}}},\"set_mexican\":{\"2\":{\"skills\":{\"5\":1,\"6\":1,\"7\":1,\"8\":1,\"9\":1},\"jobs\":[],\"attributes\":{\"1\":1}},\"3\":{\"skills\":{\"5\":2,\"6\":2,\"7\":2,\"8\":2,\"9\":2},\"jobs\":{\"86\":60},\"attributes\":{\"1\":2}},\"4\":{\"skills\":{\"5\":4,\"6\":4,\"7\":4,\"8\":4,\"9\":4},\"jobs\":{\"67\":70,\"86\":60},\"attributes\":{\"1\":4}},\"5\":{\"skills\":{\"5\":6,\"6\":6,\"7\":6,\"8\":6,\"9\":6},\"jobs\":{\"86\":60,\"67\":70,\"83\":80},\"attributes\":{\"1\":6}},\"6\":{\"skills\":{\"5\":9,\"6\":9,\"7\":9,\"8\":9,\"9\":9},\"jobs\":{\"50\":90,\"86\":60,\"67\":70,\"83\":80},\"attributes\":{\"1\":9}},\"7\":{\"skills\":{\"5\":12,\"6\":12,\"7\":12,\"8\":12,\"9\":12},\"jobs\":{\"86\":60,\"50\":90,\"67\":70,\"116\":100,\"83\":80},\"attributes\":{\"1\":12}}},\"set_pilgrim_female\":{\"2\":{\"skills\":[],\"jobs\":{\"255\":5},\"attributes\":[]},\"3\":{\"skills\":[],\"jobs\":{\"255\":15},\"attributes\":[]},\"4\":{\"skills\":[],\"jobs\":{\"255\":30},\"attributes\":[]},\"5\":{\"skills\":[],\"jobs\":{\"62\":150,\"255\":50},\"attributes\":[]},\"6\":{\"skills\":[],\"jobs\":{\"62\":150,\"255\":50,\"119\":175},\"attributes\":[]}},\"set_pilgrim_male\":{\"2\":{\"skills\":[],\"jobs\":{\"255\":5},\"attributes\":[]},\"3\":{\"skills\":[],\"jobs\":{\"255\":15},\"attributes\":[]},\"4\":{\"skills\":[],\"jobs\":{\"255\":30},\"attributes\":[]},\"5\":{\"skills\":[],\"jobs\":{\"62\":150,\"255\":50},\"attributes\":[]},\"6\":{\"skills\":[],\"jobs\":{\"119\":175,\"255\":50,\"62\":150},\"attributes\":[]}},\"set_quackery\":{\"2\":{\"skills\":{\"15\":1,\"16\":1,\"17\":1,\"18\":1,\"19\":1,\"8\":5,\"22\":5},\"jobs\":{\"79\":30},\"attributes\":{\"3\":1}},\"3\":{\"skills\":{\"15\":2,\"16\":2,\"17\":2,\"18\":2,\"19\":2,\"8\":10,\"22\":10},\"jobs\":{\"79\":60},\"attributes\":{\"3\":2}},\"4\":{\"skills\":{\"22\":15,\"15\":4,\"16\":4,\"17\":4,\"18\":4,\"19\":4,\"8\":15},\"jobs\":{\"79\":90},\"attributes\":{\"3\":4}},\"5\":{\"skills\":{\"8\":20,\"22\":20,\"15\":6,\"16\":6,\"17\":6,\"18\":6,\"19\":6},\"jobs\":{\"79\":120},\"attributes\":{\"3\":6}},\"6\":{\"skills\":{\"15\":27,\"16\":27,\"17\":9,\"18\":9,\"19\":9,\"7\":18,\"22\":20,\"8\":20,\"11\":18},\"jobs\":{\"79\":120},\"attributes\":{\"3\":9}},\"7\":{\"skills\":{\"8\":20,\"12\":18,\"11\":18,\"15\":30,\"16\":30,\"17\":12,\"18\":12,\"19\":12,\"7\":18,\"24\":18,\"22\":20,\"21\":18},\"jobs\":{\"113\":50,\"79\":120},\"attributes\":{\"3\":12}},\"8\":{\"skills\":{\"12\":18,\"22\":20,\"15\":34,\"16\":34,\"17\":16,\"18\":16,\"19\":16,\"24\":18,\"8\":20,\"11\":18,\"21\":18,\"7\":18},\"jobs\":{\"113\":100,\"79\":120},\"attributes\":{\"3\":16}}},\"tw_times_set\":{\"1\":{\"skills\":[],\"jobs\":{\"41\":25,\"11\":25},\"attributes\":[]},\"2\":{\"skills\":[],\"jobs\":{\"11\":25,\"41\":25},\"attributes\":[]}},\"collector_set\":{\"9\":{\"skills\":[],\"jobs\":{\"all\":15},\"attributes\":[]}},\"fireworker_set\":{\"1\":{\"skills\":[],\"jobs\":{\"90\":15},\"attributes\":[]}}}');}catch(e){};Number.prototype.round=function(e){var t=Math.pow(10,e);return Math.round(this*t)/t};if(!console){console={}}if(!console.log){console.log=function(e){}}TWDB.images=new Object({ClothCalcButton:"data:image/png;base64,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",iconName:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAqBJREFUeNqslEtvElEUxy90gOHRDhQpDBIEaysKNQZpYpqiLroxaUjUrV/Bpd/BD6IrdySGmK5cVzf1sSgNgrzDAB0QBpgZxnPonYZSSLvwJj/unXMP/3vOfRyDpmnkfzUGf1Kp1Lw5A7BEwTYGVNpfaul0+kxsQbMAHOCmi/aBFtAF5IWRLbC7gLtPGOalPBpZG7J8cmKxHIDtN3AKaNcVw6gCYZNp/4XV+kaRJNKs16V3wSBG9pdyKTrjgr1aBsK7LPtqPBwStdsl1mbTGiuX98HuB6zzIpgnZgJuAHfWNc2ndjpEabcn3KtUtnERupfG64jZAH7XbN5bHg5ZVRTJT0Kq416PhATBsyJJUZj3AOarxPB7BQhuGo2Rcb9PTiVpcMDzuOnErCjMVqmUpKnarxLD1TxOgyF2X1F4TPHQbC4KNtug4HY30CFSrW5AFwKcswc4K4ar3YwbjU8xLQVSPOK4iUjW5xOw94miixfFBAy9s6kyc+5WOCHLG0qrRfqtlhLv93mcZGX53PdBsZisclwGhjlA0u8cM3O3vAFNiztrNccwlyOGdpvZPju9Cw1S9X+OxdZh+IO+itG0mH63go+bzWeD4+PJ3apxXPvChiqKabXXczgGAzaRz+99DYUOwVyeFdNTDNzK5dZQCDf8/c4OPp/vgAisAY/eZjLP8VTDjUYExHALHHRe08WwMrDJQuEhW6+zaMh7PFnoPgFH9Pngg69mvd5otFy+vVmr8RClq2W3W+hBqtNpDj2CsCQ4HGX40H75/R/A9g11cQ7A0xyD2EevKL4GH3WrWFz5Eoko9P/EgMUR6hk+oVVMkz4lrFsVSofWMIberQBNGX1qug/Us/PIVFpWMII/9Kgl+j2e8hGpraRnAwx0n38CDAD3lwpCS51YdAAAAABJRU5ErkJggg==",iconExperience:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAz9JREFUeNqsVNlPE0Ecntltt3u00FqK2KIQQCKERAQxKqCJB8YjMdEXH1Bjor6YoNEYH/wDJP4HJvpkYkxMCB7REOIRPDAicgkVa1sKEtqypff22u06g9Nkg6I+OMmXmZ3j+32/a6GqquB/DfiXfUqzxlbzmvUvQ/cHMhpBT2Y8FASZ4Ldk1CpEeN+AICAUjzy6cn/iyYUXaM0SAfBfyQBRwyGYL3edbeMpsSUbm9t07+7tM9VVFcxqZLrfqILEPR7BEgp4LTxtsohL0/RSdr7U7fHpiQitq6o2wBQh1hNXjNg9BKvXOytAOUwp0ncgBn3lgsCbyTlWzhAvlnloTaDZqxdPrp+ccjFbN9dsSKeltWYTV9F97dgph8HlUJLfYUK2Whw1LQEIQbSlqU64fulE9dGDbUzv0zcxnGlIFGE1wp2bnR121tdiNfNNlmJzA6QZvUFdZNW4k1LisyANLUqGqQrTFOXPpqJyOBoxS2XnHwTStlvnznfN6IgyPAvxDGeji8ytptzHLVwsA1XaCPJyFuRzyDBFIb+idD4+WuILyCWukDGt2I442SgvSlIIZx5CTQmUINgPHti78/j+2tP1hsdV63hRB/KoTtUcwJ0STQIw6gFgLGDPxbltz98PT9+YnHS60DvsZqYQPJqQmr65vfTgyIzY0NpZazfFjBwMA0XOAQVxRhIAfAmaQJDZtzAwON7tdE4jahDHRLiYKdIiuKrTCMg2SC0uivGXAyPjRpNZTUpZMBsEIJz4mfciTgZqPjPn8czMkfuZQlcUyLKYhBzGjAIvHd5dWaYkpuHQVxkMeO3qRNC2rM7KpcAaQ0TP8xy+KxEyBWiKD3/kiDppe3MN214jNnx2LoDRcGNiItLkGhLbfe7kRglnysr4K/fu2WUhbwq9qupWVDE+SDXWOdhXrz+8D4JDtm9LYKyvv38C+Sj7O3Y7jjSXH2czn6311W2NPQAMr9ZOeWIp6ZuPON8Nmzwy9DOfRsZEWVaW26z3Ud9UKLT97UZHLbo4617594CaudCPxuIioYjneXbBv5gjRqCmbXJrS22p1h1blZ6HzxZIvNWVZIXiNZC5kBx1BZmqiW+WxHuZ7IcAAwAW9VeYOecN4AAAAABJRU5ErkJggg==",iconDollar:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAwZJREFUeNqsk91P01AYxk+3buyj6+gGZXOTrwCSiRB0gkYiGXilYDSAqHjh56XXmhAT77nUS+/8AwhqTIQQE8CIfGNAkskE5thGYWPr1lk6unpqTkkz4M6T/HJOz2mfvu/7nBeTJAn8r6EB/3Fgxzxr0Fr5WQ4ioRmg9cFQssPzhDRoT4/QojMRIiBExKH64HlCsoAJQnTc7D11rulCcwZ3dWd4PkdpY2+jkfD4m1cDyypR6ai0MCRkhthaWttO17Y+HIiksOqNaBpsxdKgxKYHbgpnLpWxj148fzYK39tT0s5PU06nAGKB0Fr6bMfgxEZ5NS2BzTD8RkiCXUEHlqZztL9U6CMI83g6zWVVNTxUaFmMdLrLSn8mSJ8JY3UV0swsZRT5YkICd8/nQOWJFMCz8Wqv12s9wryDyJR6GWs89TWTnOTOpgGImq2UjSrUJpNaMD05/BqPbE12XL1CbEYKTapApPx7plGcDK4u7XR79WmDRgCfwxWVfgbThaAYV+zrLCAd5Ip/PfDu/afEUZFhCCPEDnFBqnq6rrfZikoaAoxo/7btLuM4DuA6A9AYrMDjEMNdDXtP+/tfjsB3M7KrigHqDpB3xJ7e2+U8ZsUX5ueXSi1ssMppEFykAO43ZQBN5MDcIkMvBFKPnzy4U4KMw45rJ2nZH0xsW3x9VOO9Gziul2zG7I7OVAgiv76P1jrxFBB5PBTeavZ4atpUl/pQB/yLlbJaDD/Wfmd241nyVnvLZc0fPchpdwBrbPTMrCSNesCAKgfJr60FI/l1w9UpQrJfx0ZWO7uKhhb3yWuDE1krhpswgYuDkJhyOghBavcVCzQBJoY+DK8cZ4B8LQiVCa4mb2O93eGqm2OKmrk0a+25SO1RZm0gFot/HPsyNRiJMus8z8uuChJyQBGTczegDpAF5eLaDYYCm6fuTAVlp08CgV2fnl2cYtlUCJ4xkITKTSm/N3HUBXKEJIJAUefQh0lECsLLZZHPlKuB5aUsR6hDokY040hMQAI8Wu+jWiuBgb8CDAAXATNfWNNYlgAAAABJRU5ErkJggg==",iconLuck:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA39JREFUeNqsVEtvG1UUPvO2x+OxnTp+xY7T2iRUlEcKqFCVV1cVEiD1HxQWSLACJCSoxAL27Nixh58AGxYQlJaXILIT0zhOnNiJY8f2vD32vLhj3UHTUnXFSJ/uvZp7vvude893CM/z4P/6iIesyRCo0D8XwcGjD+9RZAQOZhA4hAieUzhwhjBFMPHceZCQfoDcD4wKQiz5yecfvOWsMLeHxkgo8ZnpzrBFuDOLfnXhuU+/uP3l183WwQQT3hdMhFT5ahI0Q2effW39zSOif2V3sE/vjg+41qDN1RrbTJZOly8VV7/buPOLhNO9T1lwT35qMUSUtGb2ufqv26PpOmht5TBOovPlgQLE0IPR0SguHUminwFO8987pLCiOdG7H9164fK1p68uV4sXO80OJZA8p4pGUZIVxObBWuQ8PJZdcQaG9LvlWvKNN67zU9WcjUbSnIzEl8wjpP6o1fhplfxMfnz63oXXqzflfUkpTwtj/9yVWB5Wl6ugZx1Cyc5eghuRTbvgfv/xh++/EmRI40kMIZ09n7nalY+jh0oX9l07VngmHWU5OrpKlEGgYqBmTDA5LalljHcGWwPo0SmRWCLeFuPChqJqFh1WtryYv7BHnqA3csFQdGhYSrpMLkE5XgCdmsCutgcz2YGJoUOc4kEgYkT/9Ey3bIcJlJFYHXdGSNnjcQ/GPRkIA6AiLMECswB9QoKcmwJ34sC21gLbtkFVVejTQ+9sNNqaTCbz1yRDL2IPm/2meaJ63JByn2Ar3pO5iyDmU6DSBrT1Y6iwJXiRfwp4mXM5jXFFMq799POdzaBEaFx4flUrSlP5czEimizDVMq5pWqkFM8MiB4Jkgcd8xQ4k4G/v218lStk7UuVy7lERDz8Zmvz2BfiE1JY3dxWiqSY3U5P3mu2z1DRuLDGlA9GR4ykyOCYLpyeDLwSm7/712/1Hxv15g/bO/c2LMuWUejcDb4yC0H3CTXdALx2FFlJ1Xd3JqfDfjRJiWBODL/WPJ6PGa7rttGeISJS0WgEtgqnGe4EZK/TZ192rrXWxHKC0qA7sMfDc8WF1TQpmndZtj+bzWRsfDswPRHqHIGlEgiLCPliqVC2pxaXTCZoZDO5Vm/Urjy/rtd37nU1TdcxEQQiHtaCfM8JCEkE34MsPtlPxze3gufTR7WgoESCTRYOpEJrM5Taf75/BBgAw3Si4MpJ570AAAAASUVORK5CYII=",iconDanger:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAuNJREFUeNqsVE1rE1EUvfMy08xUbc0kU6U2H6WYSWwpRQgU6cZFV9KV4E/wBwiCP8Cf4dJuRARXVZCqYDbagk1tYwshhKZpmkzitJOkaZKZ8b72ThkL7vrgwPu65553z3tPWFpagqtqDK6wib6+QOQBAh+7CIfgJReo783btO+CTKC+jLhGEGnzKaJPRJIvpovoIE4QPU7qLQSIIIy4jbiFUChrmwIYzck0byKqiDrimCcVSVUQEUIkRiTp/tN0+smUZU2Wt7YarxnLlmSZBwUWJybSDxQlJRWLsFKvf86GQqs4/xsx4BBJ1TBiTGLs3suFhecJ29Zgbw/uVKth3bJiz+bmfjxOJiceRaOTgETQbIKezU51Z2dH1mOxZYy1uHrRJ19b1LSHiU5Hg40NgLU1AMOAm5Ikv7Dt6buuG4L1dYBcDniiouuyYLG4CLHYF4wtIwyPjB/zhu44OhQKAJubAKUSlh/rL8uQzOdV2N8/I4fDQ3D6fWhyBstSBccJu4xxMaLfTUFqNETooEGmeU7E2ymaWcbEAm4ZYGls+8wNpObqBNFGExkTvHvjkvXtg3p9H3Z30Zvji4sFLi73emekLhLxu7CN4Gc7UZS2K0kGXRObkc18j/F2dPRj3jBaJVTXoAwucfJN/GjfEbzi24LgBFOpD9it0NXoB3Rd944JA8YgF4mYjmnq3W5X8Zzh7RDxlYgKktSTZ2ZWpWj0PQ53EDUuiJO5vufRaweDVj4eL6HUMcU0VRFdO8KFT0RkqWpDmZ9/J0YiKzjcovJZfmXeG+vTkdu1SKRSCYdttVaL5rDIb/iRx8crw5nMsjA09I2I+JU4oifneGQeYZ+KyZ9Qu6UoRjUUqh8fHEzXNG1HyWReoas/cS1Pii6ILv8anqsOPQ/eb1VUtZxMJJrX4/Ff9rkS7z22Lnn0Dxn4jOPq/lDWxm46XaD5EyLpUEL3f/+Zv3lfz4ACAz7Ftv8P87e/AgwA2Gk+sVBbJGIAAAAASUVORK5CYII=",iconLaborpoints:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAeVJREFUeNqclM1OwkAUhVtaKMViA2K7cOfOV/JF2LLyFVjwEkRehK0rUxISBUUrP/2xP95LzjRjaSNxki80LXPmzLl3RlVOhwoahCa9T4mMyMGvkee5oteINYkWYUCQRSKQQPiswQt0iRvizvf92W63mwVBMJtMJrdYSD3XGTsxiT7hRlGk6LquaJqmLBaLCyyW1LmoEjPgbhCGodJsNo+Cq9WqVcrxRKwhhc1YxCXRI65YLE1TIWbhey5lVxRFl8I24YiFHBZiQSHG7ubzuYVv/P+QCIiY+GYxFdthgf50On3gSX/BLsWv4zj3LEoFSHTJjUsVU5IkqYTdiWcWElvHfHZ3FNOw1TZvqU5IbFU8S2KaXIAMYcaj0egxy7Ie/dEm21167o7H44FwNRwOn9Y0DMP4sCzr3XXdF8wvxLirt8Ta87xIVJG45rDJbSG2XC496rUlvd8QPvGG+aks9gV3n2CPFVtyjrZts5NnCHElD5ifKVI3HxCihpKr6Kc+nwCRkWma7GgNsQSIPjuKpVJu4qCb2PqOi8JBs1in0wnwfi/dHHn5OOWlq+Ybbv04jgtnJLzH98prSK04Ytw3NvcdaCOCFfGKTMOyWN2tkSLcDRy2EMEWbpO6g17lrPGfy5Gd/QgwADbFOC1FlFuVAAAAAElFTkSuQmCC",iconData:"data:image/png;base64,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",iconCache:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAUCAYAAAD/Rn+7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABTFJREFUeNqslslvHEUUxr+qrtk8i3Hs2M5GnDhOEBI4JBISiYBIIJYTBxBSDkjkHwAJceCfgAvc4Q4SBzhEQRFiEZdI2EoQkE1JnEw8GXuWnp6t1+KrnklwPDPxZSK9dLu76tev3vK9ES+/9gZWLl7Ae2fff3O6MPEcolBLpQCNHf+ZJVJa4n65cnvmj++/+3P6CPTs4bHyVP/dsZe8G1+LlVu5e5UQ6ZSC1k8mCpoXAQuzCrvqtagEbPDRL+PmGQfV68uHPl9yruf+ueXgaLu/Wux8YhDoO8DxpyF/cvAFn7xK646Tp/zN4kcfLu99pV7WOP7iNKYtjTCK4hPHp35o/SRsDYSktQhd58dPqs7ShWvlz7IyVR0nT6nqvTPphVNYPPMWEkELrlNHaNcQNGntBoJOG5HfhQ4C6CjsfYgQIfQj6EQ3gjN3BItBcHqzeNsZJ09luo1UuHIe316aR6ftQvkdJNFGx+nAbbmwIg+uG0BGPYCVZE2wMFrtXlH7Bl7I49wn5/D7jz+r1s0deNpD1/BCHWd9J57SiVSuIDz8fWkV65s+9nPx0gLQLAN2A5jMAGsdnoqbc7SpOSDPP4p3gMACyj6QndqNvVNZ+J6XJU9u5x0lz34A1FhfM1mg0uKeflnm5nn/BJ5S6YzMHFhC4anr8DcfYI4O7efudJpGB+dOCCy+K2KY/Y1GvqQxxXc1ftgjMDTHjgJ4TJ2OIjmMt5cO5LIplFs+I6rhM1aT3BZIgYytkdEpzCmPPD3IUxN55BeeRSpbouY8QIqeZPhhczUtPrcHOHFWxPH/7bxGcJ+O832yrw0Jmh8G8Jt11panh/GSLKzZXBKn/QJkZQMrUuIma+9tMgtBGvauKVy0S8N5KpNFemYPZCI1oEvGNNPrNnsO6rYR0m2KIcyBfbj1DYReB8N4invWGw6kyuFoJoNnul0sCEaPTob7dqGerUKYGpeDPCksBZlMj5Qmb5MbPB2buYc1ZAIYYLWM0O1iFM9su1GvwkkqJHifp4UygVK6ycbojuRJ0+Om3Uepu1/TsGQ6NnMv5LY1/RN79iYiAkfxWG6ouS7qThNGUSJqY8RU3t1oxAwxgqeMl55dgQ7Dx4dif3FQB/76chEJkw77CsTstuFpgKZmHFMzLobx4jHG/ygAmDepLBSg8nlYxSLmq+zcqV7pDOMpv+WgtXaNAtp8zLlHPjA39xJXwMwhSvXG0UCK6UzQbvLkBA/hmWmRlEm8UJjAhCWxls+hygguz89jodlBvcp9uvUojFt5yoCctasEN3pNscWML4K5OXF4GcmEhUtyJU5NPK22Osi0Rh6nA+VhGM8Ec2Z6N2oH9sGj7FxeuYrItpE7/jwKs2kcopDf+fVfyk8wwFNsZXiVEnx2FjUSLr3qhL2rSUu7pfHDx6uxSKeYBpXtvWfPxGb2RGZchb7RLZ56kOfyunG/iHKliN0EbTR7TbK6ehmTFGr63mNagzxlijpkOBuksBw4Pzk1KCd1rrQJ74Yi/t3TYjwsWsM859oSC9Sc1+zhRKVMhA/DOZzH17ZZKwxPwDGdzey0eciWN5qntB+JWuEgPvj0HQjmQjCxSrAGXAacXcdQUNU70C6HvOcazWEXBjh4LIpToVnddr2GYmPdSILQvh4rT1WsPNylU5js1OP2NmENeA1ZA2G3zWJtsa6cuLbCbofP3VinHv4SMRFL8/S3ugp32yFca2KsPJFQ6qukJU+GYWQJIf7Xjy2NsP3XsMD2JjHpgvYifVlK6Y6T958AAwBjoD0Kglj//QAAAABJRU5ErkJggg==",iconCount:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAv1JREFUeNqElMtPE1EUxs9MH0zfL2iAlkCLQkkBRR4hBk1oYkiMduUCNi5cuPZvcGPiyhjXGHGlMTFBXBAlEQUkkUBTWmyaYm1REAq0A9On045nmlszYIs3+WUyc+795rvnnHspQRBAHF6vFySDRuQEJSKDk6OI/CbwSAnI5GpDXKxGNIgWYRCKxMSFeeQYSRNqilHEjQGxeocsw+pCvGExqohvscrMxIipQ8UFuEmf7R2ZnyfuTohRxJEoVI84kLbb11ofKgMvmZXvQ1P97WblxGXteGBu/RDAFiLbFB3mKrmRbk2FWEQRxH2uWTuqLOwxvliBj6R09haL7AKkQjCzoWExbkP05Of0WWKiq662ZlNfOR11hqQ4oa1JrwU+Bxxdn8FXM5kvr+jIq4jVT98feQqAVc7jbnYW4KKVbZi+k/CADusR84Od5tw5OjMWLvWvkHVUrZypYO0BGsJ08GmYWQfYTgF4XMugUS7Ds88AsxtYZhOUaGs5Z6WKgFRMIAHB+/rKI3z2To2+8azGAXww9jEeOdSNt37p8+1qOF2n5wPG50kli9LmhCru5O4Wldboug5XXUyOByXf02HXdrvd0N+uOyYCvNRVtT4TxRX3brmHNXW0DRSb0Is1u6tPOrpcbiPIEjBg/8FoVP7zaUEb+7TrXDxLrHx8PM6jgXLyIy8glgDmhtPnAD4JP8JBCG+BKcWxpjRt3QRwFv/nTPZ+Kbg2Ygn1TM6DPHzcuBNg5fywNdjyBDMVSjuiQrHwy2zQrOKBy5EtC6dzViIdnX28oJ9j6Jw8ug/wjRr8Gs007RcxGkkZknXW7lmm6dLzjLpTPE5i8xZqiYkB9qY7yxwmWTjIlzudG2w8UO9h2gUZE8V3PxJGtpEjsuafgy5+yCIJOxVmX/lV4SPBLC5a2ktm1dEdtUyhNr5FC0H89hNB35CptFO5FST3GU2uHfG2MBIYSQ8WyKFOke1xlduiVtMWJNbZU3GeNGn+dLPWEuMluaOq5LTC3wpKxx8BBgAeuiDOQ7ICHgAAAABJRU5ErkJggg==",iconKilled:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAx9JREFUeNpslE1v20YQhmeXXxIlUYodObArNDXSHoIgSJt7Pg4OmpOBBOhP6M/rsafeCvTcOBc7iBPHlmQ7shSJkknxY7nsu8IoUBUTeEACu/vOvDOzFGVZ0v7+PvEjgAVc4DE2KEEOEpACBQpae+yVbyPkAB80wSZogSrQYAa+MFOQseg3YkuhOmiDu67r3tvd3X2wvb39gxBCHh0eHgyurt4WRfER6z0w5iB6XUyCCrgNfoLAk70Xe791Ot930jS2puGUajX/Wb/X/+fNwcEfKI1k62O2rVfFzLsBdhqN+uPXr1/97lUqt05PP9JoNCLHtmg8GftRFD2/s3XHu/x8qdiiYiFjuVwVC8B3v758+cr17FunZyd0dHREURRTM/CpWvFpOLpyRsPJz41G7SSezyOt9TVnZpqhlmLLem1tbGw87Pa69OnkA2XpHMWUlKaKhJxTI6jjOwmCVrDn16rzwWB4gTMT7rKSLGbxGNTDcFoOh0OK4xlJKVEYSddRZGyS40ra7mzR8fH7rX/fHLzgGtf4/P9GwwjbUXydqyy3pbCpUvUJ5aJZnCwyJNS93+9R96ynSxNlZ+HG5WkguSJmuqPTNFOW5VLFDRb7HBsV0JrMcDuOC+uKlCoKjI7ijMS6mOYi5lKKXFjIqlKlqushsxLfNUIMkFKWK0QttW3bOZ8pma9iy+uSCRK5DyEhrUXnVZGRDa/Skovs8jRHGkJblhVxJ/N1sYJnZWbELAgJKSjJMjTBeNAQtEljV5amRhSlsML1e2qviM3BKJyEkziad5I0hkVBzUawyKzQkpIkhdWMcL0Uajbkkfia2aqYGcDL4w/Hf+V5XptOZzvI0Gvf3qTNjRY5lkNJmUF0cU5jbEZ4xyymbxK7GAwGf8JCVyn1NC3SR59Or9v98/O679cIQWgynlBRqATZfeYz2U2ZGf8mmsafIcLmM9j7G93/BSL3Ly7P7w4GV+0wnFCr1Tr0PO8d9oY3ZVZyBM2LJqKpSRe8cxyn3Ww2A4B2/GjWznltKfbNz3E5HoqzjPhHeMH3tspDmvFayG+1tPmfAAMAqEx/WbBWiOIAAAAASUVORK5CYII=",miniMap:"data:image/png;base64,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",iconNew:"data:image/png;base64,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",iconSetting:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABGNJREFUeNqsVFtsFFUY/s7MbGfvpfcWSyvVUKhFtFHCEzZNVR54IJKIjRhr1BjjOwmP+oBv+m5MDDGSGKMPQpoYBRM1Sg2JQCllWwqUtnbb7rK7szv3c/GfAY0EjS+eZCaTOef/zv9dzmFKKfyfw/i3iZuXziV13RiRgg97XrhdQTUnmvQKFBYD35vx/PDiyOgL4X8Czv38NQLfedazipMa054JPbe9atmmVALpTBLEyLWtWsmqN76tbix/0tbd+9Oe/Yf/qmd/p7wwfbpp9caVN5hmvJvN59qhJALXRb3ugEuBVMaECAN4tgPH9VQQ+qtJM3l8YHjfZyNjL6n7Orw+fZqVb1973dCN9xVjeR74UIIj8ByEgQtBG/uuAAhYSgkhJAP0XqaxD+YufCe5VKf2jk/cBRQ8QOg1xkmn96RQeUH0mPRRuDaP6V8vYmB7H3q2duHKbAGSgIeHHgVjGjQjAT9gHa4XnLDrlRs89M/HgMtXfzBrm7cmdd1s83wbIdFSuoLjuKhZFq7OL2Jp+XeUShVsaW1GEHAkEgnomkGqSEAz+y6dP3s0leu88CflEUCNKUgW7Xx98SZR4qjUqkiYBjzXhl23wDkDDwVK5SoEAWWyGbS0tsFyXFatOQds1995F1DJ3aRLC6GQXh4uz8yiSp0Zmh5Pd3V2IplMYn39DoHVaKNZmlP0vwM7d2dh2x4xsXsCLge1u3gYUFKZkQmhZ2NgoB9t7S0EHqCtdQv2PL4Le596AruHB2EmDHI+RP+2bdhO61LEQNc06l6kyea+GFBKkY86k4rHHbW2tCCdTENFPhoGfSeRSplEMQVylbItkW/OIpvLwNB1elgsAWUwe09DVYnjQICRxjMzc9golalMYWOzjMvkbj6Xx/LKGnwvoPUaCoXrqFRrGBwaQt3x0aCHQK17GqpFenlEMcnDEBrt2tPdAS5CFIubWFhYopgYsVHptInm5hyVSGha9E8gSnTIRcMPxVIMaLvOTLlqlcxEslfTtVizXD6D4loR5c07oNRSMaO4CNK2EyN7HkME0yAzihSltY0qbMdbIR8KsYac46LjeN84rq/8IESa9GqinAku4iM3uKMfo/ufRisZFFIGSSx4Psd6pY7VYgTmk4DaGU3TCnGHT44eDjdWbp5cXrj8fMBZLzM0tFMeo6h0d1FkMlmYqSS29naBTgXK1QZWNmpYXa/Epjl2fX7swKFTh45MyhgwCrOeav6x1nCPU1MfKl1rJ2+QNtPYtXMoooM60Wvr6oBlOQTo4E61HjtLZi4bhnGsq3vrb9Th/bfNua8+ZmfPfDFRshonUplcv9lkIGs2UY2AR7o0qLuaFd00PoKQS7tRn89kMseOvPrW6Zdfe+fB6ysaU59/hBu3lvb98v3UK6bZNM4D/lDDcTMRGDMYDKbXBecrARdTzx08/Gn/w49cmph8+5/vw/uAvzypkxRDruvvoEj0UaCzlIAaZf02HdOCApt78eibD9T9IcAAnaJ+kwOqUbEAAAAASUVORK5CYII=",iconSupport:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABAtJREFUeNpMlFtPG0cUx89eWN921/h+aWyC4wUbohQRKTSqqjQoUtMH2j7x1Le+5CXqQ16jfId8ikSqlLa0apWH5KFUgMsllUkxYDA1dsAG1tjGFxbvpWfQuGKkn3ZnZ+a/M+f8zzAzMzNwpTEIj9gRB+KizwE63kO6SIdyQb+ZQBf2G0sXiYgXCVIGqaCFnCMN5IRSQ5pUVOev7IgIyUgYSbhEcezu1NR01GYbaWSznB6NmlYweP6hVCrm8/mlTqeTw3kF5AA5JTvmrwhJSBRJXR8amv4snZ4ZLZUi9o0N4Ox2iDx7BpzPB/VaTVlaWrr9x+JiZndz8zfTNLN0QyY3OjrK0diEiFBiaOjhN4oym1xY8PtKJWBPTqDudoPtwQOQ8ClJEqRSKUc0Hk+UstlgvdOpWpZFjtomYjYao4TH4/n06xs3vk2urw+KrRasVKvwFsUWj497mcLuRXG/yIqyzIqNBggvXzLs6mq4KIrOjmFs4fp6P3NejuOG7yYSD9PlstdlWTC3uQWL7ZauDroPwCWewn6pV6ydOg42NmJfnahyaGUFrmHSor3e5InHQ+Jc4Gmm/NjGbodCaefeHizMz8Of3e6FGovtMOHwWxwvktjiDuL/7O9/MlEu34rHYsKlf1otETwecjIXT+PlSyrKrdTsrL3jdMLS/Lyl+v0lFPodx5aREiIQW+j8gE9NKjG90wnxF+gIyyKWcpJxlh5T/igajUteL3Tu34fqxETbDIe38Tshj+whh8RbPMu2BJ9P5xwOYFgWTJ7vW4shYiSbNomkibhP04ARBjS0wxF2W9SQ//+U4TifgnN17JzpOmgsGQLSNVjqEUvTNOJw8IgSBDxeFn/lJ3ZBH8UNw1DwPY2MhSOR1MePH8uOp0+hevMmqKapEVsgGt+vt0qlctrI5cLw4gVMZrNSRdeHa37/JIoFWZbVGYYJBYLBqe+fPEnah4fBDIWgoiigvn9Pykolgjwt3EZha2t389WrdKxchnuyzNt0PflTs+loyXLdYbPB+MSE57tHj64FAoHLIK2urUEml9O7LtdfeIoKqVGeVv/x4dHRu2VVnXapqtMtivB5ICDcczqHa2637nI4WFlRWGcgcBmTTCYDv8zNQbFY3BIGBt7Q+jzrix11Ne3vlZGRX7vV6pdKPi+F63Vw+/3gbjZ5Bk1c2MbERiKwc3YGb16/hu3t7YIgCD/gWuL+KtHhabbIVVKo9Xo/ro2Pn+7kcl+4K5XrfLcLPPqOwfRrhgFnz5/DIcu2W83mut1u/xnXvEP+JaVEdPoJaFEfGW1Jqrfv3FnGToDeJAL1kQG6TuJbRyEy9wM9Xo3G3eDpLan11enl94EK2a7csiYd79ILsUEtcU59Zv0nwACopqbnHDzSLQAAAABJRU5ErkJggg==",attacker:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAeJJREFUeNrsVk1LAlEUfTM6qYy6TVcG7lwIEghBiC3bRJt+gbs2Cq37F9p/CNE2irgJkhZGLUQGMYNa6IC6MciJdNDXufEEVzUjQQRz4TCX+3HO9c6bhxLnnP2FyeyPzBF2hB3hXzO3lSJJkq7xMIEj8VRw8cxEbjW8AtQBpPjBj6R0c/0EmEalbrf7zuVy6fC313Iq4jrlqAZ4sMIpW/i1e36/f+j1elk8Hk96PB4VjaO1wY3FYhFOp9OUY6h9pZ6N3zGaM8Fg8CkcDtdzudxBrVZjqVSKQURFLrpWF4XgMpFIsEqlwqg2FArVqZc4bK8ak7+AhPd6Pd5sNnm1WuXJZNJcrRPYEiCfRyKRebFY5I1Gg3e7XZ7NZjlx2F71dDo9LZVKxnA4ZKPRiI3HY6Zp2hypZ2AXuBAg/1HX9Y92u80GgwHr9/usXC4bxGF71ZiqNplMtHw+vyThTqfDTNP8QOqY5gIyAuSfyLJ802q1voQLhcKSeoljo1MN2/H5fPeqqhqBQGCqKMolvVbgSqycC1+CcB61BgEH8Z56v+W2+DnFADqpEbFeCr4LcBGLipqYJU4rRWsDnAmhN2Bf4E3Ezu1wyRvcdAPgEM23BPJFbGaHSHL+cznCjrAj/O+EPwUYAEvcy6pPo+pUAAAAAElFTkSuQmCC",defender:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAYhJREFUeNrslr9rwlAQx9+LVpNMnfsnCOLSWQjZnPoHFNo/wL+hf4OjLl0zWulS2qFuLk4WyVCok5RUESEm5Mcz6fekllIpGEkQSg6OvFwe97l7dzkej+OYHUMkdiTJwTn4/4GL+25UVfWlVCoVbNu+jaLoHib/65MsSdJFuVy+FkKsgiA438cf33eAcM7jbrfLDMNw+/1+tF6vGQIgO6tWq4VKpaJ0Oh0B+0mqGRNY0zSu67pK74vFgs3n82+1LIshCZ56jQlMGZJQtmEY7ihtyxT8E4aabhT1zSZjNJY9nU53wASkp+u6DE0mUgfD6V2v14t+g7c6m80ouPfUwY7joKGN1V/1NU1ToBQPWQyQ58lkUoTu1JeOeTgcYhm0UgejcUIcd6vZbDq+72+A2wBQAh/fH6FmJiMTmd2MRqPXdrstttDBYMDG4/ESwVwlmpk0uZIo5ExRlLdGo+HV63UPDfUBWy2pH37InQv/9Kksy09YWp7nXcLHMrGP/LKXg3NwDj5UPgUYAFHjaDUOHPhzAAAAAElFTkSuQmCC",iconStar:"data:image/png;base64,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",iconStar2:"data:image/png;base64,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",iconInfo:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAASCAYAAAC9+TVUAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA15JREFUeNpEU8luXFUQPXd4t9/oHtLEWLax7AQJYwcnREAIIITMhp9AWSOxYM2GNTsW/AML9izZgBALghPSESSx20Ns2na3HSd2D2/k3Neic1uv71hV55yqEp/dXi6CPIMSOex4JoDzYcG9RJEX4B+U5joFEuSoOBKuVrCvJQ8zvtPz0zVEniodVBxdzhtPOqiJFPEwhuBP0jDXOXzPwQvp4OUYr/VCIygXko92Nzu4fW0OuPoq/t7r0qtb3vl5jiEdfv7V1xgOznHc2cVPP/yIxB/f6wtTm/h9czXAb60tvL8yy10Trd0ulASjyzLm9999C6c/LN/+78AO1QjNN8fdE9iv+UodjbqLB/8c4MZCHcJU0O6ckaaCSlLc+eJLzC3NI6hHOPj3cOJELi3OiOalKqYCH3+RTup4uPrGPBHtY7lhsH59YRK9d/QUp91DHPXOXiJKEkhDpWuRL8LAhSH2h+0eBtB4e+0Kft7YRsEELb4+i9j38eTxY7T3DnHy7HwsKx2NkgKyTCGNw9AVYehBMRuPdk7RFw4+/OgtbG8dwCQxlucaeNrpYWf/CJs7nVIT+zlKQSqlIaWAYXprYSiqES/THPfaJ4ilwbs3F9HtPUfVKMz4BTGmuFzVEyRSEIljHDjGQDtOWQ+1aiTqUwGSOMbv93eROS5Wr72GjdYOTBrj49UZhIEzyVDGgpSCFWqMphOiqRjEFCrwKiIKPIqW4e6jHmJdwa13rmBvv4uaTHFz4RK0LDAbuiwByRojnYLqCaGR08h1XXiei2ajKmpRgP4gRqt9Ch1F+GT9Ov6430aDbbB+YxHHo2Rc/kqxsAmnoMA5xr2SsUJj0vE9VwSewWiUorV9Smoebn2wgodbHUx7Ep+usWYqiqiorks9cjahZrqzLIdIU4ptBS9QDQPGEEX/+QC//rmH91amsbq2hLsPNuFEdeRC2RSDhhknisNPyfFMMHQiy3VIjQwDDQcj/HJvHxeygu6LnDSYpcI2KEV1mN7SltrY4hKlkzGlLE+QEp12lLA0kzgrM5Pz4eXmFDNrkdiDMqqw1qzAhGgUbOotPUW61kDyjMhExchxC5wNcRLLsl1kUVhhC1IqyugFo8ZpMiYn7J0s1xnPCBW+b+yWFDVCDNEfXuA/AQYASbZY3VIWOLoAAAAASUVORK5CYII=",iconSell:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABoAAAAaCAYAAACpSkzOAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA8JJREFUeNq8VltIVEEY3nO2E6adNdM0DArWaqtVW0MizSS6vEQFXcQeBCPouTITJCLCegmLpLeIoKjoQhFLV7rIqll0MbK7Ursdz+66tnn0uBfXPbunb7bZWgK3zhYNfMzMmTnzz/z/938zjKqquv9RJow3wDBMrMZGOFTTACOQDbBAAOgHREAGFMxX6XxthhKKHjAEg06jIJxdbzAU2WX59agsvwmLovvMxo13R/7qRHR3DDWkE4TzpkBAyPJ6H5bjvM7WVmezoqhlGHoADALhZGsxSWJEjEwGZgHzgKkul3Wm3X5yWzSqPq6svL4D34apGxWyKeK+8dZLZigDmA+Ujo0NFvT0HCkdHn5l+hlD1pWePqvZYmm5ju4YEIGhSCqGyEkqJelZWW/vsVXhsExOpxNFfx/Pc3Jm5kQz6bvdgX1VVfevoTlEjI23HpvErVkA19NzdEXcyL17TseWLQ+eNDd3n8R6hG26nJy0vajK6fxxSzJDitt9g1MUnyH+4flzbxeqW0uW5Epgf+z7p08jxG1mGs+UWPfF7/9oT/xQXV3gs1o/t5G82rp17m5B8G9qbXX50XcBwVRZxyK4+ra2tY9Ylsn/4c+sRcd5fn40GBSfmUz1X+lJBJrAY5rJACPktDk1NbNXYfcNaWn6nF9mjFRUWBfg/yiJJcmjlOhNToOKBwrKy/MW7txZuDk/P91CR2Wa0reWLrXuQSONUpwkraqJDOr3EgLed3Z6Lp048f5UwqjhO3TVNtvao9gUMRChSa6ZDJmUTXNhTCHsxoK7UBfv378ob/XqGWtiC0xgN7e0lPVh7By6nlRENZdID2RnudN5tVBVI5XoHwLeHjjQJa1cme8HSarIRLh0A6puKkdDWvOIkaQuFtq2AhKUGw4Pr2loKF6OHQ8ABQbDnGh8otc7OpFeI5NTSViX19v2ON7x+cKOw4e7b6JJFHsZMCc+ZrO5AzQ+Ec15ROk9vampdHtFRV4Nx7GTOG7KBZ43TQ+FPDP8fkfMUHt7/0Bj49OXaF4EOrCerNUQR29Us8WSXVJXV1RmNPJmqDYbRSESdPu26D548AVRjzsULkocTYYYmog89f1oR8e6EtSnBgdDntpaW68khUjgOwEiS30kj1JRb5VKig+IiOKVeRkZxphCBwJKCK58h+ZlIrJxI6mqd7wQdskOx2mTx/OhFveRoNczmfX1RYspleXfGfmjxwk8qFA2EReNAiYqOZ8p0/R/8jhJFqPEtwOJFZGcKQm5Qq4Hib4bwgnSpfma+KflmwADAByiwbZmDJRuAAAAAElFTkSuQmCC",iconSearch:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAAKXRFWHRDcmVhdGlvbiBUaW1lAG5lIDIyIDQgMjAxMiAxMjo0Nzo0OCArMDEwMJeg7h0AAAAHdElNRQfcBBcTBzGRmTTGAAAACXBIWXMAAAsSAAALEgHS3X78AAAABGdBTUEAALGPC/xhBQAABAVJREFUeNodVMmLHUUcrq27q/e3zJKX5b1JJpPBN4oxBGMCCYp4CMaDIEJOHgQV/D/8GxQ8efDmzYgKXkRMJgQMQozzYiaTyThvmbf1+nqp6vI39qmpqq/6+31L4++/+PhoNJpEC9fUwzSnhHCdIYSm0QIWzyx54zAN0ryz4seLAs7AgZrDHa7JSrE7vz3sz2JYZZTABkYIXqJFgTGaxdlgFu8O5oWQo3mSlXIeZ62GY2gUkARj+vm7l4WssOH1D2NrnLizopwLMcv0Qj9RsZVY1CW1LCdUWqS0pKKRoIOoZFX5ytoKg88CyXAYnE6LHaQdKtw91W56fi6KP4ZD7PNGGHRFGUj8hJrEXx7PR8E82bpQh+kY8BwFyZrEjyz3jc3uB9evGZZFKEUYA7Egju7cu//dvbvvNVavcn3XdinDWRobGlNK0U9uXsIIN4dR0Vn/6MZ1zTSxYWCNYYYJY9wwLnU618+f//L+gy7XBK0SpJVFYlNRd0xyCJoWwqjU8vIKXGZwQ/dc6rqlxlOEMoUjIXzHvX319QDhs43m5rmOZWjgAohPDqcxwHOCp4v82+1tIQVRqihEKQWirKiE0jXiWJrrrfk+Ysz2fRAcIL3DKWvVHYKTmFerT3vfBNHdvf03t17a6qw1GzXXr/V2epPp7J/hYBzM33adF4gYhg4+ZYU4drdSKs3LEJNWkty2zR+zxdc//Qz6X7t6LY/jJI0PhqNzvv++Zx9ZNq4tCYQmYdq2yammy2BguEa6zj5WW4bxmZTPfXcnyz0lK8v0G/Xdvee41dIc1wEXLLMyTZvrOlMwM4OEUIhUhXPLfO55qVJtzjfKMovntmnKKNVfffmr7QfswsY7GFmuKzwnyYpKV9328rFdjOBSKGTxhedNGAuEEFKuntsYI6UrsSXllY3133d6ttZ9azoJRUGVcrgOdNlxqCnRNRoLSXVDaJrVtHWFwwoeSWVehMGtzum/B6NfHj02Mbm81l5i9H8QJgmoleYYY4UMnbs653bNsZomNTW3WVsQFliu4OatC+tSyh/+erw3mbRUBVZBi+il9RMI4VEiCXdNiBdSnBtFnmlML/I8y3IbhMjy5SIvOX/WHzydh2sa5XXdMw3WcE1Qu59VSRpJmSeLrOznpmW5Ng3DkFKtqKpS12snWx82G4M0f22pqQ6eEGxAfRl4DSHzTPvRzt501Pfs47bABgh5bAQhMJSlkQOdLmX5RYXy8f4uwjd962AcMqj+cdGL4NMbnY32if3++Mxqw7C9aHY0CRcaI3WbE6YRyo6m0HUJvxGD0aMw7f07ZXkpAd9tL0E/HvZeeJbx65+7ICY48Ww4v3h2teFa/fF8GmcgL1TixVEIpCChVzZP/geRJSzu2YducgAAAABJRU5ErkJggg==",iconChat:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAAPCAYAAAC4EqxxAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA41JREFUeNrkl39oTWEYx7/n3t1rY8yw0a6xe8eda1lMkqaw/OF3mZQUkT/Ijz9WU6SU7A9lbMUf8o+lKBSh/NhClmnNlmVk0YhZ2MXYZjP33h3f9+6913GcO+eMojz16bzvOe/znPO87/M+73MUVVUxWJnpdg1auf55q4K/IHGRxt5CBfNHAa+q4MjuwYjWOmSO70ViCBnNCcjyn0GguxEBCA8vqlWx7J0nV0g1aSaZJI8sIQX4ByRO21FUpA5NwFaPig0zRmCizW9HD5xfnsFxKxmOYgUfa0Lo6zOw85aUkFKuXEhzv0nASCjntZAUkbExvsVOFhEXmUYaiZ9Ukq5f+GFaN+pwIIDRLheOLRiFlajhjaf9dhKQFJ8N32IvfHM6ULXxAVov8oE+lEvoaMkA4SsmoYSOi+5BgyHbyR4yzuDZJ3Kc7Cah39W1RZ5keFHoXU5n3eykk0Rx1yHtpLOVO3IzdpR5MdtrEMalJiOqVI7XyiFyJMYHC0kiOw30BqcrkpagqQv+z6LZRq6RZQTjyH7yUA2gUw3y1mGU74ro5GakqWRTpG8GMV7oyb5blSKjxhCN5GtsuVVrEtaNhvSTYRjdwmtKCpA2D4hvQZtakfPB/nXtlPfwhDdpNxmDhbm6Way2mDeqdSsQnXgTkmika1ISf9jD3LahIPsBtj/HA+2r0joDFdvaUs95smhZiZeDQ0gaojPUbPHF2vENYouLEy6cNJWfTyrNRLyUSchQ9xcS1Y06XMf9/IHXN+Q1UhFK3pSBrUvTmWeVMY392zqNfEXLO8CnNZYps7FZydT1l5ETIssOsMrCsTWkJ5buQEe+Vjfq8L3HqO/2OWf1ht0SR+c8u+K229UVAD1EO9flVbdY4VOXgWKtwTyLDufp+mKOF5PpZB2ZQETqbJUrc4bciWHLsm7U4fYyxz4cnXweDp9TQU54t0IE7yQyi44m8GB7fPWso/P+Dd1Ll4hzVnf+xqrM7LII0UuWzLhTyQWy2sIEWtK1fd9Z6nUcCG5ROlz+/kkaDjhlHHtEt/YsbA07bYjr1NkokEWFGSmMUXGJfZgvjxfGVPjNpitcK7rfK604JYjmnpNq+dO7ylzPekwOTkFfwIn2F+/QVH0JHcFKKA5WLYYlcJEsKkqNVlqubKTSMpLTpFZWSbfDqcK8WNJV/vDPg+laWvPzIMLpkUxANy1+gmVd5X/7W/omwACxMr4C5yIs3wAAAABJRU5ErkJggg==",iconClock:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA+1JREFUeNpclFlvG1UUx/+zeWa8xGOPndiJE9dxGxcUtWoKJA2q8sDSp4DYHgAhBHwUPggfgCdeKlQWARISBVpSitIqOHGSxvFuT7zMvnDH3EhRLf00M9Y9//s/5557mO3tbTz3YwgyIUXIE+YJMYJN6BDqhC5hQnAvBvLPiXCECEElFAkvfP7pR1/KIjtzWv3Tvf+4/tVpZ/QtXdci6FQwuCgWCgkXHIVCq4SbHBNkWs0WV3vWxWSib1ARlsaEDscEh+Dz9E+eppIlXOJ5/vpiYeHNzfW1im2MrH7zUOr1B57MuyU+Kb+tja2o5wVhBlVCkzAiWDy1HKVCKyklufH+u299XJjPLTKBx83EJaSTCSxfrrDpVCL78MHD7OHxSXEw8XO9M+N76jKso89VKhWJvGQI5WhU3vjskw+/uFxaWJREjjVNA8WFHPr9DmLxGF5ZW0ViRkFU4uPHRwcVlouYluP1aaoGS9ObE0Xx2tbtzfcKC/n5CC9geSkP1tJxclRDPjuDQjaJk9o+VCWOrVfXUS4txXy9/Y4sCi+R+BwhHqaZCFtgc/3m66tXl0uOZcCcGHhWfYxcjqxhWDBE3LQtmFYAhhh5Wm8ik8mA5zjFMEevgZH+JhqNc2fZUrFwnQ08WYxwyGUUyJKM+nGVCHdBdgdDNhFggYtEsHKljDtbt5BOpzDotsq0TLHQWVizuOfayb6mMdrZGfjAnaYpSCKe7u7g0e/3UVoso3h1BYLAo9ft45+9AwwnJrThOJ7ITg9QZM87tt9t+6NBFwLHQE3NwHFcyHIUi8UyLEaElJ0j58bCs02wpJksQ8doNIFlOz6VCEJnZnga7W5HU6JCdHYuz+zuHyEtEtHZWXgshxev3YBuOzg5rUP2A2g+CzWTxmisgxciY3q1bJ6+tHXdfGIO20qz2Yr5nIQ3bt9Cr91DXFXAMwIC0iaDoQY2peLrb+6i3uygdlxHUs0dnN9VlnZv4+i0d6+t2VVdnwQbL6+hfTZEXxvAtSw0221Y5Dk2bLI9h5XlJfxbPUTACloqnfkxjA91zp21hiN9x+C5aMcZKewvPy05iDAZNYVYyiCl4jDQHTQGI/z61z389scOTNOc5AuXvouI0gN6X8c8HS0a4dBxPfIteY92ax/IIndlPMzKjUYDju3CdYlYq4O96qEvilKXCP2gpNS7JG6fpjm9mx4dJZ3pKGFYW0qofdMYbz3ZO7hhmFbG0HWJ1N0ThMhISWdrqpr5WZKjoaMDmuJ0cvB0Frk0Xf9/p4wmyokjQji7FDrjfBrUo5MiTK1Pa26fjyBcENQvCHfoVZPpiApoG02oaPi06Pppr/0nwABCMa7R/XpFcQAAAABJRU5ErkJggg==",iconUpb:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA6BJREFUeNpcVN9v22QUPbEdx47TplnSNnaSdm1hDMZDN2CAoLww9oBE33jiCal/0SZN/BlIqHvhAU0CJgQriA5o0q5DbZw0bRonTWI7/sn9oi+Sh6WjOPp0j++553w3Fccxtre3QU+KIBIEgsSRJmQ5FH7uE4YcI4JHiMELwAlYoUrQEsgR8oQF9v7J1sc3Hcee/Prb3vf03+QkISFIkkm8sEAwCMuERULx7t333lIUVbftcW5r66MN3/Oig/phMBwOn9C5y8EI4xkZ62qesLqzs/N1GIa1ZrNZWlmp5u7c3tQLhVLasizsPt7FarUKvbz8peM4rSAIulRjccJXyJiU6+9/eOcrMSWiVNJxdtbE/v5zeu/iuHGEBw8f4YvPP4OmaWue590SBOGAz5LNLhL+J3OpfvgcPz19gmG3B9sewXXGEMmaSlXHu7ffhigJiONQIpk1PpYsNwYzMuakzAg9P8ThcR394SUWcvlpsWM7UFUFN99cB8lDLqch8H0jQSYlycCdEfxggotBG/3RFfLaPDIZGa47gSCIWNINpOi3eK0EURSKURSVuCLWSGpGFvH8uKlICsh9mDQvKAqMcgVKVsXloIe12nXcv/fp9Ls3brxejqKwzCPEyIQZWcjDZ4dh0F1cLKBlniIKQ3hhgPNuhySIoDNsbt5iEjHxvAyZoPPOMsnOQm7vqN8bDUvzRnR+1oXvezS3HDySyRwWRCL0KJ9SBJEqSb7BI8XCLs3IAk52dd7ptjY2NsJYdtBuNVFYKGJ9dQ2yLIFdvZ41wPJSmdyt0NzEWdCn3SVn5jCyWm0llFVRPG2/RP3oH6jaHMI4gmX16dMSHOp2xahgXsuxiCxGcbTEu1OSMhlZ73d6mqedztgdx/XG39OxRnTsxyFSpM267CEtp6ed1iqGQXNb5TIzUqIzJtPap2fi2X+uV98oXlp9mVKOuayGg4sGWhMPbbNDOVPQeHEM23Xjq751f6Jkd/P5vCglMjYhDAjto8OXz+699sE7Deuv0mBwBbN9gb29P/CCCFqtNtJpyRal9MCduGoUxo8L17JnLA1JMmbCmNChMB5l0rmTbFYtfvPoYernp7/ANE0/Lcvd+Xy+oWW1OjlrjsdjT1XVZ9R9mymTEjcg4t2xLXBSXNAvDvYb5rc/flfy/OBc140fyL1/qfCEztm2GNCFZwuyz4xjM08lNu3sws8R2DWp8r2mcYP6nMTiW9blQfe4qvA/AQYA7z2lEDB0G6EAAAAASUVORK5CYII=",iconMoti:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA0VJREFUeNqUlMtvG0Ucx+e16117/U5ixzhxQo1MGypHFBOCOJJjkLj0VAmhihy5cOKf6aVHOHBqORYpAqHSoBYk0kei5qEm2LHX3oe9j9mZztCxFIkghZU+0mpW+53vfH+/38DNzU0CANAVGnjzRIJQEAsScMlHCqUFBUFekFE/jwS2wBUwAb+MGFJCDcH1rz7sfHMT42/F+zuCObUR/j/Oyhih5pcbG7c/YMnHDx498lKr7d0QQOnQF0wuOCr/L2f5rfWPbnUK+fXe74/h2Pet1KD/mVi/IpgVZJVDU6ErE/AiZ6Tre4H74CfA9/cAiyLIu90GKpXfZwD2lCtHuZHvY+VWQs+L4VarVTsZjczGycmq5TpG1OsDD2PNrczmKcRSLCVzbVTmlq7krCV7PAkp51RV+l9i+YjSLEqnF5quVw8nYwiDEIZWhgS5nEEZLzTn51e21ta2Mvd+bD/W9WcUIU85C8/nJzOzRe2PHibJ9kDXfZzJgCJjoLV/kF3p9iorpdK1rzc+/dza258/2N1diTlvi3/mBZZyTRSIqF46pYy9+M0w/moC0HmBETDDAF6fjJdri3UEn/yBD+/dB39HEeGusw5K5X2VI1AZyuNG8phTh/oAIUDH7o1BLqs9zVpgZ/Et/CuNEN3eBumXh2DIORho2IzKM6dKSE6MgRHUxScmxbgqM0owBua7zeJe2lx6bo/8oeM6vuOduSnj7O04tnJhiEPGDLtajRmEZqdeb31SLq2VxuPyQZIcEzUuMsyzhPOnXS+4Syg/qs5VhYbhQAjTIu3KcZyg9nC0vO64eNZ1Fmbaq/VOsVg5/v675OeUfh/UF38hyi6d9pLrjUUG8LlhmpoaJTmvtYeF/JDo2hcsDHLpnZ1GE2HU73bBDzS2XyLMhZA5FWOqzEwF2lU5AtX1PV/T/CdXW5W+Pbj5iiawFk3c5aGtnTLOWdX6p0XIuVmjqsNDleE0S02tRT0rN4GWdVAI42JMSHpQi696h0cLXNf6co7JBQPML1iT7SMKBgIOUC+VSs3ImdaXG7Zp2zcCQp7JfiWXuFmmESSqUPKeeyWH/zSgf4Jr793R3mzmkEteVYkSjZSgc+5mRmpO49cCDABebWpp4n76+wAAAABJRU5ErkJggg==",iconYield:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABBJJREFUeNpclFtv22QYxx87tuP4kJOTdG0X2qrQoiE2DlpXJgaTAAk0VdoNF1z1km/AFR8IkJC4Aa4QIHUCVrYO2q1dD2mbpkmd2Ens+GzH5nH1RqqI9JPt2O//fQ7/96HW1tbKAJBHZERAMkiIuMgIcchzSoyMCel9Ald+DFJF6sgsoiBZxEMGiEauqaBPNkixyXN4VTAVq99/f+XLaim/kqHGlRwTU549gu2d59Zf+/pPoijtkQgtxER0pEuu6X8BifRS7Pp8febTLJuRXFPFHCOwbAu8KMn5rvWRLOcX1r94+HpXVcfNk4a2fdj5BtccIQ2kTTZIox2nYqXE7oBSysKfh1uwf6xCo6VDGIVQlQvlxbnpzNAY1Xq9LsSxrwhsvJ7juTN14P3AMMwOrm+ScripWPa8a8YyjXX3R8AmPmSoBJwgBNuPhPN2R5AEDox+F16rK9zy/NRSs6XOn7b1RJILPK7nSMm0zPLy8qpS4O+ZTsg/edmB064F3aEDxsgDrT8E1zJA5sZwoRvw/c+PYDTswddfrdOfP7w/t/ficKk3cC5omk5r56Zit0QuXl2eyuQ9U4fYt0AbWuA4Lry1UIaP356FBYWDeonDesZQnyrCTE2mJEGi77zzZun3R5v1KMm8RLFhmubguD1sLFaYWZqigErGsDRbhLuf3IBaUQDXD2EOBWqFHDy4vQAjN4TG3i609hsQixW4++7Sq9/+uPlepVo9ScV6jj/e/Hu3teqYfdbBjx/cngY2mwVJFOHezWuX/ozRotE4dUAElaIMh+c6bD09gESq0a5j3UC7SqlYl+Oyz3ZPOk9FMO/YXgR72NGYosGq1yCJQ1icLkM5L0EYJxBQLJz0NOhbATzeV6FQDMB2HM73fTatWSqYZHOS3tEdxfGj7HSBybGYc+B50LrQ4aCpQlsfAsuwYGDkLJr+u99ewGlnEHcH9iDLi08kSdpkiOla6JnMK/MLsW3bH/Ssi88UKZJ4LgMCy2CKMewed2D76AJoloMgZuFcM8ENktHM9WvPZFn+g+f5NkPOYT8tDLY4xhfuhWrx7YH2YUX0pPmqQOdz2En0oRuOod3tg+7EoBvuOF8oa/l8/jHyz8Rnk0kwmRSWIEptP2Z0zQHqrGfxYRDwNDbaxBRNx4f2wMc2cF3s4EaxWPwVgzhIzypD3DsmEaYTIKIoylMURSuVSjuO49xsDvSVpmEslrKRMrR8GNrxqDpV2yoUChtYniNy6F3myjiKyViJSZQm7tjDwp6JorhjmuYbak+9ZbnRHC+IDUztF0EQ/sXvVDKSoqtiE8Hg0kwk5bSeGGkHozjCxRuGYShBEIS4yXN8d04aeDk4/y8GJNXJJI2uTFyNZVm+UqkwZLFDIvIm8+w/AQYAA2L5OdadVygAAAAASUVORK5CYII=",iconRate:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA85JREFUeNpsVNtOG1cUPXOzPeMxvoHHJnY8JnZtrECISKpQVEVFPKSRaB/6nk+I+pLP6BdEkapGVaVWEelD27QPBSyVqA1CDUGQggW48f0CnvHYnrHHnu6DjiuKamlJs/eeWd5n7bUPtbKyQiOEOIAdIABsAJzrA3RAFzAAUOQ9DETqI+A6YklRBPgA44AxQoaJTgEN8oxzDgBPyDRAmxD9S+YETACuirw/PSXdXW6dWUKperSv219nIJ8DtEhnYnz803u7mWHUCmw+5scbx6RzNCLDnUxGgzeXUqFPPn/zUrF3NOi8I31ULoiLwYXfvoD6GWAoOgKS1Zx6lC+9OImnG4/JqajLZFLEt/DZ8yc5e2n4Xckn2ert/aXpttm/IZT5xbFgdw9rI4nzH659dSzw7+18Dzz42EOANSKjiejuTt0TPyltocisduiJnNUCqWoJl8+qw/ehHgWEjYr8scavH12Jc7sQGwSDi2T4RzXKOmJAW85GmTgxdZ03GYpHFH0u+ETEc3fh5c91j1euviAaqmQw/yHD7FohX67xlIzUg5kIRwusw4yHdCuPRDeDJyb0SsnbCruuhGK23QskI7sw+Jkl/1JrGNs/9VDwQT0rJZRsMrFjbSBTeKv6IkzeNbgtv1qri2NTReiKwz50ERvR5HtsEwOTKYCiO/F21eSK7fK71nJz0BBEL1VJp/wHoLFFK9enu9xGO5nissSPFrFUEzcCqOCJs8R4VTwZv6y2/DJag/c9EPsh5QvYF++82TYEX6zxCnKeoHsmLksfpNQ6YnO5k6zKbD5jhNbOyBoGEbNPWnYTE+OYc/RuzKnWRjsRVwp+x9z0pP3+/No3RdQzhkhwXQmXazfTkaXMI2xemgjZJcetkS5x+91rE/dmN39ouFyxLBadCjrvJJ9/uYfq4pND562vM7VqRe90O4HyIb8Mde/IGlgDk3SDyNLz5ml4XuEyajBunE+wp4qiZv2FIknmHWsbmPItpcTAumotTcYajsgQGbONLP0YbMTc9q96TAzn1iGu465bzT6yUwE06LFYHhS95mctWAITtfEmDC+TceRm4JjWzP2qvnkanbb9AvHfeOHzpeMjGwogdW8h4bXNTtQOgiEV/Yl8QWYL24O9RHZO7tQX0xs/FhOWf38VTpyHVA8f2xC2nnVp6aFW6IUqq1yojZ4iynvwOjAZ/gN3f5EMkcXVc3t9q+/+/enVJPctxAUycc45WdRkd62Yz/aWDbMpSD5qPxwL42vqBJNRcNNeXC0H0cxJnnFHHTIYmtjm/y5QrKn6jwADAOdNghDsOz2+AAAAAElFTkSuQmCC",iconItem:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAA1BJREFUeNp0VE1vGzcUJJek90O25A9JVpQYdZLC7sUoArTJJe2tKBrAKJD+xl576KE99VQ0xwBBkIuLtqitRLEcWdZqP8TdJbfzNlRhuCmBAUjucjjz3uPjx8fH7MbggHcDtYMBrMN/hryxpoMKCIAICN2aiDSQAbmbV27/g2QC8IENYAfoA9uOlJTEwDtgAlwBKVBcJ5TOlnQqtoBhXdf3ksXi8yxLHuZLva2kLDbbG6cbnc4zW/NX+OfUkcbXVFpxeHhIJG1gANwHPr2cTr+dXl48TdL0bpZlO4sk7Z9PLj5eD+WDqNXSdc2Fc8KdMrsi62JyGzjUevl4djX75u3b88+MsWSXC+FxKSW3kBQneRD6qg+yrrGmjX3jyEhZSfZ6wMFsdnl8cT752jDbLcuKpUnCOOdM+YqtKcU8z2MCzKPxZH86nX3Uaa9/cXs4/HVre+cH+o8IpTFm982b10/iOP6urExgqopZaxn3OKswL9KSZbg7jELWaoVMreH+2vLJZLq+iNOvDg5q2+31KBmpt1gsekk8fwzJgbWGlWXBqqJkNQjoRo97731A7VLrJkxRFBAh07qQo9HoS8T1AWXfA0nOhTwBiY7CoElxrvNGFbLagMKMWUNYFBVTEraFADi7mi823k2nj3CsK46OjtphGFVZlt8CwXYURbIsS7bMQWgMex8O3sSMUJaaFVBIhKR8hX6//xtlcw2jBEmWptluVRaddrst4Y9ZY6GkwLPgzFiaa2xzqOXMD/wmBEQUBH7c6/V+oWxeUs2EYejt7e3Zs7PTp1rrTzY3O0EYhGy5zBt7FjGig3JNMSlkU2BKSawlYhj9QQUs3bOgUQdBYO7c2dPj8fgJSuNISrHVarU42aYMX28FpIpsS6n+HAwGP2P3nGz+W3TAUil1BZuvhZQpsufDpkIOpIfTFJ4mftyzyIfGa3i5v7//ve/7z3H2TJycnDBHaNzDzXHjHIpGIP3L94MLrDMoq5sqF2IOW78Pbg1/Gg6HP6KQX2D/bwoXv95C0NuEazmr90pdowebu2maDpHtCMqXuGiMkhqTNddJ5uSK/09zXJFSS2o5hK67WNfTKNaJm1OIrPxAw1zFcGWbGuLMXeDd+F458qan/SPAADZkjTT769JCAAAAAElFTkSuQmCC",tableBorder:"data:image/png;base64,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",iconReset:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABMAAAATCAYAAAByUDbMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAABB5JREFUeNpMlM9vG0UUx2dm1/Z6vY7txE5cE5yQQOymMSERJGmjSFBVSqUgAVJVoR44IA4cOJdzVfE3IBAnJISK4FQOICSKhNS0KCQqpGnaJnZ+NI7t+Nfau17vr1nelHGVkT7aGdnzfW++8+bhvwhBRBTRjeVljBDyAUEgDEQBBQgAFNCBFofNTcAFPMSHeHNl5cUckIE4MAy8DAwNG0byWTBYhXkTqABF/m0AHcDmwZ4LsEEACRgAxmVKZ6+Uyx+NVasTgmUR2u2iI0KO1lKp39dHRu7woOwULIgGWCxDIZPJ9EQjQFr0vJlPi8Xr6Wo17bXb2G21kK3riBhG30ilMg0BXqmGw0VNkjSeld07LhMTuTdJYHJJVT/MFYuTLghQTUNFUdS3EolqJRyuEUq9uKaNnj0+nq9EIhtNWa7Dnm5PkAn5gT4gBbyaabdzHgULXBcVIpHqdwsLmxTjPULIMfxujJbL0fM7Owvvra/fuD0z80k+kWCCArOKnBJjmaXPqGrUsyzkQlY/53JPPEIOBEHYBrE89pHKYSq1fWtp6cut0dGvLm1tXePmk55Xvvf3999+yTA+LoliBJ+cCFang6qC4E7t7qZlx4k8ymTyx7EY+XdOvTL2UP5NafuMP86du+8gtNlnmrQVCDDPEPMstB2NGgbG4oVCYZnoutj+v5iIIwjm3fn575uK0mor9sTBlHFVlbrJocPArud57b14PG+KoooxZjXnCNlsVoZF6ESWcSMQQK+VSmfBUdxQFO3O4uItOxhsOIQmd8+b18wgDdX8+iDuUhRt+gu8NFQQZpfgsrMSEHPAE/VRKnV3I51epWDlxuTkT6YkFVzBE/YW7Q86MRq3XBsZrokfjtUuFVLqmyAiAYS/Ao/AAuenO1mWKhhd+TOX++FocHAVjF41BjzhYMF5FxRErDuG4UICDkWDZamyn2gu/Z0tvQMimF8AZhcQKMX0i+asq09tRB9Yomj8Ojf3Lbslf4XaqRLdgLS1wxXrgmGBGBwx9zR+T7LEX+A/a7z66fPM2C1MrUV+rA9ZV+9drH1eTHVetzwv4bruKKV0AjIf355ujVXtpg8ZFIVUQQOhJ/yNNnnRur3SsJSW2MzeV24+mmt98c8b9c+CWbHZr0kqcbGvJneUE7HVh3QIblKUaCg7sOcpF1N596CnnxMO6oLdf+TfbMidwWbEHNdDTrQeMsIt3AkgC/x1PSR1RW12N/mNSMkD2HPAM7N7bYiJeXzh+m1iDh8pj8OqeNzx2zETOZJLXR+LO1CX9t7aPvN10PIxn/aBGs/KO93DLN5G2Lkd1qOSJbkJrMM8pslWv9Lx13lNPQMO+bzb62O9IRxcj6DxxwrlQl3e8FQeuey3hTx8Czwb5lO91xRvX97zMjvRF2L/CTAAXkAASAqjjOQAAAAASUVORK5CYII=",iconFavorite:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAAB3RJTUUH3AgMEgAGJU9QpgAAAAlwSFlzAAALEgAACxIB0t1+/AAAAARnQU1BAACxjwv8YQUAAACBUExURYxiRFhBL29ONoFXO1A4Kap5U5RpSIlaQrCAW7WHZZ5wTTMkGRENCigaEx0eIi8yLj9AQjRJMTZ3LkxNSmlIRLZRSslPUUCJOcdaYEuSSTyDNXGudbVHO4a8iXzCiXu9hEwZGs0uMITGk4wwKcYaHLIWF7YsLc4eIpocHGYaGHEjIsd0iqMAAAEaSURBVHjaPZCLkoMgDEVDQLACorhFXWu3yqOP///Aje3OXmbCcAh3LoFTAxJASoWSo+Igm6oCFIwhLSaY1kJoOjJoUBiSNf9VcFBoze1R4tPY1+sDAYBpm0nhElIJsTWGAVRcx5xSSNuU8yM8388l1yXdSemyr7EUZxEBUZft0P2875hLpxmZ8j+4hes15iIsRQK0kQDB87rElDvDKBLTt7CFdV/XZZnn+dsyBE45LyGs15+DjaO3TL6hCGH5tHnvDcrD07Rqmqag5lE43VuCnGnTOklUzd/OOYokKSd1tt3XOajR924YLAIoTlNoW9e53vt+GLoDAurP0OjO2mNTCFIIqGV9qmjkdd1QbehHDDkH5Ch4JZU6/OQv63MYCIpCoiUAAAAASUVORK5CYII=",jobBG:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACIAAAAiCAMAAAANmfvwAAAAB3RJTUUH3AgMEhYndb71LwAAAAlwSFlzAAALEgAACxIB0t1+/AAAAARnQU1BAACxjwv8YQUAAAAtUExURQAAADIhGS4hGTgoJEU2MTsyKyoeF09COxwXFzEdGyomI01EQi8vMRALCDo2NSmSYl8AAAABdFJOUwBA5thmAAABG0lEQVR42oWT23LDIAxEWd0A4/r/P7cCMw51gOohMwknuysJQhgqmRnBP1KYlxmeMpsBhMwsXsrMM8gy/LwUUSkxCnPGiwFYSzn7t+MqUTPyGNOJGM/xP1dRZPrEJnDht3URzo+XOTHp4PowRizHbAoXg6zbiMwnJdQje9SfOXIocCdZiYSgYJdJnmRFhMPHnFrYJVLTkPvoBlFi1LHtEN9+RXSNsB87sjM60ZCdkaugdhQ3WcDekf2D2H50iZFTXYCWjUjbI5ZOLnLfEkDiSgT3ZSTvacqwZqLQZaZWLBnPjfYJR/0mcF+obuU6f1tPUgkafnEvGSERHjVaWd2VU6qsUh8s8PVufF9oz16lPfu3RjcbazHNdkZv4BdMigWtQvNdCwAAAABJRU5ErkJggg==",button:"data:image/png;base64,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",jobMode:"data:image/png;base64,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",arrow:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAB4AAAAeCAYAAAA7MK6iAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAzxJREFUeNrsV9tOE0EY/vfQA1CsUqCcJAZDQkzAoARNiFdKNCbeeqEXmpgYE1/AK9/ASx7AV+AFNF6YoKGAjYC1FLFVeqTtbts9zoz/lilsGk2qCCTK33yZ7s50vu8/zL9bgTEGx2EiHJP9f8QndmQmcIgcznfKwTgOxWRO5kG0I/z82kKYfLQ56N8U0iD2Ppq9+kTwePuyFePz/JuFD3hPQ1T5qHEhbjHkIEIaYQ6M9ofG7lyZmA8PDoWDoV5SVCubmXxh/ev3dHRxNba4tZ3d5kJqXIjhEmK5hLDfybET4t7Jc+FbN6cvznX3D0ltHR04g1PYUimloFaquXSusL6dL0Q3UulI5FMixkU0oqJzMS2lR+CjhOhEDM+OjzydHh973NF5CmSPF0RJRn4BiG2BjaCEgIT3mCSrZbWWyJXKa5vJ1MqrpbUFLqKl9AguAU6+TyNG7l2bfDHc3zPj9flBkmUQRRFMXQdD19B7Ah6vD5w5x5xoVJUyBLt7iE5hcyMej6XSuZV4priYVbVvuERFKHzUuAgqNHnvQwz4PfLkg+tTcwG/L8woA9syoVZRECoQy8IoSPVoMCSlDInLJegKD4C/vR0yya36esctg7B0zabLJmFvqxZ9/XHHXObkRG4KvbOe6Jatl9RahmmVsFLcgYqigIkCcAMgmHPB+XDJzlPVwjklmQQZbyLRflIZ9GGSJ3G1GPCIZDzky0cLRrxxnMCV5zZE1+3LY3fPeIWJTDIFqmGCZjPQyS6xTXe35XVXJ0EuaJMFkEUBVJN8wWUxFLqimvS9YtIELinxcFd5we0Ri43Knjo/eGMo4LlfymehYliAP4SqxZyw1b0mCLYfHg2vE7hkHTdYKZv0HUakxKu9xitdbyqweqXvNRCnsM6GghdGg55nmdSWZFgECSlUEDV711tEAT2OY2lG0cuIZtNV19muNR2pxtn+aaPZa5k+Weq81Ot/XsznuhwiJ29FgyTQixgSRDHcEfQ6+YsmYrrObktNpEEszvT5HiqKqud18rKgk/WsRpbQu1LTuTRcJA2P4E9ap+DKbweHxDc2Wg3bQR6LkguME9iH/Wg8sX/8nevkL8xR2Q8BBgA2hPFRtbbr5wAAAABJRU5ErkJggg==",iconChatSM:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAABmJLR0QA/wD/AP+gvaeTAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAB3RJTUUH3AoMDB4YZ3mPAAAAAB1pVFh0Q29tbWVudAAAAAAAQ3JlYXRlZCB3aXRoIEdJTVBkLmUHAAABeklEQVQoz3WTvW4TURCFv2+DiFIipXbWCgqiySP4Idy6oEJyCV1eIR1FXoDCUqrU1JFQHiEikrVri9KioOAnEhwK3zU3KNxm9/6cM2fOzEi1ulW3Bxyr0yQz4AS4AxbAlbpsR+2v4b0V8FB9V0DbS7fXSYb/BfCmHbWbHbgAr4GXBZeaeIuPKklugcn4aLyxW3V76ntgNoCqSI/ugUWSVw1wXEk1yQo4B26SCNyo50lWZU+SmXrcqNNKGsDl+Gh8lmRezuftqD0DLofo5TttCkvxR9RJv+5P1XnJcd6v+1NgUsj/Ru9W3U/1aW3UkGOS32rzmAfAfVPqOOi2IkFteGh5XcK7pjg3AL4m+QD8GB4nuVc74GORnMK1sFt1J+qnQvBdvQA+D3Utaz/Ja/V5JeTFE2AJLNRZkgPgLfAF+Fbs31efAQd1nYGlAP26P0xyrf63wyqXb9VJO2o3DUDp1UmVv7VBFdFiAPIP+26qgGlp191UqVfAg6n6A0q42/cMWcqjAAAAAElFTkSuQmCC",iconChatNoColor:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA8AAAAPCAYAAAA71pVKAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAWFJREFUeNqMUz1LA0EU3N1gY2OQs7HwI8L9gUAqG5VYWqS1EIOQIv4OtUxjKwS8NoWI+APyG0RCzrtLaWKwVPFYZ46nRLmNtzDs2903c7v35mmrslEC0jiJOG9prRvW2kPEPjAAAqCH/XB9bSNVMgywBDy+V6v7OOwi7oA4xFzHehGoIx5i7mDuJqPY+yYrfvmjsnmUlsufk4uzcyt7eYhHcStKogfAy26MoITN69fT9iU2noHafwLMJ49kH7iTw4MiAsyHgG/4c7C+klfcACfALVBTjgEO8xuGfxWL/sxZEYE+eUbKMf5zOFcAROb7Ruq4kqPuFMBNmT8gOYDStuN6LgHmB0ac01TukSfQBKdHcghM4ZxWEYEXGIn5GU8K79E5NMC8+tJIdOIbrMy1lsZQaAqP/sX7l6WOLMdYfg7fyKdNV3d27xfCp2PEez9kEci6igYAfnUV38irznbVlwADABPWyIVOu15aAAAAAElFTkSuQmCC",iconSave:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAoCAYAAAD+MdrbAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAB5ZJREFUeNqsVmtz28YVPSBBEgT4AimKlERKVkzG0tiyW0/rZtJJ42SSukyazvRzMtNf4PS/2H/B/tpPHdOdcZKmT1uZOPUztknLkqmHRYoEHyAIAiDQu0uLkSWnn7oz4ALL3bP33r33nBXwI+2Tj1cu9QxcHOge/zb0NuRIAuGIgKiM6vqaVrr3/Wb18Drh8MDKcq6UyqrXmi80DqBEVaQiMpq6MelZ6/c0Bl7961f3igfX+w6BXSSQI2DBwN5kzolZmY/Nz8yBrC+cf2+lQsOFIxbSH8y9S+ydAc2oY0ti4SkspOLodluIxZLQhxYfb+oD3n+/tc06ZmmJ9X72JUko5PKZcnfPQ2IqycEYUCgg42QmhOlMFvCLiEcVxMm6KXkE0SdB9Psw8vqoN5xk8USmuL5ev8oBSxdWruzUtGJ6dpaDLabzyKcTWFqYgRqPI+ATEFckCD4/nm7WEYKNtd0hJJ+JeFCCX7LRG4yKrT19lceQTrO07zoDm8+mkFbjCPoFDBwPHh0061nL039f3mni62/XkU1FkYwF+RqWDQv55EWRTWIf7BB4wOMKZCmEAcXKCwY4WN914fLHw1/+WUWl1ubgUlgFRg0kYGF6WsCW4JW4hbag8YFUJAwfufei1UVA9BPAiABdMFR2ejfv1lB5Pj5xNRbG0HKQSOfIiAjO5I8j4KngFto9mp4eu8ysc2ybHgsPnjZgOy5+ciKDhmbg1v1NPueNORWfvLsEKRSkvTwE5Cka3eZJzwGZu/utbwwwNC1c+9caWt0hWerD8XwCX6w+44uXFlSc/9k8WT2iuQYkkcX3UGIz5P3ccsw2pUcIb69MkysSt/BPXzzCbquP+YyC98/OAa5N4zb6fR3Ntgaf08N6o3a0UlgM/ZKKdm+IVNSHX51JkXtxtPUhEpEA3jmdgm2TByM/nEEXrmNACYkYDm10yKu1tVqZ56HrWa3sdLzU6YcxHQ3wAgpICoKChcX5LJpaF++spJFQgnDEKIKjPj8kh04+KkvY2O3iu/UaHj1s/JEDdjrm6mwu81mz1U3KcpBXQFwcUtrEIQgCcuk4EuGxF7ZlwHRlWK5I7lmwBAU3HqzhwZ3ty0PLrk5cZrXIYslq0x3qMB0HzU4fI1Pj/7Nv9rSHtCF0RESTj395/y7u3nlR7upGmT4r/n1Aqudk/YV+fWYu+emTTZ12NlGgUqQkghAMI0qEEQpHEabaFX0+bLcMrNa2sV51q7t761dpr1uMHMQfjiQCMRguNLfdshwTSlstC13anbWcOgs1MOLvG10NXTqA/iBBnMjLsSLLaZhm4yjBxiJyQQwqpURU4qSpSLESgRcOphYr00a9U365pNrumRXDGJRNU6++lrFftsKB9+KPzKnsg/5PCTjI3sfeUD+PScHCQkw96G71zv3apecb7cuvW3cEcH4hUTpzKn/twtIiFt48/drNHj+8ja+rNRDw54eB/YetOncmf+UPH/0WiVQGFgnRyDL54w+F+Tfrp9IzWJnNIB0JlTa0VovyuEXLW68AkmUXP3jrp5d+//67/LujtagSMHl8jslJlvVsgyClUT6XI6ZulnYaWtUwHA460ZTfnD9ZZmDMCm2vBj/pSVgUOP0r8SQHYe8MlPXMUtZOHS+i3m+Untfq1ykXxyJ1+uzclV+fPF5kruhEX65tcEC2kFnCGgNkYLaxR2Rg4PbDHfhdC7F4DI7hoNHRk/W97i1WeoXlfLaUnTmGIUllUBhBUVRI/jHtD9oNGm9y5pb8HpyRiz/f3CW+rEAQRR6arOKCMoLpUlHc117mnmETU3oORJpoEL1TsSPocxEgZbPtITq9Pr76dgdrWx1utfgyRxRSxP38ZRYWWVkxd5yBRlJJwiQEocgKEnG6y8gRREjgRZLQe5XmBGxKVWB5AW4IN0oKjjdhP5rt57Hp901IXouoyYewJOPhM3q3hjh3cg6bdQ3fPBoL1JsLU/jde8vwezZ5Jb6So+KRTCfdaGp93PjmyURTMqofN1Z3uKYsL6Zw/ucLsIZ9OBQSUbBJg2wetokEMOpn1rFYDAZE/3EZ55ZVLuJMU67/exuNtonFmSg+/MUxYtkBPNJoczig+Ransk1tewJY+cfjp1VGnrFYmpOoYfTIqhA+fiuLYj4JrTfWlLdPqTApTx1KIbPfJZddzuisbTVaP1hI4nLpaXPEc04Sx1GIqTNc9C/8sojCXAQfnM2QNAgkUCP4CGRE2sJ6BnevvouHT7bK+7cvVourlPmfhQQnmZubg0631aGpc7r3OR0sLswRW8uUUWPal+MZujOKkAIu/lbZwNpOo1p72rs6KT1u8na97IsGPpLFQDIhCVzRiDiRyeYojs5EW/g1RJ2iwxJx8/EO/vNsDbdXtxjY6iuawtDpOlbt2t6nLwZtLE2nEA0HkDtWQGPnGQ8F24T1baqovz96jAdrGu7f273sOBYj21uTC+dLgqCKUIreyGsZ+iC13jOTno/kst8nAJ1uYCFsdSx8t1mjfOxgc6uJdntYHnlCy/N8qwTK2eYVgpWkSEGSxOK+BCTj0ZIie8UDslDtGHql2xnTvju2rEoSWtmXgv+7pvxXgAEAv03B1WFmoQUAAAAASUVORK5CYII=",iconPlus:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAALCAYAAACprHcmAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAOJJREFUeNpckTsKwkAQhvPYaFTUQhAEQbAVcyM7L+E5rLyF5BamMpAiRQKCVSBNECRqkvWfOCurAx/7w7xnTeNjJmNprwSN9v4ECWBrkNWgYmrBweTsMF3gcLUXeDBStRUcOAAjKeUljuMd9BD02Wdbf5V7nGCUZamSVad2NBJjMC+KIpB/liTJHr4ZJQpehDaWaH10XTf0PG+b5/k5y7IgTdOTdpV2Xmo3BUuwpopRFB2gV2ABJsAVnEEneoI7ad/3N2EYXqFvND77GlNb0NFQd674fESlgg0OsDTUz315CzAAWshhdQv5QQQAAAAASUVORK5CYII="});TWDB.Settings=new Object({uid:"twdb_settings",ready:false,init:function(){if(this.ready){return}var e=TWDB.Cache.load("settings");if(typeof e=="object"&&e!=null){this.settings=e}else{this.settings={}}var t=this;var n=jQuery('<div class="main_footnote" style="cursor:pointer;"><div class="main_footnote_left"></div><div class="main_footnote_right"></div>twdb.info: settings<div>');jQuery("#main_footnotes").append(n);n.click(function(){t.open()});this.gui={};this.tmp={};this.ready=true},get:function(e,t){if(typeof this.settings[e]=="undefined"){this.set(e,t);return t}return this.settings[e]},set:function(e,t){this.settings[e]=t;TWDB.Cache.save("settings",this.settings)},open:function(){var e=this;var t=[[0,"sectorMap","show Sector Numbering on Minimap"],[0,"showAllJobs","show all jobs on map"],[0,"collector","mark items on Traders and Market you did not own"],[0,"jobBoniTooltip","show laborpoint information on inventory window for the selected job"],[0,"buyTip","show buy tip on traders"],[0,"sellTip","show sell tip on inventory window"],[0,"sellTip2","sell items which are not used on any job"],[0,"chat","use chat enhancement"]];this.tmp={};this.gui.window=wman.open(this.uid,null,"noreload").setMiniTitle("TWDB Settings").setTitle("tw-db.info Settings");this.gui.window.showLoader();var n=jQuery("<table />");for(var r=0;r<t.length;r++){var i=t[r][1];this.tmp[i]=this.get(i);var s=jQuery("<tr />");switch(t[r][0]){case 0:var o=function(t){return function(){e.tmp[t]=!e.tmp[t]}}(i);var u=new tw2gui.checkbox("",!this.tmp[i]?"":"tw2gui_checkbox_checked",o);s.append(jQuery("<td />").append(u.getMainDiv()));break}s.append("<td>"+t[r][2]+"</td>");n.append(s)}var a=new tw2gui.combobox;a.addItem("left","left").addItem("right","right");a.select(this.settings["clothPos"]);var s=jQuery("<tr />").append(jQuery('<td colspan="2" />').append(a.getMainDiv()).append("<span> right</span>"));n.append(s);var f=new tw2gui.button("Save",function(){if(a.getValue()=="left"){e.settings["clothPos"]="left"}else{e.settings["clothPos"]="right"}e.close()});this.gui.window.appendToContentPane(n).appendToContentPane(f.getMainDiv());this.gui.window.hideLoader()},close:function(){for(var e in this.tmp){this.settings[e]=this.tmp[e]}TWDB.Cache.save("settings",this.settings);this.gui.window.fireEvent(TWE("WINDOW_CLOSE"),this.gui.window)}});TWDB.Error=new Object({uid:"twdb_error",log:[],report:function(e,t){this.log.push({msg:t,e:e.message});if(typeof this.gui=="undefined"){var n=this;this.gui=jQuery("<div />");this.gui.click(function(){n.show()});var r=jQuery('<div class="main_footnote" style="cursor:pointer;" />').append(jQuery('<div class="main_footnote_left"></div><div class="main_footnote_right"></div>')).append(this.gui);jQuery("#main_footnotes").append(r)}this.gui.html("tw-db.info: an error occured ["+this.log.length+"]");this.gui.fadeOut();this.gui.fadeIn("slow")},show:function(){var e=new tw2gui.scrollpane;jQuery(e.getMainDiv()).css("height","370px");var t='<table border="1" cellpadding="3" cellspacing="1">';for(var n=this.log.length-1;n>=0;n--){t+="<tr><td>"+n+"</td><td>"+this.log[n].msg+"</td><td>"+this.log[n].e+"</td></tr>"}t+="</table>";e.appendContent(t);var r=wman.open(this.uid,null,"noreload").setMiniTitle("TWDB Errorlog").setTitle("tw-db.info Errorlog").appendToContentPane(e.getMainDiv())}});TWDB.Time=new Object({ready:false,init:function(){if(this.ready){return}var e=TWDB.Cache.load("time");if(e&&typeof e["base"]!="undefined"){this.time=e;this.ready=true;return}this.time={time2str:{},str2time:{}};this.count=0;this.query()},query:function(){var e=this;switch(this.count){case 0:jQuery.post("game.php?window=job&x=11&y=91",{},function(t){jQuery(t.page).find(".task_control > table").find("select > option").each(function(t){if(t==1){e.time["base"]=parseInt(jQuery(this).attr("value"))}e.time.str2time[jQuery.trim(jQuery(this).attr("label")).toLowerCase()]=Number(jQuery(this).attr("value"))});e.count++;e.query()},"json");break;case 1:jQuery.post("game.php?window=job&x=10&y=94",{},function(t){jQuery(t.page).find(".task_control > table").find("select > option").each(function(t){e.time.str2time[jQuery.trim(jQuery(this).attr("label")).toLowerCase()]=Number(jQuery(this).attr("value"))});e.count++;e.query()},"json");break;case 2:jQuery.post("game.php?window=job&x=59&y=119",{},function(t){var n=jQuery(t.page).find(".task_control > table:last").find(".txright:first");e.time.str2time[jQuery.trim(jQuery(n).html()).toLowerCase()]=e.time.base*4/30;e.count++;e.query()},"json");break;case 3:for(var t in this.time.str2time){this.time.time2str[this.time.str2time[t]]=t}if(typeof this.time.base=="undefined"){this.init();break}this.ready=true;TWDB.Cache.save("time",this.time);break}},getBase:function(){return this.time.base},str2time:function(e){e=e.toLowerCase();if(typeof this.time.str2time[e]!="undefined"){return this.time.str2time[e]}return false},time2str:function(e){if(typeof this.time.time2str[e]!="undefined"){return this.time.time2str[e]}return false}});TWDB.Chat=new Object({ready:false,color:null,customColor:[0,0,0],user:null,bold:false,caps:false,sm:{"!:-)!":"shoot",":-)":"smile",":-D":"laugh",":-(":"frown",";-)":"smirk",":-P":"tongue","-.-":"nc","^_^":"01","o.O":"oo","el pollo diablo!":"elpollodiablo","!el pollo diablo":"elpollodiablo_mirror","el pollo diablo?!":"elpollodiablo_front"},init:function(){if(!TWDB.Settings.get("chat",true)||typeof colorTxt!="undefined"){this.ready=true;return}var e=this;this.gui={};this.gui.tellBox=new MessageDialog("whisper","");this.history={color:[],tell:[]};var t=TWDB.Cache.load("chathistory");if(typeof t=="object"&&t!=null){this.history=t}var n=jQuery('<div style="position:absolute;top:3px;left:10px;display:block;"/>');for(var r in this.sm){var i=jQuery('<img src="'+Game.cdnURL+"/images/chat/smiley_"+this.sm[r]+'.png" style="cursor:pointer;margin:1px;" title="'+r+'" />');i.click(function(e){return function(){jQuery("#chatwindow_say").val(jQuery("#chatwindow_say").val()+" "+e+" ");jQuery("#chatwindow_say").focus()}}(r));n.append(i)}var s=jQuery('<div style="display:inline-block;cursor:pointer;vertical-align:top;margin:1px;width:16px;height:15px;overflow:hidden;" title="Player"><div style="position:relative;top:0px;left:-66px" ><img width="148" height="30" src="'+Game.cdnURL+'/images/tw2gui/tw2gui_bbcodes.png" /></div></div>');s.click(function(e){return function(){jQuery("#chatwindow_say").val(jQuery("#chatwindow_say").val()+"[player][/player]");jQuery("#chatwindow_say").focus()}}(r));n.append(s);this.gui.sm=jQuery('<div style="position:absolute;top:22px;left:-8px;width:252px;height:28px;display:none;background:url('+Game.cdnURL+'/images/main/footerbottom_middle.png) repeat scroll left bottom transparent;"><div style="position:absolute;bottom:0px;left:0px;width:19px;height:28px;display:block;background:url('+Game.cdnURL+'/images/main/footerbottom_left.png) repeat scroll left bottom transparent;"></div><div style="position:absolute;bottom:0px;right:0px;width:19px;height:20px;display:block;background:url('+Game.cdnURL+'/images/main/footerbottom_right.png) repeat scroll right bottom transparent;"></div><div style="position:absolute;top:1px;right:0px;width:6px;height:20px;display:block;background:url('+Game.cdnURL+'/images/main/borders.png)"></div></div>').append(n);jQuery("#chatwindow_handle").append(this.gui.sm);this.gui.box=jQuery('<div style="position:absolute;top:-40px;left:140px;width:90px;height:30px;padding:5px;display:none;background-color:#32201a;cursor:pointer;" />');var o=jQuery('<div style="display:inline-block;width:15px;height:15px;background:url('+TWDB.images.iconChat+')no-repeat -15px 0px black;"/>');o.click(function(){e.switchColor(this)});this.gui.box.append(o);var o=jQuery('<div style="display:inline-block;width:15px;height:15px;background:url('+TWDB.images.iconChat+')no-repeat -15px 0px red;"/>');o.click(function(){e.switchColor(this)});this.gui.box.append(o);var o=jQuery('<div style="display:inline-block;width:15px;height:15px;background:url('+TWDB.images.iconChat+')no-repeat -15px 0px blue;"/>');o.click(function(){e.switchColor(this)});this.gui.box.append(o);var o=jQuery('<div style="display:inline-block;width:15px;height:15px;background:url('+TWDB.images.iconChat+')no-repeat -15px 0px yellow;"/>');o.click(function(){e.switchColor(this)});this.gui.box.append(o);var o=jQuery('<div style="display:inline-block;width:15px;height:15px;background:url('+Game.cdnURL+"/images/chat/smiley_smile.png"+')no-repeat -2px 0px transparent;"/>');o.click(function(){e.showSm()});this.gui.box.append(o);var o=jQuery('<div style="display:inline-block;width:15px;height:15px;background:url('+TWDB.images.iconChat+')no-repeat -30px 0px transparent;"/>');o.click(function(){e.tell()});this.gui.box.append(o);var o=jQuery('<div style="display:inline-block;width:15px;height:15px;background:url('+TWDB.images.iconChat+')no-repeat -15px 0px green;"/>');o.click(function(){e.switchColor(this)});this.gui.box.append(o);var o=jQuery('<div style="display:inline-block;width:15px;height:15px;background:url('+TWDB.images.iconChat+')no-repeat -15px 0px brown;"/>');o.click(function(){e.switchColor(this)});this.gui.box.append(o);var o=jQuery('<div style="display:inline-block;width:15px;height:15px;background:url('+TWDB.images.iconChat+')no-repeat -15px 0px magenta;"/>');o.click(function(){e.switchColor(this)});this.gui.box.append(o);var o=jQuery('<div style="display:inline-block;width:15px;height:15px;background:url('+TWDB.images.iconChat+')no-repeat -15px 0px gray;"/>');o.click(function(){e.switchColor(this)});this.gui.box.append(o);var o=jQuery('<div style="display:inline-block;width:15px;height:15px;background:url('+TWDB.images.iconChat+')no-repeat 0px 0px transparent;"/>');o.click(function(){e.showColor()});this.gui.box.append(o);var o=jQuery('<div style="display:inline-block;width:15px;height:15px;background:url('+TWDB.images.iconChat+')no-repeat -45px 0px transparent;"/>');o.click(function(){e.cleartell()});this.gui.box.append(o);this.gui.color=jQuery('<div style="display:inline-block;width:15px;height:15px;background:url('+TWDB.images.iconChat+');cursor:pointer;"/>');var u=jQuery("<td />");u.append(this.gui.box);u.append(this.gui.sm);u.append(this.gui.color);this.gui.box.click(function(){e.show()});this.gui.color.click(function(){e.show()});jQuery("#chatwindow_say").parent().prev().before(u);this.gui.tell=jQuery('<td style="display:none;width:15px;height:15px;" />');this.gui.tell.click(function(){e.tell()});jQuery("#chatwindow_channelselect").parent().after(this.gui.tell);this.gui.customColor=jQuery('<div style="width:50px;height:50px;display:inline-block;background-color:#000;vertical-align:top;margin: 5px;" />');this.ready=true},show:function(){if(this.gui.box.is(":hidden")){this.gui.box.show()}else{this.gui.box.hide();jQuery("#chatwindow_say").focus()}},switchColor:function(e){var t=jQuery(e).css("background-color");var n=t.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);n=String(parseInt(n[1]*9/255+.5))+String(parseInt(n[2]*9/255+.5))+String(parseInt(n[3]*9/255+.5));var r=this.history.color.length;for(var i=0;i<r;i++){var s=this.history.color.shift();if(s!=n){this.history.color.push(s)}}this.history.color.push(n);if(this.history.color.length>5){this.history.color.shift()}TWDB.Cache.save("chathistory",this.history);this.customColor[0]=parseInt(String(n).substr(0,1));this.customColor[1]=parseInt(String(n).substr(1,1));this.customColor[2]=parseInt(String(n).substr(2,1));this.gui.customColor.css("background-color","rgb("+parseInt(this.customColor[0]*255/9)+","+parseInt(this.customColor[1]*255/9)+","+parseInt(this.customColor[2]*255/9)+")");if(n=="000"){this.color=null;this.gui.color.css("background-url",TWDB.images.iconChat);this.gui.color.css("background-position","0px 0px");this.gui.color.css("background-color","transparent")}else{this.color=n;this.gui.color.css("background-url",TWDB.images.iconChat);this.gui.color.css("background-color",t);this.gui.color.css("background-position","-15px 0px")}jQuery("#chatwindow_say").focus()},tell:function(e){var t=this;if(e){if(e===true){var e=this.gui.user.getValue();if(e!=""){this.user=e}else{this.cleartell()}}else{this.user=e}if(this.user!=null){this.gui.tell.children().remove();this.gui.tell.append('<div style="width:15px;height:15px;background:url('+TWDB.images.iconChat+')no-repeat -30px 0px transparent;cursor:pointer;" title="'+e+'" />');this.gui.tell.show();var n=this.history.tell.length;for(var r=0;r<n;r++){var i=this.history.tell.shift();if(i!=e){this.history.tell.push(i)}}this.history.tell.push(e);if(this.history.tell.length>9){this.history.tell.shift()}TWDB.Cache.save("chathistory",this.history)}this.gui.tellBox.hide();jQuery("#chatwindow_say").focus()}else{var s=jQuery('<table style="border:1px solid #333;width:100%;" cellspacing="0px" cellpadding="5px"/>');s.append('<thead><tr><th colspan="3">Verlauf</th></tr></thead>');var o=jQuery("<tr />");for(var r=0;r<this.history.tell.length;r++){var i=this.history.tell[r];var u=jQuery('<td style="text-align:center;"></td>');var a=jQuery("<a>"+i+"</a>");var f=function(e){return function(){t.tell(e)}}(i);a.click(f);u.append(a);var l=jQuery('<div title="delete" style="display:inline-block;margin-left:2px;vertical-align:top;height:16px;width:16px;cursor:pointer;background:url(\''+Game.cdnURL+"/images/icons/delete.png') repeat scroll 0px 0px transparent;\" />");var f=function(e){return function(){var n=t.history.tell.length;for(var r=0;r<n;r++){var i=t.history.tell.shift();if(e!=i){t.history.tell.push(i)}}TWDB.Cache.save("chathistory",t.history);t.gui.tellBox.hide();t.tell()}}(i);l.click(f);u.append(l);o.append(u);if(!((r+1)%3)){s.append(o);o=jQuery("<tr />")}}if(r%3!=0){for(var n=r%3;n<3;n++){o.append("<td />")}s.append(o);o=jQuery("<tr />")}this.gui.user=(new tw2gui.textfield("twdb_chat_user")).setSize(30).setValue(name);this.gui.user.setLabel("Name:");var c=jQuery("<div />").append(s).append('<div style="display:block;height:10px;width:100%;" />').append(this.gui.user.getMainDiv());this.gui.tellBox=new MessageDialog("whisper",c);this.gui.tellBox.addButton("ok",function(){t.tell(true)});this.gui.tellBox.addButton("cancel");this.gui.tellBox.show();setTimeout(function(){t.gui.user.getMainDiv().find("input").focus()},100);this.gui.user.getMainDiv().keydown(function(e){if(e.keyCode==13){t.tell(true)}})}},cleartell:function(){this.user=null;this.gui.tell.hide();jQuery("#chatwindow_say").focus()},inject:function(e,t){if(!e){return e}if(t){return e}var n=this;var i=function(e){if(n.caps){e=e.toUpperCase()}if(n.bold){e=e.replace(/\*/g,"~");e="*"+e+"*"}return e};if(e.substr(0,1)=="/"){r=new RegExp("^\\/(tell|msg)\\s+([^:]+):(.+)$");v=e.match(r);if(v){if(this.color!=null){e="/tell "+v[2]+":/"+this.color+i(v[3])}else{e="/tell "+v[2]+":"+i(v[3])}}return e}e=i(e);if(this.color!=null){e="/"+this.color+e}if(this.user!=null){e="/tell "+this.user+":"+e}return e},showColor:function(e){var t=this;var n=function(e,n){if(n&&t.customColor[e]==9||!n&&t.customColor[e]==0){return}t.customColor[e]+=n?1:-1;t.gui.input.attr("value",String(t.customColor[0])+String(t.customColor[1])+String(t.customColor[2]));if(t.customColor[e]==0){t.gui.plusminus[e].children(".butMinus").css("opacity",.3)}else{t.gui.plusminus[e].children(".butMinus").css("opacity",1)}if(t.customColor[e]==9){t.gui.plusminus[e].children(".butPlus").css("opacity",.3)}else{t.gui.plusminus[e].children(".butPlus").css("opacity",1)}t.gui.customColor.css("background-color","rgb("+parseInt(t.customColor[0]*255/9)+","+parseInt(t.customColor[1]*255/9)+","+parseInt(t.customColor[2]*255/9)+")")};var r=jQuery('<div style="width:42px;height:48px;display:inline-block;vertical-align:top;margin: 6px 5px 6px 5px;" />');this.gui.plusminus=[];for(var i=0;i<3;i++){switch(i){case 0:var s="#f00";break;case 1:var s="#0f0";break;case 2:var s="#00f";break}this.gui.plusminus[i]=jQuery('<div class="tw2gui_plusminus" style="display:inline-block;background-color:'+s+';width:12px;height:46px;padding:1px;"><span class="butPlus" style="cursor:pointer;"></span><span style="width:12px;height:10px;display:inline-block;"></span><span class="butMinus" style="cursor:pointer;"></span></div>');this.gui.plusminus[i].children(".butMinus").click(function(e){return function(){n(e,false)}}(i));this.gui.plusminus[i].children(".butPlus").click(function(e){return function(){n(e,true)}}(i));if(this.customColor[i]==0){this.gui.plusminus[i].children(".butMinus").css("opacity",.3)}if(this.customColor[i]==9){this.gui.plusminus[i].children(".butPlus").css("opacity",.3)}r.append(this.gui.plusminus[i])}r.append(this.gui.plusminus[0]).append(this.gui.plusminus[1]).append(this.gui.plusminus[2]);this.gui.input=jQuery('<input maxLength="3" type="text" value="'+String(t.customColor[0])+String(t.customColor[1])+String(t.customColor[2])+'" style="position: relative; top: -35px; left: 2px;color: rgb(255, 255, 255); font-weight: bold; letter-spacing: 6px; text-shadow: 1px 1px 1px rgb(0, 0, 0); width: 43px; background: none repeat scroll 0pt 0pt transparent; border: medium none; height: 18px; line-height: 18px; margin: 0pt; outline: medium none;" />');this.gui.input.keyup(function(){var e=t.gui.input.attr("value");if(e.length<3){return}if(!e.match(/(\d){3}/)){t.gui.input.attr("value",String(t.customColor[0])+String(t.customColor[1])+String(t.customColor[2]));return}for(var n=0;n<3;n++){t.customColor[n]=parseInt(e.substr(n,1));if(t.customColor[n]==0){t.gui.plusminus[n].children(".butMinus").css("opacity",.3)}else{t.gui.plusminus[n].children(".butMinus").css("opacity",1)}if(t.customColor[n]==9){t.gui.plusminus[n].children(".butPlus").css("opacity",.3)}else{t.gui.plusminus[n].children(".butPlus").css("opacity",1)}}t.gui.customColor.css("background-color","rgb("+parseInt(t.customColor[0]*255/9)+","+parseInt(t.customColor[1]*255/9)+","+parseInt(t.customColor[2]*255/9)+")");t.gui.input.attr("value",String(t.customColor[0])+String(t.customColor[1])+String(t.customColor[2]))});r.append(this.gui.input);var o=jQuery('<div style="height:50px;display:inline-block;vertical-align:top;margin: 5px;" />');var u=new tw2gui.checkbox("*bold*",this.bold?"tw2gui_checkbox_checked":"",function(){t.bold=t.bold?false:true});jQuery(u.getMainDiv()).css("display","block").css("margin-bottom","5px");o.append(u.getMainDiv());var u=new tw2gui.checkbox("CAPITALIZE",this.caps?"tw2gui_checkbox_checked":"",function(){t.caps=t.caps?false:true});o.append(u.getMainDiv());var a=jQuery('<div style="width:160px;height:50px;display:inline-block;vertical-align:top;border: 1px solid #000;padding: 0px;margin: 5px;" />');a.append('<span style="width:140px;height:15px;display:inline-block;text-align:center;padding: 4px 0px 2px 0px;font-size:11px;">history</span>');for(var i=0;i<this.history.color.length;i++){var f=this.history.color[i];var s="rgb("+parseInt(f[0]*255/9)+","+parseInt(f[1]*255/9)+","+parseInt(f[2]*255/9)+")";var l=jQuery('<div style="width:20px;height:20px;display:inline-block;vertical-align:top;margin: 0px 0px 0px 10px;cursor:pointer;background-color:'+s+';" />');l.click(function(){t.switchColor(this);t.gui.colorBox.hide()});a.append(l)}this.tmp_bold=this.bold;this.tmp_caps=this.caps;var c=jQuery("<div />").append(this.gui.customColor).append(r).append(o).append(a);this.gui.colorBox=new MessageDialog("Color",c);this.gui.colorBox.addButton("ok",function(){t.switchColor(t.gui.customColor)});this.gui.colorBox.addButton("cancel",function(){t.bold=t.tmp_bold;t.caps=t.tmp_caps});this.gui.colorBox.show()},showSm:function(){if(this.gui.sm.is(":hidden")){this.gui.sm.show()}else{this.gui.sm.hide()}}});TWDB.GameEnhance=new Object({ready:false,save:{},init:function(){if(this.ready){return}this.MessagesWindow();this.InventoryItemTooltip();this.InventoryItem();this.TraderItemTooltip();this.TraderItem();this.ItemTraderItemTooltip();this.ItemTraderItem();this.MarketWindow();this.changeMinimap();this.showAllJobs();this.chat();this.playerClick();this.skill();this.ready=true},InventoryItemTooltip:function(){if(typeof this.save.InventoryItemTooltip=="undefined"){this.save.InventoryItemTooltip=InventoryItem.prototype.setTooltip.toString()}if(!TWDB.Settings.get("jobBoniTooltip",true)&&!TWDB.Settings.get("sellTip",true)){return}try{var length=this.save.InventoryItemTooltip.length;var newfunction=this.save.InventoryItemTooltip.replace(/this.divMain.mouse/g,"this.elImg.mouse");eval("InventoryItem.prototype.setTooltip = "+newfunction)}catch(e){TWDB.Error.report(e,"manipulate InventoryItem.prototype.setTooltip");eval("InventoryItem.prototype.setTooltip = "+this.save.InventoryItemTooltip)}},InventoryItem:function(){if(typeof this.save.InventoryItem=="undefined"){this.save.InventoryItem=InventoryItem.prototype.getMainDiv.toString()}if(!TWDB.Settings.get("jobBoniTooltip",true)&&!TWDB.Settings.get("sellTip",true)){return}try{var inject="";if(TWDB.Settings.get("jobBoniTooltip",true)){inject+="if(typeof(this.divTWDB)!='undefined'){this.divTWDB.remove();};this.divTWDB=TWDB.ClothCalc.jobBoni.show(this.obj.item_id);this.divMain.append(this.divTWDB);"}if(TWDB.Settings.get("sellTip",true)){inject+="if(typeof(this.divTWDB2)!='undefined'){this.divTWDB2.remove();};this.divTWDB2=TWDB.ClothCalc.sellTip.show(this.obj.item_id);this.divMain.append(this.divTWDB2);"}var newfunction=this.save.InventoryItem.replace("{","{\n"+inject);eval("InventoryItem.prototype.getMainDiv = "+newfunction)}catch(e){TWDB.Error.report(e,"manipulate InventoryItem.prototype.getMainDiv");eval("InventoryItem.prototype.getMainDiv = "+this.save.InventoryItem)}},TraderItemTooltip:function(){if(typeof this.save.TraderItemTooltip=="undefined"){this.save.TraderItemTooltip=TraderItem.prototype.setTooltip.toString()}if(!TWDB.Settings.get("collector",true)&&!TWDB.Settings.get("buyTip",true)){return}try{var length=this.save.TraderItemTooltip.length;var newfunction=this.save.TraderItemTooltip.replace(/this.divMain.mouse/g,"this.elImg.mouse");eval("TraderItem.prototype.setTooltip = "+newfunction)}catch(e){TWDB.Error.report(e,"manipulate TraderItem.prototype.setTooltip");eval("TraderItem.prototype.setTooltip = "+this.save.TraderItemTooltip)}},TraderItem:function(){if(typeof this.save.TraderItem=="undefined"){this.save.TraderItem=TraderItem.prototype.initDisplay.toString()}if(!TWDB.Settings.get("collector",true)&&!TWDB.Settings.get("buyTip",true)){return}try{var length=this.save.TraderItem.length;var newfunction=this.save.TraderItem.substring(0,length-1);if(TWDB.Settings.get("collector",true)){newfunction+="var bagItem=Bag.getItemByItemId(this.obj.item_id);var wearItem = Wear.wear[this.obj.type];if(!bagItem&&!(wearItem && wearItem.obj.item_id == this.obj.item_id)){this.divMain.append(jQuery('<img src=\""+TWDB.images.iconNew+'" title=" this item you have not yet " style="position:absolute;top:-8px;left:-15px;padding:0px;border:0px;margin:0px;" />\'));};'}if(TWDB.Settings.get("buyTip",true)){newfunction+="this.divMain.append(TWDB.ClothCalc.buyTip.show(this.obj.item_id));"}newfunction+="}";eval("TraderItem.prototype.initDisplay = "+newfunction)}catch(e){TWDB.Error.report(e,"manipulate TraderItem.prototype.initDisplay");eval("TraderItem.prototype.initDisplay = "+this.save.TraderItem)}},ItemTraderItemTooltip:function(){if(typeof this.save.ItemTraderItemTooltip=="undefined"){this.save.ItemTraderItemTooltip=ItemTraderItem.prototype.setTooltip.toString()}if(!TWDB.Settings.get("collector",true)&&!TWDB.Settings.get("buyTip",true)){return}try{var length=this.save.ItemTraderItemTooltip.length;var newfunction=this.save.ItemTraderItemTooltip.replace(/this.divMain.mouse/g,"this.elImg.mouse");eval("ItemTraderItem.prototype.setTooltip = "+newfunction)}catch(e){TWDB.Error.report(e,"manipulate ItemTraderItem.prototype.setTooltip");eval("ItemTraderItem.prototype.setTooltip = "+this.save.ItemTraderItemTooltip)}},ItemTraderItem:function(){if(typeof this.save.ItemTraderItem=="undefined"){this.save.ItemTraderItem=ItemTraderItem.prototype.initDisplay.toString()}if(!TWDB.Settings.get("collector",true)&&!TWDB.Settings.get("buyTip",true)){return}try{var length=this.save.ItemTraderItem.length;var newfunction=this.save.ItemTraderItem.substring(0,length-1);if(TWDB.Settings.get("collector",true)){newfunction+="var bagItem=Bag.getItemByItemId(this.obj.item_id);var wearItem = Wear.wear[this.obj.type];if(!bagItem&&!(wearItem && wearItem.obj.item_id == this.obj.item_id)){this.divMain.append(jQuery('<img src=\""+TWDB.images.iconNew+'" title=" this item you have not yet " style="position:absolute;top:-8px;left:-15px;padding:0px;border:0px;margin:0px;" />\'));};'}if(TWDB.Settings.get("buyTip",true)){newfunction+="this.divMain.append(TWDB.ClothCalc.buyTip.show(this.obj.item_id));"}newfunction+="}";eval("ItemTraderItem.prototype.initDisplay = "+newfunction)}catch(e){TWDB.Error.report(e,"manipulate ItemTraderItem.prototype.initDisplay");eval("ItemTraderItem.prototype.initDisplay = "+this.save.ItemTraderItem)}},MarketWindow:function(){if(typeof this.save.MarketWindow=="undefined"){this.save.MarketWindow=MarketWindow.getClearName.toString()}if(!TWDB.Settings.get("collector",true)){return}try{var inject="var bagItem=Bag.getItemByItemId(obj.item_id);var wearItem = Wear.wear[obj.type];var prefix = (!bagItem &&!(wearItem && wearItem.obj.item_id == obj.item_id))?'*':'';";var newfunction=this.save.MarketWindow.replace("{","{\n"+inject);newfunction=newfunction.replace(/return/gi,"return prefix +");eval("MarketWindow.getClearName = "+newfunction)}catch(e){TWDB.Error.report(e,"manipulate MarketWindow.getClearName");eval("MarketWindow.getClearName = "+this.save.MarketWindow)}},changeMinimap:function(){if(!TWDB.Settings.get("sectorMap",true)){return}jQuery("#minimap_micro").css("background-image","url("+TWDB.images.miniMap+")")},showAllJobs:function(){if(typeof this.save.mapData=="undefined"){this.save.mapData=WMap.mapData.check_job_points.toString()}if(!TWDB.Settings.get("showAllJobs",true)){return}try{var JobPointCheck=this.save.mapData.replace(/return 0;/gi,"return 2;");eval("WMap.mapData.check_job_points = "+JobPointCheck);WMinimap.updateJobs();WMap.mapData.update_all_jobs()}catch(e){TWDB.Error.report(e,"manipulate WMap.mapData.check_job_points");eval("WMap.mapData.check_job_points = "+this.save.mapData)}},chat:function(){if(!TWDB.Settings.get("chat",true)){return}if(typeof colorTxt!="undefined"){showMessage("tw-db.info: colorMe Userscript is detected and tw-db chat enhancement is enabled. Please disable colorMe Userscript or disable chat enhancement at tw-db.info settings","tw-db.info chat enhancement",350,170,[["ok"]],false,90001,"warning");return}var e=jQuery("#chatwindow_say_button");var t=e.clone();var n=e.parent();e.remove();t.click(function(){var e=$("chatwindow_say").value;if(e){$("chatwindow_say").value="";chatcontrol.sendText(TWDB.Chat.inject(e))}});n.append(t);var e=jQuery("#chatwindow_say");var t=e.clone();var n=e.parent();e.remove();t.bind("keyup",function(e){switch(e.keyCode){case 13:var t=$("chatwindow_say").value;$("chatwindow_say").value="";chatcontrol.sendText(TWDB.Chat.inject(t));break;case 38:if(e.ctrlKey)window.chatcontrol.channelUp();else window.chatcontrol.historyUp();break;case 40:if(e.ctrlKey)window.chatcontrol.channelDown();else window.chatcontrol.historyDown();break}});n.append(t)},playerClick:function(){if(typeof this.save.playerClick=="undefined"){this.save.playerClick=window.chatcontrol.playerClick.toString()}if(!TWDB.Settings.get("chat",true)){return}try{var inject="\"<a id='chat_pm_permtell'>whisper, permanent</a>\",";var newfunction=this.save.playerClick.replace(/<\/a>",(\s)*chatcontrol/g,'</a>",'+inject+"chatcontrol");inject='("chat_pm_permtell", function () { TWDB.Chat.tell(name);mb.hide();})';var newfunction=newfunction.replace(/\(["']chat_pm_tell["'],/g,inject+'("chat_pm_tell",');eval("window.chatcontrol.playerClick = "+newfunction)}catch(e){TWDB.Error.report(e,"manipulate  window.chatcontrol.playerClick");eval("(function ($) {"+" window.chatcontrol.playerClick = "+this.save.playerClick+"})(jQuery);;")}},MessagesWindow:function(){if(typeof this.save.MessagesWindow=="undefined"){this.save.MessagesWindowOpen=MessagesWindow.open.toString();this.save.MessagesWindowTab=MessagesWindow.showTab.toString()}if(!TWDB.Settings.get("analyser",true)){return}try{var inject="MessagesWindow.window.addTab('Analyser', 'analyser', tabclick).appendToContentPane($('<div class=\"messages-analyser\"/>'));";var newfunction=this.save.MessagesWindowOpen.replace(/MessagesWindow.Telegram.DOM/g,inject+"MessagesWindow.Telegram.DOM");eval("(function ($) {"+"MessagesWindow.open = "+newfunction+"})(jQuery);;")}catch(e){TWDB.Error.report(e,"manipulate MessagesWindow.open");eval("(function ($) {"+"MessagesWindow.open = "+this.save.MessagesWindowOpen+"})(jQuery);;")}try{var inject="case 'analyser':TWDB.ReportAnalyser.show();break;";var newfunction=this.save.MessagesWindowTab.replace(/switch(\s)*\(id\)(\s)*{/g,"switch (id) { "+inject);eval("(function ($) {"+"MessagesWindow.showTab = "+newfunction+"})(jQuery);;")}catch(e){TWDB.Error.report(e,"manipulate MessagesWindow.showTab");eval("(function ($) {"+"MessagesWindow.showTab = "+this.save.MessagesWindowTab+"})(jQuery);;")}},skill:function(){jQuery("#menu_skill a").click(function(){var e=80,t=function(){if(jQuery(".skills_content,.skills_content4Shaman").length!=2){if(e--<=0&&n!=-1){clearInterval(n);n=-1}}else{jQuery(".skills_content,.skills_content4Shaman").find(".butMinus,.butPlus").each(function(){function r(){e=Math.max(Math.round(e*(e/200+1)/(e/133+1)),15);n.click();t=setTimeout(r,e)}function i(){t=setTimeout(r,e)}function s(){if(t!=-1){clearTimeout(t);t=-1}e=400}if(jQuery(this).get(0).twdb_skills)return;jQuery(this).get(0).twdb_skills=true;var e=400,t=-1,n=jQuery(this).css("cursor","pointer");n.mousedown(i).mouseup(s).mouseout(s)})}},n=setInterval(t,50)})}});TWDB.ClothCalc=new Object({uid:"twdb_clothcalc",_type2id:{animal:1,body:2,foot:3,head:4,left_arm:5,neck:6,right_arm:7,yield:8,pants:9,belt:10},_id2type:{1:"animal",2:"body",3:"foot",4:"head",5:"left_arm",6:"neck",7:"right_arm",8:"yield",9:"pants",10:"belt"},_skill2id:{strength:1,flexibility:2,dexterity:3,charisma:4,build:5,punch:6,tough:7,endurance:8,health:9,ride:10,reflex:11,dodge:12,hide:13,swim:14,aim:15,shot:16,pitfall:17,finger_dexterity:18,repair:19,leadership:20,tactic:21,trade:22,animal:23,appearance:24},_id2skill:{1:"strength",2:"flexibility",3:"dexterity",4:"charisma",5:"build",6:"punch",7:"tough",8:"endurance",9:"health",10:"ride",11:"reflex",12:"dodge",13:"hide",14:"swim",15:"aim",16:"shot",17:"pitfall",18:"finger_dexterity",19:"repair",20:"leadership",21:"tactic",22:"trade",23:"animal",24:"appearance"},_class2id:{greenhorn:1,adventurer:2,duelist:3,worker:4,soldier:5},ready:false,data:{skills:{},items:{},jobs:{},custom:{}},calcdata:{skills:{},items:{},jobs:{},custom:{},animals:[],buyTip:{},jobBoni:{},used:{}},loaded:false,up2date:true,gui:{job:{},custom:{}},init:function(){if(this.ready){return}var e=this;this.jobs.setParent(this);this.customs.setParent(this);this.bag.setParent(this);this.buyTip.setParent(this);this.jobBoni.setParent(this);this.sellTip.setParent(this);this.jobSearch.setParent(this);this.favoriteJobs.setParent(this);var t=window.addEventListener?"addEventListener":"attachEvent";var n=window[t];var r=t=="attachEvent"?"onmessage":"message";n(r,function(t){if(t.origin!=="http://"+TWDB.script.url){return}try{var n=jQuery.parseJSON(t.data)}catch(t){(new UserMessage(TWDB.script.url+": empty or corrupt data recieved",UserMessage.TYPE_ERROR)).show()}if(typeof n.error!="undefined"){(new UserMessage(TWDB.script.url+": "+n.error,UserMessage.TYPE_ERROR)).show()}else if(typeof n.message!="undefined"){(new UserMessage(TWDB.script.url+": "+n.message,UserMessage.TYPE_SUCCESS)).show();e.handleTWDBData(n.data)}},false);this.gui.copyright=jQuery('<div style="position:absolute;bottom:0px;left:0px;height:15px;display:block;font-size:10px;color:#000000;">.:powered by tw-db team:. | <a href="http://tw-db.info" style="font-weight:normal;color:#000000;" target="_blank">.:tw-db.info:.</a> | '+(TWDB.script.version/100/1+" rev. "+TWDB.script.revision)+"</div>");this.gui.cache=jQuery('<div style="position:absolute;top:10px;right:8px;width:20px;height:20px;cursor:pointer;" />');this.gui.bag=jQuery('<div style="position:absolute;top:95px;left:1px;width:252px;height:186px;" />');if(!Bag.loaded){Bag.loadItems()}this.BagInt=window.setInterval(function(){e.finishInit()},100);this.data.custom=TWDB.Settings.get("custom",{1:{id:1,type:"speed",para:{},name:"Speed"},2:{id:2,type:"custom",para:{9:1},name:"max Health"},3:{id:3,type:"regen",para:{},name:"Health Regeneration"},4:{id:4,type:"fort",para:{att:200,def:0,health:100,type:0},name:"Fortbattle Attacker (Att)"},5:{id:5,type:"fort",para:{att:0,def:200,health:100,type:0},name:"Fortbattle Attacker (Def)"},6:{id:6,type:"fort",para:{att:200,def:0,health:100,type:1},name:"Fortbattle Defender (Att)"},7:{id:7,type:"fort",para:{att:0,def:200,health:100,type:1},name:"Fortbattle Defender (Def)"},8:{id:8,type:"duel",para:{12:1,15:1,16:1,24:1},name:"Range Dueler (Att)"},9:{id:9,type:"duel",para:{12:1,15:1,16:1,21:1},name:"Range Dueler (Def)"},10:{id:10,type:"duel",para:{6:1,7:1,11:1,15:1},name:"Melee Dueler"}});if(TWDB.script.version+" "+TWDB.script.revision==TWDB.Cache.load("version")){var i=TWDB.Cache.load("calcdata");if(typeof this.calcdata=="object"||this.calcdata!=null){this.calcdata=i}}else{TWDB.Cache.save("calcdata",this.calcdata)}TWDB.Cache.save("version",TWDB.script.version+" "+TWDB.script.revision);this.buyTip.init();this.favoriteJobs.init()},finishInit:function(){if(typeof this.BagInt=="undefined"){return}if(Bag.loaded){window.clearInterval(this.BagInt);delete this.BagInt;this.loaded=true;this.ready=true;this.addButton()}},addButton:function(){if(this.loaded==false){if(typeof this.gui.button=="undefined"){this.gui.button=jQuery('<div style="position:absolute;left:240px;top:-15px;cursor:pointer;display:block;width:32px;heigth:32px;padding:0px;margin:0px;border:0px;" />');jQuery("#footer_menu_left div:last-child").append(this.gui.button)}this.gui.button.children().remove();this.gui.button.append('<img src="'+TWDB.images.ClothCalcButton+'" title="<b> tw-db.info ClothCalc is initializing</b>" style="opacity:0.5" />')}else{if(typeof this.gui.button=="undefined"){this.gui.button=jQuery('<div style="position:absolute;left:240px;top:-15px;cursor:pointer;display:block;width:32px;heigth:32px;padding:0px;margin:0px;border:0px;" />');jQuery("#footer_menu_left div:last-child").append(this.gui.button)}this.gui.button.children().remove();var e=this;this.gui.button.append('<img src="'+TWDB.images.ClothCalcButton+'" title="<b> tw-db.info ClothCalc </b>"  />').click(function(){e.open()})}},checkSkill:function(){for(var e in this.data.skills){if(typeof this.calcdata.skills[e]=="undefined"){return true}if(this.data.skills[e].val!=this.calcdata.skills[e].val){return true}}return false},checkItems:function(){for(var e in this.data.items){if(typeof this.calcdata.items[e]=="undefined"){return true}}for(var e in this.calcdata.items){if(typeof this.data.items[e]=="undefined"){return true}}return false},checkCustom:function(){var e=0;for(var e in this.data.custom){if(typeof this.calcdata.custom[e]=="undefined"){return true}if(this.calcdata.custom[e].name!=this.data.custom[e].name){return true}for(var t in this.data.custom[e].para){if(typeof this.calcdata.custom[e].para[t]=="undefined"){return true}if(this.calcdata.custom[e].para[t]!=this.data.custom[e].para[t]){return true}}}if(typeof this.calcdata.custom[Number(e)+1]!="undefined"){return true}return false},checkCache:function(){var e=this.checkItems();var t=this.checkSkill();var n=this.checkCustom();this.gui.cache.children().remove();if(e||t||n){var r="the Data is outdated, click for Update";if(e){r+=" [Inventory]"}if(t){r+=" [Skill]"}if(n){r+=" [Custom skills]"}var i=jQuery('<div title="'+r+'" style="position:absolute;top:0px;right:0px;width:20px;height:20px;background: url('+TWDB.images.iconData+')no-repeat 0px 0px;" />');this.up2date=false}else{var i=jQuery('<div title="the Data is up to Date" style="position:absolute;top:0px;right:0px;width:20px;height:20px;background: url('+TWDB.images.iconData+')no-repeat -20px 0px;" /></div>');this.up2date=true}this.gui.cache.append(i);var s=this;i.click(function(){s.getTWDBData()})},open:function(){if(this.loaded==false){return}if(wman.getById(this.uid)){return}var e=this;if(typeof this.eventOpen!="undefined"){TWDB.Eventer.remove("getGameData",this.eventOpen)}var t=0;for(var n in this.calcdata.jobs){t++;break}if(t==0){this.eventOpen=TWDB.Eventer.set("getGameData",function(){e.getTWDBData()},1);this.up2date=false;this.getGameData()}else{this.eventOpen=TWDB.Eventer.set("getGameData",function(){e.finishOpening()},1);this.getGameData()}var r=wman.getById(Inventory.uid);Wear.open();var i=wman.getById(Inventory.uid);if(typeof r=="undefined"&&typeof i!="undefined"){i.fireEvent(TWE("WINDOW_CLOSE"),i)}this.jobs.selected=0;this.gui.job.sort=jQuery('<div style="position:absolute;top:10px;left:0px;height:20px;" />').append('<img src="'+TWDB.images.iconName+'" title=" order by name " alt=" order by name " onclick="javascript:TWDB.ClothCalc.jobs.order(\'name\')" style="margin:0px 2px 0px 2px;cursor:pointer;" />').append('<img src="'+TWDB.images.iconExperience+'" title=" order by experience " alt=" order by experience " onclick="javascript:TWDB.ClothCalc.jobs.order(\'experience\')" style="margin:0px 2px 0px 2px;cursor:pointer;" />').append('<img src="'+TWDB.images.iconDollar+'" title=" order by wages " alt=" order by wages " onclick="javascript:TWDB.ClothCalc.jobs.order(\'wages\')" style="margin:0px 2px 0px 2px;cursor:pointer;" />').append('<img src="'+TWDB.images.iconLuck+'" title=" order by luck " alt=" order by luck " onclick="javascript:TWDB.ClothCalc.jobs.order(\'luck\')" style="margin:0px 2px 0px 2px;cursor:pointer;" />').append('<img src="'+TWDB.images.iconDanger+'" title=" order by danger " alt=" order by danger " onclick="javascript:TWDB.ClothCalc.jobs.order(\'danger\')" style="margin:0px 2px 0px 2px;cursor:pointer;" />').append('<img src="'+TWDB.images.iconLaborpoints+'" title=" order by workpoints " alt=" order by workpoints " onclick="javascript:TWDB.ClothCalc.jobs.order(\'laborpoints\')" style="margin:0px 2px 0px 2px;cursor:pointer;" />');this.gui.job.title=jQuery('<div style="position:absolute;top:36px;left:0px;width:190px;height:19px;font-weight:bold;text-align:center;">Select job here >></div>');this.gui.job.favorite=jQuery("<div style=\"position:absolute;top:15px;right:50px;width:20px;height:20px;background:url('"+TWDB.images.iconFavorite+'\') no-repeat scroll 0 0 transparent;cursor:pointer;display:none;" title=" Add this job to favorites " />');this.gui.job.search=jQuery("<div style=\"position:absolute;top:35px;right:50px;width:20px;height:20px;background:url('"+TWDB.images.iconSearch+'\') no-repeat scroll 0 0 transparent;cursor:pointer;display:none;" title=" Find this job on the map " />');this.gui.job.checkbox=new tw2gui.checkbox("",this.jobs.alljobs?"":"tw2gui_checkbox_checked",function(){if(this.isSelected()){e.jobs.alljobs=false;e.jobs.createSelectbox()}else{e.jobs.alljobs=true;e.jobs.createSelectbox()}});this.gui.job.checkbox.setTooltip("Hide Jobs you could not do");this.gui.job.checkbox.getMainDiv().css("position","absolute").css("top","35px").css("right","30px");this.gui.job.button=jQuery('<div style="position:absolute;top:35px;right:4px;width:26px;height:20px;background:url(\'/images/window/character/title_editbtn.jpg\') no-repeat scroll 0 0 transparent;cursor:pointer;" title=" Select job here " />');this.gui.job.selectbox=new tw2gui.selectbox;this.gui.job.selectbox.setPosition(255,34).setWidth(300).addListener(function(t){e.jobs.switch(t)}.bind(this));jQuery(this.gui.job.selectbox.elContent).css("max-height","300px");this.gui.job.skills=jQuery('<div style="position:absolute;top:60px;left:1px;width:252px;height:30px;display:block;" />');this.gui.job.mainDiv=jQuery('<div style="position:absolute;top:0px;left:0px;height:100%;width:100%;" />');this.gui.job.mainDiv.append(this.gui.job.sort);this.gui.job.mainDiv.append(this.gui.job.title);this.gui.job.mainDiv.append(this.gui.job.favorite);this.gui.job.mainDiv.append(this.gui.job.search);this.gui.job.mainDiv.append(this.gui.job.checkbox.getMainDiv());this.gui.job.mainDiv.append(this.gui.job.button);this.gui.job.mainDiv.append(this.gui.job.selectbox.getMainDiv());this.gui.job.mainDiv.append(this.gui.job.skills);this.gui.job.button.click(function(){if("block"!=e.gui.job.selectbox.getMainDiv().css("display")){e.jobs.createSelectbox()}e.gui.job.selectbox.toggleDisplay()}.bind(this));this.gui.job.search.click(function(){e.jobSearch.show()}.bind(this));this.gui.job.favorite.click(function(){e.favoriteJobs.addFavorite()}.bind(this));this.gui.job.searchDiv=jQuery("<div />");this.customs.selected=0;this.gui.custom.title=jQuery('<div style="position:absolute;top:36px;left:0px;width:210px;height:19px;font-weight:bold;text-align:center;">Select job here >></div>');this.gui.custom.settings=jQuery('<div title="settings" style="position:absolute;top:35px;right:30px;width:20px;height:20px;background:url('+TWDB.images.iconSetting+');cursor:pointer;" />');this.gui.custom.settings.click(function(){e.customs.showConfig()});this.gui.custom.button=jQuery('<div style="position:absolute;top:35px;right:4px;width:26px;height:20px;background:url(\'/images/window/character/title_editbtn.jpg\') no-repeat scroll 0 0 transparent;cursor:pointer;" title=" Select job here " />');this.gui.custom.selectbox=new tw2gui.selectbox;this.gui.custom.selectbox.setPosition(255,34).setWidth(300).addListener(function(t){e.customs.switch(t)}.bind(this));jQuery(this.gui.custom.selectbox.elContent).css("max-height","300px");this.gui.custom.skills=jQuery('<div style="position:absolute;top:60px;left:1px;width:252px;height:30px;display:block;" />');this.gui.custom.mainDiv=jQuery('<div style="position:absolute;top:0px;left:0px;height:100%;width:100%;" />').hide();this.gui.custom.mainDiv.append(this.gui.custom.title);this.gui.custom.mainDiv.append(this.gui.custom.settings);this.gui.custom.mainDiv.append(this.gui.custom.button);this.gui.custom.mainDiv.append(this.gui.custom.selectbox.getMainDiv());this.gui.custom.mainDiv.append(this.gui.custom.skills);this.gui.custom.button.click(function(){e.gui.custom.selectbox.toggleDisplay()}.bind(this));this.gui.bag.children().remove();var s=function(t,n){e.showTab(t,n)};this.gui.window=wman.open(this.uid,null,"noreload").setMiniTitle("TWDB Cloth Calc").setTitle("tw-db.info Cloth Calc").addTab("Job","Jobs",s).addTab("Custom skills","Custom",s).appendToContentPane(this.gui.job.mainDiv).appendToContentPane(this.gui.custom.mainDiv).appendToContentPane(this.gui.cache).appendToContentPane(this.gui.bag).appendToContentPane(this.gui.copyright);this.gui.window.showLoader();if(TWDB.Settings.get("clothPos","left")=="right"){var o=Wear.window.divMain.offsetLeft+Wear.window.divMain.offsetWidth-15}else{var o=Wear.window.divMain.offsetLeft-295}this.gui.window.restoreAppearance({h:410,w:310,x:o});return},finishOpening:function(){this.jobs.calc();this.jobs.sort.order*=-1;this.jobs.order(this.jobs.sort.type);this.customs.createSelectbox();if(typeof this.gui.window!="undefined"){this.checkCache();delete this.eventOpen;this.gui.window.hideLoader()}},showTab:function(e,t){this.gui.window.activateTab(t);this.gui.window.showLoader();this.gui.bag.children().remove();switch(t){case"Jobs":this.gui.custom.mainDiv.hide();if(this.jobs.selected!=0){this.jobs.switch(this.jobs.selected)}this.gui.job.mainDiv.show();break;case"Custom":this.gui.job.mainDiv.hide();if(this.customs.selected!=0){this.customs.switch(this.customs.selected)}this.gui.custom.mainDiv.show();break}this.gui.window.hideLoader()},getGameData:function(e){var t=this;if(typeof e=="undefined"){this.getState={skill:false,items:false};TWDB.Eventer.set("getSkill",function(){t.getGameData("skill")},1);TWDB.Eventer.set("getItems",function(){t.getGameData("items")},1);this.getSkill();this.getItems()}else{this.getState[e]=true;var n=true;for(var r in this.getState){if(!this.getState[r]){n=false;break}}if(n){delete this.getState;TWDB.Eventer.trigger("getGameData")}}},getSkill:function(e){if(typeof e=="undefined"){var t=this;setTimeout(function(){t.getSkill(Character.skills)},10);return}else{this.data.skills={};for(var n in Character.skills){var r=this._skill2id[n];this.data.skills[r]={id:r,val:Character.skills[n]}}TWDB.Eventer.trigger("getSkill")}},getItems:function(e){if(typeof e=="undefined"){var t=this;jQuery.post("game.php?window=inventory",{},function(e){t.getItems(e)},"json");return}else{this.data.items={};for(var n=0;n<e.wear.length;n++){var r=ItemManager.get(e.wear[n]);if(!this.isItemUsable(r.item_id)){continue}this.data.items[r.item_id]={id:r.item_id}}for(var i in Bag.items){for(var n in Bag.items[i]){var r=ItemManager.get(Number(n));if(!this.isItemUsable(r.item_id)){continue}this.data.items[r.item_id]={id:r.item_id}}}TWDB.Eventer.trigger("getItems")}},isItemUsable:function(e){var t=ItemManager.get(e);if(typeof t=="undefined"){return false}var n=false;if(!this.itemHasBonus(t)){return false}if(t.characterClass!==null&&t.characterClass!==Character.characterClass){return false}if(t.characterSex!==null&&t.characterSex!==Character.characterSex){return false}if(t.level!==null&&t.level>Character.level+Character.itemLevelRequirementDecrease["all"]+(typeof Character.itemLevelRequirementDecrease[t.type]!="undefined"?Character.itemLevelRequirementDecrease[t.type]:0)){return false}return true},itemHasBonus:function(e){if(e.type=="left_arm"||e.type=="right_arm"){return true}if(typeof e.set!="undefined"&&e.set!=null){return true}if(typeof e.speed!="undefined"&&e.speed!=null){return true}if(typeof e.bonus=="undefined"){return false}if(typeof e.bonus.skills!="undefined"){for(var t in e.bonus.skills){if(!jQuery.isFunction(e.bonus.skills[t])){return true}}}if(typeof e.bonus.attributes!="undefined"){for(var t in e.bonus.attributes){if(!jQuery.isFunction(e.bonus.attributes[t])){return true}}}if(typeof e.bonus.fortbattle!="undefined"){for(var t in e.bonus.fortbattle){if(e.bonus.fortbattle[t]>0){return true}}}if(typeof e.bonus.fortbattlesector!="undefined"){for(var t in e.bonus.fortbattlesector){if(e.bonus.fortbattle[t]>0){return true}}}return false},getTWDBData:function(){function o(e,t){return e["speed"]>t["speed"]?true:false}if(this.up2date){return}var e={};var t="";var n="";var r=[];for(var i in this.data.items){var s=ItemManager.get(i);if(typeof e[s.type]=="undefined"){e[s.type]=""}if(!this.isItemUsable(s.item_id)){continue}if(s.type=="animal"){r.push({id:s.item_id,speed:s.speed})}e[s.type]+=s.item_id+",";if(s.set!==null){n+=s.item_id+","}}r.sort(o);this.calcdata.animals=r;for(var u in this._type2id){if(t!=""){t+=";"}t+=this._type2id[u]+":";if(typeof e[u]=="undefined"){continue}t+=e[u]}var a="";for(var i in this.data.skills){a+=this.data.skills[i].id+":"+this.data.skills[i].val+";"}var f=jQuery.extend(true,{},this.data.custom);for(var i in f){if(f[i].type=="fort"||f[i].type=="regen"){f[i]["para"]["level"]=Number(Character.level);f[i]["para"]["class"]=Number(this._class2id[Character.characterClass]);f[i]["para"]["premium"]=Number(PremiumBoni.hasBonus("regen"))+","+Number(PremiumBoni.hasBonus("automation"))+","+Number(PremiumBoni.hasBonus("money"))+","+Number(PremiumBoni.hasBonus("character"))}}var l='<form name="TWDB_CC_Form" action="http://'+TWDB.script.url+'/ingame_calc.php" method="post">';l+='<input style="display:none" type="text" name="items" value="'+t+'" />';l+='<input style="display:none" type="text" name="setitems" value="'+n+'" />';l+='<input style="display:none" type="text" name="skill" value="'+a+'" />';l+='<input style="display:none" type="text" name="nick" value="'+Character.name+'" />';l+='<input style="display:none" type="text" name="worldfull" value="'+window.location.host+'" />';l+='<input style="display:none" type="text" name="custom" value=\''+JSON.stringify(f).replace(/'/g,"\\'")+"' />";l+="</form>";l+='</form><script type="text/javascript">document.forms.TWDB_CC_Form.submit();</script></body>';if(typeof this.iframe!="undefined"){jQuery(this.iframe).remove()}this.iframe=jQuery('<iframe width="1px" height="1px" marginwidth="0" marginheight="0" hspace="0" vspace="0" frameborder="0" scrolling="no" allowtransparency="false" style="display:none;" />');jQuery("body").append(this.iframe);var c=this.iframe.get(0);var h=c.contentWindow||c.contentDocument;if(h.document)h=h.document;h.write(l)},handleTWDBData:function(e){this.calcdata.items=jQuery.extend(true,{},this.data.items);this.calcdata.skills=jQuery.extend(true,{},this.data.skills);this.calcdata.time=e.time;this.calcdata.jobs=e.jobs;this.calcdata.custom=e.custom;this.calcdata.buyTip={};this.calcdata.jobBoni={};this.calcdata.used={};try{this.jobs.init()}catch(t){(new UserMessage("tw-db.info cloth calculation script has encountered an unknown error! Please, provide us with this text:; handle Jobs; "+JSON.stringify(t),UserMessage.TYPE_ERROR)).show()}try{this.customs.init()}catch(t){(new UserMessage("tw-db.info cloth calculation script has encountered an unknown error! Please, provide us with this text:; handle Customs; "+JSON.stringify(t),UserMessage.TYPE_ERROR)).show()}try{this.buyTip.init()}catch(t){(new UserMessage("tw-db.info cloth calculation script has encountered an unknown error! Please, provide us with this text:; handle buyTip; "+JSON.stringify(t),UserMessage.TYPE_ERROR)).show()}try{this.sellTip.init()}catch(t){(new UserMessage("tw-db.info cloth calculation script has encountered an unknown error! Please, provide us with this text:; handle sellTip; "+JSON.stringify(t),UserMessage.TYPE_ERROR)).show()}TWDB.Cache.save("calcdata",this.calcdata);this.finishOpening()},jobs:new Object({selected:0,alljobs:false,sort:{list:[],type:"name",order:1},setParent:function(e){this.parent=e},init:function(){var e=[];for(var t in JobList){e[JobList[t].shortName]=t}for(var t in this.parent.calcdata.jobs){if(typeof e[this.parent.calcdata.jobs[t].short_name]=="undefined"){if(this.parent.calcdata.jobs[t].short_name=="construction"){this.parent.calcdata.jobs[t].name="Construction";this.parent.calcdata.jobs[t].formular=InternalJobList[0].formular;this.parent.calcdata.jobs[t].gameid=0;this.parent.calcdata.jobs[t].laborpoints.current=0}continue}this.parent.calcdata.jobs[t].name=JobList[e[this.parent.calcdata.jobs[t].short_name]].name;this.parent.calcdata.jobs[t].formular=JobList[e[this.parent.calcdata.jobs[t].short_name]].formular;this.parent.calcdata.jobs[t].gameid=e[this.parent.calcdata.jobs[t].short_name];this.parent.calcdata.jobs[t].laborpoints.current=0}this.calc()},calc:function(){var skills=jQuery.extend(true,{},Character.skills);var lp=0;var premium=Number(PremiumBoni.hasBonus("money"));for(var jobid in this.parent.calcdata.jobs){this.parent.calcdata.jobs[jobid].laborpoints.skills=eval(this.parent.calcdata.jobs[jobid].formular);this.parent.calcdata.jobs[jobid].laborpoints.sum=this.parent.calcdata.jobs[jobid].laborpoints.cloth;this.parent.calcdata.jobs[jobid].laborpoints.sum+=this.parent.calcdata.jobs[jobid].laborpoints.skills;this.parent.calcdata.jobs[jobid].laborpoints.sum-=this.parent.calcdata.jobs[jobid].difficulty;lp=this.parent.calcdata.jobs[jobid].laborpoints.sum>0?this.parent.calcdata.jobs[jobid].laborpoints.sum:0;this.parent.calcdata.jobs[jobid].values=[];this.parent.calcdata.jobs[jobid].values.experience=Number(this.parent.calcdata.jobs[jobid].experience)*2;this.parent.calcdata.jobs[jobid].values.danger=Number(this.parent.calcdata.jobs[jobid].danger);this.parent.calcdata.jobs[jobid].values.wages=Math.round((.9*this.parent.calcdata.jobs[jobid].wages+5)*Math.pow(lp+1,.2)*(2+premium));this.parent.calcdata.jobs[jobid].values.luck1=Math.round((.9*this.parent.calcdata.jobs[jobid].luck+5)*Math.pow(lp+1,.2)*(5+premium*2.5));this.parent.calcdata.jobs[jobid].values.luck2=Math.round((.9*this.parent.calcdata.jobs[jobid].luck+5)*Math.pow(lp+1,.2)*(15+premium*7.5))}},order:function(e){function s(e,t){return e["value"]>t["value"]?i:-i}function o(e,t){return e["value"]*1>t["value"]*1?i:-i}var t=[];if(e==this.sort.type){this.sort.order*=-1}else{this.sort.order=-1}this.sort.list=[];for(var n in this.parent.calcdata.jobs){switch(e){case"name":var r=this.parent.calcdata.jobs[n].name;if(e!=this.sort.type){this.sort.order*=-1}break;case"luck":var r=this.parent.calcdata.jobs[n].values.luck1;break;case"laborpoints":var r=this.parent.calcdata.jobs[n].laborpoints.sum;break;case"experience":var r=this.parent.calcdata.jobs[n].values.experience;break;case"wages":var r=this.parent.calcdata.jobs[n].values.wages;break;case"danger":var r=this.parent.calcdata.jobs[n].danger;if(e!=this.sort.type){this.sort.order*=-1}break;default:var r=this.parent.calcdata.jobs[n].name;this.sort.type="name";this.sort.order=1;break}t.push({id:n,value:r})}this.sort.type=e;var i=this.sort.order;if(e=="name"){t.sort(s)}else{t.sort(o)}for(var u=0;u<t.length;u++){this.sort.list.push(t[u]["id"])}this.createSelectbox()},createSelectbox:function(){this.parent.gui.job.selectbox.elContent.empty();this.parent.gui.job.selectbox.value=null;this.parent.gui.job.selectbox.items=[];for(var i=0;i<this.sort.list.length;i++){var jobid=this.sort.list[i];if(!this.alljobs&&this.parent.calcdata.jobs[jobid].laborpoints.sum<0){continue}var name=this.parent.calcdata.jobs[jobid].name;var skills=jQuery.extend(true,{},Character.bonus_skills);this.parent.calcdata.jobs[jobid].laborpoints.current=eval(this.parent.calcdata.jobs[jobid].formular)+WearSet.getWorkPointAddition(this.parent.calcdata.jobs[jobid].gameid)-this.parent.calcdata.jobs[jobid].difficulty;name+=" ["+this.parent.calcdata.jobs[jobid].laborpoints.current+"/"+this.parent.calcdata.jobs[jobid].laborpoints.sum+"] ";switch(this.sort.type){case"luck":name+="$"+this.parent.calcdata.jobs[jobid].values.luck1+" - "+"$"+this.parent.calcdata.jobs[jobid].values.luck2;break;case"laborpoints":name+=this.parent.calcdata.jobs[jobid].laborpoints.sum;break;case"experience":name+=this.parent.calcdata.jobs[jobid].values.experience+"exp";break;case"wages":name+="$"+this.parent.calcdata.jobs[jobid].values.wages;break;case"danger":name+=this.parent.calcdata.jobs[jobid].danger+"!";break}if(this.parent.calcdata.jobs[jobid].laborpoints.sum<0){name='<span style="color:red;">'+name+"</span>"}else{if(this.parent.calcdata.jobs[jobid].laborpoints.current<0){name='<span style="color:yellow;">'+name+"</span>"}}this.parent.gui.job.selectbox.addItem(jobid,name)}if(typeof this.parent.calcdata.jobs[this.selected]!="undefined"){var string=this.parent.calcdata.jobs[this.selected].name.substring(0,18)+" ["+this.parent.calcdata.jobs[this.selected].laborpoints.current+"/"+this.parent.calcdata.jobs[this.selected].laborpoints.sum+"]";this.parent.gui.job.title.html(string)}},"switch":function(e){if(typeof this.parent.calcdata.jobs[e]=="undefined"||typeof this.parent.calcdata.jobs[e].cloth=="undefined"){return}var t=this.parent;if(this.parent.calcdata.jobs[e].gameid!=0){t.gui.job.search.show();t.gui.job.favorite.show()}else{t.gui.job.search.hide();t.gui.job.favorite.hide()}document.getElementById("minimap_job_id").value=this.parent.calcdata.jobs[e].gameid;WMinimap.update();this.selected=e;var n=this.parent.calcdata.jobs[this.selected].name.substring(0,18)+" ["+this.parent.calcdata.jobs[this.selected].laborpoints.current+"/"+this.parent.calcdata.jobs[this.selected].laborpoints.sum+"]";this.parent.gui.job.title.html(n);this.parent.bag.showItems(this.parent.calcdata.jobs[e].cloth,"jobs");this.parent.gui.job.skills.children().remove();var r=this.parent.calcdata.jobs[e].formular.replace(/ /g,"");var i=r.split("+");for(var s=0;s<i.length;s++){var o=i[s].split("*");if(o.length>1&&Number(o[0])==o[0]){for(var u=0;u<o[0];u++){var a=o[1].split(".");if(typeof a[1]!="undefined"){var f=jQuery('<div style="float:left;widht;30px;heigth:30px;" />');this.parent.gui.job.skills.append(f.append(this.parent.getSkillImg(a[1],30)))}}}}}}),customs:new Object({selected:0,setParent:function(e){this.parent=e},init:function(){for(var e in this.parent.calcdata.custom){try{var t=this.parent.calcdata.custom[e];switch(t.type){case"speed":var n=0;var r=0;if(typeof t.cloth[1]!="undefined"){if(typeof t.cloth[1]["other"][1]!="undefined"){n=t.cloth[1]["other"][1]}}if(typeof t.boni.other[1]!="undefined"){r=t.boni.other[1]}r-=n;n+=typeof t.boni.skill[2]!="undefined"?t.boni.skill[2]:0;n+=typeof t.boni.skill[10]!="undefined"?t.boni.skill[10]:0;n+=Character.skills.ride;t.skills=["ride"];t.formular="Math.round(Character.default_speed / (Character.speed) * 100) + '%'";t.laborpoints=Math.round((100+n)*(1+r/100))+"%";break;case"regen":t.skills=["health"];t.formular="";t.laborpoints="";break;case"fort":if(t.para.type==0){var i="Character.get_max_health()";var s="Math.round((25 + Math.pow((skills.leadership * 1 + (Character.characterClass=='soldier'?(PremiumBoni.hasBonus('character')?0.5:0.25):0)), 0.4) + Math.pow(skills.aim, 0.4) + Math.pow(skills.endurance, 0.4))*100)/100";var o="Math.round((10 + Math.pow((skills.leadership * 1 + (Character.characterClass=='soldier'?(PremiumBoni.hasBonus('character')?0.5:0.25):0)), 0.4) + Math.pow(skills.dodge, 0.4) + Math.pow(skills.endurance, 0.4))*100)/100";t.formular=i+"+'|'+"+s+"+'|'+"+o;var u={};u.aim=Character.skills.aim+(typeof t.boni.skill[3]!="undefined"?t.boni.skill[3]:0)+(typeof t.boni.skill[15]!="undefined"?t.boni.skill[15]:0);u.endurance=Character.skills.endurance+(typeof t.boni.skill[1]!="undefined"?t.boni.skill[1]:0)+(typeof t.boni.skill[8]!="undefined"?t.boni.skill[8]:0);u.dodge=Character.skills.dodge+(typeof t.boni.skill[2]!="undefined"?t.boni.skill[2]:0)+(typeof t.boni.skill[12]!="undefined"?t.boni.skill[12]:0);u.leadership=Character.skills.leadership+(typeof t.boni.skill[4]!="undefined"?t.boni.skill[4]:0)+(typeof t.boni.skill[20]!="undefined"?t.boni.skill[20]:0);u.health=Character.skills.health+(typeof t.boni.skill[1]!="undefined"?t.boni.skill[1]:0)+(typeof t.boni.skill[9]!="undefined"?t.boni.skill[9]:0);var i=100+(Character.level-1)*Character.lifePointPerHealthSkill+u.health*(Character.lifePointPerHealthSkill+Character.lifePointPerHealthSkillBonus)+" | ";i+=Math.round((25+Math.pow(u.leadership*1+(Character.characterClass=="soldier"?PremiumBoni.hasBonus("character")?.5:.25:0),.4)+Math.pow(u.aim,.4)+Math.pow(u.endurance,.4))*100)/100+" | ";i+=Math.round((10+Math.pow(u.leadership*1+(Character.characterClass=="soldier"?PremiumBoni.hasBonus("character")?.5:.25:0),.4)+Math.pow(u.dodge,.4)+Math.pow(u.endurance,.4))*100)/100}else{var i="Character.get_max_health()";var s="Math.round((25 + Math.pow((skills.leadership * 1 + (Character.characterClass=='soldier'?(PremiumBoni.hasBonus('character')?0.5:0.25):0)), 0.4) + Math.pow(skills.aim, 0.4) + Math.pow(skills.hide, 0.4))*100)/100";var o="Math.round((10 + Math.pow((skills.leadership * 1 + (Character.characterClass=='soldier'?(PremiumBoni.hasBonus('character')?0.5:0.25):0)), 0.4) + Math.pow(skills.dodge, 0.4) + Math.pow(skills.hide, 0.4))*100)/100";t.formular=i+"+'|'+"+s+"+'|'+"+o;var u={};u.aim=Character.skills.aim+(typeof t.boni.skill[3]!="undefined"?t.boni.skill[3]:0)+(typeof t.boni.skill[15]!="undefined"?t.boni.skill[15]:0);u.hide=Character.skills.hide+(typeof t.boni.skill[2]!="undefined"?t.boni.skill[2]:0)+(typeof t.boni.skill[13]!="undefined"?t.boni.skill[13]:0);u.dodge=Character.skills.dodge+(typeof t.boni.skill[2]!="undefined"?t.boni.skill[2]:0)+(typeof t.boni.skill[12]!="undefined"?t.boni.skill[12]:0);u.leadership=Character.skills.leadership+(typeof t.boni.skill[4]!="undefined"?t.boni.skill[4]:0)+(typeof t.boni.skill[20]!="undefined"?t.boni.skill[20]:0);u.health=Character.skills.health+(typeof t.boni.skill[1]!="undefined"?t.boni.skill[1]:0)+(typeof t.boni.skill[9]!="undefined"?t.boni.skill[9]:0);var i=100+(Character.level-1)*Character.lifePointPerHealthSkill+u.health*(Character.lifePointPerHealthSkill+Character.lifePointPerHealthSkillBonus)+" | ";i+=Math.round((25+Math.pow(u.leadership*1+(Character.characterClass=="soldier"?PremiumBoni.hasBonus("character")?.5:.25:0),.4)+Math.pow(u.aim,.4)+Math.pow(u.hide,.4))*100)/100+" | ";i+=Math.round((10+Math.pow(u.leadership*1+(Character.characterClass=="soldier"?PremiumBoni.hasBonus("character")?.5:.25:0),.4)+Math.pow(u.dodge,.4)+Math.pow(u.hide,.4))*100)/100}t.skills=["health","attacker","defender"];t.laborpoints=i;break;case"duel":t.skills=[];t.formular="";var i=0;for(var a in t.para){var f=Math.floor(a/5);if(typeof t.boni.skill[a]!="undefined"){i+=t.boni.skill[a]}if(typeof t.boni.skill[f]!="undefined"){i+=t.boni.skill[f]}if(typeof this.parent._id2skill[a]!="undefined"){if(t.formular.length>0){t.formular+=" + "}t.formular+="skills."+this.parent._id2skill[a]+" ";t.skills.push(this.parent._id2skill[a]);if(typeof Character.skills[this.parent._id2skill[a]]!="undefined"){i+=Character.skills[this.parent._id2skill[a]]}else if(typeof Character.attributes[this.parent._id2skill[a]]!="undefined"){i+=Character.attributes[this.parent._id2skill[a]]}}}t.laborpoints=i;break;case"custom":t.skills=[];t.formular="";var i=0;for(var a in t.para){var f=Math.floor(a/5);if(typeof t.boni.skill[a]!="undefined"){i+=t.boni.skill[a]}if(typeof t.boni.skill[f]!="undefined"){i+=t.boni.skill[f]}if(typeof this.parent._id2skill[a]!="undefined"){if(t.formular.length>0){t.formular+=" + "}t.formular+="skills."+this.parent._id2skill[a]+" ";t.skills.push(this.parent._id2skill[a]);if(typeof Character.skills[this.parent._id2skill[a]]!="undefined"){i+=Character.skills[this.parent._id2skill[a]]}else if(typeof Character.attributes[this.parent._id2skill[a]]!="undefined"){i+=Character.attributes[this.parent._id2skill[a]]}}}t.laborpoints=i;break;default:return;break}}catch(l){(new UserMessage("tw-db.info cloth calculation script has encountered an unknown error! Please, provide us with this text:; handle Customs; "+JSON.stringify(l.message),UserMessage.TYPE_ERROR)).show()}}},calc:function(){if(typeof this.parent.calcdata.custom[this.selected]=="undefined"||this.parent.calcdata.custom[this.selected].formular==""){return""}var skills=jQuery.extend(true,{},Character.bonus_skills);jQuery.extend(true,skills,Character.attributes);for(var key in Character.attributes){if(typeof Character.bonus.attributes[key]!="undefined"){skills[key]+=Character.bonus.attributes[key]}}return eval(this.parent.calcdata.custom[this.selected].formular)},createSelectbox:function(){this.parent.gui.custom.selectbox.elContent.empty();this.parent.gui.custom.selectbox.value=null;this.parent.gui.custom.selectbox.items=[];for(var e in this.parent.calcdata.custom){var t=this.parent.calcdata.custom[e].name+" ["+this.parent.calcdata.custom[e].laborpoints+"]";this.parent.gui.custom.selectbox.addItem(e,t)}this.switch(this.selected)},"switch":function(e){if(typeof this.parent.calcdata.custom[e]=="undefined"||typeof this.parent.calcdata.custom[e].cloth=="undefined"){return}var t=this.parent;this.parent.customs.selected=e;var n=" ["+this.parent.calcdata.custom[e].laborpoints+"]";n=this.parent.calcdata.custom[e].name.substring(0,35-n.length)+n;this.parent.gui.custom.title.html(n);this.parent.bag.showItems(this.parent.calcdata.custom[e].cloth,"custom");this.showSkill()},showSkill:function(){this.parent.gui.custom.skills.children().remove();if(typeof this.parent.calcdata.custom[this.parent.customs.selected]=="undefinied"){return}var e=this.calc();var t=String(e).split("|");for(var n=0;n<this.parent.calcdata.custom[this.selected].skills.length;n++){var r=jQuery('<div style="float:left;width:30px;height:30px;" />');r.append(this.parent.getSkillImg(this.parent.calcdata.custom[this.selected].skills[n],30));this.parent.gui.custom.skills.append(r);if(this.parent.calcdata.custom[this.parent.customs.selected].type=="fort"&&typeof t[n]!="undefined"){var i=jQuery('<div style="float:left;height:25px;padding:5px 10px 0px 5px ;font-weight:bold;">'+t[n]+"</div>");this.parent.gui.custom.skills.append(i)}}if(this.parent.calcdata.custom[this.parent.customs.selected].type!="fort"){var i=jQuery('<div style="float:left;height:25px;padding:5px 0px 0px 5px ;font-weight:bold;">'+e+"</div>");this.parent.gui.custom.skills.append(i)}},showConfig:function(){var e=this;var t=jQuery('<div title="Edit" style="display:inline-block;vertical-align:top;height:16px;width:16px;cursor:pointer;background:url(\''+Game.cdnURL+"/images/window/messages/head-icons.png') repeat scroll 0 16px transparent;\" />");var n=jQuery('<div title="delete" style="display:inline-block;vertical-align:top;height:16px;width:16px;cursor:pointer;background:url(\''+Game.cdnURL+"/images/icons/delete.png') repeat scroll 0px 0px transparent;\" />");var r=jQuery('<div title="add" style="display:block;margin-top:2px;vertical-align:top;height:20px;width:25px;cursor:pointer;background:url(\''+Game.cdnURL+"/images/window/messages/icons.png') repeat scroll 72px -5px transparent;\" />");var i=jQuery("<div />");for(var s in this.parent.data.custom){var o=this.parent.data.custom[s];var u=jQuery('<div style="display:inline-block;vertical-align:top;height:16px;width:300px;overflow:hidden;" />').html(o.name);var a=t.clone(false);var f=n.clone(false);var l=jQuery('<div style="display:block;height:18px;padding: 3px 0px 0px 0px;border-bottom: 1px solid #666" />').append(u).append(a).append(f);i.append(l);var c=function(t){return function(){e.editConfig(t)}}(s);a.click(c);var c=function(t){return function(){e.deleteConfig(t)}}(s);f.click(c)}var h=0;for(var s in this.parent.data.custom){h++}if(h<15){i.append(r);r.click(function(){e.addConfig()})}this.parent.gui.custom.config=new MessageDialog("Custom skills",i);this.parent.gui.custom.config.addButton("ok",function(){e.parent.checkCache()});this.parent.gui.custom.config.show()},addConfig:function(){var e=0;for(var t in this.parent.data.custom){e++}if(e>=15){(new UserMessage("too much entries, only ten are allowed",UserMessage.TYPE_ERROR)).show()}else{e++;this.editConfig(e)}},editConfig:function(e,t){if(typeof t=="undefined"){var n=this;var r="";var i="";var s="add - ";if(typeof this.parent.data.custom[e]!="undefined"){s="Edit - ";var r=this.parent.data.custom[e].name;var i=JSON.stringify({type:this.parent.data.custom[e].type,para:this.parent.data.custom[e].para})}this.tmp={name:r,code:i};this.parent.gui.custom.name=(new tw2gui.textfield("twdb_cc_custom_name")).setSize(30).setValue(r);this.parent.gui.custom.code=(new tw2gui.textfield("twdb_cc_custom_code")).setSize(30).setValue(i);var o=jQuery('<table width="400px" />');o.append(jQuery("<tr />").append('<td style="vertical-align:middle">Name:</td>').append(jQuery("<td />").append(this.parent.gui.custom.name.getMainDiv())));o.append(jQuery("<tr />").append('<td style="vertical-align:middle">code:</td>').append(jQuery("<td />").append(this.parent.gui.custom.code.getMainDiv())));o.append('<tr><td colspan="2">please go to tw-db.info an get the code snippets to inserts here from there <a href="http://tw-db.info/?strana=calc" target="_blank">tw-db.info Calculator</a></td></tr>');var o=new MessageDialog(s+"Custom skills",o);o.addButton("ok",function(){return n.editConfig(e,true)});o.addButton("cancel");o.show()}else{var u=function(e){(new UserMessage("the inserts you have done are incorrect: "+e,UserMessage.TYPE_ERROR)).show();return false};if(this.parent.gui.custom.name.getValue()==""){return u("empty Name")}if(this.parent.gui.custom.code.getValue()==""){return u("empty code [1]")}if(this.parent.gui.custom.name.getValue()==this.tmp.name&&this.parent.gui.custom.code.getValue()==this.tmp.code){return true}try{var i=jQuery.parseJSON(this.parent.gui.custom.code.getValue())}catch(a){return u("wrong code [2]")}if(typeof i.type=="undefined"||typeof i.para=="undefined"){return u("wrong code [3]")}var f=0;for(var l in i.para){f++}switch(i.type){case"speed":case"regen":if(f!=0){return u("wrong code [4]")}break;case"fort":if(typeof i.para.type=="undefined"||typeof i.para.att=="undefined"||typeof i.para.def=="undefined"||typeof i.para.health=="undefined"){return u("wrong code [5]")}if(i.para.type!=1&&i.para.type!=0){return u("wrong code [6]")}if(!jQuery.isNumeric(i.para.att)||i.para.att<0){return u("wrong code [7]")}if(!jQuery.isNumeric(i.para.def)||i.para.def<0){return u("wrong code [8]")}if(!jQuery.isNumeric(i.para.health)||i.para.health<0){return u("wrong code [9]")}break;case"duel":case"custom":if(f<=0){return u("wrong code [10]")}break;default:return u("wrong code [11]")}delete this.tmp;this.parent.data.custom[e]={id:Number(e),type:i.type,para:i.para,name:this.parent.gui.custom.name.getValue()};this.parent.gui.custom.config.hide();this.showConfig();TWDB.Settings.set("custom",this.parent.data.custom)}},deleteConfig:function(e,t){if(typeof t=="undefined"){var n=this;var r=new MessageDialog("delete - Custom skills","delete: "+this.parent.data.custom[e].name+"?");r.addButton("ok",function(){n.deleteConfig(e,true)});r.addButton("cancel");r.show()}else{var i=this.parent.data.custom;delete i[e];this.parent.data.custom={};var s=0;for(var e in i){s++;this.parent.data.custom[s]=i[e];this.parent.data.custom[s].id=s}this.parent.gui.custom.config.hide();this.showConfig();TWDB.Settings.set("custom",this.parent.data.custom)}}}),getSkillImg:function(e,t){var n=1;var r=1;var i=0;switch(e){case"build":var s=Game.cdnURL+"/images/skill/skills_strength.png";r=2;break;case"punch":var s=Game.cdnURL+"/images/skill/skills_strength.png";i=1;r=2;break;case"tough":var s=Game.cdnURL+"/images/skill/skills_strength.png";i=2;r=2;break;case"endurance":var s=Game.cdnURL+"/images/skill/skills_strength.png";i=3;r=2;break;case"health":var s=Game.cdnURL+"/images/skill/skills_strength.png";i=4;r=2;break;case"ride":var s=Game.cdnURL+"/images/skill/skills_flexibility.png";r=2;break;case"reflex":var s=Game.cdnURL+"/images/skill/skills_flexibility.png";i=1;r=2;break;case"dodge":var s=Game.cdnURL+"/images/skill/skills_flexibility.png";i=2;r=2;break;case"hide":var s=Game.cdnURL+"/images/skill/skills_flexibility.png";i=3;r=2;break;case"swim":var s=Game.cdnURL+"/images/skill/skills_flexibility.png";i=4;r=2;break;case"aim":var s=Game.cdnURL+"/images/skill/skills_dexterity.png";r=2;break;case"shot":var s=Game.cdnURL+"/images/skill/skills_dexterity.png";i=1;r=2;break;case"pitfall":var s=Game.cdnURL+"/images/skill/skills_dexterity.png";i=2;r=2;break;case"finger_dexterity":var s=Game.cdnURL+"/images/skill/skills_dexterity.png";i=3;r=2;break;case"repair":var s=Game.cdnURL+"/images/skill/skills_dexterity.png";i=4;r=2;break;case"leadership":var s=Game.cdnURL+"/images/skill/skills_charisma.png";r=2;break;case"tactic":var s=Game.cdnURL+"/images/skill/skills_charisma.png";i=1;r=2;break;case"trade":var s=Game.cdnURL+"/images/skill/skills_charisma.png";i=2;r=2;break;case"animal":var s=Game.cdnURL+"/images/skill/skills_charisma.png";i=3;r=2;break;case"appearance":var s=Game.cdnURL+"/images/skill/skills_charisma.png";i=4;r=2;break;case"strength":var s=Game.cdnURL+"/images/attribute_circle/strength.png";break;case"flexibility":var s=Game.cdnURL+"/images/attribute_circle/flexibility.png";break;case"dexterity":var s=Game.cdnURL+"/images/attribute_circle/dexterity.png";break;case"charisma":var s=Game.cdnURL+"/images/attribute_circle/charisma.png";break;case"attacker":var s=TWDB.images.attacker;break;case"defender":var s=TWDB.images.defender;break;default:return jQuery("<div />")}var o="";if(typeof Character.skill_titles[e]!="undefined"){var o=Character.skill_titles[e]}else if(typeof Character.attribute_titles[e]!="undefined"){var o=Character.attribute_titles[e]}s='<img src="'+s+'" height="'+t*r+'" title="'+o+'" style="margin-left:-'+i*t+'px" />';s=jQuery(s);var u='<div style="display:block;overflow:hidden;width:'+t*n+"px;height:"+t+'px;"/>';u=jQuery(u);return u.append(s)},bag:new Object({stack:{},interval:false,setParent:function(e){this.parent=e},showItems:function(e,t){this.parent.gui.bag.children().remove();this.items={};var n=this;var r=false;addItem=function(e){var r=ItemManager.get(e);var i=new InventoryItem(r);var s=i.getMainDiv().clone(true);var o=function(e){return function(){n.click(this,e,t)}}(e);jQuery(s).removeAttr("id");jQuery(s).children(".count").remove();jQuery(s).children("img:first-child").removeAttr("id").click(o);jQuery(s).appendTo(n.parent.gui.bag);n.items[e]=jQuery(s)};for(var i in e){if(typeof i=="function"){break}var s=e[i].id;var o=ItemManager.get(s);addItem(s);if(o.type=="animal"){r=true}}if(!r&&this.parent.calcdata.animals.length>0){addItem(this.parent.calcdata.animals[0]["id"])}this.wear()},click:function(e,t,n){var r=Bag.getItemByItemId(t);if(r===undefined){return false}if(Wear.carry(r)){this.stack[t]=e;if(this.interval===false){var i=this;switch(n){case"jobs":var s=function(){i.wear();i.parent.jobs.createSelectbox()};break;case"custom":var s=function(){i.wear();i.parent.customs.showSkill()};break}TWDB.Eventer.set("carryChecker",s,1);this.interval=setInterval(function(){i.carry()},100)}jQuery(e).css("opacity","0.3")}},carry:function(){var e=0;for(var t in this.stack){var n=Bag.getItemByItemId(t);if(n==undefined||n.elImg.css("opacity")==1){jQuery(this.stack[t]).css("opacity","1.0");delete this.stack[t]}else{e++}}if(e==0){clearInterval(this.interval);this.interval=false;TWDB.Eventer.trigger("carryChecker")}},wear:function(){for(var e in Wear.wear){var t=Wear.wear[e].obj.item_id;if(typeof this.items[t]!="undefined"){this.items[t].css("opacity","0.5")}}}}),buyTip:new Object({list:[],current:0,stack:[],up2date:true,setParent:function(e){this.parent=e},init:function(){function t(e,t){return e["value"]>t["value"]?1:-1}this.list=[];jobs=[];for(var e in this.parent.calcdata.jobs){jobs.push({id:e,value:this.parent.calcdata.jobs[e].name})}jobs.sort(t);for(var n=0;n<jobs.length;n++){this.list.push(jobs[n]["id"])}},show:function(e){var t=jQuery('<div style="position:absolute;bottom:-8px;right:-5px;block;width:25px;height:25px;border:0px;margin:0px;" />');var n=ItemManager.get(e);if(typeof n=="undefined"){return t}if(n.characterClass!==null&&n.characterClass!==Character.characterClass){return t}if(n.characterSex!==null&&n.characterSex!==Character.characterSex){return t}if(Bag.getItemByItemId(e)){return t}if(typeof this.parent.calcdata.buyTip[e]=="undefined"){this.stack.push({id:e,div:t});if(this.up2date){this.up2date=false;var r=this;setTimeout(function(){r.calc()},100)}}else{if(this.parent.calcdata.buyTip[e].length>0){t.append(this.popup(e))}}return t},calc:function(){if(this.stack[this.current]!="undefined"){var e=this.stack[this.current].id;var t=this.stack[this.current].div;this.parent.calcdata.buyTip[e]=this.isBetterItem(e);if(this.parent.calcdata.buyTip[e].length>0){t.append(this.popup(e))}}this.current++;if(this.current<this.stack.length){var n=this;setTimeout(function(){n.calc()},100)}else{this.up2date=true;this.stack=[];this.current=0;TWDB.Cache.save("calcdata",this.parent.calcdata)}},isBetterItem:function(itemid){var data=ItemManager.get(itemid);if(data=="undefined"){return[]}if(typeof this.parent._type2id[data.type]=="undefined"){return[]}var type=this.parent._type2id[data.type];var skills={};for(var skill in Character.skills){skills[skill]=typeof data.bonus.skills[skill]!="undefined"?data.bonus.skills[skill]:0}for(var attr in Character.skill_names){if(typeof data.bonus.attributes[attr]!="undefined"){for(var i=0;i<Character.skill_names[attr].length;i++){skill=Character.skill_names[attr][i];skills[skill]+=data.bonus.attributes[attr]}}}var better=[];for(var i=0;i<this.list.length;i++){job=this.parent.calcdata.jobs[this.list[i]];if(typeof job.cloth=="undefined"||typeof job.cloth[type]=="undefined"||job.cloth[type].lp==0){continue}var lp=eval(job.formular);if(job.cloth[type].lp<lp){var color=0;var joblp=job.laborpoints.sum+(lp-job.cloth[type].lp);if(job.laborpoints.sum<0){if(joblp>=0){color=2}else{color=1}}better.push({job:job.id,lp:lp,more:lp-job.cloth[type].lp,color:color,joblp:joblp})}}return better},popup:function(e){var t=false;var n=ItemManager.get(e);var r=this.parent.calcdata.buyTip[e];var i="<table border='0' cellspacing='0' cellpadding='0'><tr>";if(n.level!==null&&n.level>Character.level+Character.itemLevelRequirementDecrease["all"]+(typeof Character.itemLevelRequirementDecrease[n.type]!="undefined"?Character.itemLevelRequirementDecrease[n.type]:0)){i+="<td colspan='2' style='text-align:center; font-weight:bold;'>"+n.level+" Level</td></tr><tr>"}for(var s=0;s<r.length;s++){var o=" +"+r[s].more+" "+this.parent.calcdata.jobs[r[s].job].name+" ["+r[s].joblp+"]";if(this.parent.jobs.selected==r[s].job){o="<b>"+o+"</b>";t=true}var u="#008000";switch(r[s].color){case 0:u="#008000";break;case 1:u="#FF0000";break;case 2:u="#0000FF";break}i+="<td style='color:"+u+";'>"+o+"</td>";if(s%2){i+="</tr><tr>"}}if(r.length%2){i+="<td></td></tr>"}else{i=i.substring(0,i.length-5)}i+="</table>";if(t){return jQuery('<img src="'+TWDB.images.iconStar2+'" width="100%" height="100%" title="'+i+'" />')}else{return jQuery('<img src="'+TWDB.images.iconStar+'" width="100%" height="100%" title="'+i+'" />')}}}),jobBoni:new Object({current:0,stack:[],up2date:true,setParent:function(e){this.parent=e},show:function(e){var t=jQuery('<div style="position: absolute; top: 0px; right: 1px; width: 17px; height: 18px; border: 0px none; margin: 0px;" />');if(this.parent.jobs.selected==0){return t}var n=this.parent.jobs.selected;if(typeof this.parent.calcdata.jobBoni[n]=="undefined"){this.parent.calcdata.jobBoni[n]={}}if(typeof this.parent.calcdata.jobBoni[n][e]=="undefined"){this.stack.push({id:e,div:t,job:n});if(this.up2date){this.up2date=false;var r=this;setTimeout(function(){r.work()},100)}}else{if(this.parent.calcdata.jobBoni[n][e]>0){t.append(this.popup(e,n))}}return t},work:function(){if(this.stack[this.current]!="undefined"){var e=this.stack[this.current].id;var t=this.stack[this.current].div;var n=this.stack[this.current].job;this.parent.calcdata.jobBoni[n][e]=this.calc(e,n);if(this.parent.calcdata.jobBoni[n][e]>0){t.append(this.popup(e,n))}}this.current++;if(this.current<this.stack.length){var r=this;setTimeout(function(){r.work()},100)}else{this.up2date=true;this.stack=[];this.current=0;TWDB.Cache.save("calcdata",this.parent.calcdata)}},calc:function(itemid,jobid){var data=ItemManager.get(itemid);if(data=="undefined"){return[]}var skills={};for(var skill in Character.skills){skills[skill]=typeof data.bonus.skills[skill]!="undefined"?data.bonus.skills[skill]:0}for(var attr in Character.skill_names){if(typeof data.bonus.attributes[attr]!="undefined"){for(var i=0;i<Character.skill_names[attr].length;i++){skill=Character.skill_names[attr][i];skills[skill]+=data.bonus.attributes[attr]}}}try{var lp=eval(this.parent.calcdata.jobs[jobid].formular)}catch(e){return 0}return lp},popup:function(e,t){var n=this.parent.calcdata.jobBoni[t][e];var r=this.parent.calcdata.jobs[t].name;return jQuery('<img src="'+TWDB.images.iconInfo+'" width="100%" height="100%" title="+'+n+" "+r+'" />')}}),sellTip:new Object({setParent:function(e){this.parent=e},init:function(){for(var e in this.parent.calcdata.jobs){for(var t in this.parent.calcdata.jobs[e].cloth){var n=this.parent.calcdata.jobs[e].cloth[t].id;if(typeof (this.parent.calcdata.used[n]=="undefined")){this.parent.calcdata.used[n]=1}else{this.parent.calcdata.used[n]++}}}for(var r in this.parent.calcdata.custom){for(var t in this.parent.calcdata.custom[r].cloth){var n=this.parent.calcdata.custom[r].cloth[t].id;if(typeof (this.parent.calcdata.used[n]=="undefined")){this.parent.calcdata.used[n]=0}else{this.parent.calcdata.used[n]++}}}},show:show=function(e){var t=jQuery('<div style="position:absolute;bottom:0px;right:0px;block;width:19px;height:19px;border:0px;margin:0px;" />');if(typeof this.parent.calcdata.used[e]!="undefined"){return t}if(TWDB.Settings.get("sellTip2",true)){var n=0;var r=ItemManager.get(e);var i=Bag.getItemByItemId(e);if(i){n+=i.count}var s=Wear.wear[r.type];if(s&&s.obj.item_id==e){n++}if(n<2){return t}}return t.append(this.popup())},popup:function(){return jQuery('<img src="'+TWDB.images.iconSell+'" width="100%" height="100%" title="this item is not used for any job or custom defined activity (ClothCalc)" />')}})});TWDB.ClothCalc.jobSearch={setParent:function(e){this.parent=e},show:function(){if(this.parent.jobs.selected==0||typeof this.parent.calcdata.jobs[this.parent.jobs.selected]=="undefined"){return}if(this.parent.gui.job.searchDiv.parent().length){this.parent.jobs.switch(this.parent.jobs.selected);return}this.parent.gui.bag.children().remove();this.newTask(this.parent.calcdata.jobs[this.parent.jobs.selected].gameid,this.parent.gui.job.searchDiv);this.parent.gui.bag.append(this.parent.gui.job.searchDiv)},constants:{maxJobs:4,directions:["&#8658;","&#8663;","&#8657;","&#8662;","&#8656;","&#8665;","&#8659;","&#8664;"],css:"#TWDBJobList, #TWDBTimeSelect { width:100%;  } \n"+"#TWDBJobList tr td a { margin: -3px; color:#821; }"+"#TWDBJobList tr th { text-align:center; }"+"#TWDBJobList tr td:nth-child(1) { width:auto; vertical-align: middle; }"+"#TWDBJobList tr td:nth-child(2) { width:26px; font-size:24px; font-weight: bold; }"+"#TWDBJobList tr td:nth-child(3) .button_middle { overflow: hidden; text-overflow: clip; width: 66px; }"+"#TWDBJobList tr td:nth-child(4) .button_middle { overflow: hidden; text-overflow: clip; width: 50px; }"},jobPosCache:{},html:null,task:null,prepareJobTimes:function(){var e=this;jQuery.post("game.php?window=job&x=11&y=43",{},function(t){var n=jQuery(t.page).find(".task_control > table");e.html={};e.html.distance=jQuery(n[0]).find("td:first").html();jQuery(n[1]).find("select").attr("onchange","").find("option:last").attr("selected","selected");e.html.duration='<table id="TWDBTimeSelect">'+jQuery(n[1]).find("tr:first").html()+"</table>";var r=jQuery(n[1]).find("#button_start_task_job_11-43");var i="default";if(i!="default")r.find(".button_middle").html(i);e.html.start=r.html();r.find(".button_middle").html("Open");e.html.open=r.html();e.html.singleDuration=jQuery(n[1]).find("select option:last").val()*1/30;if(e.task.waitingForHTML)e.makeHTML()},"json")},error:function(e){alert(e);return false},newTask:function(e,t){if(this.task&&this.task.toBeGenerated)return;if(!this.html){this.prepareJobTimes()}this.task={toBeGenerated:0,target:t,waitingForHTML:false,jobToSearchFor:e};this.prepareMyCoords();this.prepareJobData()},prepareMyCoords:function(e){if(!e){var t={to_x:pos.x,to_y:pos.y};for(var n=Tasks.tasks.length-1;n>=0;n--){if(Tasks.tasks[n].type=="way"){t=Tasks.tasks[n].data_obj;break}}}else{var t={to_x:e.x,to_y:e.y}}this.task.x=t.to_x;this.task.y=t.to_y;this.task.miniX=parseInt(this.task.x/100);this.task.miniY=parseInt(this.task.y/250)},prepareJobData:function(){this.task.toBeDone=0;for(var e=Math.max(this.task.miniY-1,0);e<=Math.min(this.task.miniY+1,3);e++)for(var t=Math.max(this.task.miniX-1,0);t<=Math.min(this.task.miniX+1,9);t++)this.task.toBeDone++;for(var e=Math.max(this.task.miniY-1,0);e<=Math.min(this.task.miniY+1,3);e++)for(var t=Math.max(this.task.miniX-1,0);t<=Math.min(this.task.miniX+1,9);t++)this.myGenerateJobList(t,e)},myGenerateJobList:function(e,t){this.task.toBeGenerated++;var n=this;if(this.jobPosCache[e]&&this.jobPosCache[e][t])this.generateFinished();else Ajax.remoteCall("map","get_job_position_list",{x:e,y:t},function(r){if(!r.job_positions)return n.error("Loading job positions failed");for(var i in r.job_positions)for(var s=0,o=r.job_positions[i],u=o.length;s<u;s++){var a=o[s],f=a[0],l=a[1];if(!n.jobPosCache[e])n.jobPosCache[e]=[];if(!n.jobPosCache[e][t])n.jobPosCache[e][t]=[];if(!n.jobPosCache[e][t][i])n.jobPosCache[e][t][i]=[];n.jobPosCache[e][t][i].push([f,l])}n.generateFinished()})},generateFinished:function(){this.task.toBeDone--;this.task.toBeGenerated--;if(this.task.toBeDone==0)this.processJobs()},processJobs:function(){var e=this.task.jobToSearchFor,t=[];var n=parseInt(this.task.x/100),r=parseInt(this.task.y/250);for(var i=Math.max(this.task.miniY-1,0);i<=Math.min(this.task.miniY+1,3);i++)for(var s=Math.max(this.task.miniX-1,0);s<=Math.min(this.task.miniX+1,9);s++)for(var o=0,u=this.jobPosCache[s][i]||this.error("Prepared job data were corrupted: "+s+","+i)||[],a=u[e]||[];o<a.length;o++)t.push({dist:WMap.calcWayTime(this.task,{x:a[o][0],y:a[o][1]}),x:a[o][0],y:a[o][1]});t.sort(function(e,t){return e.dist-t.dist});var f=this.task.dataRes=[];for(var o=0;f.length<this.constants.maxJobs&&o<t.length;o++){var l=f[f.length-1]||{};if(t[o].x!=l.x&&t[o].y!=l.y)f.push(t[o])}this.makeHTML()},makeHTML:function(){function n(e,t){return e.val(t).attr("label",TWDB.Time.time2str(t)).html(TWDB.Time.time2str(t))}if(!this.html){this.task.waitingForHTML=true;return}var e=jQuery(this.html.duration),t=this;if(this.task.jobToSearchFor==4)n(e.find("option:first"),this.html.singleDuration*3/4);if(this.task.jobToSearchFor==94)e.find("option").not(n(e.find("option:first"),this.html.singleDuration)).remove();var r=jQuery('<table id="TWDBJobList"><tr><th colspan="4" style="text-align:left">'+this.html.distance+"</th></tr></table>");for(var i=0;i<this.task.dataRes.length;i++)(function(n){var i=jQuery(t.html.start).click(function(){(({window:e.get(0),singleDuration:t.html.singleDuration,pos:{x:n.x,y:n.y},button:{activate:function(){}},start:Job.prototype.start})).start();t.prepareMyCoords(n)}),s=jQuery(t.html.open).click(function(){AjaxWindow.show("job",{x:n.x,y:n.y},n.x+"_"+n.y)}),o=parseInt((Math.atan2((t.task.y-n.y)/4,t.task.x-n.x)*180/Math.PI+360+90/4)%360/45);r.append(jQuery('<tr style="height:32px;"><td style="height:32px;">'+n.dist.formatDuration()+'</td><td style="height:32px;"><a href="javascript:WMap.scroll_map_to_pos('+n.x+","+n.y+');void(0)">'+t.constants.directions[o]+"</a></td></tr>").append(jQuery('<td style="height:32px;" />').append(s)).append(jQuery('<td style="height:32px;" />').append(i)))})(this.task.dataRes[i]);jQuery(t.task.target).html('<style type="text/css">'+this.constants.css+"</style>").append(e).append(r)}};TWDB.ClothCalc.favoriteJobs={list:[],setParent:function(e){this.parent=e},saveListToStorage:function(){TWDB.Cache.save("jobfavorite",this.list)},loadListFromStorage:function(){var e=TWDB.Cache.load("jobfavorite");if(typeof e=="object"&&e!=null){this.list=e}else{this.list=[]}},init:function(){this.Div.parent=this;this.loadListFromStorage();this.makeHTML=this.displayList;this.prepareJobTimes()},Div:{o:null,parent:null,init:function(){if(jQuery("#TWDB_favoriteJobs").length)return;this.o=jQuery('<div style="display:none;" id="TWDB_favoriteJobs"></div>').appendTo("#ui").append('<style type="text/css">'+this.parent.constants.css+"</style>")},anim:function(){jQuery(this.o).fadeIn(500)},add:function(e){function u(e,t){return e.val(t).attr("label",TWDB.Time.time2str(t)).html(TWDB.Time.time2str(t))}var t=JobList[e.id],n=jQuery(this.parent.html.duration).find("select"),r=this,i=0,s=TWDB.ClothCalc.calcdata.jobs;if(!s[1])return false;if(s[1].gameid===1)this.parent.jobs.init();for(var o in s)if(s[o].gameid==e.id)i=s[o].id;if(e.id==4)u(n.find("option:first"),this.parent.html.singleDuration*3/4);if(e.id==94)n.find("option").not(u(n.find("option:first"),this.parent.html.singleDuration)).remove();(this[e.id]=jQuery('<div><img src="images/jobs/'+t.shortName+'.png" alt="'+t.shortName+'" /><div></div></div>').append(n)).appendTo(this.o).find("img:first,div:first").attr("title",t.name).click(function(){TWDB.ClothCalc.open();TWDB.ClothCalc.jobs.switch(i)});this[e.id].find("select").attr("size",e.id==94?2:5).css("width","150px").click(function(){if(jQuery(this).val()!="ClothCalc_remove")r.parent.newTask(e.id,r[e.id]);else r.parent.removeFavorite(e.id)}).append('<option value="ClothCalc_remove">(Remove this job)</option>').get(0).selectedIndex=e.id==94?0:3;return e}},displayList:function(){this.Div.init();for(var e=0;e<this.list.length;e++)if(!this.Div.add(this.list[e]))return;this.Div.anim();this.makeHTML=this.startJob;this.ready=true},addFavorite:function(){if(!this.ready)this.displayList();var e=this.parent.calcdata.jobs[this.parent.jobs.selected].gameid;for(var t=0;t<this.list.length;t++)if(e==this.list[t].id)return;this.list.push(this.Div.add({id:e}));this.saveListToStorage()},removeFavorite:function(e){for(var t=0;t<this.list.length;t++)if(e==this.list[t].id){this.list.splice(t,1);this.saveListToStorage();this.Div[e].remove()}},constants:{maxJobs:1,css:"#TWDB_favoriteJobs {position:absolute;top:5px;left:5px;}\n"+"#TWDB_favoriteJobs > div {display:inline-block;width:36px;vertical-align:top;position:relative; }\n"+"#TWDB_favoriteJobs > div > img {width:30px;height:30px;display:block;position:absolute;top:3px;left:3px;z-index:10;}\n"+"#TWDB_favoriteJobs > div > div {width:34px;height:34px;display:block;z-index:11;margin:1px 1px 0px 1px;position:relative;background-image: url("+TWDB.images.jobBG+");}\n"+"#TWDB_favoriteJobs > div > select {font-size:10px;display:none;position:relative;z-index:10000;}\n"+"#TWDB_favoriteJobs > div:hover > select {display:block;}\n"},jobPosCache:TWDB.ClothCalc.jobSearch.jobPosCache,html:null,task:{waitingForHTML:true},prepareJobTimes:TWDB.ClothCalc.jobSearch.prepareJobTimes,error:TWDB.ClothCalc.jobSearch.error,newTask:TWDB.ClothCalc.jobSearch.newTask,prepareMyCoords:TWDB.ClothCalc.jobSearch.prepareMyCoords,prepareJobData:TWDB.ClothCalc.jobSearch.prepareJobData,myGenerateJobList:TWDB.ClothCalc.jobSearch.myGenerateJobList,generateFinished:TWDB.ClothCalc.jobSearch.generateFinished,processJobs:TWDB.ClothCalc.jobSearch.processJobs,startJob:function(){if(!this.html){this.task.waitingForHTML=true;return}var e=this.task.dataRes[0];(xxx={window:this.Div[this.task.jobToSearchFor].get(0),singleDuration:this.html.singleDuration,pos:{x:e.x,y:e.y},button:{activate:function(){}},start:Job.prototype.start}).start();this.prepareMyCoords(e)}};TWDB.ReportAnalyser=new Object({ready:false,failedReports:[],products:[700,701,702,703,704,705,706,707,708,709,710,711,712,714,715,716,717,718,719,720,721,722,723,724,725,726,727,728,729,730,731,733,734,736,737,739,740,741,742,743,744,745,746,747,748,749,750,751,752,753,754,755,756,757,758,759,760,761,762,763,764,765,766,767,768,771,774,778,779,780,781,782,783,784,786,787,788,789,790,791,792,793,794,795,797,1708,1755,1756,1791,1807,1808,1809,1810,1811,1812,1813,1814,1815,1816,1817,1818,1819,1820,1821,1822,1823,1824,1825,1826,1827,1828,1829,1830,1831,1832,1833,1834,1835,1836,1837,2e3,2003,2006,2009],gui:{},locked:false,reports:[],init:function(){if(typeof this.statistic!="undefined"){return}var e=TWDB.Cache.load("statistic");if(typeof e=="object"&&e!=null){this.statistic=e}else{this.reset(true)}if(typeof this.statistic.ver=="undefined"||this.statistic.ver!=2){this.reset(true,1)}if(this.statistic.extra){delete this.statistic.extra}this.backup=jQuery.extend(true,{},this.statistic);this.ready=true},reset:function(e,t){if(e==true){if(!t){var n=0}else{var r=/\[report=([0-9]+)([A-Fa-f0-9]{10})\]/;var i=String(t).match(r);if(i){var t=i[1]}}if(isNaN(parseInt(t))){var n=0}else{var n=parseInt(t)-1}this.statistic={ver:2,jobs:{_finds:{count:0,last:0,finds:0,attempts:{},detailed:{}},_last:n}}}else{var s=this;var o=jQuery('<div><h2>Do you really want to reset the ReportAnalyser statistics?</h2><span style="font-size:12px"><br />Give Report-Link of first Report which should be read after Reset</span></div>');var u=(new tw2gui.textfield("twdb_analyser_last")).setSize(40);u.setLabel("Report-Link:");o.append(u.getMainDiv());var a=new tw2gui.checkbox("or use all reports  ");var f=new tw2gui.checkbox("or use only future reports");a.setCallback(function(e){if(e){f.setSelected(false);u.setValue("")}});f.setCallback(function(e){if(e){a.setSelected(false);u.setValue("")}});jQuery(u.getMainDiv()).find("span").css("font-size","12px");jQuery(u.getMainDiv()).find("input").keyup(function(){a.setSelected(false);f.setSelected(false)});o.append(jQuery('<div style="display:block;" />').append(a.getMainDiv()).append(f.getMainDiv()));var l=new MessageDialog("ReportAnalyser - Reset",o);l.addButton("ok",function(){if(a.isSelected()){s.reset(true,0)}else if(f.isSelected()){s.reset(true,s.statistic.jobs._last+1)}else{s.reset(true,u.getValue())}l.hide();s.open()});l.addButton("cancel");l.show()}},analyse:function(){if(!this.ready){this.init()}if(!TWDB.Time.ready){return}if(this.locked){return}this.reports=new Array;this.locked=true;this.queryReports()},readReports:function(e){var t=true;if(typeof e.reports!="object"){e.reports=[];t=false}if(typeof e.page=="undefined"||this.lastPage!=e.page){e.reports=[];t=false}for(var n=0;n<e.reports.length;n++){var r=e.reports[n];if(r.report_id<=this.statistic.jobs._last){t=false;break}this.reports.push({id:r.report_id,hash:r.hash})}this.gui.bar.setMaxValue(this.reports.length);if(t){this.queryReports(this.lastPage+1)}else{this.analyseReports()}},queryReports:function(e){if(typeof e=="undefined"){e=1}var t=this;this.lastPage=e;jQuery.post("game.php?window=reports&action=get_reports&h="+h,{folder:"job",page:e},function(e){t.readReports(e)},"json")},analyseReports:function(){if(this.reports.length>0){this.gui.bar.setValue(this.gui.bar.getValue()+1);this.queryReport(this.reports.pop())}else{TWDB.Cache.save("statistic",this.statistic);this.locked=false;this.show(true)}},queryReport:function(e){var t=this;jQuery.post("game.php?window=reports&mode=show_report",{flash:null,hash:e.hash,report_id:e.id},function(e){t.readReport(e)},"json")},readReport:function(json){if(typeof json.report_id=="undefinied"||typeof json.publishHash=="undefinied"){return false}data={items:[]};data.id=json.report_id;data.hash=json.publishHash;if(typeof json.page!="string"||typeof json.title!="string"||typeof json.js!="string"){this.failedReports.push(data.id);return false}data.job=jQuery.trim(json.title.slice(json.title.indexOf(":")+1));var tmp=jQuery(json.page);var _self=this;tmp.find(".rp_row_jobdata").each(function(e){var t=jQuery.trim(jQuery(this).children("span:last-child").html());t=t.split(" ").join(" ");switch(e){case 0:data.motivation=parseInt(t.slice(0,t.indexOf(" ")));break;case 1:data.duration=parseInt(TWDB.Time.str2time(t));break;case 2:data.wage=parseInt(t.slice(t.indexOf(" ")+1));break;case 3:data.bond=parseInt(t);break;case 4:data.experience=parseInt(t.slice(0,t.indexOf(" ")));break}});var str=json.js;var rawItems=[];var start=str.indexOf("(new Item");while(start>=0){var end=str.indexOf(".injectInside");if(end<=0){this.failedReports.push(data.id);return false}rawItems.push(str.slice(start,end));var str=str.slice(end+13);start=str.indexOf("(new Item")}for(var i=0;i<rawItems.length;i++){try{var itemDiv=eval(rawItems[i])}catch(e){this.failedReports.push(data.id);return false}var item={};item.item_id=Number(jQuery(itemDiv).attr("id").slice(5));item.count=Number(jQuery(itemDiv).find(".new_bag_item_count p").html());if(item.count==0){item.count=1}data.items.push({item_id:item.item_id,count:item.count})}this.analyseReport(data);this.statistic.jobs._last=data.id;this.analyseReports()},analyseReport:function(e){if(typeof this.statistic.jobs=="undefined"){this.statistic.jobs={}}var t=["motivation","duration","wage","bond","experience"];for(var n=0;n<t.length;n++){if(typeof e[t[n]]=="undefined"||isNaN(e[t[n]])){this.failedReports.push({id:e.id,data:e});return false}}if(typeof this.statistic.jobs[e.job]=="undefined"){this.statistic.jobs[e.job]={count:0,duration:0,motivation:0,wage:0,bond:0,experience:0,reports:0,products:{},items:{},extraItems:{}}}if(typeof this.statistic.jobs[e.job]["reports"]=="undefined"){this.statistic.jobs[e.job]["reports"]=0}var r=this.statistic.jobs[e.job];var i=this.statistic.jobs["_finds"];var s=0;var o=this;for(var n=0;n<e.items.length;n++){var u=e.items[n];if(jQuery.inArray(u.item_id,o.products)>=0){if(typeof r.products[u.item_id]=="undefined"){r.products[u.item_id]={count:0,last:0,attempts:{}}}if(u.count>0){var a=Math.ceil((r.duration-r.products[u.item_id].last)/TWDB.Time.getBase())+1;if(typeof r.products[u.item_id].attempts[a]=="undefined"){r.products[u.item_id].attempts[a]=1}else{r.products[u.item_id].attempts[a]++}if(u.count>1){if(typeof r.products[u.item_id].attempts[1]=="undefined"){r.products[u.item_id].attempts[1]=u.count-1}else{r.products[u.item_id].attempts[1]+=u.count-1}}r.products[u.item_id].last=r.duration+e.duration;if(Math.ceil(e.duration/TWDB.Time.getBase())>u.count){r.products[u.item_id].last-=TWDB.Time.getBase()*(e.duration/TWDB.Time.getBase()-u.count)}}r.products[u.item_id].count+=u.count}else{var f=ItemManager.get(u.item_id);if(f.tradeable==false){if(typeof r.extraItems=="undefined"){r.extraItems={}}if(typeof r.extraItems[u.item_id]=="undefined"){r.extraItems[u.item_id]=0}r.extraItems[u.item_id]+=u.count}else{if(typeof r.items[u.item_id]=="undefined"){r.items[u.item_id]=0}r.items[u.item_id]+=u.count;s++}}}if(typeof i["detailed"][e.duration]=="undefined"){i["detailed"][e.duration]={}}if(typeof i["detailed"][e.duration][e.motivation]=="undefined"){i["detailed"][e.duration][e.motivation]={count:0,finds:0,last:0,attempts:{}}}i["detailed"][e.duration][e.motivation]["count"]++;i["count"]++;if(s>0){var a=i["detailed"][e.duration][e.motivation]["count"]-i["detailed"][e.duration][e.motivation]["last"];i["detailed"][e.duration][e.motivation]["last"]=i["detailed"][e.duration][e.motivation]["count"];i["detailed"][e.duration][e.motivation]["finds"]+=s;if(typeof i["detailed"][e.duration][e.motivation]["attempts"][a]=="undefined"){i["detailed"][e.duration][e.motivation]["attempts"][a]=0}i["detailed"][e.duration][e.motivation]["attempts"][a]++;var l=i["count"]-i["last"];i["last"]=i["count"];i["finds"]+=s;if(typeof i["attempts"][l]=="undefined"){i["attempts"][l]=0}i["attempts"][l]++;if(s>1){if(typeof i["detailed"][e.duration][e.motivation]["attempts"][0]=="undefined"){i["detailed"][e.duration][e.motivation]["attempts"][0]=0}i["detailed"][e.duration][e.motivation]["attempts"][0]+=s-1;if(typeof i["attempts"][0]=="undefined"){i["attempts"][0]=0}i["attempts"][0]+=s-1}}r.motivation+=e.motivation;r.duration+=e.duration;r.count+=e.duration/TWDB.Time.getBase();r.wage+=e.wage;r.bond+=e.bond;r.experience+=e.experience;r.reports++},open:function(){MessagesWindow.open("analyser")},show:function(e){var t=this;if(!MessagesWindow.window){return}this.gui.window=jQuery(MessagesWindow.window.getContentPane()).find(".messages-analyser");if(typeof e=="undefined"){MessagesWindow.window.showLoader();this.gui.bar=new tw2gui.progressbar(0,this.reports.length);this.gui.window.children().remove();this.gui.window.append(this.gui.bar.getMainDiv());this.analyse()}else{this.sorting={ord:null,type:null};var n=jQuery('<div class="fancytable"><div class="_bg tw2gui_bg_tl"></div><div class="_bg tw2gui_bg_tr"></div><div class="_bg tw2gui_bg_bl"></div><div class="_bg tw2gui_bg_br"></div><div class="trows"><div class="thead statics"><div class="row_head"><div class="cell_0" style="width:150px; text-align:center;"><span title="Name" style="cursor:pointer, margin-bottom:3px;"><img src="'+TWDB.images.iconName+'" /></span></div><div class="cell_1" style="width:50px; text-align:center;"><span title="Duration"><img src="'+TWDB.images.iconClock+'" /></span></div><div class="cell_2" style="width:50px; text-align:center;"><span title="Experience"><img src="'+TWDB.images.iconExperience+'" /></span></div><div class="cell_3" style="width:50px; text-align:center;"><span title="Wage"><img src="'+TWDB.images.iconDollar+'" /></span></div><div class="cell_4" style="width:50px; text-align:center;"><span title="Bond"><img src="'+TWDB.images.iconUpb+'" /></span></div><div class="cell_5" style="width:50px; text-align:center;"><span title="Motivation"><img src="'+TWDB.images.iconMoti+'" /></span></div><div class="cell_6" style="width:50px; text-align:center;"><span title="Products"><img src="'+TWDB.images.iconYield+'" /></span></div><div class="cell_7" style="width:50px; text-align:center;"><span title="Rate"><img src="'+TWDB.images.iconRate+'" /></span></div><div class="cell_8" style="width:50px; text-align:center;"><span title="Item"><img src="'+TWDB.images.iconItem+'" /></span></div><div class="cell_9" style="width:50px; text-align:center;"><span title="Luck"><img src="'+TWDB.images.iconLuck+'" /></span></div><div class="cell_10" style="width:50px; text-align:right;"><span title="Reset"><img src="'+TWDB.images.iconReset+'" /></span></div></div></div><div class="tbody"></div><div class="tfoot statics"><div class="row row_foot"></div></div></div></div>');n.find(".row_head").find("img").click(function(){t.sort(this)});n.find(".row_head").find("img").css("cursor","pointer");var r=0;var i="";var s={jobs:0,total:0,duration:0,experience:0,wage:0,bond:0,motivation:0,products:0,rate:0,items:0,luck:0};for(var o in TWDB.ReportAnalyser.statistic.jobs){if(o=="_last"||o=="_finds"){continue}s.jobs++;var u=TWDB.ReportAnalyser.statistic.jobs[o];i+='<div class="row row_'+r+'">';i+='<div class="cell_0" style="width:150px; text-align:left;cursor:pointer;" title="'+o+'">'+o+"</div>";s.total+=u.reports;var a=Math.round(u.duration/36)/100;i+='<div class="cell_1" style="width:50px; text-align:center;" title="'+a+' hours">'+a+"</div>";s.duration+=u.duration;var f=Math.round(u.experience);i+='<div class="cell_2" style="width:50px; text-align:center;" title="'+f+'">'+f+"</div>";s.experience+=u.experience;var f=Math.round(u.wage);i+='<div class="cell_3" style="width:50px; text-align:center;" title="$ '+f+'">'+f+"</div>";s.wage+=u.wage;var f=Math.round(u.bond);i+='<div class="cell_4" style="width:50px; text-align:center;" title="'+f+'">'+f+"</div>";s.bond+=u.bond;var f=Math.round(u.motivation/u.reports);i+='<div class="cell_5" style="width:50px; text-align:center;" title=" '+f+'">'+f+"</div>";s.motivation+=u.motivation;var l=0;var c=0;for(var h in u.products){l+=u.products[h].count;var p=ItemManager.get(h);c+=p.price*u.products[h].count}i+='<div class="cell_6" style="width:50px; text-align:center;" title="'+l+'">'+Math.round(l)+"</div>";s.products+=l;var d=Math.round(l/u.count*1e3)/10;i+='<div class="cell_7" style="width:50px; text-align:center;" title="'+d+'%">'+d+"</div>";s.rate+=l/u.count;var l=0;for(var h in u.items){l+=u.items[h];var p=ItemManager.get(h);c+=p.price}i+='<div class="cell_8" style="width:50px; text-align:center;" title="'+l+'">'+l+"</div>";s.items+=l;i+='<div class="cell_9" style="width:50px; text-align:center;" title="$ '+c+'">'+c+"</div>";s.luck+=c;i+="</div>";r++}i=jQuery(i);this.gui.rows=[];i.each(function(){t.gui.rows.push(this);jQuery(this).click(function(){t.detail(jQuery(this).children(".cell_0").html())})});this.gui.bodyscroll=(new tw2gui.scrollpane).appendContent(i);jQuery(this.gui.bodyscroll.getMainDiv()).css("height","300px");n.find(".tbody").append(this.gui.bodyscroll.getMainDiv());var v=n.find(".row_foot");var m=this;var g=function(e){v.children().remove();var t=this;if(e==1){var n=jQuery('<div class="cell_0" style="width:100px; text-align:left;cursor:pointer;" title="'+s.total+' Reports">'+s.total+" Reports</div>");n.click(function(){g(0)});var r=jQuery('<div class="cell_1" style="width:20px; text-align:center;cursor:pointer;color:#444;" title="switch to "></div>');r.click(function(){g(0)});var i="";i+='<div class="cell_3" style="width:50px; text-align:center;" title="'+Math.round(s.duration/36)/100+' hours">'+Math.round(s.duration/36)/100+"</div>";i+='<div class="cell_4" style="width:50px; text-align:center;" title="'+s.experience+'">'+s.experience+"</div>";i+='<div class="cell_5" style="width:50px; text-align:center;" title="$ '+s.wage+'">'+s.wage+"</div>";i+='<div class="cell_6" style="width:50px; text-align:center;" title="'+s.bond+'">'+s.bond+"</div>";i+='<div class="cell_7" style="width:50px; text-align:center;" title=""> </div>';i+='<div class="cell_8" style="width:50px; text-align:center;" title="'+s.products+'">'+s.products+"</div>";i+='<div class="cell_9" style="width:50px; text-align:center;" title=""> </div>';i+='<div class="cell_10" style="width:50px; text-align:center;color:#444;" title="'+s.items+'">'+s.items+"</div>";i+='<div class="cell_11" style="width:50px; text-align:center;" title="$ '+s.luck+'">'+s.luck+"</div>";v.append(n).append(r).append('<div class="cell_2" style="width:30px; text-align:center;" title="'+s.jobs+' Jobs">'+s.jobs+"</div>").append(i)}else{var n=jQuery('<div class="cell_0" style="width:100px; text-align:left;cursor:pointer;" title="'+s.total+' Reports">'+s.total+" Reports</div>");n.click(function(){g(1)});var r=jQuery('<div class="cell_1" style="width:20px; text-align:center;cursor:pointer;color:#444;" title="switch to "></div>');r.click(function(){g(1)});var i="";i+='<div class="cell_3" style="width:50px; text-align:center;" title="'+Math.round(s.duration/(36*s.total))/100+' hours">'+Math.round(s.duration/(36*s.total))/100+"</div>";i+='<div class="cell_4" style="width:50px; text-align:center;" title="'+Math.round(s.experience/s.total*100)/100+'">'+Math.round(s.experience/s.total*100)/100+"</div>";i+='<div class="cell_5" style="width:50px; text-align:center;" title="$ '+Math.round(s.wage/s.total*100)/100+'">'+Math.round(s.wage/s.total*100)/100+"</div>";i+='<div class="cell_6" style="width:50px; text-align:center;" title="'+Math.round(s.bond/s.total*1e3)/1e3+'">'+Math.round(s.bond/s.total*1e3)/1e3+"</div>";i+='<div class="cell_7" style="width:50px; text-align:center;" title="'+Math.round(s.motivation/s.total*100)/100+'">'+Math.round(s.motivation/s.total*100)/100+"</div>";i+='<div class="cell_8" style="width:50px; text-align:center;" title="'+Math.round(s.products/s.total*1e3)/1e3+'">'+Math.round(s.products/s.total*1e3)/1e3+"</div>";i+='<div class="cell_9" style="width:50px; text-align:center;" title="'+Math.round(s.rate/s.total*1e3)/10+'%">'+Math.round(s.rate/s.total*1e3)/10+"</div>";i+='<div class="cell_10" style="width:50px; text-align:center;color:#444;" title="'+Math.round(s.items/s.total*1e3)/1e3+'">'+Math.round(s.items/s.total*1e3)/1e3+"</div>";i+='<div class="cell_11" style="width:50px; text-align:center;" title="$ '+Math.round(s.luck/s.total*100)/100+'">'+Math.round(s.luck/s.total*100)/100+"</div>";v.append(n).append(r).append('<div class="cell_2" style="width:30px; text-align:center;" title="'+Math.round(s.total/s.jobs*100)/100+' Reports/Jobs">'+Math.round(s.total/s.jobs*100)/100+"</div>").append(i)}v.find(".cell_10").css("cursor","pointer").click(function(){m.itemReport(10)}).mouseenter(function(){jQuery(this).css("color","#888")}).mouseleave(function(){jQuery(this).css("color","#444")});v.find(".cell_1").mouseenter(function(){jQuery(this).css("color","#888")}).mouseleave(function(){jQuery(this).css("color","#444")})};g(1);var y=jQuery('<div style="margin: 0px 6px 0px 6px;width:680px;" />').append(n);this.gui.window.children().remove();this.gui.window.append(y);MessagesWindow.window.hideLoader()}},sort:function(e){var t=jQuery(e).parent().parent().attr("class");if(t=="cell_10"){this.reset();return}if(this.sorting.type==t){this.sorting.ord*=-1}else{this.sorting.ord=1;this.sorting.type=t}var n=this.sorting.ord;if(t=="cell_0"){var r=function(e,r){return jQuery(e).find("."+t).html()>jQuery(r).find("."+t).html()?n:-n}}else{var r=function(e,r){return jQuery(e).find("."+t).html()*1>jQuery(r).find("."+t).html()*1?n:-n}}this.gui.rows.sort(r);for(var i=0;i<this.gui.rows.length;i++){this.gui.bodyscroll.appendContent(this.gui.rows[i])}},detail:function(e){try{var t=this.statistic.jobs[e];var n=0;var r=0;var i=0;for(var s in t.products){n+=t.products[s].count;var o=ItemManager.get(s);i+=o.price*t.products[s].count}for(var s in t.items){r+=t.items[s];var o=ItemManager.get(s);i+=o.price}var u=new tw2gui.scrollpane;jQuery(u.getMainDiv()).css("height","370px");var a=jQuery('<div class="fancytable" style="margin: 0px 5px 0px 5px;width:680px;" ><div class="_bg tw2gui_bg_tl"></div><div class="_bg tw2gui_bg_tr"></div><div class="_bg tw2gui_bg_bl"></div><div class="_bg tw2gui_bg_br"></div><div class="trows"><div class="thead statics"><div class="row_head">'+'<div class="cell_0" style="width:15px; text-align:center;"><span style="cursor:pointer, margin-bottom:3px;"> </span></div>'+'<div class="cell_1" style="width:70px; text-align:center;"><span title="Duration"><img src="'+TWDB.images.iconClock+'" /></span></div>'+'<div class="cell_2" style="width:70px; text-align:center;"><span title="Experience"><img src="'+TWDB.images.iconExperience+'" /></span></div>'+'<div class="cell_3" style="width:70px; text-align:center;"><span title="Wage"><img src="'+TWDB.images.iconDollar+'" /></span></div>'+'<div class="cell_4" style="width:70px; text-align:center;"><span title="Bond"><img src="'+TWDB.images.iconUpb+'" /></span></div>'+'<div class="cell_5" style="width:70px; text-align:center;"><span title="Motivation"><img src="'+TWDB.images.iconMoti+'" /></span></div>'+'<div class="cell_6" style="width:70px; text-align:center;"><span title="Products"><img src="'+TWDB.images.iconYield+'" /></span></div>'+'<div class="cell_7" style="width:70px; text-align:center;"><span title="Item"><img src="'+TWDB.images.iconItem+'" /></span></div>'+'<div class="cell_8" style="width:70px; text-align:center;"><span title="Luck"><img src="'+TWDB.images.iconLuck+'" /></span></div>'+'</div></div><div class="tbody" style="min-height:50px;background: url('+Game.cdnURL+'/images/tw2gui/table/table_row.png) repeat scroll center bottom transparent;">'+'<div class="row row_0">'+'<div class="cell_0" style="width:20px; text-align:center;"><span style="text-size:14px;text-weigth:bold;"></span></div>'+'<div class="cell_1" style="width:70px; text-align:center;"><span title="'+Math.round(t.duration/36)/100+'">'+Math.round(t.duration/36)/100+"</span></div>"+'<div class="cell_2" style="width:70px; text-align:center;"><span title="'+t.experience+'">'+t.experience+"</span></div>"+'<div class="cell_3" style="width:70px; text-align:center;"><span title="'+t.wage+'">'+t.wage+"</span></div>"+'<div class="cell_4" style="width:70px; text-align:center;"><span title="'+t.bond+'">'+t.bond+"</span></div>"+'<div class="cell_5" style="width:70px; text-align:center;"><span title="'+t.motivation+'">'+t.motivation+"</span></div>"+'<div class="cell_6" style="width:70px; text-align:center;"><span title="'+n+'">'+n+"</span></div>"+'<div class="cell_7" style="width:70px; text-align:center;"><span title="'+r+'">'+r+"</span></div>"+'<div class="cell_8" style="width:70px; text-align:center;"><span title="'+i+'">'+i+"</span></div>"+"</div>"+'<div class="row row_1">'+'<div class="cell_0" style="width:20px; text-align:center;"><span style="text-size:14px;text-weigth:bold;"></span></div>'+'<div class="cell_1" style="width:70px; text-align:center;"><span title="'+Math.round(t.duration/(36*t.reports))/100+'">'+Math.round(t.duration/(36*t.reports))/100+"</span></div>"+'<div class="cell_2" style="width:70px; text-align:center;"><span title="'+Math.round(t.experience*100/t.reports)/100+'">'+Math.round(t.experience*100/t.reports)/100+"</span></div>"+'<div class="cell_3" style="width:70px; text-align:center;"><span title="'+Math.round(t.wage*100/t.reports)/100+'">'+Math.round(t.wage*100/t.reports)/100+"</span></div>"+'<div class="cell_4" style="width:70px; text-align:center;"><span title="'+Math.round(t.bond*TWDB.Time.getBase()/t.duration*1e5)/1e3+'">'+Math.round(t.bond*TWDB.Time.getBase()/t.duration*1e5)/1e3+"%</span></div>"+'<div class="cell_5" style="width:70px; text-align:center;"><span title="'+Math.round(t.motivation*100/t.reports)/100+'">'+Math.round(t.motivation*100/t.reports)/100+"</span></div>"+'<div class="cell_6" style="width:70px; text-align:center;"><span title="'+Math.round(n*TWDB.Time.getBase()/t.duration*1e4)/100+'">'+Math.round(n*TWDB.Time.getBase()/t.duration*1e4)/100+"%</span></div>"+'<div class="cell_7" style="width:70px; text-align:center;"><span title="'+Math.round(r*TWDB.Time.getBase()/t.duration*1e4)/100+'">'+Math.round(r*TWDB.Time.getBase()/t.duration*1e4)/100+"%</span></div>"+'<div class="cell_8" style="width:70px; text-align:center;"><span title="'+Math.round(i*100/t.reports)/100+'">'+Math.round(i*100/t.reports)/100+"</span></div>"+"</div>"+"</div></div></div>");u.appendContent(a);u.appendContent('<div style="margin:5px 0px 5px 0px;width:710px;height:10px;display:block;background: url('+Game.cdnURL+'/images/window/dailyactivity/wood_devider_horiz.png) repeat-x scroll 0 0 transparent;" />');for(var f in t.products){var l=(new InventoryItem(ItemManager.get(f))).getMainDiv().clone(true);jQuery(l).children("div").remove();jQuery(l).css("cursor","normal");u.appendContent(jQuery('<div style="display:block;height:65px;margin: 0px 5px 0px 10px;" />').append(l).append('<div style="display:inline-block;margin:5px;">'+t.products[f].count+'</div><br /><div style="display:inline-block;margin:5px;">'+Math.round(t.products[f].count*TWDB.Time.getBase()/t.duration*1e4)/100+"%</div>"));u.appendContent(this.diagram(t.products[f]));u.appendContent('<div style="margin:5px 0px 5px 0px;width:710px;height:10px;display:block;background: url('+Game.cdnURL+'/images/window/dailyactivity/wood_devider_horiz.png) repeat-x scroll 0 0 transparent;" />')}var c=jQuery('<div style="display:block;margin: 0px 5px 0px 10px;"/>');for(var f in t.items){var l=new InventoryItem(ItemManager.get(f));l.setCount(t.items[f]);l=l.getMainDiv().clone(true);jQuery(l).children("div").remove();jQuery(l).css("cursor","normal");c.append(jQuery('<div style="display:inline-block;margin: 2px; height:62px;width:62px;" />').append(l))}u.appendContent(c);var h=wman.open(e,null,"noreload").setMiniTitle(e).setTitle(e).appendToContentPane(u.getMainDiv())}catch(p){TWDB.Error.report(p,"Report Detail")}},diagram:function(e){try{var t=e.attempts;var n=0;var r=0;for(var i in t){if(t[i]>n){n=t[i]}if(Number(i)>r){r=Number(i)}}var s=Math.round(660/r);if(s>10){s=10}else if(s<1){s=1}var o=Math.floor(s/4);var u=jQuery('<div style="position:absolute;top:0;bottom:10;left:0;right:0;padding:0px 0px 10px 10px;" />');var a=jQuery('<div style="position:relative;top:-9px;display:block;height:20px;"><div style="display:inline-block;width:'+(s*5+10)+'px;"> </div></div>');for(var f=1;f<=r;f++){if(typeof t[f]=="undefined"){u.append('<div style="display:inline-block;height:180px;width:'+(s-o)+"px;margin:9px 0px 0px "+o+'px;" />')}else{var l=t[f]/n*180;l=l<5?5:l;var c=jQuery('<div style="display:inline-block;height:'+l+"px;width:"+(s-o)+"px;margin:9px 0px 0px  "+o+"px;bottom:0px;background: url("+Game.cdnURL+'/images/tw2gui/window2_scrollbar_vertical.png) repeat-y scroll -48px 0 transparent;" title="'+t[f]+"x "+f+' attempts"/>');c.hover(function(){jQuery(this).css("opacity","0.5")},function(){jQuery(this).css("opacity","1")});u.append(c)}if(!((f-1)%10)){a.append('<div style="display:inline-block;width:'+s*10+'px;text-align:center;font-size:10px;">'+(f+9)+"</div>")}}var h=jQuery('<div style="position:relative;width:100%;height:200px;display:block;" >'+'<div style="position:absolute;top:0;bottom:0;left:0;width:58px;background-image: url('+Game.cdnURL+'/images/tw2gui/table/table_border.png?3);background-position: left bottom;" />'+'<div style="position:absolute;height:7px;bottom:4px;left:58px;right:0;background: url('+TWDB.images.tableBorder+');" />'+"</div>");h.append(u);return jQuery('<div style="margin: 0px 5px 0px 5px;width:'+(Math.ceil(r/10/1)*10*s+5*s+10)+'px;height:220px;display:block;"/>').append(h).append(a)}catch(p){TWDB.Error.report(p,"Analyser diagram")}},itemReport:function(e){var t=this.statistic.jobs._finds.detailed;var n=100/e;var r={};var i={};var s=0;var o=0;var u='<div class="cell_0" style="width:95px; text-align:center;sfont-size:12px;"></div><div class="cell_1" style="width:50px; text-align:center;font-size:12px;" title="overall">overall</div>';for(var a=0;a<e;a++){u+='<div class="cell_'+(a+2)+'" style="width:50px; text-align:center;font-size:12px;" title="Motivation >= '+Math.round(100-(a+1)*n)+'%">'+Math.round(100-(a+1)*n)+"%</div>"}var f=[];for(var l in t){f.push(parseInt(l))}f.sort(function(e,t){return t-e});var c=new tw2gui.scrollpane;jQuery(c.getMainDiv()).css("height","300px");var h=0;for(var p=0;p<f.length;p++){var l=f[p];var d=t[l];var v={};var m={};var g=0;var y=0;for(var b in d){var w=Math.ceil((100-b)/n)-1;w=w<0?0:w;if(typeof v[w]=="undefined"){v[w]=0;m[w]=0}if(typeof r[w]=="undefined"){r[w]=0;i[w]=0}v[w]+=d[b].finds;m[w]+=d[b].count;r[w]+=d[b].finds;i[w]+=d[b].count;y+=d[b].finds;g+=d[b].count;o+=d[b].finds;s+=d[b].count}var E='<div class="cell_0" style="width:95px; text-align:center;font-size:12px;" title="Findings" >Findings</div><div class="cell_1" style="width:50px; text-align:center;font-size:12px;" title="'+y+'">'+y+"</div>";var S='<div class="cell_0" style="width:95px; text-align:center;font-size:12px;" title="attempts" >attempts</div><div class="cell_1" style="width:50px; text-align:center;font-size:12px;" title="'+g+'">'+g+"</div>";var x='<div class="cell_0" style="width:95px; text-align:center;font-size:12px;" title="Rate" >Rate</div><div class="cell_1" style="width:50px; text-align:center;font-size:12px;" title="'+Math.round(y/g*1e4)/100+'%">'+Math.round(y/g*1e4)/100+"%</div>";for(var a=0;a<e;a++){if(typeof m[a]!="undefined"){E+='<div class="cell_'+(a+2)+'" style="width:50px; text-align:center;font-size:12px;" title="'+v[a]+'">'+v[a]+"</div>";S+='<div class="cell_'+(a+2)+'" style="width:50px; text-align:center;font-size:12px;" title="'+m[a]+'">'+m[a]+"</div>";x+='<div class="cell_'+(a+2)+'" style="width:50px; text-align:center;font-size:12px;" title="'+Math.round(v[a]/m[a]*1e4)/100+'%">'+Math.round(v[a]/m[a]*1e4)/100+"%</div>"}else{E+='<div class="cell_'+(a+2)+'" style="width:50px; text-align:center;font-size:12px;" title="">0</div>';S+='<div class="cell_'+(a+2)+'" style="width:50px; text-align:center;font-size:12px;" title="">0</div>';x+='<div class="cell_'+(a+2)+'" style="width:50px; text-align:center;font-size:12px;" title="">0</div>'}}c.appendContent('<div class="row row_'+h+'"><div class="cell_0" style="width:595px; text-align:center;font-size:12px;" title="'+TWDB.Time.time2str(l)+'">'+TWDB.Time.time2str(l)+'</div></div><div class="row row_'+(h+1)+'">'+E+'</div><div class="row row_'+(h+2)+'">'+S+'</div><div class="row row_'+(h+3)+'">'+x+"</div>");h+=4}var E='<div class="cell_0" style="width:95px; text-align:center;font-size:12px;" title="Findings" >Findings</div><div class="cell_1" style="width:50px; text-align:center;font-size:12px;" title="'+o+'">'+o+"</div>";var S='<div class="cell_0" style="width:95px; text-align:center;font-size:12px;" title="attempts" >attempts</div><div class="cell_1" style="width:50px; text-align:center;font-size:12px;" title="'+s+'">'+s+"</div>";var x='<div class="cell_0" style="width:95px; text-align:center;font-size:12px;" title="Rate" >Rate</div><div class="cell_1" style="width:50px; text-align:center;font-size:12px;" title="'+Math.round(o/s*1e4)/100+'%">'+Math.round(o/s*1e4)/100+"%</div>";for(var a=0;a<e;a++){if(typeof i[a]!="undefined"){E+='<div class="cell_'+(a+2)+'" style="width:50px; text-align:center;font-size:12px;" title="'+r[a]+'">'+r[a]+"</div>";S+='<div class="cell_'+(a+2)+'" style="width:50px; text-align:center;font-size:12px;" title="'+i[a]+'">'+i[a]+"</div>";x+='<div class="cell_'+(a+2)+'" style="width:50px; text-align:center;font-size:12px;" title="'+Math.round(r[a]/i[a]*1e4)/100+'%">'+Math.round(r[a]/i[a]*1e4)/100+"%</div>"}else{E+='<div class="cell_'+(a+2)+'" style="width:50px; text-align:center;font-size:12px;" title="">0</div>';S+='<div class="cell_'+(a+2)+'" style="width:50px; text-align:center;font-size:12px;" title="">0</div>';x+='<div class="cell_'+(a+2)+'" style="width:50px; text-align:center;font-size:12px;" title="">0</div>'}}c.appendContent('<div class="row row_'+h+'"><div class="cell_0" style="width:595px; text-align:center;font-size:12px;" title="overall">overall</div></div><div class="row row_'+(h+1)+'">'+E+'</div><div class="row row_'+(h+2)+'">'+S+'</div><div class="row row_'+(h+3)+'">'+x+"</div>");var T=jQuery('<div class="fancytable"><div class="_bg tw2gui_bg_tl"></div><div class="_bg tw2gui_bg_tr"></div><div class="_bg tw2gui_bg_bl"></div><div class="_bg tw2gui_bg_br"></div><div class="trows"><div class="thead statics"><div class="row_head">'+u+'</div></div><div class="tbody"></div><div class="tfoot statics"></div></div></div>');T.find(".tbody").append(c.getMainDiv());var N=jQuery('<div style="margin: 0px 6px 0px 6px;width:680px;" />').append(T);var C=wman.open("twdb_itemreport",null,"noreload").setMiniTitle("TWDB Item-Report").setTitle("tw-db.info Item-Report");C.appendToContentPane(N)}});TWDB.ClothCalc2=new Object({uid:"twdb_clothcalc",_type2id:{animal:1,body:2,foot:3,head:4,left_arm:5,neck:6,right_arm:7,yield:8,pants:9,belt:10},_id2type:{1:"animal",2:"body",3:"foot",4:"head",5:"left_arm",6:"neck",7:"right_arm",8:"yield",9:"pants",10:"belt"},_skill2id:{strength:1,flexibility:2,dexterity:3,charisma:4,build:5,punch:6,tough:7,endurance:8,health:9,ride:10,reflex:11,dodge:12,hide:13,swim:14,aim:15,shot:16,pitfall:17,finger_dexterity:18,repair:19,leadership:20,tactic:21,trade:22,animal:23,appearance:24},_id2skill:{1:"strength",2:"flexibility",3:"dexterity",4:"charisma",5:"build",6:"punch",7:"tough",8:"endurance",9:"health",10:"ride",11:"reflex",12:"dodge",13:"hide",14:"swim",15:"aim",16:"shot",17:"pitfall",18:"finger_dexterity",19:"repair",20:"leadership",21:"tactic",22:"trade",23:"animal",24:"appearance"},_class2id:{greenhorn:1,adventurer:2,duelist:3,worker:4,soldier:5},ready:false,data:{skills:{},items:{},jobs:{},custom:{}},calcdata:{skills:{},items:{},jobs:{},custom:{},animals:[],buyTip:{},jobBoni:{},used:{}},loaded:false,up2date:true,gui:{job:{},custom:{}},init:function(){if(this.ready){return}var e=this;this.jobs.setParent(this);this.joblist.parent=this;this.customs.setParent(this);this.bag.setParent(this);TWDB.Eventer.set("TWDBdataLoaded",function(){e.handleTWDBData()});this.gui.copyright=jQuery('<div style="position:absolute;bottom:0px;left:0px;height:15px;display:block;font-size:10px;color:#000000;">.:powered by tw-db team:. | <a href="http://tw-db.info" style="font-weight:normal;color:#000000;" target="_blank">.:tw-db.info:.</a> | '+(TWDB.script.version/100/1+" rev. "+TWDB.script.revision)+"</div>");this.gui.cache=jQuery('<div style="position:absolute;top:10px;right:8px;width:20px;height:20px;cursor:pointer;" />');this.gui.bag=jQuery('<div style="position:absolute;top:95px;left:1px;width:252px;height:186px;" />');if(!Bag.loaded){Bag.loadItems()}this.BagInt=window.setInterval(function(){e.finishInit()},100);this.data.custom=TWDB.Settings.get("custom",{1:{id:1,type:"speed",para:{},name:"Speed"},2:{id:2,type:"custom",para:{9:1},name:"max Health"},3:{id:3,type:"regen",para:{},name:"Health Regeneration"},4:{id:4,type:"fort",para:{att:200,def:20,health:100,type:0},name:"Fortbattle Attacker (Att)"},5:{id:5,type:"fort",para:{att:20,def:200,health:100,type:0},name:"Fortbattle Attacker (Def)"},6:{id:6,type:"fort",para:{att:200,def:20,health:100,type:1},name:"Fortbattle Defender (Att)"},7:{id:7,type:"fort",para:{att:20,def:200,health:100,type:1},name:"Fortbattle Defender (Def)"},8:{id:8,type:"duel",para:{12:1,15:1,16:1,24:1},name:"Range Dueler (Att)"},9:{id:9,type:"duel",para:{12:1,15:1,16:1,21:1},name:"Range Dueler (Def)"},10:{id:10,type:"duel",para:{6:1,7:1,11:1,15:1},name:"Melee Dueler"}});if(TWDB.script.version+" "+TWDB.script.revision==TWDB.Cache.load("version")){var t=TWDB.Cache.load("calcdata");if(typeof this.calcdata=="object"||this.calcdata!=null){this.calcdata=t}}else{TWDB.Cache.save("calcdata",this.calcdata)}TWDB.Cache.save("version",TWDB.script.version+" "+TWDB.script.revision)},finishInit:function(){if(typeof this.BagInt=="undefined"){return}if(Bag.loaded){window.clearInterval(this.BagInt);delete this.BagInt;this.loaded=true;this.ready=true;this.addButton()}},addButton:function(){if(this.ready===false){return}var e=this;var t=jQuery('<div title="tw-db.info ClothCalc " class="menulink" />').css("background-image","url("+TWDB.images.button+")").css("background-position","0px -25px").mouseenter(function(){jQuery(this).css("background-position","-25px -25px")}).mouseleave(function(){jQuery(this).css("background-position","0px -25px")}).click(function(){e.open()});jQuery("#ui_menubar").append(jQuery('<div class="ui_menucontainer" />').append(t).append('<div class="menucontainer_bottom" />'))},checkSkill:function(){for(var e in this.data.skills){if(typeof this.calcdata.skills[e]=="undefined"){return true}if(this.data.skills[e].val!=this.calcdata.skills[e].val){return true}}return false},checkItems:function(){for(var e in this.data.items){if(typeof this.calcdata.items[e]=="undefined"){return true}}for(var e in this.calcdata.items){if(typeof this.data.items[e]=="undefined"){return true}}return false},checkCustom:function(){var e=0;for(var e in this.data.custom){if(typeof this.calcdata.custom[e]=="undefined"){return true}if(this.calcdata.custom[e].name!=this.data.custom[e].name){return true}for(var t in this.data.custom[e].para){if(typeof this.calcdata.custom[e].para[t]=="undefined"){return true}if(this.calcdata.custom[e].para[t]!=this.data.custom[e].para[t]){return true}}}if(typeof this.calcdata.custom[Number(e)+1]!="undefined"){return true}return false},checkCache:function(){var e=this.checkItems();var t=this.checkSkill();var n=this.checkCustom();this.gui.cache.children().remove();if(e||t||n){var r="the Data is outdated, click for Update";if(e){r+=" [Inventory]"}if(t){r+=" [Skill]"}if(n){r+=" [Custom skills]"}var i=jQuery('<div title="'+r+'" style="position:absolute;top:0px;right:0px;width:20px;height:20px;background: url('+TWDB.images.iconData+')no-repeat 0px 0px;" />');this.up2date=false}else{var i=jQuery('<div title="the Data is up to Date" style="position:absolute;top:0px;right:0px;width:20px;height:20px;background: url('+TWDB.images.iconData+')no-repeat -20px 0px;" /></div>');this.up2date=true}this.gui.cache.append(i);var s=this;i.click(function(){TWDB.DataManager.loadData(true)})},open:function(){if(this.ready==false){return}if(wman.getById(this.uid)){return}var e=this;if(typeof this.eventOpen!="undefined"){TWDB.Eventer.remove("getGameData",this.eventOpen)}var t=0;for(var n in this.calcdata.jobs){t++;break}if(t==0){this.eventOpen=TWDB.Eventer.set("getGameData",function(){TWDB.DataManager.loadData(true)},1);this.up2date=false;this.getGameData()}else{this.eventOpen=TWDB.Eventer.set("getGameData",function(){e.finishOpening()},1);this.getGameData()}var r=wman.getById(Inventory.uid);Wear.open();var i=wman.getById(Inventory.uid);if(typeof r=="undefined"&&typeof i!="undefined"){i.fireEvent(TWE("WINDOW_CLOSE"),i)}this.jobs.selected=0;this.gui.job.sort=jQuery('<div style="position:absolute;top:10px;left:0px;height:20px;" />').append('<img src="'+TWDB.images.iconName+'" title=" order by name " alt=" order by name " onclick="javascript:TWDB.ClothCalc.joblist.order(\'name\')" style="margin:0px 2px 0px 2px;cursor:pointer;" />').append('<img src="'+TWDB.images.iconExperience+'" title=" order by experience " alt=" order by experience " onclick="javascript:TWDB.ClothCalc.joblist.order(\'experience\')" style="margin:0px 2px 0px 2px;cursor:pointer;" />').append('<img src="'+TWDB.images.iconLuck+'" title=" order by luck " alt=" order by luck " onclick="javascript:TWDB.ClothCalc.joblist.order(\'luck1\')" style="margin:0px 2px 0px 2px;cursor:pointer;" />').append('<img src="'+TWDB.images.iconLaborpoints+'" title=" order by workpoints " alt=" order by workpoints " onclick="javascript:TWDB.ClothCalc.joblist.order(\'laborpoints\')" style="margin:0px 2px 0px 2px;cursor:pointer;" />').append('<img src="'+TWDB.images.iconClock+'" title=" Order by time " alt=" Order by time " onclick="javascript:TWDB.ClothCalc.joblist.order(\'duration\')" style="margin:0px 2px 0px 2px;cursor:pointer;" />').append('<img src="'+TWDB.images.iconMoti+'" title=" Order by motivation " alt=" Order by motivation " onclick="javascript:TWDB.ClothCalc.joblist.order(\'motivation\')" style="margin:0px 2px 0px 2px;cursor:pointer;" />');this.gui.job.title=jQuery('<div style="position:absolute;top:36px;left:0px;width:190px;height:19px;font-weight:bold;text-align:center;">Select job here >></div>');this.gui.job.mode=jQuery("<div style=\"position:absolute;top:10px;right:30px;width:20px;height:20px;background:url('"+TWDB.images.jobMode+'\') no-repeat scroll 0 0 transparent;cursor:pointer;display:block;" title=" Job mode " />');this.gui.job.search=jQuery("<div style=\"position:absolute;top:35px;right:50px;width:20px;height:20px;background:url('"+TWDB.images.iconSearch+'\') no-repeat scroll 0 0 transparent;cursor:pointer;display:none;" title=" Find this job on the map " />');this.gui.job.checkbox=new tw2gui.checkbox("",this.joblist.all?"":"tw2gui_checkbox_checked",function(){if(this.isSelected()){e.joblist.all=false;e.joblist.update()}else{e.joblist.all=true;e.joblist.update()}});this.gui.job.checkbox.setTooltip("Hide Jobs you could not do");this.gui.job.checkbox.getMainDiv().css("position","absolute").css("top","35px").css("right","30px");this.gui.job.button=jQuery('<div style="position:absolute;top:35px;right:4px;width:26px;height:20px;background:url(\'/images/window/character/title_editbtn.jpg\') no-repeat scroll 0 0 transparent;cursor:pointer;" title=" Select job here " />');this.gui.job.skills=jQuery('<div style="position:absolute;top:60px;left:1px;width:252px;height:30px;display:block;" />');this.gui.job.mainDiv=jQuery('<div style="position:absolute;top:0px;left:0px;height:100%;width:100%;" />');this.gui.job.mainDiv.append(this.gui.job.sort);this.gui.job.mainDiv.append(this.gui.job.title);this.gui.job.mainDiv.append(this.gui.job.mode);this.gui.job.mainDiv.append(this.gui.job.search);this.gui.job.mainDiv.append(this.gui.job.checkbox.getMainDiv());this.gui.job.mainDiv.append(this.gui.job.button);this.gui.job.mainDiv.append(this.joblist.getMainDiv());this.gui.job.mainDiv.append(this.gui.job.skills);this.gui.job.button.click(function(){if(e.joblist.getMainDiv().is(":visible")){e.joblist.close()}else{e.joblist.open()}}.bind(this));this.gui.job.search.click(function(){e.jobSearch()}.bind(this));this.gui.job.searchDiv=jQuery("<div />");this.customs.selected=0;this.gui.custom.title=jQuery('<div style="position:absolute;top:36px;left:0px;width:210px;height:19px;font-weight:bold;text-align:center;">Select job here >></div>');this.gui.custom.settings=jQuery('<div title="settings" style="position:absolute;top:35px;right:30px;width:20px;height:20px;background:url('+TWDB.images.iconSetting+');cursor:pointer;" />');this.gui.custom.settings.click(function(){e.customs.showConfig()});this.gui.custom.button=jQuery('<div style="position:absolute;top:35px;right:4px;width:26px;height:20px;background:url(\'/images/window/character/title_editbtn.jpg\') no-repeat scroll 0 0 transparent;cursor:pointer;" title=" Select job here " />');this.gui.custom.selectbox=new tw2gui.selectbox;this.gui.custom.selectbox.setPosition(255,34).setWidth(300).addListener(function(t){e.customs.switch(t)}.bind(this));jQuery(this.gui.custom.selectbox.elContent).css("max-height","300px");this.gui.custom.skills=jQuery('<div style="position:absolute;top:60px;left:1px;width:252px;height:30px;display:block;" />');this.gui.custom.mainDiv=jQuery('<div style="position:absolute;top:0px;left:0px;height:100%;width:100%;" />').hide();this.gui.custom.mainDiv.append(this.gui.custom.title);this.gui.custom.mainDiv.append(this.gui.custom.settings);this.gui.custom.mainDiv.append(this.gui.custom.button);this.gui.custom.mainDiv.append(this.gui.custom.selectbox.getMainDiv());this.gui.custom.mainDiv.append(this.gui.custom.skills);this.gui.custom.button.click(function(){e.gui.custom.selectbox.toggleDisplay()}.bind(this));this.gui.bag.children().remove();var s=function(t,n){e.showTab(t,n)};this.gui.window=wman.open(this.uid,null,"noreload").setMiniTitle("TWDB Cloth Calc").setTitle("tw-db.info Cloth Calc").addTab("Job","Jobs",s).addTab("Custom skills","Custom",s).appendToContentPane(this.gui.job.mainDiv).appendToContentPane(this.gui.custom.mainDiv).appendToContentPane(this.gui.cache).appendToContentPane(this.gui.bag).appendToContentPane(this.gui.copyright);this.gui.window.showLoader();var o=$('<div title="save Position" style="width:20px;height:20px;position:absolute;left:0px;top:0px;background:url(\''+TWDB.images.iconSave+"') no-repeat scroll 0px -20px transparent;cursor:pointer;display:block;\" />").hover(function(){$(this).css("background-position","0px 0px")},function(){$(this).css("background-position","0px -20px")}).click(function(){TWDB.Settings.set("clothPos","custom");var t=e.gui.window.saveAppearance();TWDB.Settings.set("clothPosition",{x:t.x,y:t.y});(new UserMessage("saved successful",UserMessage.TYPE_SUCCESS)).show()});$(this.gui.window.divMain).find(".tw2gui_window_buttons").append(o);$(this.gui.window.divMain).children(".tw2gui_window_tabbar").css("right","22px");var u=this.gui.window.saveAppearance();switch(TWDB.Settings.get("clothPos","left")){case"right":u.x=Wear.window.divMain.offsetLeft+Wear.window.divMain.offsetWidth-15;break;case"left":u.x=Wear.window.divMain.offsetLeft-295;break;case"custom":var u=TWDB.Settings.get("clothPosition",{x:0,y:0});break}this.gui.window.restoreAppearance({h:410,w:310,x:u.x,y:u.y});return},finishOpening:function(){this.jobs.mode();this.joblist.init(this);this.customs.createSelectbox();if(typeof this.gui.window!="undefined"){this.checkCache();delete this.eventOpen;this.gui.window.hideLoader()}},showTab:function(e,t){this.gui.window.activateTab(t);this.gui.window.showLoader();this.gui.bag.children().remove();switch(t){case"Jobs":this.gui.custom.mainDiv.hide();if(this.jobs.selected!=0){this.jobs.switch(this.jobs.selected)}this.gui.job.mainDiv.show();break;case"Custom":this.gui.job.mainDiv.hide();if(this.customs.selected!=0){this.customs.switch(this.customs.selected)}this.gui.custom.mainDiv.show();break}this.gui.window.hideLoader()},getGameData:function(e){var t=this;if(typeof e=="undefined"){this.getState={skill:false,items:false,jobs:false};TWDB.Eventer.set("getSkill",function(){t.getGameData("skill")},1);TWDB.Eventer.set("getItems",function(){t.getGameData("items")},1);TWDB.Eventer.set("getJobs",function(){t.getGameData("jobs")},1);this.getSkill();this.getItems();this.getJobs()}else{this.getState[e]=true;var n=true;for(var r in this.getState){if(!this.getState[r]){n=false;break}}if(n){delete this.getState;TWDB.Eventer.trigger("getGameData")}}},getSkill:function(e){if(typeof e=="undefined"){var t=this;setTimeout(function(){t.getSkill(CharacterSkills.skills)},10);return}else{this.data.skills={};for(var n in e){var r=this._skill2id[n];this.data.skills[r]={id:r,val:e[n].points}}TWDB.Eventer.trigger("getSkill")}},getItems:function(e){if(typeof e=="undefined"){var t=this;jQuery.post("game.php?window=inventory",{},function(e){t.getItems(e)},"json");return}else{this.data.items={};for(var n=0;n<e.wear.length;n++){var r=ItemManager.get(e.wear[n]);if(!this.isItemUsable(r.item_id)){continue}this.data.items[r.item_id]={id:r.item_id}}for(var i in Bag.items){for(var n in Bag.items[i]){var r=ItemManager.get(Number(n));if(!this.isItemUsable(r.item_id)){continue}this.data.items[r.item_id]={id:r.item_id}}}TWDB.Eventer.trigger("getItems")}},getJobs:function(e){if(typeof e=="undefined"){var t=this;jQuery.post("game.php?window=work&mode=index",{},function(e){t.getJobs(e)},"json");return}else{this.data.jobs=e;TWDB.Eventer.trigger("getJobs")}},isItemUsable:function(e,t){var n=ItemManager.get(e);if(typeof n=="undefined"){return false}var r=false;if(!this.itemHasBonus(n)){return false}if(n.characterClass!==null&&n.characterClass!==Character.charClass){return false}if(n.characterSex!==null&&n.characterSex!==Character.charSex){return false}if(n.level!==null&&n.level>Character.level+Character.itemLevelRequirementDecrease["all"]+(typeof Character.itemLevelRequirementDecrease[n.type]!="undefined"?Character.itemLevelRequirementDecrease[n.type]:0)){if(isDefined(t)&&t){return true}else{return false}}return true},itemHasBonus:function(e){if(e.type=="left_arm"||e.type=="right_arm"){return true}if(typeof e.set!="undefined"&&e.set!=null){return true}if(typeof e.speed!="undefined"&&e.speed!=null){return true}if(typeof e.bonus=="undefined"){return false}if(typeof e.bonus.skills!="undefined"){for(var t in e.bonus.skills){if(!jQuery.isFunction(e.bonus.skills[t])){return true}}}if(typeof e.bonus.attributes!="undefined"){for(var t in e.bonus.attributes){if(!jQuery.isFunction(e.bonus.attributes[t])){return true}}}if(typeof e.bonus.fortbattle!="undefined"){for(var t in e.bonus.fortbattle){if(e.bonus.fortbattle[t]>0){return true}}}if(typeof e.bonus.fortbattlesector!="undefined"){for(var t in e.bonus.fortbattlesector){if(e.bonus.fortbattle[t]>0){return true}}}return false},handleTWDBData:function(){var e=TWDB.DataManager.getData("twdb");var t=this;this.calcdata.items=jQuery.extend(true,{},t.data.items);this.calcdata.skills=jQuery.extend(true,{},t.data.skills);this.calcdata.time=e.time;this.calcdata.jobs=e.jobs;this.calcdata.custom=e.custom;this.calcdata.used={};try{this.jobs.init()}catch(n){TWDB.Error.report(n,"GENERICERROR#; handle Jobs")}try{this.joblist.reset()}catch(n){TWDB.Error.report(n,"GENERICERROR#; handle Jobslist")}try{this.customs.init()}catch(n){TWDB.Error.report(n,"GENERICERROR#; handle Customs")}try{this.setUsedItems()}catch(n){TWDB.Error.report(n,"GENERICERROR#; setUsedItems")}TWDB.Cache.save("calcdata",this.calcdata);this.finishOpening()},jobs:new Object({selected:0,base:null,sort:{list:[],type:"name",order:1},setParent:function(e){this.parent=e},init:function(){var e=[];var t=0;var n=0;while(true){t++;var r=JobList.getJobById(t);if(!r){n++;if(n>5){break}continue}n=0;e[r.shortname]=r.id}for(var i in this.parent.calcdata.jobs){var r=this.parent.calcdata.jobs[i];if(typeof e[r.short_name]=="undefined"){if(r.short_name=="construction"){r.name="Construction";r.skills={};r.gameid=0;r.laborpoints.current=0;r.duration=7200*Number(this.parent.data.jobs.workspeed);r.energy=24}else{r.name="!!".job.short_name;r.skills={};r.gameid=0;r.laborpoints.current=0;r.duration=0;r.energy=0}continue}var s=JobList.getJobById(e[r.short_name]);r.name=s.name;r.skills=s.skills;r.gameid=s.id;r.difficulty=s.malus;r.duration=s.duration;r.energy=s.energy;r.laborpoints.current=0}},update:function(){if(typeof this.parent.calcdata.jobs[this.selected]!="undefined"){var e=this.calcJob(this.selected);var t=e.name.substring(0,18)+" ["+e.laborpoints.current+"/"+e.laborpoints.sum+"]";this.parent.gui.job.title.html(t)}},"switch":function(e){if(typeof this.parent.calcdata.jobs[e]=="undefined"||typeof this.parent.calcdata.jobs[e].cloth=="undefined"){return}var t=this.parent;var n=t.calcdata.jobs[e];if(n.gameid!=0){TWDB.Map.setMinimapJob(n.name);t.gui.job.search.show()}else{t.gui.job.search.hide()}this.selected=e;var r=n.name.substring(0,18)+" ["+n.laborpoints.current+"/"+n.laborpoints.sum+"]";t.gui.job.title.html(r);t.bag.showItems(n.cloth,"jobs");t.gui.job.skills.children().remove();for(var i in n.skills){for(var s=0;s<n.skills[i];s++){var o=jQuery('<div style="float:left;widht;30px;heigth:30px;" />');t.gui.job.skills.append(o.append(t.getSkillImg(i,30)))}}},mode:function(e){var t=this;switch(e){case"energy":this.base="energy";this.parent.gui.job.mode.css("background-position","-20px 0px").css("opacity","1").click(function(){t.mode("duration");t.parent.joblist.update()});break;case"duration":this.base="duration";this.parent.gui.job.mode.css("background-position","-40px 0px").css("opacity","1").click(function(){t.mode();t.parent.joblist.update()});break;default:this.base=null;this.parent.gui.job.mode.css("background-position","0px 0px").css("opacity","0.5").click(function(){t.mode("energy");t.parent.joblist.update()});break}},calcJob:function(e){var t=Number(Premium.hasBonus("money"));var n=this.parent.calcdata.jobs[e];n.laborpoints.skills=0;for(var r in n.skills){n.laborpoints.skills+=Number(n.skills[r])*Number(CharacterSkills.skills[r].points)}n.laborpoints.sum=n.laborpoints.cloth;n.laborpoints.sum+=n.laborpoints.skills;n.laborpoints.sum-=n.difficulty+1;var i=JobList.getJobById(n.gameid);if(i){n.laborpoints.current=i.calcJobPoints()-(i.malus+1)}else{n.laborpoints.current=0}var s=n.laborpoints.sum>0?n.laborpoints.sum+1:1;switch(this.base){case"energy":var o=n.energy;break;case"duration":var o=n.duration/60;break;default:var o=1;break}n.values={};if(n.gameid!=0){n.values.experience=Number(this.parent.data.jobs.jobs[n.gameid].expCalc/o).round(2);n.values.motivation=this.parent.data.jobs.jobs[n.gameid].motivation}else{n.values.experience=0;n.values.motivation=0}n.values.name=n.name;n.values.laborpoints=Number(n.laborpoints.sum);n.values.duration=Number(n.duration);n.values.luck1=Math.floor((.9*n.luck+5)*Math.pow(s,.2)*(5+t*2.5));n.values.luck2=Math.floor((.9*n.luck+5)*Math.pow(s,.2)*(15+t*7.5));n.values.danger=Number(n.danger);n.values.wages=Number(Math.round((.9*n.wages+5)*Math.pow(s,.2)*(2+t))/o).round(2);return n},getJobPopup:function(e){var t=this.parent.calcdata.jobs[e].values;t.laborpoints=this.parent.calcdata.jobs[e].laborpoints.sum;var n="<table>"+'<tr><td colspan="4" style="font-weight:bold;text-align:center;font-size:11px;">'+this.parent.calcdata.jobs[e].name+"</td></tr>"+'<tr><td><img src="'+TWDB.images.iconExperience+'" title=" Experience " height="15px" width="15px" /></td><td style="font-size:10px;vertical-align:bottom;">'+t.experience+"</td>"+'<td><img src="'+TWDB.images.iconDollar+'" title=" ?wages " height="15px" width="15px" /></td><td style="font-size:10px;vertical-align:bottom;">'+t.wages+"</td></tr>"+'<tr><td><img src="'+TWDB.images.iconLuck+'" title=" Luck " height="15px" width="15px" /></td><td style="font-size:10px;vertical-align:bottom;">'+t.luck1+"-"+t.luck2+"</td>"+'<td><img src="'+TWDB.images.iconDanger+'" title=" Danger " height="15px" width="15px" /></td><td style="font-size:10px;vertical-align:bottom;">'+t.danger+"</td></tr>"+'<tr><td><img src="'+TWDB.images.iconLaborpoints+'" title=" ?laborpoints " height="15px" width="15px" /></td><td style="font-size:10px;vertical-align:bottom;">'+t.laborpoints+"</td>"+'<td><img src="'+TWDB.images.iconClock+'" title=" Duration " height="15px" width="15px" /></td><td style="font-size:10px;vertical-align:bottom;">'+t.duration+"</td></tr>"+'<tr><td><img src="'+TWDB.images.iconMoti+'" title=" Motivation "  height="15px" width="15px" /></td><td style="font-size:10px;vertical-align:bottom;">'+t.motivation*100+"</td><td></td><td></td></tr>"+"</table>";return n}}),joblist:{ready:false,gui:{},elements:[],focused:0,sort:{type:"name",order:1},all:false,reset:function(){this.ready=false;delete this.elements;this.elements=[];this.getMainDiv().children().remove();this.getMainDiv().append('<style type="text/css">.TWDB_hide{display:none;}.TWDB_filter{display:none;}</style>');this.init(this.parent)},init:function(e){if(this.ready){return}this.ready=true;this.parent=e;if(!this.gui.main){this.gui.main=this.getMainDiv()}this.gui.result=jQuery('<div class="tw2gui_jobsearchbar_allresults" style="width:285px;" />');this.gui.input=(new tw2gui.textfield).maxlength(12).setClass4Input("tw2gui_jobsearch_string").setWidth(265);this.gui.button=jQuery('<div class="tw2gui_jobsearch_showall" style="display:block;cursor:pointer;"></div>');this.gui.scrollpane=new tw2gui.scrollpane;jQuery(this.gui.scrollpane.getMainDiv()).css("width","285px").css("height","250px");for(var t in e.calcdata.jobs){var n=e.calcdata.jobs[t];var r=jQuery("<p>"+n.name+"</p>");var i={};i.dom=r;i.id=t;i.str=n.name.toUpperCase()+" ";if(n.gameid!=0){var s=JobList.getJobById(n.gameid);for(var o in s.yields){if(isNaN(o))continue;var u=ItemManager.get(o);i.str+=u.name.toUpperCase()+" "}}this.elements.push(i)}this.gui.main.append(jQuery('<div style="position:relative;top:0;left:0;width:305px" />').append(this.gui.input.getMainDiv()).append(this.gui.button)).append(this.gui.result);this.update()},open:function(){var e=this;this.gui.result.show();jQuery(this.gui.input.getMainDiv()).keyup(function(t){e.keyHandler(t)});jQuery(this.gui.input.getMainDiv()).find("input").focus(function(){e.gui.result.show()});delete this.gui.scrollpane;this.gui.scrollpane=new tw2gui.scrollpane;jQuery(this.gui.scrollpane.getMainDiv()).css("width","285px").css("height","250px");var t=true;jQuery.each(this.elements,function(n,r){e.updateJob(n);if(t&&r.dom.is(":visible")){this.focused=n;r.dom.addClass("focused");t=false}else{r.dom.removeClass("focused")}r.dom.addMousePopup(TWDB.ClothCalc.jobs.getJobPopup(r.id));r.dom.click(function(t){return function(){e.close();TWDB.ClothCalc.jobs.switch(t)}}(r.id));e.gui.scrollpane.appendContent(r.dom)});this.gui.result.children().remove();this.gui.result.append(this.gui.scrollpane.getMainDiv());this.gui.button.click(function(){if(e.gui.result.is(":visible")){e.gui.result.hide()}else{jQuery(e.gui.input.getMainDiv()).find("input").focus()}});this.gui.main.show()},search:function(e){var t=new RegExp(e.toUpperCase(),"i");var n=true;var r=this;jQuery.each(this.elements,function(e,i){i.dom.removeClass("focused");if(t.test(i.str)){i.dom.removeClass("TWDB_filter");if(n&&i.dom.is(":visible")){r.focused=e;i.dom.addClass("focused");n=false}}else{i.dom.addClass("TWDB_filter")}})},keyHandler:function(e){var t=e.keyCode?e.keyCode:e.which;if(t==38||t==40){if(t==38){this.elements[this.focused].dom.removeClass("focused");for(var n=0;n<this.elements.length;n++){this.focused--;if(this.focused<0){this.focused=this.elements.length-1}if(this.elements[this.focused].dom.is(":visible")){this.elements[this.focused].dom.addClass("focused");break}}}else{this.elements[this.focused].dom.removeClass("focused");for(var n=0;n<this.elements.length;n++){this.focused++;if(this.focused>=this.elements.length){this.focused=0}if(this.elements[this.focused].dom.is(":visible")){this.elements[this.focused].dom.addClass("focused");break}}}var r=this.elements[this.focused].dom.offset().top;var i=jQuery(this.gui.scrollpane.clipPane).offset().top;if(r-i>180){var s=(r-i-90)/16;this.gui.scrollpane.scrollTo(0,s)}else if(i-r>0){var s=(r-i-90)/16;this.gui.scrollpane.scrollTo(0,s)}}else if(t==13){this.elements[this.focused].dom.click()}else{this.search(this.gui.input.getValue())}},order:function(e){function r(t,r){var i=TWDB.ClothCalc.calcdata.jobs[t.id].values[e];var s=TWDB.ClothCalc.calcdata.jobs[r.id].values[e];return i>s?n:-n}function i(t,r){var i=TWDB.ClothCalc.calcdata.jobs[t.id].values[e];var s=TWDB.ClothCalc.calcdata.jobs[r.id].values[e];return i*1>s*1?n:-n}var t=true;if(e){if(e==this.sort.type){this.sort.order*=-1}else{t=false;if(e=="danger"||e=="name"){this.sort.order=1}else{this.sort.order=-1}this.sort.type=e}}var n=this.sort.order;var e=this.sort.type;if(e=="name"){this.elements.sort(r)}else{this.elements.sort(i)}var s=this;var o=true;jQuery.each(this.elements,function(e,n){if(!t){s.updateJob(e)}if(o&&n.dom.is(":visible")){this.focused=e;n.dom.addClass("focused");o=false}else{n.dom.removeClass("focused")}s.gui.scrollpane.appendContent(n.dom)})},updateJob:function(e){var t=this.elements[e];var n=TWDB.ClothCalc.jobs.calcJob(t.id);t.dom.removeClass("TWDB_hide");var r=n.name;r+=" ["+n.laborpoints.current+"/"+n.laborpoints.sum+"] ";switch(this.sort.type){case"luck1":r+="$"+n.values.luck1+" - "+"$"+n.values.luck2;break;case"laborpoints":r+=n.values.laborpoints;break;case"experience":r+=n.values.experience+"exp";break;case"wages":r+="$"+n.values.wages;break;case"danger":r+=n.values.danger+"!";break;case"duration":r+=n.values.duration+" sec";break;case"motivation":r+=n.values.motivation*100+"%";break}t.dom.html(r);if(n.laborpoints.current<0){if(n.laborpoints.sum<0){t.dom.css("color","red");if(!this.all){t.dom.addClass("TWDB_hide")}}else{t.dom.css("color","orange")}}else{t.dom.css("color","#333333")}return n},update:function(){var e=this;jQuery.each(this.elements,function(t,n){e.updateJob(t)});this.order()},getMainDiv:function(){if(!this.gui.main){this.gui.main=jQuery('<div style="position:absolute;left: 255px; top: 30px; display: none;" />').append('<style type="text/css">.TWDB_hide{display:none;}.TWDB_filter{display:none;}</style>')}return this.gui.main},close:function(){this.gui.main.hide()}},customs:new Object({selected:0,setParent:function(e){this.parent=e},init:function(){for(var e in this.parent.calcdata.custom){try{var t=this.parent.calcdata.custom[e];switch(t.type){case"speed":var n=0;var r=0;if(typeof t.cloth[1]!="undefined"){if(typeof t.cloth[1]["other"][1]!="undefined"){n=t.cloth[1]["other"][1]}}if(typeof t.boni.other[1]!="undefined"){r=t.boni.other[1]}r-=n;n+=typeof t.boni.skill[2]!="undefined"?t.boni.skill[2]:0;n+=typeof t.boni.skill[10]!="undefined"?t.boni.skill[10]:0;n+=CharacterSkills.skills.ride.points;t.skills=["ride"];t.laborpoints=Math.round((100+n)*(1+r/100))+"%";break;case"regen":t.skills=["health"];t.laborpoints="";break;case"fort":if(t.para.type==0){var i={};i.aim=CharacterSkills.skills.aim.points+(typeof t.boni.skill[3]!="undefined"?t.boni.skill[3]:0)+(typeof t.boni.skill[15]!="undefined"?t.boni.skill[15]:0);i.endurance=CharacterSkills.skills.endurance.points+(typeof t.boni.skill[1]!="undefined"?t.boni.skill[1]:0)+(typeof t.boni.skill[8]!="undefined"?t.boni.skill[8]:0);i.dodge=CharacterSkills.skills.dodge.points+(typeof t.boni.skill[2]!="undefined"?t.boni.skill[2]:0)+(typeof t.boni.skill[12]!="undefined"?t.boni.skill[12]:0);i.leadership=CharacterSkills.skills.leadership.points+(typeof t.boni.skill[4]!="undefined"?t.boni.skill[4]:0)+(typeof t.boni.skill[20]!="undefined"?t.boni.skill[20]:0);i.health=CharacterSkills.skills.health.points+(typeof t.boni.skill[1]!="undefined"?t.boni.skill[1]:0)+(typeof t.boni.skill[9]!="undefined"?t.boni.skill[9]:0);var s=100+(Character.level-1)*Character.lifePointPerHealthSkill+i.health*(Character.lifePointPerHealthSkill+Character.lifePointPerHealthSkillBonus)+" | ";s+=Math.round((25+Math.pow(i.leadership*1+(Character.charClass=="soldier"?Premium.hasBonus("character")?.5:.25:0),.4)+Math.pow(i.aim,.4)+Math.pow(i.endurance,.4))*100)/100+" | ";s+=Math.round((10+Math.pow(i.leadership*1+(Character.charClass=="soldier"?Premium.hasBonus("character")?.5:.25:0),.4)+Math.pow(i.dodge,.4)+Math.pow(i.endurance,.4))*100)/100}else{var i={};i.aim=CharacterSkills.skills.aim.points+(typeof t.boni.skill[3]!="undefined"?t.boni.skill[3]:0)+(typeof t.boni.skill[15]!="undefined"?t.boni.skill[15]:0);i.hide=CharacterSkills.skills.hide.points+(typeof t.boni.skill[2]!="undefined"?t.boni.skill[2]:0)+(typeof t.boni.skill[13]!="undefined"?t.boni.skill[13]:0);i.dodge=CharacterSkills.skills.dodge.points+(typeof t.boni.skill[2]!="undefined"?t.boni.skill[2]:0)+(typeof t.boni.skill[12]!="undefined"?t.boni.skill[12]:0);i.leadership=CharacterSkills.skills.leadership.points+(typeof t.boni.skill[4]!="undefined"?t.boni.skill[4]:0)+(typeof t.boni.skill[20]!="undefined"?t.boni.skill[20]:0);i.health=CharacterSkills.skills.health.points+(typeof t.boni.skill[1]!="undefined"?t.boni.skill[1]:0)+(typeof t.boni.skill[9]!="undefined"?t.boni.skill[9]:0);var s=100+(Character.level-1)*Character.lifePointPerHealthSkill+i.health*(Character.lifePointPerHealthSkill+Character.lifePointPerHealthSkillBonus)+" | ";s+=Math.round((25+Math.pow(i.leadership*1+(Character.charClass=="soldier"?Premium.hasBonus("character")?.5:.25:0),.4)+Math.pow(i.aim,.4)+Math.pow(i.hide,.4))*100)/100+" | ";s+=Math.round((10+Math.pow(i.leadership*1+(Character.charClass=="soldier"?Premium.hasBonus("character")?.5:.25:0),.4)+Math.pow(i.dodge,.4)+Math.pow(i.hide,.4))*100)/100}t.skills=["health","attacker","defender"];t.laborpoints=s;break;case"duel":t.skills=[];var s=0;for(var o in t.para){var u=Math.floor(o/5);if(typeof t.boni.skill[o]!="undefined"){s+=t.boni.skill[o]}if(typeof t.boni.skill[u]!="undefined"){s+=t.boni.skill[u]}if(typeof this.parent._id2skill[o]!="undefined"){t.skills.push(this.parent._id2skill[o]);if(typeof CharacterSkills.skills[this.parent._id2skill[o]]!="undefined"){s+=CharacterSkills.skills[this.parent._id2skill[o]].points}else if(typeof CharacterSkills.attributes[this.parent._id2skill[o]]!="undefined"){s+=CharacterSkills.attributes[this.parent._id2skill[o]].points}}}t.laborpoints=s;break;case"custom":t.skills=[];var s=0;for(var o in t.para){var u=Math.floor(o/5);if(typeof t.boni.skill[o]!="undefined"){s+=t.boni.skill[o]}if(typeof t.boni.skill[u]!="undefined"){s+=t.boni.skill[u]}if(typeof this.parent._id2skill[o]!="undefined"){t.skills.push(this.parent._id2skill[o]);if(typeof CharacterSkills.skills[this.parent._id2skill[o]]!="undefined"){s+=CharacterSkills.skills[this.parent._id2skill[o]].points}else if(typeof CharacterSkills.attributes[this.parent._id2skill[o]]!="undefined"){s+=CharacterSkills.attributes[this.parent._id2skill[o]].points}}}t.laborpoints=s;break;default:return;break}}catch(a){TWDB.Error.report(a,"GENERICERROR#; handle Customs")}}},calc:function(){if(typeof this.parent.calcdata.custom[this.selected]=="undefined"){return""}var e=this.parent.calcdata.custom[this.selected];if(e.type=="fort"){return"0|0|0"}return 0},createSelectbox:function(){if(!this.parent.gui.custom.selectbox){return}this.parent.gui.custom.selectbox.elContent.empty();this.parent.gui.custom.selectbox.value=null;this.parent.gui.custom.selectbox.items=[];for(var e in this.parent.calcdata.custom){var t=this.parent.calcdata.custom[e].name+" ["+this.parent.calcdata.custom[e].laborpoints+"]";this.parent.gui.custom.selectbox.addItem(e,t)}this.switch(this.selected)},"switch":function(e){if(typeof this.parent.calcdata.custom[e]=="undefined"||typeof this.parent.calcdata.custom[e].cloth=="undefined"){return}var t=this.parent;this.parent.customs.selected=e;var n=" ["+this.parent.calcdata.custom[e].laborpoints+"]";n=this.parent.calcdata.custom[e].name.substring(0,35-n.length)+n;this.parent.gui.custom.title.html(n);this.parent.bag.showItems(this.parent.calcdata.custom[e].cloth,"custom");this.showSkill()},showSkill:function(){this.parent.gui.custom.skills.children().remove();if(typeof this.parent.calcdata.custom[this.parent.customs.selected]=="undefinied"){return}var e=this.calc();var t=String(e).split("|");for(var n=0;n<this.parent.calcdata.custom[this.selected].skills.length;n++){var r=jQuery('<div style="float:left;width:30px;height:30px;" />');r.append(this.parent.getSkillImg(this.parent.calcdata.custom[this.selected].skills[n],30));this.parent.gui.custom.skills.append(r);if(this.parent.calcdata.custom[this.parent.customs.selected].type=="fort"&&typeof t[n]!="undefined"){var i=jQuery('<div style="float:left;height:25px;padding:5px 10px 0px 5px ;font-weight:bold;">'+t[n]+"</div>");this.parent.gui.custom.skills.append(i)}}if(this.parent.calcdata.custom[this.parent.customs.selected].type!="fort"){var i=jQuery('<div style="float:left;height:25px;padding:5px 0px 0px 5px ;font-weight:bold;">'+e+"</div>");this.parent.gui.custom.skills.append(i)}},showConfig:function(){var e=this;var t=jQuery('<div title="Edit" style="display:inline-block;vertical-align:top;height:16px;width:16px;cursor:pointer;background:url(\''+Game.cdnURL+"/images/window/messages/head-icons.png') repeat scroll 0 16px transparent;\" />");var n=jQuery('<div title="delete" style="display:inline-block;vertical-align:top;height:16px;width:16px;cursor:pointer;background:url(\''+Game.cdnURL+"/images/icons/delete.png') repeat scroll 0px 0px transparent;\" />");var r=jQuery('<div title="add" style="display:block;margin-top:2px;vertical-align:top;height:20px;width:25px;cursor:pointer;background:url(\''+Game.cdnURL+"/images/window/messages/icons.png') repeat scroll 72px -5px transparent;\" />");var i=jQuery("<div />");for(var s in this.parent.data.custom){var o=this.parent.data.custom[s];var u=jQuery('<div style="display:inline-block;vertical-align:top;height:16px;width:300px;overflow:hidden;" />').html(o.name);var a=t.clone(false);var f=n.clone(false);var l=jQuery('<div style="display:block;height:18px;padding: 3px 0px 0px 0px;border-bottom: 1px solid #666" />').append(u).append(a).append(f);i.append(l);var c=function(t){return function(){e.editConfig(t)}}(s);a.click(c);var c=function(t){return function(){e.deleteConfig(t)}}(s);f.click(c)}var h=0;for(var s in this.parent.data.custom){h++}if(h<15){i.append(r);r.click(function(){e.addConfig()})}this.parent.gui.custom.config=new MessageDialog("Custom skills",i);this.parent.gui.custom.config.addButton("ok",function(){e.parent.checkCache()});this.parent.gui.custom.config.show()},addConfig:function(){var e=0;for(var t in this.parent.data.custom){e++}if(e>=15){(new UserMessage("too much entries, only ten are allowed",UserMessage.TYPE_ERROR)).show()}else{e++;this.editConfig(e)}},editConfig:function(e,t){if(typeof t=="undefined"){var n=this;var r="";var i="";var s="add - ";if(typeof this.parent.data.custom[e]!="undefined"){s="Edit - ";var r=this.parent.data.custom[e].name;var i=JSON.stringify({type:this.parent.data.custom[e].type,para:this.parent.data.custom[e].para})}this.tmp={name:r,code:i};this.parent.gui.custom.name=(new tw2gui.textfield("twdb_cc_custom_name")).setSize(30).setValue(r);this.parent.gui.custom.code=(new tw2gui.textfield("twdb_cc_custom_code")).setSize(30).setValue(i);var o=jQuery('<table width="400px" />');o.append(jQuery("<tr />").append('<td style="vertical-align:middle">Name:</td>').append(jQuery("<td />").append(this.parent.gui.custom.name.getMainDiv())));o.append(jQuery("<tr />").append('<td style="vertical-align:middle">code:</td>').append(jQuery("<td />").append(this.parent.gui.custom.code.getMainDiv())));o.append('<tr><td colspan="2">please go to tw-db.info an get the code snippets to inserts here from there <a href="http://tw-db.info/?strana=calc" target="_blank">tw-db.info Calculator</a></td></tr>');var o=new MessageDialog(s+"Custom skills",o);o.addButton("ok",function(){return n.editConfig(e,true)});o.addButton("cancel");o.show()}else{var u=function(e){(new UserMessage("the inserts you have done are incorrect: "+e,UserMessage.TYPE_ERROR)).show();return false};if(this.parent.gui.custom.name.getValue()==""){return u("empty Name")}if(this.parent.gui.custom.code.getValue()==""){return u("empty code [1]")}if(this.parent.gui.custom.name.getValue()==this.tmp.name&&this.parent.gui.custom.code.getValue()==this.tmp.code){return true}try{var i=jQuery.parseJSON(this.parent.gui.custom.code.getValue())}catch(a){return u("wrong code [2]")}if(typeof i.type=="undefined"||typeof i.para=="undefined"){return u("wrong code [3]")}var f=0;for(var l in i.para){f++}switch(i.type){case"speed":case"regen":if(f!=0){return u("wrong code [4]")}break;case"fort":if(typeof i.para.type=="undefined"||typeof i.para.att=="undefined"||typeof i.para.def=="undefined"||typeof i.para.health=="undefined"){return u("wrong code [5]")}if(i.para.type!=1&&i.para.type!=0){return u("wrong code [6]")}if(!jQuery.isNumeric(i.para.att)||i.para.att<0){return u("wrong code [7]")}if(!jQuery.isNumeric(i.para.def)||i.para.def<0){return u("wrong code [8]")}if(!jQuery.isNumeric(i.para.health)||i.para.health<0){return u("wrong code [9]")}break;case"duel":case"custom":if(f<=0){return u("wrong code [10]")}break;default:return u("wrong code [11]")}delete this.tmp;this.parent.data.custom[e]={id:Number(e),type:i.type,para:i.para,name:this.parent.gui.custom.name.getValue()};this.parent.gui.custom.config.hide();this.showConfig();TWDB.Settings.set("custom",this.parent.data.custom)}},deleteConfig:function(e,t){if(typeof t=="undefined"){var n=this;var r=new MessageDialog("delete - Custom skills","delete: "+this.parent.data.custom[e].name+"?");r.addButton("ok",function(){n.deleteConfig(e,true)});r.addButton("cancel");r.show()}else{var i=this.parent.data.custom;delete i[e];this.parent.data.custom={};var s=0;for(var e in i){s++;this.parent.data.custom[s]=i[e];this.parent.data.custom[s].id=s}this.parent.gui.custom.config.hide();this.showConfig();TWDB.Settings.set("custom",this.parent.data.custom)}}}),getSkillImg:function(e,t){var n=1;var r=1;var i=0;switch(e){case"build":var s=Game.cdnURL+"/images/skill/skills_strength.png";r=2;break;case"punch":var s=Game.cdnURL+"/images/skill/skills_strength.png";i=1;r=2;break;case"tough":var s=Game.cdnURL+"/images/skill/skills_strength.png";i=2;r=2;break;case"endurance":var s=Game.cdnURL+"/images/skill/skills_strength.png";i=3;r=2;break;case"health":var s=Game.cdnURL+"/images/skill/skills_strength.png";i=4;r=2;break;case"ride":var s=Game.cdnURL+"/images/skill/skills_flexibility.png";r=2;break;case"reflex":var s=Game.cdnURL+"/images/skill/skills_flexibility.png";i=1;r=2;break;case"dodge":var s=Game.cdnURL+"/images/skill/skills_flexibility.png";i=2;r=2;break;case"hide":var s=Game.cdnURL+"/images/skill/skills_flexibility.png";i=3;r=2;break;case"swim":var s=Game.cdnURL+"/images/skill/skills_flexibility.png";i=4;r=2;break;case"aim":var s=Game.cdnURL+"/images/skill/skills_dexterity.png";r=2;break;case"shot":var s=Game.cdnURL+"/images/skill/skills_dexterity.png";i=1;r=2;break;case"pitfall":var s=Game.cdnURL+"/images/skill/skills_dexterity.png";i=2;r=2;break;case"finger_dexterity":var s=Game.cdnURL+"/images/skill/skills_dexterity.png";i=3;r=2;break;case"repair":var s=Game.cdnURL+"/images/skill/skills_dexterity.png";i=4;r=2;break;case"leadership":var s=Game.cdnURL+"/images/skill/skills_charisma.png";r=2;break;case"tactic":var s=Game.cdnURL+"/images/skill/skills_charisma.png";i=1;r=2;break;case"trade":var s=Game.cdnURL+"/images/skill/skills_charisma.png";i=2;r=2;break;case"animal":var s=Game.cdnURL+"/images/skill/skills_charisma.png";i=3;r=2;break;case"appearance":var s=Game.cdnURL+"/images/skill/skills_charisma.png";i=4;r=2;break;case"strength":var s=Game.cdnURL+"/images/attribute_circle/strength.png";break;case"flexibility":var s=Game.cdnURL+"/images/attribute_circle/flexibility.png";break;case"dexterity":var s=Game.cdnURL+"/images/attribute_circle/dexterity.png";break;case"charisma":var s=Game.cdnURL+"/images/attribute_circle/charisma.png";break;case"attacker":var s=TWDB.images.attacker;break;case"defender":var s=TWDB.images.defender;break;default:return jQuery("<div />")}var o="";if(typeof CharacterSkills.skills[e]!="undefined"){var o=CharacterSkills.skills[e].name}else if(typeof CharacterSkills.attribute[e]!="undefined"){var o=CharacterSkills.attribute[e].name}s='<img src="'+s+'" height="'+t*r+'" title="'+o+'" style="margin-left:-'+i*t+'px" />';s=jQuery(s);var u='<div style="display:block;overflow:hidden;width:'+t*n+"px;height:"+t+'px;"/>';u=jQuery(u);return u.append(s)},bag:new Object({stack:{},interval:false,setParent:function(e){this.parent=e},showItems:function(e,t){this.parent.gui.bag.children().remove();this.items={};var n=this;var r=false;addItem=function(e){var r=ItemManager.get(e);var i=new tw2widget.InventoryItem(r);var s=i.getMainDiv();var o=function(e){return function(){n.click(i,e,t)}}(e);jQuery(s).removeAttr("id");jQuery(s).children(".TWDBbuyTip").remove();jQuery(s).children(".TWDBsellTip").remove();jQuery(s).children(".TWDBcollector").remove();jQuery(s).children("img:first-child").removeAttr("id").click(o);jQuery(s).appendTo(n.parent.gui.bag);n.items[e]=jQuery(s)};for(var i in e){if(typeof i=="function"){break}var s=e[i].id;var o=ItemManager.get(s);addItem(s);if(o.type=="animal"){r=true}}if(!r&&this.parent.calcdata.animals.length>0){addItem(this.parent.calcdata.animals[0]["id"])}this.wear()},click:function(e,t,n){var r=Bag.getItemByItemId(t);if(r===undefined){return false}if(Wear.carry(e)){this.stack[t]=e;if(this.interval===false){var i=this;switch(n){case"jobs":var s=function(){i.wear();i.parent.jobs.update();i.parent.joblist.update()};break;case"custom":var s=function(){i.wear();i.parent.customs.showSkill()};break}TWDB.Eventer.set("carryChecker",s,1);this.interval=setInterval(function(){i.carry()},100)}}},carry:function(){var e=0;for(var t in this.stack){var n=this.stack[t];if(n==undefined||n.elImg.css("opacity")==1){delete this.stack[t]}else{e++}}if(e==0){clearInterval(this.interval);this.interval=false;TWDB.Eventer.trigger("carryChecker")}},wear:function(){for(var e in Wear.wear){var t=Wear.wear[e].obj.item_id;if(typeof this.items[t]!="undefined"){this.items[t].css("opacity","0.5")}}}}),setUsedItems:function(){for(var e in this.calcdata.jobs){for(var t in this.calcdata.jobs[e].cloth){var n=this.calcdata.jobs[e].cloth[t].id;if(typeof (this.calcdata.used[n]=="undefined")){this.calcdata.used[n]=1}else{this.calcdata.used[n]++}}}for(var r in this.calcdata.custom){for(var t in this.calcdata.custom[r].cloth){var n=this.calcdata.custom[r].cloth[t].id;if(typeof (this.calcdata.used[n]=="undefined")){this.calcdata.used[n]=1}else{this.calcdata.used[n]++}}}},jobSearch:function(){var e=this;if(this.jobs.selected==0){return}if(this.gui.job.searchDiv.parent().length){this.jobs.switch(this.jobs.selected);return}this.gui.bag.children().remove();var t=TWDB.Map.getNearestJob(this.jobs.selected);var n=4;var r=jQuery("<table />");for(var i=0;i<t.length;i++){if(i==n){break}var s=t[i];var o="rotate("+s.angle+"deg);";var u=jQuery("<tr />");u.append('<td style="text-align:left;vertical-align:middle">'+s.time.formatDuration()+"</td>");u.append(jQuery('<td style="text-align:left;vertical-align:middle">').append(jQuery('<img src="'+TWDB.images.arrow+'" title="?direction" style="cursor:pointer;-moz-transform: '+o+"-webkit-transform:"+o+"-o-transform:"+o+"-ms-transform:"+o+"transform:"+o+'" />').click(function(e,t){return function(){Map.center(e,t)}}(s.x,s.y))));var a=jQuery("<td />");var f=new tw2gui.button("Open",function(e,t,n){return function(){TWDB.Jobs.openJob(e,t,n)}}(e.jobs.selected,s.x,s.y));jQuery(f.divMain).css("min-width","50px").css("max-width","80px");jQuery(f.divMain).find(".textart_title").css("overflow","hidden");f.appendTo(a);u.append(a);if(Premium.hasBonus("automation")){var a=jQuery("<td />");var f=new tw2gui.button("default",function(e,t,n){return function(){TWDB.Jobs.startJob(e,t,n)}}(e.jobs.selected,s.x,s.y));jQuery(f.divMain).css("min-width","50px").css("max-width","80px");jQuery(f.divMain).find(".textart_title").css("overflow","hidden");f.appendTo(a);u.append(a)}r.append(u)}this.gui.job.searchDiv.children().remove();this.gui.job.searchDiv.append(r);this.gui.bag.append(this.gui.job.searchDiv)},isUsedItem:function(e){if(this.calcdata.used[e]){return true}else{return false}},getClothForJob:function(e){if(!isDefined(this.calcdata.jobs[e])||!isDefined(this.calcdata.jobs[e].cloth)){return null}return this.calcdata.jobs[e].cloth},getLPForJob:function(e){if(!isDefined(this.calcdata.jobs[e])||!isDefined(this.calcdata.jobs[e].laborpoints)){return null}return this.calcdata.jobs[e].laborpoints},getSelectedJob:function(){return this.jobs.selected}});(function($){var _base=TWDB;var _skill2id={strength:1,flexibility:2,dexterity:3,charisma:4,build:5,punch:6,tough:7,endurance:8,health:9,ride:10,reflex:11,dodge:12,hide:13,swim:14,aim:15,shot:16,pitfall:17,finger_dexterity:18,repair:19,leadership:20,tactic:21,trade:22,animal:23,appearance:24};var _id2skill={1:"strength",2:"flexibility",3:"dexterity",4:"charisma",5:"build",6:"punch",7:"tough",8:"endurance",9:"health",10:"ride",11:"reflex",12:"dodge",13:"hide",14:"swim",15:"aim",16:"shot",17:"pitfall",18:"finger_dexterity",19:"repair",20:"leadership",21:"tactic",22:"trade",23:"animal",24:"appearance"};var _type2id={animal:1,body:2,foot:3,head:4,left_arm:5,neck:6,right_arm:7,yield:8,pants:9,belt:10};var _id2type={1:"animal",2:"body",3:"foot",4:"head",5:"left_arm",6:"neck",7:"right_arm",8:"yield",9:"pants",10:"belt"};var _class2id={greenhorn:1,adventurer:2,duelist:3,worker:4,soldier:5};var Images=_base.images;var Script=_base.script;var ClothCalc=_base.ClothCalc2;var Cache=function(e){var t={};var n=false;var r="";var i={};var s=function(e){if(!i[e]){i[e]=true;t.save("keys",i)}};t.init=function(){if(n){return}r="twdb_"+Character.playerId+"_";i=t.load("keys",true);if(!i){i={keys:true}}n=true;t.ready=true};t.load=function(i,o){if(!n&&o!==true){t.init()}s(i);try{return e.parseJSON(decodeURIComponent(localStorage.getItem(r+i)))}catch(u){Error.report(u,"load "+i+" from cache");t.save(i,null);return null}};t.save=function(e,i){if(!n){t.init()}s(e);try{localStorage.setItem(r+e,encodeURIComponent(JSON.stringify(i)));return true}catch(o){Error.report(o,"save "+e+" to cache");t.save(e,null);return false}};t.reset=function(e){try{if(e){for(var n in i){localStorage.removeItem(r+n)}location.href=location.href.replace(location.hash||"#","")}else{var s="tw-db Cache Reset";var o='<div class="txcenter">do you really want to reset the whole Cache of tw-db Userscript?</div>';(new MessageDialog(s,o,MessageDialog.SYS_QUESTION)).addButton("ok",function(){t.reset(true)}).addButton("cancel").show()}}catch(u){Error.report(u,"cache reset")}};return t}($);_base.Cache=Cache;var Worker=function(e){var t={};var n=[];var r=false;var i=false;t.add=function(e){n.push(e);if(r){return}r=window.setInterval(function(){s()},100)};var s=function(){if(i){return}i=true;var e=n.shift();try{e()}catch(t){Error.report(t,"Worker")}if(n.length==0){window.clearInterval(r);r=false}i=false};return t}($);_base.Worker=Worker;var Error=function(e){var t={};var n="twdb_error";var r=[];var i=true;t.report=function(e,t){r.push({msg:t,e:e.message});if(i){i=false;new OnGoingPermanentEntry(WestUi.OnGoingUi,function(){s()},"tw-db.info: an error occured","tip")}};var s=function(){var t=new tw2gui.scrollpane;e(t.getMainDiv()).css("height","370px");e(t.getMainDiv()).find(".tw2gui_scrollpane_clipper_contentpane").addClass("selectable");var i='<table border="1" cellpadding="3" cellspacing="1">';for(var s=r.length-1;s>=0;s--){i+="<tr><td>"+s+"</td><td>"+r[s].msg+"</td><td>"+r[s].e+"</td></tr>"}i+="</table>";t.appendContent(i);var o=wman.open(n,null,"noreload").setMiniTitle("TWDB Errorlog").setTitle("tw-db.info Errorlog").appendToContentPane(t.getMainDiv())};return t}($);_base.Error2=Error;var Jobs=function(e){var t={};var n=false;var r=[];var i={};var s={};var o=[1828,1829,1830,2e3,2003,2006,2009];var u;var a=0;var f={};t.init=function(){if(n){return}var a=0;var c=0;var h={};while(true){a++;var p=JobList.getJobById(a);if(!p){c++;if(c>5){break}continue}c=0;r.push(p.id);i[p.name.toLowerCase()]=p.id;s[p.shortname.toLowerCase()]=p.id;for(var d in p.yields){if(isNaN(d)){continue}if(h[d]){continue}h[d]=true;o.push(Number(d))}}u=function(e){var t={};t.description="";t.duration=1800;t.energy=6;t.groupid=null;t.id=1e3;t.malus=0;t.name="Construction";t.randomyields=[];t.shortname="construction";t.skills={build:3,repair:1,leadership:1};t.yields=[];t.calcJobPoints=function(){return 0};t.canDo=function(){return true};return t}(e);r.push(1e3);i[u.name.toLowerCase()]=1e3;s[u.shortname.toLowerCase()]=1e3;var v=function(e,t){var n=e==1e3?u:JobList.getJobById(e);var r=t==1e3?u:JobList.getJobById(t);return n.name>r.name};r.sort(v);o.sort();f=Cache.load("jobdata");if(f==null||typeof f!="object"){f={}}Eventer.set("TWDBdataLoaded",function(){l()});t.ready=true;n=true};t.getJobByName=function(r){if(!n){t.init()}r=e.trim(r).toLowerCase();if(!i[r]){return null}return t.getJobById(i[r])};t.getJobByShortname=function(r){if(!n){t.init()}r=e.trim(r).toLowerCase();if(!s[r]){return null}return t.getJobById(s[r])};t.getJobById=function(t){if(t==1e3){var n=u}else{var n=JobList.getJobById(t);if(!n){return n}}var r=e.extend(true,{},n);var i=1;if(Character.charClass=="adventurer"){if(Premium.hasBonus("character")){i*=1.2}else{i*=1.1}}if(Premium.hasBonus("money")){i*=1.5}for(var s=0;s<r.randomyields.length;s++){r.randomyields[s]=(r.randomyields[s]*i).round(2)}if(typeof r.yields.length=="undefined"){for(var o in r.yields){r.yields[o].prop=(r.yields[o].prop*i).round(2)}}return r};t.openJob=function(e,t,n){JobWindow.open(e,t,n)};t.startJob=function(e,t,n){JobWindow.startJob(e,t,n)};t.getAllJobs=function(){return r};t.isProduct=function(r){if(!n){t.init()}return e.inArray(Number(r),o)};var l=function(){if(DataManager.getVersion()==a){return}a=DataManager.getVersion();f={};Cache.save("jobdata",f)};t.getPopup=function(e,n){var r='<div style="min-width:60px;text-align:center" >';var i=t.getJobById(e);if(isDefined(i)){r+='<span style="font-weight:bold;display:block;">'+i.name+"</span>";r+='<div class="job" style="position:relative;left:50%;margin:10px -25px;"><div '+(!isDefined(n)?"":'class="featured '+n+'"')+'></div><img src="'+Game.cdnURL+"/images/jobs/"+i.shortname+'.png" class="job_icon" ></div>'}return r+="</div>"};return t}($);_base.Jobs=Jobs;var Tools=function(e){var t={};var n=false;var r;var i=function(){if(!n){t.init()}r.children().remove();(new tw2gui.button("open Tool",function(){window.open("http://"+Script.url+"/?strana=politic_map&world="+location.hostname.split(".")[0])})).appendTo(r);var e=new tw2gui.button;e.setCaption("Alliance Import".escapeHTML()).click(function(){e.disable();jQuery.getScript("http://"+Script.url+"/js/sDoAllianceImport.js")}).appendTo(r);Window.hideLoader()};t.init=function(){if(n){return}r=Window.addTab("tools","Tools","",function(){i()});n=true;t.ready=true};return t}($);_base.Tools=Tools;var Support=function(e){var t={};var n="twdb_support";var r={};t.addKey=function(e,t){r[e]=t};t.open=function(){var t=e('<p style="margin:10px;">Please copy the text from below into a Private Messages (PM) on <a href="http://forum.the-west.net" target="_blank" title=" The West Forum (.net) " >The West Forum (.net)</a> to scoobydoo84 or petee and write some additional Informations what the Mistake is and what you\'ve done as it occur. Thanks!</p>');var i=e('<div style="margin:10px;"/>');var s="[CODE]";for(var o in r){s+=String(o)+"\n";s+=String(r[o])+"\n";s+="----------"+"\n"}s+="[/CODE]";i.append((new tw2gui.textarea).setContent(s).setWidth(600).setHeight(250).setReadonly().getMainDiv());wman.open(n,null).setMiniTitle("tw-db.info Support").setTitle("tw-db.info Support").appendToContentPane(t).appendToContentPane(i)};return t}($);_base.Support=Support;var Timer=function(e){var t={};var n=0;var r=0;var i=0;t.getTimeout=function(){var e=(new Date).getTime();if(e-n<2e3){r++}else{r=0}if(e-n<6e4){i++}else{i=0}n=e;var t=0;if(i>50){t=6e4}if(r<20){return t+200}return t+2e3};return t}($);_base.Timer=Timer;var Updater=function(e){var t={};var n=false;var r;var i=function(t,n){var r="Userscript Update needed";var i='<div class="txcenter">for userscript <b>'+Script.name+"</b> is a new version available, please click ok to update the Userscript</div><div><br />current version: "+Script.version/100+" revision "+Script.revision+"<br />new version: "+t/100+" revision "+n+"</div>";var s="http://"+Script.update;if(e.browser.webkit){s+="?"+Script.version+Script.revision}var o=function(){try{location.href=s}catch(e){}};(new MessageDialog(r,i,MessageDialog.SYS_WARNING)).addButton("ok",o).show()};t.init=function(){if(n){return}r=Window.addTab("notes","Release Notes","Release Notes",function(){t.open()});n=true;t.ready=true};t.open=function(){if(!n){t.init()}r.children().remove();var i=new tw2gui.scrollpane;e(i.getMainDiv()).css("height","335px");var s=false;for(var o=0;o<Script.notes.length;o++){var u=e("<h3><a>Version "+String(Script.notes[o].version/100)+"</a></h3>").css("border-bottom","1px solid #000000").click(function(){e(this).next().toggle()});var a=e("<div>"+Script.notes[o].notes+"</div>");i.appendContent(u).appendContent(a);if(s){a.hide()}s=true}r.append(i.getMainDiv());Window.hideLoader()};t.query=function(){setTimeout(function(){e.getScript("http://"+Script.check+"?"+(new Date).getTime())},500)};t.check=function(e,t,n){if(Script.version!=e||Script.revision!=t){i(e,t)}};return t}($);_base.Updater=Updater;var Map=function(e){var t={};var n=false;var r=181;var i=79;var s=0;var o=0;var u={};var a=null;var f=null;var n=false;t.init=function(){if(n){return}if(Settings.get("showbonusjobs",true)){c()}Ajax.get("map","get_minimap",{},function(e){if(e.error)return(new UserMessage(e.msg)).show();u=e.job_groups;n=true;t.ready=true})};t.getNearestJob=function(e){var n=JobList.getJobById(e);var r=u[n.groupid];if(!r){return[]}var i=[];var s=t.getLastPosition();for(var o=0;o<r.length;o++){var a=r[o][0]-s[0];var f=r[o][1]-s[1];var l=Math.sqrt(a*a+f*f);var c=window.Map.calcWayTime({x:r[o][0],y:r[o][1]},{x:s[0],y:s[1]});var h=Number(Math.atan(f/a)*180/Math.PI).round(0);if(a<0){h-=180}i.push({dist:l,time:c,x:r[o][0],y:r[o][1],angle:h})}var p=function(e,t){return e.dist*1>t.dist*1?1:-1};i.sort(p);return i};t.getLastPosition=function(){var e=Character.position.x;var t=Character.position.y;var n=TaskQueue.queue;for(var r=0;r<n.length;r++){var i=n[r].wayData;if(i.x){e=i.x;t=i.y}}return[e,t]};t.setMinimapJob=function(t){if(a){window.clearInterval(f);window.clearInterval(a)}var n=function(t){if(!MinimapWindow.window||e(MinimapWindow.window.divMain).find(".tw2gui_jobsearch_string").length==0||!e(MinimapWindow.window.divMain).find(".tw2gui_jobsearch_string").is(":visible")){return}window.clearInterval(a);window.clearInterval(f);a=null;f=null;MinimapWindow.resetSearchContext();e("input.tw2gui_jobsearch_string",MinimapWindow.DOM).val(t).keyup()};f=setInterval(function(){window.clearInterval(a);window.clearInterval(f);a=null;f=null},3e5);a=setInterval(function(){n(t)},200)};var l=function(e){var n=false;var u=0;var e=[];var a=s;var f=o;for(var a=s;a<=r;a++){for(var f=o;f<=i;f++){u++;e.push([a,f]);if(u>299){n=true;break}}if(n){break}o=0}s=a;o=f+1;if(e.length>0){window.Map.Data.Loader.load(e,function(){setTimeout(function(){t.loadMap()},Timer.getTimeout())})}};t.loadMap=function(){l()};var c=function(){var t=null;var n=null;var r={gold:false,silver:false};var i=function(){if(n){window.clearInterval(t);window.clearInterval(n)}var i=function(){if(!MinimapWindow.window||e(MinimapWindow.window.divMain).find(".mmap_jobs").length==0){return}if(e(MinimapWindow.window).find(".loader").is(":visible")){return}window.clearInterval(t);window.clearInterval(n);n=null;t=null;var i=e('<div style="position:absolute;top:40px;right:20px;display:block:heigth:30px;" />').append(e('<input title="Show Gold-Bonus Jobs" type="checkbox" '+(r.gold?'checked="checked"':"")+' style="vertical-align:top;margin-left:5px;margin-right:5px;" />').change(function(){if(e(this).attr("checked")){r.gold=true}else{r.gold=false}h(r)})).append('<div title="Show Gold-Bonus Jobs" style="position:relative;display:inline-block;height:13px;width:13px;background-color:yellow;"></div>').append(e('<input title="Show Silver-Bonus Jobs" type="checkbox" '+(r.silver?'checked="checked"':"")+'style="vertical-align:top;margin-left:5px;margin-right:5px;" />').change(function(){if(e(this).attr("checked")){r.silver=true}else{r.silver=false}h(r)})).append('<div title="Show Silver-Bonus Jobs" style="position:relative;display:inline-block;height:13px;width:13px;background-color:white;"></div>');e(MinimapWindow.window.divMain).find(".minimap-right").append(i);h(r)};t=setInterval(function(){window.clearInterval(n);window.clearInterval(t);n=null;t=null},3e5);n=setInterval(function(){i()},200)};GameEnhance.injectMinimap(function(){i()})};var h=function(t){e(MinimapWindow.window.divMain).find("#minimap_worldmap").find(".TWDBbonusjob").remove();var n=function(t,n,r,i,s){var o=.00513;var u=parseInt(t*o)-3;var a=parseInt(n*o)+2;var f="";if(i>1){f="-moz-transform:rotate(45deg);-webkit-transform:rotate(45deg);-o-transform:rotate(45deg);-ms-transform:rotate(45deg);transform:rotate(45deg);"}var l=e('<div class="TWDBbonusjob" style="z-index:7;position:absolute;display:block;width:4px;height:4px;background-color:'+(r?"yellow":"white")+";left:"+u+"px;top:"+a+"px;"+f+"border:1px solid "+(r?"red":"black")+';" />').click(function(e,t){return function(){window.Map.center(e,t)}}(t,n)).addMousePopup('<div style="min-width:60px;text-align:center">'+s.join('<div class="marker_popup_divider"></div>')+"</div>");e(MinimapWindow.window.divMain).find("#minimap_worldmap").append(l)};var r=window.Map.JobHandler.Featured;for(key in r){if(!r.hasOwnProperty(key)){continue}var i=r[key];var s=false;var o=0;var u=[];for(var a in i){if(!i.hasOwnProperty(a)){continue}if(i[a].gold){if(!t.gold){continue}s=true;o++}if(i[a].silver){if(!t.silver){continue}o++}var f=i[a].x;var l=i[a].y;job=JobList.getJobById(i[a].job_id);u.push(Jobs.getPopup(i[a].job_id,s?"gold":"silver"))}if(o>0){n(f,l,s,o,u)}}};return t}($);_base.Map=Map;var Analyser=function(e){var t={};var n=false;var r=null;var i=null;var s=false;var o=[];var u=[];var a=0;var f={};var l={};t.init=function(){if(n){return}var s=Cache.load("statistic");if(typeof s=="object"&&s!=null){r=s}else{c("all",true)}if(!r.ver||r.ver!=3){c("all",true,1)}i=e.extend(true,{},r);GameEnhance.addTabOnMessagesWindow("Job-Analyser","analyser-job",function(){w("job")});n=true;t.ready=true};t.restore=function(){r=e.extend(true,{},i)};t.debug=function(){console.log(r);console.log(l)};var c=function(t,n,i){if(n==true){if(!i){var i=0}else{var s=/\[report=([0-9]+)([A-Fa-f0-9]{10})\]/;var o=String(i).match(s);if(o){var i=o[1]}}if(isNaN(parseInt(i))){var u=0}else{var u=parseInt(i)-1}switch(t){case"job":r[t]={last:u,items:{last:0}};break;case"duel":r[t]={last:u};break;case"all":r={ver:3};c("job",true,u+1);c("duel",true,u+1);break}}else{var a=e('<div><h2>Do you really want to reset the ReportAnalyser statistics?</h2><span style="font-size:12px"><br />Give Report-Link of first Report which should be read after Reset</span></div>');var f=(new tw2gui.textfield("twdb_analyser_last")).setSize(40);f.setLabel("Report-Link:");a.append(f.getMainDiv());var l=new tw2gui.checkbox("or use all reports  ");var h=new tw2gui.checkbox("or use only future reports");l.setCallback(function(e){if(e){h.setSelected(false);f.setValue("")}});h.setCallback(function(e){if(e){l.setSelected(false);f.setValue("")}});e(f.getMainDiv()).find("span").css("font-size","12px");e(f.getMainDiv()).find("input").keyup(function(){l.setSelected(false);h.setSelected(false)});a.append(e('<div style="display:block;" />').append(l.getMainDiv()).append(h.getMainDiv()));var p=new MessageDialog("ReportAnalyser - Reset",a);p.addButton("ok",function(){if(l.isSelected()){c(t,true)}else if(h.isSelected()){c(t,true,r[t].last+1)}else{c(t,true,f.getValue())}p.hide();MessagesWindow.open("analyser-"+t)});p.addButton("cancel");p.show()}};var h=function(e){if(s){return}s=true;o=[];p(e)};var p=function(e,t){if(!t){t=1}a=t;Ajax.remoteCall("reports","get_reports",{page:t,folder:e},function(t){d(e,t)})};var d=function(e,t){var n=true;if(typeof t.reports!="object"){t.reports=[];n=false}if(typeof t.page=="undefined"||a!=t.page){t.reports=[];n=false}for(var i=0;i<t.reports.length;i++){var s=t.reports[i];if(s.report_id<=r[e].last){n=false;break}o.push({id:s.report_id,hash:s.hash,type:e})}f.bar.setMaxValue(o.length);if(n){window.setTimeout(function(){p(e,a+1)},Timer.getTimeout())}else{v(e)}};var v=function(e){if(o.length>0){f.bar.setValue(f.bar.getValue()+1);m(o.pop())}else{Cache.save("statistic",r);s=false;w(e,true)}};var m=function(t){e.post("game.php?window=reports&mode=show_report",{flash:null,hash:t.hash,report_id:t.id},function(e){g(t.type,e)},"json")};var g=function(e,t){if(!t||!t.report_id||!t.publishHash){(new UserMessage("empty Server Response",UserMessage.TYPE_ERROR)).show();return false}if(typeof t.page!="string"||typeof t.title!="string"||typeof t.js!="string"){u.push(t.report_id)}else{switch(e){case"job":b(t);break;case"duel":y(t);break}r[e].last=t.report_id}window.setTimeout(function(){v(e)},Timer.getTimeout())};var y=function(e){};var b=function(t){try{data={id:null,hash:null,job:null,motivation:null,duration:null,wage:null,bond:null,experience:null,injury:0,killed:false,items:{}};data.id=t.report_id;data.hash=t.publishHash;var n=Jobs.getJobByName(t.title.slice(t.title.indexOf(":")+1));if(!n){u.push(data.id);return false}data.job=n.id;data.duration=n.duration;var i=e(t.page);i.find(".rp_row_jobdata").each(function(t){var n=e.trim(e(this).children("span:last-child").html());n=n.split(" ").join(" ");switch(t){case 0:data.motivation=parseInt(n.slice(0,n.indexOf(" ")));break;case 2:data.wage=parseInt(n.slice(n.indexOf(" ")+1));break;case 3:data.bond=parseInt(n);break;case 4:data.experience=parseInt(n.slice(0,n.indexOf(" ")));break}});i.find(".rp_hurtmessage_text").each(function(){var t=new RegExp("[0-9]+");data.injury=Number(t.exec(e(this).html()))});i.find(".rp_row_killmessage").each(function(){data.killed=true});var i=t.js.split(";");e(i).each(function(){var e=new RegExp(/\s*ItemManager\.get\(([0-9]+)\)\s*\)\.setCount\(([0-9]+)\)/m);var t=e.exec(this);if(t){data.items[Number(t[1])]=Number(t[2])}});if(!r.job[data.job]){r.job[data.job]={count:0,products:{}}}var s=r.job[data.job];s.count++;if(!s[data.motivation]){s[data.motivation]={count:0,wage:0,bond:0,experience:0,injury:{},killed:0,items:{},extraitems:{}}}var o=s[data.motivation];o.count++;o.wage+=data.wage;o.bond+=data.bond;o.experience+=data.experience;if(!o.injury[data.injury]){o.injury[data.injury]=0}o.injury[data.injury]++;if(data.killed){o.killed++}for(var a in data.items){var f=Number(a);var l=data.items[f];var c=ItemManager.get(f);if(Jobs.isProduct(f)!==-1){if(!s.products[f]){s.products[f]={last:0}}var i=s.products[f];for(var h=0;h<l;h++){var p=s.count-i.last;i.last=s.count;if(!i[p]){i[p]=0}i[p]++}}else if(c.price==0){if(!o.extraitems[f]){o.extraitems[f]=0}o.extraitems[f]++}else{luck=true;if(!o.items[f]){o.items[f]=0}o.items[f]++}}}catch(d){u.push(data.id);return false}};var w=function(t,n){if(!MessagesWindow.window){return}f.window=e(MessagesWindow.window.getContentPane()).find(".messages-analyser-"+t);if(typeof n=="undefined"){MessagesWindow.window.showLoader();f.bar=new tw2gui.progressbar(0,o.length);f.window.children().remove();f.window.append(f.bar.getMainDiv());h(t)}else{switch(t){case"job":var r=x();break;case"duel":var r=showDuels();break}f.window.children().remove();f.window.append(r);E();S();E();MessagesWindow.window.hideLoader()}};var E=function(t){try{if(typeof t!="undefined"){if(l.type==t){l.ord*=-1}else{l.ord=1;l.type=t}}else{var t=l.type}var n=l.ord;var r=function(r,i){var s=e(r).find(".cell_"+t).html();var o=e(i).find(".cell_"+t).html();if(Number(s)==s){return s*1>o*1?n:-n}else{return s>o?n:-n}};f.rows.sort(r);for(var i=0;i<f.rows.length;i++){f.bodyscroll.appendContent(f.rows[i])}}catch(s){Error.report(s,"Analyser sort")}};var S=function(){switch(l.avg){case"avg":l.avg="sum";break;case"sum":l.avg="avg";break}e(f.window).find("div.row div").each(function(t){var n=e(this).data(String(l.avg));var r=e(this).data(String(l.avg)+"-t");e(this).html(n).attr("title",r)})};var x=function(){l={ord:1,type:0,avg:"avg"};var t=e('<div class="fancytable">'+'<div class="_bg tw2gui_bg_tl"></div>'+'<div class="_bg tw2gui_bg_tr"></div>'+'<div class="_bg tw2gui_bg_bl"></div>'+'<div class="_bg tw2gui_bg_br"></div>'+'<div class="trows">'+'<div class="thead statics">'+'<div class="row_head">'+'<div class="cell_0" style="width:91px; text-align:center;">'+'<span title="Name" style="cursor:pointer, margin-bottom:3px;">'+'<img src="'+Images.iconName+'" />'+"</span>"+"</div>"+'<div class="cell_1" style="width:50px; text-align:center;">'+'<span title="Count">'+'<img src="'+Images.iconCount+'" />'+"</span>"+"</div>"+'<div class="cell_2" style="width:50px; text-align:center;">'+'<span title="Duration">'+'<img src="'+Images.iconClock+'" />'+"</span>"+"</div>"+'<div class="cell_3" style="width:50px; text-align:center;">'+'<span title="Experience">'+'<img src="'+Images.iconExperience+'" />'+"</span>"+"</div>"+'<div class="cell_4" style="width:50px; text-align:center;">'+'<span title="Wage">'+'<img src="'+Images.iconDollar+'" />'+"</span>"+"</div>"+'<div class="cell_5" style="width:50px; text-align:center;">'+'<span title="Bond">'+'<img src="'+Images.iconUpb+'" />'+"</span>"+"</div>"+'<div class="cell_6" style="width:50px; text-align:center;">'+'<span title="Motivation">'+'<img src="'+Images.iconMoti+'" />'+"</span>"+"</div>"+'<div class="cell_7" style="width:50px; text-align:center;">'+'<span title="Danger">'+'<img src="'+Images.iconDanger+'" />'+"</span>"+"</div>"+'<div class="cell_8" style="width:50px; text-align:center;">'+'<span title="?killed">'+'<img src="'+Images.iconKilled+'" />'+"</span>"+"</div>"+'<div class="cell_9" style="width:50px; text-align:center;">'+'<span title="Products">'+'<img src="'+Images.iconYield+'" />'+"</span>"+"</div>"+'<div class="cell_10" style="width:50px; text-align:center;">'+'<span title="Item">'+'<img src="'+Images.iconItem+'" />'+"</span>"+"</div>"+'<div class="cell_11" style="width:41px; text-align:center;">'+'<span title="Luck">'+'<img src="'+Images.iconLuck+'" />'+"</span>"+"</div>"+'<div class="cell_12" style="width:20px; text-align:right;">'+'<span title="Reset">'+'<img src="'+Images.iconReset+'" />'+"</span>"+"</div>"+"</div>"+"</div>"+'<div class="tbody">'+'<div class="_bg tw2gui_bg_l"></div>'+'<div class="_bg tw2gui_bg_r"></div>'+"</div>"+'<div class="tfoot statics">'+'<div class="row row_foot"></div>'+"</div>"+"</div>"+"</div>");t.find(".row_head").find("img").each(function(t){if(t==12){e(this).click(function(){c("job")})}else{e(this).click(function(e){return function(){E(e)}}(t))}});t.find(".row_head").find("img").css("cursor","pointer");var n=0;var i={jobs:0,count:0,duration:0,experience:0,wage:0,bond:0,motivation:0,injury:0,killed:0,products:0,items:0,luck:0};var s=r.job;var o=e();f.rows=[];for(var u in s){var a=Jobs.getJobById(u);if(!a){continue}var h={count:0,duration:0,experience:0,wage:0,bond:0,motivation:0,injury:0,killed:0,products:0,items:0,luck:0};var p=s[u];h.count=p.count;h.duration=p.count*a.duration;var d=0;for(var n=0;n<a.randomyields.length;n++){d+=a.randomyields[n]}if(typeof a.yields.length=="undefined"){for(var v in a.yields){d+=a.yields[v].prop}}for(var v in p.products){for(var m in p.products[v]){if(m=="last"){continue}var g=ItemManager.get(v);h.products+=Number(p.products[v][m]);h.luck+=Number(g.price*p.products[v][m])}}for(var y in p){if(y=="count"||y=="products"){continue}var m=p[y];h.motivation+=y*m.count;h.bond+=m.bond;h.experience+=m.experience;for(var b in m.injury){h.injury+=b*m.injury[b]}for(var v in m.items){var g=ItemManager.get(v);h.items+=Number(m.items[v]);h.luck+=Number(g.price*m.items[v])}h.killed+=m.killed;h.wage+=m.wage}var w=e('<div class="row row_'+n+'" />');var m=e('<div class="cell_0" style="width:91px; text-align:left;cursor:pointer;font-size:11px;" ></div>');m.data("sum",a.name);m.data("sum-t",a.name);m.data("avg",a.name);m.data("avg-t",a.name);w.append(m);i.jobs++;var m=e('<div class="cell_1" style="width:50px; text-align:center;cursor:pointer;" ></div>');m.data("sum",h.count);m.data("sum-t",h.count);m.data("avg",h.count);m.data("avg-t",h.count);w.append(m);i.count+=h.count;var m=e('<div class="cell_2" style="width:50px; text-align:center;cursor:pointer;" ></div>');m.data("sum",(h.duration/3600).round(2));m.data("sum-t",String((h.duration/3600).round(2))+" hours");m.data("avg",(h.duration/(3600*h.count)).round(2));m.data("avg-t"," "+String((h.duration/(3600*h.count)).round(2))+" hours");w.append(m);i.duration+=h.duration;var m=e('<div class="cell_3" style="width:50px; text-align:center;cursor:pointer;" ></div>');m.data("sum",h.experience);m.data("sum-t",String(h.experience));m.data("avg",(h.experience/h.count).round(2));m.data("avg-t"," "+String((h.experience/h.count).round(2)));w.append(m);i.experience+=h.experience;var m=e('<div class="cell_4" style="width:50px; text-align:center;cursor:pointer;" ></div>');m.data("sum",h.wage);m.data("sum-t","$"+String(h.wage));m.data("avg",(h.wage/h.count).round(2));m.data("avg-t"," $"+String((h.wage/h.count).round(2)));w.append(m);i.wage+=h.wage;var m=e('<div class="cell_5" style="width:50px; text-align:center;cursor:pointer;" ></div>');m.data("sum",h.bond);m.data("sum-t",String(h.bond));m.data("avg",(h.bond/h.count*100).round(2));m.data("avg-t"," "+String((h.bond/h.count*100).round(2))+"%");w.append(m);i.bond+=h.bond;var m=e('<div class="cell_6" style="width:50px; text-align:center;cursor:pointer;" ></div>');m.data("sum",h.motivation);m.data("sum-t",String(h.motivation)+"%");m.data("avg",(h.motivation/h.count).round(2));m.data("avg-t"," "+String((h.motivation/h.count).round(2))+"%");w.append(m);i.motivation+=h.motivation;var m=e('<div class="cell_7" style="width:50px; text-align:center;cursor:pointer;" ></div>');m.data("sum",h.injury);m.data("sum-t",String(h.injury));m.data("avg",(h.injury/h.count).round(2));m.data("avg-t"," "+String((h.injury/h.count).round(2)));w.append(m);i.injury+=h.injury;var m=e('<div class="cell_8" style="width:50px; text-align:center;cursor:pointer;" ></div>');m.data("sum",h.killed);m.data("sum-t",String(h.killed));m.data("avg",(h.killed/h.count*100).round(2));m.data("avg-t"," "+String((h.killed/h.count*100).round(2))+"%");w.append(m);i.killed+=h.killed;var m=e('<div class="cell_9" style="width:50px; text-align:center;cursor:pointer;" ></div>');m.data("sum",h.products);m.data("sum-t",String(h.products));m.data("avg",(h.products/h.count*100).round(2));m.data("avg-t"," "+String((h.products/h.count*100).round(2))+"% ["+d*100+"%]");w.append(m);i.products+=h.products;var m=e('<div class="cell_10" style="width:50px; text-align:center;cursor:pointer;" ></div>');m.data("sum",h.items);m.data("sum-t",String(h.items));m.data("avg",(h.items/h.count*100).round(2));m.data("avg-t"," "+String((h.items/h.count*100).round(2))+"%");w.append(m);i.items+=h.items;var m=e('<div class="cell_11" style="width:50px; text-align:center;cursor:pointer;" ></div>');m.data("sum",h.luck);m.data("sum-t","$"+String(h.luck));m.data("avg",(h.luck/h.count).round(2));m.data("avg-t"," $"+String((h.luck/h.count).round(2)));w.append(m);i.luck+=h.luck;f.rows.push(w);w.click(function(){T(e(this).children(".cell_0").html())});n++}f.bodyscroll=new tw2gui.scrollpane;e(f.bodyscroll.getMainDiv()).css("height","300px");t.find(".tbody").append(f.bodyscroll.getMainDiv());f.footer=t.find(".row_foot");var m=e('<div class="cell_0" style="width:71px; text-align:center;" ></div>');m.data("sum",i.jobs);m.data("sum-t",i.jobs+" Jobs");m.data("avg",i.jobs);m.data("avg-t",i.jobs+" Jobs");f.footer.append(m);var m=e('<div class="cell_0" style="width:20px; text-align:center;cursor:pointer;color:#444;" ></div>');m.mouseenter(function(){e(this).css("color","#888")}).mouseleave(function(){e(this).css("color","#444")});m.click(function(){S()});m.data("sum","");m.data("sum-t","switch to ");m.data("avg","");m.data("avg-t","switch to ");f.footer.append(m);var m=e('<div class="cell_1" style="width:50px; text-align:center;" ></div>');m.data("sum",i.count);m.data("sum-t",i.count);m.data("avg",i.count);m.data("avg-t",i.count);f.footer.append(m);var m=e('<div class="cell_2" style="width:50px; text-align:center;" ></div>');m.data("sum",(i.duration/3600).round(2));m.data("sum-t",String((i.duration/3600).round(2))+"hours");m.data("avg",(i.duration/(3600*i.count)).round(2));m.data("avg-t"," "+String((i.duration/(3600*i.count)).round(2))+"hours");f.footer.append(m);var m=e('<div class="cell_3" style="width:50px; text-align:center;" ></div>');m.data("sum",i.experience);m.data("sum-t",String(i.experience));m.data("avg",(i.experience/i.count).round(2));m.data("avg-t"," "+String((i.experience/i.count).round(2)));f.footer.append(m);var m=e('<div class="cell_4" style="width:50px; text-align:center;" ></div>');m.data("sum",i.wage);m.data("sum-t","$"+String(i.wage));m.data("avg",(i.wage/i.count).round(2));m.data("avg-t"," $"+String((i.wage/i.count).round(2)));f.footer.append(m);var m=e('<div class="cell_5" style="width:50px; text-align:center;" ></div>');m.data("sum",i.bond);m.data("sum-t",String(i.bond));m.data("avg",(i.bond/i.count*100).round(2));m.data("avg-t"," "+String((i.bond/i.count*100).round(2))+"%");f.footer.append(m);var m=e('<div class="cell_6" style="width:50px; text-align:center;" ></div>');m.data("sum",i.motivation);m.data("sum-t",String(i.motivation)+"%");m.data("avg",(i.motivation/i.count).round(2));m.data("avg-t"," "+String((i.motivation/i.count).round(2))+"%");f.footer.append(m);var m=e('<div class="cell_7" style="width:50px; text-align:center;" ></div>');m.data("sum",i.injury);m.data("sum-t",String(i.injury));m.data("avg",(i.injury/i.count).round(2));m.data("avg-t"," "+String((i.injury/i.count).round(2)));f.footer.append(m);var m=e('<div class="cell_8" style="width:50px; text-align:center;" ></div>');m.data("sum",i.killed);m.data("sum-t",String(i.killed));m.data("avg",(i.killed/i.count*100).round(2));m.data("avg-t"," "+String((i.killed/i.count*100).round(2))+"%");f.footer.append(m);var m=e('<div class="cell_9" style="width:50px; text-align:center;" ></div>');m.data("sum",i.products);m.data("sum-t",String(i.products));m.data("avg",(i.products/i.count*100).round(2));m.data("avg-t"," "+String((i.products/i.count*100).round(2))+"%");f.footer.append(m);var m=e('<div class="cell_10" style="width:50px; text-align:center;" ></div>');m.data("sum",i.items);m.data("sum-t",String(i.items));m.data("avg",(i.items/i.count*100).round(2));m.data("avg-t"," "+String((i.items/i.count*100).round(2))+"%");f.footer.append(m);var m=e('<div class="cell_11" style="width:50px; text-align:center;" ></div>');m.data("sum",i.luck);m.data("sum-t","$"+String(i.luck));m.data("avg",(i.luck/i.count).round(2));m.data("avg-t"," $"+String((i.luck/i.count).round(2)));f.footer.append(m);var o=e('<div style="margin: 0px 6px 0px 6px;width:680px;" />').append(t);return o};var T=function(e){};return t}($);_base.Analyser=Analyser;var GameEnhance=function($){var _self={};var save={};var minimap=[];var questlog=[];var ready=false;_self.init=function(){if(ready){return}trustTWDB();fastSkillChange();ready=true;_self.ready=true};var trustTWDB=function(){try{var str=showlink.toString();str=str.replace("the-west","tw-db|the-west");str=str.replace("|com|","|com|info|");eval("showlink = "+str)}catch(e){}};_self.injectItem=function(type,name,callback){var item=type+"Item";if(typeof save[item]=="undefined"){save[item]=tw2widget[item].prototype.getMainDiv.toString()}try{tw2widget[item].prototype["TWDB"+name]=function(e){return callback(e)}}catch(e){Error.report(e,"inject "+item+" function: "+name)}try{var inject="this.TWDB"+name+"(this);";inject.replace(/ /g,"");var newfunction=tw2widget[item].prototype.getMainDiv.toString().replace("return",inject+"\n return");eval("tw2widget['"+item+"'].prototype.getMainDiv = "+newfunction)}catch(e){Error.report(e,"manipulate "+item+".prototype.getMainDiv");eval(item+".prototype.getMainDiv = "+save[item])}};_self.injectMarket=function(name,callback){if(typeof save.MarketWindow=="undefined"){save.MarketWindow=MarketWindow.getClearName.toString()}try{MarketWindow["TWDB"+name]=function(e){return callback(e)}}catch(e){Error.report(e,"inject MarketWindow function:"+name)}try{var str=MarketWindow.getClearName.toString();var inject="this.TWDB"+name+"(obj.item_id)";inject.replace(/ /g,"");var newfunction="";while(str.indexOf("return")!=-1){var pos=str.indexOf("return");newfunction+=str.slice(0,pos+6)+" "+inject+" + String(";str=str.substr(pos+7);var pos=str.indexOf(";");newfunction+=str.slice(0,pos)+");";str=str.substr(pos+1)}newfunction+=str;eval("MarketWindow.getClearName = "+newfunction)}catch(e){Error.report(e,"manipulate MarketWindow.getClearName");eval("MarketWindow.getClearName = "+save.MarketWindow)}};var fastSkillChange=function(){$("div.char_links.skills").click(function(){var e=80,t=function(){if($(".skills_content,.skills_content4Shaman").length!=2){if(e--<=0&&n!=-1){clearInterval(n);n=-1}}else{$(".skills_content,.skills_content4Shaman").find(".butMinus,.butPlus").each(function(){function r(){e=Math.max(Math.round(e*(e/200+1)/(e/133+1)),15);n.click();t=setTimeout(r,e)}function i(){t=setTimeout(r,e)}function s(){if(t!=-1){clearTimeout(t);t=-1}e=400}if($(this).get(0).twdb_skills)return;$(this).get(0).twdb_skills=true;var e=400,t=-1,n=$(this).css("cursor","pointer");n.mousedown(i).mouseup(s).mouseout(s)})}},n=setInterval(t,50)})};_self.addTabOnMessagesWindow=function(name,shortname,callback){if(typeof save.MessagesWindow=="undefined"){save.MessagesWindowOpen=MessagesWindow.open.toString();save.MessagesWindowTab=MessagesWindow.showTab.toString()}try{var inject="MessagesWindow.window.addTab('"+name+"', '"+shortname+"', tabclick).appendToContentPane($('<div class=\"messages-"+shortname+"\"/>'));";var newfunction=save.MessagesWindowOpen.replace(/MessagesWindow.Telegram.DOM/g,inject+"MessagesWindow.Telegram.DOM");eval("(function ($) {"+"MessagesWindow.open = "+newfunction+"})(jQuery);;")}catch(e){Error.report(e,"manipulate MessagesWindow.open");eval("(function ($) {"+"MessagesWindow.open = "+save.MessagesWindowOpen+"})(jQuery);")}try{MessagesWindow["TWDB-"+shortname]=function(){callback()}}catch(e){Error.report(e,"add showTab to MessagesWindow")}try{var inject="case '"+shortname+"':MessagesWindow['TWDB-"+shortname+"']();break;";var newfunction=save.MessagesWindowTab.replace(/switch(\s)*\(id\)(\s)*{/g,"switch (id) { "+inject);eval("(function ($) {"+"MessagesWindow.showTab = "+newfunction+"})(jQuery);;")}catch(e){Error.report(e,"manipulate MessagesWindow.showTab");eval("(function ($) {"+"MessagesWindow.showTab = "+save.MessagesWindowTab+"})(jQuery);")}};_self.injectChatRoomView=function(name,callback){if(typeof save.ChatRoomView=="undefined"){save.ChatRoomView=ChatRoomView.prototype.constructor.toString()}try{ChatRoomView.prototype["TWDB"+name]=function(){return callback(this)}}catch(e){Error.report(e,"inject ChatRoomView function: "+name)}try{var str=ChatRoomView.prototype.constructor.toString();var inject="this.TWDB"+name+"();";inject.replace(/ /g,"");var newfunction=str.substr(0,str.length-1)+"\n"+inject+"\n"+"}";eval("(function ($) { var Chat = window.Chat; "+"ChatRoomView.prototype.constructor = "+newfunction+"})(jQuery);")}catch(e){Error.report(e,"manipulate ChatRoomView");eval("(function ($) { var Chat = window.Chat; "+"ChatRoomView.prototype.constructor = "+save.ChatRoomView+"})(jQuery);")}try{var proto=ChatRoomView.prototype;ChatRoomView=ChatRoomView.prototype.constructor;ChatRoomView.prototype=proto}catch(e){Error.report(e,"copy ChatRoomView")}};_self.injectChatRoomSend=function(name,callback){if(typeof save.ChatRoomSend=="undefined"){save.ChatRoomSend=ChatRoomView.prototype.send.toString()}try{ChatRoomView.prototype["TWDBsend"+name]=function(){callback(this)}}catch(e){Error.report(e,"inject ChatRoomView(send) function: "+name)}try{var str=ChatRoomView.prototype.send.toString();var inject="this.TWDBsend"+name+"();";inject.replace(/ /g,"");var newfunction=str.replace("{","{"+"\n"+inject);eval("(function ($) { var Chat = window.Chat; "+"ChatRoomView.prototype.send = "+newfunction+"})(jQuery);")}catch(e){Error.report(e,"manipulate ChatRoomView.send");eval("(function ($) { var Chat = window.Chat; "+"ChatRoomView.prototype.send = "+save.ChatRoomView+"})(jQuery);")}};_self.injectMinimap=function(e){try{if(!MinimapWindow._open){MinimapWindow._open=MinimapWindow.open;MinimapWindow.open=function(e){try{MinimapWindow._open(e);for(var t=0;t<minimap.length;t++){minimap[t]()}}catch(n){Error.report(n,"MinimapWindow.open")}}}}catch(t){Error.report(t,"manipulate MinimapWindow.open")}try{if(!MinimapWindow._refreshWindow){MinimapWindow._refreshWindow=MinimapWindow.refreshWindow;MinimapWindow.refreshWindow=function(){try{MinimapWindow._refreshWindow();window.setTimeout(function(){for(var e=0;e<minimap.length;e++){minimap[e]()}},2500)}catch(e){Error.report(e,"MinimapWindow._refreshWindow")}}}}catch(t){Error.report(t,"manipulate MinimapWindow.open")}minimap.push(function(){e()})};_self.injectQuestLog=function(e){try{if(!QuestEmployerView._buildQuestLog){QuestEmployerView._buildQuestLog=QuestEmployerView.buildQuestLog;QuestEmployerView.buildQuestLog=function(e){try{QuestEmployerView._buildQuestLog(e);for(var t=0;t<questlog.length;t++){questlog[t](e)}}catch(n){Error.report(n,"QuestEmployerView.buildQuestLog")}}}questlog.push(function(t){e(t)})}catch(t){Error.report(t,"manipulate QuestEmployerView.buildQuestLog")}};return _self}($);_base.GameEnhance2=GameEnhance;var SellTip=function(e){var t={};var n=false;t.init=function(){if(n){return}if(Settings.get("sellTip",true)){GameEnhance.injectItem("Inventory","sellTip",function(e){return getDiv(e)})}n=true;t.ready=true};getDiv=function(e){var t=e.obj.item_id;var n=ItemManager.get(t);var r=false;var i="";if(Settings.get("sellTip2",true)){if(!ClothCalc.isUsedItem(n.item_id)){r=true;i="this item is not used for any job or custom defined activity (ClothCalc)".escapeHTML()}}if(Settings.get("sellTip1",true)){var s=Bag.getItemByItemId(n.item_id);var o=Wear.wear[n.type];if(s||o&&o.obj.item_id==n.item_id){var u=(s!=undefined?s.count:0)+(o!=undefined&&o.obj.item_id==n.item_id?1:0);if(u>1){r=true;i="this item you have more than once".escapeHTML()}}}if(Settings.get("sellTip3",true)){if(n.named){r=false}}if(Settings.get("sellTip4",true)){if(n.traderlevel===null||n.traderlevel>15){r=false}}e.divMain.find(".TWDBsellTip").remove();if(r){e.divMain.append('<img src="'+Images.iconSell+'" class="TWDBsellTip" title="'+i+'" title=" this item you have not yet " style="position:absolute;bottom:4px;right:0px;width:19px;height:19px;padding:0px;border:0px;margin:0px;" />')}};return t}($);_base.SellTip=SellTip;var Collector=function(e){var t={};var n=false;t.init=function(){if(n){return}if(Settings.get("collector",true)){GameEnhance.injectItem("Trader","collector",function(e){return r(e)});GameEnhance.injectItem("ItemTrader","collector",function(e){return r(e)});GameEnhance.injectMarket("collector",function(e){return i(e)})}n=true;t.ready=true};t.isNewItem=function(e){var t=0;var n=ItemManager.get(e);var r=Bag.getItemByItemId(n.item_id);var i=Wear.wear[n.type];if(r||i&&i.obj.item_id==n.item_id){t=(r!=undefined?r.count:0)+(i!=undefined&&i.obj.item_id==n.item_id?1:0)}if(t==0){return true}else{return false}};var r=function(e){e.divMain.find(".TWDBcollector").remove();if(t.isNewItem(e.obj.item_id)){e.divMain.append('<img src="'+Images.iconNew+'" class="TWDBcollector" title=" this item you have not yet " style="position:absolute;top:-8px;left:-15px;padding:0px;border:0px;margin:0px;" />')}};var i=function(e){if(t.isNewItem(e)){return'<img src="'+Images.iconNew+'" class="TWDBcollector" title=" this item you have not yet " style="width:18px;height:18px;position:relative;top:0px;left:0px;padding:0px;border:0px;margin:0px;" />'}else{return""}};return t}($);_base.Collector=Collector;var Chat=function(e){var t={};var n=false;var i={":/":"sore","=:)":"invader",">:(":"angry",":'(":"cry",":)":"smile",":D":"grin",":(":"frown",";)":"smirk",":P":"tongue",":o":"ohmy",":x":"muted",":|":"silent",">.<":"palm","-.-":"nc","o.O":"oo","O.o":"oo","^_^":"happy",o_O:"oo","x.x":"xx","T.T":"cry","el pollo diablo!":"elpollodiablo","!el pollo diablo":"elpollodiablo_mirror","el pollo diablo?!":"elpollodiablo_front"};var s=[];t.init=function(){if(n){return}if(Settings.get("chat",true)){GameEnhance.injectChatRoomView("chat",function(e){u(e)});GameEnhance.injectChatRoomSend("chat",function(e){o(e)});var e=Cache.load("chathistory");if(typeof e=="object"&&e!=null){if(e.color){e=e.color;Cache.save("chathistory",e)}s=e}}n=true;t.ready=true};var o=function(e){var t=e.input.val();if(!t){return}var n=function(t){if(e._caps){t=t.toUpperCase()}if(e._bold){t=t.replace(/\*/g,"~");t="*"+t+"*"}return t};if(t.substr(0,1)=="/"){r=new RegExp("^\\/(tell|msg)\\s+([^:]+):(.+)$");v=t.match(r);if(v){if(e._color){t="/tell "+v[2]+":/"+e._color+n(v[3])}else{t="/tell "+v[2]+":"+n(v[3])}}e.input.val(t);return}t=n(t);if(e._color){t="/"+e._color+t}e.input.val(t);return};var u=function(e){e.mainDiv.find(".chat_input").find(".cbg").css("left","38px");e._color=null;e._bold=false;e._caps=false;a(e);p(e)};var a=function(t){var n=e('<span style="padding:3px;display:none;width:160px;position:absolute;bottom:20px;left:-3px;" />');for(var r in i){n.append(e('<img src="'+Game.cdnURL+"/images/chat/emoticons/"+i[r]+'.png?1" title="'+r+'" style="cursor:pointer;margin:1px;" />').click(function(e){return function(){t.input.val(t.input.val()+" "+e);t.input.focus();n.hide()}}(r)))}var s=false;t.mainDiv.find(".chat_input").append(e('<div style="position:absolute;width:15px;height:15px;bottom:3px;vertical-align:top;left:18px;cursor:pointer;" />').append(e('<img style="vertical-align:top;" src="'+Images.iconChatSM+'" />')).append(n).hover(function(){s=true;n.show()},function(){s=false;setTimeout(function(){if(!s){n.hide()}},200)}))};var f=function(e){var t=e.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);if(t){return String(parseInt(t[1]*9/255+.5))+String(parseInt(t[2]*9/255+.5))+String(parseInt(t[3]*9/255+.5))}else{return"000"}};var l=function(e){return"rgb("+parseInt(e[0]*255/9)+","+parseInt(e[1]*255/9)+","+parseInt(e[2]*255/9)+")"};var c=function(e,t){if(isDefined(t.color)){var n=f(t.color);var r=s.length;for(var i=0;i<r;i++){var o=s.shift();if(o!=n){s.push(o)}}s.push(n);if(s.length>5){s.shift()}Cache.save("chathistory",s);e._color=n}if(t.color===null){e._color=null}if(isDefined(t.bold)){e._bold=t.bold}if(isDefined(t.caps)){e._caps=t.caps}if(e._bold){e.mainDiv.find(".TWDBtext").css("font-weight","bold")}else{e.mainDiv.find(".TWDBtext").css("font-weight","normal")}if(e._caps){e.mainDiv.find(".TWDBtext").html("A")}else{e.mainDiv.find(".TWDBtext").html("a")}if(e._color){e.mainDiv.find(".TWDBcolor").children("div").children("div").css("background-color",l(e._color));if(e._color[1]>=4){e.mainDiv.find(".TWDBtext").css("color","#000")}else{e.mainDiv.find(".TWDBtext").css("color","#fff")}}else{e.mainDiv.find(".TWDBcolor").children("div").children("div").css("background-color","#e0e2e0");e.mainDiv.find(".TWDBtext").css("color","#000")}e.input.focus()};var h=function(t){return e('<div style="position:absolute;display:block;width:15px;height:15px;"/>').append(e('<div style="position:absolute;width:15px;height:1px;top:7px;left:0px;background-color:'+t+';opacity:0.1;" />')).append(e('<div style="position:absolute;width:1px;height:15px;top:0px;left:7px;background-color:'+t+';opacity:0.1;" />')).append(e('<div style="position:absolute;width:15px;height:3px;top:6px;left:0px;background-color:'+t+';opacity:0.33;" />')).append(e('<div style="position:absolute;width:3px;height:15px;top:0px;left:6px;background-color:'+t+';opacity:0.33;" />')).append(e('<div style="position:absolute;width:15px;height:5px;top:5px;left:0px;background-color:'+t+';opacity:0.47;" />')).append(e('<div style="position:absolute;width:5px;height:15px;top:0px;left:5px;background-color:'+t+';opacity:0.47;" />')).append(e('<div style="position:absolute;width:13px;height:9px;top:3px;left:1px;background-color:'+t+';opacity:0.6;" />')).append(e('<div style="position:absolute;width:9px;height:13px;top:1px;left:3px;background-color:'+t+';opacity:0.6;" />')).append(e('<div style="position:absolute;width:11px;height:11px;top:2px;left:2px;background-color:'+t+';opacity:0.8;" />')).append(e('<div style="position:absolute;width:13px;height:7px;top:4px;left:1px;background-color:'+t+';" />')).append(e('<div style="position:absolute;width:7px;height:13px;top:1px;left:4px;background-color:'+t+';" />')).append(e('<div style="position:absolute;width:9px;height:11px;top:2px;left:3px;background-color:'+t+';" />')).append(e('<div style="position:absolute;width:11px;height:9px;top:3px;left:2px;background-color:'+t+';" />'))};var p=function(t){try{var n=e('<span style="position:relative;display:none;padding:3px;width:300px;position:absolute;bottom:17px;left:-5px;" />');n.append('<div style="position:absolute;height: 50px; width:30px;display:block" />');var r=["black","red","blue","yellow","green","brown","magenta","gray"];n.append(e('<div style="display:inline-block;width:15px;height:15px;padding:2px;opacity:0.5;"/>').append(h("#e0e2e0")).append(e('<div style="position:absolute;width:15px;height:15px;" ><table border="0" cellspacing="0" cellpadding="0" style="padding:0px;margin:0px;border:0px;" ><tr><td style="display:block;width:15px;height:15px;vertical-align:top;text-align:center;font-size:11px;color:#000;font-weight:bold;">a</td></tr></table></div>')).click(function(){if(e(this).css("opacity")==.5){c(t,{bold:true});e(this).css("opacity",1)}else{c(t,{bold:false});e(this).css("opacity",.5)}n.hide()}));n.append(e('<div style="display:inline-block;width:15px;height:15px;padding:2px;opacity:0.5;"/>').append(h("#e0e2e0")).append(e('<div style="position:absolute;width:15px;height:15px;" ><table border="0" cellspacing="0" cellpadding="0" style="padding:0px;margin:0px;border:0px;" ><tr><td style="display:block;width:15px;height:15px;vertical-align:top;text-align:center;font-size:11px;color:#000;">A</td></tr></table></div>')).click(function(){if(e(this).css("opacity")==.5){c(t,{caps:true});e(this).css("opacity",1)}else{c(t,{caps:false});e(this).css("opacity",.5)}n.hide()}));for(var i=0;i<r.length;i++){n.append(e('<div style="display:inline-block;width:15px;height:15px;padding:2px;"/>').append(h(r[i])).click(function(){c(t,{color:e(this).children("div").children("div").css("background-color")});n.hide()}))}n.append(e('<div style="margin:2px;display:inline-block;vertical-align:top;width:15px;height:15px;background:url('+Images.iconChatNoColor+')no-repeat 0px 0px transparent;"/>').click(function(){c(t,{color:null});n.hide()}));n.append(e('<div style="margin:3px;display:inline-block;vertical-align:top;width:13px;height:13px;background:url('+Images.iconChat+')no-repeat 0px 0px transparent;"/>').click(function(){d(t);n.hide()}));var s=false;t.mainDiv.find(".chat_input").append(e('<div class="TWDBcolor" style="position:absolute;width:15px;height:15px;bottom:3px;vertical-align:top;left:0px;cursor:pointer;" />').append(h("#e0e2e0")).append(e('<div style="position:absolute;width:15px;height:15px;" ><table border="0" cellspacing="0" cellpadding="0" style="padding:0px;margin:0px;border:0px;" ><tr><td class="TWDBtext" style="display:block;width:15px;height:15px;vertical-align:top;text-align:center;font-size:11px;color:#000;">a</td></tr></table></div>')).append(n).hover(function(){s=true;n.show()},function(){s=false;setTimeout(function(){if(!s){n.hide()}},200)}))}catch(o){Error.report(o,"injectColor")}};var d=function(t){var n=t.mainDiv.find(".TWDBcolor").children("div").children("div");var r=f(n.css("background-color"));var i={};i.customColor=e('<div style="width:50px;height:50px;display:inline-block;vertical-align:top;margin: 5px;" />');i.customColor.css("background-color",l(f(n.css("background-color"))));var o=function(e,t){if(t&&r[e]==9||!t&&r[e]==0){return}var n=[Number(r[0]),Number(r[1]),Number(r[2])];n[e]+=t?1:-1;r=String(n[0])+String(n[1])+String(n[2]);i.input.val(r);if(r[e]==0){i.plusminus[e].children(".butMinus").css("opacity",.3)}else{i.plusminus[e].children(".butMinus").css("opacity",1)}if(r[e]==9){i.plusminus[e].children(".butPlus").css("opacity",.3)}else{i.plusminus[e].children(".butPlus").css("opacity",1)}i.customColor.css("background-color",l(r))};var u=e('<div style="width:42px;height:48px;display:inline-block;vertical-align:top;margin: 6px 5px 6px 5px;" />');i.plusminus=[];for(var a=0;a<3;a++){switch(a){case 0:var h="#f00";break;case 1:var h="#0f0";break;case 2:var h="#00f";break}i.plusminus[a]=e('<div class="tw2gui_plusminus" style="display:inline-block;background-color:'+h+';width:12px;height:46px;padding:1px;"><span class="butPlus" style="cursor:pointer;"></span><span style="width:12px;height:10px;display:inline-block;"></span><span class="butMinus" style="cursor:pointer;"></span></div>');i.plusminus[a].children(".butMinus").click(function(e){return function(){o(e,false)}}(a));i.plusminus[a].children(".butPlus").click(function(e){return function(){o(e,true)}}(a));if(r[a]==0){i.plusminus[a].children(".butMinus").css("opacity",.3)}if(r[a]==9){i.plusminus[a].children(".butPlus").css("opacity",.3)}u.append(i.plusminus[a])}u.append(i.plusminus[0]).append(i.plusminus[1]).append(i.plusminus[2]);i.input=e('<input maxLength="3" type="text" value="'+r+'" style="position: relative; top: -35px; left: 2px;color: rgb(255, 255, 255); font-weight: bold; letter-spacing: 6px; text-shadow: 1px 1px 1px rgb(0, 0, 0); width: 43px; background: none repeat scroll 0pt 0pt transparent; border: medium none; height: 18px; line-height: 18px; margin: 0pt; outline: medium none;" />');i.input.keyup(function(){var e=i.input.val();if(e.length<3){return}if(!e.match(/(\d){3}/)){i.input.val(r);return}r=e;for(var t=0;t<3;t++){if(r[t]==0){i.plusminus[t].children(".butMinus").css("opacity",.3)}else{i.plusminus[t].children(".butMinus").css("opacity",1)}if(r[t]==9){i.plusminus[t].children(".butPlus").css("opacity",.3)}else{i.plusminus[t].children(".butPlus").css("opacity",1)}}i.customColor.css("background-color",l(r));i.input.attr("value",r)});u.append(i.input);var p={bold:t._bold,caps:t._caps};var d=e('<div style="height:50px;display:inline-block;vertical-align:top;margin: 5px;" />');var v=new tw2gui.checkbox("*bold*",p.bold?"tw2gui_checkbox_checked":"",function(){p.bold=p.bold?false:true});e(v.getMainDiv()).css("display","block").css("margin-bottom","5px");d.append(v.getMainDiv());var v=new tw2gui.checkbox("CAPITALIZE",p.caps?"tw2gui_checkbox_checked":"",function(){p.caps=p.caps?false:true});d.append(v.getMainDiv());var m=e('<div style="width:160px;height:50px;display:inline-block;vertical-align:top;border: 1px solid #000;padding: 0px;margin: 5px;" />');m.append('<span style="width:140px;height:15px;display:inline-block;text-align:center;padding: 4px 0px 2px 0px;font-size:11px;">history</span>');for(var a=0;a<s.length;a++){var g=e('<div style="width:20px;height:20px;display:inline-block;vertical-align:top;margin: 0px 0px 0px 10px;cursor:pointer;background-color:'+l(s[a])+';" />');g.click(function(){c(t,{color:e(this).css("background-color"),bold:p.bold,caps:p.caps});i.colorBox.hide()});m.append(g)}var y=e("<div />").append(i.customColor).append(u).append(d).append(m);i.colorBox=new MessageDialog("Color",y);i.colorBox.addButton("ok",function(){c(t,{color:e(i.customColor).css("background-color"),bold:p.bold,caps:p.caps})});i.colorBox.addButton("cancel");i.colorBox.show()};return t}(jQuery);_base.Chat2=Chat;var Notes=function(e){var t={};var n=null;var r=false;t.init=function(){if(r){return}if(Settings.get("notes",true)){GameEnhance.addTabOnMessagesWindow("Notes","notes",function(){i()})}r=true;t.ready=true};var i=function(){if(!MessagesWindow.window){return}n=e(MessagesWindow.window.getContentPane()).find(".messages-notes");n.css("width","680px").css("margin","0 auto").css("position","relative").css("top","0");u(Cache.load("notes"))};var s=function(e){Cache.save("notes",e);(new UserMessage("saved successful",UserMessage.TYPE_SUCCESS)).show()};var o=function(t){n.children().remove();MessagesWindow.window.showLoader();var r=(new tw2gui.textarea).setWidth(660).setHeight(300).setContent(t);n.append(e('<div style="margin-left:8px" />').append((new tw2gui.bbcodes(r)).getMainDiv())).append(r.getMainDiv()).append(e('<div style="margin-left:8px" />').append((new tw2gui.button("Save".escapeHTML(),function(){s(r.getContent());u(r.getContent())})).getMainDiv()).append((new tw2gui.button("Preview".escapeHTML(),function(){u(r.getContent())})).getMainDiv()));MessagesWindow.window.hideLoader()};var u=function(t){n.children().remove();var r=new tw2gui.scrollpane;e(r.getMainDiv()).css("height","324px");e(r.getMainDiv()).find(".tw2gui_scrollpane_clipper_contentpane").addClass("selectable");n.append(e('<div style="margin:8px" />').append(r.getMainDiv())).append(e('<div style="margin-left:8px" />').append((new tw2gui.button("Save".escapeHTML(),function(){s(t)})).getMainDiv()).append((new tw2gui.button("Edit".escapeHTML(),function(){o(t)})).getMainDiv()));if(t){MessagesWindow.window.showLoader();Ajax.remoteCall("settings","get_parsed_text",{text:t},function(e){r.appendContent(Game.TextHandler.parse(e.parsed_text));MessagesWindow.window.hideLoader()})}};return t}($);_base.Notes=Notes;var Calc=function(e){var t={};var n=false;var r={};var i={sets:{},items:{}};t.init=function(){if(n){return}r=TWDBData.sets;TWDBData.sets=null;delete TWDBData.sets;n=true;t.ready=true};t.getSetBonusForJob=function(e,t,n){if(isDefined(i.sets[e])&&isDefined(i.sets[e][t])&&isDefined(i.sets[e][t][n])){return i.sets[e][t][n]}try{return s(e,t,n)}catch(r){Error.report(r,"calcSetBonusForJob ("+e+" "+t+" "+n+")")}return 0};t.getItemBonusForJob=function(e,t){if(isDefined(i.items[e])&&isDefined(i.items[e][t])){return i.items[e][t]}try{return o(e,t)}catch(n){Error.report(n,"calcItemBonusForJob ("+e+" "+t+")")}return 0};var s=function(e,t,n){if(!isDefined(r[e])||!isDefined(r[e][t])){return 0}if(!isDefined(r[e])){Error.report({message:"unknown set "+e},"calcSetBonusForJob");return 0}if(!isDefined(r[e][t])){return 0}var s=r[e][t];var o=Jobs.getJobById(n);if(!o){return 0}var u=0;if(isDefined(s.jobs["all"])){u+=s.jobs["all"]}if(isDefined(s.jobs[n])){u+=s.jobs[n]}for(var a in o.skills){var f=o.skills[a];if(isDefined(s.skills[_skill2id[a]])){u+=s.skills[_skill2id[a]]*f}}if(!isDefined(i.sets[e])){i.sets[e]={}}if(!isDefined(i.sets[e][t])){i.sets[e][t]={}}i.sets[e][t][n]=u;return u};var o=function(e,t){var n=ItemManager.get(e);if(!n){return 0}var r=n.bonus;var s=Jobs.getJobById(t);if(!s){return 0}var o=0;for(var u in s.skills){var a=s.skills[u];var f=_id2skill[parseInt(_skill2id[u]/5)];if(isDefined(r.skills[u])){o+=r.skills[u]*a}if(isDefined(r.attributes[f])){o+=r.attributes[f]*a}}if(!isDefined(i.items[e])){i.items[e]={}}i.items[e][t]=o;return o};return t}($);_base.Calc=Calc;var BuyTip=function(e){var t={};var n=false;var r={};var i=0;var s={};var o=0;t.init=function(){if(n){return}r=Cache.load("betteritems");if(r==null||typeof r!="object"){r={}}if(Settings.get("buyTip",true)){GameEnhance.injectItem("Trader","buytip",function(e){return u(e,"trader")});GameEnhance.injectItem("ItemTrader","buytip",function(e){return u(e,"trader")});GameEnhance.injectMarket("buytip",function(e){return u(e,"market")})}Eventer.set("TWDBdataLoaded",function(){t.reset()});n=true;t.ready=true};t.reset=function(){if(DataManager.getVersion()==o){return}o=DataManager.getVersion();r={};Cache.save("betteritems",r)};var u=function(e,t){var n=t=="market"?e:e.obj.item_id;if(!Collector.isNewItem(n)||isDefined(r[n])&&r[n].length==0){return""}if(t=="market"){if(isDefined(r[n])){return f(n)}i++;Worker.add(function(e,t){return function(){a(t);var n=MarketWindow.DOM.find("#TWDBbuyTip"+e);n.after(f(t));n.remove()}}(i,n));return'<span id="TWDBbuyTip'+i+'" style="display:hidden" />'}if(isDefined(r[n])){e.divMain.find(".TWDBbuyTip").remove();e.divMain.append(l(n));return}e.divMain.find(".TWDBbuyTip").remove();Worker.add(function(e,t){return function(){a(t);e.divMain.find(".TWDBbuyTip").remove();e.divMain.append(l(t))}}(e,n))};var a=function(e){if(!ClothCalc.isItemUsable(e,true)){return}if(isDefined(r[e])){return}r[e]=[];var t=ItemManager.get(e);var n=Jobs.getAllJobs();for(var i=0;i<n.length;i++){var s=n[i];var o=ClothCalc.getClothForJob(s);if(!isDefined(o)){continue}var u=0;var a=Calc.getItemBonusForJob(e,s);if(isDefined(o[_type2id[t.type]])){var f=ItemManager.get(o[_type2id[t.type]].id);u+=Calc.getItemBonusForJob(f.item_id,s)}if(isDefined(f)&&isDefined(f.set)||isDefined(t.set)){var l=isDefined(f)&&isDefined(f.set)?f.set.key:null;var c=isDefined(t.set)?t.set.key:null;var h={};h[l]=0;h[c]=0;for(var p in o){var d=ItemManager.get(o[p].id);if(d.set){if(d.set.key==l){h[l]++}if(d.set.key==c&&l!=c){h[c]++}}}if(l){u+=Calc.getSetBonusForJob(l,h[l],s);u-=Calc.getSetBonusForJob(l,h[l]-1,s)}if(c){a+=Calc.getSetBonusForJob(c,h[c],s);a-=Calc.getSetBonusForJob(c,h[c]-1,s)}}if(a>u){var v=ClothCalc.getLPForJob(s);if(isDefined(v)){var m=v.sum-u+a;r[e].push({job:s,newlp:m,more:m-v.sum})}else{r[e].push({job:s,newlp:a,more:a})}}}Cache.save("betteritems",r)};var f=function(e){if(!isDefined(r[e])){return""}if(r[e].length==0){return""}s[e]=false;var t=c(e).escapeHTML();return"<img onload=\"$(this).next('.TWDBcollector').remove();$(this).addMousePopup('"+t+'\');" src="'+Images["iconStar"+(s[e]?"2":"")]+'" class="TWDBbuyTip" width="18px" height="18px" style="padding:0px;border:0px;margin:0px;" />'};var l=function(t){if(!isDefined(r[t])){return}if(r[t].length==0){return}s[t]=false;var n=c(t);return e('<img src="'+Images["iconStar"+(s[t]?"2":"")]+'" class="TWDBbuyTip" width="25px" height="25px" title=\''+n+'\' style="position:absolute;bottom:-8px;right:-5px;padding:0px;border:0px;margin:0px;" />')};var c=function(e){if(!isDefined(r[e])){return""}var t='<table border="0" cellspacing="0" cellpadding="0"><tr>';if(!ClothCalc.isItemUsable(e)){var n=ItemManager.get(e);t+='<td colspan="2" style="text-align:center; font-weight:bold;">'+n.level+" Level</td></tr><tr>"}for(var i=0;i<r[e].length;i++){var o=r[e][i];var u=Jobs.getJobById(o.job);var a=" +"+o.more+" "+u.name.escapeHTML()+" ["+o.newlp+"]";if(o.job==ClothCalc.getSelectedJob()){a="<b>"+a+"</b>";s[e]=true}if(o.newlp<0){var f="#FF0000"}else{if(o.newlp-o.more<0){var f="#0000FF"}else{var f="#008000"}}t+='<td style="color:'+f+';">'+a+"</td>";if(i%2){t+="</tr><tr>"}}if(i%2){t+="<td></td></tr>"}else{t=t.substring(0,t.length-4)}t+="</table>";return t};return t}($);_base.BuyTip=BuyTip;var LpInfo=function(e){var t={};var n=false;t.init=function(){if(n){return}if(Settings.get("jobBoniTooltip",true)){GameEnhance.injectItem("Inventory","lpInfo",function(e){return r(e)})}n=true;t.ready=true};var r=function(e){e.divMain.find(".TWDBlpInfo").remove();var t=ClothCalc.getSelectedJob();if(!isDefined(t)){return}var n=e.obj.item_id;e.divMain.find(".TWDBlpInfo").remove();Worker.add(function(e,t,n){return function(){e.divMain.find(".TWDBlpInfo").remove();e.divMain.append(i(t,n))}}(e,n,t))};var i=function(e,t){var n=Calc.getItemBonusForJob(e,t);if(n<=0){return}var t=Jobs.getJobById(t);return'<img src="'+Images.iconLaborpoints+'" title="+'+n+" "+t.name.escapeHTML()+'" class="TWDBlpInfo" style="position: absolute; top: 2px; right: 2px; width: 15px; height: 15px; border: 0px none; margin: 0px;"/>'};return t}($);_base.LpInfo=LpInfo;var Eventer=function(e){var t={};var n={};t.set=function(e,t,r){if(!isDefined(n[e])){n[e]={}}if(!isDefined(r)){var r=false}var i=Number((new Date).getTime());n[e][i]={id:i,call:t,count:r};return i};t.trigger=function(e){if(!isDefined(n[e])){return}var t=0;for(var r in n[e]){if(!isDefined(n[e][r].id)){continue}window.setTimeout(n[e][r].call,10);if(n[e][r].count==false){t++;continue}n[e][r].count--;if(n[e][r].count>0){t++;continue}}if(t==0){delete n[e]}};t.remove=function(e,t){if(!isDefined(n[e])||!isDefined(n[e][t])){return false}delete n[e][t]};return t}($);_base.Eventer=Eventer;var Importer=function(e){var t={};var n=false;t.div=null;t.init=function(){if(n){return}t.div=Window.addTab("importer","Importer","",function(){r()});n=true;t.ready=true};var r=function(){t.div.children().remove();Window.hideLoader();jQuery.getScript("http://"+Script.url+"/cache/js/sDoImport_"+Script.lang+".js")};return t}($);_base.Importer=Importer;var Window=function(e){var t={};var n="twdb_window";var r=null;var i=null;var s={};var o=false;t.init=function(){if(o){return}var n=e('<div title="tw-db.info" class="menulink" />').css("background-image","url("+Images.button+")").mouseenter(function(){e(this).css("background-position","-25px 0px")}).mouseleave(function(){e(this).css("background-position","0px 0px")}).click(function(){u()});e("#ui_menubar").append(e('<div class="ui_menucontainer" />').append(n).append('<div class="menucontainer_bottom" />'));o=true;t.ready=true};var u=function(t){r=wman.open(n,null).setMiniTitle("tw-db.info").setTitle("tw-db.info");r.appendToContentPane(e('<div style="width:100%;text-align:center;position:absolute;bottom:0px;left:0px;height:15px;display:block;font-size:12px;color:#000000;">.:powered by tw-db team:. | <a href="http://tw-db.info" style="font-weight:normal;color:#000000;" target="_blank">.:tw-db.info:.</a> | '+(Script.version/100+" rev. "+Script.revision)+"</div>"));r.appendToContentPane(e('<div title=" tw-db support " style="width:19px;height:19px;position:absolute;bottom:-5px;right:5px;display:block;cursor:pointer;" />').append('<img src="'+Images.iconSupport+'" />').click(function(){Support.open()}));var o=null;for(var t in s){if(o===null){o=t}r.addTab(s[t].name,t,function(e,t){a(t)});s[t].gui.children().remove();r.appendToContentPane(s[t].gui)}if(o!==null){i=s[o].gui;a(o)}};var a=function(e){i.hide();r.showLoader();r.activateTab(e);if(!isDefined(s[e])){return}if(s[e].title!=""){r.setTitle("tw-db.info "+s[e].title)}else{r.setTitle("")}i=s[e].gui;i.show();window.setTimeout(s[e].callback,10)};t.addTab=function(t,n,r,i){s[t]={title:r,name:n,callback:i,gui:null};s[t].gui=e('<div style="margin-top:10px;"/>').hide();return s[t].gui};t.hideLoader=function(){r.hideLoader()};return t}($);_base.Window=Window;var Settings=function(e){var t={};var n=false;var r={};var i=null;t.init=function(){if(n){return}var e=Cache.load("settings");if(typeof e=="object"&&e!=null){r=e}else{r={}}i=Window.addTab("settings","settings","settings",s);n=true;t.ready=true};var s=function(){i.children().remove();var n=[[0,"collector","mark items on Traders and Market you did not own"],[0,"jobBoniTooltip","show laborpoint information on inventory window for the selected job"],[0,"buyTip","show buy tip on traders"],[0,"sellTip","show sell tip on inventory window"],[0,"sellTip1","sell items you have more than once"],[0,"sellTip2","sell items which are not used on any job"],[0,"sellTip3","never sell named items"],[0,"sellTip4","never sell item, which could only be found"],[0,"chat","use chat enhancement"],[0,"notes","use the Notes-Feature"],[0,"questgroup","Show the daily Quests as Groups"],[0,"showbonusjobs","Show Bonus Jobs on minimap"]];var s={};var u=e("<table />");for(var a=0;a<n.length;a++){var f=n[a][1];s[f]=t.get(f);var l=e("<tr />");switch(n[a][0]){case 0:var c=function(e){return function(){s[e]=!s[e]}}(f);var h=new tw2gui.checkbox("",!s[f]?"":"tw2gui_checkbox_checked",c);l.append(e("<td />").append(h.getMainDiv()));break}l.append("<td>"+n[a][2]+"</td>");u.append(l)}var p=new tw2gui.combobox;p.addItem("left","left").addItem("right","right").addItem("custom","saved Position");p.select(String(r["clothPos"]));var l=e("<tr />").append(e('<td colspan="2" />').append(p.getMainDiv()).append("<span> right</span>"));u.append(l);var d=new tw2gui.button("Save",function(){switch(p.getValue()){case"left":r["clothPos"]="left";break;case"right":r["clothPos"]="right";break;default:r["clothPos"]="custom";break}o(s)});var v=e('<div style="width:100%;text-align:right;" />').append(e('<img style="cursor:pointer;" title=" reset local Storage" src="'+Images.iconReset+'" />').click(function(){Cache.reset()}));i.append(u).append(d.getMainDiv()).append(v);Window.hideLoader()};t.get=function(e,n){if(!isDefined(r[e])){t.set(e,n);return n}return r[e]};t.set=function(e,t){r[e]=t;Cache.save("settings",r)};var o=function(e){for(var t in e){r[t]=e[t]}if(Cache.save("settings",r)){(new UserMessage("saved successful",UserMessage.TYPE_SUCCESS)).show()}else{(new UserMessage("?save_error",UserMessage.TYPE_ERROR)).show()}};return t}($);_base.Settings2=Settings;var DataManager=function(e){var t={};var n=false;var r={};var i={};var s={};var o=[];var u=0;var a={items:{},skills:{}};var f={items:true,skills:true};var l=null;t.init=function(){if(n){return}var o=window.addEventListener?"addEventListener":"attachEvent";var l=window[o];var c=o=="attachEvent"?"onmessage":"message";l(c,function(t){if(t.origin!=="http://"+Script.url){return}try{var n=e.parseJSON(t.data);if(isDefined(n.error)){(new UserMessage(Script.url+": "+n.error,UserMessage.TYPE_ERROR)).show()}else{(new UserMessage(Script.url+": "+n.message,UserMessage.TYPE_SUCCESS)).show();r=n.data;a.skills=s;a.items=i;Cache.save("datamanager",a);f={items:true,skills:true};u++;Eventer.trigger("TWDBdataLoaded")}}catch(t){(new UserMessage(Script.url+": empty or corrupt data recieved",UserMessage.TYPE_ERROR)).show()}},false);var h=Cache.load("datamanager");if(isDefined(h)&&isDefined(h.skills)&&isDefined(h.items)){a=h}if(!Bag.loaded){Bag.loadItems()}var p=window.setInterval(function(){if(Bag.loaded&&Wear.loaded){window.clearInterval(p);n=true;t.ready=true}},100)};t.getData=function(){return r};t.getSkills=function(){return s};t.getItems=function(){return i};t.getAnimals=function(){return o};t.getVersion=function(){return u};t.getUp2Date=function(){return f};var c=function(){try{var t=e.extend(true,{},a.skills);s={};for(var n in CharacterSkills.skills){var r=_skill2id[n];var i=CharacterSkills.skills[n].points;s[r]=i;if(isDefined(t[r])){if(t[r]!=i){f.skills=false}delete t[r]}else{f.skills=false}}if(!e.isEmptyObject(t)){f.skills=false}}catch(o){Error.report(o,"DataManager loadSkill")}};var h=function(){try{var t=e.extend(true,{},a.items);i={};o=[];for(var n in Bag.items){for(var r in Bag.items[n]){var s=Number(r);if(ClothCalc.isItemUsable(s)){i[s]=true;if(n=="animal"){o.push({id:s,speed:Bag.items[n][s].obj.speed})}if(isDefined(t[s])){delete t[s]}else{f.items=false}}}}for(var n in Wear.wear){var s=Number(Wear.wear[n].getId());if(isDefined(i[s])){continue}if(ClothCalc.isItemUsable(s)){i[s]=true;if(n=="animal"){o.push({id:s,speed:Wear.wear[n].obj.speed})}if(isDefined(t[s])){delete t[s]}else{f.items=false}}}if(!e.isEmptyObject(t)){f.items=false}var u=function(e,t){return e["speed"]>t["speed"]?true:false};o.sort(u)}catch(l){Error.report(l,"DataManager loadItems")}};t.loadData=function(e){c();h();if(!f.items||!f.skills||e===true){p()}else{Eventer.trigger("TWDBdataLoaded")}};var p=function(){try{var t={};var n={};for(var r in i){var o=ItemManager.get(r);var u=Number(_type2id[o.type]);if(!isDefined(t[u])){t[u]=[]}t[u].push(r);if(isDefined(o.set)){if(!isDefined(n[u])){n[u]=[]}n[u].push(r)}}var a={0:Number(Premium.hasBonus("regen")),1:Number(Premium.hasBonus("automation")),2:Number(Premium.hasBonus("money")),3:Number(Premium.hasBonus("character"))};var f='<form name="TWDB_CC_Form" action="http://'+Script.url+'/ingame_calc.php" method="post">';f+='<input style="display:none" type="text" name="worldfull" value="'+window.location.host+'" />';f+='<input style="display:none" type="text" name="version" value="'+TheWestApi.version+'" />';f+='<input style="display:none" type="text" name="nick" value="'+Character.name+'" />';f+='<input style="display:none" type="text" name="level" value="'+Number(Character.level)+'" />';f+='<input style="display:none" type="text" name="class" value="'+Number(_class2id[Character.charClass])+'" />';f+='<input style="display:none" type="text" name="premium" value=\''+JSON.stringify(a).replace(/'/g,"\\'")+"' />";f+='<input style="display:none" type="text" name="items" value=\''+JSON.stringify(t).replace(/'/g,"\\'")+"' />";f+='<input style="display:none" type="text" name="setitems" value=\''+JSON.stringify(n).replace(/'/g,"\\'")+"' />";f+='<input style="display:none" type="text" name="skill" value=\''+JSON.stringify(s).replace(/'/g,"\\'")+"' />";f+='<input style="display:none" type="text" name="custom" value=\''+JSON.stringify(Customs.getCustoms()).replace(/'/g,"\\'")+"' />";f+="</form>";f+='<script type="text/javascript">document.forms.TWDB_CC_Form.submit();</script>';f+="</body>";if(isDefined(l)){e(l).remove()}l=e('<iframe width="1px" height="1px" marginwidth="0" marginheight="0" hspace="0" vspace="0" frameborder="0" scrolling="no" allowtransparency="false" style="display:none;" />');e("body").append(l);var c=l.get(0);var h=c.contentWindow||c.contentDocument;if(h.document)h=h.document;h.write(f)}catch(p){Error.report(p,"DataManager sendForm")}};t.aktuell=f;return t}($);_base.DataManager=DataManager;var Quests=function(e){var t={};var n=false;t.init=function(){if(n){return}if(Settings.get("questgroup",true)){r()}n=true;t.ready=true};var r=function(){var t={"daily Quests":e('<div class="TWDBBox" style="display:none;" / >')};var n=function(n){if(n.key!="paper"){return}for(var r in t){t[r].children().remove()}var i={};var s=e(wman.getById("window-quest_employer").getMainDiv());for(var o=0;o<n.open.length;o++){var u=n.open[o];var a="daily Quests";for(var f=0;f<u.requirements.length;f++){var l=u.requirements[f];if(!isDefined(l.jsInfo)||l.jsInfo.type!="task-finish-way"){continue}a=l.info}if(!isDefined(t[a])){t[a]=e('<div class="TWDBBox" style="display:none;" / >')}t[a].append(s.find("#open_quest_"+u.id));var c="exclamationgray";if(!u.accepted){if(u.acceptable){c="exclamation"}}else{if(this.finishable){c="question"}else{c="questiongray"}}if(!isDefined(i[a])){i[a]={}}if(!isDefined(i[a][c])){i[a][c]=0}i[a][c]++}var h=s.find(".quest_splitter").next();for(var r in t){var p=e("<span />");if(isDefined(i[r])){for(var d in i[r]){p.append('<span style="margin-left:10px;">'+i[r][d]+"x").append(tw2gui.icon.get(d))}}var v=e("<div />").append(e('<span style="cursor:pointer;font-weigth:bold;margin-left:20px;" >'+r+"</span>").click(function(){e(this).parent().children(".TWDBBox").toggle()}).append(p)).append(t[r]).append('<div class="quest_splitter" />');h.append(v)}};GameEnhance.injectQuestLog(function(e){n(e)})};return t}($);_base.Quests=Quests;var Customs=function(e){var t={};var n=false;t.getCustoms=function(){return ClothCalc.data.custom};return t}($);_base.Customs=Customs})(jQuery);TWDB.Loader=new Object({current:false,stack:["Cache","Settings","Time","GameEnhance","ReportAnalyser","Chat","ClothCalc"],init:function(){this.guiMain=jQuery("<div />");this.guiMain.html("tw-db.info ClothCalc is waiting for the game");this.gui=jQuery('<div class="main_footnote" />').append(jQuery('<div class="main_footnote_left"></div><div class="main_footnote_right"></div>'));this.gui.append(this.guiMain);jQuery("#main_footnotes").append(this.gui);var e=this;this.interval=setInterval(function(){e.worker(false)},500)},worker:function(e){if(this.current===false){if(!window["jQuery"]||!window["TheWestApi"]||!TheWestApi.version||typeof ItemManager.initialized=="undefined"||!ItemManager.initialized){return}var t=((TheWestApi.version+"").match(/[0-9\.]+/)||[1])[0];if(t>2){return this.destroy()}setTimeout(function(){jQuery.getScript("http://"+TWDB.script.check+"?"+(new Date).getTime())},500);try{TheWestApi.register("twdb_clothcalc","tw-db.info Cloth Calc","1.34",TWDB.script.gameversion+"","scoobydoo [tw-db.info]","http://tw-db.info")}catch(n){(new UserMessage("failed to register tw-db.info script on TheWestApi",UserMessage.TYPE_FATAL)).show();return this.destroy()}if(TWDB.script.gameversion<t){TheWestApi.displayOutdated()}if(typeof Game=="undefined"){Game={cdnURL:cdnURL}}this.current=0;this.worker(true)}if(this.current>=this.stack.length){return this.destroy()}if(e){this.guiMain.html("tw-db.info: initialising "+this.current+"/"+this.stack.length);try{TWDB[this.stack[this.current]].init()}catch(r){TWDB.Error.report(r,"init "+[this.stack[this.current]]);return this.destroy()}}if(TWDB[this.stack[this.current]].ready){this.current++;this.worker(true)}},destroy:function(){clearInterval(this.interval);this.gui.remove();setTimeout(function(){delete TWDB.Loader},1e3)}});TWDB.Loader2=new Object({current:false,stack:["Window","Cache","DataManager","Jobs","Settings","Tools","Importer","Updater","Map","GameEnhance","Analyser","Notes","Calc","ClothCalc","SellTip","Chat","Collector","BuyTip","LpInfo","Quests"],init:function(){var e=this;this.interval=setInterval(function(){e.worker(false)},500)},worker:function(e){if(this.current===false){if(!window["jQuery"]||!window["TheWestApi"]||!TheWestApi.version||typeof ItemManager.initialized=="undefined"||!ItemManager.initialized){return}var t=((TheWestApi.version+"").match(/[0-9\.]+/)||[1])[0];if(t<2){return this.destroy()}TWDB.Updater.query();TWDB.Error=TWDB.Error2;TWDB.Error2=null;delete TWDB.Error2;TWDB.GameEnhance=TWDB.GameEnhance2;TWDB.GameEnhance2=null;delete TWDB.GameEnhance2;TWDB.Settings=TWDB.Settings2;TWDB.Settings2=null;delete TWDB.Settings2;TWDB.ClothCalc=TWDB.ClothCalc2;TWDB.ClothCalc2=null;delete TWDB.ClothCalc2;TWDB.Chat=TWDB.Chat2;TWDB.Chat2=null;delete TWDB.Chat2;try{TheWestApi.register("twdb_clothcalc","tw-db.info Cloth Calc","1.34",TWDB.script.gameversion+"","scoobydoo [tw-db.info]","http://tw-db.info")}catch(n){(new UserMessage("failed to register tw-db.info script on TheWestApi",UserMessage.TYPE_FATAL)).show();return this.destroy()}if(TWDB.script.gameversion<t){TheWestApi.displayOutdated()}this.current=0;this.worker(true)}if(this.current>=this.stack.length){return this.destroy()}if(e){try{TWDB[this.stack[this.current]].init()}catch(n){TWDB.Error.report(n,"init "+[this.stack[this.current]]);return this.destroy()}}if(TWDB[this.stack[this.current]].ready){this.current++;this.worker(true)}},destroy:function(){clearInterval(this.interval);setTimeout(function(){delete TWDB.Loader2},1e3)}});if((location.href.indexOf(".the-west.")!=-1||location.href.indexOf(".tw.innogames.")!=-1)&&location.href.indexOf("game.php")!=-1){TWDB.Loader.init();TWDB.Loader2.init()}});