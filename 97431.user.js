// ==UserScript==
// @author         Roktaal
// @co-author      asylume
// @name           eRepublik Advanced
// @namespace      eCompanyManager
// @description    eRepublik Advanced Tools
// @version        2.6.3
// @include        http://*.erepublik.com/*
// @require        http://ajax.googleapis.com/ajax/libs/jquery/1.3.2/jquery.min.js
// @require        http://jquery-json.googlecode.com/files/jquery.json-2.2.min.js
// ==/UserScript==

// ===============================================================================
// License and Disclaimer (lets make it simple :))
// ===============================================================================
// This software is donationware. You are welcome to donate eRepublik in-game gold
// to author of this script.  Amount of gold is up to you and it reflects what you
// think author deserves for the effort of contributing to the eRepublik community.
// Software is provided 'AS IS' and without any warranty.
// Use on your own responsibility.
// ===============================================================================

// Changelog:
// ===============================================================================
// v2.5.9
// - Fixed a bug in "Article timestamp". Not showing when offline.
// - Fixed a bug in "Health kit timer". Not stopping in some cases.
// - Fixed a bug in "Company tracker". Company link was wrong in some cases.
// - Added basic "Citizen tracker" under "Battlefield" section. Users can track
//   desired citizens. Cross-account enabled. More data will be added in the future.
// - Made some minor design changes to "Health kit timer".
// - Added a fix for those annoying, very long, shouts.
// ===============================================================================
// v2.6.0
// - Fixed a bug in "Citizen tracker". Experience required for lvl.26 is 7000.
// - Removed duplicate items from "My places links".
// - Complete redesign of "Citizen tracker".
// - Made "Citizen tracker" visible only on main page.
// - Made "Company tracker" visible only on main page.
// ===============================================================================
// v2.6.1
// - Adapted company profit calculations to match new salaries/day system.
// - Complete redesign of "Company tracker".
// ===============================================================================
// v2.6.2
// - Fixed vanishing of items from "Citizen tracker" and "Company tracker".
// - Removed "Battlefield" and "Health kit timer". Become obsolete.
// - Added "Mini inventory" to the left sidebar.
// - Added improvements to Battlefield pages.
// - Added "Battlelist" link to My places.
// - Major rewrite of all saving settings codes due to which some of the settings
//   were lost.
// - Temporary fixed company managing tools. Due to lack of eAPI, 100 health and
//   100 happiness is used for workers that did not work.
// - Removed "time" from "t:" tooltip, and "s:" (salary), that were beside every
//   worker on employees pages. Become obsolete.
// - Applied new raw consumption formula to company managing tools.
// ===============================================================================
// v2.6.3
// - Fixed a bug in company managing tools.
// - Fixed a bug in autodonater.
// - Applied new settings code to autodonater.
// - Added reset abbility for autodonater. Turning on/off "Autodonater" on eRA
//   settings tool will reset it.
// ===============================================================================

// -- Images -----------------------------------------------------------------------------------------------------------
var eCM_MainImg = 'data:image/png;base64,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';

var eCM_MainImgSlider = 'data:image/png;base64,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';

var eCM_LinksHeader = 'data:image/png;base64,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';

var authLogo = 'data:image/gif;base64,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';

var infoImg = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAATZJREFUeNpc0j9IAnEUwPG7y6kGBwlcgghJWiTExaEgggpxbRChpTBoKRLFpaWGoJa2iraEhpx0FFxMkghEUBE0qLW2SFoazu+L96OjH3zu/fjde79/d7brupZppfqLj5DAOgIYorK5HHo2ObYpIDlGuMUCWvjAPOZwjwyFn78FJEcYeMIj9jCtiV3t32GAFYfkSTpFtJlhlZjGA87QxBdiquDwSEJW2KXYlllwQHGQ+Kb9V+Ip9uWQa3hHhxdyoCU9k0wyiws9bxlHsoIfI002FyD7r+Oa8Usd/paHFHQwQ5Lf+muLuuqhZyxsCkqYkGvzvOzpob0tj4bDkn06J5LAKkl9uYErTOkWzwlxZM13kNu5wbauWNWzyb53EMUWkxftf79GipDTry2T/KCGY5Ll61tjAQYAPOhoMJh/2+4AAAAASUVORK5CYII=';

var infoImg_hover = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAwAAAAMCAYAAABWdVznAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAATZJREFUeNpc0r9LQlEUwPH3nk02OIjgEkhDUYNIuBg0hFAR/gMRtBQFLYpRuLTUENjSpuGm0JBTjYGLRiKBBKZCDTVWWxgtDs/viXPx0YXPO5f7zrm/3rNd17VMe+h9TBDWsYogXnG7OB9+NDm2KSA5TihjDm18YQbTuMYuhd9/BSRHGWhJHfYR0sRn7V/hBcsOyX46FTwxQ5K4iQbyaGKAuMo5PFKQFfYotmUWZCgOE9+1/0Y8Q1oOuYJPdHghB1rSM8kkEVzoeW9wLCsE8KPJ5gJk/3VcMl7Q4V95SEEHUyQFrHGL6apZz9isKajCJ9fmednVQ3vbEe4dluzTOZUEVknpyzUUMalbPCckcGC+g9xOCdu64p2eTfa9gwVsMXnF/vdrbBAO9WvLJEPUcEKyfH1rJMAAiQVoa6h75xUAAAAASUVORK5CYII=';

var loadingImage = 'data:image/gif;base64,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';

var loadingBackImg = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAABBJREFUeNpi+P///xmAAAMACcgDyob6aEsAAAAASUVORK5CYII=';

var arrowLeft = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAJCAYAAAD6reaeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAEFJREFUeNpkjgEKADAERc2Ox3Edw53+spqwX6j3FASAaokImEpUFTF5goQVRLa7N3A3zWx9MNoUeaiK9tITR4ABAI6FH2Y9eB0NAAAAAElFTkSuQmCC';

var arrowRight = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAJCAYAAAD6reaeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAADxJREFUeNpki0EKADAIw1y/p8/1f84dOuoWECRRc/dqTAfWRESZAC4aoBcMQzJ8MjMXXjHeKa5UcdgCDAChvR3lc1C6AQAAAABJRU5ErkJggg==';

var arrowDown = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQ1JREFUeNpi/P//PwM5gAWZ8+DBYxsWFpYUIDMAiPmhwh+BeAMQN8jISD6AqWWE2Xjv3sNwNja2mUga0AHIgHSg5pVwjffuPbBhY2PfgkcTsmYfoOYjTCAeUFMKEZoYoGpAahmYoAIBJIRLAHLgwG379OkDw/fv3+CqPn/+DOT/YNDV1Ue2FW4jHPDxCTBwcnLh0gQHMI0f//37i6L5z5+/GJqgaj7CNf79+3cDEKOYKC0ti2ETSA1ILVzjnz+/G/79+/fx9+9fOEMEJAdSA1IL16isrPgAaJLDr18/P/748Z0B2XYQGyQGkmNmZk4HqUVJOSBw+/ZdG6ACrEmOi4t7jqKi/BGMJEcqAAgwAHD+ixkJKm2YAAAAAElFTkSuQmCC';

var arrowUp = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAARBJREFUeNqckkuOgkAQQEu6F7pAZmdMNLoYx60H8BAcwoRreBAu4M4juOAAGpfGhETNbKddDEwbGqsMtA3i+KmkQlH9XlcCVUvTFN4Jbr6E4W7MOZ9g6WI6WVtgzjH9Tqcd5Gwtn7jff4/wsTCEctAFHsozLaLUx3r5j2TKI5RDK2tMn5AgY4iFXHTLxOGwg/V6VSW7pliYdjz+AOcMGo16leyYYkGKot9Lbdv2PVn/DqFU4lgWg2bz45J5tFpXGBlARuiJSZLMMR9+GWKI1aKUsa+UEqeTvCvRGTEAqa/FweAzwJs8Kf9EHEdgTqeaenTGGPN6vW5Q2ByKzWY7RqBy5XAVp8PhV3izcq/GWYABABOzgxBMXd69AAAAAElFTkSuQmCC';

var iconDonate = 'data:image/gif;base64,R0lGODlhEAAQANU%2FAOO8csOeX%2Ffbm%2FzmjPzRM%2F%2FrSPXaq%2F3lq%2BbAe7t0INmiOtCYPOmhLvPIY%2FTFVc2UMdejScOsh%2BatWO62Pdzc3Mm3mfrpV%2BahO%2F%2FyzFZYXN61avbUgWpscM6SKdeZK%2BOtPOy5Su7Cc%2B27QuqpOM7OzuWaKvC8Qu%2Fz%2Fc%2BwetqrWuy%2BXfLKjPHImtSoYvOsOt3k8P3VVc%2FU2%2BzMUs3DsPjWRNChXbS6w%2BehMOyoMuXp9fK3LPz%2F%2F%2FjqbOSxSMzMzP%2F%2F%2FyH5BAEAAD8ALAAAAAAQABAAAAaXwJ9wSCwai6HRZWQ4DlkinsUyOq5A2ImkQGAcb7SCuBTClY6XxgCmuwwItx8nRlwkahKda6PzcnYIKQgIGhAQCx4tMh0JPxknBwcCAgcYAhp2hh0aGTkODaAPCiEHGg8IBhgAGS8eCj0ODiAKDwsCGyoKKBk2MxU1oh8mJiIfDxE%2BPz4UQhQ%2BFQEP0hEkTs0%2BPtXW29xGQQA7';

var iconMessage = 'data:image/gif;base64,R0lGODlhEAAQANU%2FAKnS3PH%2B%2F%2B3%2B%2F12dANrt86LK1bvc5OT2%2BoS7AOP2%2B7PV3bLc49br78rl6vf%2B%2F%2Fr%2F%2F4S1wZ%2FR2pvG0dTx9dDr8Yy8yJ%2FP2cfp7MHi57bY37DW4ef9%2F%2BHh4WqmAI%2FIAIyxU5jMAJ7UAMzld3KuANHu8ozAALbf5eDz%2BYi4xKHGaMLe55O%2FzbrZ38fi69%2F1%2BtTtd7TT2oXBzMTfd%2Bn2%2BGSZPm%2BsU3KiRnatVJ%2FO13mzWZjEz6PP3bHW3czMzP%2F%2F%2F%2F%2F%2F%2FyH5BAEAAD8ALAAAAAAQABAAAAalwJ9wSCz%2BCBkFb8lsKjIMhW9KrVZZgAPpkegeDt3EgzTLFHwahi%2FAbvsYCx9A4tvsGtPHY9oAbHwFOj4CExEYVRgREwKAKz4OAgsxBlMGNQOYKRIVUy0aFxY4FjkjIS8hIzecKgYBJxcmJgMgHj4eIAMVDguQLgQUFAMiVCIDKFZUAyUIPgglAzAoENPUEDQdCDIIHTZGQxwfmAMfHN7fPejl5uZBADs%3D';

var iconRefresh = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAASZJREFUeNqc0j1LA0EUheFEo1FBEP0BNoJYWGgjVoJYCFsnCBaCpBAFRbTwB6SzlCC2FoKlsCLaxEL8QAU/ioUES0u7gBGL9R0510wWYpGBB3Yzc+/MnE06juNUOyMdBEGruVEUEOEBLzYRhmEq80/THoxjGHMo4xBfbrLDW5hs8m2LGHW4o23bpBX24gx5r/ANOzjFgBpPq8Hviyve13EmUcGTdovENV5EN0ZsxxUsaZdBHGAocexzuPg7bUdXeIIrb1EJtWT66MMH7qzwHc/eohkvFBs5FU8o6b8kj7Cm52VUcamd57GOLO5R9FO91t3cuMUCbrCHXTyiH116bvp2G/hUcqv6ze46iy0cK6SmQnevTUzpu43hVYFc6DqNtNr9k/8IMAAWcT6NYrpfeAAAAABJRU5ErkJggg==';

var newspaperToolbar = 'data:image/png;base64,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';

var translateIcon = 'data:image/gif;base64,R0lGODlhHgAeAMQfAFNWWWeS5Kq3x5CbqZmltTIyM7fH3k160S1Uopat1mVobIGJlGhtdKGtvHR7hHx7fENDRXuEjoiIiEpLTGxze4yx9Ke62F5kalBSVIeRnVpcXkdJSzw9Pq++zk1PUP///yH5BAEAAB8ALAAAAAAeAB4AAAX/4CeOY3CcgUWubPsdiZEc1aG6uGvQh5H/JVoAcQL+DIEaAkEwfggMhQLDEIx2y6bRocmIGgpAYzRLOAkTjVVE0ThIPucCA1h/GAwNa8F5/xxeIxoPACwUHBROHwIDGQASGCwMEAtGDREUDh0XFIUrDBwDIx0NGRlxIo4aYx8XGhMfHREODhQMDxoYEBwFHBserE8QGB0jFxsQixweEwAPEhoe0hoMEQSoExgXJMfJHxEKeAoXGQ12LAV0JAAYHCsCGBsjDQyBJBCvFAIEhxoQA1oWebhAYIADAAo8ZDg3oAAzXw0WDEM0ggAGXL2eadhAx14DWwOKfchATuSANBoAkWTyACBagQn/nAzgwAGml4YcBHQYwLGAyBwCai64UMDLBQgMRkTY5SeHzTsF3kAocA6Zhx8ZOOj5sKDABQcckq7b9WNqIAIQYFJdoctdjgIFggHwACECCwgQtr1d+yRNgYBsporKgYwBP5q8BotwAMGDzx8CdvHisCDCAlKveBXYECxHBwYAIpzroPlCZ0VOQgAAOw==';

var resizeGrip = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAFCAMAAACD1meMAAAABGdBTUEAAK/INwWK6QAAABl0RVh0U29mdHdhcmUAQWRvYmUgSW1hZ2VSZWFkeXHJZTwAAAAGUExURbu7u////3iwjPUAAAACdFJOU/8A5bcwSgAAABRJREFUeNpiYMADGHEDBhroAwgwAA9QADeT0qnSAAAAAElFTkSuQmCC';

var horSliderButtons = 'data:image/png;base64,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';

var iconDonate = 'data:image/gif;base64,R0lGODlhEAAQANU%2FAOO8csOeX%2Ffbm%2FzmjPzRM%2F%2FrSPXaq%2F3lq%2BbAe7t0INmiOtCYPOmhLvPIY%2FTFVc2UMdejScOsh%2BatWO62Pdzc3Mm3mfrpV%2BahO%2F%2FyzFZYXN61avbUgWpscM6SKdeZK%2BOtPOy5Su7Cc%2B27QuqpOM7OzuWaKvC8Qu%2Fz%2Fc%2BwetqrWuy%2BXfLKjPHImtSoYvOsOt3k8P3VVc%2FU2%2BzMUs3DsPjWRNChXbS6w%2BehMOyoMuXp9fK3LPz%2F%2F%2FjqbOSxSMzMzP%2F%2F%2FyH5BAEAAD8ALAAAAAAQABAAAAaXwJ9wSCwai6HRZWQ4DlkinsUyOq5A2ImkQGAcb7SCuBTClY6XxgCmuwwItx8nRlwkahKda6PzcnYIKQgIGhAQCx4tMh0JPxknBwcCAgcYAhp2hh0aGTkODaAPCiEHGg8IBhgAGS8eCj0ODiAKDwsCGyoKKBk2MxU1oh8mJiIfDxE%2BPz4UQhQ%2BFQEP0hEkTs0%2BPtXW29xGQQA7';

var iconMessage = 'data:image/gif;base64,R0lGODlhEAAQANU%2FAKnS3PH%2B%2F%2B3%2B%2F12dANrt86LK1bvc5OT2%2BoS7AOP2%2B7PV3bLc49br78rl6vf%2B%2F%2Fr%2F%2F4S1wZ%2FR2pvG0dTx9dDr8Yy8yJ%2FP2cfp7MHi57bY37DW4ef9%2F%2BHh4WqmAI%2FIAIyxU5jMAJ7UAMzld3KuANHu8ozAALbf5eDz%2BYi4xKHGaMLe55O%2FzbrZ38fi69%2F1%2BtTtd7TT2oXBzMTfd%2Bn2%2BGSZPm%2BsU3KiRnatVJ%2FO13mzWZjEz6PP3bHW3czMzP%2F%2F%2F%2F%2F%2F%2FyH5BAEAAD8ALAAAAAAQABAAAAalwJ9wSCz%2BCBkFb8lsKjIMhW9KrVZZgAPpkegeDt3EgzTLFHwahi%2FAbvsYCx9A4tvsGtPHY9oAbHwFOj4CExEYVRgREwKAKz4OAgsxBlMGNQOYKRIVUy0aFxY4FjkjIS8hIzecKgYBJxcmJgMgHj4eIAMVDguQLgQUFAMiVCIDKFZUAyUIPgglAzAoENPUEDQdCDIIHTZGQxwfmAMfHN7fPejl5uZBADs%3D';

var iconList = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABkAAAAQCAYAAADj5tSrAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAZVJREFUeNq0VEtOw0AM9XzapBC1CNFCJSQ2nINjcAMktizZcAduwQ04BksWCKl0hfpTRWnTkhkbz1A+TZoAVWvJURw7frafZ8Tb9PUeAOqsBOsXwdrX/Giy1mBDIkAE2lr7YIy9UkrNlgZxLUSLpX2ZNP+QY1uL/C9dMgiORuP4NtqucELxkYQKQFJ2VN0p7KTX7ZxpTiwQsTQcjhJagZbfQKQQ0nFStsYeI1G8ysxbrVauj0cFtWpU4U5gNwhK5zyFZN2ku7EqKQ81vzwz4oVUCsUKifYaB4X+Qa9748YlLFJIZCdE+ZykCf9zN0CeE94zmBhrAcmvXGYv/daxOl/W/6tYB1LjX085x0wKCYSUwmAAKdyWcBGU8bfbT+nSvV9Klwshirb2NdvlklJNdiSfFS/eMN8dLPcvuUk41hdE0sWHmsMHBvHaVcrg8yTZNUHuQMk5OT+k3mgWzqrf65xof14AQos4TQzmgHgCwbgqxb/vLuVAVMKs86nfyAXptkvE45e78SR+9Fu29sNIEAbB0bsAAwB5DMLwHkVPPwAAAABJRU5ErkJggg==';
// ---------------------------------------------------------------------------------------------------------------------

var is_chrome = navigator.userAgent.toLowerCase().indexOf('chrome') > -1;

if (is_chrome) {
	unsafeWindow = window;

	function GM_addStyle(css) {
		var style = document.createElement('style');
		style.textContent = css;
		document.getElementsByTagName('head')[0].appendChild(style);
	}

	function GM_deleteValue(name) {
		localStorage.removeItem(name);
	}

	function GM_getValue(name, defaultValue) {
		var value = localStorage.getItem(name);
		if (value == 'false')
			return false;
		return value || defaultValue;
	}

	function GM_log(message) {
		console.log(message);
	}

	function GM_registerMenuCommand(name, funk) {
	//todo
	}

	function GM_setValue(name, value) {
		localStorage.setItem(name, value);
	}
}

// -- Style variables --------------------------------------------------------------------------------------------------
GM_addStyle(
	'.customMenuHolder { padding: 0px 2px 2px 2px; float: left; margin-left: 3px; width: 944px; }' +
	'.customMenuElemHolder { -moz-border-radius: 0px 0px 5px 5px; background-color: #eeeeee; float: left; width: 118px; height: 20px; text-align: center; color: #7F7F7F; cursor: default; vertical-align: middle; line-height: 20px; font-size: 11px; }' +
	'.customMenuElement { -moz-border-radius: 0px 0px 5px 5px; background-color: #eeeeee; padding: 2px; float: left; width: 114px; height: 16px; text-align: center; color: #7F7F7F; cursor: pointer; vertical-align: middle; line-height: 16px; font-size: 11px; }' +
	'.customMenuElement:hover { background: #505050; color: #D8D8D8; }' +
	'.customMenuElementAdd { -moz-border-radius: 0px 0px 5px 5px; background-color: #eeeeee; padding: 2px; float: left; width: 114px; height: 16px; text-align: center; color: #CCCCCC; cursor: pointer; vertical-align: middle; line-height: 16px; font-size: 11px; }' +
	'.customMenuElementAdd:hover { background: #CCCCCC; color: #D8D8D8; }' +
	'.customMenuPrompt { -moz-border-radius: 5px 5px 5px 5px; background: url(' + loadingBackImg + ') repeat scroll 0 0 transparent; border: 1px solid #bbbbbb; display: none; height: 200px; position: absolute; margin-left: 10%; margin-right: auto; width: 400px; z-index: 999999; top: 250px; }' +

	'.eCM_info_holder { background: url(' + infoImg + ') no-repeat scroll 0px 0px transparent; height: 12px; width: 12px; display: inline; position: absolute; float: left; margin: 2px 0 0 -71px; cursor: pointer; }' +
	'.eCM_info_holder:hover { background: url(' + infoImg_hover + ') no-repeat scroll 0px 0px transparent; }' +
	'.eCM_info_holder .eCM_info { -moz-border-radius: 5px 5px 5px 5px; background: url(' + loadingBackImg + ') repeat scroll 0 0 transparent; border: 1px solid #cccccc; width: 300px; display: none; position: absolute; margin: -2px 0 0 75px; cursor: default; text-align: left; font-size: 11px; }' +
	'.eCM_info_holder:hover .eCM_info { display: inline; z-index: 9999; }' +
	'.eCM_info_holder:hover .eCM_info table tr td { padding: 5px 10px 5px 10px; }' +

	'.eCM_options { margin-top: 10px; float: left; }' +
	'.eCM_options .eCM_opt_content { -moz-border-radius: 5px 5px 5px 5px; background-color: #eeeeee; padding: 10px; width: 73px; }' +
	'.eCM_options .eCM_opt_content .eCM_opt_main { background-color: #ffffff; }' +
	'.eCM_options .eCM_opt_content .eCM_opt_main .eCM_a_slider { border: none; padding: none; }' +
	'.eCM_options .eCM_opt_content .eCM_opt_main .eCM_a_slider .eCM_slider_down { display: block; background: url(' + eCM_MainImgSlider + ') no-repeat scroll 0px 0px transparent; width: 73px; height: 12px; }' +
	'.eCM_options .eCM_opt_content .eCM_opt_main .eCM_a_slider:hover .eCM_slider_down { background-position: -73px 0px; }' +
	'.eCM_options .eCM_opt_content .eCM_opt_main .eCM_a_slider:active .eCM_slider_down { background-position: -146px 0px; }' +
	'.eCM_options .eCM_opt_content .eCM_opt_main .eCM_a_slider .eCM_slider_up { display: none; background: url(' + eCM_MainImgSlider + ') no-repeat scroll 0px -12px transparent; width: 73px; height: 12px; border-top: 1px solid #263a61; }' +
	'.eCM_options .eCM_opt_content .eCM_opt_main .eCM_a_slider:hover .eCM_slider_up { background-position: -73px -12px; }' +
	'.eCM_options .eCM_opt_content .eCM_opt_main .eCM_a_slider:active .eCM_slider_up { background-position: -146px -12px; }' +
	'.eCM_options .eCM_opt_content .eCM_opt_main .eCM_options_inner { font-size: 12px; height: 0px; overflow: hidden; padding-top: 0px; padding-bottom: 0px; padding-left: 3px; padding-right: 3px; }' +
	'.eCM_options .eCM_opt_content .eCM_opt_main .eCM_options_inner table tr td { cursor: default; font-size: 10px; height: 20px; }' +
	'.eCM_options .eCM_opt_content .eCM_opt_main .eCM_options_inner table tr td input { vertical-align: text-bottom; }' +
	'.eCM_options .eCM_version { cursor: default; -moz-border-radius: 0px 0px 3px 3px; background-color: #eeeeee; font-size: 9px; font-weight: bold; color: #b7b7b7; text-align: center; padding: 0px 0px 2px 0px; width: 43px; margin-left: 25px; }' +

	'.prof_table { background: url("http://www.erepublik.com/images/parts/back_el_secondh.png") repeat-x scroll left bottom transparent; cursor: default; border-top: 1px solid #eeeeee; border-bottom: 1px solid #dddddd; padding: 10px 0px 10px 0px; }' +
	'.day_prof_table { background: url("http://www.erepublik.com/images/parts/bg_el_days.png") repeat-x scroll left bottom transparent; cursor: default; border-bottom: 1px solid #cccccc; padding: 7px 0px 7px 0px; }' +

	'.eCM_menu_right { float: right; }' +
	'.eCM_menu:hover { background-color: #CCCCCC; }' +
	'.eCM_menu_window { -moz-border-radius: 5px 5px 5px 5px; width: 705px; display: none; position: absolute; background: url(' + loadingBackImg + ') repeat scroll 0 0 transparent; border: 1px solid #cccccc; color: #7F7F7F; z-index: 9999; margin-left: -7px; top: 580px; }' +
	'.close_button { background: url("http://www.erepublik.com/images/parts/remove_upper_inventory_hover.png") no-repeat scroll 0 0 transparent; float: right; height: 10px; margin: 5px; text-indent: -9999px; width: 10px; }' +
	'.eCM_window_header { -moz-border-radius: 5px 0px 0px 0px; background: url(' + eCM_LinksHeader + ') no-repeat scroll 0 0 transparent; float: left; height: 35px; width: 100%; }' +
	'.eCM_window_content { float: left; padding: 5px; }' +
	'.eCM_window_content_table { display: table; }' +
	'.eCM_window_content_tr { display: table-row-group; }' +
	'.eCM_window_content_td { display: table-cell; padding: 3px; }' +

	'.p_container { cursor: default; }' +
	'.t .ttip { display: none; padding: 10px 10px 10px 10px !important; margin-left: 7px; width: 110px; }' +
	'.t:hover .ttip { -moz-border-radius: 5px 5px 5px 5px; display: inline; position: absolute; background-color: #ffffff; border: 1px solid #cccccc; color: #666666; }' +
	'.t .ttip .t_health { background: url("http://www.erepublik.com/images/modules/company/employee_duo.png") no-repeat scroll left center transparent; display: block; height: 17px; margin-top: 5px; margin-bottom: 5px; padding-top: 25px; text-align: center; width: 42px; }' +
	'.t .ttip .t_happy { background: url("http://www.erepublik.com/images/modules/company/employee_duo.png") no-repeat scroll right center transparent; display: block; height: 17px; margin-top: 5px; margin-bottom: 5px; padding-top: 25px; text-align: center; width: 42px; }' +

	'.loadingHolder { -moz-border-radius: 5px 5px 5px 5px; display: none; background: url(' + loadingBackImg + ') repeat scroll 0 0 transparent; cursor: default; border: 1px solid #cccccc; padding: 5px; height: 230px; width: 500px; position: absolute; margin-top: -260px; margin-left: -610px; z-index: 9999; }' +

	'.citizen_attributes li .healthTooltip { -moz-border-radius: 3px; background-color: #FFFFCC; display: none; position: absolute; margin-left: 1px; margin-top: -25px; border: 1px solid #FFCC33; font-size: 10px; text-align: center; padding: 2px 2px 2px 2px; z-index: 9999;}' +
	'.citizen_attributes li:hover .healthTooltip { display: inline; }' +
	'.citizen_attributes li .happTooltip { -moz-border-radius: 3px; background-color: #FFFFCC; display: none; position: absolute; margin-left: 1px; margin-top: -25px; border: 1px solid #FFCC33; font-size: 10px; text-align: center; padding: 2px 2px 2px 2px; z-index: 9999;}' +
	'.citizen_attributes li:hover .happTooltip { display: inline; }' +

	'.mOffers_loader { -moz-border-radius: 5px 5px 5px 5px; display: inline; background: url(' + loadingBackImg + ') repeat scroll 0 0 transparent; cursor: default; border: 1px solid #cccccc; padding: 5px; height: 17px; width: 200px; position: absolute; margin-top: 5px; margin-left: 85px; z-index: 9999; text-align: center; vertical-align: middle; font-size: 10px; line-height: 17px; }' +

	'.tooltip_marketplace { background: url("http://www.erepublik.com/images/parts/tooltip_marketplace_down.png") no-repeat scroll center bottom transparent; position: absolute;  z-index: 99999; display: none; }' +

	'.current_market_offers { background: url("http://www.erepublik.com/images/modules/company/marketplace_header.png") no-repeat scroll center top transparent; margin: -16px auto 25px; position: relative; width: 632px; z-index: 2; }' +
	'.current_market_offers .c_pylons { background-repeat: no-repeat; margin: 0pt auto; position: relative; top: -14px; width: 559px; background-image: url("http://www.erepublik.com/images/modules/company/pylons.png"); display: block; height: 21px; }' +
	'.current_market_offers h4 { color: #4B4B4B; cursor: default; margin-bottom: 6px; clear: both; float: left; margin-left: 17px; display: table; margin-top: -3px; text-shadow: 0pt 1px 0pt #FFFFFF; }' +
	'.current_market_offers .c_offers { background: url("http://www.erepublik.com/images/modules/company/market_content_bg.png") repeat-y scroll center top transparent; padding-left: 12px; padding-right: 12px; width: 608px; float: left; padding-bottom: 10px; position: static; display: inline; clear: both; }' +
	'.current_market_offers .c_offers c_ontop { position: relative; z-index: 5; }' +
	'.current_market_offers .c_offers table th { border-bottom: 1px solid #CCCCCC; color: #666666; font-size: 12px; font-weight: bold; padding-bottom: 5px; padding-top: 5px; text-shadow: 0pt 1px 0pt #FFFFFF; padding-left: 15px; }' +
	'.current_market_offers .c_offers table th.c_market { text-align: center; padding-left: 0px; }' +
	'.current_market_offers .c_offers table tr td.c_hidden { height: auto; border: medium none;}' +
	'.current_market_offers .c_offers table td { background: url("http://www.erepublik.com/images/modules/company/white_dot.png") repeat-x scroll 0 0 transparent; border-bottom: 1px solid #CCCCCC; color: #595959; font-weight: bold; height: 40px; text-shadow: 0pt 1px 0pt #FFFFFF; vertical-align: middle; }' +
	'.current_market_offers .c_offers table tr td.c_hidden table tr td { background: url("http://www.erepublik.com/images/modules/company/white_dot.png") repeat-x scroll 0 0 transparent; border-bottom: 1px solid #E5E5E5; color: #595959; font-weight: bold; height: 40px; text-shadow: 0pt 1px 0pt #FFFFFF; vertical-align: middle; }' +
	'.current_market_offers .c_offers table td strong { color: #999999; padding-left: 4px; }' +
	'.current_market_offers .c_offers table td gold { color: #999999; padding-left: 4px; font-weight: normal; font-size: 10px; }' +
	'.current_market_offers .c_offers table td.c_market img { background-color: #FFFFFF; border: 1px solid #E3E3E3; margin-top: 3px; padding: 1px; }' +

	'.slotTable { -moz-border-radius: 3px 3px 3px 3px; background: none repeat scroll 0 0 #EBF6FA; padding: 3px; float: left; margin-right: 13px; margin-top: -7px; cursor: default; }' +
	'.slotTable .slotCell { background: none repeat scroll left top white; border: 1px solid #ADD2E5 !important; width: 10px; padding: 0px !important; }' +

	'.moveTable { -moz-border-radius: 5px 5px 5px 5px; background: none repeat scroll 0 0 #EBF6FA; padding: 5px; margin-bottom: 20px; cursor: default; width: 501px; }' +
	'.moveTable .moveCell { background: none repeat scroll left top white; border: 1px solid #ADD2E5 !important; width: 49px; padding: 0px !important; text-align: center; cursor: pointer; }' +
	'.moveTable .moveCell:hover { background: url("http://www.erepublik.com/images/parts/inventory_bg.png") repeat scroll left top transparent; }' +
	
	'.news_menu_right { float: right; }' +
	'.news_menu:hover { background-color: #CCCCCC; }' +
	'.news_menu_window { -moz-border-radius: 5px 5px 5px 5px; width: 330px; display: none; position: absolute; background: url(' + loadingBackImg + ') repeat scroll 0 0 transparent; border: 1px solid #cccccc; color: #7F7F7F; z-index: 99999; margin-left: 75px; margin-top: -25px; cursor: default; }' +
	'.news_window_header { -moz-border-radius: 5px 0px 0px 0px; background: url(' + eCM_LinksHeader + ') no-repeat scroll 0 0 transparent; float: left; height: 35px; width: 100%; }' +
	'.news_window_content { float: left; padding: 5px; }' +
	'.news_window_content .news_window_content_table { display: table; }' +
	'.news_window_content .news_window_content_table .news_window_content_tr { display: table-row-group; }' +
	'.news_window_content .news_window_content_table .news_window_content_tr .news_window_content_td { display: table-cell; padding: 3px; }' +
	
	'.grippie { background: url(' + resizeGrip + ') no-repeat scroll center 2px #EEEEEE; border-color: #DDDDDD; border-style: solid; border-width: 0pt 1px 1px; cursor: s-resize; height: 9px; overflow: hidden; margin-bottom: 10px; }' +
	'.resizable-textarea textarea { display: block; margin-bottom: 0px; }' + 
	
	'.moreCurrencyHolder { -moz-border-radius: 5px 5px 5px 5px; background: url(' + loadingBackImg + ') repeat scroll 0 0 transparent; border: 1px solid #bbbbbb; display: none; margin-left: 10px; margin-top: -5px; padding: 10px; position: absolute; z-index: 9999; width: 330px; }' +
	
	'.donateField { -moz-border-radius: 3px 3px 3px 3px; border: 1px solid #ADD2E5; color: #666666; font-family: Arial; text-align: right; float: none; font-size: 12px; padding: 2px 33px 2px 2px; width: 50px; }' +
	'.donateField:focus { background: none repeat scroll 0 0 #FFFFCC; }' +
	'.donateCur { -moz-border-radius-bottomright: 2px; -moz-border-radius-topright: 2px; background: none repeat scroll 0 0 #EEEEEE; color: gray; cursor: default; font-family: Arial; font-weight: bold; margin-top: 2px; padding: 2px 3px 1px; position: relative; text-shadow: 0 1px 0 #FFFFFF; float: none; font-size: 12px; margin-left: -32px;}' +
	
	'#battleSelectorHolder select { -moz-border-radius: 3px 3px 3px 3px; border: 1px solid #EEEEEE; color: #4D4D4D; font-size: 11px; margin-bottom: 5px; padding: 3px; width: 110px; }' +
	
	'.citizenName { color: #3C8FA7; overflow: hidden; text-align: center; text-decoration: none; font-size: 11px; }' +
	
	'.slideHolder { -moz-border-radius: 5px 5px 5px 5px; background: none repeat scroll 0 0 #E9F5FA; border: 1px solid #C4E6F2; clear: both; display: inline; float: left; margin-top: 10px; margin-bottom: 10px; position: relative; width: 691px; z-index:1; }' +
	'.slideHolder h4 { color: #72B5CC; display: inline; float: left; font-size: 14px; font-weight: bold; padding-top: 8px; padding-left: 8px; text-shadow: 0 1px 0 white; }' +
	'.slideHolder .slideBar { clear: both; float: left; height: 116px; margin: 8px auto 8px 9px; padding-left: 1px; padding-right: 2px; position: relative; width: 671px; }' +
	'.slideHolder .slideBar a.slideLeft { background: url(' + horSliderButtons + ') no-repeat scroll 0 0 transparent; float: left; height: 116px; width: 14px; display: inline; }' +
	'.slideHolder .slideBar a.slideLeft:hover { background-position: 0 -116px; }' +
	'.slideHolder .slideBar a.slideLeft:active { background-position: 0 -232px; }' +
	'.slideHolder .slideBar a.slideRight { background: url(' + horSliderButtons + ') no-repeat scroll -14px 0 transparent; float: left; height: 116px; width: 14px; display: inline; }' +
	'.slideHolder .slideBar a.slideRight:hover { background-position: -14px -116px; }' +
	'.slideHolder .slideBar a.slideRight:active { background-position: -14px -232px; }' +
	'.slideHolder .slideBar .slideFaderLeft { background:url("http://www.erepublik.com/images/parts/scrollerfadedl.png") repeat scroll 0 0 transparent; height: 116px; left: 15px; position: absolute; top: 0; width: 22px; z-index: 1; pointer-events: none; }' +
	'.slideHolder .slideBar .slideFaderRight { background:url("http://www.erepublik.com/images/parts/scrollerfadedr.png") repeat scroll 0 0 transparent; height: 116px; right: 15px; position: absolute; top: 0; width: 22px; z-index: 1; pointer-events: none; }' +
	'.slideHolder .slideBar .slideContent { background: url(' + loadingBackImg + ') repeat scroll 0 0 transparent; float: left; height: 116px; overflow: hidden; position: relative; width: 643px; }' +
	'.slideHolder .slideBar .slideContent .slideItemHolder { clear: both; position: absolute; width: 20000em; left: 0px; }' +
	'.slideHolder .slideBar .slideContent .slideItemHolder li { float: left; height: 116px; width: 108px; margin: 0px 1px; }' +
	'.slideHolder .slideBar .slideContent .slideItemHolder .noItem { float: left; height: 116px; width: 643px; margin: 0px 0px; vertical-align: middle; text-align: center; line-height: 116px; font-size: 16px; font-weight: bold; color: #999999; }' +
	'.slideHolder .slideButton { clear: both; float: left; height: 23px; margin: 0px auto 8px 9px; padding-left: 1px; padding-right: 2px; position: relative; width: 671px; }' +
	'.removeItem { background: url("http://www.erepublik.com/images/parts/remove_upper_inventory.png") no-repeat scroll 0 0 transparent; float: right; height: 10px; margin-right: 2px; margin-top: 2px; text-indent: -9999px; width: 10px; }' +
	'.removeItem:hover { background: url("http://www.erepublik.com/images/parts/remove_upper_inventory_hover.png") no-repeat scroll 0 0 transparent; }' +
	'.dataSectionDiv { height: 13px; overflow: hidden; width: 102px; white-space: nowrap; font-size: 10px; font-family: verdana; letter-spacing: -0.7px; color: #666666; }' +
	
	'.miniInventoryHolder { -moz-border-radius: 5px 5px 5px 5px; background: none repeat scroll 0 0 white; border-top: 1px solid #E5E5E5; display: block; float: left; margin: 9px 0 0; padding: 4px 0; width: 69px; }' +
	'.miniInventoryHolder .itemCountHolder { vertical-align: middle; }' +
	'.miniInventoryHolder .itemCountHolder img { float: left; width: 30px; height: 30px; margin-left: 3px; }' +
	'.miniInventoryHolder .itemCountHolder .itemCount { text-align: center; color: grey; line-height: 30px; }' +
	
	'.battleHealth { color: #E3E3E3; font-size: 11px; font-weight: bold; position: absolute; text-shadow: 0 1px 1px rgba(0, 0, 0, 0.6); top: 0; width: 100%; opacity: 1; }'
);
// ---------------------------------------------------------------------------------------------------------------------

// -- Constants --------------------------------------------------------------------------------------------------------
var VERSION = '2.6.3';
var RELEASE_DAY = '3. October 2010.';
var LOCALE = 'en/';

var currURL = document.location.href;
var arrURL = currURL.split('/');
var BASE_URL = arrURL[0] + '/' + arrURL[1] + '/' + arrURL[2] + '/';
var API_URL = 'http://api.erepublik.com/v2/feeds/';
var LANG = 'en';

var userId = $('#miniprofile .avatarholder .backwhite a:eq(0)')[0].href.split('/')[6] != undefined ? $('#miniprofile .avatarholder .backwhite a:eq(0)')[0].href.split('/')[6] : $('#miniprofile .avatarholder .backwhite a:eq(0)')[0].href.split('/')[4];
		
document.userid = userId;

var cId;
var product_price = 0;
var raw_price = 0;

var count = 0;
var count2 = 0;
var count3 = 0;

var region_industry_productivity = {"abruzzo_":"100","aegean coast of turkey_grain":"2","aegean islands_":"100","alabama_stone":"2","aland_":"","alaska_oil":"1","alberta_grain":"1","alberta_stone":"1","alentejo_":"100","algarve_":"100","alsace_grain":"2","amazonica_stone":"1","andalucia_grain":"2","andalucia_stone":"2","andhra pradesh_iron":"2","andhra pradesh_stone":"2","andina_iron":"2","andina_stone":"2","anhui_grain":"2","anhui_oil":"2","aosta valley_":"100","apulia_grain":"2","aquitaine_stone":"1","aragon_grain":"2","argentine northwest_grain":"1","arizona_iron":"2","arkansas_grain":"2","arkansas_titanium":"2","arkansas_stone":"2","asturias_grain":"2","asturias_iron":"1","attica_grain":"2","attica_iron":"2","auvergne_grain":"2","azores_":"100","baden-wurttemberg_grain":"2","baja_grain":"2","balearic islands_grain":"2","balochistan_grain":"2","balochistan_stone":"2","banat_grain":"2","basilicata_grain":"2","basque country_grain":"2","bassarabia_grain":"2","bavaria_grain":"1","bavaria_iron":"2","bavaria_stone":"2","beersheba south district_grain":"2","beijing_grain":"1","beijing_oil":"1","beijing_iron":"2","belgrade_":"100","beni and cochabamba_stone":"2","beni and cochabamba_grain":"1","bihar_grain":"2","black sea coast of turkey_grain":"2","black sea coast of turkey_stone":"2","bohus_grain":"2","bohus_stone":"2","bolivian altiplano_stone":"1","brandenburg and berlin_grain":"1","bratislava_grain":"2","brcko district_":"100","british columbia_stone":"1","brittany_grain":"2","brussels_grain":"2","bucovina_grain":"2","bucovina_iron":"2","bukovina_stone":"2","burgas_grain":"2","burgenland_stone":"2","burgundy_grain":"2","calabria_grain":"2","california_grain":"1","california_oil":"1","campania_grain":"2","canary islands_grain":"2","cantabria_grain":"2","caribe e insular_oil":"1","caribe e insular_grain":"2","carinthia_grain":"2","castilla la mancha_":"100","castilla y leon_grain":"2","catalonia_grain":"1","catalonia_iron":"2","center west of brazil_grain":"2","center west of brazil_titanium":"2","center west of brazil_stone":"1","central anatolia_grain":"2","central black earth_grain":"1","central croatia_grain":"2","central east chaco_stone":"1","central east chaco_grain":"2","central greece_grain":"2","central greece_iron":"1","central greece_stone":"2","central hungary_":"100","central slovakia_stone":"2","central thailand_grain":"2","central thailand_stone":"2","central transdanubia_grain":"2","central venezuela_stone":"2","central western venezuela_iron":"2","centro_grain":"2","centro_stone":"2","chagang_":"100","champagne ardenne_":"100","charrua_grain":"1","chhattisgarh_stone":"2","chimor_grain":"2","chisinau_grain":"2","chongqing_grain":"2","chubu_grain":"2","chugoku_grain":"2","chungcheongbuk-do_grain":"2","chungcheongnam-do_grain":"2","chuquisaca and tarija_oil":"2","chuquisaca and tarija_stone":"2","chuquisaca and tarija_grain":"2","colorado_grain":"2","connecticut_stone":"2","cork and kerry_grain":"2","corsica_":"100","crete_grain":"2","crisana_grain":"2","cundiboyacense_iron":"2","cundiboyacense_stone":"2","cuyo_iron":"2","dainava_stone":"2","delaware_grain":"2","deutschschweiz_grain":"2","deutschschweiz_stone":"2","district of columbia_":"100","dnipro_grain":"2","dobrogea_grain":"2","donbas_":"100","dublin_grain":"2","east midlands_grain":"2","east of england_grain":"2","east srpska republic_":"100","eastern anatolia_grain":"2","eastern cape_":"100","eastern finland_grain":"2","eastern finland_stone":"2","eastern netherlands_grain":"2","eastern serbia_iron":"2","eastern siberia_oil":"1","eastern siberia_titanium":"1","eastern siberia_iron":"2","eastern siberia_stone":"1","eastern slovakia_grain":"2","eastern thailand_":"100","emilia-romagna_grain":"2","epirus_":"100","esfahan_":"100","extremadura_":"100","far eastern russia_oil":"2","far eastern russia_titanium":"1","far eastern russia_stone":"1","fars_oil":"1","federation of bosnia and herze_grain":"1","flanders_grain":"2","florida_grain":"2","franche-comte_grain":"2","free state_":"100","friuli-venezia giulia_grain":"2","fujian_grain":"2","galicia_grain":"2","galicia and lodomeria_grain":"2","gangwon-do_grain":"2","gansu_grain":"2","gansu_stone":"2","gauteng_grain":"2","gauteng_titanium":"1","georgia_grain":"2","gotaland_grain":"2","gotland_":"100","graubunden_":"100","great andes_iron":"1","great andes_stone":"1","great poland_grain":"2","guangdong_grain":"2","guangxi_grain":"2","guangxi_stone":"2","guayana_grain":"2","guizhou_grain":"2","gujarat_grain":"2","gulf of mexico_stone":"2","gyeonggi-do_grain":"1","gyeongsangbuk-do_grain":"2","gyeongsangnam-do_grain":"2","haifa district_grain":"2","hainan_grain":"2","hamgyong_iron":"2","hawaii_":"100","heilongjiang_grain":"2","heilongjiang_iron":"1","henan_grain":"2","henan_iron":"2","hesse_":"100","hokkaido_grain":"2","hormozgan_":"100","hovedstaden_grain":"2","hubei_grain":"2","hubei_iron":"2","hunan_grain":"2","hwangae_":"100","idaho_grain":"2","illinois_oil":"1","indiana_grain":"2","indiana_stone":"2","inner carniola_grain":"2","inner mongolia_grain":"2","inner mongolia_stone":"2","ionian islands_":"100","iowa_stone":"2","istria and kvarner_":"100","jammu and kashmir_grain":"2","jammu and kashmir_stone":"2","jamtland harjedalen_stone":"2","java_grain":"2","java_stone":"2","jeju_grain":"2","jeollabuk-do_grain":"2","jeollanam-do_grain":"2","jerusalem district_grain":"2","jharkhand_stone":"1","jiangsu_grain":"2","jiangxi_grain":"2","jilin_grain":"2","kalimantan_titanium":"2","kalimantan_stone":"2","kaliningrad_grain":"1","kangwon_":"100","kansas_grain":"1","kanto_grain":"1","kanto_stone":"2","karnataka_iron":"1","karnataka_stone":"2","kentucky_grain":"2","kentucky_stone":"2","kerala_stone":"2","kerman province_iron":"2","kesk-eesti_":"100","kinki_grain":"1","kirde-eesti_":"100","kurzeme_stone":"2","kwazulu natal_grain":"2","kyushu_grain":"1","la rioja_":"100","laane-eesti_":"100","languedoc roussillon_grain":"2","lapland_stone":"2","latgale_":"100","lazio_grain":"1","lazio_stone":"2","leningrad oblast_grain":"2","lesser sunda islands_grain":"2","liaoning_grain":"2","liaoning_iron":"1","liaoning_stone":"2","liguria_grain":"2","lika and gorski kotar_stone":"2","lima_":"100","limousin_grain":"1","limpopo_titanium":"1","lisboa_grain":"1","lithuania minor_":"100","lithuanian highland_":"100","little poland_stone":"2","llanos_grain":"2","loire valley_grain":"2","lombardy_grain":"1","lombardy_stone":"2","london_grain":"1","lorraine_iron":"2","louisiana_oil":"1","louisiana_stone":"2","louna-eesti_stone":"2","low andes_iron":"2","low andes_stone":"2","lower austria_grain":"1","lower carniola_grain":"2","lower normandy_iron":"2","lower saxony and bremen_grain":"2","luzon_grain":"2","macedonia_grain":"2","macedonia_iron":"2","madeira_":"100","madhya pradesh_grain":"1","madhya pradesh_titanium":"2","madrid_grain":"1","maharashtra_grain":"2","maine_stone":"2","maluku islands_stone":"2","manitoba_grain":"1","manitoba_stone":"1","maramures_stone":"2","marche_grain":"2","marmara_grain":"2","maryland_grain":"2","maryland_stone":"2","massachusetts_stone":"2","mazandaran and golistan_grain":"2","mazovia_grain":"2","mazuria_grain":"2","mecklenburg-western pomerania_":"100","mediterranean coast of turkey_grain":"1","mesopotamia_grain":"2","michigan_grain":"2","michigan_stone":"2","mid andes_iron":"2","mid andes_stone":"2","midi-pyrenees_grain":"2","midtjylland_grain":"2","mindanao_iron":"2","minnesota_grain":"2","minnesota_stone":"2","mississippi_grain":"2","mississippi_stone":"2","missouri_grain":"2","missouri_stone":"2","moldova_grain":"2","molise_grain":"2","montana_grain":"1","moravia_":"100","moscow and central russia_grain":"1","mpumalanga_":"100","muntenia_grain":"1","murcia_grain":"2","navarra_":"100","nazareth north district_grain":"2","nebraska_grain":"2","nevada_iron":"2","new brunswick_stone":"1","new hampshire_stone":"2","new jersey_iron":"2","new mexico_grain":"2","new south wales_grain":"1","new south wales_iron":"2","new south wales_stone":"2","new york_stone":"2","newfoundland and labrador_oil":"1","newfoundland and labrador_stone":"2","ningxia_grain":"2","nordjylland_grain":"2","nordjylland_oil":"2","nord-norge_stone":"2","norrland and sameland_iron":"2","norrland and sameland_stone":"2","norte_grain":"2","norte_iron":"2","norte_stone":"2","norte chico_iron":"2","norte grande_":"100","north calais_grain":"2","north carolina_grain":"2","north carolina_stone":"2","north caucasus_oil":"1","north caucasus_stone":"2","north dakota_grain":"1","north dalmatia_":"100","north east of england_":"100","north eastern india_":"100","north eastern venezuela_grain":"2","north of brazil_grain":"2","north of brazil_titanium":"2","north of brazil_iron":"1","north of brazil_stone":"1","north rhine-westphalia_grain":"2","north rhine-westphalia_stone":"2","north west of england_grain":"2","north west of england_stone":"2","north west province_":"100","northeast of brazil_grain":"2","northeast of brazil_oil":"1","northeast of brazil_titanium":"2","northeast of brazil_iron":"1","northeast of brazil_stone":"2","northeast of ireland_iron":"2","northeast of mexico_grain":"2","north-eastern thailand_grain":"2","northern basarabia_grain":"2","northern bohemia_grain":"2","northern bohemia_stone":"2","northern cape_titanium":"1","northern cape_iron":"2","northern great plain_grain":"2","northern hungary_stone":"2","northern india_grain":"1","northern ireland_oil":"2","northern low amazon_oil":"2","northern low amazon_stone":"2","northern low amazon_grain":"1","northern netherlands_grain":"2","northern russia_":"100","northern territory_titanium":"1","northern territory_iron":"2","northern thailand_grain":"2","northern thailand_iron":"2","northwest croatia_":"100","north-west frontier province_grain":"2","northwest of ireland_grain":"2","northwest of mexico_grain":"2","northwest territories_titanium":"1","northwestern iran_grain":"1","nova scotia_stone":"1","nunavut_titanium":"1","oaxaca_stone":"2","ohio_stone":"2","oklahoma_grain":"2","oklahoma_oil":"1","oltenia_grain":"2","ontario_grain":"2","ontario_stone":"1","oregon_grain":"2","orinoquia_oil":"2","orinoquia_grain":"1","orissa_iron":"2","orissa_stone":"2","ostlandet_grain":"2","oulu_grain":"2","oulu_stone":"2","pacific coast of mexico_stone":"2","pacifica_":"100","palawan_oil":"1","pampas_grain":"1","pampas_stone":"2","pando_stone":"2","papua_stone":"2","parana and santa catarina_grain":"100","parana and santa catarina_iron":"2","paranena_grain":"1","paris isle of france_grain":"2","patagonia_grain":"2","patagonia_oil":"2","patagonia_iron":"2","pays de la loire_grain":"1","peloponnese_grain":"2","peninsular malaysia_oil":"1","peninsular malaysia_grain":"2","pennsylvania_grain":"2","pennsylvania_stone":"1","picardy_grain":"2","piedmont_grain":"2","plovdiv_grain":"2","podolia_grain":"2","podolia_iron":"1","pohja-eesti_grain":"1","poitou charentes_grain":"2","polisia_grain":"2","pomerania_grain":"2","prekmurje_grain":"2","prince edward island_grain":"2","provence alpes azur_grain":"2","punjab_grain":"2","pyongan_grain":"2","qinghai_grain":"2","qinghai_stone":"2","quebec_grain":"2","quebec_iron":"2","quebec_stone":"1","queensland_grain":"2","rajasthan_grain":"2","raska_":"100","razavi khorasan_grain":"1","rhineland-palatinate_grain":"2","rhode island_":"100","rhone alps_stone":"1","rio grande do sul_grain":"2","romandie_grain":"2","ruse_grain":"2","ryanggang_":"100","saarland_grain":"2","sabah_stone":"2","sabah_oil":"2","salzburg_grain":"2","samogitia_":"100","santa cruz_stone":"2","santa cruz_grain":"2","sarawak_stone":"1","sarawak_oil":"2","sardinia_grain":"2","saskatchewan_grain":"1","saskatchewan_stone":"2","saxony_grain":"2","saxony-anhalt_grain":"2","scania_grain":"2","schleswig-holstein and hamburg_grain":"1","scotland_grain":"2","semnan_":"100","shaanxi_grain":"2","shaanxi_iron":"2","shaanxi_stone":"2","shandong_grain":"2","shanghai_grain":"2","shannon_grain":"2","shanxi_grain":"2","shikoku_grain":"2","sichuan_grain":"2","sicily_grain":"2","silesia_grain":"2","silesia_iron":"2","sindh_grain":"2","singapore city_stone":"2","singapore city_oil":"2","singapore city_grain":"2","sistan and baluchistan_oil":"1","siveria_":"100","sjaelland_":"100","slavonia_grain":"1","sloboda_grain":"2","slovenian littoral_grain":"2","smaland_":"100","sofia_grain":"2","sorlandet_grain":"2","south australia_grain":"1","south australia_iron":"2","south carolina_grain":"2","south carolina_stone":"2","south dakota_grain":"1","south dalmatia_grain":"2","south east chaco_grain":"2","south east of england_grain":"2","south khorasan_grain":"1","south west of england_grain":"2","southeast of brazil_grain":"1","southeast of ireland_grain":"2","southeast of mexico_oil":"1","southeast of mexico_stone":"2","southeastern anatolia_grain":"2","southern basarabia_grain":"2","southern bohemia_grain":"2","southern finland_grain":"2","southern great plain_grain":"1","southern low amazon_stone":"2","southern low amazon_grain":"2","southern netherlands_grain":"2","southern serbia_grain":"2","southern thailand_oil":"2","southern thailand_stone":"2","southern transdanubia_grain":"2","southwestern iran_grain":"2","southwestern iran_oil":"1","styria_grain":"2","styria and carinthia_grain":"2","subcarpathia_grain":"2","sudovia_grain":"1","sulawesi_grain":"2","sulawesi_stone":"2","sumadija_stone":"2","sumatra_oil":"1","svalbard & jan mayen_":"100","svealand_grain":"2","svealand_stone":"2","svizzera italiana_grain":"2","syddanmark_grain":"2","tamil nadu_":"100","tasmania_iron":"2","taurida_iron":"2","tel aviv center district_grain":"2","tennessee_grain":"2","tennessee_stone":"1","texas_grain":"2","texas_oil":"1","thessaly_":"100","thrace_grain":"2","thuringia_grain":"2","tibet_grain":"2","tibet_stone":"2","tohoku_grain":"2","transilvania_":"100","transnistria_grain":"2","trentino-south tyrol_grain":"2","trondelag_oil":"2","tuscany_grain":"2","tyrol_":"100","umbria_grain":"2","upper austria_grain":"2","upper carniola_grain":"2","upper normandy_grain":"2","urals_oil":"2","urals_iron":"1","utah_iron":"2","uttar pradesh_grain":"1","valencian community_grain":"2","valley of mexico_grain":"2","valley of mexico_oil":"1","varna_grain":"2","veneto_grain":"2","venezuelan andean_":"100","venezuelan capital_oil":"1","vermont_stone":"2","vestlandet_oil":"1","victoria_grain":"2","victoria_stone":"2","vidin_grain":"2","vidzeme_grain":"2","virginia_grain":"2","virginia_stone":"2","visayas_":"100","vojvodina_grain":"1","volga_grain":"1","volga vyatka_grain":"1","volga vyatka_iron":"2","volga vyatka_stone":"2","volhynia_grain":"1","vorarlberg_grain":"2","wales_grain":"2","wales_oil":"2","wallonia_grain":"2","washington_grain":"1","west bengal_oil":"2","west midlands_grain":"2","west midlands_oil":"2","west srpska republic_":"100","west virginia_stone":"2","western australia_grain":"1","western australia_oil":"2","western australia_titanium":"1","western australia_iron":"2","western australia_stone":"2","western cape_grain":"2","western cape_stone":"2","western finland_grain":"2","western netherlands_grain":"1","western serbia_":"100","western siberia_oil":"1","western siberia_iron":"1","western siberia_stone":"1","western slovakia_grain":"2","western transdanubia_grain":"2","wisconsin_stone":"2","wyoming_grain":"2","xinjiang_grain":"2","xinjiang_stone":"2","yazd_iron":"2","yorkshire & humberside_grain":"2","yukon_stone":"2","yunnan_grain":"2","zaporozhia_grain":"2","zemgale_grain":"1","zhejiang_grain":"2","zona austral_":"100","zona central_grain":"2","zona sur_stone":"2","zulian_grain":"2","zulian_oil":"1"};
var industry_id = {"food":"1","moving tickets":"2","house":"3","hospital":"4","defense system":"5","rifle":"6","tank":"7","artillery":"8","air unit":"9","grain":"10","oil":"11","titanium":"12","stone":"13","iron":"14"};
var id_industry = {"1":"food","2":"moving tickets","3":"house","4":"hospital","5":"defense system","6":"rifle","7":"tank","8":"artillery","9":"air unit","10":"grain","11":"oil","12":"titanium","13":"stone","14":"iron"};
var country_id = {"romania":"1","italy":"10","france":"11","germany":"12","hungary":"13","spain":"15","united-kingdom":"29","switzerland":"30","netherlands":"31","belgium":"32","austria":"33","czech-republic":"34","poland":"35","slovakia":"36","norway":"37","sweden":"38","finland":"39","ukraine":"40","bulgaria":"42","greece":"44","republic-of-moldova":"52","portugal":"53","ireland":"54","denmark":"55","slovenia":"61","croatia":"63","serbia":"65","bosnia-herzegovina":"69","estonia":"70","latvia":"71","lithuania":"72","china":"14","russia":"41","turkey":"43","japan":"45","south-korea":"47","india":"48","indonesia":"49","iran":"56","pakistan":"57","israel":"58","thailand":"59","malaysia":"66","philippines":"67","singapore":"68","north-korea":"73","south-africa":"51","canada":"23","usa":"24","mexico":"26","brazil":"9","argentina":"27","venezuela":"28","chile":"64","uruguay":"74","paraguay":"75","bolivia":"76","peru":"77","colombia":"78","australia":"50"};
var id_country = {"1":"Romania","10":"Italy","11":"France","12":"Germany","13":"Hungary","15":"Spain","29":"United-Kingdom","30":"Switzerland","31":"Netherlands","32":"Belgium","33":"Austria","34":"Czech-Republic","35":"Poland","36":"Slovakia","37":"Norway","38":"Sweden","39":"Finland","40":"Ukraine","42":"Bulgaria","44":"Greece","52":"Republic-of-Moldova","53":"Portugal","54":"Ireland","55":"Denmark","61":"Slovenia","63":"Croatia","65":"Serbia","69":"Bosnia-Herzegovina","70":"Estonia","71":"Latvia","72":"Lithuania","14":"China","41":"Russia","43":"Turkey","45":"Japan","47":"South-Korea","48":"India","49":"Indonesia","56":"Iran","57":"Pakistan","58":"Israel","59":"Thailand","66":"Malaysia","67":"Philippines","68":"Singapore","73":"North-Korea","51":"South-Africa","23":"Canada","24":"USA","26":"Mexico","9":"Brazil","27":"Argentina","28":"Venezuela","64":"Chile","74":"Uruguay","75":"Paraguay","76":"Bolivia","77":"Peru","78":"Colombia","50":"Australia"};
var country_currency = {"Argentina":"ARS","Australia":"AUD","Austria":"ATS","Belgium":"BEF","Bolivia":"BOB","Bosnia-Herzegovina":"BAM","Brazil":"BRL","Bulgaria":"BGN","Canada":"CAD","Chile":"CLP","China":"CNY","Colombia":"COP","Croatia":"HRK","Czech-Republic":"CZK","Denmark":"DKK","Estonia":"EEK","Finland":"FIM","France":"FRF","Germany":"DEM","Greece":"GRD","Hungary":"HUF","India":"INR","Indonesia":"IDR","Iran":"IRR","Ireland":"IEP","Israel":"NIS","Italy":"ITL","Japan":"JPY","Latvia":"LVL","Lithuania":"LTL","Malaysia":"MYR","Mexico":"MXN","Netherlands":"NLG","North-Korea":"KPW","Norway":"NOK","Pakistan":"PKR","Paraguay":"PYG","Peru":"PEN","Philippines":"PHP","Poland":"PLN","Portugal":"PTE","Republic-of-Moldova":"MDL","Romania":"RON","Russia":"RUB","Serbia":"RSD","Singapore":"SGD","Slovakia":"SKK","Slovenia":"SIT","South-Africa":"ZAR","South-Korea":"KRW","Spain":"ESP","Sweden":"SEK","Switzerland":"CHF","Thailand":"THB","Turkey":"TRY","Ukraine":"UAH","United-Kingdom":"GBP","Uruguay":"UYU","USA":"USD","Venezuela":"VEB"};
var currency_country = {"ARS":"Argentina","AUD":"Australia","ATS":"Austria","BEF":"Belgium","BOB":"Bolivia","BAM":"Bosnia-Herzegovina","BRL":"Brazil","BGN":"Bulgaria","CAD":"Canada","CLP":"Chile","CNY":"China","COP":"Colombia","HRK":"Croatia","CZK":"Czech-Republic","DKK":"Denmark","EEK":"Estonia","FIM":"Finland","FRF":"France","DEM":"Germany","GRD":"Greece","HUF":"Hungary","INR":"India","IDR":"Indonesia","IRR":"Iran","IEP":"Ireland","NIS":"Israel","ITL":"Italy","JPY":"Japan","LVL":"Latvia","LTL":"Lithuania","MYR":"Malaysia","MXN":"Mexico","NLG":"Netherlands","KPW":"North-Korea","NOK":"Norway","PKR":"Pakistan","PYG":"Paraguay","PEN":"Peru","PHP":"Philippines","PLN":"Poland","PTE":"Portugal","MDL":"Republic-of-Moldova","RON":"Romania","RUB":"Russia","RSD":"Serbia","SGD":"Singapore","SKK":"Slovakia","SIT":"Slovenia","ZAR":"South-Africa","KRW":"South-Korea","ESP":"Spain","SEK":"Sweden","CHF":"Switzerland","THB":"Thailand","TRY":"Turkey","UAH":"Ukraine","GBP":"United-Kingdom","UYU":"Uruguay","USD":"USA","VEB":"Venezuela"};
var industry_raw = {"food":"grain","moving tickets":"oil","rifle":"iron","tank":"iron","artillery":"titanium","air unit":"titanium","house":"stone","hospital":"stone","defense system":"stone"};
var region_id = {"Abruzzo":"259","Aegean Coast of Turkey":"512","Aegean Islands":"420","Alabama":"40","Aland":"242","Alaska":"41","Alberta":"97","Alentejo":"160","Algarve":"161","Alsace":"185","Amazonica":"689","Andalucia":"167","Andhra Pradesh":"450","Andina":"690","Anhui":"361","Aosta Valley":"260","Apulia":"261","Aquitaine":"186","Aragon":"168","Argentine Northwest":"152","Arizona":"42","Arkansas":"43","Asturias":"169","Attica":"418","Auvergne":"187","Azores":"162","Baden-Wurttemberg":"243","Baja":"116","Balearic Islands":"184","Balochistan":"492","Banat":"11","Basilicata":"262","Basque Country":"170","Bassarabia":"140","Bavaria":"244","Beersheba South District":"471","Beijing":"395","Belgrade":"635","Beni and Cochabamba":"678","Bihar":"458","Black Sea Coast of Turkey":"513","Bohus":"323","Bolivian Altiplano":"680","Brcko District":"651","Brandenburg and Berlin":"246","Bratislava":"312","British Columbia":"103","Brittany":"188","Brussels":"228","Bucovina":"39","Bukovina":"137","Burgas":"349","Burgenland":"340","Burgundy":"189","Calabria":"263","California":"44","Campania":"264","Canary Islands":"183","Cantabria":"171","Caribe e Insular":"691","Carinthia":"341","Castilla La Mancha":"181","Castilla y Leon":"173","Catalonia":"174","Center West of Brazil":"146","Central Anatolia":"514","Central Black Earth":"533","Central Croatia":"623","Central East Chaco":"676","Central Greece":"417","Central Hungary":"111","Central Slovakia":"316","Central Thailand":"507","Central Transdanubia":"110","Central Venezuela":"125","Central Western Venezuela":"126","Centro":"159","Chagang":"668","Champagne Ardenne":"191","Charrua":"674","Chhattisgarh":"455","Chimor":"685","Chisinau":"92","Chongqing":"396","Chubu":"487","Chugoku":"489","Chungcheongbuk-do":"521","Chungcheongnam-do":"522","Chuquisaca and Tarija":"677","Colorado":"45","Connecticut":"46","Cork and Kerry":"209","Corsica":"192","Crete":"422","Crisana":"36","Cundiboyacense":"694","Cuyo":"155","Dainava":"666","Delaware":"47","Deutschschweiz":"336","District of Columbia":"90","Dnipro":"138","Dobrogea":"3","Donbas":"143","Dublin":"208","East Midlands":"222","East of England":"224","East Srpska Republic":"650","Eastern Anatolia":"515","Eastern Cape":"497","Eastern Finland":"239","Eastern Netherlands":"530","Eastern Serbia":"637","Eastern Siberia":"534","Eastern Slovakia":"319","Eastern Thailand":"509","Emilia-Romagna":"265","Epirus":"416","Esfahan":"478","Extremadura":"175","Far Eastern Russia":"535","Fars":"479","Federation of BiH":"652","Flanders":"229","Florida":"48","Franche-comte":"193","Free State":"498","Friuli-Venezia Giulia":"266","Fujian":"362","Galicia":"176","Galicia and Lodomeria":"133","Gangwon-do":"520","Gansu":"363","Gauteng":"499","Georgia":"49","Gotaland":"325","Gotland":"549","Graubunden":"339","Great Andes":"682","Great Poland":"426","Guangdong":"364","Guangxi":"390","Guayana":"127","Guizhou":"384","Gujarat":"448","Gulf of Mexico":"120","Gyeonggi-do":"519","Gyeongsangbuk-do":"525","Gyeongsangnam-do":"526","Haifa district":"469","Hainan":"385","Hamgyong":"672","Hawaii":"50","Heilongjiang":"368","Henan":"386","Hesse":"249","Hokkaido":"484","Hormozgan":"480","Hovedstaden":"231","Hubei":"370","Hunan":"371","Hwangae":"670","Idaho":"51","Illinois":"52","Indiana":"53","Inner Carniola":"581","Inner Mongolia":"391","Ionian Islands":"421","Iowa":"54","Istria and Kvarner":"626","Jammu and Kashmir":"561","Jamtland Harjedalen":"322","Java":"461","Jeju":"527","Jeollabuk-do":"523","Jeollanam-do":"524","Jerusalem district":"467","Jharkhand":"456","Jiangsu":"372","Jiangxi":"373","Jilin":"387","Kalimantan":"462","Kaliningrad":"543","Kangwon":"671","Kansas":"55","Kanto":"486","Karnataka":"451","Kentucky":"56","Kerala":"453","Kerman Province":"472","Kesk-Eesti":"656","Kinki":"488","Kirde-Eesti":"655","Kurzeme":"662","KwaZulu Natal":"500","Kyushu":"491","La Rioja":"179","Laane-Eesti":"657","Languedoc Roussillon":"194","Lapland":"241","Latgale":"660","Lazio":"267","Leningrad Oblast":"538","Lesser Sunda Islands":"463","Liaoning":"375","Liguria":"268","Lika and Gorski Kotar":"625","Lima":"688","Limousin":"195","Limpopo":"501","Lisboa":"157","Lithuania Minor":"663","Lithuanian Highland":"665","Little Poland":"425","Llanos":"129","Loire Valley":"190","Lombardy":"269","London":"216","Lorraine":"196","Louisiana":"57","Louna-Eesti":"658","Low Andes":"684","Lower Austria":"342","Lower Carniola":"611","Lower Normandy":"197","Lower Saxony and Bremen":"251","Luzon":"644","Macedonia":"414","Madeira":"163","Madhya Pradesh":"447","Madrid":"166","Maharashtra":"449","Maine":"58","Maluku islands":"465","Manitoba":"105","Maramures":"38","Marche":"270","Marmara":"516","Maryland":"59","Massachusetts":"60","Mazandaran and Golistan":"483","Mazovia":"424","Mazuria":"423","Mecklenburg-Western Pomerania":"250","Mediterranean Coast of Turkey":"517","Mesopotamia":"154","Michigan":"61","Mid Andes":"683","Midi-Pyrenees":"198","Midtjylland":"232","Mindanao":"646","Minnesota":"62","Mississippi":"63","Missouri":"64","Moldova":"37","Molise":"271","Montana":"65","Moravia":"440","Moscow and Central Russia":"532","Mpumalanga":"502","Muntenia":"5","Murcia":"177","Navarra":"178","Nazareth North District":"468","Nebraska":"66","Nevada":"67","New Brunswick":"98","New Hampshire":"68","New Jersey":"69","New Mexico":"70","New South Wales":"328","New York":"71","Newfoundland and Labrador":"102","Ningxia":"392","Nordjylland":"233","Nord-Norge":"291","Norrland and Sameland":"321","Norte":"158","Norte Chico":"630","Norte Grande":"629","North Calais":"207","North Carolina":"72","North Caucasus":"537","North Dakota":"73","North Dalmatia":"627","North East of England":"226","North Eastern India":"459","North Eastern Venezuela":"130","North of Brazil":"147","North Rhine-Westphalia":"252","North West of England":"227","North West Province":"503","Northeast of Brazil":"148","Northeast of Ireland":"215","Northeast of Mexico":"122","North-Eastern Thailand":"511","Northern Basarabia":"91","Northern Bohemia":"442","Northern Cape":"504","Northern Great Plain":"113","Northern Hungary":"112","Northern India":"443","Northern Ireland":"219","Northern Low Amazon":"686","Northern Netherlands":"531","Northern Russia":"536","Northern Territory":"334","Northern Thailand":"508","Northwest Croatia":"624","North-West Frontier Province":"493","Northwest of Ireland":"212","Northwest of Mexico":"117","Northwest Territories":"106","Northwestern Iran":"482","Nova Scotia":"99","Nunavut":"107","Oaxaca":"119","Ohio":"74","Oklahoma":"75","Oltenia":"9","Ontario":"95","Oregon":"76","Orinoquia":"692","Orissa":"454","Ostlandet":"295","Oulu":"240","Pacific Coast of Mexico":"118","Pacifica":"693","Palawan":"647","Pampas":"151","Pando":"681","Papua":"466","Parana and Santa Catarina":"150","Paranena":"675","Paris Isle of France":"199","Patagonia":"156","Pays de la Loire":"200","Peloponnese":"419","Peninsular Malaysia":"643","Pennsylvania":"77","Picardy":"201","Piedmont":"272","Plovdiv":"353","Podolia":"136","Pohja-Eesti":"654","Poitou Charentes":"202","Polisia":"135","Pomerania":"306","Prekmurje":"621","Prince Edward Island":"96","Provence Alpes Azur":"203","Punjab":"494","Pyongan":"669","Qinghai":"389","Quebec":"100","Queensland":"329","Rajasthan":"446","Raska":"639","Razavi Khorasan":"475","Rhineland-Palatinate":"253","Rhode Island":"78","Rhone Alps":"204","Rio Grande do Sul":"653","Romandie":"337","Ruse":"358","Ryanggang":"673","Saarland":"254","Sabah":"641","Salzburg":"344","Samogitia":"664","Santa Cruz":"679","Sarawak":"642","Sardinia":"273","Saskatchewan":"101","Saxony":"255","Saxony-Anhalt":"256","Scania":"324","Schleswig-Holstein and Hamburg":"257","Scotland":"217","Semnan":"477","Shaanxi":"377","Shandong":"378","Shanghai":"397","Shannon":"210","Shanxi":"379","Shikoku":"490","Sichuan":"380","Sicily":"274","Silesia":"307","Sindh":"495","Singapore City":"648","Sistan and Baluchistan":"473","Siveria":"139","Sjaelland":"235","Slavonia":"622","Sloboda":"142","Slovenian Littoral":"571","Smaland":"326","Sofia":"355","Sorlandet":"292","South Australia":"330","South Carolina":"79","South Dakota":"80","South Dalmatia":"628","South East Chaco":"153","South East of England":"220","South Khorasan":"474","South West of England":"221","Southeast of Brazil":"149","Southeast of Ireland":"213","Southeast of Mexico":"121","Southeastern Anatolia":"518","Southern Basarabia":"93","Southern Bohemia":"437","Southern Finland":"237","Southern Great Plain":"114","Southern Low Amazon":"687","Southern Netherlands":"529","Southern Serbia":"640","Southern Thailand":"510","Southern Transdanubia":"109","Southwestern Iran":"481","Styria":"345","Styria and Carinthia":"601","Subcarpathia":"132","Sudovia":"667","Sulawesi":"464","Sumadija":"636","Sumatra":"460","Svalbard & Jan Mayen":"562","Svealand":"320","Svizzera italiana":"338","Syddanmark":"236","Tamil Nadu":"452","Tasmania":"331","Taurida":"144","Tel Aviv Center District":"470","Tennessee":"81","Texas":"82","Thessaly":"415","Thrace":"413","Thuringia":"258","Tibet":"394","Tohoku":"485","Transilvania":"35","Transnistria":"94","Trentino-South Tyrol":"275","Trondelag":"293","Tuscany":"276","Tyrol":"346","Umbria":"277","Upper Austria":"343","Upper Carniola":"591","Upper Normandy":"205","Urals":"540","Utah":"83","Uttar Pradesh":"445","Valencian Community":"180","Valley of Mexico":"115","Varna":"356","Veneto":"278","Venezuelan Andean":"123","Venezuelan Capital":"124","Vermont":"84","Vestlandet":"294","Victoria":"332","Vidin":"352","Vidzeme":"659","Virginia":"85","Visayas":"645","Vojvodina":"634","Volga":"544","Volga Vyatka":"541","Volhynia":"134","Vorarlberg":"347","Wales":"218","Wallonia":"230","Washington":"86","West Bengal":"457","West Midlands":"223","West Srpska Republic":"649","West Virginia":"87","Western Australia":"333","Western Cape":"505","Western Finland":"238","Western Netherlands":"528","Western Serbia":"638","Western Siberia":"542","Western Slovakia":"315","Western Transdanubia":"108","Wisconsin":"88","Wyoming":"89","Xinjiang":"393","Yazd":"476","Yorkshire & Humberside":"225","Yukon":"104","Yunnan":"381","Zaporozhia":"141","Zemgale":"661","Zhejiang":"382","Zona Austral":"633","Zona Central":"631","Zona Sur":"632","Zulian":"131"};
var id_region = {"259":"Abruzzo","512":"Aegean Coast of Turkey","420":"Aegean Islands","40":"Alabama","242":"Aland","41":"Alaska","97":"Alberta","160":"Alentejo","161":"Algarve","185":"Alsace","689":"Amazonica","167":"Andalucia","450":"Andhra Pradesh","690":"Andina","361":"Anhui","260":"Aosta Valley","261":"Apulia","186":"Aquitaine","168":"Aragon","152":"Argentine Northwest","42":"Arizona","43":"Arkansas","169":"Asturias","418":"Attica","187":"Auvergne","162":"Azores","243":"Baden-Wurttemberg","116":"Baja","184":"Balearic Islands","492":"Balochistan","11":"Banat","262":"Basilicata","170":"Basque Country","140":"Bassarabia","244":"Bavaria","471":"Beersheba South District","395":"Beijing","635":"Belgrade","678":"Beni and Cochabamba","458":"Bihar","513":"Black Sea Coast of Turkey","323":"Bohus","680":"Bolivian Altiplano","651":"Brcko District","246":"Brandenburg and Berlin","312":"Bratislava","103":"British Columbia","188":"Brittany","228":"Brussels","39":"Bucovina","137":"Bukovina","349":"Burgas","340":"Burgenland","189":"Burgundy","263":"Calabria","44":"California","264":"Campania","183":"Canary Islands","171":"Cantabria","691":"Caribe e Insular","341":"Carinthia","181":"Castilla La Mancha","173":"Castilla y Leon","174":"Catalonia","146":"Center West of Brazil","514":"Central Anatolia","533":"Central Black Earth","623":"Central Croatia","676":"Central East Chaco","417":"Central Greece","111":"Central Hungary","316":"Central Slovakia","507":"Central Thailand","110":"Central Transdanubia","125":"Central Venezuela","126":"Central Western Venezuela","159":"Centro","668":"Chagang","191":"Champagne Ardenne","674":"Charrua","455":"Chhattisgarh","685":"Chimor","92":"Chisinau","396":"Chongqing","487":"Chubu","489":"Chugoku","521":"Chungcheongbuk-do","522":"Chungcheongnam-do","677":"Chuquisaca and Tarija","45":"Colorado","46":"Connecticut","209":"Cork and Kerry","192":"Corsica","422":"Crete","36":"Crisana","694":"Cundiboyacense","155":"Cuyo","666":"Dainava","47":"Delaware","336":"Deutschschweiz","90":"District of Columbia","138":"Dnipro","3":"Dobrogea","143":"Donbas","208":"Dublin","222":"East Midlands","224":"East of England","650":"East Srpska Republic","515":"Eastern Anatolia","497":"Eastern Cape","239":"Eastern Finland","530":"Eastern Netherlands","637":"Eastern Serbia","534":"Eastern Siberia","319":"Eastern Slovakia","509":"Eastern Thailand","265":"Emilia-Romagna","416":"Epirus","478":"Esfahan","175":"Extremadura","535":"Far Eastern Russia","479":"Fars","652":"Federation of BiH","229":"Flanders","48":"Florida","193":"Franche-comte","498":"Free State","266":"Friuli-Venezia Giulia","362":"Fujian","176":"Galicia","133":"Galicia and Lodomeria","520":"Gangwon-do","363":"Gansu","499":"Gauteng","49":"Georgia","325":"Gotaland","549":"Gotland","339":"Graubunden","682":"Great Andes","426":"Great Poland","364":"Guangdong","390":"Guangxi","127":"Guayana","384":"Guizhou","448":"Gujarat","120":"Gulf of Mexico","519":"Gyeonggi-do","525":"Gyeongsangbuk-do","526":"Gyeongsangnam-do","469":"Haifa district","385":"Hainan","672":"Hamgyong","50":"Hawaii","368":"Heilongjiang","386":"Henan","249":"Hesse","484":"Hokkaido","480":"Hormozgan","231":"Hovedstaden","370":"Hubei","371":"Hunan","670":"Hwangae","51":"Idaho","52":"Illinois","53":"Indiana","581":"Inner Carniola","391":"Inner Mongolia","421":"Ionian Islands","54":"Iowa","626":"Istria and Kvarner","561":"Jammu and Kashmir","322":"Jamtland Harjedalen","461":"Java","527":"Jeju","523":"Jeollabuk-do","524":"Jeollanam-do","467":"Jerusalem district","456":"Jharkhand","372":"Jiangsu","373":"Jiangxi","387":"Jilin","462":"Kalimantan","543":"Kaliningrad","671":"Kangwon","55":"Kansas","486":"Kanto","451":"Karnataka","56":"Kentucky","453":"Kerala","472":"Kerman Province","656":"Kesk-Eesti","488":"Kinki","655":"Kirde-Eesti","662":"Kurzeme","500":"KwaZulu Natal","491":"Kyushu","179":"La Rioja","657":"Laane-Eesti","194":"Languedoc Roussillon","241":"Lapland","660":"Latgale","267":"Lazio","538":"Leningrad Oblast","463":"Lesser Sunda Islands","375":"Liaoning","268":"Liguria","625":"Lika and Gorski Kotar","688":"Lima","195":"Limousin","501":"Limpopo","157":"Lisboa","663":"Lithuania Minor","665":"Lithuanian Highland","425":"Little Poland","129":"Llanos","190":"Loire Valley","269":"Lombardy","216":"London","196":"Lorraine","57":"Louisiana","658":"Louna-Eesti","684":"Low Andes","342":"Lower Austria","611":"Lower Carniola","197":"Lower Normandy","251":"Lower Saxony and Bremen","644":"Luzon","414":"Macedonia","163":"Madeira","447":"Madhya Pradesh","166":"Madrid","449":"Maharashtra","58":"Maine","465":"Maluku islands","105":"Manitoba","38":"Maramures","270":"Marche","516":"Marmara","59":"Maryland","60":"Massachusetts","483":"Mazandaran and Golistan","424":"Mazovia","423":"Mazuria","250":"Mecklenburg-Western Pomerania","517":"Mediterranean Coast of Turkey","154":"Mesopotamia","61":"Michigan","683":"Mid Andes","198":"Midi-Pyrenees","232":"Midtjylland","646":"Mindanao","62":"Minnesota","63":"Mississippi","64":"Missouri","37":"Moldova","271":"Molise","65":"Montana","440":"Moravia","532":"Moscow and Central Russia","502":"Mpumalanga","5":"Muntenia","177":"Murcia","178":"Navarra","468":"Nazareth North District","66":"Nebraska","67":"Nevada","98":"New Brunswick","68":"New Hampshire","69":"New Jersey","70":"New Mexico","328":"New South Wales","71":"New York","102":"Newfoundland and Labrador","392":"Ningxia","233":"Nordjylland","291":"Nord-Norge","321":"Norrland and Sameland","158":"Norte","630":"Norte Chico","629":"Norte Grande","207":"North Calais","72":"North Carolina","537":"North Caucasus","73":"North Dakota","627":"North Dalmatia","226":"North East of England","459":"North Eastern India","130":"North Eastern Venezuela","147":"North of Brazil","252":"North Rhine-Westphalia","227":"North West of England","503":"North West Province","148":"Northeast of Brazil","215":"Northeast of Ireland","122":"Northeast of Mexico","511":"North-Eastern Thailand","91":"Northern Basarabia","442":"Northern Bohemia","504":"Northern Cape","113":"Northern Great Plain","112":"Northern Hungary","443":"Northern India","219":"Northern Ireland","686":"Northern Low Amazon","531":"Northern Netherlands","536":"Northern Russia","334":"Northern Territory","508":"Northern Thailand","624":"Northwest Croatia","493":"North-West Frontier Province","212":"Northwest of Ireland","117":"Northwest of Mexico","106":"Northwest Territories","482":"Northwestern Iran","99":"Nova Scotia","107":"Nunavut","119":"Oaxaca","74":"Ohio","75":"Oklahoma","9":"Oltenia","95":"Ontario","76":"Oregon","692":"Orinoquia","454":"Orissa","295":"Ostlandet","240":"Oulu","118":"Pacific Coast of Mexico","693":"Pacifica","647":"Palawan","151":"Pampas","681":"Pando","466":"Papua","150":"Parana and Santa Catarina","675":"Paranena","199":"Paris Isle of France","156":"Patagonia","200":"Pays de la Loire","419":"Peloponnese","643":"Peninsular Malaysia","77":"Pennsylvania","201":"Picardy","272":"Piedmont","353":"Plovdiv","136":"Podolia","654":"Pohja-Eesti","202":"Poitou Charentes","135":"Polisia","306":"Pomerania","621":"Prekmurje","96":"Prince Edward Island","203":"Provence Alpes Azur","494":"Punjab","669":"Pyongan","389":"Qinghai","100":"Quebec","329":"Queensland","446":"Rajasthan","639":"Raska","475":"Razavi Khorasan","253":"Rhineland-Palatinate","78":"Rhode Island","204":"Rhone Alps","653":"Rio Grande do Sul","337":"Romandie","358":"Ruse","673":"Ryanggang","254":"Saarland","641":"Sabah","344":"Salzburg","664":"Samogitia","679":"Santa Cruz","642":"Sarawak","273":"Sardinia","101":"Saskatchewan","255":"Saxony","256":"Saxony-Anhalt","324":"Scania","257":"Schleswig-Holstein and Hamburg","217":"Scotland","477":"Semnan","377":"Shaanxi","378":"Shandong","397":"Shanghai","210":"Shannon","379":"Shanxi","490":"Shikoku","380":"Sichuan","274":"Sicily","307":"Silesia","495":"Sindh","648":"Singapore City","473":"Sistan and Baluchistan","139":"Siveria","235":"Sjaelland","622":"Slavonia","142":"Sloboda","571":"Slovenian Littoral","326":"Smaland","355":"Sofia","292":"Sorlandet","330":"South Australia","79":"South Carolina","80":"South Dakota","628":"South Dalmatia","153":"South East Chaco","220":"South East of England","474":"South Khorasan","221":"South West of England","149":"Southeast of Brazil","213":"Southeast of Ireland","121":"Southeast of Mexico","518":"Southeastern Anatolia","93":"Southern Basarabia","437":"Southern Bohemia","237":"Southern Finland","114":"Southern Great Plain","687":"Southern Low Amazon","529":"Southern Netherlands","640":"Southern Serbia","510":"Southern Thailand","109":"Southern Transdanubia","481":"Southwestern Iran","345":"Styria","601":"Styria and Carinthia","132":"Subcarpathia","667":"Sudovia","464":"Sulawesi","636":"Sumadija","460":"Sumatra","562":"Svalbard & Jan Mayen","320":"Svealand","338":"Svizzera italiana","236":"Syddanmark","452":"Tamil Nadu","331":"Tasmania","144":"Taurida","470":"Tel Aviv Center District","81":"Tennessee","82":"Texas","415":"Thessaly","413":"Thrace","258":"Thuringia","394":"Tibet","485":"Tohoku","35":"Transilvania","94":"Transnistria","275":"Trentino-South Tyrol","293":"Trondelag","276":"Tuscany","346":"Tyrol","277":"Umbria","343":"Upper Austria","591":"Upper Carniola","205":"Upper Normandy","540":"Urals","83":"Utah","445":"Uttar Pradesh","180":"Valencian Community","115":"Valley of Mexico","356":"Varna","278":"Veneto","123":"Venezuelan Andean","124":"Venezuelan Capital","84":"Vermont","294":"Vestlandet","332":"Victoria","352":"Vidin","659":"Vidzeme","85":"Virginia","645":"Visayas","634":"Vojvodina","544":"Volga","541":"Volga Vyatka","134":"Volhynia","347":"Vorarlberg","218":"Wales","230":"Wallonia","86":"Washington","457":"West Bengal","223":"West Midlands","649":"West Srpska Republic","87":"West Virginia","333":"Western Australia","505":"Western Cape","238":"Western Finland","528":"Western Netherlands","638":"Western Serbia","542":"Western Siberia","315":"Western Slovakia","108":"Western Transdanubia","88":"Wisconsin","89":"Wyoming","393":"Xinjiang","476":"Yazd","225":"Yorkshire & Humberside","104":"Yukon","381":"Yunnan","141":"Zaporozhia","661":"Zemgale","382":"Zhejiang","633":"Zona Austral","631":"Zona Central","632":"Zona Sur","131":"Zulian"};

var getJSON = function(jsonstr,key) {
	var index = jsonstr.indexOf(key);
	if(index == -1) {
		return '';
	}
	var startIndex = index + key.length + 3;
	var endIndex = jsonstr.indexOf('\"' , startIndex);
	if(endIndex == -1) {
		return '';
	}
	return jsonstr.substring(startIndex,endIndex);
};

var currentHealth = parseFloat($('#wellnessBar span').text());
var currentHappiness = parseFloat($('#happiness_indicator span').text());

var eRAopt = {
	lang: 'en'
};

var eRAmenu = {
	menu1: {title: 'eRA', lnk: 'http://userscripts.org/scripts/show/97431', target: true}
};

var eRAacc = {
	Gold: '0.00'
};

var eRAcomp = {
	day: 0
};

var eRAdon = {
	status: 'done',
	company: '0',
	raw: '0',
	country: '0',
	amount: 0,
	value: '0',
	offer: '0',
	bought: '0',
	exists: 'no'
};
// ---------------------------------------------------------------------------------------------------------------------

// -- Common functions -------------------------------------------------------------------------------------------------
String.prototype.trim = function() { return this.replace(/^\s+|\s+$/g, ''); }

Function.prototype.bind = function( thisObject ) {
  var method = this;
  var oldargs = [].slice.call( arguments, 1 );
  return function () {
    var newargs = [].slice.call( arguments );
    return method.apply( thisObject, oldargs.concat( newargs ));
  };
}

function contains(a, obj) {
  var e = a.length;
  while (e--) {
    if (a[e] === obj) {
      return true;
    }
  }
  return false;
}

jQuery.fn.contentChange = function(callback) {
	var elms = jQuery(this);
	elms.each(
		function(i) {
			var elm = jQuery(this);
			elm.data("lastContents", elm.html());
			window.watchContentChange = window.watchContentChange ? window.watchContentChange : [];
			window.watchContentChange.push({"element": elm, "callback": callback});
		}
	)
	return elms;
}
setInterval(function() {
	if(window.watchContentChange) {
		for(i in window.watchContentChange) {
			if(window.watchContentChange[i].element.data("lastContents") != window.watchContentChange[i].element.html()) {
				window.watchContentChange[i].callback.apply(window.watchContentChange[i].element);
				window.watchContentChange[i].element.data("lastContents", window.watchContentChange[i].element.html())
			};
		}
	}
},500);

jQuery.fn.attrChange = function(callback) {
	var elemen = jQuery(this);
	elemen.each(
		function(f) {
			var elmn = jQuery(this);
			elmn.data("lastAttribute", elmn.attr('original-title'));
			window.watchAttributeChange = window.watchAttributeChange ? window.watchAttributeChange : [];
			window.watchAttributeChange.push({"element": elmn, "callback": callback});
		}
	)
	return elemen;
}
setInterval(function() {
	if(window.watchAttributeChange) {
		for(f in window.watchAttributeChange) {
			if(window.watchAttributeChange[f].element.data("lastAttribute") != window.watchAttributeChange[f].element.attr('original-title')) {
				window.watchAttributeChange[f].callback.apply(window.watchAttributeChange[f].element);
				window.watchAttributeChange[f].element.data("lastAttribute", window.watchAttributeChange[f].element.attr('original-title'))
			};
		}
	}
},500);

jQuery.fn.cssChange = function(callback) {
	var element = jQuery(this);
	element.each(
		function(e) {
			var elmnt = jQuery(this);
			elmnt.data("lastStyle", elmnt.css('width'));
			window.watchStyleChange = window.watchStyleChange ? window.watchStyleChange : [];
			window.watchStyleChange.push({"element": elmnt, "callback": callback});
		}
	)
	return element;
}
setInterval(function() {
	if(window.watchStyleChange) {
		for(e in window.watchStyleChange) {
			if(window.watchStyleChange[e].element.data("lastStyle") != window.watchStyleChange[e].element.css('width')) {
				window.watchStyleChange[e].callback.apply(window.watchStyleChange[e].element);
				window.watchStyleChange[e].element.data("lastStyle", window.watchStyleChange[e].element.css('width'))
			};
		}
	}
},500);

function fixString(string) {
	string = string.trim();
	string = string.replace(/(\r\n|\n|\r)/gm,"");
	var intIndexOfMatch = string.indexOf("		");
	while (intIndexOfMatch != -1) {
		string = string.replace( "		", "	" )
		intIndexOfMatch = string.indexOf( "		" );
	}
	string = string.replace(/	/g, "/");
	
	return(string);
}

function fixString2(string) {
	string = string.trim();
	string = string.replace(/(\r\n|\n|\r)/gm,"");
	var intIndexOfMatch = string.indexOf("		");
	while (intIndexOfMatch != -1) {
		string = string.replace( "		", "	" )
		intIndexOfMatch = string.indexOf( "		" );
	}
	string = string.replace(/	/g, "");
	
	return(string);
}

function mathRound(number, decimal) {
	if (decimal == 0) {
		var value = Math.round(number);
	} else if (decimal == 1) {
		var value = Math.round(number * 10) / 10;
	} else if (decimal == 2) {
		var value = Math.round(number * 100) / 100;
	} else if (decimal == 3) {
		var value = Math.round(number * 1000) / 1000;
	} else if (decimal == 4) {
		var value = Math.round(number * 10000) / 10000;
	} else if (decimal == 5) {
		var value = Math.round(number * 100000) / 100000;
	}
	return (value);
}

function colorChoose(number){
    if (number < 0){return 'red'}
    else { return '#87AE09' }
}

function removeArrayElement(arrayName, arrayElement) {
	for (var i=0; i < arrayName.length; i++) { 
		if (arrayName[i] == arrayElement) {
			arrayName.splice(i,1);
		}
	}
}

function readSettings(name) {
	if (name == 'options') {
		var optionString = GM_getValue(document.userid + '.Options');
		if (optionString != null) {
			var options = eval('(' + optionString + ')');
			if (options['opt1'] == true || options['opt1'] == false) {
				GM_deleteValue(document.userid + '.Options');
				eRAopt.lang = LANG;
			} else {
				for(var op in options) {
					eRAopt[op] = options[op];
				}
			}
		} else {
			eRAopt.lang = LANG;
		}
	} else if (name == 'menu') {
		var optionString = GM_getValue(document.userid + '.Menu');
		if (optionString != null) {
			var options = eval('(' + optionString + ')');
			for(var op in options) {
				eRAmenu[op] = options[op];
			}
		} else {
			eRAmenu.menu1.title = 'eRA';
			eRAmenu.menu1.lnk = 'http://userscripts.org/scripts/show/97431';
			eRAmenu.menu1.target = true
		}
	} else if (name == 'accounts') {
		var optionString = GM_getValue(document.userid + '.Accounts');
		if (optionString != null) {
			var options = eval('(' + optionString + ')');
			for(var op in options) {
				eRAacc[op] = options[op];
			}
		} else {
			eRAacc.Gold = '0.00';
		}
	} else if (name == 'company') {
		var optionString = GM_getValue(document.userid + '.Company');
		if (optionString != null) {
			var options = eval('(' + optionString + ')');
			for(var op in options) {
				eRAcomp[op] = options[op];
			}
		} else {
			eRAcomp.day = 1000;
		}
	} else if (name == 'donater') {
		var optionString = GM_getValue(document.userid + '.Donater');
		if (optionString != null) {
			var options = eval('(' + optionString + ')');
			for(var op in options) {
				eRAdon[op] = options[op];
			}
		} else {
			eRAdon.status = 'done';
			eRAdon.company = '0';
			eRAdon.raw = '0';
			eRAdon.country = '0';
			eRAdon.amount = 0;
			eRAdon.value = '0';
			eRAdon.offer = '0';
			eRAdon.bought = '0';
			eRAdon.exists = 'no';
		}
	}
}

function writeSettings(pref, value) {
	GM_setValue(pref, $.toJSON(value));
}
// ---------------------------------------------------------------------------------------------------------------------

// -- Options tool -----------------------------------------------------------------------------------------------------
function getVersion() {
	GM_xmlhttpRequest({
		method: 'GET',
		url: 'http://userscripts.org/scripts/show/97431',
		headers: {
			'User-agent': 'Mozilla/4.0 (compatible) Greasemonkey/0.3',
			'Accept': 'application/atom+xml,application/xml,text/xml',
		},
		onload: function(responseDetails) {
			var currVersion = VERSION.replace(/\./gi, '');
			var newVersion = $(responseDetails.responseText).find('#summary').html().split('<b>Version:</b>')[1].trim().split('\n')[0];
			var nVersion = newVersion.replace(/\./gi, '');
			if(parseFloat(nVersion) > parseFloat(currVersion)) {
				$('.eCM_version').html('<a title="Update available! New version: v ' + newVersion + '" href="http://userscripts.org/scripts/show/97431" target="_blank" style="color: #ff0000; font-weight: bold;">v ' + VERSION + '</a>');
			}
		}
	});
}

function createSidebar() {
	readSettings('options');
	readSettings('menu');
	readSettings('donater');
	
	if (!eRAmenu['menu2']) {
		var menuTitle1 = GM_getValue(document.userid + '.menuTitle1', null);
		var menuLink1 = GM_getValue(document.userid + '.menuLink1', null);
		var menuTarget1 = GM_getValue(document.userid + '.menuTarget1', null);
		eRAmenu['menu1'] = {title: menuTitle1, lnk: menuLink1, target: menuTarget1};
		var menuTitle2 = GM_getValue(document.userid + '.menuTitle2', null);
		var menuLink2 = GM_getValue(document.userid + '.menuLink2', null);
		var menuTarget2 = GM_getValue(document.userid + '.menuTarget2', null);
		eRAmenu['menu2'] = {title: menuTitle2, lnk: menuLink2, target: menuTarget2};
		var menuTitle3 = GM_getValue(document.userid + '.menuTitle3', null);
		var menuLink3 = GM_getValue(document.userid + '.menuLink3', null);
		var menuTarget3 = GM_getValue(document.userid + '.menuTarget3', null);
		eRAmenu['menu3'] = {title: menuTitle3, lnk: menuLink3, target: menuTarget3};
		var menuTitle4 = GM_getValue(document.userid + '.menuTitle4', null);
		var menuLink4 = GM_getValue(document.userid + '.menuLink4', null);
		var menuTarget4 = GM_getValue(document.userid + '.menuTarget4', null);
		eRAmenu['menu4'] = {title: menuTitle4, lnk: menuLink4, target: menuTarget4};
		var menuTitle5 = GM_getValue(document.userid + '.menuTitle5', null);
		var menuLink5 = GM_getValue(document.userid + '.menuLink5', null);
		var menuTarget5 = GM_getValue(document.userid + '.menuTarget5', null);
		eRAmenu['menu5'] = {title: menuTitle5, lnk: menuLink5, target: menuTarget5};
		var menuTitle6 = GM_getValue(document.userid + '.menuTitle6', null);
		var menuLink6 = GM_getValue(document.userid + '.menuLink6', null);
		var menuTarget6 = GM_getValue(document.userid + '.menuTarget6', null);
		eRAmenu['menu6'] = {title: menuTitle6, lnk: menuLink6, target: menuTarget6};
		var menuTitle7 = GM_getValue(document.userid + '.menuTitle7', null);
		var menuLink7 = GM_getValue(document.userid + '.menuLink7', null);
		var menuTarget7 = GM_getValue(document.userid + '.menuTarget7', null);
		eRAmenu['menu7'] = {title: menuTitle7, lnk: menuLink7, target: menuTarget7};
		var menuTitle8 = GM_getValue(document.userid + '.menuTitle8', null);
		var menuLink8 = GM_getValue(document.userid + '.menuLink8', null);
		var menuTarget8 = GM_getValue(document.userid + '.menuTarget8', null);
		eRAmenu['menu8'] = {title: menuTitle8, lnk: menuLink8, target: menuTarget8};
		
		var menuTopTitle1 = GM_getValue(document.userid + '.menuTopTitle1', null);
		var menuTopLink1 = GM_getValue(document.userid + '.menuTopLink1', null);
		var menuTopTarget1 = GM_getValue(document.userid + '.menuTopTarget1', null);
		eRAmenu['menutop1'] = {title: menuTopTitle1, lnk: menuTopLink1, target: menuTopTarget1};
		var menuTopTitle2 = GM_getValue(document.userid + '.menuTopTitle2', null);
		var menuTopLink2 = GM_getValue(document.userid + '.menuTopLink2', null);
		var menuTopTarget2 = GM_getValue(document.userid + '.menuTopTarget2', null);
		eRAmenu['menutop2'] = {title: menuTopTitle2, lnk: menuTopLink2, target: menuTopTarget2};
		var menuTopTitle3 = GM_getValue(document.userid + '.menuTopTitle3', null);
		var menuTopLink3 = GM_getValue(document.userid + '.menuTopLink3', null);
		var menuTopTarget3 = GM_getValue(document.userid + '.menuTopTarget3', null);
		eRAmenu['menutop3'] = {title: menuTopTitle3, lnk: menuTopLink3, target: menuTopTarget3};
		var menuTopTitle4 = GM_getValue(document.userid + '.menuTopTitle4', null);
		var menuTopLink4 = GM_getValue(document.userid + '.menuTopLink4', null);
		var menuTopTarget4 = GM_getValue(document.userid + '.menuTopTarget4', null);
		eRAmenu['menutop4'] = {title: menuTopTitle4, lnk: menuTopLink4, target: menuTopTarget4};
		var menuTopTitle5 = GM_getValue(document.userid + '.menuTopTitle5', null);
		var menuTopLink5 = GM_getValue(document.userid + '.menuTopLink5', null);
		var menuTopTarget5 = GM_getValue(document.userid + '.menuTopTarget5', null);
		eRAmenu['menutop5'] = {title: menuTopTitle5, lnk: menuTopLink5, target: menuTopTarget5};
		var menuTopTitle6 = GM_getValue(document.userid + '.menuTopTitle6', null);
		var menuTopLink6 = GM_getValue(document.userid + '.menuTopLink6', null);
		var menuTopTarget6 = GM_getValue(document.userid + '.menuTopTarget6', null);
		eRAmenu['menutop6'] = {title: menuTopTitle6, lnk: menuTopLink6, target: menuTopTarget6};
		var menuTopTitle7 = GM_getValue(document.userid + '.menuTopTitle7', null);
		var menuTopLink7 = GM_getValue(document.userid + '.menuTopLink7', null);
		var menuTopTarget7 = GM_getValue(document.userid + '.menuTopTarget7', null);
		eRAmenu['menutop7'] = {title: menuTopTitle7, lnk: menuTopLink7, target: menuTopTarget7};
		var menuTopTitle8 = GM_getValue(document.userid + '.menuTopTitle8', null);
		var menuTopLink8 = GM_getValue(document.userid + '.menuTopLink8', null);
		var menuTopTarget8 = GM_getValue(document.userid + '.menuTopTarget8', null);
		eRAmenu['menutop8'] = {title: menuTopTitle8, lnk: menuTopLink8, target: menuTopTarget8};
		
		writeSettings(document.userid + '.Menu', eRAmenu);
	}
	
	GM_deleteValue(document.userid + '.menuTitle1');
	GM_deleteValue(document.userid + '.menuTitle2');
	GM_deleteValue(document.userid + '.menuTitle3');
	GM_deleteValue(document.userid + '.menuTitle4');
	GM_deleteValue(document.userid + '.menuTitle5');
	GM_deleteValue(document.userid + '.menuTitle6');
	GM_deleteValue(document.userid + '.menuTitle7');
	GM_deleteValue(document.userid + '.menuTitle8');
	GM_deleteValue(document.userid + '.menuLink1');
	GM_deleteValue(document.userid + '.menuLink2');
	GM_deleteValue(document.userid + '.menuLink3');
	GM_deleteValue(document.userid + '.menuLink4');
	GM_deleteValue(document.userid + '.menuLink5');
	GM_deleteValue(document.userid + '.menuLink6');
	GM_deleteValue(document.userid + '.menuLink7');
	GM_deleteValue(document.userid + '.menuLink8');
	GM_deleteValue(document.userid + '.menuTarget1');
	GM_deleteValue(document.userid + '.menuTarget2');
	GM_deleteValue(document.userid + '.menuTarget3');
	GM_deleteValue(document.userid + '.menuTarget4');
	GM_deleteValue(document.userid + '.menuTarget5');
	GM_deleteValue(document.userid + '.menuTarget6');
	GM_deleteValue(document.userid + '.menuTarget7');
	GM_deleteValue(document.userid + '.menuTarget8');
	
	GM_deleteValue(document.userid + '.menuTopTitle1');
	GM_deleteValue(document.userid + '.menuTopTitle2');
	GM_deleteValue(document.userid + '.menuTopTitle3');
	GM_deleteValue(document.userid + '.menuTopTitle4');
	GM_deleteValue(document.userid + '.menuTopTitle5');
	GM_deleteValue(document.userid + '.menuTopTitle6');
	GM_deleteValue(document.userid + '.menuTopTitle7');
	GM_deleteValue(document.userid + '.menuTopTitle8');
	GM_deleteValue(document.userid + '.menuTopLink1');
	GM_deleteValue(document.userid + '.menuTopLink2');
	GM_deleteValue(document.userid + '.menuTopLink3');
	GM_deleteValue(document.userid + '.menuTopLink4');
	GM_deleteValue(document.userid + '.menuTopLink5');
	GM_deleteValue(document.userid + '.menuTopLink6');
	GM_deleteValue(document.userid + '.menuTopLink7');
	GM_deleteValue(document.userid + '.menuTopLink8');
	GM_deleteValue(document.userid + '.menuTopTarget1');
	GM_deleteValue(document.userid + '.menuTopTarget2');
	GM_deleteValue(document.userid + '.menuTopTarget3');
	GM_deleteValue(document.userid + '.menuTopTarget4');
	GM_deleteValue(document.userid + '.menuTopTarget5');
	GM_deleteValue(document.userid + '.menuTopTarget6');
	GM_deleteValue(document.userid + '.menuTopTarget7');
	GM_deleteValue(document.userid + '.menuTopTarget8');
	
	GM_deleteValue(document.userid + '.oldTime');
	GM_deleteValue(document.userid + '.langSelected');
	if(eRAopt["lang"] == null) {
		eRAopt["lang"] = 'en';
		var langSelected = 'en';
	} else {
		var langSelected = eRAopt["lang"];
	}
	
	var ecmInfoContent = '<span class="eCM_window_header">&nbsp;</span><table border="0" cellspacing="5px" cellpadding="5px"><tr><td>Author: <strong>Roktaal</strong> <img src="' + authLogo + '"></td></tr><tr><td>Co-author: <strong>asylume</strong></td></tr><tr><td>Version: <strong>v' + VERSION + '</strong></td></tr><tr><td>Release date: <strong>' + RELEASE_DAY + '</strong></td></tr><tr><td>Special thanks to: <strong>SJeB, Veljkokg, nolf, ziloslav, Brdar Dragan, drcika, Boolee, Denis Cicic, hapf, Leroy Combs, Basowy and many others.</strong></td></tr><tr><td align="center"><i>This software is donationware. You are welcome to donate eRepublik in-game gold to author of this script.  Amount of gold is up to you and it reflects what you think author deserves for the effort of contributing to the eRepublik community. Software is provided \'AS IS\' and without any warranty. Use on your own responsibility.</i></td></tr></table>';
	
	var newsMenuContent = '<span class="news_window_header"><a id="news_menu_close" class="close_button" title="Close" href="javascript:;">&nbsp;</a></span><span class="news_window_content"><div style="background-color: #666666; color: #e2e2e2; padding: 2px;">Choose the language for article translation</div><div class="news_window_content_table"><div class="news_window_content_tr"><div class="news_window_content_td"><input type="radio" name="langSelGroup" value="en" id="en"></div><div class="news_window_content_td"><input type="radio" name="langSelGroup" value="fr" id="fr"></div><div class="news_window_content_td"><input type="radio" name="langSelGroup" value="de" id="de"></div><div class="news_window_content_td"><input type="radio" name="langSelGroup" value="hu" id="hu"></div><div class="news_window_content_td"><input type="radio" name="langSelGroup" value="it" id="it"></div><div class="news_window_content_td"><input type="radio" name="langSelGroup" value="pt-pt" id="pt-pt"></div><div class="news_window_content_td"><input type="radio" name="langSelGroup" value="ro" id="ro"></div><div class="news_window_content_td"><input type="radio" name="langSelGroup" value="ru" id="ru"></div><div class="news_window_content_td"><input type="radio" name="langSelGroup" value="es" id="es"></div><div class="news_window_content_td"><input type="radio" name="langSelGroup" value="sv" id="sv"></div><div class="news_window_content_td"><input type="radio" name="langSelGroup" value="pl" id="pl"></div><div class="news_window_content_td"><input type="radio" name="langSelGroup" value="gr" id="gr"></div><div class="news_window_content_td"><input type="radio" name="langSelGroup" value="hr" id="hr"></div><div class="news_window_content_td"><input type="radio" name="langSelGroup" value="bg" id="bg"></div><div class="news_window_content_td"><input type="radio" name="langSelGroup" value="sr" id="sr"></div><div class="news_window_content_td"><input type="radio" name="langSelGroup" value="tr" id="tr"></div></div><div class="news_window_content_tr"><div class="news_window_content_td"><img src="http://www.erepublik.com/images/flags/S/United-Kingdom.gif" alt="English" title="English"></div><div class="news_window_content_td"><img src="http://www.erepublik.com/images/flags/S/France.gif" alt="Franais" title="Franais"></div><div class="news_window_content_td"><img src="http://www.erepublik.com/images/flags/S/Germany.gif" alt="Deutsch" title="Deutsch"></div><div class="news_window_content_td"><img src="http://www.erepublik.com/images/flags/S/Hungary.gif" alt="Magyar" title="Magyar"></div><div class="news_window_content_td"><img src="http://www.erepublik.com/images/flags/S/Italy.gif" alt="Italiano" title="Italiano"></div><div class="news_window_content_td"><img src="http://www.erepublik.com/images/flags/S/Portugal.gif" alt="Portugues" title="Portugues"></div><div class="news_window_content_td"><img src="http://www.erepublik.com/images/flags/S/Romania.gif" alt="Romna" title="Romna"></div><div class="news_window_content_td"><img src="http://www.erepublik.com/images/flags/S/Russia.gif" alt="???????" title="???????"></div><div class="news_window_content_td"><img src="http://www.erepublik.com/images/flags/S/Spain.gif" alt="Espaol" title="Espaol"></div><div class="news_window_content_td"><img src="http://www.erepublik.com/images/flags/S/Sweden.gif" alt="Svenska" title="Svenska"></div><div class="news_window_content_td"><img src="http://www.erepublik.com/images/flags/S/Poland.gif" alt="Polish" title="Polish"></div><div class="news_window_content_td"><img src="http://www.erepublik.com/images/flags/S/Greece.gif" alt="????????" title="????????"></div><div class="news_window_content_td"><img src="http://www.erepublik.com/images/flags/S/Croatia.gif" alt="Hrvatski" title="Hrvatski"></div><div class="news_window_content_td"><img src="http://www.erepublik.com/images/flags/S/Bulgaria.gif" alt="?????????" title="?????????"></div><div class="news_window_content_td"><img src="http://www.erepublik.com/images/flags/S/Serbia.gif" alt="??????" title="??????"></div><div class="news_window_content_td"><img src="http://www.erepublik.com/images/flags/S/Turkey.gif" alt="Trke" title="Trke"></div></div></div></span>';
	
	$('#sidebar').append('<div class="eCM_options"><div class="eCM_opt_content"><div class="eCM_opt_main"><table border="0" cellspacing="0" cellpadding="0"><tr><td style="font-size: 1px;"><img src="' + eCM_MainImg + '"><span class="eCM_info_holder"><div class="eCM_info">' + ecmInfoContent + '</div></span></td></tr><tr><td><div class="eCM_options_inner"><table border="0" cellspacing="0" cellpadding="0"><tr><td><input desc="company" type="checkbox" id="opt1"></td><td><span id="opt1text" title="Company Tools">&nbsp;Company</span></td></tr><tr><td><input desc="myplaces" type="checkbox" id="opt2"></td><td><span title="My Places Links">&nbsp;My Places</span></td></tr><tr><td><input desc="mmarket" type="checkbox" id="opt3"></td><td><span title="Monetary Market Tools">&nbsp;M. Market</span></td></tr><tr><td><input desc="market" type="checkbox" id="opt4"></td><td><span title="Market Enchancements">&nbsp;Market</span></td></tr><tr><td><input desc="adds" type="checkbox" id="opt5"></td><td><span title="Show/Hide adds">&nbsp;Adds</span></td></tr><tr class="eCM_menu"><td><input desc="menu" type="checkbox" id="opt6"></td><td style="cursor: pointer;"><span id="ecm_menu" title="Custom menu. Click here to setup links.">&nbsp;Menu<span class="eCM_menu_right">&gt;</span></span></td></tr><tr><td><input desc="search" type="checkbox" id="opt7"></td><td><span title="Automatic redirection on search page">&nbsp;Search</span></td></tr><tr><td><input desc="donations" type="checkbox" id="opt8"></td><td><span title="Extra All donations link and improved donations page">&nbsp;Donations</span></td></tr><tr><td><input desc="battlefield" type="checkbox" id="opt9"></td><td><span title="Battlefield page improvements.">&nbsp;Battlefield</span></td></tr><tr><td><input desc="sidebar" type="checkbox" id="opt10"></td><td><span id="opt10text" title="Sidebar improvements. Health, Happiness, Accounts, Mini Inventory.">&nbsp;Sidebar</span></td></tr><tr class="news_menu"><td><input desc="news" type="checkbox" id="opt11"></td><td style="cursor: pointer;"><span id="news_menu" title="Newspaper reading and writing tools. Click for more options.">&nbsp;News<span class="eCM_menu_right">&gt;</span></span><div id="news_menu_window" class="news_menu_window">' + newsMenuContent + '</div></td></tr><tr><td><input desc="dropdowns" type="checkbox" id="opt12"></td><td><span id="opt12text" title="Dropdown improvements.">&nbsp;Dropdowns</span></td></tr><tr><td><input desc="elections" type="checkbox" id="opt13"></td><td><span id="opt13text" title="Presidential elections improvements.">&nbsp;Elections</span></td></tr><tr><td><input desc="autodonater" type="checkbox" id="opt14"></td><td><span id="opt14text" title="Raw autodonater.">&nbsp;Autodon.</span></td></tr><tr><td><input desc="comtrack" type="checkbox" id="opt17"></td><td><span id="opt17text" title="Cross-account company tracker at the bottom of every page.">&nbsp;Com.Track.</span></td></tr><tr><td><input desc="cittrack" type="checkbox" id="opt18"></td><td><span id="opt18text" title="Cross-account citizen tracker.">&nbsp;Cit.Track.</span></td></tr></table></div><a class="eCM_a_slider" href="javascript:;"><div class="eCM_slider_down"></div><div class="eCM_slider_up"></div></a></td></tr></table></div></div><div class="eCM_version">v ' + VERSION + '</div></div>');
	
	$('#content').append('<div id="ecm_menu_window" class="eCM_menu_window"><span class="eCM_window_header"><a id="eCM_close" class="close_button" title="Close" href="javascript:;">&nbsp;</a></span><span class="eCM_window_content"><div><div style="background-color: #666666; color: #e2e2e2; padding: 2px;"><input desc="menu1" type="checkbox" id="opt6_1" style="margin-bottom: 2px; margin-left: 2px; vertical-align: middle;"> Custom links at the top of page</div></div><div class="eCM_window_content_table"><div class="eCM_window_content_tr"><div class="eCM_window_content_td">&nbsp;</div><div class="eCM_window_content_td">Title</div><div class="eCM_window_content_td">Link</div><div class="eCM_window_content_td">&nbsp;</div></div><div class="eCM_window_content_tr"><div class="eCM_window_content_td">1</div><div class="eCM_window_content_td"><input id="ecm_menu_top_title1" type="text" size="20"></div><div class="eCM_window_content_td"><input id="ecm_menu_top_link1" type="text" size="80"></div><div class="eCM_window_content_td"><input id="ecm_menu_top_target1" type="checkbox" title="Open link in new tab?"></div></div><div class="eCM_window_content_tr"><div class="eCM_window_content_td">2</div><div class="eCM_window_content_td"><input id="ecm_menu_top_title2" type="text" size="20"></div><div class="eCM_window_content_td"><input id="ecm_menu_top_link2" type="text" size="80"></div><div class="eCM_window_content_td"><input id="ecm_menu_top_target2" type="checkbox" title="Open link in new tab?"></div></div><div class="eCM_window_content_tr"><div class="eCM_window_content_td">3</div><div class="eCM_window_content_td"><input id="ecm_menu_top_title3" type="text" size="20"></div><div class="eCM_window_content_td"><input id="ecm_menu_top_link3" type="text" size="80"></div><div class="eCM_window_content_td"><input id="ecm_menu_top_target3" type="checkbox" title="Open link in new tab?"></div></div><div class="eCM_window_content_tr"><div class="eCM_window_content_td">4</div><div class="eCM_window_content_td"><input id="ecm_menu_top_title4" type="text" size="20"></div><div class="eCM_window_content_td"><input id="ecm_menu_top_link4" type="text" size="80"></div><div class="eCM_window_content_td"><input id="ecm_menu_top_target4" type="checkbox" title="Open link in new tab?"></div></div><div class="eCM_window_content_tr"><div class="eCM_window_content_td">5</div><div class="eCM_window_content_td"><input id="ecm_menu_top_title5" type="text" size="20"></div><div class="eCM_window_content_td"><input id="ecm_menu_top_link5" type="text" size="80"></div><div class="eCM_window_content_td"><input id="ecm_menu_top_target5" type="checkbox" title="Open link in new tab?"></div></div><div class="eCM_window_content_tr"><div class="eCM_window_content_td">6</div><div class="eCM_window_content_td"><input id="ecm_menu_top_title6" type="text" size="20"></div><div class="eCM_window_content_td"><input id="ecm_menu_top_link6" type="text" size="80"></div><div class="eCM_window_content_td"><input id="ecm_menu_top_target6" type="checkbox" title="Open link in new tab?"></div></div><div class="eCM_window_content_tr"><div class="eCM_window_content_td">7</div><div class="eCM_window_content_td"><input id="ecm_menu_top_title7" type="text" size="20"></div><div class="eCM_window_content_td"><input id="ecm_menu_top_link7" type="text" size="80"></div><div class="eCM_window_content_td"><input id="ecm_menu_top_target7" type="checkbox" title="Open link in new tab?"></div></div><div class="eCM_window_content_tr"><div class="eCM_window_content_td">8</div><div class="eCM_window_content_td"><input id="ecm_menu_top_title8" type="text" size="20"></div><div class="eCM_window_content_td"><input id="ecm_menu_top_link8" type="text" size="80"></div><div class="eCM_window_content_td"><input id="ecm_menu_top_target8" type="checkbox" title="Open link in new tab?"></div></div><div class="eCM_window_content_tr"><div class="eCM_window_content_td"></div><div class="eCM_window_content_td">&nbsp;</div><div class="eCM_window_content_td">&nbsp;</div><div class="eCM_window_content_td">&nbsp;</div></div></div><div><div style="background-color: #666666; color: #e2e2e2; margin-top: 5px; padding: 2px;"><input desc="menu2" type="checkbox" id="opt6_2" style="margin-bottom: 2px; margin-left: 2px; vertical-align: middle;"> Custom links below main menu</div></div><div class="eCM_window_content_table"><div class="eCM_window_content_tr"><div class="eCM_window_content_td">&nbsp;</div><div class="eCM_window_content_td">Title</div><div class="eCM_window_content_td">Link</div><div class="eCM_window_content_td">&nbsp;</div></div><div class="eCM_window_content_tr"><div class="eCM_window_content_td">1</div><div class="eCM_window_content_td"><input id="ecm_menu_title1" type="text" size="20"></div><div class="eCM_window_content_td"><input id="ecm_menu_link1" type="text" size="80"></div><div class="eCM_window_content_td"><input id="ecm_menu_target1" type="checkbox" title="Open link in new tab?"></div></div><div class="eCM_window_content_tr"><div class="eCM_window_content_td">2</div><div class="eCM_window_content_td"><input id="ecm_menu_title2" type="text" size="20"></div><div class="eCM_window_content_td"><input id="ecm_menu_link2" type="text" size="80"></div><div class="eCM_window_content_td"><input id="ecm_menu_target2" type="checkbox" title="Open link in new tab?"></div></div><div class="eCM_window_content_tr"><div class="eCM_window_content_td">3</div><div class="eCM_window_content_td"><input id="ecm_menu_title3" type="text" size="20"></div><div class="eCM_window_content_td"><input id="ecm_menu_link3" type="text" size="80"></div><div class="eCM_window_content_td"><input id="ecm_menu_target3" type="checkbox" title="Open link in new tab?"></div></div><div class="eCM_window_content_tr"><div class="eCM_window_content_td">4</div><div class="eCM_window_content_td"><input id="ecm_menu_title4" type="text" size="20"></div><div class="eCM_window_content_td"><input id="ecm_menu_link4" type="text" size="80"></div><div class="eCM_window_content_td"><input id="ecm_menu_target4" type="checkbox" title="Open link in new tab?"></div></div><div class="eCM_window_content_tr"><div class="eCM_window_content_td">5</div><div class="eCM_window_content_td"><input id="ecm_menu_title5" type="text" size="20"></div><div class="eCM_window_content_td"><input id="ecm_menu_link5" type="text" size="80"></div><div class="eCM_window_content_td"><input id="ecm_menu_target5" type="checkbox" title="Open link in new tab?"></div></div><div class="eCM_window_content_tr"><div class="eCM_window_content_td">6</div><div class="eCM_window_content_td"><input id="ecm_menu_title6" type="text" size="20"></div><div class="eCM_window_content_td"><input id="ecm_menu_link6" type="text" size="80"></div><div class="eCM_window_content_td"><input id="ecm_menu_target6" type="checkbox" title="Open link in new tab?"></div></div><div class="eCM_window_content_tr"><div class="eCM_window_content_td">7</div><div class="eCM_window_content_td"><input id="ecm_menu_title7" type="text" size="20"></div><div class="eCM_window_content_td"><input id="ecm_menu_link7" type="text" size="80"></div><div class="eCM_window_content_td"><input id="ecm_menu_target7" type="checkbox" title="Open link in new tab?"></div></div><div class="eCM_window_content_tr"><div class="eCM_window_content_td">8</div><div class="eCM_window_content_td"><input id="ecm_menu_title8" type="text" size="20"></div><div class="eCM_window_content_td"><input id="ecm_menu_link8" type="text" size="80"></div><div class="eCM_window_content_td"><input id="ecm_menu_target8" type="checkbox" title="Open link in new tab?"></div></div></div></span></div>');
	
	$('#news_menu_window input[id^="' + langSelected + '"]').attr('checked', 'checked');
	
	$('#news_menu_window input').change(function() {
		var newLangSelected = $(this).attr('id');
		eRAopt['lang'] = newLangSelected
		writeSettings(document.userid + '.Options', eRAopt);
	});
	
	$('#ecm_menu_title1').val(eRAmenu['menu1'].title);
	$('#ecm_menu_link1').val(eRAmenu['menu1'].lnk);
	$('#ecm_menu_target1').attr('checked', eRAmenu['menu1'].target == null ? false : eRAmenu['menu1'].target);
	$('#ecm_menu_title2').val(eRAmenu['menu2'].title);
	$('#ecm_menu_link2').val(eRAmenu['menu1'].lnk);
	$('#ecm_menu_target2').attr('checked', eRAmenu['menu2'].target == null ? false : eRAmenu['menu2'].target);
	$('#ecm_menu_title3').val(eRAmenu['menu3'].title);
	$('#ecm_menu_link3').val(eRAmenu['menu3'].lnk);
	$('#ecm_menu_target3').attr('checked', eRAmenu['menu3'].target == null ? false : eRAmenu['menu3'].target);
	$('#ecm_menu_title4').val(eRAmenu['menu4'].title);
	$('#ecm_menu_link4').val(eRAmenu['menu4'].lnk);
	$('#ecm_menu_target4').attr('checked', eRAmenu['menu4'].target == null ? false : eRAmenu['menu4'].target);
	$('#ecm_menu_title5').val(eRAmenu['menu5'].title);
	$('#ecm_menu_link5').val(eRAmenu['menu5'].lnk);
	$('#ecm_menu_target5').attr('checked', eRAmenu['menu5'].target == null ? false : eRAmenu['menu5'].target);
	$('#ecm_menu_title6').val(eRAmenu['menu6'].title);
	$('#ecm_menu_link6').val(eRAmenu['menu6'].lnk);
	$('#ecm_menu_target6').attr('checked', eRAmenu['menu6'].target == null ? false : eRAmenu['menu6'].target);
	$('#ecm_menu_title7').val(eRAmenu['menu7'].title);
	$('#ecm_menu_link7').val(eRAmenu['menu7'].lnk);
	$('#ecm_menu_target7').attr('checked', eRAmenu['menu7'].target == null ? false : eRAmenu['menu7'].target);
	$('#ecm_menu_title8').val(eRAmenu['menu8'].title);
	$('#ecm_menu_link8').val(eRAmenu['menu8'].lnk);
	$('#ecm_menu_target8').attr('checked', eRAmenu['menu8'].target == null ? false : eRAmenu['menu8'].target);
	
	$('#ecm_menu_top_title1').val(eRAmenu['menutop1'].title);
	$('#ecm_menu_top_link1').val(eRAmenu['menutop1'].lnk);
	$('#ecm_menu_top_target1').attr('checked', eRAmenu['menutop1'].target == null ? false : eRAmenu['menutop1'].target);
	$('#ecm_menu_top_title2').val(eRAmenu['menutop2'].title);
	$('#ecm_menu_top_link2').val(eRAmenu['menutop2'].lnk);
	$('#ecm_menu_top_target2').attr('checked', eRAmenu['menutop2'].target == null ? false : eRAmenu['menutop2'].target);
	$('#ecm_menu_top_title3').val(eRAmenu['menutop3'].title);
	$('#ecm_menu_top_link3').val(eRAmenu['menutop3'].lnk);
	$('#ecm_menu_top_target3').attr('checked', eRAmenu['menutop3'].target == null ? false : eRAmenu['menutop3'].target);
	$('#ecm_menu_top_title4').val(eRAmenu['menutop4'].title);
	$('#ecm_menu_top_link4').val(eRAmenu['menutop4'].lnk);
	$('#ecm_menu_top_target4').attr('checked', eRAmenu['menutop4'].target == null ? false : eRAmenu['menutop4'].target);
	$('#ecm_menu_top_title5').val(eRAmenu['menutop5'].title);
	$('#ecm_menu_top_link5').val(eRAmenu['menutop5'].lnk);
	$('#ecm_menu_top_target5').attr('checked', eRAmenu['menutop5'].target == null ? false : eRAmenu['menutop5'].target);
	$('#ecm_menu_top_title6').val(eRAmenu['menutop6'].title);
	$('#ecm_menu_top_link6').val(eRAmenu['menutop6'].lnk);
	$('#ecm_menu_top_target6').attr('checked', eRAmenu['menutop6'].target == null ? false : eRAmenu['menutop6'].target);
	$('#ecm_menu_top_title7').val(eRAmenu['menutop7'].title);
	$('#ecm_menu_top_link7').val(eRAmenu['menutop7'].lnk);
	$('#ecm_menu_top_target7').attr('checked', eRAmenu['menutop7'].target == null ? false : eRAmenu['menutop7'].target);
	$('#ecm_menu_top_title8').val(eRAmenu['menutop8'].title);
	$('#ecm_menu_top_link8').val(eRAmenu['menutop8'].lnk);
	$('#ecm_menu_top_target8').attr('checked', eRAmenu['menutop8'].target == null ? false : eRAmenu['menutop8'].target);
	
	$('input[id*="ecm_menu_title"]').each(function() {
		var numbId = $(this).attr('id').split('_')[2].replace('title', '');
		$(this).change(function() {
			eRAmenu['menu' + numbId].title = $(this).val();
			writeSettings(document.userid + '.Menu', eRAmenu);
		});
	});
	$('input[id*="ecm_menu_link"]').each(function() {
		var numbId = $(this).attr('id').split('_')[2].replace('link', '');
		$(this).change(function() {
			eRAmenu['menu' + numbId].lnk = $(this).val();
			writeSettings(document.userid + '.Menu', eRAmenu);
		});
	});
	$('input[id*="ecm_menu_target"]').each(function() {
		var numbId = $(this).attr('id').split('_')[2].replace('target', '');
		$(this).change(function() {
			eRAmenu['menu' + numbId].target = $(this).attr('checked');
			writeSettings(document.userid + '.Menu', eRAmenu);
		});
	});
	
	$('input[id*="ecm_menu_top_title"]').each(function() {
		var numbId = $(this).attr('id').split('_')[3].replace('title', '');
		$(this).change(function() {
			eRAmenu['menutop' + numbId].title = $(this).val();
			writeSettings(document.userid + '.Menu', eRAmenu);
		});
	});
	$('input[id*="ecm_menu_top_link"]').each(function() {
		var numbId = $(this).attr('id').split('_')[3].replace('link', '');
		$(this).change(function() {
			eRAmenu['menutop' + numbId].lnk = $(this).val();
			writeSettings(document.userid + '.Menu', eRAmenu);
		});
	});
	$('input[id*="ecm_menu_top_target"]').each(function() {
		var numbId = $(this).attr('id').split('_')[3].replace('target', '');
		$(this).change(function() {
			eRAmenu['menutop' + numbId].target = $(this).attr('checked');
			writeSettings(document.userid + '.Menu', eRAmenu);
		});
	});
	
	$('input[id*="opt"]').each(function() {
		var numbId = $(this).attr('id').replace('opt', '');
		var optName = $(this).attr('desc')
		if (eRAopt[optName] == null) {
			eRAopt[optName] = true;
			writeSettings(document.userid + '.Options', eRAopt);
			$(this).attr('checked', true);
		} else {
			$(this).attr('checked', eRAopt[optName]);
		}
		$(this).change(function() {
			eRAopt[optName] = $(this).attr('checked');
			writeSettings(document.userid + '.Options', eRAopt);
			if (optName == 'autodonater') {
				eRAdon['status'] = 'done';
				eRAdon['company'] = '0';
				eRAdon['raw'] = '0';
				eRAdon['country'] = '0';
				eRAdon['amount'] = 0;
				eRAdon['value'] = '0';
				eRAdon['offer'] = '0';
				eRAdon['bought'] = '0';
				eRAdon['exists'] = 'no';
				writeSettings(document.userid + '.Donater', eRAdon);
			}
		});
	});
	
	$('.eCM_a_slider').click(function() {
		if($('.eCM_options_inner').css('overflow') != "visible") {
			$('.eCM_options_inner').css('overflow', 'visible');
		} else {
			$('.eCM_options_inner').css('overflow', 'hidden');
		}
						
		if($('.eCM_options_inner').css('height') != '320px') {
			$('.eCM_options_inner').animate({ 'height': '320px', 'paddingTop': '5px', 'paddingBottom': '5px' }, 'fast' );
		} else {
			$('.eCM_options_inner').animate({ 'height': '0px', 'paddingTop': '0px', 'paddingBottom': '0px' }, 'fast' );
		}
						
		$('.eCM_slider_down').css('display',$('.eCM_slider_down').css('display')=='none'?'block':'none');
		$('.eCM_slider_up').css('display',$('.eCM_slider_up').css('display')=='none'?'block':'none');
	});
	
	$('#ecm_menu').click(function() {
		$('#ecm_menu_window').css('display',$('#ecm_menu_window').css('display')=='none'?'block':'none');
	});
	
	$('#eCM_close').click(function() {
		$('#ecm_menu_window').css('display',$('#ecm_menu_window').css('display')=='none'?'block':'none');
	});
	
	$('#news_menu').click(function() {
		$('#news_menu_window').css('display',$('#news_menu_window').css('display')=='none'?'block':'none');
	});
	
	$('#news_menu_close').click(function() {
		$('#news_menu_window').css('display',$('#news_menu_window').css('display')=='none'?'block':'none');
	});
	
	if ($('.citizen_attributes').size() > 0) {
		$('#opt1').attr('disabled', true);
		$('#opt1text').css('color', '#c2c2c2');
	}
	
	if ($('.citizen_attributes').size() <= 0) {
		$('#opt16').attr('disabled', true);
		$('#opt16text').css('color', '#c2c2c2');
	}
	
	getVersion();
}
// ---------------------------------------------------------------------------------------------------------------------

// -- My Places Links --------------------------------------------------------------------------------------------------
function createLinks() {
	if (eRAopt["myplaces"] == true) {
		if ($('.citizen_attributes').size() <= 0) {
			$('#menu2 ul').append('<li><a href="http://www.erepublik.com/' + document.language + '/my-places/newspaper" rel="nofollow">Newspaper</a></li>');
		}
		$('#menu2 ul').append('<li><a href="http://www.erepublik.com/' + document.language + '/battles/mybattlelist" rel="nofollow">Battlelist</a></li>');
	}
}

function changeRankingLink() {
	if (eRAopt["myplaces"] == true) {
		var rankingLink = $('#menu4 ul li:eq(0) a').attr('href');
		rankingLink = rankingLink.split('/');
		var newRankingLink = rankingLink[0] + '/' + rankingLink[1] + '/' + rankingLink[2] + '/' + rankingLink[3] + '/' + rankingLink[4] + '/' + rankingLink[5] + '/' + rankingLink[6] + '/2';
		$('#menu4 ul li:eq(0) a').attr('href', newRankingLink);
	}
}
// ---------------------------------------------------------------------------------------------------------------------

// -- Show / Hide adds -------------------------------------------------------------------------------------------------
function manageAdds() {
	if (eRAopt["adds"] == true) {
		return;
	}
	
	if ($('#eads')) {
		$('#eads').css('display', 'none');
	}
}
// ---------------------------------------------------------------------------------------------------------------------

// -- Company ----------------------------------------------------------------------------------------------------------
function getCompanyData(){
	if (eRAopt['company'] == "false") {
		return;
	}
	
	if ($('.manage_company').length == 0) {
		return;
	}
	
	readSettings('company');
	
	var windowLocation = window.location.href.split('/');
	
	if (windowLocation[5] == "employees" || windowLocation[5] == "job-offers" || windowLocation[5] == "customize" || windowLocation[6].split('#')[0].split('?')[0] == "donate") {
		return;
	}
	
	cId = $('#companyId').val();
	var industry = $('.product_attributes').find('img[src*="/images/icons/industry"]').attr('src').split('/')[6];
	
	document.countries = []
	$('#marketOffers tr[id*="rowId_"]').find('.mo_market img, .no_market img').each(function() {
		var c = $(this).attr('src').split('/')[6].split('.')[0];
		document.countries.push(c);
	});
	
	var compData = null;
	
	if (eRAcomp[cId] == undefined) {
		eRAcomp[cId] = {};
	}
	eRAcomp[cId].customization = {'1': '0', '2': '0', '3': '0', '4': '0'};
	writeSettings(document.userid + '.Company', eRAcomp);
	
	GM_deleteValue(cId + '.attributes.1');
	GM_deleteValue(cId + '.attributes.2');
	GM_deleteValue(cId + '.attributes.3');
	GM_deleteValue(cId + '.attributes.4');
	
	if(industry < 10) {
		var custLocation = $('#content');
		var json = $('script', custLocation).eq(2).text();
		var attrId = 0;
		var attrValue = 0;
		
		json = json.trim();
		json = json.replace(/(\r\n|\n|\r)/gm, '');
		json = json.split(';')[0].split('=')[1];
		
		var compData = eval('(' + json + ')');
		
		for (var x = 0; x < compData[0].attributes.length; x++) {
			attrId = compData[0].attributes[x].id + '';
			attrValue = compData[0].attributes[x].part.val + '';
			
			eRAcomp[cId].customization[attrId] = attrValue;
			writeSettings(document.userid + '.Company', eRAcomp);
		}
	}
	
	eRAcomp[cId].empcount = $('.employee big').text().split(/\s/)[0];
	writeSettings(document.userid + '.Company', eRAcomp);
	
	calcStock();
	getTax();
	getExchange();
}

function getMarketOffers() {
	readSettings('company');
	
	var marketData = null;
	var industry = $('.product_attributes').find('img[src*="/images/icons/industry"]').attr('src').split('/')[6];
	var url;
	var exRate;
	var taxRate;
	
	var dataHtml = null;
	
	var curren;
	var country_name = null;
	
	$('#market_offers_company .down_border').css('margin-bottom', '-67px');
	
	if($('.current_market_offers').html() == null) {
		$('.internal_content').append('<div class="current_market_offers"><div class="c_pylons"></div><h4>Current market offers</h4><span style="float: right; margin-top: -2px; margin-right: 17px;"><a id="c_market_refresh" href="javascript:;"><img src="' + iconRefresh + '"></a></span><div class="c_offers"><div class="c_ontop"><table width="100%" border="0" id="ecm_marketlicense" style="position: relative; z-index: 3;"><thead><tr><th class="c_market">Market</th><th class="c_taxvalue" width="30px">Tax</th><th class="c_customization" width="100px">Customization</th><th class="c_quantity" width="80px">Quantity</th><th class="c_price" width="100px">Price</th><th class="c_tax">Price with taxes</th><th class="c_arrow">&nbsp;</th></tr></thead><tbody id="c_marketOffers"></tbody></table></div></div><div class="clear"></div><div class="down_border" style="left: -3px; z-index: 2; margin-top: -46px;">&nbsp;</div></div>');
	}
	
	$('#c_market_refresh').live('click', function() {
		getMarketOffers();
	});
/*	
	if($('#mOffersLoader').html() == null) {
		$('#market_offers_company').prepend('<div id="mOffersLoader" class="mOffers_loader">Loading current market data... <img width="12px" height="12px" src="http://www.erepublik.com/images/parts/ajax-loader.gif" style="vertical-align: middle; padding-bottom: 3px;"></div>');
	} else {
		if($('#mOffersLoader').css('display') == 'none') {
			$('#mOffersLoader').css('display', 'inline');
		} else {
			$('#mOffersLoader').css('display', 'none');
		}
	}
*/	
	
	$('#marketOffers tr[id*="rowId_"]').each(function() {
		country_name = $(this).find('.ml_flag').eq(0).attr('src').split('/')[6].split('.')[0];
		
		if(industry == 1) {
			url = API_URL + 'market/' + industry + '/' + country_id[country_name.toLowerCase()] + '/' + eRAcomp[cId].customization['1'] + '/' + eRAcomp[cId].customization['2'] + '.json';
		} else if(industry >= 2 && industry <= 5) {
			url = API_URL + 'market/' + industry + '/' + country_id[country_name.toLowerCase()] + '/' + eRAcomp[cId].customization['1'] + '/' + eRAcomp[cId].customization['2'] + '/' + eRAcomp[cId].customization['3'] + '.json';
		} else if(industry >= 6 && industry <= 9) {
			url = API_URL + 'market/' + industry + '/' + country_id[country_name.toLowerCase()] + '/' + eRAcomp[cId].customization['1'] + '/' + eRAcomp[cId].customization['2'] + '/' + eRAcomp[cId].customization['3'] + '/' + eRAcomp[cId].customization['4'] + '.json';
		} else if(industry > 9) {
			url = API_URL + 'market/' + industry + '/' + country_id[country_name.toLowerCase()] + '.json';
		}
		
		if($('#ecm_rowId_' + country_id[country_name.toLowerCase()]).html() == null) {
			$('#c_marketOffers').append('<tr id="ecm_rowId_' + country_id[country_name.toLowerCase()] + '"></tr><tr id="ecm_rowId_' + country_id[country_name.toLowerCase()] + '_hidden" style="display: none; background-color: #FEFEFE;"></tr>');
		}
		
		var cCountr = null;
		
		var marPrice1 = 0;
		var marPrice1Gold = 0;
		var marPrice1Tax = 0;
		var marPrice1TaxGold = 0;
		
		var marPrice2 = 0;
		var marPrice2Gold = 0;
		var marPrice2Tax = 0;
		var marPrice2TaxGold = 0;
		
		var marPrice3 = 0;
		var marPrice3Gold = 0;
		var marPrice3Tax = 0;
		var marPrice3TaxGold = 0;
		
		var marPrice4 = 0;
		var marPrice4Gold = 0;
		var marPrice4Tax = 0;
		var marPrice4TaxGold = 0;
		
		var marPrice5 = 0;
		var marPrice5Gold = 0;
		var marPrice5Tax = 0;
		var marPrice5TaxGold = 0;
		
		var divHeight = "0px";
		
		GM_xmlhttpRequest({
			method: 'GET',
			url: url,
			onload: function(response) {
				try {
					cId = $('#companyId').val();
					
					cCountr = response.finalUrl.split('/')[7].split('.')[0];
					cCountr = id_country[cCountr];
					
					curren = country_currency[cCountr];
					
					exRate = eRAcomp[cId].exchange[curren];
					taxRate = eRAcomp[cId].taxrate[curren];
					
					marketData = eval('(' + response.responseText + ')');
					
//					getMOCountry(marketData[0].company.id);
					
					if (marketData.length == 1) {
						marPrice1 = parseFloat(marketData[0].price).toFixed(2)
						marPrice1Gold = parseFloat(marketData[0].price) * parseFloat(exRate)
						marPrice1Tax = parseFloat(marketData[0].price) + (parseFloat(marketData[0].price) * parseFloat(taxRate))
						marPrice1TaxGold = marPrice1Tax * parseFloat(exRate)
						
						if(industry == 1) {
							offerCustomiz1_1 = marketData[0].customization["wellness"];
							offerCustomiz1_2 = marketData[0].customization["happiness"];
						} else if(industry == 2) {
							offerCustomiz1_1 = marketData[0].customization["wellness"];
							offerCustomiz1_2 = marketData[0].customization["happiness"];
							offerCustomiz1_3 = marketData[0].customization["moving-distance"];
						} else if(industry == 3) {
							offerCustomiz1_1 = marketData[0].customization["wellness"];
							offerCustomiz1_2 = marketData[0].customization["happiness"];
							offerCustomiz1_3 = marketData[0].customization["durability"];
						} else if(industry == 4) {
							offerCustomiz1_1 = marketData[0].customization["durability"];
							offerCustomiz1_2 = marketData[0].customization["wellness"];
							offerCustomiz1_3 = marketData[0].customization["area-of-effect"];
						} else if(industry == 5) {
							offerCustomiz1_1 = marketData[0].customization["durability"];
							offerCustomiz1_2 = marketData[0].customization["defense"];
							offerCustomiz1_3 = marketData[0].customization["area-of-effect"];
						} else if(industry >= 6 && industry <= 9) {
							offerCustomiz1_1 = marketData[0].customization["damage"];
							offerCustomiz1_2 = marketData[0].customization["attack"];
							offerCustomiz1_3 = marketData[0].customization["defense"];
							offerCustomiz1_4 = marketData[0].customization["durability"];
						} else if(industry > 9) {
							offerCustomiz1_1 = "/";
						}
					} else if (marketData.length == 2) {
						marPrice1 = parseFloat(marketData[0].price).toFixed(2)
						marPrice1Gold = parseFloat(marketData[0].price) * parseFloat(exRate)
						marPrice1Tax = parseFloat(marketData[0].price) + (parseFloat(marketData[0].price) * parseFloat(taxRate))
						marPrice1TaxGold = marPrice1Tax * parseFloat(exRate)
						
						marPrice2 = parseFloat(marketData[1].price).toFixed(2)
						marPrice2Gold = parseFloat(marketData[1].price) * parseFloat(exRate)
						marPrice2Tax = parseFloat(marketData[1].price) + (parseFloat(marketData[1].price) * parseFloat(taxRate))
						marPrice2TaxGold = marPrice2Tax * parseFloat(exRate)
						
						if(industry == 1) {
							offerCustomiz1_1 = marketData[0].customization["wellness"];
							offerCustomiz1_2 = marketData[0].customization["happiness"];
							
							offerCustomiz2_1 = marketData[1].customization["wellness"];
							offerCustomiz2_2 = marketData[1].customization["happiness"];
						} else if(industry == 2) {
							offerCustomiz1_1 = marketData[0].customization["wellness"];
							offerCustomiz1_2 = marketData[0].customization["happiness"];
							offerCustomiz1_3 = marketData[0].customization["moving-distance"];
							
							offerCustomiz2_1 = marketData[1].customization["wellness"];
							offerCustomiz2_2 = marketData[1].customization["happiness"];
							offerCustomiz2_3 = marketData[1].customization["moving-distance"];
						} else if(industry == 3) {
							offerCustomiz1_1 = marketData[0].customization["wellness"];
							offerCustomiz1_2 = marketData[0].customization["happiness"];
							offerCustomiz1_3 = marketData[0].customization["durability"];
							
							offerCustomiz2_1 = marketData[1].customization["wellness"];
							offerCustomiz2_2 = marketData[1].customization["happiness"];
							offerCustomiz2_3 = marketData[1].customization["durability"];
						} else if(industry == 4) {
							offerCustomiz1_1 = marketData[0].customization["durability"];
							offerCustomiz1_2 = marketData[0].customization["wellness"];
							offerCustomiz1_3 = marketData[0].customization["area-of-effect"];
							
							offerCustomiz2_1 = marketData[1].customization["durability"];
							offerCustomiz2_2 = marketData[1].customization["wellness"];
							offerCustomiz2_3 = marketData[1].customization["area-of-effect"];
						} else if(industry == 5) {
							offerCustomiz1_1 = marketData[0].customization["durability"];
							offerCustomiz1_2 = marketData[0].customization["defense"];
							offerCustomiz1_3 = marketData[0].customization["area-of-effect"];
							
							offerCustomiz2_1 = marketData[1].customization["durability"];
							offerCustomiz2_2 = marketData[1].customization["defense"];
							offerCustomiz2_3 = marketData[1].customization["area-of-effect"];
						} else if(industry >= 6 && industry <= 9) {
							offerCustomiz1_1 = marketData[0].customization["damage"];
							offerCustomiz1_2 = marketData[0].customization["attack"];
							offerCustomiz1_3 = marketData[0].customization["defense"];
							offerCustomiz1_4 = marketData[0].customization["durability"];
							
							offerCustomiz2_1 = marketData[1].customization["damage"];
							offerCustomiz2_2 = marketData[1].customization["attack"];
							offerCustomiz2_3 = marketData[1].customization["defense"];
							offerCustomiz2_4 = marketData[1].customization["durability"];
						} else if(industry > 9) {
							offerCustomiz1_1 = "/";
							
							offerCustomiz2_1 = "/";
						}
					} else if (marketData.length == 3) {
						marPrice1 = parseFloat(marketData[0].price).toFixed(2)
						marPrice1Gold = parseFloat(marketData[0].price) * parseFloat(exRate)
						marPrice1Tax = parseFloat(marketData[0].price) + (parseFloat(marketData[0].price) * parseFloat(taxRate))
						marPrice1TaxGold = marPrice1Tax * parseFloat(exRate)
						
						marPrice2 = parseFloat(marketData[1].price).toFixed(2)
						marPrice2Gold = parseFloat(marketData[1].price) * parseFloat(exRate)
						marPrice2Tax = parseFloat(marketData[1].price) + (parseFloat(marketData[1].price) * parseFloat(taxRate))
						marPrice2TaxGold = marPrice2Tax * parseFloat(exRate)
						
						marPrice3 = parseFloat(marketData[2].price).toFixed(2)
						marPrice3Gold = parseFloat(marketData[2].price) * parseFloat(exRate)
						marPrice3Tax = parseFloat(marketData[2].price) + (parseFloat(marketData[2].price) * parseFloat(taxRate))
						marPrice3TaxGold = marPrice3Tax * parseFloat(exRate)
						
						if(industry == 1) {
							offerCustomiz1_1 = marketData[0].customization["wellness"];
							offerCustomiz1_2 = marketData[0].customization["happiness"];
							
							offerCustomiz2_1 = marketData[1].customization["wellness"];
							offerCustomiz2_2 = marketData[1].customization["happiness"];
							
							offerCustomiz3_1 = marketData[2].customization["wellness"];
							offerCustomiz3_2 = marketData[2].customization["happiness"];
						} else if(industry == 2) {
							offerCustomiz1_1 = marketData[0].customization["wellness"];
							offerCustomiz1_2 = marketData[0].customization["happiness"];
							offerCustomiz1_3 = marketData[0].customization["moving-distance"];
							
							offerCustomiz2_1 = marketData[1].customization["wellness"];
							offerCustomiz2_2 = marketData[1].customization["happiness"];
							offerCustomiz2_3 = marketData[1].customization["moving-distance"];
							
							offerCustomiz3_1 = marketData[2].customization["wellness"];
							offerCustomiz3_2 = marketData[2].customization["happiness"];
							offerCustomiz3_3 = marketData[2].customization["moving-distance"];
						} else if(industry == 3) {
							offerCustomiz1_1 = marketData[0].customization["wellness"];
							offerCustomiz1_2 = marketData[0].customization["happiness"];
							offerCustomiz1_3 = marketData[0].customization["durability"];
							
							offerCustomiz2_1 = marketData[1].customization["wellness"];
							offerCustomiz2_2 = marketData[1].customization["happiness"];
							offerCustomiz2_3 = marketData[1].customization["durability"];
							
							offerCustomiz3_1 = marketData[2].customization["wellness"];
							offerCustomiz3_2 = marketData[2].customization["happiness"];
							offerCustomiz3_3 = marketData[2].customization["durability"];
						} else if(industry == 4) {
							offerCustomiz1_1 = marketData[0].customization["durability"];
							offerCustomiz1_2 = marketData[0].customization["wellness"];
							offerCustomiz1_3 = marketData[0].customization["area-of-effect"];
							
							offerCustomiz2_1 = marketData[1].customization["durability"];
							offerCustomiz2_2 = marketData[1].customization["wellness"];
							offerCustomiz2_3 = marketData[1].customization["area-of-effect"];
							
							offerCustomiz3_1 = marketData[2].customization["durability"];
							offerCustomiz3_2 = marketData[2].customization["wellness"];
							offerCustomiz3_3 = marketData[2].customization["area-of-effect"];
						} else if(industry == 5) {
							offerCustomiz1_1 = marketData[0].customization["durability"];
							offerCustomiz1_2 = marketData[0].customization["defense"];
							offerCustomiz1_3 = marketData[0].customization["area-of-effect"];
							
							offerCustomiz2_1 = marketData[1].customization["durability"];
							offerCustomiz2_2 = marketData[1].customization["defense"];
							offerCustomiz2_3 = marketData[1].customization["area-of-effect"];
							
							offerCustomiz3_1 = marketData[2].customization["durability"];
							offerCustomiz3_2 = marketData[2].customization["defense"];
							offerCustomiz3_3 = marketData[2].customization["area-of-effect"];
						} else if(industry >= 6 && industry <= 9) {
							offerCustomiz1_1 = marketData[0].customization["damage"];
							offerCustomiz1_2 = marketData[0].customization["attack"];
							offerCustomiz1_3 = marketData[0].customization["defense"];
							offerCustomiz1_4 = marketData[0].customization["durability"];
							
							offerCustomiz2_1 = marketData[1].customization["damage"];
							offerCustomiz2_2 = marketData[1].customization["attack"];
							offerCustomiz2_3 = marketData[1].customization["defense"];
							offerCustomiz2_4 = marketData[1].customization["durability"];
							
							offerCustomiz3_1 = marketData[2].customization["damage"];
							offerCustomiz3_2 = marketData[2].customization["attack"];
							offerCustomiz3_3 = marketData[2].customization["defense"];
							offerCustomiz3_4 = marketData[2].customization["durability"];
						} else if(industry > 9) {
							offerCustomiz1_1 = "/";
							
							offerCustomiz2_1 = "/";
							
							offerCustomiz3_1 = "/";
						}
					} else if (marketData.length == 4) {
						marPrice1 = parseFloat(marketData[0].price).toFixed(2)
						marPrice1Gold = parseFloat(marketData[0].price) * parseFloat(exRate)
						marPrice1Tax = parseFloat(marketData[0].price) + (parseFloat(marketData[0].price) * parseFloat(taxRate))
						marPrice1TaxGold = marPrice1Tax * parseFloat(exRate)
						
						marPrice2 = parseFloat(marketData[1].price).toFixed(2)
						marPrice2Gold = parseFloat(marketData[1].price) * parseFloat(exRate)
						marPrice2Tax = parseFloat(marketData[1].price) + (parseFloat(marketData[1].price) * parseFloat(taxRate))
						marPrice2TaxGold = marPrice2Tax * parseFloat(exRate)
						
						marPrice3 = parseFloat(marketData[2].price).toFixed(2)
						marPrice3Gold = parseFloat(marketData[2].price) * parseFloat(exRate)
						marPrice3Tax = parseFloat(marketData[2].price) + (parseFloat(marketData[2].price) * parseFloat(taxRate))
						marPrice3TaxGold = marPrice3Tax * parseFloat(exRate)
						
						marPrice4 = parseFloat(marketData[3].price).toFixed(2)
						marPrice4Gold = parseFloat(marketData[3].price) * parseFloat(exRate)
						marPrice4Tax = parseFloat(marketData[3].price) + (parseFloat(marketData[3].price) * parseFloat(taxRate))
						marPrice4TaxGold = marPrice4Tax * parseFloat(exRate)
						
						if(industry == 1) {
							offerCustomiz1_1 = marketData[0].customization["wellness"];
							offerCustomiz1_2 = marketData[0].customization["happiness"];
							
							offerCustomiz2_1 = marketData[1].customization["wellness"];
							offerCustomiz2_2 = marketData[1].customization["happiness"];
							
							offerCustomiz3_1 = marketData[2].customization["wellness"];
							offerCustomiz3_2 = marketData[2].customization["happiness"];
							
							offerCustomiz4_1 = marketData[3].customization["wellness"];
							offerCustomiz4_2 = marketData[3].customization["happiness"];
						} else if(industry == 2) {
							offerCustomiz1_1 = marketData[0].customization["wellness"];
							offerCustomiz1_2 = marketData[0].customization["happiness"];
							offerCustomiz1_3 = marketData[0].customization["moving-distance"];
							
							offerCustomiz2_1 = marketData[1].customization["wellness"];
							offerCustomiz2_2 = marketData[1].customization["happiness"];
							offerCustomiz2_3 = marketData[1].customization["moving-distance"];
							
							offerCustomiz3_1 = marketData[2].customization["wellness"];
							offerCustomiz3_2 = marketData[2].customization["happiness"];
							offerCustomiz3_3 = marketData[2].customization["moving-distance"];
							
							offerCustomiz4_1 = marketData[3].customization["wellness"];
							offerCustomiz4_2 = marketData[3].customization["happiness"];
							offerCustomiz4_3 = marketData[3].customization["moving-distance"];
						} else if(industry == 3) {
							offerCustomiz1_1 = marketData[0].customization["wellness"];
							offerCustomiz1_2 = marketData[0].customization["happiness"];
							offerCustomiz1_3 = marketData[0].customization["durability"];
							
							offerCustomiz2_1 = marketData[1].customization["wellness"];
							offerCustomiz2_2 = marketData[1].customization["happiness"];
							offerCustomiz2_3 = marketData[1].customization["durability"];
							
							offerCustomiz3_1 = marketData[2].customization["wellness"];
							offerCustomiz3_2 = marketData[2].customization["happiness"];
							offerCustomiz3_3 = marketData[2].customization["durability"];
							
							offerCustomiz4_1 = marketData[3].customization["wellness"];
							offerCustomiz4_2 = marketData[3].customization["happiness"];
							offerCustomiz4_3 = marketData[3].customization["durability"];
						} else if(industry == 4) {
							offerCustomiz1_1 = marketData[0].customization["durability"];
							offerCustomiz1_2 = marketData[0].customization["wellness"];
							offerCustomiz1_3 = marketData[0].customization["area-of-effect"];
							
							offerCustomiz2_1 = marketData[1].customization["durability"];
							offerCustomiz2_2 = marketData[1].customization["wellness"];
							offerCustomiz2_3 = marketData[1].customization["area-of-effect"];
							
							offerCustomiz3_1 = marketData[2].customization["durability"];
							offerCustomiz3_2 = marketData[2].customization["wellness"];
							offerCustomiz3_3 = marketData[2].customization["area-of-effect"];
							
							offerCustomiz4_1 = marketData[3].customization["durability"];
							offerCustomiz4_2 = marketData[3].customization["wellness"];
							offerCustomiz4_3 = marketData[3].customization["area-of-effect"];
						} else if(industry == 5) {
							offerCustomiz1_1 = marketData[0].customization["durability"];
							offerCustomiz1_2 = marketData[0].customization["defense"];
							offerCustomiz1_3 = marketData[0].customization["area-of-effect"];
							
							offerCustomiz2_1 = marketData[1].customization["durability"];
							offerCustomiz2_2 = marketData[1].customization["defense"];
							offerCustomiz2_3 = marketData[1].customization["area-of-effect"];
							
							offerCustomiz3_1 = marketData[2].customization["durability"];
							offerCustomiz3_2 = marketData[2].customization["defense"];
							offerCustomiz3_3 = marketData[2].customization["area-of-effect"];
							
							offerCustomiz4_1 = marketData[3].customization["durability"];
							offerCustomiz4_2 = marketData[3].customization["defense"];
							offerCustomiz4_3 = marketData[3].customization["area-of-effect"];
						} else if(industry >= 6 && industry <= 9) {
							offerCustomiz1_1 = marketData[0].customization["damage"];
							offerCustomiz1_2 = marketData[0].customization["attack"];
							offerCustomiz1_3 = marketData[0].customization["defense"];
							offerCustomiz1_4 = marketData[0].customization["durability"];
							
							offerCustomiz2_1 = marketData[1].customization["damage"];
							offerCustomiz2_2 = marketData[1].customization["attack"];
							offerCustomiz2_3 = marketData[1].customization["defense"];
							offerCustomiz2_4 = marketData[1].customization["durability"];
							
							offerCustomiz3_1 = marketData[2].customization["damage"];
							offerCustomiz3_2 = marketData[2].customization["attack"];
							offerCustomiz3_3 = marketData[2].customization["defense"];
							offerCustomiz3_4 = marketData[2].customization["durability"];
							
							offerCustomiz4_1 = marketData[3].customization["damage"];
							offerCustomiz4_2 = marketData[3].customization["attack"];
							offerCustomiz4_3 = marketData[3].customization["defense"];
							offerCustomiz4_4 = marketData[3].customization["durability"];
						} else if(industry > 9) {
							offerCustomiz1_1 = "/";
							
							offerCustomiz2_1 = "/";
							
							offerCustomiz3_1 = "/";
							
							offerCustomiz4_1 = "/";
						}
					} else if (marketData.length > 4) {
						marPrice1 = parseFloat(marketData[0].price).toFixed(2)
						marPrice1Gold = parseFloat(marketData[0].price) * parseFloat(exRate)
						marPrice1Tax = parseFloat(marketData[0].price) + (parseFloat(marketData[0].price) * parseFloat(taxRate))
						marPrice1TaxGold = marPrice1Tax * parseFloat(exRate)
						
						marPrice2 = parseFloat(marketData[1].price).toFixed(2)
						marPrice2Gold = parseFloat(marketData[1].price) * parseFloat(exRate)
						marPrice2Tax = parseFloat(marketData[1].price) + (parseFloat(marketData[1].price) * parseFloat(taxRate))
						marPrice2TaxGold = marPrice2Tax * parseFloat(exRate)
						
						marPrice3 = parseFloat(marketData[2].price).toFixed(2)
						marPrice3Gold = parseFloat(marketData[2].price) * parseFloat(exRate)
						marPrice3Tax = parseFloat(marketData[2].price) + (parseFloat(marketData[2].price) * parseFloat(taxRate))
						marPrice3TaxGold = marPrice3Tax * parseFloat(exRate)
						
						marPrice4 = parseFloat(marketData[3].price).toFixed(2)
						marPrice4Gold = parseFloat(marketData[3].price) * parseFloat(exRate)
						marPrice4Tax = parseFloat(marketData[3].price) + (parseFloat(marketData[3].price) * parseFloat(taxRate))
						marPrice4TaxGold = marPrice4Tax * parseFloat(exRate)
						
						marPrice5 = parseFloat(marketData[4].price).toFixed(2)
						marPrice5Gold = parseFloat(marketData[4].price) * parseFloat(exRate)
						marPrice5Tax = parseFloat(marketData[4].price) + (parseFloat(marketData[4].price) * parseFloat(taxRate))
						marPrice5TaxGold = marPrice5Tax * parseFloat(exRate)
						
						if(industry == 1) {
							offerCustomiz1_1 = marketData[0].customization["wellness"];
							offerCustomiz1_2 = marketData[0].customization["happiness"];
							
							offerCustomiz2_1 = marketData[1].customization["wellness"];
							offerCustomiz2_2 = marketData[1].customization["happiness"];
							
							offerCustomiz3_1 = marketData[2].customization["wellness"];
							offerCustomiz3_2 = marketData[2].customization["happiness"];
							
							offerCustomiz4_1 = marketData[3].customization["wellness"];
							offerCustomiz4_2 = marketData[3].customization["happiness"];
							
							offerCustomiz5_1 = marketData[4].customization["wellness"];
							offerCustomiz5_2 = marketData[4].customization["happiness"];
						} else if(industry == 2) {
							offerCustomiz1_1 = marketData[0].customization["wellness"];
							offerCustomiz1_2 = marketData[0].customization["happiness"];
							offerCustomiz1_3 = marketData[0].customization["moving-distance"];
							
							offerCustomiz2_1 = marketData[1].customization["wellness"];
							offerCustomiz2_2 = marketData[1].customization["happiness"];
							offerCustomiz2_3 = marketData[1].customization["moving-distance"];
							
							offerCustomiz3_1 = marketData[2].customization["wellness"];
							offerCustomiz3_2 = marketData[2].customization["happiness"];
							offerCustomiz3_3 = marketData[2].customization["moving-distance"];
							
							offerCustomiz4_1 = marketData[3].customization["wellness"];
							offerCustomiz4_2 = marketData[3].customization["happiness"];
							offerCustomiz4_3 = marketData[3].customization["moving-distance"];
							
							offerCustomiz5_1 = marketData[4].customization["wellness"];
							offerCustomiz5_2 = marketData[4].customization["happiness"];
							offerCustomiz5_3 = marketData[4].customization["moving-distance"];
						} else if(industry == 3) {
							offerCustomiz1_1 = marketData[0].customization["wellness"];
							offerCustomiz1_2 = marketData[0].customization["happiness"];
							offerCustomiz1_3 = marketData[0].customization["durability"];
							
							offerCustomiz2_1 = marketData[1].customization["wellness"];
							offerCustomiz2_2 = marketData[1].customization["happiness"];
							offerCustomiz2_3 = marketData[1].customization["durability"];
							
							offerCustomiz3_1 = marketData[2].customization["wellness"];
							offerCustomiz3_2 = marketData[2].customization["happiness"];
							offerCustomiz3_3 = marketData[2].customization["durability"];
							
							offerCustomiz4_1 = marketData[3].customization["wellness"];
							offerCustomiz4_2 = marketData[3].customization["happiness"];
							offerCustomiz4_3 = marketData[3].customization["durability"];
							
							offerCustomiz5_1 = marketData[4].customization["wellness"];
							offerCustomiz5_2 = marketData[4].customization["happiness"];
							offerCustomiz5_3 = marketData[4].customization["durability"];
						} else if(industry == 4) {
							offerCustomiz1_1 = marketData[0].customization["durability"];
							offerCustomiz1_2 = marketData[0].customization["wellness"];
							offerCustomiz1_3 = marketData[0].customization["area-of-effect"];
							
							offerCustomiz2_1 = marketData[1].customization["durability"];
							offerCustomiz2_2 = marketData[1].customization["wellness"];
							offerCustomiz2_3 = marketData[1].customization["area-of-effect"];
							
							offerCustomiz3_1 = marketData[2].customization["durability"];
							offerCustomiz3_2 = marketData[2].customization["wellness"];
							offerCustomiz3_3 = marketData[2].customization["area-of-effect"];
							
							offerCustomiz4_1 = marketData[3].customization["durability"];

							offerCustomiz4_2 = marketData[3].customization["wellness"];
							offerCustomiz4_3 = marketData[3].customization["area-of-effect"];
							
							offerCustomiz5_1 = marketData[4].customization["durability"];
							offerCustomiz5_2 = marketData[4].customization["wellness"];
							offerCustomiz5_3 = marketData[4].customization["area-of-effect"];
						} else if(industry == 5) {
							offerCustomiz1_1 = marketData[0].customization["durability"];
							offerCustomiz1_2 = marketData[0].customization["defense"];
							offerCustomiz1_3 = marketData[0].customization["area-of-effect"];
							
							offerCustomiz2_1 = marketData[1].customization["durability"];
							offerCustomiz2_2 = marketData[1].customization["defense"];
							offerCustomiz2_3 = marketData[1].customization["area-of-effect"];
							
							offerCustomiz3_1 = marketData[2].customization["durability"];
							offerCustomiz3_2 = marketData[2].customization["defense"];
							offerCustomiz3_3 = marketData[2].customization["area-of-effect"];
							
							offerCustomiz4_1 = marketData[3].customization["durability"];
							offerCustomiz4_2 = marketData[3].customization["defense"];
							offerCustomiz4_3 = marketData[3].customization["area-of-effect"];
							
							offerCustomiz5_1 = marketData[4].customization["durability"];
							offerCustomiz5_2 = marketData[4].customization["defense"];
							offerCustomiz5_3 = marketData[4].customization["area-of-effect"];
						} else if(industry >= 6 && industry <= 9) {
							offerCustomiz1_1 = marketData[0].customization["damage"];
							offerCustomiz1_2 = marketData[0].customization["attack"];
							offerCustomiz1_3 = marketData[0].customization["defense"];
							offerCustomiz1_4 = marketData[0].customization["durability"];
							
							offerCustomiz2_1 = marketData[1].customization["damage"];
							offerCustomiz2_2 = marketData[1].customization["attack"];
							offerCustomiz2_3 = marketData[1].customization["defense"];
							offerCustomiz2_4 = marketData[1].customization["durability"];
							
							offerCustomiz3_1 = marketData[2].customization["damage"];
							offerCustomiz3_2 = marketData[2].customization["attack"];
							offerCustomiz3_3 = marketData[2].customization["defense"];
							offerCustomiz3_4 = marketData[2].customization["durability"];
							
							offerCustomiz4_1 = marketData[3].customization["damage"];
							offerCustomiz4_2 = marketData[3].customization["attack"];
							offerCustomiz4_3 = marketData[3].customization["defense"];
							offerCustomiz4_4 = marketData[3].customization["durability"];
							
							offerCustomiz5_1 = marketData[4].customization["damage"];
							offerCustomiz5_2 = marketData[4].customization["attack"];
							offerCustomiz5_3 = marketData[4].customization["defense"];
							offerCustomiz5_4 = marketData[4].customization["durability"];
						} else if(industry > 9) {
							offerCustomiz1_1 = "/";
							
							offerCustomiz2_1 = "/";
							
							offerCustomiz3_1 = "/";
							
							offerCustomiz4_1 = "/";
							
							offerCustomiz5_1 = "/";
						}
					}
					
					if($('#marketOffers').find('.mo_market .ml_flag[title*="' + cCountr + '"]').eq(0).parent().parent().attr('class') != 'dotted embargo') {
						if(industry == 1) {
							if (marketData.length == 0) {
								$('#ecm_rowId_' + country_id[cCountr.toLowerCase()]).css('background', 'url(http://www.erepublik.com/images/modules/company/dotted_bg.png) repeat-x left -1px #f2f2f2');
								$('#ecm_rowId_' + country_id[cCountr.toLowerCase()]).html('<td class="c_market" style="text-align: center; width: 60px;"><a href="http://economy.erepublik.com/' + document.language + '/market/' + country_id[cCountr.toLowerCase()] + '/' + industry + '/' + eRAcomp[cId].customization['1'] + '/' + eRAcomp[cId].customization['2'] + '/' + eRAcomp[cId].customization['3'] + '/' + eRAcomp[cId].customization['4'] + '"><img width="22" height="16" title="' + cCountr + '" src="http://www.erepublik.com/images/flags/M/' + cCountr + '.gif" alt="' + cCountr + '"></a></td><td colspan="6" class="c_customization" style="padding-left: 15px;"><strong style="font-style: italic; font-weight: normal;">There are no offers available on the market.</strong></td>');
							} else {
								$('#ecm_rowId_' + country_id[cCountr.toLowerCase()]).html('<td class="c_market" style="text-align: center; width: 60px;"><a href="http://economy.erepublik.com/' + document.language + '/market/' + country_id[cCountr.toLowerCase()] + '/' + industry + '/' + eRAcomp[cId].customization['1'] + '/' + eRAcomp[cId].customization['2'] + '/' + eRAcomp[cId].customization['3'] + '/' + eRAcomp[cId].customization['4'] + '"><img width="22" height="16" title="' + cCountr + '" src="http://www.erepublik.com/images/flags/M/' + cCountr + '.gif" alt="' + cCountr + '"></a></td><td class="c_taxvalue" style="text-align: center; width: 30px;"><strong>' + parseFloat(taxRate) * 100 + '%</strong></td><td class="c_customization" style="padding-left: 15px; width: 100px;"><strong>' + offerCustomiz1_1 + '/' + offerCustomiz1_2 + '</strong></td><td class="c_quantity" style="padding-left: 15px; width: 80px;"><strong>' + marketData[0].amount + '</strong></td><td class="c_price" style="padding-left: 15px; width: 100px;"><strong>' + mathRound(marPrice1, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice1Gold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_tax" style="padding-left: 15px;"><strong>' + mathRound(marPrice1Tax, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice1TaxGold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_arrow" style="text-align: center; width: 30px;"><a id="c_market_arrow_' + country_id[cCountr.toLowerCase()] + '" href="javascript:;"><img id="market_arrowImgDown_' + country_id[cCountr.toLowerCase()] + '" src="' + arrowDown + '" style="display: inline;"><img id="market_arrowImgUp_' + country_id[cCountr.toLowerCase()] + '" src="' + arrowUp + '" style="display: none;"></a></td>');
							}
							if (marketData.length == 1) {
								$('#ecm_rowId_' + country_id[cCountr.toLowerCase()] + '_hidden').html('<td colspan="7" class="c_hidden"><div style="display: none; height: 0px; overflow: hidden;">&nbsp;</div></td>');
							} else if (marketData.length == 2) {
								$('#ecm_rowId_' + country_id[cCountr.toLowerCase()] + '_hidden').html('<td colspan="7" class="c_hidden"><div style="display: none; height: 0px; overflow: hidden;"><table style="display: table; width: 100%;"><tr><td class="c_market" style="text-align: center; width: 60px;">&nbsp;</td><td class="c_taxvalue" style="padding-left: 15px; width: 30px;">&nbsp;</td><td class="c_customization" style="padding-left: 15px; width: 100px;"><strong>' + offerCustomiz2_1 + '/' + offerCustomiz2_2 + '</strong></td><td class="c_quantity" style="padding-left: 15px; width: 80px;"><strong>' + marketData[1].amount + '</strong></td><td class="c_price" style="padding-left: 15px; width: 100px;"><strong>' + mathRound(marPrice2, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice2Gold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_tax" style="padding-left: 15px;"><strong>' + mathRound(marPrice2Tax, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice2TaxGold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_arrow" style="text-align: center; width: 30px;">&nbsp;</td></tr></table></div></td>');
							} else if (marketData.length == 3) {
								$('#ecm_rowId_' + country_id[cCountr.toLowerCase()] + '_hidden').html('<td colspan="7" class="c_hidden"><div style="display: none; height: 0px; overflow: hidden;"><table style="display: table; width: 100%;"><tr><td class="c_market" style="text-align: center; width: 60px;">&nbsp;</td><td class="c_taxvalue" style="padding-left: 15px; width: 30px;">&nbsp;</td><td class="c_customization" style="padding-left: 15px; width: 100px;"><strong>' + offerCustomiz2_1 + '/' + offerCustomiz2_2 + '</strong></td><td class="c_quantity" style="padding-left: 15px; width: 80px;"><strong>' + marketData[1].amount + '</strong></td><td class="c_price" style="padding-left: 15px; width: 100px;"><strong>' + mathRound(marPrice2, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice2Gold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_tax" style="padding-left: 15px;"><strong>' + mathRound(marPrice2Tax, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice2TaxGold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_arrow" style="text-align: center; width: 30px;">&nbsp;</td></tr><tr><td class="c_market" style="text-align: center; width: 60px;">&nbsp;</td><td class="c_taxvalue" style="padding-left: 15px; width: 30px;">&nbsp;</td><td class="c_customization" style="padding-left: 15px; width: 100px;"><strong>' + offerCustomiz3_1 + '/' + offerCustomiz3_2 + '</strong></td><td class="c_quantity" style="padding-left: 15px; width: 80px;"><strong>' + marketData[2].amount + '</strong></td><td class="c_price" style="padding-left: 15px; width: 100px;"><strong>' + mathRound(marPrice3, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice3Gold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_tax" style="padding-left: 15px;"><strong>' + mathRound(marPrice3Tax, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice3TaxGold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_arrow" style="text-align: center; width: 30px;">&nbsp;</td></tr></table></div></td>');
							} else if (marketData.length == 4) {
								$('#ecm_rowId_' + country_id[cCountr.toLowerCase()] + '_hidden').html('<td colspan="7" class="c_hidden"><div style="display: none; height: 0px; overflow: hidden;"><table style="display: table; width: 100%;"><tr><td class="c_market" style="text-align: center; width: 60px;">&nbsp;</td><td class="c_taxvalue" style="padding-left: 15px; width: 30px;">&nbsp;</td><td class="c_customization" style="padding-left: 15px; width: 100px;"><strong>' + offerCustomiz2_1 + '/' + offerCustomiz2_2 + '</strong></td><td class="c_quantity" style="padding-left: 15px; width: 80px;"><strong>' + marketData[1].amount + '</strong></td><td class="c_price" style="padding-left: 15px; width: 100px;"><strong>' + mathRound(marPrice2, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice2Gold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_tax" style="padding-left: 15px;"><strong>' + mathRound(marPrice2Tax, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice2TaxGold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_arrow" style="text-align: center; width: 30px;">&nbsp;</td></tr><tr><td class="c_market" style="text-align: center; width: 60px;">&nbsp;</td><td class="c_taxvalue" style="padding-left: 15px; width: 30px;">&nbsp;</td><td class="c_customization" style="padding-left: 15px; width: 100px;"><strong>' + offerCustomiz3_1 + '/' + offerCustomiz3_2 + '</strong></td><td class="c_quantity" style="padding-left: 15px; width: 80px;"><strong>' + marketData[2].amount + '</strong></td><td class="c_price" style="padding-left: 15px; width: 100px;"><strong>' + mathRound(marPrice3, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice3Gold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_tax" style="padding-left: 15px;"><strong>' + mathRound(marPrice3Tax, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice3TaxGold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_arrow" style="text-align: center; width: 30px;">&nbsp;</td></tr><tr><td class="c_market" style="text-align: center; width: 60px;">&nbsp;</td><td class="c_taxvalue" style="padding-left: 15px; width: 30px;">&nbsp;</td><td class="c_customization" style="padding-left: 15px; width: 100px;"><strong>' + offerCustomiz4_1 + '/' + offerCustomiz4_2 + '</strong></td><td class="c_quantity" style="padding-left: 15px; width: 80px;"><strong>' + marketData[3].amount + '</strong></td><td class="c_price" style="padding-left: 15px; width: 100px;"><strong>' + mathRound(marPrice4, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice4Gold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_tax" style="padding-left: 15px;"><strong>' + mathRound(marPrice4Tax, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice4TaxGold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_arrow" style="text-align: center; width: 30px;">&nbsp;</td></tr></table></div></td>');
							} else if (marketData.length > 4) {
								$('#ecm_rowId_' + country_id[cCountr.toLowerCase()] + '_hidden').html('<td colspan="7" class="c_hidden"><div style="display: none; height: 0px; overflow: hidden;"><table style="display: table; width: 100%;"><tr><td class="c_market" style="text-align: center; width: 60px;">&nbsp;</td><td class="c_taxvalue" style="padding-left: 15px; width: 30px;">&nbsp;</td><td class="c_customization" style="padding-left: 15px; width: 100px;"><strong>' + offerCustomiz2_1 + '/' + offerCustomiz2_2 + '</strong></td><td class="c_quantity" style="padding-left: 15px; width: 80px;"><strong>' + marketData[1].amount + '</strong></td><td class="c_price" style="padding-left: 15px; width: 100px;"><strong>' + mathRound(marPrice2, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice2Gold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_tax" style="padding-left: 15px;"><strong>' + mathRound(marPrice2Tax, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice2TaxGold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_arrow" style="text-align: center; width: 30px;">&nbsp;</td></tr><tr><td class="c_market" style="text-align: center; width: 60px;">&nbsp;</td><td class="c_taxvalue" style="padding-left: 15px; width: 30px;">&nbsp;</td><td class="c_customization" style="padding-left: 15px; width: 100px;"><strong>' + offerCustomiz3_1 + '/' + offerCustomiz3_2 + '</strong></td><td class="c_quantity" style="padding-left: 15px; width: 80px;"><strong>' + marketData[2].amount + '</strong></td><td class="c_price" style="padding-left: 15px; width: 100px;"><strong>' + mathRound(marPrice3, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice3Gold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_tax" style="padding-left: 15px;"><strong>' + mathRound(marPrice3Tax, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice3TaxGold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_arrow" style="text-align: center; width: 30px;">&nbsp;</td></tr><tr><td class="c_market" style="text-align: center; width: 60px;">&nbsp;</td><td class="c_taxvalue" style="padding-left: 15px; width: 30px;">&nbsp;</td><td class="c_customization" style="padding-left: 15px; width: 100px;"><strong>' + offerCustomiz4_1 + '/' + offerCustomiz4_2 + '</strong></td><td class="c_quantity" style="padding-left: 15px; width: 80px;"><strong>' + marketData[3].amount + '</strong></td><td class="c_price" style="padding-left: 15px; width: 100px;"><strong>' + mathRound(marPrice4, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice4Gold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_tax" style="padding-left: 15px;"><strong>' + mathRound(marPrice4Tax, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice4TaxGold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_arrow" style="text-align: center; width: 30px;">&nbsp;</td></tr><tr><td class="c_market" style="text-align: center; width: 60px;">&nbsp;</td><td class="c_taxvalue" style="padding-left: 15px; width: 30px;">&nbsp;</td><td class="c_customization" style="padding-left: 15px; width: 100px;"><strong>' + offerCustomiz5_1 + '/' + offerCustomiz5_2 + '</strong></td><td class="c_quantity" style="padding-left: 15px; width: 80px;"><strong>' + marketData[4].amount + '</strong></td><td class="c_price" style="padding-left: 15px; width: 100px;"><strong>' + mathRound(marPrice5, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice5Gold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_tax" style="padding-left: 15px;"><strong>' + mathRound(marPrice5Tax, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice5TaxGold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_arrow" style="text-align: center; width: 30px;">&nbsp;</td></tr></table></div></td>');
							}
						} else if(industry >= 2 && industry <= 5) {
							if (marketData.length == 0) {
								$('#ecm_rowId_' + country_id[cCountr.toLowerCase()]).css('background', 'url(http://www.erepublik.com/images/modules/company/dotted_bg.png) repeat-x left -1px #f2f2f2');
								$('#ecm_rowId_' + country_id[cCountr.toLowerCase()]).html('<td class="c_market" style="text-align: center; width: 60px;"><a href="http://economy.erepublik.com/' + document.language + '/market/' + country_id[cCountr.toLowerCase()] + '/' + industry + '/' + eRAcomp[cId].customization['1'] + '/' + eRAcomp[cId].customization['2'] + '/' + eRAcomp[cId].customization['3'] + '/' + eRAcomp[cId].customization['4'] + '"><img width="22" height="16" title="' + cCountr + '" src="http://www.erepublik.com/images/flags/M/' + cCountr + '.gif" alt="' + cCountr + '"></a></td><td colspan="6" class="c_customization" style="padding-left: 15px;"><strong style="font-style: italic; font-weight: normal;">There are no offers available on the market.</strong></td>');
							} else {
								$('#ecm_rowId_' + country_id[cCountr.toLowerCase()]).html('<td class="c_market" style="text-align: center; width: 60px;"><a href="http://economy.erepublik.com/' + document.language + '/market/' + country_id[cCountr.toLowerCase()] + '/' + industry + '/' + eRAcomp[cId].customization['1'] + '/' + eRAcomp[cId].customization['2'] + '/' + eRAcomp[cId].customization['3'] + '/' + eRAcomp[cId].customization['4'] + '"><img width="22" height="16" title="' + cCountr + '" src="http://www.erepublik.com/images/flags/M/' + cCountr + '.gif" alt="' + cCountr + '"></a></td><td class="c_taxvalue" style="text-align: center; width: 30px;"><strong>' + parseFloat(taxRate) * 100 + '%</strong></td><td class="c_customization" style="padding-left: 15px; width: 100px;"><strong>' + offerCustomiz1_1 + '/' + offerCustomiz1_2 + '/' + offerCustomiz1_3 + '</strong></td><td class="c_quantity" style="padding-left: 15px; width: 80px;"><strong>' + marketData[0].amount + '</strong></td><td class="c_price" style="padding-left: 15px; width: 100px;"><strong>' + mathRound(marPrice1, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice1Gold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_tax" style="padding-left: 15px;"><strong>' + mathRound(marPrice1Tax, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice1TaxGold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_arrow" style="text-align: center; width: 30px;"><a id="c_market_arrow_' + country_id[cCountr.toLowerCase()] + '" href="javascript:;"><img id="market_arrowImgDown_' + country_id[cCountr.toLowerCase()] + '" src="' + arrowDown + '" style="display: inline;"><img id="market_arrowImgUp_' + country_id[cCountr.toLowerCase()] + '" src="' + arrowUp + '" style="display: none;"></a></td>');
							}
							if (marketData.length == 1) {
								$('#ecm_rowId_' + country_id[cCountr.toLowerCase()] + '_hidden').html('<td colspan="7" class="c_hidden"><div style="display: none; height: 0px; overflow: hidden;">&nbsp;</div></td>');
							} else if (marketData.length == 2) {
								$('#ecm_rowId_' + country_id[cCountr.toLowerCase()] + '_hidden').html('<td colspan="7" class="c_hidden"><div style="display: none; height: 0px; overflow: hidden;"><table style="display: table; width: 100%;"><tr><td class="c_market" style="text-align: center; width: 60px;">&nbsp;</td><td class="c_taxvalue" style="padding-left: 15px; width: 30px;">&nbsp;</td><td class="c_customization" style="padding-left: 15px; width: 100px;"><strong>' + offerCustomiz2_1 + '/' + offerCustomiz2_2 + '/' + offerCustomiz2_3 + '</strong></td><td class="c_quantity" style="padding-left: 15px; width: 80px;"><strong>' + marketData[1].amount + '</strong></td><td class="c_price" style="padding-left: 15px; width: 100px;"><strong>' + mathRound(marPrice2, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice2Gold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_tax" style="padding-left: 15px;"><strong>' + mathRound(marPrice2Tax, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice2TaxGold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_arrow" style="text-align: center; width: 30px;">&nbsp;</td></tr></table></div></td>');
							} else if (marketData.length == 3) {
								$('#ecm_rowId_' + country_id[cCountr.toLowerCase()] + '_hidden').html('<td colspan="7" class="c_hidden"><div style="display: none; height: 0px; overflow: hidden;"><table style="display: table; width: 100%;"><tr><td class="c_market" style="text-align: center; width: 60px;">&nbsp;</td><td class="c_taxvalue" style="padding-left: 15px; width: 30px;">&nbsp;</td><td class="c_customization" style="padding-left: 15px; width: 100px;"><strong>' + offerCustomiz2_1 + '/' + offerCustomiz2_2 + '/' + offerCustomiz2_3 + '</strong></td><td class="c_quantity" style="padding-left: 15px; width: 80px;"><strong>' + marketData[1].amount + '</strong></td><td class="c_price" style="padding-left: 15px; width: 100px;"><strong>' + mathRound(marPrice2, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice2Gold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_tax" style="padding-left: 15px;"><strong>' + mathRound(marPrice2Tax, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice2TaxGold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_arrow" style="text-align: center; width: 30px;">&nbsp;</td></tr><tr><td class="c_market" style="text-align: center; width: 60px;">&nbsp;</td><td class="c_taxvalue" style="padding-left: 15px; width: 30px;">&nbsp;</td><td class="c_customization" style="padding-left: 15px; width: 100px;"><strong>' + offerCustomiz3_1 + '/' + offerCustomiz3_2 + '/' + offerCustomiz3_3 + '</strong></td><td class="c_quantity" style="padding-left: 15px; width: 80px;"><strong>' + marketData[2].amount + '</strong></td><td class="c_price" style="padding-left: 15px; width: 100px;"><strong>' + mathRound(marPrice3, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice3Gold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_tax" style="padding-left: 15px;"><strong>' + mathRound(marPrice3Tax, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice3TaxGold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_arrow" style="text-align: center; width: 30px;">&nbsp;</td></tr></table></div></td>');
							} else if (marketData.length == 4) {
								$('#ecm_rowId_' + country_id[cCountr.toLowerCase()] + '_hidden').html('<td colspan="7" class="c_hidden"><div style="display: none; height: 0px; overflow: hidden;"><table style="display: table; width: 100%;"><tr><td class="c_market" style="text-align: center; width: 60px;">&nbsp;</td><td class="c_taxvalue" style="padding-left: 15px; width: 30px;">&nbsp;</td><td class="c_customization" style="padding-left: 15px; width: 100px;"><strong>' + offerCustomiz2_1 + '/' + offerCustomiz2_2 + '/' + offerCustomiz2_3 + '</strong></td><td class="c_quantity" style="padding-left: 15px; width: 80px;"><strong>' + marketData[1].amount + '</strong></td><td class="c_price" style="padding-left: 15px; width: 100px;"><strong>' + mathRound(marPrice2, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice2Gold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_tax" style="padding-left: 15px;"><strong>' + mathRound(marPrice2Tax, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice2TaxGold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_arrow" style="text-align: center; width: 30px;">&nbsp;</td></tr><tr><td class="c_market" style="text-align: center; width: 60px;">&nbsp;</td><td class="c_taxvalue" style="padding-left: 15px; width: 30px;">&nbsp;</td><td class="c_customization" style="padding-left: 15px; width: 100px;"><strong>' + offerCustomiz3_1 + '/' + offerCustomiz3_2 + '/' + offerCustomiz3_3 + '</strong></td><td class="c_quantity" style="padding-left: 15px; width: 80px;"><strong>' + marketData[2].amount + '</strong></td><td class="c_price" style="padding-left: 15px; width: 100px;"><strong>' + mathRound(marPrice3, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice3Gold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_tax" style="padding-left: 15px;"><strong>' + mathRound(marPrice3Tax, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice3TaxGold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_arrow" style="text-align: center; width: 30px;">&nbsp;</td></tr><tr><td class="c_market" style="text-align: center; width: 60px;">&nbsp;</td><td class="c_taxvalue" style="padding-left: 15px; width: 30px;">&nbsp;</td><td class="c_customization" style="padding-left: 15px; width: 100px;"><strong>' + offerCustomiz4_1 + '/' + offerCustomiz4_2 + '/' + offerCustomiz4_3 + '</strong></td><td class="c_quantity" style="padding-left: 15px; width: 80px;"><strong>' + marketData[3].amount + '</strong></td><td class="c_price" style="padding-left: 15px; width: 100px;"><strong>' + mathRound(marPrice4, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice4Gold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_tax" style="padding-left: 15px;"><strong>' + mathRound(marPrice4Tax, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice4TaxGold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_arrow" style="text-align: center; width: 30px;">&nbsp;</td></tr></table></div></td>');
							} else if (marketData.length > 4) {
								$('#ecm_rowId_' + country_id[cCountr.toLowerCase()] + '_hidden').html('<td colspan="7" class="c_hidden"><div style="display: none; height: 0px; overflow: hidden;"><table style="display: table; width: 100%;"><tr><td class="c_market" style="text-align: center; width: 60px;">&nbsp;</td><td class="c_taxvalue" style="padding-left: 15px; width: 30px;">&nbsp;</td><td class="c_customization" style="padding-left: 15px; width: 100px;"><strong>' + offerCustomiz2_1 + '/' + offerCustomiz2_2 + '/' + offerCustomiz2_3 + '</strong></td><td class="c_quantity" style="padding-left: 15px; width: 80px;"><strong>' + marketData[1].amount + '</strong></td><td class="c_price" style="padding-left: 15px; width: 100px;"><strong>' + mathRound(marPrice2, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice2Gold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_tax" style="padding-left: 15px;"><strong>' + mathRound(marPrice2Tax, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice2TaxGold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_arrow" style="text-align: center; width: 30px;">&nbsp;</td></tr><tr><td class="c_market" style="text-align: center; width: 60px;">&nbsp;</td><td class="c_taxvalue" style="padding-left: 15px; width: 30px;">&nbsp;</td><td class="c_customization" style="padding-left: 15px; width: 100px;"><strong>' + offerCustomiz3_1 + '/' + offerCustomiz3_2 + '/' + offerCustomiz3_3 + '</strong></td><td class="c_quantity" style="padding-left: 15px; width: 80px;"><strong>' + marketData[2].amount + '</strong></td><td class="c_price" style="padding-left: 15px; width: 100px;"><strong>' + mathRound(marPrice3, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice3Gold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_tax" style="padding-left: 15px;"><strong>' + mathRound(marPrice3Tax, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice3TaxGold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_arrow" style="text-align: center; width: 30px;">&nbsp;</td></tr><tr><td class="c_market" style="text-align: center; width: 60px;">&nbsp;</td><td class="c_taxvalue" style="padding-left: 15px; width: 30px;">&nbsp;</td><td class="c_customization" style="padding-left: 15px; width: 100px;"><strong>' + offerCustomiz4_1 + '/' + offerCustomiz4_2 + '/' + offerCustomiz4_3 + '</strong></td><td class="c_quantity" style="padding-left: 15px; width: 80px;"><strong>' + marketData[3].amount + '</strong></td><td class="c_price" style="padding-left: 15px; width: 100px;"><strong>' + mathRound(marPrice4, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice4Gold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_tax" style="padding-left: 15px;"><strong>' + mathRound(marPrice4Tax, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice4TaxGold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_arrow" style="text-align: center; width: 30px;">&nbsp;</td></tr><tr><td class="c_market" style="text-align: center; width: 60px;">&nbsp;</td><td class="c_taxvalue" style="padding-left: 15px; width: 30px;">&nbsp;</td><td class="c_customization" style="padding-left: 15px; width: 100px;"><strong>' + offerCustomiz5_1 + '/' + offerCustomiz5_2 + '/' + offerCustomiz5_3 + '</strong></td><td class="c_quantity" style="padding-left: 15px; width: 80px;"><strong>' + marketData[4].amount + '</strong></td><td class="c_price" style="padding-left: 15px; width: 100px;"><strong>' + mathRound(marPrice5, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice5Gold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_tax" style="padding-left: 15px;"><strong>' + mathRound(marPrice5Tax, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice5TaxGold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_arrow" style="text-align: center; width: 30px;">&nbsp;</td></tr></table></div></td>');
							}
						} else if(industry >= 6 && industry <= 9) {
							if (marketData.length == 0) {
								$('#ecm_rowId_' + country_id[cCountr.toLowerCase()]).css('background', 'url(http://www.erepublik.com/images/modules/company/dotted_bg.png) repeat-x left -1px #f2f2f2');
								$('#ecm_rowId_' + country_id[cCountr.toLowerCase()]).html('<td class="c_market" style="text-align: center; width: 60px;"><a href="http://economy.erepublik.com/' + document.language + '/market/' + country_id[cCountr.toLowerCase()] + '/' + industry + '/' + eRAcomp[cId].customization['1'] + '/' + eRAcomp[cId].customization['2'] + '/' + eRAcomp[cId].customization['3'] + '/' + eRAcomp[cId].customization['4'] + '"><img width="22" height="16" title="' + cCountr + '" src="http://www.erepublik.com/images/flags/M/' + cCountr + '.gif" alt="' + cCountr + '"></a></td><td colspan="6" class="c_customization" style="padding-left: 15px;"><strong style="font-style: italic; font-weight: normal;">There are no offers available on the market.</strong></td>');
							} else {
								$('#ecm_rowId_' + country_id[cCountr.toLowerCase()]).html('<td class="c_market" style="text-align: center; width: 60px;"><a href="http://economy.erepublik.com/' + document.language + '/market/' + country_id[cCountr.toLowerCase()] + '/' + industry + '/' + eRAcomp[cId].customization['1'] + '/' + eRAcomp[cId].customization['2'] + '/' + eRAcomp[cId].customization['3'] + '/' + eRAcomp[cId].customization['4'] + '"><img width="22" height="16" title="' + cCountr + '" src="http://www.erepublik.com/images/flags/M/' + cCountr + '.gif" alt="' + cCountr + '"></a></td><td class="c_taxvalue" style="text-align: center; width: 30px;"><strong>' + parseFloat(taxRate) * 100 + '%</strong></td><td class="c_customization" style="padding-left: 15px; width: 100px;"><strong>' + offerCustomiz1_2 + '/' + offerCustomiz1_3 + '</strong></td><td class="c_quantity" style="padding-left: 15px; width: 80px;"><strong>' + marketData[0].amount + '</strong></td><td class="c_price" style="padding-left: 15px; width: 100px;"><strong>' + mathRound(marPrice1, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice1Gold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_tax" style="padding-left: 15px;"><strong>' + mathRound(marPrice1Tax, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice1TaxGold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_arrow" style="text-align: center; width: 30px;"><a id="c_market_arrow_' + country_id[cCountr.toLowerCase()] + '" href="javascript:;"><img id="market_arrowImgDown_' + country_id[cCountr.toLowerCase()] + '" src="' + arrowDown + '" style="display: inline;"><img id="market_arrowImgUp_' + country_id[cCountr.toLowerCase()] + '" src="' + arrowUp + '" style="display: none;"></a></td>');
							}
							if (marketData.length == 1) {
								$('#ecm_rowId_' + country_id[cCountr.toLowerCase()] + '_hidden').html('<td colspan="7" class="c_hidden"><div style="display: none; height: 0px; overflow: hidden;">&nbsp;</div></td>');
							} else if (marketData.length == 2) {
								$('#ecm_rowId_' + country_id[cCountr.toLowerCase()] + '_hidden').html('<td colspan="7" class="c_hidden"><div style="display: none; height: 0px; overflow: hidden;"><table style="display: table; width: 100%;"><tr><td class="c_market" style="text-align: center; width: 60px;">&nbsp;</td><td class="c_taxvalue" style="padding-left: 15px; width: 30px;">&nbsp;</td><td class="c_customization" style="padding-left: 15px; width: 100px;"><strong>' + offerCustomiz2_2 + '/' + offerCustomiz2_3 + '</strong></td><td class="c_quantity" style="padding-left: 15px; width: 80px;"><strong>' + marketData[1].amount + '</strong></td><td class="c_price" style="padding-left: 15px; width: 100px;"><strong>' + mathRound(marPrice2, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice2Gold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_tax" style="padding-left: 15px;"><strong>' + mathRound(marPrice2Tax, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice2TaxGold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_arrow" style="text-align: center; width: 30px;">&nbsp;</td></tr></table></div></td>');
							} else if (marketData.length == 3) {
								$('#ecm_rowId_' + country_id[cCountr.toLowerCase()] + '_hidden').html('<td colspan="7" class="c_hidden"><div style="display: none; height: 0px; overflow: hidden;"><table style="display: table; width: 100%;"><tr><td class="c_market" style="text-align: center; width: 60px;">&nbsp;</td><td class="c_taxvalue" style="padding-left: 15px; width: 30px;">&nbsp;</td><td class="c_customization" style="padding-left: 15px; width: 100px;"><strong>' + offerCustomiz2_2 + '/' + offerCustomiz2_3 + '</strong></td><td class="c_quantity" style="padding-left: 15px; width: 80px;"><strong>' + marketData[1].amount + '</strong></td><td class="c_price" style="padding-left: 15px; width: 100px;"><strong>' + mathRound(marPrice2, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice2Gold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_tax" style="padding-left: 15px;"><strong>' + mathRound(marPrice2Tax, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice2TaxGold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_arrow" style="text-align: center; width: 30px;">&nbsp;</td></tr><tr><td class="c_market" style="text-align: center; width: 60px;">&nbsp;</td><td class="c_taxvalue" style="padding-left: 15px; width: 30px;">&nbsp;</td><td class="c_customization" style="padding-left: 15px; width: 100px;"><strong>' + offerCustomiz3_2 + '/' + offerCustomiz3_3 + '</strong></td><td class="c_quantity" style="padding-left: 15px; width: 80px;"><strong>' + marketData[2].amount + '</strong></td><td class="c_price" style="padding-left: 15px; width: 100px;"><strong>' + mathRound(marPrice3, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice3Gold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_tax" style="padding-left: 15px;"><strong>' + mathRound(marPrice3Tax, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice3TaxGold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_arrow" style="text-align: center; width: 30px;">&nbsp;</td></tr></table></div></td>');
							} else if (marketData.length == 4) {
								$('#ecm_rowId_' + country_id[cCountr.toLowerCase()] + '_hidden').html('<td colspan="7" class="c_hidden"><div style="display: none; height: 0px; overflow: hidden;"><table style="display: table; width: 100%;"><tr><td class="c_market" style="text-align: center; width: 60px;">&nbsp;</td><td class="c_taxvalue" style="padding-left: 15px; width: 30px;">&nbsp;</td><td class="c_customization" style="padding-left: 15px; width: 100px;"><strong>' + offerCustomiz2_2 + '/' + offerCustomiz2_3 + '</strong></td><td class="c_quantity" style="padding-left: 15px; width: 80px;"><strong>' + marketData[1].amount + '</strong></td><td class="c_price" style="padding-left: 15px; width: 100px;"><strong>' + mathRound(marPrice2, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice2Gold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_tax" style="padding-left: 15px;"><strong>' + mathRound(marPrice2Tax, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice2TaxGold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_arrow" style="text-align: center; width: 30px;">&nbsp;</td></tr><tr><td class="c_market" style="text-align: center; width: 60px;">&nbsp;</td><td class="c_taxvalue" style="padding-left: 15px; width: 30px;">&nbsp;</td><td class="c_customization" style="padding-left: 15px; width: 100px;"><strong>' + offerCustomiz3_2 + '/' + offerCustomiz3_3 + '</strong></td><td class="c_quantity" style="padding-left: 15px; width: 80px;"><strong>' + marketData[2].amount + '</strong></td><td class="c_price" style="padding-left: 15px; width: 100px;"><strong>' + mathRound(marPrice3, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice3Gold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_tax" style="padding-left: 15px;"><strong>' + mathRound(marPrice3Tax, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice3TaxGold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_arrow" style="text-align: center; width: 30px;">&nbsp;</td></tr><tr><td class="c_market" style="text-align: center; width: 60px;">&nbsp;</td><td class="c_taxvalue" style="padding-left: 15px; width: 30px;">&nbsp;</td><td class="c_customization" style="padding-left: 15px; width: 100px;"><strong>' + offerCustomiz4_2 + '/' + offerCustomiz4_3 + '</strong></td><td class="c_quantity" style="padding-left: 15px; width: 80px;"><strong>' + marketData[3].amount + '</strong></td><td class="c_price" style="padding-left: 15px; width: 100px;"><strong>' + mathRound(marPrice4, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice4Gold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_tax" style="padding-left: 15px;"><strong>' + mathRound(marPrice4Tax, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice4TaxGold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_arrow" style="text-align: center; width: 30px;">&nbsp;</td></tr></table></div></td>');
							} else if (marketData.length > 4) {
								$('#ecm_rowId_' + country_id[cCountr.toLowerCase()] + '_hidden').html('<td colspan="7" class="c_hidden"><div style="display: none; height: 0px; overflow: hidden;"><table style="display: table; width: 100%;"><tr><td class="c_market" style="text-align: center; width: 60px;">&nbsp;</td><td class="c_taxvalue" style="padding-left: 15px; width: 30px;">&nbsp;</td><td class="c_customization" style="padding-left: 15px; width: 100px;"><strong>' + offerCustomiz2_2 + '/' + offerCustomiz2_3 + '</strong></td><td class="c_quantity" style="padding-left: 15px; width: 80px;"><strong>' + marketData[1].amount + '</strong></td><td class="c_price" style="padding-left: 15px; width: 100px;"><strong>' + mathRound(marPrice2, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice2Gold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_tax" style="padding-left: 15px;"><strong>' + mathRound(marPrice2Tax, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice2TaxGold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_arrow" style="text-align: center; width: 30px;">&nbsp;</td></tr><tr><td class="c_market" style="text-align: center; width: 60px;">&nbsp;</td><td class="c_taxvalue" style="padding-left: 15px; width: 30px;">&nbsp;</td><td class="c_customization" style="padding-left: 15px; width: 100px;"><strong>' + offerCustomiz3_2 + '/' + offerCustomiz3_3 + '</strong></td><td class="c_quantity" style="padding-left: 15px; width: 80px;"><strong>' + marketData[2].amount + '</strong></td><td class="c_price" style="padding-left: 15px; width: 100px;"><strong>' + mathRound(marPrice3, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice3Gold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_tax" style="padding-left: 15px;"><strong>' + mathRound(marPrice3Tax, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice3TaxGold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_arrow" style="text-align: center; width: 30px;">&nbsp;</td></tr><tr><td class="c_market" style="text-align: center; width: 60px;">&nbsp;</td><td class="c_taxvalue" style="padding-left: 15px; width: 30px;">&nbsp;</td><td class="c_customization" style="padding-left: 15px; width: 100px;"><strong>' + offerCustomiz4_2 + '/' + offerCustomiz4_3 + '</strong></td><td class="c_quantity" style="padding-left: 15px; width: 80px;"><strong>' + marketData[3].amount + '</strong></td><td class="c_price" style="padding-left: 15px; width: 100px;"><strong>' + mathRound(marPrice4, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice4Gold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_tax" style="padding-left: 15px;"><strong>' + mathRound(marPrice4Tax, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice4TaxGold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_arrow" style="text-align: center; width: 30px;">&nbsp;</td></tr><tr><td class="c_market" style="text-align: center; width: 60px;">&nbsp;</td><td class="c_taxvalue" style="padding-left: 15px; width: 30px;">&nbsp;</td><td class="c_customization" style="padding-left: 15px; width: 100px;"><strong>' + offerCustomiz5_2 + '/' + offerCustomiz5_3 + '</strong></td><td class="c_quantity" style="padding-left: 15px; width: 80px;"><strong>' + marketData[4].amount + '</strong></td><td class="c_price" style="padding-left: 15px; width: 100px;"><strong>' + mathRound(marPrice5, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice5Gold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_tax" style="padding-left: 15px;"><strong>' + mathRound(marPrice5Tax, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice5TaxGold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_arrow" style="text-align: center; width: 30px;">&nbsp;</td></tr></table></div></td>');
							}
						} else if(industry > 9) {
							if (marketData.length == 0) {
								$('#ecm_rowId_' + country_id[cCountr.toLowerCase()]).css('background', 'url(http://www.erepublik.com/images/modules/company/dotted_bg.png) repeat-x left -1px #f2f2f2');
								$('#ecm_rowId_' + country_id[cCountr.toLowerCase()]).html('<td class="c_market" style="text-align: center; width: 60px;"><a href="http://economy.erepublik.com/' + document.language + '/market/' + country_id[cCountr.toLowerCase()] + '/' + industry + '/' + eRAcomp[cId].customization['1'] + '/' + eRAcomp[cId].customization['2'] + '/' + eRAcomp[cId].customization['3'] + '/' + eRAcomp[cId].customization['4'] + '"><img width="22" height="16" title="' + cCountr + '" src="http://www.erepublik.com/images/flags/M/' + cCountr + '.gif" alt="' + cCountr + '"></a></td><td colspan="6" class="c_customization" style="padding-left: 15px;"><strong style="font-style: italic; font-weight: normal;">There are no offers available on the market.</strong></td>');
							} else {
								$('#ecm_rowId_' + country_id[cCountr.toLowerCase()]).html('<td class="c_market" style="text-align: center; width: 60px;"><a href="http://economy.erepublik.com/' + document.language + '/market/' + country_id[cCountr.toLowerCase()] + '/' + industry + '/' + eRAcomp[cId].customization['1'] + '/' + eRAcomp[cId].customization['2'] + '/' + eRAcomp[cId].customization['3'] + '/' + eRAcomp[cId].customization['4'] + '"><img width="22" height="16" title="' + cCountr + '" src="http://www.erepublik.com/images/flags/M/' + cCountr + '.gif" alt="' + cCountr + '"></a></td><td class="c_taxvalue" style="text-align: center; width: 30px;"><strong>' + parseFloat(taxRate) * 100 + '%</strong></td><td class="c_customization" style="padding-left: 15px; width: 100px;"><strong>' + offerCustomiz1_1 + '</strong></td><td class="c_quantity" style="padding-left: 15px; width: 80px;"><strong>' + marketData[0].amount + '</strong></td><td class="c_price" style="padding-left: 15px; width: 100px;"><strong>' + mathRound(marPrice1, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice1Gold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_tax" style="padding-left: 15px;"><strong>' + mathRound(marPrice1Tax, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice1TaxGold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_arrow" style="text-align: center; width: 30px;"><a id="c_market_arrow_' + country_id[cCountr.toLowerCase()] + '" href="javascript:;"><img id="market_arrowImgDown_' + country_id[cCountr.toLowerCase()] + '" src="' + arrowDown + '" style="display: inline;"><img id="market_arrowImgUp_' + country_id[cCountr.toLowerCase()] + '" src="' + arrowUp + '" style="display: none;"></a></td>');
							}
							if (marketData.length == 1) {
								$('#ecm_rowId_' + country_id[cCountr.toLowerCase()] + '_hidden').html('<td colspan="7" class="c_hidden"><div style="display: none; height: 0px; overflow: hidden;">&nbsp;</div></td>');
							} else if (marketData.length == 2) {
								$('#ecm_rowId_' + country_id[cCountr.toLowerCase()] + '_hidden').html('<td colspan="7" class="c_hidden"><div style="display: none; height: 0px; overflow: hidden;"><table style="display: table; width: 100%;"><tr><td class="c_market" style="text-align: center; width: 60px;">&nbsp;</td><td class="c_taxvalue" style="padding-left: 15px; width: 30px;">&nbsp;</td><td class="c_customization" style="padding-left: 15px; width: 100px;"><strong>' + offerCustomiz2_1 + '</strong></td><td class="c_quantity" style="padding-left: 15px; width: 80px;"><strong>' + marketData[1].amount + '</strong></td><td class="c_price" style="padding-left: 15px; width: 100px;"><strong>' + mathRound(marPrice2, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice2Gold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_tax" style="padding-left: 15px;"><strong>' + mathRound(marPrice2Tax, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice2TaxGold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_arrow" style="text-align: center; width: 30px;">&nbsp;</td></tr></table></div></td>');
							} else if (marketData.length == 3) {
								$('#ecm_rowId_' + country_id[cCountr.toLowerCase()] + '_hidden').html('<td colspan="7" class="c_hidden"><div style="display: none; height: 0px; overflow: hidden;"><table style="display: table; width: 100%;"><tr><td class="c_market" style="text-align: center; width: 60px;">&nbsp;</td><td class="c_taxvalue" style="padding-left: 15px; width: 30px;">&nbsp;</td><td class="c_customization" style="padding-left: 15px; width: 100px;"><strong>' + offerCustomiz2_1 + '</strong></td><td class="c_quantity" style="padding-left: 15px; width: 80px;"><strong>' + marketData[1].amount + '</strong></td><td class="c_price" style="padding-left: 15px; width: 100px;"><strong>' + mathRound(marPrice2, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice2Gold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_tax" style="padding-left: 15px;"><strong>' + mathRound(marPrice2Tax, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice2TaxGold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_arrow" style="text-align: center; width: 30px;">&nbsp;</td></tr><tr><td class="c_market" style="text-align: center; width: 60px;">&nbsp;</td><td class="c_taxvalue" style="padding-left: 15px; width: 30px;">&nbsp;</td><td class="c_customization" style="padding-left: 15px; width: 100px;"><strong>' + offerCustomiz3_1 + '</strong></td><td class="c_quantity" style="padding-left: 15px; width: 80px;"><strong>' + marketData[2].amount + '</strong></td><td class="c_price" style="padding-left: 15px; width: 100px;"><strong>' + mathRound(marPrice3, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice3Gold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_tax" style="padding-left: 15px;"><strong>' + mathRound(marPrice3Tax, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice3TaxGold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_arrow" style="text-align: center; width: 30px;">&nbsp;</td></tr></table></div></td>');
							} else if (marketData.length == 4) {
								$('#ecm_rowId_' + country_id[cCountr.toLowerCase()] + '_hidden').html('<td colspan="7" class="c_hidden"><div style="display: none; height: 0px; overflow: hidden;"><table style="display: table; width: 100%;"><tr><td class="c_market" style="text-align: center; width: 60px;">&nbsp;</td><td class="c_taxvalue" style="padding-left: 15px; width: 30px;">&nbsp;</td><td class="c_customization" style="padding-left: 15px; width: 100px;"><strong>' + offerCustomiz2_1 + '</strong></td><td class="c_quantity" style="padding-left: 15px; width: 80px;"><strong>' + marketData[1].amount + '</strong></td><td class="c_price" style="padding-left: 15px; width: 100px;"><strong>' + mathRound(marPrice2, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice2Gold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_tax" style="padding-left: 15px;"><strong>' + mathRound(marPrice2Tax, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice2TaxGold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_arrow" style="text-align: center; width: 30px;">&nbsp;</td></tr><tr><td class="c_market" style="text-align: center; width: 60px;">&nbsp;</td><td class="c_taxvalue" style="padding-left: 15px; width: 30px;">&nbsp;</td><td class="c_customization" style="padding-left: 15px; width: 100px;"><strong>' + offerCustomiz3_1 + '</strong></td><td class="c_quantity" style="padding-left: 15px; width: 80px;"><strong>' + marketData[2].amount + '</strong></td><td class="c_price" style="padding-left: 15px; width: 100px;"><strong>' + mathRound(marPrice3, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice3Gold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_tax" style="padding-left: 15px;"><strong>' + mathRound(marPrice3Tax, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice3TaxGold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_arrow" style="text-align: center; width: 30px;">&nbsp;</td></tr><tr><td class="c_market" style="text-align: center; width: 60px;">&nbsp;</td><td class="c_taxvalue" style="padding-left: 15px; width: 30px;">&nbsp;</td><td class="c_customization" style="padding-left: 15px; width: 100px;"><strong>' + offerCustomiz4_1 + '</strong></td><td class="c_quantity" style="padding-left: 15px; width: 80px;"><strong>' + marketData[3].amount + '</strong></td><td class="c_price" style="padding-left: 15px; width: 100px;"><strong>' + mathRound(marPrice4, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice4Gold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_tax" style="padding-left: 15px;"><strong>' + mathRound(marPrice4Tax, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice4TaxGold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_arrow" style="text-align: center; width: 30px;">&nbsp;</td></tr></table></div></td>');
							} else if (marketData.length > 4) {
								$('#ecm_rowId_' + country_id[cCountr.toLowerCase()] + '_hidden').html('<td colspan="7" class="c_hidden"><div style="display: none; height: 0px; overflow: hidden;"><table style="display: table; width: 100%;"><tr><td class="c_market" style="text-align: center; width: 60px;">&nbsp;</td><td class="c_taxvalue" style="padding-left: 15px; width: 30px;">&nbsp;</td><td class="c_customization" style="padding-left: 15px; width: 100px;"><strong>' + offerCustomiz2_1 + '</strong></td><td class="c_quantity" style="padding-left: 15px; width: 80px;"><strong>' + marketData[1].amount + '</strong></td><td class="c_price" style="padding-left: 15px; width: 100px;"><strong>' + mathRound(marPrice2, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice2Gold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_tax" style="padding-left: 15px;"><strong>' + mathRound(marPrice2Tax, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice2TaxGold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_arrow" style="text-align: center; width: 30px;">&nbsp;</td></tr><tr><td class="c_market" style="text-align: center; width: 60px;">&nbsp;</td><td class="c_taxvalue" style="padding-left: 15px; width: 30px;">&nbsp;</td><td class="c_customization" style="padding-left: 15px; width: 100px;"><strong>' + offerCustomiz3_1 + '</strong></td><td class="c_quantity" style="padding-left: 15px; width: 80px;"><strong>' + marketData[2].amount + '</strong></td><td class="c_price" style="padding-left: 15px; width: 100px;"><strong>' + mathRound(marPrice3, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice3Gold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_tax" style="padding-left: 15px;"><strong>' + mathRound(marPrice3Tax, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice3TaxGold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_arrow" style="text-align: center; width: 30px;">&nbsp;</td></tr><tr><td class="c_market" style="text-align: center; width: 60px;">&nbsp;</td><td class="c_taxvalue" style="padding-left: 15px; width: 30px;">&nbsp;</td><td class="c_customization" style="padding-left: 15px; width: 100px;"><strong>' + offerCustomiz4_1 + '</strong></td><td class="c_quantity" style="padding-left: 15px; width: 80px;"><strong>' + marketData[3].amount + '</strong></td><td class="c_price" style="padding-left: 15px; width: 100px;"><strong>' + mathRound(marPrice4, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice4Gold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_tax" style="padding-left: 15px;"><strong>' + mathRound(marPrice4Tax, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice4TaxGold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_arrow" style="text-align: center; width: 30px;">&nbsp;</td></tr><tr><td class="c_market" style="text-align: center; width: 60px;">&nbsp;</td><td class="c_taxvalue" style="padding-left: 15px; width: 30px;">&nbsp;</td><td class="c_customization" style="padding-left: 15px; width: 100px;"><strong>' + offerCustomiz5_1 + '</strong></td><td class="c_quantity" style="padding-left: 15px; width: 80px;"><strong>' + marketData[4].amount + '</strong></td><td class="c_price" style="padding-left: 15px; width: 100px;"><strong>' + mathRound(marPrice5, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice5Gold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_tax" style="padding-left: 15px;"><strong>' + mathRound(marPrice5Tax, 2).toFixed(2) + '<span>&nbsp;' + curren + '</span></strong><br><gold>' + mathRound(marPrice5TaxGold, 5).toFixed(5) + '<span>&nbsp;GOLD</span></gold></td><td class="c_arrow" style="text-align: center; width: 30px;">&nbsp;</td></tr></table></div></td>');
							}
						}
					} else {
						$('#ecm_rowId_' + country_id[cCountr.toLowerCase()]).css('background', 'url(http://www.erepublik.com/images/modules/company/dotted_bg.png) repeat-x left -1px #f2f2f2');
						$('#ecm_rowId_' + country_id[cCountr.toLowerCase()]).html('<td class="c_market" style="text-align: center; width: 60px;"><a href="http://economy.erepublik.com/' + document.language + '/market/' + country_id[cCountr.toLowerCase()] + '/' + industry + '/' + eRAcomp[cId].customization['1'] + '/' + eRAcomp[cId].customization['2'] + '/' + eRAcomp[cId].customization['3'] + '/' + eRAcomp[cId].customization['4'] + '"><img width="22" height="16" title="' + cCountr + '" src="http://www.erepublik.com/images/flags/M/' + cCountr + '.gif" alt="' + cCountr + '"></a></td><td colspan="6" class="c_customization" style="padding-left: 15px;"><strong style="font-style: italic; font-weight: normal;">The company cannot trade with this country due to a trading embargo.</strong></td>');
					}
					
					if (marketData.length == 1) {
						divHeight = "0px";
					} else if (marketData.length == 2) {
						divHeight = "40px";
					} else if (marketData.length == 3) {
						divHeight = "80px";
					} else if (marketData.length == 4) {
						divHeight = "120px";
					} else if (marketData.length > 4) {
						divHeight = "160px";
					}
					
					$('#c_market_arrow_' + country_id[cCountr.toLowerCase()]).live('click', function() {
						if($('#market_arrowImgDown_' + country_id[cCountr.toLowerCase()]).css('display') == 'inline') {
							$('#market_arrowImgDown_' + country_id[cCountr.toLowerCase()]).css('display', 'none');
							$('#market_arrowImgUp_' + country_id[cCountr.toLowerCase()]).css('display', 'inline');
						} else {
							$('#market_arrowImgDown_' + country_id[cCountr.toLowerCase()]).css('display', 'inline');
							$('#market_arrowImgUp_' + country_id[cCountr.toLowerCase()]).css('display', 'none');
						}
						
						if($('#ecm_rowId_' + country_id[cCountr.toLowerCase()] + '_hidden div').css('overflow') != "visible") {
							$('#ecm_rowId_' + country_id[cCountr.toLowerCase()] + '_hidden div').css('overflow', 'visible');
						} else {
							$('#ecm_rowId_' + country_id[cCountr.toLowerCase()] + '_hidden div').css('overflow', 'hidden');
						}
						
						if($('#ecm_rowId_' + country_id[cCountr.toLowerCase()] + '_hidden div').css('height') != divHeight) {
							$('#ecm_rowId_' + country_id[cCountr.toLowerCase()] + '_hidden').css('display', 'table-row');
							$('#ecm_rowId_' + country_id[cCountr.toLowerCase()] + '_hidden div').animate({ 'height': divHeight }, 'fast', 'linear' );
						} else {
							$('#ecm_rowId_' + country_id[cCountr.toLowerCase()] + '_hidden div').animate({ 'height': '0px' }, 'fast', 'linear', function(){ $('#ecm_rowId_' + country_id[cCountr.toLowerCase()] + '_hidden').css('display', 'none'); } );
						}
					});
					

				}
				catch(err) {
				}
				if(++count == $('#marketOffers tr[id*="rowId_"]').length) {
					
//					$('#mOffersLoader').css('display', 'none');
				}
			}
		});
	});
}

function getMOCountry(id) {
	var companyOfferData;
	var comCountrId;
	
	GM_xmlhttpRequest({
			method: 'GET',
			url: API_URL + 'companies/' + id + '.json',
			onload: function(response) {
				companyOfferData = eval('(' + response.responseText + ')');
				
				comCountrId = companyOfferData.country.id;
				
//				alert(comCountrId);
			}
	});
}

function getTax() {
	var taxLocation = $('.internal_content');
	var json = $('script', taxLocation).text();
	var currCode;
	var taxValue;
	
	json = json.trim();
	json = json.replace(/(\r\n|\n|\r)/gm, '');
	json = json.split(';')[0].split('=')[1];

	var taxData = eval('(' + json + ')');
	
	eRAcomp[cId].taxrate = {};
	
	for (var x = 0; x < taxData.length; x++) {
		currCode = taxData[x].currency + '';
		taxValue = taxData[x].taxes + '';
		
		eRAcomp[cId].taxrate[currCode] = taxValue;
		writeSettings(document.userid + '.Company', eRAcomp);
		
		GM_deleteValue(cId + '.taxRate.' + currCode);
	}
}

function getExchange() {
	var recItem;
	
	eRAcomp[cId].exchange = {};
	
	for (var x = 0; x < document.countries.length; x++) {
		GM_xmlhttpRequest({
			method: 'GET',
			url: API_URL + 'exchange/' + country_currency[document.countries[x]] + '/GOLD',
			onload: function(response) {
				recItem = $(response.responseText).find('exchange-rate').eq(0).text();
				
				eRAcomp[cId].exchange[country_currency[document.countries[this.idx]]] = recItem;
				writeSettings(document.userid + '.Company', eRAcomp);
				
				GM_deleteValue(cId + '.exchangeRate.' + country_currency[document.countries[this.idx]]);
				
				getMarketOffers();
			}.bind({idx:x})
		});
	}
}

function calcStock() {
	var totalStock = 0;
	var curStock = $('#stock').text();
	
	curStock = fixString(curStock);
	curStock = curStock.split("/");
	curStock = curStock[0];
	
	totalStock += parseFloat(curStock);
	
	$('#marketOffers tr[id*="rowId_"]').each(function() {
		var dataRow = $(this).find('.mo_quantity strong').text();
		var inputPresent = $(this).find('.mo_quantity input').val();
		var onMarket = 0;
		if (dataRow.length > 0) {
			onMarket = $(this).find('.mo_quantity strong').text();
			totalStock += parseFloat(onMarket);
		} else if (inputPresent != undefined) {
			onMarket = $(this).find('.mo_quantity input').val();
			totalStock += parseFloat(onMarket);
		}
	});
	
	var rowPresent = $('#marketOffers').find('#ecmTotalRow');
	if (rowPresent.length > 0) {
		$('#ecmTotalRow').replaceWith('<td id="ecmTotalRow" colspan="4">Total stock: ' + totalStock + '</td>');
	} else {
		$('#marketOffers').append('<tr class="dotted"><td>&nbsp;</td><td id="ecmTotalRow" colspan="4">Total stock: ' + totalStock + '</td></tr>');
	}
}

function enhanceMyCompanies() {
	if (eRAopt['company'] == "false") {
		return;
	}
	
	var companyId = null;
	var indId = null;
	var compDataSet = null;
	var custLevel = null;
	var workersArray = null;
	var recNum = 10;
	var employeesSection = null;
	var tooltipStat_1 = null;
	var tooltipStat_2 = null;
	var tooltipStat_3 = null;
	var tooltipStat_4 = null;
	var compDataCustomiz_1 = null;
	var compDataCustomiz_2 = null;
	var compDataCustomiz_3 = null;
	var compDataCustomiz_4 = null;
	var compDataCustomValue_1 = null;
	var compDataCustomValue_2 = null;
	var compDataCustomValue_3 = null;
	var compDataCustomValue_4 = null;
	
	$('.offers tr:eq(0) th:eq(0)').attr('width', '200px');
	$('.offers tr:eq(0) th:eq(1)').attr('width', '150px');
	$('.offers tr:eq(0) th:eq(1)').after('<th width="200px"></th>');
	
	for(var x = 0; x < $('.offers tr').length; x++) {
		companyId = $('.offers tr:eq(' + x + ') td:eq(0) .entity:eq(0) .avatarholder').attr('href');
		
		if(companyId != undefined) {
			companyId = companyId.split('/')[4];
			$('.offers tr:eq(' + x + ')').attr('id', companyId);
		} else {
			continue;
		}
		
		GM_xmlhttpRequest({
			method: 'GET',
			url: API_URL + 'companies/' + companyId + '.json',
			onload: function(response) {
				compDataSet = eval('(' + response.responseText + ')');
				
				indId = compDataSet.industry.id;
				custLevel = compDataSet.customization_level;
				workersArray = eval(compDataSet.employees);
				
				if(indId >= 1 && indId <= 2 || indId >= 6) {
					recNum = 10;
				} else {
					recNum = 20;
				}
				
				if(workersArray.length < recNum || workersArray.length > recNum) {
					employeesSection = '<strong style="color: #FF0000;">' + workersArray.length + '</strong><strong> / ' + recNum + '</strong>';
				} else {
					employeesSection = '<strong>' + workersArray.length + '</strong><strong> / ' + recNum + '</strong>';
				}
								
				if(indId == 1) {
					compDataCustomiz_1 = mathRound(1.17 * parseFloat(compDataSet.customization["wellness"]), 1);
					compDataCustomiz_2 = mathRound(1.17 * parseFloat(compDataSet.customization["happiness"]), 1);
					
					compDataCustomValue_1 = mathRound(parseFloat(compDataSet.customization["wellness"]) / 10, 2);
					compDataCustomValue_2 = mathRound(parseFloat(compDataSet.customization["happiness"]) / 10, 2);
					
					tooltipStat_1 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/1/part_ingredients.png"><div class="tooltip_bar"><small>Ingredients<strong>' + compDataSet.customization["wellness"] + '</strong></small><div class="bar health"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + compDataCustomiz_1 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_health.png"><div><small title="Health">Health</small><strong title="' + compDataCustomValue_1 + ' / day ">' + compDataCustomValue_1 + ' / day </strong></div>';
					tooltipStat_2 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/1/part_packaging.png"><div class="tooltip_bar"><small>Packaging<strong>' + compDataSet.customization["happiness"] + '</strong></small><div class="bar happiness"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + compDataCustomiz_2 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_happiness.png"><div><small title="Happiness">Happiness</small><strong title="' + compDataCustomValue_2 + ' / day ">' + compDataCustomValue_2 + ' / day </strong></div>';
					
					$('.offers tr[id*=' + compDataSet.id + '] td:eq(1) .entity').html('<a class="industryImage" href="javascript:;"><img src="http://www.erepublik.com/images/icons/industry/' + indId + '/q' + custLevel + '.png"><div class="tooltip_marketplace"><div class="head_icon"><img width="90" height="90" alt="" src="http://www.erepublik.com/images/icons/industry/' + indId + '/q' + custLevel + '_90x90.png"></div><div class="tooltip_content"><div style="" class="tooltip_stat">' + tooltipStat_1 + '</div><div style="" class="tooltip_stat">' + tooltipStat_2 + '</div></div></div></a>');
					$('.offers tr[id*=' + compDataSet.id + '] td:eq(1) .entity').parent().after('<td><div class="entity">Raw: <strong>' + compDataSet.raw_materials_in_stock + '</strong><br>Stock: <strong>' + compDataSet.stock + '</strong><br>Employees: ' + employeesSection + '<br></div></td>');
				
				} else if(indId == 2) {
					compDataCustomiz_1 = mathRound(1.17 * parseFloat(compDataSet.customization["wellness"]), 1);
					compDataCustomiz_2 = mathRound(1.17 * parseFloat(compDataSet.customization["happiness"]), 1);
					compDataCustomiz_3 = mathRound(1.17 * parseFloat(compDataSet.customization["moving-distance"]), 1);
					
					compDataCustomValue_1 = mathRound(parseFloat(compDataSet.customization["wellness"]) / 10, 2);
					compDataCustomValue_2 = mathRound(parseFloat(compDataSet.customization["happiness"]) / 10, 2);
					compDataCustomValue_3 = mathRound(parseFloat(compDataSet.customization["moving-distance"]) / 20, 0);
					
					tooltipStat_1 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/2/part_paper.png"><div class="tooltip_bar"><small>Paper<strong>' + compDataSet.customization["wellness"] + '</strong></small><div class="bar health"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + compDataCustomiz_1 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_health.png"><div><small title="Health">Health</small><strong title="' + compDataCustomValue_1 + ' / use ">' + compDataCustomValue_1 + ' / use </strong></div>';
					tooltipStat_2 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/2/part_packaging.png"><div class="tooltip_bar"><small>Packaging<strong>' + compDataSet.customization["happiness"] + '</strong></small><div class="bar happiness"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + compDataCustomiz_2 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_happiness.png"><div><small title="Happiness">Happiness</small><strong title="' + compDataCustomValue_2 + ' / use ">' + compDataCustomValue_2 + ' / use </strong></div>';
					tooltipStat_3 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/2/part_itinerary.png"><div class="tooltip_bar"><small>Itinerary<strong>' + compDataSet.customization["moving-distance"] + '</strong></small><div class="bar moving_distance"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + compDataCustomiz_3 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_moving_distance.png"><div><small title="Moving Distance">Moving Di...</small><strong title="' + compDataCustomValue_3 + ' zone(s)">' + compDataCustomValue_3 + ' zone(s)</strong></div>';
					
					$('.offers tr[id*=' + compDataSet.id + '] td:eq(1) .entity').html('<a class="industryImage" href="javascript:;"><img src="http://www.erepublik.com/images/icons/industry/' + indId + '/q' + custLevel + '.png"><div class="tooltip_marketplace"><div class="head_icon"><img width="90" height="90" alt="" src="http://www.erepublik.com/images/icons/industry/' + indId + '/q' + custLevel + '_90x90.png"></div><div class="tooltip_content"><div style="" class="tooltip_stat">' + tooltipStat_1 + '</div><div style="" class="tooltip_stat">' + tooltipStat_2 + '</div><div style="" class="tooltip_stat">' + tooltipStat_3 + '</div></div></div></a>');
					$('.offers tr[id*=' + compDataSet.id + '] td:eq(1) .entity').parent().after('<td><div class="entity">Raw: <strong>' + compDataSet.raw_materials_in_stock + '</strong><br>Stock: <strong>' + compDataSet.stock + '</strong><br>Employees: ' + employeesSection + '<br></div></td>');
				
				} else if(indId == 3) {
					compDataCustomiz_1 = mathRound(1.17 * parseFloat(compDataSet.customization["wellness"]), 1);
					compDataCustomiz_2 = mathRound(1.17 * parseFloat(compDataSet.customization["happiness"]), 1);
					compDataCustomiz_3 = mathRound(1.17 * parseFloat(compDataSet.customization["durability"]), 1);
					
					compDataCustomValue_1 = mathRound(parseFloat(compDataSet.customization["wellness"]) / 2, 2);
					compDataCustomValue_2 = mathRound(parseFloat(compDataSet.customization["happiness"]) / 10, 2);
					compDataCustomValue_3 = parseFloat(compDataSet.customization["durability"]);
					
					tooltipStat_1 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/3/part_roof.png"><div class="tooltip_bar"><small>Roof<strong>' + compDataSet.customization["wellness"] + '</strong></small><div class="bar health"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + compDataCustomiz_1 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_health.png"><div><small title="Health">Health</small><strong title="' + compDataCustomValue_1 + ' / day ">' + compDataCustomValue_1 + ' / day </strong></div>';
					tooltipStat_2 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/3/part_layout.png"><div class="tooltip_bar"><small>Layout<strong>' + compDataSet.customization["happiness"] + '</strong></small><div class="bar happiness"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + compDataCustomiz_2 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_happiness.png"><div><small title="Happiness">Happiness</small><strong title="' + compDataCustomValue_2 + ' / day ">' + compDataCustomValue_2 + ' / day </strong></div>';
					tooltipStat_3 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/3/part_walls.png"><div class="tooltip_bar"><small>Walls<strong>' + compDataSet.customization["durability"] + '</strong></small><div class="bar durability"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + compDataCustomiz_3 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_durability.png"><div><small title="Durability">Durability</small><strong title="' + compDataCustomValue_3 + ' day(s)">' + compDataCustomValue_3 + ' day(s)</strong></div>';
					
					$('.offers tr[id*=' + compDataSet.id + '] td:eq(1) .entity').html('<a class="industryImage" href="javascript:;"><img src="http://www.erepublik.com/images/icons/industry/' + indId + '/q' + custLevel + '.png"><div class="tooltip_marketplace"><div class="head_icon"><img width="90" height="90" alt="" src="http://www.erepublik.com/images/icons/industry/' + indId + '/q' + custLevel + '_90x90.png"></div><div class="tooltip_content"><div style="" class="tooltip_stat">' + tooltipStat_1 + '</div><div style="" class="tooltip_stat">' + tooltipStat_2 + '</div><div style="" class="tooltip_stat">' + tooltipStat_3 + '</div></div></div></a>');
					$('.offers tr[id*=' + compDataSet.id + '] td:eq(1) .entity').parent().after('<td><div class="entity">Raw: <strong>' + compDataSet.raw_materials_in_stock + '</strong><br>Stock: <strong>' + compDataSet.stock + '</strong><br>Employees: ' + employeesSection + '<br></div></td>');
				
				} else if(indId == 4) {
					compDataCustomiz_1 = mathRound(1.17 * parseFloat(compDataSet.customization["durability"]), 1);
					compDataCustomiz_2 = mathRound(1.17 * parseFloat(compDataSet.customization["wellness"]), 1);
					compDataCustomiz_3 = mathRound(1.17 * parseFloat(compDataSet.customization["area-of-effect"]), 1);
					
					compDataCustomValue_1 = mathRound(parseFloat(compDataSet.customization["durability"]) * 2500, 0);
					compDataCustomValue_2 = mathRound(parseFloat(compDataSet.customization["wellness"]) / 2, 2);
					compDataCustomValue_3 = mathRound(parseFloat(compDataSet.customization["area-of-effect"]) / 20, 0);
					
					tooltipStat_1 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/4/part_walls.png"><div class="tooltip_bar"><small>Walls<strong>' + compDataSet.customization["durability"] + '</strong></small><div class="bar durability"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + compDataCustomiz_1 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_durability.png"><div><small title="Health Budget">Health Bu...</small><strong title="' + compDataCustomValue_1 + '">' + compDataCustomValue_1 + '</strong></div>';
					tooltipStat_2 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/4/part_roof.png"><div class="tooltip_bar"><small>Roof<strong>' + compDataSet.customization["wellness"] + '</strong></small><div class="bar health"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + compDataCustomiz_2 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_health.png"><div><small title="Health/Turn/Player">Health/Tur...</small><strong title="' + compDataCustomValue_2 + ' ">' + compDataCustomValue_2 + ' </strong></div>';
					tooltipStat_3 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/4/part_ambulances.png"><div class="tooltip_bar"><small>Ambulances<strong>' + compDataSet.customization["area-of-effect"] + '</strong></small><div class="bar area_of_effect"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + compDataCustomiz_3 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_area_of_effect.png"><div><small title="Area of Effect">Area of Ef...</small><strong title="' + compDataCustomValue_3 + ' tile(s)">' + compDataCustomValue_3 + ' tile(s)</strong></div>';
					
					$('.offers tr[id*=' + compDataSet.id + '] td:eq(1) .entity').html('<a class="industryImage" href="javascript:;"><img src="http://www.erepublik.com/images/icons/industry/' + indId + '/q' + custLevel + '.png"><div class="tooltip_marketplace"><div class="head_icon"><img width="90" height="90" alt="" src="http://www.erepublik.com/images/icons/industry/' + indId + '/q' + custLevel + '_90x90.png"></div><div class="tooltip_content"><div style="" class="tooltip_stat">' + tooltipStat_1 + '</div><div style="" class="tooltip_stat">' + tooltipStat_2 + '</div><div style="" class="tooltip_stat">' + tooltipStat_3 + '</div></div></div></a>');
					$('.offers tr[id*=' + compDataSet.id + '] td:eq(1) .entity').parent().after('<td><div class="entity">Raw: <strong>' + compDataSet.raw_materials_in_stock + '</strong><br>Stock: <strong>' + compDataSet.stock + '</strong><br>Employees: ' + employeesSection + '<br></div></td>');
				
				} else if(indId == 5) {
					compDataCustomiz_1 = mathRound(1.17 * parseFloat(compDataSet.customization["durability"]), 1);
					compDataCustomiz_2 = mathRound(1.17 * parseFloat(compDataSet.customization["defense"]), 1);
					compDataCustomiz_3 = mathRound(1.17 * parseFloat(compDataSet.customization["area-of-effect"]), 1);
					
					compDataCustomValue_1 = mathRound(parseFloat(compDataSet.customization["durability"]) / 2, 2);
					compDataCustomValue_2 = mathRound(parseFloat(compDataSet.customization["happiness"]) * 50, 2);
					compDataCustomValue_3 = mathRound(parseFloat(compDataSet.customization["area-of-effect"]) / 20, 0);
					
					tooltipStat_1 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/5/part_layout.png"><div class="tooltip_bar"><small>Layout<strong>' + compDataSet.customization["durability"] + '</strong></small><div class="bar defense"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + compDataCustomiz_1 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_defense.png"><div><small title="Defense">Defense</small><strong title="' + compDataCustomValue_1 + '">' + compDataCustomValue_1 + '</strong></div>';
					tooltipStat_2 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/5/part_walls.png"><div class="tooltip_bar"><small>Walls<strong>' + compDataSet.customization["defense"] + '</strong></small><div class="bar durability"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + compDataCustomiz_2 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_durability.png"><div><small title="Durability">Durability</small><strong title="' + compDataCustomValue_2 + ' use(s)">' + compDataCustomValue_2 + ' use(s)</strong></div>';
					tooltipStat_3 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/5/part_cannons.png"><div class="tooltip_bar"><small>Cannons<strong>' + compDataSet.customization["area-of-effect"] + '</strong></small><div class="bar area_of_effect"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + compDataCustomiz_3 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_area_of_effect.png"><div><small title="Area of Effect">Area of Ef...</small><strong title="' + compDataCustomValue_3 + ' tile(s)">' + compDataCustomValue_3 + ' tile(s)</strong></div>';
					
					$('.offers tr[id*=' + compDataSet.id + '] td:eq(1) .entity').html('<a class="industryImage" href="javascript:;"><img src="http://www.erepublik.com/images/icons/industry/' + indId + '/q' + custLevel + '.png"><div class="tooltip_marketplace"><div class="head_icon"><img width="90" height="90" alt="" src="http://www.erepublik.com/images/icons/industry/' + indId + '/q' + custLevel + '_90x90.png"></div><div class="tooltip_content"><div style="" class="tooltip_stat">' + tooltipStat_1 + '</div><div style="" class="tooltip_stat">' + tooltipStat_2 + '</div><div style="" class="tooltip_stat">' + tooltipStat_3 + '</div></div></div></a>');
					$('.offers tr[id*=' + compDataSet.id + '] td:eq(1) .entity').parent().after('<td><div class="entity">Raw: <strong>' + compDataSet.raw_materials_in_stock + '</strong><br>Stock: <strong>' + compDataSet.stock + '</strong><br>Employees: ' + employeesSection + '<br></div></td>');
				
				} else if(indId == 6) {
					compDataCustomiz_1 = mathRound(1.17 * parseFloat(compDataSet.customization["damage"]), 1);
					compDataCustomiz_2 = mathRound(1.17 * parseFloat(compDataSet.customization["attack"]), 1);
					compDataCustomiz_3 = mathRound(1.17 * parseFloat(compDataSet.customization["defense"]), 1);
					compDataCustomiz_4 = mathRound(1.17 * parseFloat(compDataSet.customization["durability"]), 1);
					
					compDataCustomValue_1 = mathRound(parseFloat(compDataSet.customization["damage"]) / 10, 2);
					compDataCustomValue_2 = parseFloat(compDataSet.customization["attack"]);
					compDataCustomValue_3 = parseFloat(compDataSet.customization["defense"]);
					compDataCustomValue_4 = parseFloat(compDataSet.customization["durability"]);
					
					tooltipStat_1 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/6/part_ammunition.png"><div class="tooltip_bar"><small>Ammunition<strong>' + compDataSet.customization["damage"] + '</strong></small><div class="bar damage"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + compDataCustomiz_1 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_damage.png"><div><small title="Damage">Damage</small><strong title="' + compDataCustomValue_1 + ' ">' + compDataCustomValue_1 + ' </strong></div>';
					tooltipStat_2 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/6/part_rifle_barrel.png"><div class="tooltip_bar"><small>Rifle Barrel<strong>' + compDataSet.customization["attack"] + '</strong></small><div class="bar attack"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + compDataCustomiz_2 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_attack.png"><div><small title="Attack">Attack</small><strong title="' + compDataCustomValue_2 + ' ">' + compDataCustomValue_2 + ' </strong></div>';
					tooltipStat_3 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/6/part_frame.png"><div class="tooltip_bar"><small>Frame<strong>' + compDataSet.customization["defense"] + '</strong></small><div class="bar defense"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + compDataCustomiz_3 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_defense.png"><div><small title="Defense">Defense</small><strong title="' + compDataCustomValue_3 + ' ">' + compDataCustomValue_3 + ' </strong></div>';
					tooltipStat_4 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/6/part_rifle_butt.png"><div class="tooltip_bar"><small>Rifle Butt<strong>' + compDataSet.customization["durability"] + '</strong></small><div class="bar durability"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + compDataCustomiz_4 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_durability.png"><div><small title="Durability">Durability</small><strong title="' + compDataCustomValue_4 + ' use(s)">' + compDataCustomValue_4 + ' use(s)</strong></div>';
					
					$('.offers tr[id*=' + compDataSet.id + '] td:eq(1) .entity').html('<a class="industryImage" href="javascript:;"><img src="http://www.erepublik.com/images/icons/industry/' + indId + '/q' + custLevel + '.png"><div class="tooltip_marketplace"><div class="head_icon"><img width="90" height="90" alt="" src="http://www.erepublik.com/images/icons/industry/' + indId + '/q' + custLevel + '_90x90.png"></div><div class="tooltip_content"><div style="" class="tooltip_stat">' + tooltipStat_1 + '</div><div style="" class="tooltip_stat">' + tooltipStat_2 + '</div><div style="" class="tooltip_stat">' + tooltipStat_3 + '</div><div style="" class="tooltip_stat">' + tooltipStat_4 + '</div></div></div></a>');
					$('.offers tr[id*=' + compDataSet.id + '] td:eq(1) .entity').parent().after('<td><div class="entity">Raw: <strong>' + compDataSet.raw_materials_in_stock + '</strong><br>Stock: <strong>' + compDataSet.stock + '</strong><br>Employees: ' + employeesSection + '<br></div></td>');
				
				} else if(indId == 7) {
					compDataCustomiz_1 = mathRound(1.17 * parseFloat(compDataSet.customization["damage"]), 1);
					compDataCustomiz_2 = mathRound(1.17 * parseFloat(compDataSet.customization["attack"]), 1);
					compDataCustomiz_3 = mathRound(1.17 * parseFloat(compDataSet.customization["defense"]), 1);
					compDataCustomiz_4 = mathRound(1.17 * parseFloat(compDataSet.customization["durability"]), 1);
					
					compDataCustomValue_1 = mathRound(parseFloat(compDataSet.customization["damage"]) * 0.14, 2);
					compDataCustomValue_2 = parseFloat(compDataSet.customization["attack"]);
					compDataCustomValue_3 = parseFloat(compDataSet.customization["defense"]);
					compDataCustomValue_4 = parseFloat(compDataSet.customization["durability"]);
					
					tooltipStat_1 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/7/part_ammunition.png"><div class="tooltip_bar"><small>Ammunition<strong>' + compDataSet.customization["damage"] + '</strong></small><div class="bar damage"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + compDataCustomiz_1 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_damage.png"><div><small title="Damage">Damage</small><strong title="' + compDataCustomValue_1 + ' ">' + compDataCustomValue_1 + ' </strong></div>';
					tooltipStat_2 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/7/part_tank_barrel.png"><div class="tooltip_bar"><small>Tank Barrel<strong>' + compDataSet.customization["attack"] + '</strong></small><div class="bar attack"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + compDataCustomiz_2 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_attack.png"><div><small title="Attack">Attack</small><strong title="' + compDataCustomValue_2 + ' ">' + compDataCustomValue_2 + ' </strong></div>';
					tooltipStat_3 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/7/part_body.png"><div class="tooltip_bar"><small>Body<strong>' + compDataSet.customization["defense"] + '</strong></small><div class="bar defense"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + compDataCustomiz_3 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_defense.png"><div><small title="Defense">Defense</small><strong title="' + compDataCustomValue_3 + ' ">' + compDataCustomValue_3 + ' </strong></div>';
					tooltipStat_4 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/7/part_engine.png"><div class="tooltip_bar"><small>Engine<strong>' + compDataSet.customization["durability"] + '</strong></small><div class="bar durability"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + compDataCustomiz_4 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_durability.png"><div><small title="Durability">Durability</small><strong title="' + compDataCustomValue_4 + ' use(s)">' + compDataCustomValue_4 + ' use(s)</strong></div>';
					
					$('.offers tr[id*=' + compDataSet.id + '] td:eq(1) .entity').html('<a class="industryImage" href="javascript:;"><img src="http://www.erepublik.com/images/icons/industry/' + indId + '/q' + custLevel + '.png"><div class="tooltip_marketplace"><div class="head_icon"><img width="90" height="90" alt="" src="http://www.erepublik.com/images/icons/industry/' + indId + '/q' + custLevel + '_90x90.png"></div><div class="tooltip_content"><div style="" class="tooltip_stat">' + tooltipStat_1 + '</div><div style="" class="tooltip_stat">' + tooltipStat_2 + '</div><div style="" class="tooltip_stat">' + tooltipStat_3 + '</div><div style="" class="tooltip_stat">' + tooltipStat_4 + '</div></div></div></a>');
					$('.offers tr[id*=' + compDataSet.id + '] td:eq(1) .entity').parent().after('<td><div class="entity">Raw: <strong>' + compDataSet.raw_materials_in_stock + '</strong><br>Stock: <strong>' + compDataSet.stock + '</strong><br>Employees: ' + employeesSection + '<br></div></td>');
				
				} else if(indId == 8) {
					compDataCustomiz_1 = mathRound(1.17 * parseFloat(compDataSet.customization["damage"]), 1);
					compDataCustomiz_2 = mathRound(1.17 * parseFloat(compDataSet.customization["attack"]), 1);
					compDataCustomiz_3 = mathRound(1.17 * parseFloat(compDataSet.customization["defense"]), 1);
					compDataCustomiz_4 = mathRound(1.17 * parseFloat(compDataSet.customization["durability"]), 1);
					
					compDataCustomValue_1 = mathRound(parseFloat(compDataSet.customization["damage"]) * 0.12, 2);
					compDataCustomValue_2 = parseFloat(compDataSet.customization["attack"]);
					compDataCustomValue_3 = parseFloat(compDataSet.customization["defense"]);
					compDataCustomValue_4 = parseFloat(compDataSet.customization["durability"]);
					
					tooltipStat_1 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/8/part_ammunition.png"><div class="tooltip_bar"><small>Ammunition<strong>' + compDataSet.customization["damage"] + '</strong></small><div class="bar damage"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + compDataCustomiz_1 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_damage.png"><div><small title="Damage">Damage</small><strong title="' + compDataCustomValue_1 + ' ">' + compDataCustomValue_1 + ' </strong></div>';
					tooltipStat_2 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/8/part_gun_barrel.png"><div class="tooltip_bar"><small>Gun Barrel<strong>' + compDataSet.customization["attack"] + '</strong></small><div class="bar attack"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + compDataCustomiz_2 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_attack.png"><div><small title="Attack">Attack</small><strong title="' + compDataCustomValue_2 + ' ">' + compDataCustomValue_2 + ' </strong></div>';
					tooltipStat_3 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/8/part_body.png"><div class="tooltip_bar"><small>Body<strong>' + compDataSet.customization["defense"] + '</strong></small><div class="bar defense"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + compDataCustomiz_3 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_defense.png"><div><small title="Defense">Defense</small><strong title="' + compDataCustomValue_3 + ' ">' + compDataCustomValue_3 + ' </strong></div>';
					tooltipStat_4 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/8/part_engine.png"><div class="tooltip_bar"><small>Engine<strong>' + compDataSet.customization["durability"] + '</strong></small><div class="bar durability"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + compDataCustomiz_4 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_durability.png"><div><small title="Durability">Durability</small><strong title="' + compDataCustomValue_4 + ' use(s)">' + compDataCustomValue_4 + ' use(s)</strong></div>';
					
					$('.offers tr[id*=' + compDataSet.id + '] td:eq(1) .entity').html('<a class="industryImage" href="javascript:;"><img src="http://www.erepublik.com/images/icons/industry/' + indId + '/q' + custLevel + '.png"><div class="tooltip_marketplace"><div class="head_icon"><img width="90" height="90" alt="" src="http://www.erepublik.com/images/icons/industry/' + indId + '/q' + custLevel + '_90x90.png"></div><div class="tooltip_content"><div style="" class="tooltip_stat">' + tooltipStat_1 + '</div><div style="" class="tooltip_stat">' + tooltipStat_2 + '</div><div style="" class="tooltip_stat">' + tooltipStat_3 + '</div><div style="" class="tooltip_stat">' + tooltipStat_4 + '</div></div></div></a>');
					$('.offers tr[id*=' + compDataSet.id + '] td:eq(1) .entity').parent().after('<td><div class="entity">Raw: <strong>' + compDataSet.raw_materials_in_stock + '</strong><br>Stock: <strong>' + compDataSet.stock + '</strong><br>Employees: ' + employeesSection + '<br></div></td>');
				
				} else if(indId == 9) {
					compDataCustomiz_1 = mathRound(1.17 * parseFloat(compDataSet.customization["damage"]), 1);
					compDataCustomiz_2 = mathRound(1.17 * parseFloat(compDataSet.customization["attack"]), 1);
					compDataCustomiz_3 = mathRound(1.17 * parseFloat(compDataSet.customization["defense"]), 1);
					compDataCustomiz_4 = mathRound(1.17 * parseFloat(compDataSet.customization["durability"]), 1);
					
					compDataCustomValue_1 = mathRound(parseFloat(compDataSet.customization["damage"]) / 10, 2);
					compDataCustomValue_2 = parseFloat(compDataSet.customization["attack"]);
					compDataCustomValue_3 = parseFloat(compDataSet.customization["defense"]);
					compDataCustomValue_4 = parseFloat(compDataSet.customization["durability"]);
					
					tooltipStat_1 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/9/part_ammunition.png"><div class="tooltip_bar"><small>Ammunition<strong>' + compDataSet.customization["damage"] + '</strong></small><div class="bar damage"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + compDataCustomiz_1 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_damage.png"><div><small title="Damage">Damage</small><strong title="' + compDataCustomValue_1 + ' ">' + compDataCustomValue_1 + ' </strong></div>';
					tooltipStat_2 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/9/part_missiles.png"><div class="tooltip_bar"><small>Missiles<strong>' + compDataSet.customization["attack"] + '</strong></small><div class="bar attack"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + compDataCustomiz_2 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_attack.png"><div><small title="Attack">Attack</small><strong title="' + compDataCustomValue_2 + ' ">' + compDataCustomValue_2 + ' </strong></div>';
					tooltipStat_3 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/9/part_body.png"><div class="tooltip_bar"><small>Body<strong>' + compDataSet.customization["defense"] + '</strong></small><div class="bar defense"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + compDataCustomiz_3 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_defense.png"><div><small title="Defense">Defense</small><strong title="' + compDataCustomValue_3 + ' ">' + compDataCustomValue_3 + ' </strong></div>';
					tooltipStat_4 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/9/part_engine.png"><div class="tooltip_bar"><small>Engine<strong>' + compDataSet.customization["durability"] + '</strong></small><div class="bar durability"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + compDataCustomiz_4 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_durability.png"><div><small title="Durability">Durability</small><strong title="' + compDataCustomValue_4 + ' use(s)">' + compDataCustomValue_4 + ' use(s)</strong></div>';
					
					$('.offers tr[id*=' + compDataSet.id + '] td:eq(1) .entity').html('<a class="industryImage" href="javascript:;"><img src="http://www.erepublik.com/images/icons/industry/' + indId + '/q' + custLevel + '.png"><div class="tooltip_marketplace"><div class="head_icon"><img width="90" height="90" alt="" src="http://www.erepublik.com/images/icons/industry/' + indId + '/q' + custLevel + '_90x90.png"></div><div class="tooltip_content"><div style="" class="tooltip_stat">' + tooltipStat_1 + '</div><div style="" class="tooltip_stat">' + tooltipStat_2 + '</div><div style="" class="tooltip_stat">' + tooltipStat_3 + '</div><div style="" class="tooltip_stat">' + tooltipStat_4 + '</div></div></div></a>');
					$('.offers tr[id*=' + compDataSet.id + '] td:eq(1) .entity').parent().after('<td><div class="entity">Raw: <strong>' + compDataSet.raw_materials_in_stock + '</strong><br>Stock: <strong>' + compDataSet.stock + '</strong><br>Employees: ' + employeesSection + '<br></div></td>');
				
				} else {
					$('.offers tr[id*=' + compDataSet.id + '] td:eq(1) .entity').html('<img src="http://www.erepublik.com/images/icons/industry/' + indId + '/default.png">');
					$('.offers tr[id*=' + compDataSet.id + '] td:eq(1) .entity').parent().after('<td><div class="entity">Stock: <strong>' + compDataSet.stock + '</strong><br>Employees: ' + employeesSection + '<br></div></td>');
				}
			}
		});
	}
}
// ---------------------------------------------------------------------------------------------------------------------

// -- Company employees ------------------------------------------------------------------------------------------------
function reCalc(prodLevel, prodModifier, f_total_productivity, product_price, f_total_salary, rawPerProd, f_total_salary, ecur, ex_rate, f_total_cost, raw_price) {	
	if (prodLevel == -1) {
		var fProfit = f_total_productivity * product_price - f_total_salary;
		
		$('#real_price_gold').html(mathRound(product_price * ex_rate, 5).toFixed(5));
		
		$('#total_productivity').html(mathRound(f_total_productivity, 2).toFixed(2));
		$('#products').html(mathRound(f_total_productivity / rawPerProd, 2).toFixed(2));
		
		$('#total_salary').html(mathRound(f_total_salary, 2).toFixed(2) + ' ' + ecur);
		$('#total_salary_gold').html(mathRound(f_total_salary * ex_rate, 5).toFixed(5));
		
		$('#profit').html(mathRound(fProfit, 2).toFixed(2) + ' ' + ecur);
		$('#profit').css('color', colorChoose(mathRound(fProfit, 2).toFixed(2)));
		$('#profit_gold').html(mathRound(fProfit * ex_rate, 5).toFixed(5));
		$('#per_product').html(mathRound(fProfit / f_total_productivity, 2).toFixed(2) + ' ' + ecur);
		$('#per_product_gold').html(mathRound((fProfit / f_total_productivity) * ex_rate, 5).toFixed(5));
		
		$('#total_cost').html(mathRound(f_total_cost, 2).toFixed(2) + ' ' + ecur);
		$('#total_cost_gold').html(mathRound(f_total_cost * ex_rate, 5).toFixed(5));
		$('#total_cost_per_product').html(mathRound(f_total_cost / f_total_productivity, 2).toFixed(2) + ' ' + ecur);
		$('#total_cost_per_product_gold').html(mathRound((f_total_cost / f_total_productivity) * ex_rate, 5).toFixed(5));
	} else {
		var pUnits = f_total_productivity / rawPerProd;
		var rawCost = f_total_productivity * raw_price;
		var fProfit = pUnits * product_price - f_total_salary - rawCost;
		
		$('#real_price_gold').html(mathRound(product_price * ex_rate, 5).toFixed(5));
		$('#real_raw_price_gold').html(mathRound(raw_price * ex_rate, 5).toFixed(5));
		
		$('#total_productivity').html(mathRound(f_total_productivity, 2).toFixed(2));
		$('#products').html(mathRound(f_total_productivity / rawPerProd, 2).toFixed(2));
		
		$('#raw_cost').html(mathRound(f_total_productivity * raw_price, 2).toFixed(2) + ' '+ecur);
		$('#raw_cost_gold').html(mathRound(f_total_productivity * raw_price * ex_rate, 5).toFixed(5));
		$('#raw_needed').html(mathRound(f_total_productivity, 2).toFixed(2));
		
		$('#total_salary').html(mathRound(f_total_salary, 2).toFixed(2) + ' ' + ecur);
		$('#total_salary_gold').html(mathRound(f_total_salary * ex_rate, 5).toFixed(5));
		
		$('#profit').html(mathRound(fProfit, 2).toFixed(2) + ' ' + ecur);
		$('#profit').css('color', colorChoose(mathRound(fProfit, 2).toFixed(2)));
		$('#profit_gold').html(mathRound(fProfit * ex_rate, 5).toFixed(5));
		$('#per_product').html(mathRound(fProfit / pUnits, 2).toFixed(2) + ' ' + ecur);
		$('#per_product_gold').html(mathRound((fProfit / pUnits) * ex_rate, 5).toFixed(5));
		
		$('#total_cost').html(mathRound(f_total_cost, 2).toFixed(2) + ' ' + ecur);
		$('#total_cost_gold').html(mathRound(f_total_cost * ex_rate, 5).toFixed(5));
		$('#total_cost_per_product').html(mathRound(f_total_cost / pUnits, 2).toFixed(2) + ' ' + ecur);
		$('#total_cost_per_product_gold').html(mathRound((f_total_cost / pUnits) * ex_rate, 5).toFixed(5));
	}
	
	var companyId = $('.product_attributes').attr('id').split('_')[1];
	
	if (eRAcomp[companyId].worked != undefined) {
		var totalWorkedWorkers = 0;
		var totalWorkedProfit = 0;
		for (var x in eRAcomp[companyId].worked) {
			totalWorkedWorkers += 1;
			totalWorkedProfit += parseFloat(eRAcomp[companyId].worked[x]);
		}
	} else {
		var totalWorkedWorkers = 0;
		var totalWorkedProfit = 0;
	}
	
	$('#total_worked_workers').html(totalWorkedWorkers);
	$('#total_worked_profit').html(mathRound(totalWorkedProfit, 2).toFixed(2) + ' ' + ecur);
	$('#total_worked_profit').css('color', colorChoose(mathRound(totalWorkedProfit, 2).toFixed(2)));
	$('#total_worked_profit_gold').html(mathRound(totalWorkedProfit * ex_rate, 5).toFixed(5));
}

function calcUserProfit(){
	if ($('.manage_company').size() <= 0) {
		return;
	}
	
	if (eRAopt['company'] == "false") {
		return;
	}
	
	readSettings('company');
	
	$('.internal_content').prepend('<div id="loadingHolder" class="loadingHolder"><table width="100%"><tr height="230px" align="center"><td style="font-size: 14px;">Loading data, please wait...<br/><br/><br/><img src="http://www.erepublik.com/images/parts/ajax-loader.gif"/></td></tr></table></div>');
	
	count = 0;
	var rowCount = $('#employee_list >table >tbody >tr').length;
	var companyId = $('.product_attributes').attr('id').split('_')[1];
	var ecur = $('.ecur').eq(0).text();
	var companyRegion = $('.region').text();
	
	var prodType = $('.product_type').attr('alt');
	
	var eToday = parseFloat($('.eday').text().trim().split(' ')[1].replace(',', ''));
	var eTodayIndex = (eToday - 965) % 7;
	
	var empCount = parseFloat(eRAcomp[companyId].empcount);
	var empMulti = 2;
	var prodLevel = 1;
	var prodModifier = 1;
	var rawPerProd = 1;
	var recEmpCount = 10;
	
	if (empCount > 0) {
		$('#loadingHolder').css('display', 'inline');
	}
	
	if (eRAcomp[companyId].unitprice == undefined) {
		product_price = 0;
	} else {
		product_price = parseFloat(eRAcomp[companyId].unitprice);
	}
	if (eRAcomp[companyId].rawprice == undefined) {
		raw_price = 0;
	} else {
		raw_price = parseFloat(eRAcomp[companyId].rawprice);
	}
	var ex_rate = eRAcomp[companyId].exchange[ecur];

	var t_productivity = 0;
	var f_productivity = 0;
	var t_total_productivity = 0;
	var f_total_productivity = 0;
	var t_salary = 0;
	var f_salary = 0;
	var t_total_salary = 0;
	var f_total_salary = 0;
	var t_profit = 0;
	var f_profit = 0;
	var t_total_profit = 0;
	var f_total_profit = 0;
	var t_prodCount = 0;
	var f_prodCount = 0;
	var t_cost = 0;
	var f_cost = 0;
	var t_total_cost = 0;
	var f_total_cost = 0;

	$('.el_mainh').append('<th class="el_employee" style="padding: 3px 10px 3px 5px; width: 50px;">Profit</th>');
	$('.el_days').append('<th>&nbsp;</th>');
	$('#employee_list table tbody tr .el_salary').each(function(index, ele) {
		var profileId = $('.el_img').eq(index).attr('href');
		profileId = profileId.substring(profileId.lastIndexOf('/') + 1);
		$('.el_img').eq(index).after('<div style="padding-top: 6px;"><a href="http://economy.erepublik.com/en/citizen/donate/' + profileId + '" style="margin-right: 3px;"><img title="Donate" src="' + iconDonate + '" style="border: none;"></a><a href="http://www.erepublik.com/en/messages/compose/' + profileId + '"><img title="Send message" src="' + iconMessage + '" style="border: none;"></a></div>');
		$(this).after('<td class="p_container" style="padding: 3px 0px 3px 5px;"></td>');
	});
	
	if(industry_id[prodType.toLowerCase()] >= 10 && industry_id[prodType.toLowerCase()] <= 14) {
		prodLevel = -1;
		prodModifier = parseInt(region_industry_productivity[companyRegion.toLowerCase() + '_' + prodType.toLowerCase()]);
	} else {
		var companyInfo = $('.product_type').attr('src');
		var startIndex = companyInfo.lastIndexOf('/');	
		var endIndex = companyInfo.lastIndexOf('.');	
		prodLevel = parseInt(companyInfo.substring(startIndex + 2 , endIndex));
	
		if(prodType == 'Food') {
			rawPerProd = prodLevel * 9;
		} else if(prodType == 'Moving Tickets') {
			rawPerProd = prodLevel * 80;
		} else if(prodType == 'Tank' || prodType == 'Air Unit' || prodType == 'Rifle' || prodType == 'Artillery') {
			rawPerProd = prodLevel * 60;
		} else if(prodType == 'House') {
			recEmpCount = 20;
			rawPerProd = prodLevel * 1000;
		} else if(prodType == 'Defense System') {
			recEmpCount = 20;
			rawPerProd = prodLevel * 20000;
		} else if(prodType == 'Hospital') {
			recEmpCount = 20;
			rawPerProd = prodLevel * 20000;
		}
	}
	
	if(empCount < recEmpCount) {
		empMulti = 1 + (empCount / recEmpCount);
	} else {
		empMulti = 3 - (empCount / recEmpCount);
	}
	
	if(empMulti < 1) {
		empMulti = 1;
	}
	
	if (eRAcomp['day'] != eToday) {
		eRAcomp['day'] = eToday;
		eRAcomp[companyId].worked = {}
		writeSettings(document.userid + '.Company', eRAcomp);
	}
	
	GM_deleteValue(companyId + '.empCount');
	GM_deleteValue(companyId + '.real_price');
	GM_deleteValue(companyId + '.real_raw_price');
	GM_deleteValue(companyId + '.WorkedValues');
	GM_deleteValue(companyId + '.WorkerData');
	GM_deleteValue(companyId + '.WorkedDay');
	
	$('.internal_content').prepend('<div class="day_prof_table"><table><tr height="50px" align="center"><td><table><tr><td valign="top" width="153px" style="text-align: center; border-bottom: 0px; padding: 0px !important;">&nbsp;</td><td valign="top" width="172px" style="text-align: center; border-bottom: 0px; padding: 0px !important;"><p class="regular">Total workers<br/>worked today</p><p class="special"><span id="total_worked_workers">0</span></p></td><td valign="top" width="172px" style="text-align: center; border-bottom: 0px; padding: 0px !important;"><p class="regular">Total profit today</p><p class="special"><span id="total_worked_profit">0.00 ' + ecur +'</span></p><p class="currency" style="font-size: 12px;"><span id="total_worked_profit_gold">0.000</span><span> GOLD</span></p></td><td valign="middle" width="153px" style="text-align: right; border-bottom: 0px; padding: 0px !important;"></td></tr></table></td></tr></table></div>');
			
	// Insert total profit values at the top
	if(industry_id[prodType.toLowerCase()] >= 10 && industry_id[prodType.toLowerCase()] <= 14) {
		var raw_td = '<td valign="top" width="132px" style="border-bottom: 0px; padding: 0px !important;"><div class="left"><p class="regular">&nbsp;</p></div></td>';
	} else {
		var raw_td = '<td valign="top" width="132px" style="border-bottom: 0px; padding: 0px !important;"><div class="left"><p class="regular">Raw cost</p><p class="special"><span id="raw_cost">0.00 ' + ecur + '</span></p><p class="currency" style="font-size: 12px;"><span id="raw_cost_gold">0.000</span><span> GOLD</span></p><p class="currency" style="font-size: 12px;"><span id="raw_needed">0</span><span> raw needed</span></p></div></td>';
	}
	
	$('.internal_content').prepend('<div class="prof_table"><table><tr height="100px" align="center"><td><table style="margin-left: 30px"><tr><td valign="top" width="132px" style="border-bottom: 0px; padding: 0px !important;"><div class="left"><p class="regular">Total productivity</p><p class="special"><span id="total_productivity">0.00</span></p><p class="currency" style="font-size: 12px;"><span id="products">0.00</span><span> products</span></p></div></td>' + raw_td + '<td valign="top" width="132px" style="border-bottom: 0px; padding: 0px !important;"><div class="left"><p class="regular">Salary cost</p><p class="special"><span id="total_salary">0.00 ' + ecur + '</span></p><p class="currency" style="font-size: 12px;"><span id="total_salary_gold">0.000</span><span> GOLD</span></p></div></td><td valign="top" width="142px" style="border-bottom: 0px; padding: 0px !important;"><div class="left"><p class="regular">Total cost</p><p class="special"><span id="total_cost">0.00 ' + ecur + '</span></p><p class="currency" style="font-size: 12px;"><span id="total_cost_gold">0.000</span><span> GOLD</span></p><p class="currency" style="font-size: 12px;"><span id="total_cost_per_product">0.00 ' + ecur + '</span><span> / prod.</span></p><p class="currency" style="font-size: 12px;"><span id="total_cost_per_product_gold">0.000</span><span> GOLD / prod.</span></p></div></td><td valign="top" width="132px" style="border-bottom: 0px; padding: 0px !important;"><div class="left"><p class="regular">Daily profit</p><p class="special"><span id="profit">0.00 ' + ecur + '</span></p><p class="currency" style="font-size: 12px;"><span id="profit_gold">0.000</span><span> GOLD</span></p><p class="currency" style="font-size: 12px;"><span id="per_product">0.00 ' + ecur + '</span><span> / prod.</span></p><p class="currency" style="font-size: 12px;"><span id="per_product_gold">0.000</span><span> GOLD / prod.</span></p></div></td></tr></table></td></tr></table></div>');
	
	if(industry_id[prodType.toLowerCase()] >= 10 && industry_id[prodType.toLowerCase()] <= 14) {
		$('.internal_content').prepend('<table><tr height="80px"><td style="padding: 0px 0px 10px 0px !important;"><table><tr><td width="153px" style="border-bottom: 0px;">&nbsp;</td><td width="172px" class="el_salary" style="font-size: 12px; text-align: center; border-bottom: 0px;">Product price</td><td width="172px" class="el_salary" style="text-align: center; border-bottom: 0px;">&nbsp;</td><td width="193px" style="border-bottom: 0px;">&nbsp;</td></tr><tr><td style="border-bottom: 0px;">&nbsp;</td><td class="el_salary" style="text-align: center; border-bottom: 0px;"><input type="text" id="real_price" class="sallary_field" style="float: none; font-size: 18px; width: 70px; padding: 2px 50px 2px 2px;"></input><span class="ecur" style="float: none; font-size: 18px; margin-left: -47px;">' + ecur + '</span><p class="currency" style="font-size: 12px;"><span id="real_price_gold">0.000</span><span> GOLD</span></p></td><td class="el_salary" style="text-align: center; border-bottom: 0px;">&nbsp;</td><td style="border-bottom: 0px;">&nbsp;</td></tr></table></td></tr></table>');
		$('#real_price').val(mathRound(product_price, 3).toFixed(3));
	} else {
		$('.internal_content').prepend('<table><tr height="80px"><td colspan="6" style="padding: 0px 0px 10px 0px !important;"><table><tr><td width="153px" style="border-bottom: 0px;">&nbsp;</td><td width="172px" class="el_salary" style="font-size: 12px; text-align: center; border-bottom: 0px;">Product price</td><td width="172px" class="el_salary" style="font-size: 12px; text-align: center; border-bottom: 0px;">Raw price</td><td width="193px" style="border-bottom: 0px;">&nbsp;</td></tr><tr><td style="border-bottom: 0px;">&nbsp;</td><td class="el_salary" style="text-align: center; border-bottom: 0px;"><input type="text" id="real_price" class="sallary_field" style="float: none; font-size: 18px; width: 70px; padding: 2px 50px 2px 2px;"></input><span class="ecur" style="float: none; font-size: 18px; margin-left: -47px;">' + ecur + '</span><p class="currency" style="font-size: 12px;"><span id="real_price_gold">0.000</span><span> GOLD</span></p></td><td class="el_salary" style="text-align:center; border-bottom: 0px;"><input type="text" id="real_raw_price" class="sallary_field" style="float: none; font-size: 18px; width: 70px; padding: 2px 50px 2px 2px;"></input><span class="ecur" style="float: none; font-size: 18px; margin-left: -47px;">' + ecur + '</span><p class="currency" style="font-size: 12px;"><span id="real_raw_price_gold">0.000</span><span> GOLD</span></p></td><td style="border-bottom: 0px;">&nbsp;</td></tr></table></td></tr></table>');
		$('#real_price').val(mathRound(product_price, 3).toFixed(3));
		$('#real_raw_price').val(mathRound(raw_price, 3).toFixed(3));
	}
	
	// calculate profit for each employee
	$('#employee_list table tbody tr .el_salary').each(function(index, ele) {
		var workerData = null;

		$('.p_container').eq(index).html('');
		
		var skillLevel = $('.skiller').eq(index).text().trim().split(' ')[0];
		var profileId = $('.el_img').eq(index).attr('href');
		profileId = profileId.substring(profileId.lastIndexOf('/') + 1);
		var salary = $(this).find('input').val();
		
		if (eRAcomp[companyId].workersalary == undefined) {
			eRAcomp[companyId].workersalary = {}
		}
		eRAcomp[companyId].workersalary[profileId] = salary;
		writeSettings(document.userid + '.Company', eRAcomp);
		
		var t_health = null;
		var t_happiness = null;
		
		GM_xmlhttpRequest({
			method: 'GET',
			url: API_URL + 'citizens/' + profileId + '.json',
			onload: function(response) {
				try {
					workerData = eval('(' + response.responseText + ')');
					
					if (workerData.wellness == undefined && workerData.happiness == undefined) {
						t_health = 100;
						t_happiness = 100;
					} else {
						t_health = parseFloat(workerData.wellness);
						t_happiness = parseFloat(workerData.happiness);
					}
					
					if(prodLevel == -1) {
						var workResultTD = $('.el_day').eq(index * 7 + eTodayIndex);
						
						if(workResultTD.text() != '') {
							var json = $('script', workResultTD).text();
							var r_productivity = getJSON(json, 'prod').replace(',', '');
							health = getJSON(json, 'well');
							happiness = getJSON(json, 'happ');
							
							t_productivity = 0.5 * empMulti * (3.6 + skillLevel * 0.4) * ((1 + 2 * t_health / 100) + (1 + 2 * t_happiness / 100)) * 8 * 1.1 / prodModifier;
							t_profit = t_productivity * product_price - parseFloat(salary);
							t_cost = parseFloat(salary);
							
							f_productivity = parseFloat(r_productivity);
							f_profit = f_productivity * product_price - parseFloat(salary);
							f_cost = parseFloat(salary);
							
							$('.p_container').eq(index).append('<div class="t" id="t_profit_' + profileId + '"><div id="hiddenHealth" style="display: none">' + t_health + '</div><div id="hiddenHappiness" style="display: none">' + t_happiness + '</div>t: <strong style="font-size: 11px; color:' + colorChoose(t_profit) + '">' + mathRound(t_profit, 2).toFixed(2) + '</strong><div class="ttip"><table><tr><td align="center" style="padding: 5px 5px 5px 5px;"><strong>Profit in theory</strong></td></tr><tr><td align="center" style="padding: 5px 3px 5px 6px;">Productivity</td></tr><tr><td align="center" style="padding: 5px 3px 5px 6px;"><strong>' + mathRound(t_productivity, 0) + '</strong></td></tr></table><table><tr><td colspan="2" align="center" style="padding: 5px 5px 5px 5px;">Worker state</td></tr><tr><td align="center" style="border-bottom: none;"><span class="t_health"><strong>' + t_health.toFixed(2) + '</strong></span></td><td align="center" style="border-bottom: none;"><span class="t_happy"><strong>' + t_happiness.toFixed(2) + '</strong></span></td></tr></table><table><tr><td colspan="2" align="center" style="padding: 5px 5px 5px 5px; border-top: 1px solid #eeeeee;">Salary</td></tr><tr><td valign="bottom" align="center" style="border-bottom: none; padding: 5px 3px 5px 6px;"><img src="http://www.erepublik.com/images/flags/S/' + currency_country[ecur] + '.gif"><br/><strong>' + mathRound(parseFloat(salary), 2).toFixed(2) + '</strong></td><td valign="bottom" align="center" style="border-bottom: none; padding: 5px 6px 5px 3px;"><img src="http://www.erepublik.com/images/parts/icon-gold.gif"><br/><strong>' + mathRound(parseFloat(salary) * ex_rate, 3).toFixed(3) + '</strong></td></tr></table></div></div>');
							$('.p_container').eq(index).append('f: <strong style="font-size: 11px; color:' + colorChoose(f_profit) + '" id="f_profit_' + profileId + '" title="Profit by the fact">' + mathRound(f_profit, 2).toFixed(2) + '</strong><br/>');
//							$('.p_container').eq(index).append('<div class="t" id="f_salary_' + profileId + '">s: <strong style="font-size: 11px;">' + mathRound(parseFloat(salary), 2).toFixed(2) + '</strong><div class="ttip"><table><tr><td colspan="2" align="center" style="padding: 5px 5px 5px 5px;"><strong>Salary by fact</strong></td></tr><tr><td valign="bottom" align="center" style="border-bottom: none; padding: 5px 3px 5px 6px;"><img src="http://www.erepublik.com/images/flags/S/' + currency_country[ecur] + '.gif"><br/><strong>' + mathRound(parseFloat(salary), 2).toFixed(2) + '</strong></td><td valign="bottom" align="center" style="border-bottom: none; padding: 5px 6px 5px 3px;"><img src="http://www.erepublik.com/images/parts/icon-gold.gif"><br/><strong>' + mathRound(parseFloat(salary) * ex_rate, 3).toFixed(3) + '</strong></td></tr></table></div></div>');
							
							f_total_profit += f_profit;
							f_total_productivity += f_productivity;
							f_total_salary += parseFloat(salary);
							f_total_cost += f_cost;
							
							var f_prof = f_profit + '';
							
							if (eRAcomp[companyId].worked[profileId] == undefined) {
								eRAcomp[companyId].worked[profileId] = f_prof;
								writeSettings(document.userid + '.Company', eRAcomp);
							}
						} else {
							t_productivity = 0.5 * empMulti * (3.6 + skillLevel * 0.4) * ((1 + 2 * t_health / 100) + (1 + 2 * t_happiness / 100)) * 8 * 1.1 / prodModifier;
							t_profit = t_productivity * product_price - parseFloat(salary);
							t_cost = parseFloat(salary);
							
							$('.p_container').eq(index).append('<div class="t" id="t_profit_' + profileId + '"><div id="hiddenHealth" style="display: none">' + t_health + '</div><div id="hiddenHappiness" style="display: none">' + t_happiness + '</div>t: <strong style="font-size: 11px; color:' + colorChoose(t_profit) + '">' + mathRound(t_profit, 2).toFixed(2) + '</strong><div class="ttip"><table><tr><td align="center" style="padding: 5px 5px 5px 5px;"><strong>Profit in theory</strong></td></tr><tr><td align="center" style="padding: 5px 3px 5px 6px;">Productivity</td></tr><tr><td align="center" style="padding: 5px 3px 5px 6px;"><strong>' + mathRound(t_productivity, 0) + '</strong></td></tr></table><table><tr><td colspan="2" align="center" style="padding: 5px 5px 5px 5px;">Worker state</td></tr><tr><td align="center" style="border-bottom: none;"><span class="t_health"><strong>' + t_health.toFixed(2) + '</strong></span></td><td align="center" style="border-bottom: none;"><span class="t_happy"><strong>' + t_happiness.toFixed(2) + '</strong></span></td></tr></table><table><tr><td colspan="2" align="center" style="padding: 5px 5px 5px 5px; border-top: 1px solid #eeeeee;">Salary</td></tr><tr><td valign="bottom" align="center" style="border-bottom: none; padding: 5px 3px 5px 6px;"><img src="http://www.erepublik.com/images/flags/S/' + currency_country[ecur] + '.gif"><br/><strong>' + mathRound(parseFloat(salary), 2).toFixed(2) + '</strong></td><td valign="bottom" align="center" style="border-bottom: none; padding: 5px 6px 5px 3px;"><img src="http://www.erepublik.com/images/parts/icon-gold.gif"><br/><strong>' + mathRound(parseFloat(salary) * ex_rate, 3).toFixed(3) + '</strong></td></tr></table></div></div>');
							$('.p_container').eq(index).append('f:&nbsp;&nbsp;&nbsp;&mdash;&nbsp;&nbsp;<br/>');
//							$('.p_container').eq(index).append('s:&nbsp;&nbsp;&nbsp;&mdash;&nbsp;&nbsp;');
							
							f_total_profit += t_profit;
							f_total_productivity += t_productivity;
							f_total_salary += parseFloat(salary);
							f_total_cost += t_cost;
						}
					} else {
						var workResultTD = $('.el_day').eq(index * 7 + eTodayIndex);
					
						if(workResultTD.text() != '') {
							var json = $('script', workResultTD).text();
							var r_productivity = getJSON(json, 'prod').replace(',', '');
							health = getJSON(json, 'well');
							happiness = getJSON(json, 'happ');
							
							t_productivity = 0.5 * empMulti * (3.6 + skillLevel * 0.4) * ((1 + 2 * t_health / 100) + (1 + 2 * t_happiness / 100)) * 8 * 1.1;
							t_prodCount = t_productivity / rawPerProd;
							t_profit = t_prodCount * product_price - parseFloat(salary) - t_productivity * raw_price;
							t_cost = parseFloat(salary) + t_productivity * raw_price;
							
							f_productivity = parseFloat(r_productivity);
							f_prodCount = f_productivity / rawPerProd;
							f_profit = f_prodCount * product_price - parseFloat(salary) - f_productivity * raw_price;
							f_cost = parseFloat(salary) + f_productivity * raw_price;
							
							$('.p_container').eq(index).append('<div class="t" id="t_profit_' + profileId + '"><div id="hiddenHealth" style="display: none">' + t_health + '</div><div id="hiddenHappiness" style="display: none">' + t_happiness + '</div>t: <strong style="font-size: 11px; color:' + colorChoose(t_profit) + '">' + mathRound(t_profit, 2).toFixed(2) + '</strong><div class="ttip"><table><tr><td align="center" style="padding: 5px 5px 5px 5px;"><strong>Profit in theory</strong></td></tr><tr><td align="center" style="padding: 5px 3px 5px 6px;">Productivity</td></tr><tr><td align="center" style="padding: 5px 3px 5px 6px;"><strong>' + mathRound(t_productivity, 0) + '</strong></td></tr></table><table><tr><td colspan="2" align="center" style="padding: 5px 5px 5px 5px;">Worker state</td></tr><tr><td align="center" style="border-bottom: none;"><span class="t_health"><strong>' + t_health.toFixed(2) + '</strong></span></td><td align="center" style="border-bottom: none;"><span class="t_happy"><strong>' + t_happiness.toFixed(2) + '</strong></span></td></tr></table><table><tr><td colspan="2" align="center" style="padding: 5px 5px 5px 5px; border-top: 1px solid #eeeeee;">Salary</td></tr><tr><td valign="bottom" align="center" style="border-bottom: none; padding: 5px 3px 5px 6px;"><img src="http://www.erepublik.com/images/flags/S/' + currency_country[ecur] + '.gif"><br/><strong>' + mathRound(parseFloat(salary), 2).toFixed(2) + '</strong></td><td valign="bottom" align="center" style="border-bottom: none; padding: 5px 6px 5px 3px;"><img src="http://www.erepublik.com/images/parts/icon-gold.gif"><br/><strong>' + mathRound(parseFloat(salary) * ex_rate, 3).toFixed(3) + '</strong></td></tr></table></div></div>');
							$('.p_container').eq(index).append('f: <strong style="font-size: 11px; color:' + colorChoose(f_profit) + '" id="f_profit_' + profileId + '" title="Profit by the fact">' + mathRound(f_profit, 2).toFixed(2) + '</strong><br/>');
//							$('.p_container').eq(index).append('<div class="t" id="f_salary_' + profileId + '">s: <strong style="font-size: 11px;">' + mathRound(parseFloat(salary), 2).toFixed(2) + '</strong><div class="ttip"><table><tr><td colspan="2" align="center" style="padding: 5px 5px 5px 5px;"><strong>Salary by fact</strong></td></tr><tr><td valign="bottom" align="center" style="border-bottom: none; padding: 5px 3px 5px 6px;"><img src="http://www.erepublik.com/images/flags/S/' + currency_country[ecur] + '.gif"><br/><strong>' + mathRound(parseFloat(salary), 2).toFixed(2) + '</strong></td><td valign="bottom" align="center" style="border-bottom: none; padding: 5px 6px 5px 3px;"><img src="http://www.erepublik.com/images/parts/icon-gold.gif"><br/><strong>' + mathRound(parseFloat(salary) * ex_rate, 3).toFixed(3) + '</strong></td></tr></table></div></div>');
							
							f_total_profit += f_profit;
							f_total_productivity += f_productivity;
							f_total_salary += parseFloat(salary);
							f_total_cost += f_cost
							
							var f_prof = f_profit + '';
							
							if (eRAcomp[companyId].worked[profileId] == undefined) {
								eRAcomp[companyId].worked[profileId] = f_prof;
								writeSettings(document.userid + '.Company', eRAcomp);
							}
						} else {
							t_productivity = 0.5 * empMulti * (3.6 + skillLevel * 0.4) * ((1 + 2 * t_health / 100) + (1 + 2 * t_happiness / 100)) * 8 * 1.1;
							t_prodCount = t_productivity / rawPerProd;
							t_profit = t_prodCount * product_price - parseFloat(salary) - t_productivity * raw_price;
							t_cost = parseFloat(salary) + t_productivity * raw_price;
							
							$('.p_container').eq(index).append('<div class="t" id="t_profit_' + profileId + '"><div id="hiddenHealth" style="display: none">' + t_health + '</div><div id="hiddenHappiness" style="display: none">' + t_happiness + '</div>t: <strong style="font-size: 11px; color:' + colorChoose(t_profit) + '">' + mathRound(t_profit, 2).toFixed(2) + '</strong><div class="ttip"><table><tr><td align="center" style="padding: 5px 5px 5px 5px;"><strong>Profit in theory</strong></td></tr><tr><td align="center" style="padding: 5px 3px 5px 6px;">Productivity</td></tr><tr><td align="center" style="padding: 5px 3px 5px 6px;"><strong>' + mathRound(t_productivity, 0) + '</strong></td></tr></table><table><tr><td colspan="2" align="center" style="padding: 5px 5px 5px 5px;">Worker state</td></tr><tr><td align="center" style="border-bottom: none;"><span class="t_health"><strong>' + t_health.toFixed(2) + '</strong></span></td><td align="center" style="border-bottom: none;"><span class="t_happy"><strong>' + t_happiness.toFixed(2) + '</strong></span></td></tr></table><table><tr><td colspan="2" align="center" style="padding: 5px 5px 5px 5px; border-top: 1px solid #eeeeee;">Salary</td></tr><tr><td valign="bottom" align="center" style="border-bottom: none; padding: 5px 3px 5px 6px;"><img src="http://www.erepublik.com/images/flags/S/' + currency_country[ecur] + '.gif"><br/><strong>' + mathRound(parseFloat(salary), 2).toFixed(2) + '</strong></td><td valign="bottom" align="center" style="border-bottom: none; padding: 5px 6px 5px 3px;"><img src="http://www.erepublik.com/images/parts/icon-gold.gif"><br/><strong>' + mathRound(parseFloat(salary) * ex_rate, 3).toFixed(3) + '</strong></td></tr></table></div></div>');
							$('.p_container').eq(index).append('f:&nbsp;&nbsp;&nbsp;&mdash;&nbsp;&nbsp;<br/>');
//							$('.p_container').eq(index).append('s:&nbsp;&nbsp;&nbsp;&mdash;&nbsp;&nbsp;');
							
							f_total_profit += t_profit;
							f_total_productivity += t_productivity;
							f_total_salary += parseFloat(salary);
							f_total_cost += t_cost;
						}
					}
					reCalc(prodLevel, prodModifier, f_total_productivity, product_price, f_total_salary, rawPerProd, f_total_salary, ecur, ex_rate, f_total_cost, raw_price);
				} catch (err) {
//					alert(err);
				}
				if (++count == rowCount) {
					$('#loadingHolder').css('display', 'none');
				}
			}
		});
	});
	
// Live functions
	$('#employee_list table tbody tr .el_salary input[id^="salary_"]').live('keyup', function() {
		product_price = parseFloat( $('#real_price').val() );
		if (parseFloat( $('#real_raw_price').val() ) != null || parseFloat( $('#real_raw_price').val() ) != undefined || parseFloat( $('#real_raw_price').val() ) != '') {
			raw_price = parseFloat( $('#real_raw_price').val() );
		} else {
			raw_price = 0;
		}
		
        var workerId = $(this).attr('id').split('_')[1];
		var oldSalary = parseFloat(eRAcomp[companyId].workersalary[workerId]);
		var newSalary = $(this).val();
		var t_health = parseFloat($('div[id="t_profit_' + workerId + '"]').find('#hiddenHealth').text());
		var t_happiness = parseFloat($('div[id="t_profit_' + workerId + '"]').find('#hiddenHappiness').text());
		
		eRAcomp[companyId].workersalary[workerId] = newSalary;
		writeSettings(document.userid + '.Company', eRAcomp);
		
		var skillLevel = $(this).parent().parent().parent().find('.skiller').text().trim().split(' ')[0];
				
		if (prodLevel == -1) {
			var workResultTD = $(this).parent().parent().parent().find('.el_day').eq(eTodayIndex);
			
			if(workResultTD.text() != '') {
				var json = $('script', workResultTD).text();
				var r_productivity = getJSON(json, 'prod');
				health = getJSON(json, 'well');
				happiness = getJSON(json, 'happ');
				
				t_productivity = 0.5 * empMulti * (3.6 + skillLevel * 0.4) * ((1 + 2 * t_health / 100) + (1 + 2 * t_happiness / 100)) * 8 * 1.1 / prodModifier;
				t_profit = t_productivity * parseFloat( $('#real_price').val() ) - parseFloat(newSalary);
				
				f_productivity = parseFloat(r_productivity);
				var old_f_profit = f_productivity * parseFloat( $('#real_price').val() ) - parseFloat(oldSalary);
				f_profit = f_productivity * parseFloat( $('#real_price').val() ) - parseFloat(newSalary);
				
				$('div[id="t_profit_' + workerId + '"]').html('<div id="hiddenHealth" style="display: none">' + t_health + '</div><div id="hiddenHappiness" style="display: none">' + t_happiness + '</div>t: <strong style="font-size: 11px; color:' + colorChoose(t_profit) + '">' + mathRound(t_profit, 2).toFixed(2) + '</strong><div class="ttip"><table><tr><td align="center" style="padding: 5px 5px 5px 5px;"><strong>Profit in theory</strong></td></tr><tr><td align="center" style="padding: 5px 3px 5px 6px;">Productivity</td></tr><tr><td align="center" style="padding: 5px 3px 5px 6px;"><strong>' + mathRound(t_productivity, 0) + '</strong></td></tr></table><table><tr><td colspan="2" align="center" style="padding: 5px 5px 5px 5px;">Worker state</td></tr><tr><td align="center" style="border-bottom: none;"><span class="t_health"><strong>' + t_health.toFixed(2) + '</strong></span></td><td align="center" style="border-bottom: none;"><span class="t_happy"><strong>' + t_happiness.toFixed(2) + '</strong></span></td></tr></table><table><tr><td colspan="2" align="center" style="padding: 5px 5px 5px 5px; border-top: 1px solid #eeeeee;">Salary</td></tr><tr><td valign="bottom" align="center" style="border-bottom: none; padding: 5px 3px 5px 6px;"><img src="http://www.erepublik.com/images/flags/S/' + currency_country[ecur] + '.gif"><br/><strong>' + mathRound(parseFloat(newSalary), 2).toFixed(2) + '</strong></td><td valign="bottom" align="center" style="border-bottom: none; padding: 5px 6px 5px 3px;"><img src="http://www.erepublik.com/images/parts/icon-gold.gif"><br/><strong>' + mathRound(parseFloat(newSalary) * ex_rate, 3).toFixed(3) + '</strong></td></tr></table></div>');
				$('div[id="f_profit_' + workerId + '"]').css('color', colorChoose(f_profit));
				$('strong[id="f_profit_' + workerId + '"]').html(mathRound(f_profit, 2).toFixed(2));
//				$('div[id="f_salary_' + workerId + '"]').html('s: <strong style="font-size: 11px;">' + mathRound(parseFloat(newSalary), 2).toFixed(2) + '</strong><div class="ttip"><table><tr><td colspan="2" align="center" style="padding: 5px 5px 5px 5px;"><strong>Salary by fact</strong></td></tr><tr><td valign="bottom" align="center" style="border-bottom: none; padding: 5px 3px 5px 6px;"><img src="http://www.erepublik.com/images/flags/S/' + currency_country[ecur] + '.gif"><br/><strong>' + mathRound(parseFloat(newSalary), 2).toFixed(2) + '</strong></td><td valign="bottom" align="center" style="border-bottom: none; padding: 5px 6px 5px 3px;"><img src="http://www.erepublik.com/images/parts/icon-gold.gif"><br/><strong>' + mathRound(parseFloat(newSalary) * ex_rate, 3).toFixed(3) + '</strong></td></tr></table></div>');
				
				f_total_profit = f_total_profit - old_f_profit + f_profit;
				f_total_salary = f_total_salary - parseFloat(oldSalary) + parseFloat(newSalary);
				f_total_cost = f_total_cost - parseFloat(oldSalary) + parseFloat(newSalary);
			} else {
				t_productivity = 0.5 * empMulti * (3.6 + skillLevel * 0.4) * ((1 + 2 * t_health / 100) + (1 + 2 * t_happiness / 100)) * 8 * 1.1 / prodModifier;
				var old_t_profit = t_productivity * parseFloat( $('#real_price').val() ) - parseFloat(oldSalary);
				t_profit = t_productivity * parseFloat( $('#real_price').val() ) - parseFloat(newSalary);
				
				$('div[id="t_profit_' + workerId + '"]').html('<div id="hiddenHealth" style="display: none">' + t_health + '</div><div id="hiddenHappiness" style="display: none">' + t_happiness + '</div>t: <strong style="font-size: 11px; color:' + colorChoose(t_profit) + '">' + mathRound(t_profit, 2).toFixed(2) + '</strong><div class="ttip"><table><tr><td align="center" style="padding: 5px 5px 5px 5px;"><strong>Profit in theory</strong></td></tr><tr><td align="center" style="padding: 5px 3px 5px 6px;">Productivity</td></tr><tr><td align="center" style="padding: 5px 3px 5px 6px;"><strong>' + mathRound(t_productivity, 0) + '</strong></td></tr></table><table><tr><td colspan="2" align="center" style="padding: 5px 5px 5px 5px;">Worker state</td></tr><tr><td align="center" style="border-bottom: none;"><span class="t_health"><strong>' + t_health.toFixed(2) + '</strong></span></td><td align="center" style="border-bottom: none;"><span class="t_happy"><strong>' + t_happiness.toFixed(2) + '</strong></span></td></tr></table><table><tr><td colspan="2" align="center" style="padding: 5px 5px 5px 5px; border-top: 1px solid #eeeeee;">Salary</td></tr><tr><td valign="bottom" align="center" style="border-bottom: none; padding: 5px 3px 5px 6px;"><img src="http://www.erepublik.com/images/flags/S/' + currency_country[ecur] + '.gif"><br/><strong>' + mathRound(parseFloat(newSalary), 2).toFixed(2) + '</strong></td><td valign="bottom" align="center" style="border-bottom: none; padding: 5px 6px 5px 3px;"><img src="http://www.erepublik.com/images/parts/icon-gold.gif"><br/><strong>' + mathRound(parseFloat(newSalary) * ex_rate, 3).toFixed(3) + '</strong></td></tr></table></div>');
				
				f_total_profit = f_total_profit - old_t_profit + t_profit;
				f_total_salary = f_total_salary - parseFloat(oldSalary) + parseFloat(newSalary);
				f_total_cost = f_total_cost - parseFloat(oldSalary) + parseFloat(newSalary);
			}
		} else {
			var workResultTD = $(this).parent().parent().parent().find('.el_day').eq(eTodayIndex);
			
			if(workResultTD.text() != '') {
				var json = $('script', workResultTD).text();
				var r_productivity = getJSON(json, 'prod').replace(',', '');
				health = getJSON(json, 'well');
				happiness = getJSON(json, 'happ');
				
				t_productivity = 0.5 * empMulti * (3.6 + skillLevel * 0.4) * ((1 + 2 * t_health / 100) + (1 + 2 * t_happiness / 100)) * 8 * 1.1;
				t_prodCount = t_productivity / rawPerProd;
				t_profit = t_prodCount * parseFloat( $('#real_price').val() ) - parseFloat(newSalary) - t_productivity * parseFloat( $('#real_raw_price').val() );
				
				f_productivity = parseFloat(r_productivity);
				f_prodCount = f_productivity / rawPerProd;
				var old_f_profit = f_prodCount * parseFloat( $('#real_price').val() ) - parseFloat(oldSalary) - f_productivity * parseFloat( $('#real_raw_price').val() );
				f_profit = f_prodCount * parseFloat( $('#real_price').val() ) - parseFloat(newSalary) - f_productivity * parseFloat( $('#real_raw_price').val() );
				
				$('div[id="t_profit_' + workerId + '"]').html('<div id="hiddenHealth" style="display: none">' + t_health + '</div><div id="hiddenHappiness" style="display: none">' + t_happiness + '</div>t: <strong style="font-size: 11px; color:' + colorChoose(t_profit) + '">' + mathRound(t_profit, 2).toFixed(2) + '</strong><div class="ttip"><table><tr><td align="center" style="padding: 5px 5px 5px 5px;"><strong>Profit in theory</strong></td></tr><tr><td align="center" style="padding: 5px 3px 5px 6px;">Productivity</td></tr><tr><td align="center" style="padding: 5px 3px 5px 6px;"><strong>' + mathRound(t_productivity, 0) + '</strong></td></tr></table><table><tr><td colspan="2" align="center" style="padding: 5px 5px 5px 5px;">Worker state</td></tr><tr><td align="center" style="border-bottom: none;"><span class="t_health"><strong>' + t_health.toFixed(2) + '</strong></span></td><td align="center" style="border-bottom: none;"><span class="t_happy"><strong>' + t_happiness.toFixed(2) + '</strong></span></td></tr></table><table><tr><td colspan="2" align="center" style="padding: 5px 5px 5px 5px; border-top: 1px solid #eeeeee;">Salary</td></tr><tr><td valign="bottom" align="center" style="border-bottom: none; padding: 5px 3px 5px 6px;"><img src="http://www.erepublik.com/images/flags/S/' + currency_country[ecur] + '.gif"><br/><strong>' + mathRound(parseFloat(newSalary), 2).toFixed(2) + '</strong></td><td valign="bottom" align="center" style="border-bottom: none; padding: 5px 6px 5px 3px;"><img src="http://www.erepublik.com/images/parts/icon-gold.gif"><br/><strong>' + mathRound(parseFloat(newSalary) * ex_rate, 3).toFixed(3) + '</strong></td></tr></table></div>');
				$('strong[id="f_profit_' + workerId + '"]').css('color', colorChoose(f_profit));
				$('strong[id="f_profit_' + workerId + '"]').html(mathRound(f_profit, 2).toFixed(2));
//				$('div[id="f_salary_' + workerId + '"]').html('s: <strong style="font-size: 11px;">' + mathRound(parseFloat(newSalary), 2).toFixed(2) + '</strong><div class="ttip"><table><tr><td colspan="2" align="center" style="padding: 5px 5px 5px 5px;"><strong>Salary by fact</strong></td></tr><tr><td valign="bottom" align="center" style="border-bottom: none; padding: 5px 3px 5px 6px;"><img src="http://www.erepublik.com/images/flags/S/' + currency_country[ecur] + '.gif"><br/><strong>' + mathRound(parseFloat(newSalary), 2).toFixed(2) + '</strong></td><td valign="bottom" align="center" style="border-bottom: none; padding: 5px 6px 5px 3px;"><img src="http://www.erepublik.com/images/parts/icon-gold.gif"><br/><strong>' + mathRound(parseFloat(newSalary) * ex_rate, 3).toFixed(3) + '</strong></td></tr></table></div>');
				
				f_total_profit = f_total_profit - old_f_profit + f_profit;
				f_total_salary = f_total_salary - parseFloat(oldSalary) + parseFloat(newSalary);
				f_total_cost = f_total_cost - parseFloat(oldSalary) + parseFloat(newSalary);
			} else {
				t_productivity = 0.5 * empMulti * (3.6 + skillLevel * 0.4) * ((1 + 2 * t_health / 100) + (1 + 2 * t_happiness / 100)) * 8 * 1.1;
				t_prodCount = t_productivity / rawPerProd;
				var old_t_profit = t_prodCount * parseFloat( $('#real_price').val() ) - parseFloat(oldSalary) - t_productivity * parseFloat( $('#real_raw_price').val() );
				t_profit = t_prodCount * parseFloat( $('#real_price').val() ) - parseFloat(newSalary) - t_productivity * parseFloat( $('#real_raw_price').val() );
				
				$('div[id="t_profit_' + workerId + '"]').html('<div id="hiddenHealth" style="display: none">' + t_health + '</div><div id="hiddenHappiness" style="display: none">' + t_happiness + '</div>t: <strong style="font-size: 11px; color:' + colorChoose(t_profit) + '">' + mathRound(t_profit, 2).toFixed(2) + '</strong><div class="ttip"><table><tr><td align="center" style="padding: 5px 5px 5px 5px;"><strong>Profit in theory</strong></td></tr><tr><td align="center" style="padding: 5px 3px 5px 6px;">Productivity</td></tr><tr><td align="center" style="padding: 5px 3px 5px 6px;"><strong>' + mathRound(t_productivity, 0) + '</strong></td></tr></table><table><tr><td colspan="2" align="center" style="padding: 5px 5px 5px 5px;">Worker state</td></tr><tr><td align="center" style="border-bottom: none;"><span class="t_health"><strong>' + t_health.toFixed(2) + '</strong></span></td><td align="center" style="border-bottom: none;"><span class="t_happy"><strong>' + t_happiness.toFixed(2) + '</strong></span></td></tr></table><table><tr><td colspan="2" align="center" style="padding: 5px 5px 5px 5px; border-top: 1px solid #eeeeee;">Salary</td></tr><tr><td valign="bottom" align="center" style="border-bottom: none; padding: 5px 3px 5px 6px;"><img src="http://www.erepublik.com/images/flags/S/' + currency_country[ecur] + '.gif"><br/><strong>' + mathRound(parseFloat(newSalary), 2).toFixed(2) + '</strong></td><td valign="bottom" align="center" style="border-bottom: none; padding: 5px 6px 5px 3px;"><img src="http://www.erepublik.com/images/parts/icon-gold.gif"><br/><strong>' + mathRound(parseFloat(newSalary) * ex_rate, 3).toFixed(3) + '</strong></td></tr></table></div>');
				
				f_total_profit = f_total_profit - old_t_profit + t_profit;
				f_total_salary = f_total_salary - parseFloat(oldSalary) + parseFloat(newSalary);
				f_total_cost = f_total_cost - parseFloat(oldSalary) + parseFloat(newSalary);
			}
		}
		
		reCalc(prodLevel, prodModifier, f_total_productivity, product_price, f_total_salary, rawPerProd, f_total_salary, ecur, ex_rate, f_total_cost, raw_price);
		
        return false;
    });

	$('#real_price').live('keyup', function(){
		product_price = parseFloat( $('#real_price').val() );
		if (parseFloat( $('#real_raw_price').val() ) != null || parseFloat( $('#real_raw_price').val() ) != undefined || parseFloat( $('#real_raw_price').val() ) != '') {
			raw_price = parseFloat( $('#real_raw_price').val() );
		} else {
			raw_price = 0;
		}
		
		eRAcomp[companyId].unitprice = $('#real_price').val();
		writeSettings(document.userid + '.Company', eRAcomp);
		
		$('#employee_list table tbody tr .el_salary').each(function(index, ele) {
			var skillLevel = $('.skiller').eq(index).text().trim().split(' ')[0];
			var profileId = $('.el_img').eq(index).attr('href');
			profileId = profileId.substring(profileId.lastIndexOf('/') + 1);
			var salary = $(this).find('input').val();
			var t_health = parseFloat($('div[id="t_profit_' + profileId + '"]').find('#hiddenHealth').text());
			var t_happiness = parseFloat($('div[id="t_profit_' + profileId + '"]').find('#hiddenHappiness').text());
			
			if (prodLevel == -1) {
				var workResultTD = $('.el_day').eq(index * 7 + eTodayIndex);
				
				if(workResultTD.text() != '') {
					var json = $('script', workResultTD).text();
					var r_productivity = getJSON(json, 'prod').replace(',', '');
					health = getJSON(json, 'well');
					happiness = getJSON(json, 'happ');
					
					t_productivity = 0.5 * empMulti * (3.6 + skillLevel * 0.4) * ((1 + 2 * t_health / 100) + (1 + 2 * t_happiness / 100)) * 8 * 1.1 / prodModifier;
					t_profit = t_productivity * parseFloat( $('#real_price').val() ) - parseFloat(salary);
					
					f_productivity = parseFloat(r_productivity);
					f_profit = f_productivity * parseFloat( $('#real_price').val() ) - parseFloat(salary);
					
					$('div[id="t_profit_' + profileId + '"]').html('<div id="hiddenHealth" style="display: none">' + t_health + '</div><div id="hiddenHappiness" style="display: none">' + t_happiness + '</div>t: <strong style="font-size: 11px; color:' + colorChoose(t_profit) + '">' + mathRound(t_profit, 2).toFixed(2) + '</strong><div class="ttip"><table><tr><td align="center" style="padding: 5px 5px 5px 5px;"><strong>Profit in theory</strong></td></tr><tr><td align="center" style="padding: 5px 3px 5px 6px;">Productivity</td></tr><tr><td align="center" style="padding: 5px 3px 5px 6px;"><strong>' + mathRound(t_productivity, 0) + '</strong></td></tr></table><table><tr><td colspan="2" align="center" style="padding: 5px 5px 5px 5px;">Worker state</td></tr><tr><td align="center" style="border-bottom: none;"><span class="t_health"><strong>' + t_health.toFixed(2) + '</strong></span></td><td align="center" style="border-bottom: none;"><span class="t_happy"><strong>' + t_happiness.toFixed(2) + '</strong></span></td></tr></table><table><tr><td colspan="2" align="center" style="padding: 5px 5px 5px 5px; border-top: 1px solid #eeeeee;">Salary</td></tr><tr><td valign="bottom" align="center" style="border-bottom: none; padding: 5px 3px 5px 6px;"><img src="http://www.erepublik.com/images/flags/S/' + currency_country[ecur] + '.gif"><br/><strong>' + mathRound(parseFloat(salary), 2).toFixed(2) + '</strong></td><td valign="bottom" align="center" style="border-bottom: none; padding: 5px 6px 5px 3px;"><img src="http://www.erepublik.com/images/parts/icon-gold.gif"><br/><strong>' + mathRound(parseFloat(salary) * ex_rate, 3).toFixed(3) + '</strong></td></tr></table></div>');
					$('strong[id="f_profit_' + profileId + '"]').css('color', colorChoose(f_profit));
					$('strong[id="f_profit_' + profileId + '"]').html(mathRound(f_profit, 2).toFixed(2));
				} else {
					t_productivity = 0.5 * empMulti * (3.6 + skillLevel * 0.4) * ((1 + 2 * t_health / 100) + (1 + 2 * t_happiness / 100)) * 8 * 1.1 / prodModifier;
					t_profit = t_productivity * parseFloat( $('#real_price').val() ) - parseFloat(salary);
					
					$('div[id="t_profit_' + profileId + '"]').html('<div id="hiddenHealth" style="display: none">' + t_health + '</div><div id="hiddenHappiness" style="display: none">' + t_happiness + '</div>t: <strong style="font-size: 11px; color:' + colorChoose(t_profit) + '">' + mathRound(t_profit, 2).toFixed(2) + '</strong><div class="ttip"><table><tr><td align="center" style="padding: 5px 5px 5px 5px;"><strong>Profit in theory</strong></td></tr><tr><td align="center" style="padding: 5px 3px 5px 6px;">Productivity</td></tr><tr><td align="center" style="padding: 5px 3px 5px 6px;"><strong>' + mathRound(t_productivity, 0) + '</strong></td></tr></table><table><tr><td colspan="2" align="center" style="padding: 5px 5px 5px 5px;">Worker state</td></tr><tr><td align="center" style="border-bottom: none;"><span class="t_health"><strong>' + t_health.toFixed(2) + '</strong></span></td><td align="center" style="border-bottom: none;"><span class="t_happy"><strong>' + t_happiness.toFixed(2) + '</strong></span></td></tr></table><table><tr><td colspan="2" align="center" style="padding: 5px 5px 5px 5px; border-top: 1px solid #eeeeee;">Salary</td></tr><tr><td valign="bottom" align="center" style="border-bottom: none; padding: 5px 3px 5px 6px;"><img src="http://www.erepublik.com/images/flags/S/' + currency_country[ecur] + '.gif"><br/><strong>' + mathRound(parseFloat(salary), 2).toFixed(2) + '</strong></td><td valign="bottom" align="center" style="border-bottom: none; padding: 5px 6px 5px 3px;"><img src="http://www.erepublik.com/images/parts/icon-gold.gif"><br/><strong>' + mathRound(parseFloat(salary) * ex_rate, 3).toFixed(3) + '</strong></td></tr></table></div>');
				}
			} else {
				var workResultTD = $('.el_day').eq(index * 7 + eTodayIndex);
		
				if(workResultTD.text() != '') {
					var json = $('script', workResultTD).text();
					var r_productivity = getJSON(json, 'prod').replace(',', '');
					health = getJSON(json, 'well');
					happiness = getJSON(json, 'happ');
					
					t_productivity = 0.5 * empMulti * (3.6 + skillLevel * 0.4) * ((1 + 2 * t_health / 100) + (1 + 2 * t_happiness / 100)) * 8 * 1.1;
					t_prodCount = t_productivity / rawPerProd;
					t_profit = t_prodCount * parseFloat( $('#real_price').val() ) - parseFloat(salary) - t_productivity * parseFloat( $('#real_raw_price').val() );
					
					f_productivity = parseFloat(r_productivity);
					f_prodCount = f_productivity / rawPerProd;
					f_profit = f_prodCount * parseFloat( $('#real_price').val() ) - parseFloat(salary) - f_productivity * parseFloat( $('#real_raw_price').val() );
					
					$('div[id="t_profit_' + profileId + '"]').html('<div id="hiddenHealth" style="display: none">' + t_health + '</div><div id="hiddenHappiness" style="display: none">' + t_happiness + '</div>t: <strong style="font-size: 11px; color:' + colorChoose(t_profit) + '">' + mathRound(t_profit, 2).toFixed(2) + '</strong><div class="ttip"><table><tr><td align="center" style="padding: 5px 5px 5px 5px;"><strong>Profit in theory</strong></td></tr><tr><td align="center" style="padding: 5px 3px 5px 6px;">Productivity</td></tr><tr><td align="center" style="padding: 5px 3px 5px 6px;"><strong>' + mathRound(t_productivity, 0) + '</strong></td></tr></table><table><tr><td colspan="2" align="center" style="padding: 5px 5px 5px 5px;">Worker state</td></tr><tr><td align="center" style="border-bottom: none;"><span class="t_health"><strong>' + t_health.toFixed(2) + '</strong></span></td><td align="center" style="border-bottom: none;"><span class="t_happy"><strong>' + t_happiness.toFixed(2) + '</strong></span></td></tr></table><table><tr><td colspan="2" align="center" style="padding: 5px 5px 5px 5px; border-top: 1px solid #eeeeee;">Salary</td></tr><tr><td valign="bottom" align="center" style="border-bottom: none; padding: 5px 3px 5px 6px;"><img src="http://www.erepublik.com/images/flags/S/' + currency_country[ecur] + '.gif"><br/><strong>' + mathRound(parseFloat(salary), 2).toFixed(2) + '</strong></td><td valign="bottom" align="center" style="border-bottom: none; padding: 5px 6px 5px 3px;"><img src="http://www.erepublik.com/images/parts/icon-gold.gif"><br/><strong>' + mathRound(parseFloat(salary) * ex_rate, 3).toFixed(3) + '</strong></td></tr></table></div>');
					$('strong[id="f_profit_' + profileId + '"]').css('color', colorChoose(f_profit));
					$('strong[id="f_profit_' + profileId + '"]').html(mathRound(f_profit, 2).toFixed(2));
				} else {
					t_productivity = 0.5 * empMulti * (3.6 + skillLevel * 0.4) * ((1 + 2 * t_health / 100) + (1 + 2 * t_happiness / 100)) * 8 * 1.1;
					t_prodCount = t_productivity / rawPerProd;
					t_profit = t_prodCount * parseFloat( $('#real_price').val() ) - parseFloat(salary) - t_productivity * parseFloat( $('#real_raw_price').val() );
					
					$('div[id="t_profit_' + profileId + '"]').html('<div id="hiddenHealth" style="display: none">' + t_health + '</div><div id="hiddenHappiness" style="display: none">' + t_happiness + '</div>t: <strong style="font-size: 11px; color:' + colorChoose(t_profit) + '">' + mathRound(t_profit, 2).toFixed(2) + '</strong><div class="ttip"><table><tr><td align="center" style="padding: 5px 5px 5px 5px;"><strong>Profit in theory</strong></td></tr><tr><td align="center" style="padding: 5px 3px 5px 6px;">Productivity</td></tr><tr><td align="center" style="padding: 5px 3px 5px 6px;"><strong>' + mathRound(t_productivity, 0) + '</strong></td></tr></table><table><tr><td colspan="2" align="center" style="padding: 5px 5px 5px 5px;">Worker state</td></tr><tr><td align="center" style="border-bottom: none;"><span class="t_health"><strong>' + t_health.toFixed(2) + '</strong></span></td><td align="center" style="border-bottom: none;"><span class="t_happy"><strong>' + t_happiness.toFixed(2) + '</strong></span></td></tr></table><table><tr><td colspan="2" align="center" style="padding: 5px 5px 5px 5px; border-top: 1px solid #eeeeee;">Salary</td></tr><tr><td valign="bottom" align="center" style="border-bottom: none; padding: 5px 3px 5px 6px;"><img src="http://www.erepublik.com/images/flags/S/' + currency_country[ecur] + '.gif"><br/><strong>' + mathRound(parseFloat(salary), 2).toFixed(2) + '</strong></td><td valign="bottom" align="center" style="border-bottom: none; padding: 5px 6px 5px 3px;"><img src="http://www.erepublik.com/images/parts/icon-gold.gif"><br/><strong>' + mathRound(parseFloat(salary) * ex_rate, 3).toFixed(3) + '</strong></td></tr></table></div>');
				}
			}
		});
		
		reCalc(prodLevel, prodModifier, f_total_productivity, product_price, f_total_salary, rawPerProd, f_total_salary, ecur, ex_rate, f_total_cost, raw_price);
		
		return false;
    });
	
	$('#real_raw_price').live('keyup', function(){
		product_price = parseFloat( $('#real_price').val() );
		if (parseFloat( $('#real_raw_price').val() ) != null || parseFloat( $('#real_raw_price').val() ) != undefined || parseFloat( $('#real_raw_price').val() ) != '') {
			raw_price = parseFloat( $('#real_raw_price').val() );
		} else {
			raw_price = 0;
		}
		
		eRAcomp[companyId].rawprice = $('#real_raw_price').val();
		writeSettings(document.userid + '.Company', eRAcomp);
		
		$('#employee_list table tbody tr .el_salary').each(function(index, ele) {
			var skillLevel = $('.skiller').eq(index).text().trim().split(' ')[0];
			var profileId = $('.el_img').eq(index).attr('href');
			profileId = profileId.substring(profileId.lastIndexOf('/') + 1);
			var salary = $(this).find('input').val();
			var t_health = parseFloat($('div[id="t_profit_' + profileId + '"]').find('#hiddenHealth').text());
			var t_happiness = parseFloat($('div[id="t_profit_' + profileId + '"]').find('#hiddenHappiness').text());
			
			var workResultTD = $('.el_day').eq(index * 7 + eTodayIndex);
	
			if(workResultTD.text() != '') {
				var json = $('script', workResultTD).text();
				var r_productivity = getJSON(json, 'prod').replace(',', '');
				health = getJSON(json, 'well');
				happiness = getJSON(json, 'happ');
				
				t_productivity = 0.5 * empMulti * (3.6 + skillLevel * 0.4) * ((1 + 2 * t_health / 100) + (1 + 2 * t_happiness / 100)) * 8 * 1.1;
				t_prodCount = t_productivity / rawPerProd;
				t_profit = t_prodCount * parseFloat( $('#real_price').val() ) - parseFloat(salary) - t_productivity * parseFloat( $('#real_raw_price').val() );
				
				f_productivity = parseFloat(r_productivity);
				f_prodCount = f_productivity / rawPerProd;
				f_profit = f_prodCount * parseFloat( $('#real_price').val() ) - parseFloat(salary) - f_productivity * parseFloat( $('#real_raw_price').val() );
				
				$('div[id="t_profit_' + profileId + '"]').html('<div id="hiddenHealth" style="display: none">' + t_health + '</div><div id="hiddenHappiness" style="display: none">' + t_happiness + '</div>t: <strong style="font-size: 11px; color:' + colorChoose(t_profit) + '">' + mathRound(t_profit, 2).toFixed(2) + '</strong><div class="ttip"><table><tr><td align="center" style="padding: 5px 5px 5px 5px;"><strong>Profit in theory</strong></td></tr><tr><td align="center" style="padding: 5px 3px 5px 6px;">Productivity</td></tr><tr><td align="center" style="padding: 5px 3px 5px 6px;"><strong>' + mathRound(t_productivity, 0) + '</strong></td></tr></table><table><tr><td colspan="2" align="center" style="padding: 5px 5px 5px 5px;">Worker state</td></tr><tr><td align="center" style="border-bottom: none;"><span class="t_health"><strong>' + t_health.toFixed(2) + '</strong></span></td><td align="center" style="border-bottom: none;"><span class="t_happy"><strong>' + t_happiness.toFixed(2) + '</strong></span></td></tr></table><table><tr><td colspan="2" align="center" style="padding: 5px 5px 5px 5px; border-top: 1px solid #eeeeee;">Salary</td></tr><tr><td valign="bottom" align="center" style="border-bottom: none; padding: 5px 3px 5px 6px;"><img src="http://www.erepublik.com/images/flags/S/' + currency_country[ecur] + '.gif"><br/><strong>' + mathRound(parseFloat(salary), 2).toFixed(2) + '</strong></td><td valign="bottom" align="center" style="border-bottom: none; padding: 5px 6px 5px 3px;"><img src="http://www.erepublik.com/images/parts/icon-gold.gif"><br/><strong>' + mathRound(parseFloat(salary) * ex_rate, 3).toFixed(3) + '</strong></td></tr></table></div>');
				
				$('strong[id="f_profit_' + profileId + '"]').css('color', colorChoose(f_profit));
				$('strong[id="f_profit_' + profileId + '"]').html(mathRound(f_profit, 2).toFixed(2));
			} else {
				t_productivity = 0.5 * empMulti * (3.6 + skillLevel * 0.4) * ((1 + 2 * t_health / 100) + (1 + 2 * t_happiness / 100)) * 8 * 1.1;
				t_prodCount = t_productivity / rawPerProd;
				t_profit = t_prodCount * parseFloat( $('#real_price').val() ) - parseFloat(salary) - t_productivity * parseFloat( $('#real_raw_price').val() );
				
				$('div[id="t_profit_' + profileId + '"]').html('<div id="hiddenHealth" style="display: none">' + t_health + '</div><div id="hiddenHappiness" style="display: none">' + t_happiness + '</div>t: <strong style="font-size: 11px; color:' + colorChoose(t_profit) + '">' + mathRound(t_profit, 2).toFixed(2) + '</strong><div class="ttip"><table><tr><td align="center" style="padding: 5px 5px 5px 5px;"><strong>Profit in theory</strong></td></tr><tr><td align="center" style="padding: 5px 3px 5px 6px;">Productivity</td></tr><tr><td align="center" style="padding: 5px 3px 5px 6px;"><strong>' + mathRound(t_productivity, 0) + '</strong></td></tr></table><table><tr><td colspan="2" align="center" style="padding: 5px 5px 5px 5px;">Worker state</td></tr><tr><td align="center" style="border-bottom: none;"><span class="t_health"><strong>' + t_health.toFixed(2) + '</strong></span></td><td align="center" style="border-bottom: none;"><span class="t_happy"><strong>' + t_happiness.toFixed(2) + '</strong></span></td></tr></table><table><tr><td colspan="2" align="center" style="padding: 5px 5px 5px 5px; border-top: 1px solid #eeeeee;">Salary</td></tr><tr><td valign="bottom" align="center" style="border-bottom: none; padding: 5px 3px 5px 6px;"><img src="http://www.erepublik.com/images/flags/S/' + currency_country[ecur] + '.gif"><br/><strong>' + mathRound(parseFloat(salary), 2).toFixed(2) + '</strong></td><td valign="bottom" align="center" style="border-bottom: none; padding: 5px 6px 5px 3px;"><img src="http://www.erepublik.com/images/parts/icon-gold.gif"><br/><strong>' + mathRound(parseFloat(salary) * ex_rate, 3).toFixed(3) + '</strong></td></tr></table></div>');
			}
		});
		
		reCalc(prodLevel, prodModifier, f_total_productivity, product_price, f_total_salary, rawPerProd, f_total_salary, ecur, ex_rate, f_total_cost, raw_price);
		
        return false;
    });
}
// ---------------------------------------------------------------------------------------------------------------------

// -- Monetary market --------------------------------------------------------------------------------------------------
function createMonMarketSwitch() {
	if (eRAopt["mmarket"] == false) {
		return;
	}
	
	if($('#currency_switch').size() <= 0) {
		var changeLink = '<a id="currency_switch" href="javascript:void(0)" style="display: inline; position: relative; left: 328px; top: -20px;"><img src="/images/parts/icon_show-off.gif"/>&nbsp;&nbsp;Swap currency</a>';
		$('#filters').append(changeLink);
		var startingLink = window.location.href.split('#')[0];
		var curLink = $('#buy_selector').attr('href').split('=');
		var newLink = startingLink + '#buy_currencies=' + curLink[2].substring(0, curLink[2].indexOf(';')) + ';sell_currencies=' + curLink[1].substring(0, curLink[1].indexOf(';')) + ';page=1';
		$('#currency_switch').attr('href', newLink);
	}
	window.setTimeout(createMonMarketSwitch, 500);
	calculateCounterExchangeRate();
	calculateTotals();
}

function calculateCounterExchangeRate() {
	$('span[id^="exchange_value_amount_"]').each(function(i) {
		var xChangeRate = $(this).text();
		var counterXRate = Math.round(100000 / xChangeRate) / 100000;
		
		$(this).attr('title', '1 ' + $(this).parent().find('.currency').eq(1).text() + ' = ' + counterXRate + ' ' + $(this).parent().find('.currency').eq(0).text());
		$(this).css('cursor', 'default');
	});
}

function calculateTotals() {
    var totalAmmount = 0;
	var offerList = $('span[id^="initial_amount_"]');
	
	for (var i = 0; i < offerList.length; i++) {
        totalAmmount += parseFloat(offerList[i].innerHTML);
    }
	
	if (totalAmmount > 0) {
		var currencyTag = $('span[id^="initial_amount_"]').eq(0).parent().find('.currency').html();
		if ($('#totalHolder').length == 0) {
			$('#table_list_offers tr:last').after('<tr><td id="totalHolder"><span class="fakeheight">Total</span></td><td id="totalValue" colspan="3"><span class="special green">' + mathRound(totalAmmount, 2).toFixed(2) + '</span><span class="currency"> ' + currencyTag + '</span></td></tr>');
		} else {
			$('#totalValue').html('<span class="special green">' + mathRound(totalAmmount, 2).toFixed(2) + '</span><span class="currency"> ' + currencyTag + '</span>');
		}
	}
}
// ---------------------------------------------------------------------------------------------------------------------

// -- Improved sidebar -------------------------------------------------------------------------------------------------
var inventoryMain;
var accountHolder;

function prepareSidebarData() {
	if (eRAopt["sidebar"] == false) {
		return;
	}
	
	var prepared = new Array();
	
	function run(variable) {
		prepared[variable] = true;
		
		if (prepared['inventory'] && prepared['accountHolder']) {
			getHealthAndHappiness();
			improveMoneyDisplay();
			miniInventory();
		}
	}
	
	GM_xmlhttpRequest({
		method: 'GET',
		url: 'http://economy.erepublik.com/' + document.language + '/inventory',
		onload:function(response) {
			try {
				inventoryMain = response.responseText;
				inventoryMain = inventoryMain.split('offersJSON = ')[1].split(';')[0];
				
				run('inventory');
			} catch(err) { }
		}
	});
	
	GM_xmlhttpRequest({
		method: 'GET',
		url: 'http://economy.erepublik.com/' + document.language + '/accounts/' + document.userid,
		onload:function(response) {
			try {
				accountHolder = response.responseText;
				accountHolder = fixString2(accountHolder.split('id="allaccounts">')[1].split('						</div>')[0].replace(/<.*?push_left">/gi, '/').replace(/<.*?push_right">/gi, '|'));
				accountHolder = accountHolder.replace(/<a.*?\/a>/gi, '');
				accountHolder = accountHolder.replace(/<.*?>/gi, '').replace('&nbsp;&nbsp;', '').replace(/ /gi, '');
				accountHolder = accountHolder.substr(1, accountHolder.length);
				
				run('accountHolder');
			} catch(err) { }
		}
	});
}

var healthGain = 0;
var happinessGain = 0;
var dataTimer = null;
	
function getHealthAndHappiness() {
	var healthHouseGain = 0;
	var happinessHouseGain = 0;
	var newHealth = 0;
	var newHappiness = 0;
	var houseImg = 'http://www.erepublik.com/images/icons/industry/3/default.png'
	
	var isCitizen = $('.citizen_attributes').size();
	
	if (isCitizen > 0) {
		var dataSet = eval('(' + inventoryMain + ')');
		var objectIndustry;
		
		var gotHouseData = false;
		
		for (var a = 0; a < dataSet.length; a++) {
			objectIndustry = dataSet[a].img;
			objectIndustry = objectIndustry.split('/')[6];
			
			if (objectIndustry == '3') {
				if (gotHouseData == false) {
					houseImg = dataSet[a].img;
					healthHouseGain = dataSet[a].attributes[0].affect["val"];
					happinessHouseGain = dataSet[a].attributes[1].affect["val"];
					gotHouseData = true;
				}
			}
		}
		
		if(gotHouseData == false) {
			healthHouseGain = 0;
			happinessHouseGain = 0;
		}
		
		function preformatData() {
			if(currentHealth <= 10) {
				healthGain = mathRound(parseFloat(healthHouseGain) - 1, 2).toFixed(2);
			} else if (currentHealth > 10 && currentHealth <= 50) {
				healthGain = mathRound(parseFloat(healthHouseGain) - 2, 2).toFixed(2);
			} else if (currentHealth > 50 && currentHealth <= 80) {
				healthGain = mathRound(parseFloat(healthHouseGain) - 3, 2).toFixed(2);
			} else if (currentHealth > 80 && currentHealth <= 100) {
				healthGain = mathRound(parseFloat(healthHouseGain) - 4, 2).toFixed(2);
			}
			
			if(currentHappiness <= 10) {
				happinessGain = mathRound(parseFloat(happinessHouseGain) - 1, 2).toFixed(2);
			} else if (currentHappiness > 10 && currentHappiness <= 50) {
				happinessGain = mathRound(parseFloat(happinessHouseGain) - 2, 2).toFixed(2);
			} else if (currentHappiness > 50 && currentHappiness <= 80) {
				happinessGain = mathRound(parseFloat(happinessHouseGain) - 3, 2).toFixed(2);
			} else if (currentHappiness > 80 && currentHappiness <= 100) {
				happinessGain = mathRound(parseFloat(happinessHouseGain) - 4, 2).toFixed(2);
			}
			
			newHealth = mathRound(currentHealth + parseFloat(healthGain), 2).toFixed(2);
			newHappiness = mathRound(currentHappiness + parseFloat(happinessGain), 2).toFixed(2);
			
			if(newHealth > 100) {
				newHealth = '100.00';
			}
			if(newHappiness > 100) {
				newHappiness = '100.00';
			}
			
			if(healthGain < 0) {
				healthGain = parseFloat(healthGain).toFixed(2);
			} else {
				healthGain = '+' + parseFloat(healthGain).toFixed(2);
			}
			if(happinessGain < 0) {
				happinessGain = parseFloat(happinessGain).toFixed(2);
			} else {
				happinessGain = '+' + parseFloat(happinessGain).toFixed(2);
			}
			if(healthHouseGain > 0) {
				healthHouseGain = '+' + parseFloat(healthHouseGain).toFixed(2);
			} else {
				healthHouseGain = parseFloat(healthHouseGain).toFixed(2);
			}
			if(happinessHouseGain > 0) {
				happinessHouseGain = '+' + parseFloat(happinessHouseGain).toFixed(2);
			} else {
				happinessHouseGain = parseFloat(happinessHouseGain).toFixed(2);
			}
		}
		preformatData();
						
		$('.citizen_attributes li').eq(0).after('<li style="background: none 0 0 transparent; height: 13px; margin-top: 0px; margin-bottom: 2px; cursor: default;"><span id="newHealth" style="-moz-border-radius: 3px; background-color: #D0E4FB; text-align: center; width: 67px; font-size: 10px; line-height: 13px; border: 1px solid #66CCFF;">' + newHealth + '</span><div class="healthTooltip"><table align="center"><tr id="heToolTr1" valign="middle" style="border-bottom: 1px solid #FFCC33;"><td align="center" style="padding-left: 3px;"><img width="30px" height="30px" src="' + houseImg + '"></td><td align="right" width="40px" style="padding-right: 3px;">' + healthHouseGain + '</td></tr><tr><td colspan="2" style="font-size: 12px;"><strong>' + healthGain + '</strong></td></tr></table></div></li>');
					
		$('.citizen_attributes li').eq(2).after('<li style="background: none 0 0 transparent; height: 13px; margin-top: 0px; margin-bottom: 2px; cursor: default;"><span id="newHappiness" style="-moz-border-radius: 3px; background-color: #D0E4FB; text-align: center; width: 67px; font-size: 10px; line-height: 13px; border: 1px solid #66CCFF;">' + newHappiness + '</span><div class="happTooltip"><table align="center"><tr id="haToolTr1" valign="middle" style="border-bottom: 1px solid #FFCC33;"><td align="center" style="padding-left: 3px;"><img width="30px" height="30px" src="' + houseImg + '"></td><td align="right" width="40px" style="padding-right: 3px;">' + happinessHouseGain + '</td></tr><tr><td colspan="2" style="font-size: 12px;"><strong>' + happinessGain + '</strong></td></tr></table></div></li>');
		
		$('#wellnessBar span').contentChange(function() {
			currentHealth = parseFloat($('#wellnessBar span').text());
			currentHappiness = parseFloat($('#happiness_indicator span').text());
			
			preformatData();
			
			$('#newHealth').html(newHealth);
			$('#newHappiness').html(newHappiness);
		});
		
		$('#happiness_indicator span').contentChange(function() {
			currentHealth = parseFloat($('#wellnessBar span').text());
			currentHappiness = parseFloat($('#happiness_indicator span').text());
			
			preformatData();
			
			$('#newHealth').html(newHealth);
			$('#newHappiness').html(newHappiness);
		});
	}
}

function improveMoneyDisplay() {
	var goldAmmount;
	var naturalAmmount;
	var accountCurr;
	var accountAmmount;
	
	if($('#side_bar_natural_account_value').html() != undefined) {
		var naturalCurrency = $('#side_bar_natural_account_value').parent().find('img').attr('title');
	} else {
		var naturalCurrency = $('#accountdisplay .item:eq(1) img').attr('title');
	}
	
	for(var x = 0; x < accountHolder.split('/').length; x++) {
		accountCurr = accountHolder.split('/')[x].split('|')[0];
		accountAmmount = accountHolder.split('/')[x].split('|')[1];
		
		eRAacc[accountCurr] = accountAmmount;
		writeSettings(document.userid + '.Accounts', eRAacc);
	}
	
	$('#side_bar_gold_account_value').html(eRAacc['Gold']);
	
	if($('#side_bar_natural_account_value').html() != undefined) {
		$('#side_bar_natural_account_value').html(eRAacc[naturalCurrency]);
	} else {
		var oldAccDisplay = $('#accountdisplay .item:eq(1)').html();
		oldAccDisplay = oldAccDisplay.match(/<.*?>/gi);
		$('#accountdisplay .item:eq(1)').html(oldAccDisplay + '<div id="side_bar_natural_account_value">' + eRAacc[naturalCurrency] + '</div>');
	}
	
	$('#accountdisplay').append('<div id="moreCurrency" class="moreCurrencyHolder"></div>');
	
	for (var x = 0; x < accountHolder.split('/').length; x++) {
		accountCurr = accountHolder.split('/')[x].split('|')[0];
		accountAmmount = accountHolder.split('/')[x].split('|')[1];
		
		if(accountCurr != "Gold") {
			if(accountCurr != naturalCurrency) {
				$('#moreCurrency').append('<div style="float: left; width: 60px; padding: 3px;"><img src="http://www.erepublik.com/images/flags/S/' + currency_country[accountCurr] + '.gif" title="' + accountCurr + '" alt="' + accountCurr + '" class="flag"> ' + accountAmmount + '</div>');
			}
		}
	}
	
	$('#accountdisplay').live('mouseover', function() {
		$('#moreCurrency').css('display', 'inline');
	});
	
	$('#accountdisplay').live('mouseout', function() {
		$('#moreCurrency').css('display', 'none');
	});
	
	$('#side_bar_gold_account_value').contentChange(function() {
		$(this).html(eRAacc['Gold']);
	});
	
	for (var c in country_currency) {
		GM_deleteValue(document.userid + '.Accounts.' + country_currency[c]);
	}
	GM_deleteValue(document.userid + '.Accounts.Gold');
}

function miniInventory() {
	var inventoryItems = eval('(' + inventoryMain + ')');
	var itemIndustry;
	
	var foodCount = 0;
	var ticketCount = 0;
	var houseCount = 0;
	var hospitalCount = 0;
	var defenseCount = 0;
	var rifleCount = 0;
	var tankCount = 0;
	var artCount = 0;
	var airCount = 0;
	var grainCount = 0;
	var oilCount= 0;
	var titCount = 0;
	var stoneCount = 0;
	var ironCount = 0;
	
	for (var a = 0; a < inventoryItems.length; a++) {
		itemIndustry = inventoryItems[a].img;
		itemIndustry = itemIndustry.split('/')[6];
		
		if (itemIndustry == '1') {
			foodCount += 1;
		} else if (itemIndustry == '2') {
			ticketCount += 1;
		} else if (itemIndustry == '3') {
			houseCount += 1;
		} else if (itemIndustry == '4') {
			hospitalCount += 1;
		} else if (itemIndustry == '5') {
			defenseCount += 1;
		} else if (itemIndustry == '6') {
			rifleCount += 1;
		} else if (itemIndustry == '7') {
			tankCount += 1;
		} else if (itemIndustry == '8') {
			artCount += 1;
		} else if (itemIndustry == '9') {
			airCount += 1;
		} else if (itemIndustry == '10') {
			grainCount += 1;
		} else if (itemIndustry == '11') {
			oilCount += 1;
		} else if (itemIndustry == '12') {
			titCount += 1;
		} else if (itemIndustry == '13') {
			stoneCount += 1;
		} else if (itemIndustry == '14') {
			ironCount += 1;
		}
	}
	
	$('#accountdisplay').after('<a title="Open inventory" href="http://economy.erepublik.com/' + document.language + '/inventory"><div id="miniInventory" class="miniInventoryHolder"></div></a>');
	
	if (foodCount > 0) {
		$('#miniInventory').append('<div class="itemCountHolder"><img src="http://www.erepublik.com/images/icons/industry/1/q5.png"><div class="itemCount">' + foodCount + '</div></div>');
	}
	if (ticketCount > 0) {
		$('#miniInventory').append('<div class="itemCountHolder"><img src="http://www.erepublik.com/images/icons/industry/2/q5.png"><div class="itemCount">' + ticketCount + '</div></div>');
	}
	if (houseCount > 0) {
		$('#miniInventory').append('<div class="itemCountHolder"><img src="http://www.erepublik.com/images/icons/industry/3/q5.png"><div class="itemCount">' + houseCount + '</div></div>');
	}
	if (hospitalCount > 0) {
		$('#miniInventory').append('<div class="itemCountHolder"><img src="http://www.erepublik.com/images/icons/industry/4/q5.png"><div class="itemCount">' + hospitalCount + '</div></div>');
	}
	if (defenseCount > 0) {
		$('#miniInventory').append('<div class="itemCountHolder"><img src="http://www.erepublik.com/images/icons/industry/5/q5.png"><div class="itemCount">' + defenseCount + '</div></div>');
	}
	if (rifleCount > 0) {
		$('#miniInventory').append('<div class="itemCountHolder"><img src="http://www.erepublik.com/images/icons/industry/6/q5.png"><div class="itemCount">' + rifleCount + '</div></div>');
	}
	if (tankCount > 0) {
		$('#miniInventory').append('<div class="itemCountHolder"><img src="http://www.erepublik.com/images/icons/industry/7/q5.png"><div class="itemCount">' + tankCount + '</div></div>');
	}
	if (artCount > 0) {
		$('#miniInventory').append('<div class="itemCountHolder"><img src="http://www.erepublik.com/images/icons/industry/8/q5.png"><div class="itemCount">' + artCount + '</div></div>');
	}
	if (airCount > 0) {
		$('#miniInventory').append('<div class="itemCountHolder"><img src="http://www.erepublik.com/images/icons/industry/9/q5.png"><div class="itemCount">' + airCount + '</div></div>');
	}
	if (grainCount > 0) {
		$('#miniInventory').append('<div class="itemCountHolder"><img src="http://www.erepublik.com/images/icons/industry/10/default.png"><div class="itemCount">' + grainCount + '</div></div>');
	}
	if (oilCount > 0) {
		$('#miniInventory').append('<div class="itemCountHolder"><img src="http://www.erepublik.com/images/icons/industry/11/default.png"><div class="itemCount">' + oilCount + '</div></div>');
	}
	if (titCount > 0) {
		$('#miniInventory').append('<div class="itemCountHolder"><img src="http://www.erepublik.com/images/icons/industry/12/default.png"><div class="itemCount">' + titCount + '</div></div>');
	}
	if (stoneCount > 0) {
		$('#miniInventory').append('<div class="itemCountHolder"><img src="http://www.erepublik.com/images/icons/industry/13/default.png"><div class="itemCount">' + stoneCount + '</div></div>');
	}
	if (ironCount > 0) {
		$('#miniInventory').append('<div class="itemCountHolder"><img src="http://www.erepublik.com/images/icons/industry/14/default.png"><div class="itemCount">' + ironCount + '</div></div>');
	}
}
// ---------------------------------------------------------------------------------------------------------------------

// -- Market -----------------------------------------------------------------------------------------------------------
function enchanceMarket() {
	if (eRAopt["market"] == false) {
		return;
	}
	
	readSettings('accounts');
	
	var marketLocation = window.location.href.split('/')[5];
	var country;
	if ($('#countryId_titletext').length == 0) {
		country = $('.flagholder a').attr('href').split('/')[5];
	} else {
		country = $('#countryId_titletext img').attr('src').split('/')[6].split('.')[0];
	}
	var currency = country_currency[country];
	var recItem;
	var basePrice;
	var newPrice;
	
	$('.faderleft, .faderright').css({'pointer-events':'none'});
	
	var freeSlots = $('#onaccount small').text().split(' ');
	var currentMoney = eRAacc[currency];
	
	if (freeSlots[2] == "slots") {
		$('.country-select').prepend('<div class="slotTable"><table style="width: 200px;"><tr><td id="slotCell_1" class="slotCell">&nbsp;</td><td id="slotCell_2" class="slotCell">&nbsp;</td><td id="slotCell_3" class="slotCell">&nbsp;</td><td id="slotCell_4" class="slotCell">&nbsp;</td><td id="slotCell_5" class="slotCell">&nbsp;</td><td id="slotCell_6" class="slotCell">&nbsp;</td><td id="slotCell_7" class="slotCell">&nbsp;</td><td id="slotCell_8" class="slotCell">&nbsp;</td><td id="slotCell_9" class="slotCell">&nbsp;</td><td id="slotCell_10" class="slotCell">&nbsp;</td></tr><tr><td id="slotCell_11" class="slotCell">&nbsp;</td><td id="slotCell_12" class="slotCell">&nbsp;</td><td id="slotCell_13" class="slotCell">&nbsp;</td><td id="slotCell_14" class="slotCell">&nbsp;</td><td id="slotCell_15" class="slotCell">&nbsp;</td><td id="slotCell_16" class="slotCell">&nbsp;</td><td id="slotCell_17" class="slotCell">&nbsp;</td><td id="slotCell_18" class="slotCell">&nbsp;</td><td id="slotCell_19" class="slotCell">&nbsp;</td><td id="slotCell_20" class="slotCell">&nbsp;</td></tr></table></div>');
		var usedSlots = 20 - parseFloat(freeSlots[0]);
		
		for (var n = 1; n < usedSlots + 1; n++) {
			$('#slotCell_' + n).css('background', 'url("http://www.erepublik.com/images/parts/inventory_bg.png") repeat scroll left top transparent');
		}
		$('#onaccount span').css('width', '100px');
		$('#onaccount small').css('margin-right', '25px');
		$('#onaccount small').text(currentMoney + ' ' + currency);
	} else {
		$('#onaccount span').css('width', '100px');
		$('#onaccount small').css('margin-right', '25px');
	}
	
	GM_xmlhttpRequest({
		method: 'GET',
		url: API_URL + 'exchange/' + currency + '/GOLD',
		onload: function(response) {
			recItem = $(response.responseText).find('exchange-rate').eq(0).text();
			
			if (window.location.href.split('/')[5] != 'company') {
				$('td[class*="m_price"], td[class*="jm_salary"]').each(function() {
					basePrice = $(this).find('strong').eq(0).text() + $(this).find('sup').text();
					basePrice = basePrice.split(' ')[0];
					
					newPrice = parseFloat(basePrice) * parseFloat(recItem);
					newPrice = mathRound(newPrice, 5).toFixed(5);
					newPrice = newPrice + '';
					newPrice = newPrice.split('.');
					
					$(this).append('<br/><strong style="color: #a2a2a2;">' + newPrice[0] + '</strong><sup style="color: #a2a2a2;">.' + newPrice[1] + ' <strong>GOLD</strong></sup>');
				});
			}
		}
	});
	
	autoDonater();
}
// ---------------------------------------------------------------------------------------------------------------------

// -- Custom menu ------------------------------------------------------------------------------------------------------
function createMenu() {
	if (eRAopt["menu"] == false) {
		return;
	}
	
	readSettings('menu');
	
	if (eRAopt["menu1"] == true) {
		$('body').css('background-position', 'center 22px');
		
		$('#container').prepend('<div id="customTopMenu" class="customMenuHolder"><div id="menuTopElement1" class="customMenuElemHolder"></div><div id="menuTopElement2" class="customMenuElemHolder"></div><div id="menuTopElement3" class="customMenuElemHolder"></div><div id="menuTopElement4" class="customMenuElemHolder"></div><div id="menuTopElement5" class="customMenuElemHolder"></div><div id="menuTopElement6" class="customMenuElemHolder"></div><div id="menuTopElement7" class="customMenuElemHolder"></div><div id="menuTopElement8" class="customMenuElemHolder"></div></div>');
		
		if (eRAmenu['menutop1'].title != null && eRAmenu['menutop1'].title.length > 1 && eRAmenu['menutop1'].lnk != null && eRAmenu['menutop1'].lnk.length > 1) {
			if (eRAmenu['menutop1'].target == true) {
				$('#menuTopElement1').html('<a href="' + eRAmenu['menutop1'].lnk + '" target="_blank"><div class="customMenuElement">' + eRAmenu['menutop1'].title + '</div></a>');
			} else {
				$('#menuTopElement1').html('<a href="' + eRAmenu['menutop1'].lnk + '" target="_self"><div class="customMenuElement">' + eRAmenu['menutop1'].title + '</div></a>');
			}
		} else {
			$('#menuTopElement1').html('<a id="addTopLinkHere_1" title="Add current page" href="javascript:;" target="_self"><div class="customMenuElementAdd">+</div></a>');
		}
		if (eRAmenu['menutop2'].title != null && eRAmenu['menutop2'].title.length > 1 && eRAmenu['menutop2'].lnk != null && eRAmenu['menutop2'].lnk.length > 1) {
			if (eRAmenu['menutop2'].target == true) {
				$('#menuTopElement2').html('<a href="' + eRAmenu['menutop2'].lnk + '" target="_blank"><div class="customMenuElement">' + eRAmenu['menutop2'].title + '</div></a>');
			} else {
				$('#menuTopElement2').html('<a href="' + eRAmenu['menutop2'].lnk + '" target="_self"><div class="customMenuElement">' + eRAmenu['menutop2'].title + '</div></a>');
			}
		} else {
			$('#menuTopElement2').html('<a id="addTopLinkHere_2" title="Add current page" href="javascript:;" target="_self"><div class="customMenuElementAdd">+</div></a>');
		}
		if (eRAmenu['menutop3'].title != null && eRAmenu['menutop3'].title.length > 1 && eRAmenu['menutop3'].lnk != null && eRAmenu['menutop3'].lnk.length > 1) {
			if (eRAmenu['menutop3'].target == true) {
				$('#menuTopElement3').html('<a href="' + eRAmenu['menutop3'].lnk + '" target="_blank"><div class="customMenuElement">' + eRAmenu['menutop3'].title + '</div></a>');
			} else {
				$('#menuTopElement3').html('<a href="' + eRAmenu['menutop3'].lnk + '" target="_self"><div class="customMenuElement">' + eRAmenu['menutop3'].title + '</div></a>');
			}
		} else {
			$('#menuTopElement3').html('<a id="addTopLinkHere_3" title="Add current page" href="javascript:;" target="_self"><div class="customMenuElementAdd">+</div></a>');
		}
		if (eRAmenu['menutop4'].title != null && eRAmenu['menutop4'].title.length > 1 && eRAmenu['menutop4'].lnk != null && eRAmenu['menutop4'].lnk.length > 1) {
			if (eRAmenu['menutop4'].target == true) {
				$('#menuTopElement4').html('<a href="' + eRAmenu['menutop4'].lnk + '" target="_blank"><div class="customMenuElement">' + eRAmenu['menutop4'].title + '</div></a>');
			} else {
				$('#menuTopElement4').html('<a href="' + eRAmenu['menutop4'].lnk + '" target="_self"><div class="customMenuElement">' + eRAmenu['menutop4'].title + '</div></a>');
			}
		} else {
			$('#menuTopElement4').html('<a id="addTopLinkHere_4" title="Add current page" href="javascript:;" target="_self"><div class="customMenuElementAdd">+</div></a>');
		}
		if (eRAmenu['menutop5'].title != null && eRAmenu['menutop5'].title.length > 1 && eRAmenu['menutop5'].lnk != null && eRAmenu['menutop5'].lnk.length > 1) {
			if (eRAmenu['menutop5'].target == true) {
				$('#menuTopElement5').html('<a href="' + eRAmenu['menutop5'].lnk + '" target="_blank"><div class="customMenuElement">' + eRAmenu['menutop5'].title + '</div></a>');
			} else {
				$('#menuTopElement5').html('<a href="' + eRAmenu['menutop5'].lnk + '" target="_self"><div class="customMenuElement">' + eRAmenu['menutop5'].title + '</div></a>');
			}
		} else {
			$('#menuTopElement5').html('<a id="addTopLinkHere_5" title="Add current page" href="javascript:;" target="_self"><div class="customMenuElementAdd">+</div></a>');
		}
		if (eRAmenu['menutop6'].title != null && eRAmenu['menutop6'].title.length > 1 && eRAmenu['menutop6'].lnk != null && eRAmenu['menutop6'].lnk.length > 1) {
			if (eRAmenu['menutop6'].target == true) {
				$('#menuTopElement6').html('<a href="' + eRAmenu['menutop6'].lnk + '" target="_blank"><div class="customMenuElement">' + eRAmenu['menutop6'].title + '</div></a>');
			} else {
				$('#menuTopElement6').html('<a href="' + eRAmenu['menutop6'].lnk + '" target="_self"><div class="customMenuElement">' + eRAmenu['menutop6'].title + '</div></a>');
			}
		} else {
			$('#menuTopElement6').html('<a id="addTopLinkHere_6" title="Add current page" href="javascript:;" target="_self"><div class="customMenuElementAdd">+</div></a>');
		}
		if (eRAmenu['menutop7'].title != null && eRAmenu['menutop7'].title.length > 1 && eRAmenu['menutop7'].lnk != null && eRAmenu['menutop7'].lnk.length > 1) {
			if (eRAmenu['menutop7'].target == true) {
				$('#menuTopElement7').html('<a href="' + eRAmenu['menutop7'].lnk + '" target="_blank"><div class="customMenuElement">' + eRAmenu['menutop7'].title + '</div></a>');
			} else {
				$('#menuTopElement7').html('<a href="' + eRAmenu['menutop7'].lnk + '" target="_self"><div class="customMenuElement">' + eRAmenu['menutop7'].title + '</div></a>');
			}
		} else {
			$('#menuTopElement7').html('<a id="addTopLinkHere_7" title="Add current page" href="javascript:;" target="_self"><div class="customMenuElementAdd">+</div></a>');
		}
		if (eRAmenu['menutop8'].title != null && eRAmenu['menutop8'].title.length > 1 && eRAmenu['menutop8'].lnk != null && eRAmenu['menutop8'].lnk.length > 1) {
			if (eRAmenu['menutop8'].target == true) {
				$('#menuTopElement8').html('<a href="' + eRAmenu['menutop8'].lnk + '" target="_blank"><div class="customMenuElement">' + eRAmenu['menutop8'].title + '</div></a>');
			} else {
				$('#menuTopElement8').html('<a href="' + eRAmenu['menutop8'].lnk + '" target="_self"><div class="customMenuElement">' + eRAmenu['menutop8'].title + '</div></a>');
			}
		} else {
			$('#menuTopElement8').html('<a id="addTopLinkHere_8" title="Add current page" href="javascript:;" target="_self"><div class="customMenuElementAdd">+</div></a>');
		}
		
		$('a[id*="addTopLinkHere"]').each(function() {
			var linkIdNumber = $(this).attr('id').split('_')[1];
			$('#content').append('<div id="customMenuTopPrompt_' + linkIdNumber + '" class="customMenuPrompt"><span class="eCM_window_header"><a id="customMenuTopPromptClose_' + linkIdNumber + '" class="close_button" title="Close" href="javascript:;">&nbsp;</a></span><span style="float: left; margin-left: 5%; margin-right: 5%; margin-top: 10px; padding: 5px; width: 90%;"><div style="display: block; font-size: 16px; height: 35px; padding-bottom: 10px; text-align: center; vertical-align: middle; width: 100%;">Please enter desired link title<br>and choose if you want to open it in new tab.</div><div class="eCM_window_content_table"><div class="eCM_window_content_tr"><div class="eCM_window_content_td">Title</div><div class="eCM_window_content_td">&nbsp;</div></div><div class="eCM_window_content_tr"><div class="eCM_window_content_td"><input id="customMenuTopPromptName_' + linkIdNumber + '" type="text" size="50"></div><div class="eCM_window_content_td"><input id="customMenuTopPromptTarget_' + linkIdNumber + '" type="checkbox" title="Open link in new tab?"></div></div></div><div style="display: block; font-size: 16px; height: 35px; padding-bottom: 10px; text-align: center; vertical-align: middle; width: 100%;"><a id="customMenuTopPromptSubmit_' + linkIdNumber + '" title="Submit" class="fluid_blue_raised_medium" style="display: inline; left: 95px; margin-top: 15px; margin-right: 15px;"><span style="font-size: 10px; text-align: center;">Submit</span></a> <a id="customMenuTopPromptCancel_' + linkIdNumber + '" title="Cancel" class="fluid_red_small" style="display: inline; left: 95px; margin-top: 15px;"><span style="font-size: 10px; text-align: center;">Cancel</span></a></div></span></div>');
		});
		
		$('a[id*="customMenuTopPromptClose"]').each(function() {
			var closeId = $(this).attr('id').split('_')[1];
			$(this).click(function() {
				$('#customMenuTopPromptName_' + closeId).val('');
				$('#customMenuTopPromptTarget_' + closeId).attr('checked', false);
				
				$('#customMenuTopPrompt_' + closeId).css('display', 'none');
			});
		});
		
		$('a[id*="addTopLinkHere"]').live('click', function() {
			var linkIdNumber = $(this).attr('id').split('_')[1];
			
			$('#customMenuTopPrompt_' + linkIdNumber).css('display', 'block');
		});
			
		$('a[id*="customMenuTopPromptSubmit"]').live('click', function() {
			var linkIdNumber = $(this).attr('id').split('_')[1];
			var thisLink = document.location.href;
			var thisName = null;
			var thisTarget = null;
			
			if($('#customMenuTopPromptName_' + linkIdNumber) != null) {
				thisName = $('#customMenuTopPromptName_' + linkIdNumber).val();
				thisTarget = $('#customMenuTopPromptTarget_' + linkIdNumber).attr('checked');
				
				eRAmenu['menutop' + linkIdNumber] = {title: thisName, lnk: thisLink, target: thisTarget};
				writeSettings(document.userid + '.Menu', eRAmenu);
				
				$('#customMenuTopPrompt_' + linkIdNumber).css('display', 'none');
			}
		});
		
		$('a[id*="customMenuTopPromptCancel"]').live('click', function() {
			var linkIdNumber = $(this).attr('id').split('_')[1];
			
			$('#customMenuTopPromptName_' + linkIdNumber).val('');
			$('#customMenuTopPromptTarget_' + linkIdNumber).attr('checked', false);
			
			$('#customMenuTopPrompt_' + linkIdNumber).css('display', 'none');
		});
	}
	
	if (eRAopt["menu2"] == true) {
		$('#menu').append('<div id="customBottomMenu" class="customMenuHolder"><div id="menuElement1" class="customMenuElemHolder"></div><div id="menuElement2" class="customMenuElemHolder"></div><div id="menuElement3" class="customMenuElemHolder"></div><div id="menuElement4" class="customMenuElemHolder"></div><div id="menuElement5" class="customMenuElemHolder"></div><div id="menuElement6" class="customMenuElemHolder"></div><div id="menuElement7" class="customMenuElemHolder"></div><div id="menuElement8" class="customMenuElemHolder"></div></div>');
	
		if (eRAmenu['menu1'].title != null && eRAmenu['menu1'].title.length > 1 && eRAmenu['menu1'].lnk != null && eRAmenu['menu1'].lnk.length > 1) {
			if (eRAmenu['menu1'].target == true) {
				$('#menuElement1').html('<a href="' + eRAmenu['menu1'].lnk + '" target="_blank"><div class="customMenuElement">' + eRAmenu['menu1'].title + '</div></a>');
			} else {
				$('#menuElement1').html('<a href="' + eRAmenu['menu1'].lnk + '" target="_self"><div class="customMenuElement">' + eRAmenu['menu1'].title + '</div></a>');
			}
		} else {
			$('#menuElement1').html('<a id="addLinkHere_1" title="Add current page" href="javascript:;" target="_self"><div class="customMenuElementAdd">+</div></a>');
		}
		if (eRAmenu['menu2'].title != null && eRAmenu['menu2'].title.length > 1 && eRAmenu['menu2'].lnk != null && eRAmenu['menu2'].lnk.length > 1) {
			if (eRAmenu['menu2'].target == true) {
				$('#menuElement2').html('<a href="' + eRAmenu['menu2'].lnk + '" target="_blank"><div class="customMenuElement">' + eRAmenu['menu2'].title + '</div></a>');
			} else {
				$('#menuElement2').html('<a href="' + eRAmenu['menu2'].lnk + '" target="_self"><div class="customMenuElement">' + eRAmenu['menu2'].title + '</div></a>');
			}
		} else {
			$('#menuElement2').html('<a id="addLinkHere_2" title="Add current page" href="javascript:;" target="_self"><div class="customMenuElementAdd">+</div></a>');
		}
		if (eRAmenu['menu3'].title != null && eRAmenu['menu3'].title.length > 1 && eRAmenu['menu3'].lnk != null && eRAmenu['menu3'].lnk.length > 1) {
			if (eRAmenu['menu3'].target == true) {
				$('#menuElement3').html('<a href="' + eRAmenu['menu3'].lnk + '" target="_blank"><div class="customMenuElement">' + eRAmenu['menu3'].title + '</div></a>');
			} else {
				$('#menuElement3').html('<a href="' + eRAmenu['menu3'].lnk + '" target="_self"><div class="customMenuElement">' + eRAmenu['menu3'].title + '</div></a>');
			}
		} else {
			$('#menuElement3').html('<a id="addLinkHere_3" title="Add current page" href="javascript:;" target="_self"><div class="customMenuElementAdd">+</div></a>');
		}
		if (eRAmenu['menu4'].title != null && eRAmenu['menu4'].title.length > 1 && eRAmenu['menu4'].lnk != null && eRAmenu['menu4'].lnk.length > 1) {
			if (eRAmenu['menu4'].target == true) {
				$('#menuElement4').html('<a href="' + eRAmenu['menu4'].lnk + '" target="_blank"><div class="customMenuElement">' + eRAmenu['menu4'].title + '</div></a>');
			} else {
				$('#menuElement4').html('<a href="' + eRAmenu['menu4'].lnk + '" target="_self"><div class="customMenuElement">' + eRAmenu['menu4'].title + '</div></a>');
			}
		} else {
			$('#menuElement4').html('<a id="addLinkHere_4" title="Add current page" href="javascript:;" target="_self"><div class="customMenuElementAdd">+</div></a>');
		}
		if (eRAmenu['menu5'].title != null && eRAmenu['menu5'].title.length > 1 && eRAmenu['menu5'].lnk != null && eRAmenu['menu5'].lnk.length > 1) {
			if (eRAmenu['menu5'].target == true) {
				$('#menuElement5').html('<a href="' + eRAmenu['menu5'].lnk + '" target="_blank"><div class="customMenuElement">' + eRAmenu['menu5'].title + '</div></a>');
			} else {
				$('#menuElement5').html('<a href="' + eRAmenu['menu5'].lnk + '" target="_self"><div class="customMenuElement">' + eRAmenu['menu5'].title + '</div></a>');
			}
		} else {
			$('#menuElement5').html('<a id="addLinkHere_5" title="Add current page" href="javascript:;" target="_self"><div class="customMenuElementAdd">+</div></a>');
		}
		if (eRAmenu['menu6'].title != null && eRAmenu['menu6'].title.length > 1 && eRAmenu['menu6'].lnk != null && eRAmenu['menu6'].lnk.length > 1) {
			if (eRAmenu['menu6'].target == true) {
				$('#menuElement6').html('<a href="' + eRAmenu['menu6'].lnk + '" target="_blank"><div class="customMenuElement">' + eRAmenu['menu6'].title + '</div></a>');
			} else {
				$('#menuElement6').html('<a href="' + eRAmenu['menu6'].lnk + '" target="_self"><div class="customMenuElement">' + eRAmenu['menu6'].title + '</div></a>');
			}
		} else {
			$('#menuElement6').html('<a id="addLinkHere_6" title="Add current page" href="javascript:;" target="_self"><div class="customMenuElementAdd">+</div></a>');
		}
		if (eRAmenu['menu7'].title != null && eRAmenu['menu7'].title.length > 1 && eRAmenu['menu7'].lnk != null && eRAmenu['menu7'].lnk.length > 1) {
			if (eRAmenu['menu7'].target == true) {
				$('#menuElement7').html('<a href="' + eRAmenu['menu7'].lnk + '" target="_blank"><div class="customMenuElement">' + eRAmenu['menu7'].title + '</div></a>');
			} else {
				$('#menuElement7').html('<a href="' + eRAmenu['menu7'].lnk + '" target="_self"><div class="customMenuElement">' + eRAmenu['menu7'].title + '</div></a>');
			}
		} else {
			$('#menuElement7').html('<a id="addLinkHere_7" title="Add current page" href="javascript:;" target="_self"><div class="customMenuElementAdd">+</div></a>');
		}
		if (eRAmenu['menu8'].title != null && eRAmenu['menu8'].title.length > 1 && eRAmenu['menu8'].lnk != null && eRAmenu['menu8'].lnk.length > 1) {
			if (eRAmenu['menu8'].target == true) {
				$('#menuElement8').html('<a href="' + eRAmenu['menu8'].lnk + '" target="_blank"><div class="customMenuElement">' + eRAmenu['menu8'].title + '</div></a>');
			} else {
				$('#menuElement8').html('<a href="' + eRAmenu['menu8'].lnk + '" target="_self"><div class="customMenuElement">' + eRAmenu['menu8'].title + '</div></a>');
			}
		} else {
			$('#menuElement8').html('<a id="addLinkHere_8" title="Add current page" href="javascript:;" target="_self"><div class="customMenuElementAdd">+</div></a>');
		}
		
		$('a[id*="addLinkHere"]').each(function() {
			var linkIdNumber = $(this).attr('id').split('_')[1];
			$('#content').append('<div id="customMenuPrompt_' + linkIdNumber + '" class="customMenuPrompt"><span class="eCM_window_header"><a id="customMenuPromptClose_' + linkIdNumber + '" class="close_button" title="Close" href="javascript:;">&nbsp;</a></span><span style="float: left; margin-left: 5%; margin-right: 5%; margin-top: 10px; padding: 5px; width: 90%;"><div style="display: block; font-size: 16px; height: 35px; padding-bottom: 10px; text-align: center; vertical-align: middle; width: 100%;">Please enter desired link title<br>and choose if you want to open it in new tab.</div><div class="eCM_window_content_table"><div class="eCM_window_content_tr"><div class="eCM_window_content_td">Title</div><div class="eCM_window_content_td">&nbsp;</div></div><div class="eCM_window_content_tr"><div class="eCM_window_content_td"><input id="customMenuPromptName_' + linkIdNumber + '" type="text" size="50"></div><div class="eCM_window_content_td"><input id="customMenuPromptTarget_' + linkIdNumber + '" type="checkbox" title="Open link in new tab?"></div></div></div><div style="display: block; font-size: 16px; height: 35px; padding-bottom: 10px; text-align: center; vertical-align: middle; width: 100%;"><a id="customMenuPromptSubmit_' + linkIdNumber + '" title="Submit" class="fluid_blue_raised_medium" style="display: inline; left: 95px; margin-top: 15px; margin-right: 15px;"><span style="font-size: 10px; text-align: center;">Submit</span></a> <a id="customMenuPromptCancel_' + linkIdNumber + '" title="Cancel" class="fluid_red_small" style="display: inline; left: 95px; margin-top: 15px;"><span style="font-size: 10px; text-align: center;">Cancel</span></a></div></span></div>');
		});
		
		$('a[id*="customMenuPromptClose"]').each(function() {
			var closeId = $(this).attr('id').split('_')[1];
			$(this).click(function() {
				$('#customMenuPromptName_' + closeId).val('');
				$('#customMenuPromptTarget_' + closeId).attr('checked', false);
				
				$('#customMenuPrompt_' + closeId).css('display', 'none');
			});
		});
		
		$('a[id*="addLinkHere"]').live('click', function() {
			var linkIdNumber = $(this).attr('id').split('_')[1];
			
			$('#customMenuPrompt_' + linkIdNumber).css('display', 'block');
		});
			
		$('a[id*="customMenuPromptSubmit"]').live('click', function() {
			var linkIdNumber = $(this).attr('id').split('_')[1];
			var thisLink = document.location.href;
			var thisName = null;
			var thisTarget = null;
			
			if($('#customMenuPromptName_' + linkIdNumber) != null) {
				thisName = $('#customMenuPromptName_' + linkIdNumber).val();
				thisTarget = $('#customMenuPromptTarget_' + linkIdNumber).attr('checked');
				
				eRAmenu['menu' + linkIdNumber] = {title: thisName, lnk: thisLink, target: thisTarget};
				writeSettings(document.userid + '.Menu', eRAmenu);
				
				$('#customMenuPrompt_' + linkIdNumber).css('display', 'none');
			}
		});
		
		$('a[id*="customMenuPromptCancel"]').live('click', function() {
			var linkIdNumber = $(this).attr('id').split('_')[1];
			
			$('#customMenuPromptName_' + linkIdNumber).val('');
			$('#customMenuPromptTarget_' + linkIdNumber).attr('checked', false);
			
			$('#customMenuPrompt_' + linkIdNumber).css('display', 'none');
		});
	}
}
// ---------------------------------------------------------------------------------------------------------------------

// -- Search redirect --------------------------------------------------------------------------------------------------
function searchRedirect() {
	if (eRAopt["search"] == false) {
		return;
	}
	
	var entities = document.getElementsByClassName("entity")
	if (entities.length == 1) {
		entities[0].parentNode.parentNode.parentNode.innerHTML += "<tr><td colspan='4' style='text-align:center;padding:10px'>Redirecting...</td></tr>"
		location.assign(entities[0].getElementsByTagName("a")[0].href);
	}
}
// ---------------------------------------------------------------------------------------------------------------------

// -- Better donations -------------------------------------------------------------------------------------------------
function addDonationsLink(){
	if (eRAopt["donations"] == false) {
		return;
	}
	
	var donationId = $('#author').val();
	
	$('.citizen_content').append('<div class="holder mtop2 actions"><a href="http://economy.erepublik.com/' + document.language + '/citizen/donate/list/' + donationId + '/1" id="donationlink" class="dotted goright">All donations</a></div>');
}

function moveFirstN(n) {
	var firstN = $('.owninventory.todrag.ui-sortable').children('li:lt(' + n + ')');
	var movTo = $('.owninventory.todonate');
	firstN.appendTo(movTo);
}

function moveLastN(n) {
	var lastN = $('.owninventory.todrag.ui-sortable').children('li');
	lastN = lastN.slice(lastN.length - n, lastN.length);
	var movTo = $('.owninventory.todonate');
	lastN.appendTo(movTo);
}

function movePosN(n) {
	var firstN = $('.owninventory.todrag.ui-sortable').children('li:eq(' + n + ')');
	var movTo = $('.owninventory.todonate');
	firstN.appendTo(movTo);
}

function improveDonation() {
	if (eRAopt["donations"] == false) {
		return;
	}
	
	$('#items1').after('<div style="display: block; clear: both;">&nbsp;</div><div id="moveHolder1" class="moveTable" style="margin-bottom: 5px !important"><h4 style="padding: 0px !important; margin-bottom: 0px;">Move first </h4><table style="float: right; margin-top: -16px; width: 431px;"><tr><td id="moveFirst_1" class="moveCell">1</td><td id="moveFirst_2" class="moveCell">2</td><td id="moveFirst_3" class="moveCell">3</td><td id="moveFirst_4" class="moveCell">4</td><td id="moveFirst_5" class="moveCell">5</td><td id="moveFirst_6" class="moveCell">6</td><td id="moveFirst_7" class="moveCell">7</td><td id="moveFirst_8" class="moveCell">8</td><td id="moveFirst_9" class="moveCell">9</td><td id="moveFirst_10" class="moveCell">10</td></tr></table></div><div id="moveHolder2" class="moveTable" style="margin-bottom: 5px !important"><h4 style="padding: 0px !important; margin-bottom: 0px;">Move last </h4><table style="float: right; margin-top: -16px; width: 431px;"><tr><td id="moveLast_1" class="moveCell">1</td><td id="moveLast_2" class="moveCell">2</td><td id="moveLast_3" class="moveCell">3</td><td id="moveLast_4" class="moveCell">4</td><td id="moveLast_5" class="moveCell">5</td><td id="moveLast_6" class="moveCell">6</td><td id="moveLast_7" class="moveCell">7</td><td id="moveLast_8" class="moveCell">8</td><td id="moveLast_9" class="moveCell">9</td><td id="moveLast_10" class="moveCell">10</td></tr></table></div><div id="moveHolder3" class="moveTable"><h4 style="margin-bottom: 8px; margin-top: 8px; padding: 0 !important;">Move N&deg; </h4><table style="float: right; margin-top: -32px; width: 431px;"><tr><td id="movePos_1" class="moveCell">1</td><td id="movePos_2" class="moveCell">2</td><td id="movePos_3" class="moveCell">3</td><td id="movePos_4" class="moveCell">4</td><td id="movePos_5" class="moveCell">5</td><td id="movePos_6" class="moveCell">6</td><td id="movePos_7" class="moveCell">7</td><td id="movePos_8" class="moveCell">8</td><td id="movePos_9" class="moveCell">9</td><td id="movePos_10" class="moveCell">10</td></tr><tr><td id="movePos_11" class="moveCell">11</td><td id="movePos_12" class="moveCell">12</td><td id="movePos_13" class="moveCell">13</td><td id="movePos_14" class="moveCell">14</td><td id="movePos_15" class="moveCell">15</td><td id="movePos_16" class="moveCell">16</td><td id="movePos_17" class="moveCell">17</td><td id="movePos_18" class="moveCell">18</td><td id="movePos_19" class="moveCell">19</td><td id="movePos_20" class="moveCell">20</td></tr></table></div>');
	
	$('#moveHolder1 table tr td[id^="moveFirst_"]').live('click', function() {
		var moveAmmount = $(this).attr('id').split('_')[1];
		moveFirstN(moveAmmount);
	});
	
	$('#moveHolder2 table tr td[id^="moveLast_"]').live('click', function() {
		var moveAmmount = $(this).attr('id').split('_')[1];
		moveLastN(moveAmmount);
	});
	
	$('#moveHolder3 table tr td[id^="movePos_"]').live('click', function() {
		var movePosition = $(this).attr('id').split('_')[1];
		movePosition = movePosition - 1;
		movePosN(movePosition);
	});
	
	autoDonater()
}
// ---------------------------------------------------------------------------------------------------------------------

// -- Article comments -------------------------------------------------------------------------------------------------
function changeComments() {
	if (eRAopt["news"] == false) {
		return;
	}
	
	var removedCount = 0;
	
	$('body#newspaper ul.tabs li a span').css('padding', '0px 10px');
	$('body#newspaper ul.tabs li a span').css('width', '150px');
	
	var commentsText = $('#comments_button_on span').text();
	commentsText = commentsText.replace(/\s/g, '/');
	var numberOfComments = commentsText.split('/')[1];
	numberOfComments = numberOfComments.substring(1, numberOfComments.length - 1);
	
	var trackbacksText = $('#trackbacks_button_on span').text();
	trackbacksText = trackbacksText.replace(/\s/g, '/');
	var numberOfTrackbacks = trackbacksText.split('/')[1];
	numberOfTrackbacks = numberOfTrackbacks.substring(1, numberOfTrackbacks.length - 1);
	
	var currNumComments = $('input#NumberOfComments').val();
	$('input#NumberOfComments').val(currNumComments - removedCount);
	
	$('#comments_button_on span').html(numberOfComments + ' Comments');
	$('#comments_button_off span').html(numberOfComments + ' Comments');
	
	$('#trackbacks_button_on span').html(numberOfTrackbacks + ' Trackbacks');
	$('#trackbacks_button_off span').html(numberOfTrackbacks + ' Trackbacks');
	
	var oldWidth = $('#article_comment').css('width');
	var oldHeight = $('#article_comment').css('height');
	$('#article_comment').css('margin-bottom', '0px');
	$('#article_comment').attr('class', 'resizable');
	$('#article_comment').parent().css('height', 'auto');
	$('#article_comment').css('width', oldWidth);
	$('#article_comment').css('height', oldHeight);
	$('#article_comment').css('font-family', 'Arial,Helvetica,sans-serif');
	$('#article_comment').css('font-size', '13px');
	
	textareaAttach();
	
	// time stamp
	
	var today = $('#clock .eday strong').text().replace(',','');
	if (today) {
		var timeNow = $('#live_time').text().split(':');
		var totalTimeNow = (parseInt(today, 10) * 1440) + (parseInt(timeNow[0], 10) * 60) + parseInt(timeNow[1], 10);
		
		$('#comments_div .articlecomments').each(function() {
			var commentTimestamp = $(this).find('.article_comment_posted_at').text().split(' ');
			
			var commentDay = commentTimestamp[1].replace(',', '');
			var commentTime = commentTimestamp[2].split(':');
			
			var totalTimeCom = (parseInt(commentDay, 10) * 1440) + (parseInt(commentTime[0], 10) * 60) + parseInt(commentTime[1], 10);
			var totalMinutes = totalTimeNow - totalTimeCom;
	 		
			var showText = '';
			var comYears = Math.floor(totalMinutes / 525600);
			if (comYears > 0) {
				showText = 'more than one year';
			} else {
				var comDays = Math.floor(totalMinutes / 1440);
				showText = (comDays > 0) ? comDays + 'd ' : '';
				var comHours = Math.floor((totalMinutes - (comDays * 1440)) / 60);
				showText += (comHours > 0) ? comHours + 'h ' : '';
				var comMinutes = Math.floor(totalMinutes - (comDays * 1440) - (comHours * 60));
				if (totalMinutes > 0) {
					showText += (comMinutes > 0) ? comMinutes + 'm' : '';
				} else {
					showText += 'less then min.';
				}
			}
			$(this).find('.article_comment_posted_at').css({'display':'block','float':'left'}).append('<br /><div style="font-size: 10px; padding-top: 3px;"> ' + showText + ' ago</div>');
		});
	}
}

function textareaAttach() {
	var iLastMousePos = 0;
	var iMin = 115;
	var grip;
	
	$('textarea.resizable:not(.processed)').each(function() {
		var textarea = $(this).addClass('processed'), staticOffset = null;
		
		$(this).wrap('<div class="resizable-textarea"><span></span></div>')
			.parent().append($('<div class="grippie"></div>').mousedown(startDrag));
	
		var grippie = $('div.grippie', $(this).parent())[0];
		grippie.style.marginRight = (grippie.offsetWidth - $(this)[0].offsetWidth) + 'px';
	
		function startDrag(e) {
			iLastMousePos = mousePosition(e).y;
			staticOffset = textarea.height() - iLastMousePos;
			textarea.css('opacity', 0.25);
			$(document).mousemove(performDrag).mouseup(endDrag);
			return false;
		}
	
		function performDrag(e) {
			var iThisMousePos = mousePosition(e).y;
			var iMousePos = staticOffset + iThisMousePos;
			if (iLastMousePos >= (iThisMousePos)) {
				iMousePos -= 5;
			}
			iLastMousePos = iThisMousePos;
			iMousePos = Math.max(iMin, iMousePos);
			textarea.height(iMousePos + 'px');
			if (iMousePos < iMin) {
				endDrag(e);
			}
			return false;
		}
	
		function endDrag(e) {
			$(document).unbind('mousemove', performDrag).unbind('mouseup', endDrag);
			textarea.css('opacity', 1);
			textarea.focus();
			textarea = null;
			staticOffset = null;
			iLastMousePos = 0;
			return false;
		}
		
		function mousePosition(e) {
			return { x: e.clientX + document.documentElement.scrollLeft, y: e.clientY + document.documentElement.scrollTop };
		};
	});
}
// ---------------------------------------------------------------------------------------------------------------------

// -- Newspaper --------------------------------------------------------------------------------------------------------
function getNumSubs() {
	if (eRAopt["news"] == false) {
		return;
	}
	
	var newspaper = $('input#newspaper_id').val();
	var type = 'subscribe';
	
	if ($('span#subscribers').length == 0) {
		$('.profilemenu').append('<li><span id="subscribers" class="bg-btn-profilemenu">0</span><div style="-moz-border-radius: 0px 3px 3px 0px; background-color: #E9F5FA; width: 115px; color: #3C8FA7; height: 20px; padding: 5px 0 0 12px; float: right;">Subscribers</div></li>');
		
		$.post('/subscribe', {
			_token: $('#_token').val(),
			type: type,
			n: newspaper
		}, function(data) {
			if (data == 0) {
				$('span#subscribers').html('0');
			} else {
				$('span#subscribers').html(data);
			}
		}, 'json');
	}
}

function getCurrentSelection(obj) {
	return (obj.value.substring(obj.selectionStart, obj.selectionEnd));
}

function updateTextarea(object, wrapped) {
	var len = object.value.length;
	var scrollTop = object.scrollTop;
	var scrollLeft = object.scrollLeft;
	object.value = object.value.substring(0, object.selectionStart) + wrapped + object.value.substring(object.selectionEnd, len);
	object.scrollTop = scrollTop;
	object.scrollLeft = scrollLeft;
}

function addAttr(attr) {
	var object = document.getElementById('body');
	var attrValue = null;
	do 	{
		attrValue = prompt('Please enter ' + attr + ': ');
	} while (attrValue == '');
	
	if (attrValue != null)
	{
		var wrapped = "[" + attr + "=" + attrValue + "]" + getCurrentSelection(object)  + "[/" + attr + "]";
		updateTextarea(object, wrapped);
	}
}

function addStyle(styleTag) {
	var object = document.getElementById('body');
	var wrapped = "["+ styleTag + "]" + getCurrentSelection(object) + "[/" + styleTag + "]";
	updateTextarea(object, wrapped);
}

function AddArticleButtons() {
	if (eRAopt["news"] == false) {
		return;
	}
	
	$('.writearticle .inputholder:eq(1) .smallpadded:eq(0)').css('display', 'none');
	
	var linkButton = '<br/><span title="Insert hyperlink" style="background: url(' + newspaperToolbar + ') no-repeat scroll 0px 0px transparent; width: 22px; height: 22px; font-size: 12px; border: none; padding: 4px 11px; cursor: pointer" class="rightpadded padded" id="add_link2"></span>';
	var boldButton = '<span title="Bold" style="background: url(' + newspaperToolbar + ') no-repeat scroll -22px 0px transparent; width: 22px; height: 22px; font-size: 12px; border: none; padding: 4px 11px; cursor: pointer" class="rightpadded padded" id="add_bold2"></span>';
	var italicButton = '<span title="Italic" style="background: url(' + newspaperToolbar + ') no-repeat scroll -44px 0px transparent; width: 22px; height: 22px; font-size: 12px; border: none; padding: 4px 11px; cursor: pointer" class="rightpadded padded" id="add_italic"></span>';
	var underlineButton = '<span title="Underline" style="background: url(' + newspaperToolbar + ') no-repeat scroll -66px 0px transparent; width: 22px; height: 22px; font-size: 12px; border: none; padding: 4px 11px; cursor: pointer" class="rightpadded padded" id="add_underline"></span>';
	var imageButton = '<span title="Insert image" style="background: url(' + newspaperToolbar + ') no-repeat scroll -110px 0px transparent; width: 22px; height: 22px; font-size: 12px; border: none; padding: 4px 11px; cursor: pointer" class="rightpadded padded" id="add_image"></span>';
	var previewButton = '<span title="Preview" style="background: url(' + newspaperToolbar + ') no-repeat scroll -132px 0px transparent; width: 22px; height: 22px; font-size: 12px; border: none; padding: 4px 11px; cursor: pointer;" class="rightpadded padded" id="preview_article"></span><br/>';
	var spacerButton = '<span style="width: 10px; height: 22px; font-size: 12px; border: none; padding: 4px 4px; cursor: default;" class="rightpadded padded">|</span>';

	if (typeof $("textarea#body") != undefined)	{
		$("#show_link").css('display', 'none');
		$("#add_bold").css('display', 'none');
		
		$("#link_input").css("visibility", "hidden");
		$("#add_link").css("visibility", "hidden");
		$("#add_link").after("<br/>");

		$("#add_bold").after(previewButton);
		$("#add_bold").after(spacerButton);
		$("#add_bold").after(underlineButton);
		$("#add_bold").after(italicButton);
		$("#add_bold").after(boldButton);
		$("#add_bold").after(spacerButton);
		$("#add_bold").after(imageButton);
		$("#add_bold").after(linkButton);
		
		$("#add_link2").click(function() { addAttr('url') });
		$("#add_bold2").click(function() { addStyle('b') });
		$("#add_italic").click(function() { addStyle('i') });
		$("#add_underline").click(function() { addStyle('u') });
		$("#add_size").click(function() { addAttr('size') });
		$("#add_image").click(function() { addStyle('img') });
		
		$("#preview_article").click(function(){
			var previewPanel = formatPreview();
			$("body").append(previewPanel);
			
			$("#previewPanel").css({"width":"100%","height":"100%","position":"fixed","top":"0", "left":"0", "margin":"0", "backgroundColor":"#000000", "opacity":".5", "zIndex":"999999998"});
			$("#previewHeader").css({"width":"70%","height":"100%","position":"fixed","marginLeft":"15%", "marginRight":"15%", "marginTop":"auto", "marginBottom":"10%", "backgroundColor":"#fff", "filter":"alpha(opacity=100)", "opacity":"1", "zIndex":"999999999", "padding":"20px"});
			$("#previewHeader div").css({"overflow":"auto", "width":"97%","height":"80%","marginTop":"5%", "border":"1px solid #000000", "paddingLeft":"20px", "paddingTop":"20px", "paddingBottom":"20px"});
			$("#previewHeader h2").css({"color":"#222", "fontSize":"32px", "marginBottom":"30px"});
			$("#previewHeader img").css({"maxWidht":"150px", "maxHeight":"200px"});
			$("#closePreview").css({"color":"#06F", "cursor":"pointer", "textDecoration":"underline", "float":"right"});
		
			$("#closePreview").click(function(){	
				$("#previewPanel, #previewHeader").remove();	
			});
			return false;
		});
		
		var oldWidth = $('#body').css('width');
		var oldHeight = $('#body').css('height');
		
		$('#body').css('margin-bottom', '0px');
		$('#body').attr('class', 'resizable');
		$('#body').css('width', oldWidth);
		$('#body').css('height', oldHeight);
		$('#body').css('font-family', 'Arial,Helvetica,sans-serif');
		$('#body').css('font-size', '13px');
		
		textareaAttach();

	}
}

function formatPreview() {
	var articleTitle = $("#article_name").val();
	if (articleTitle == "") {
		articleTitle = "No title";
	}
	var articlePanel = '<div id="previewPanel"></div><div id="previewHeader" class="article"><span class="eCM_window_header"><a id="closePreview" class="close_button" title="Close" href="javascript:;">&nbsp;</a></span><div class="articleContent"><h2 class="padded">' + articleTitle + '</h2>';
	var articleText = $("textarea").val();

	articleText = bbReplace(articleText);
	articleText = articleText.replace(/\n/g, '<br />\n' );
	
	var articleContent = '<p class="preview">' + articleText + '</p>';
	
	articlePanel += articleContent;
	articlePanel += '</div></div>';
	return articlePanel;
}

function bbReplace(text) {
	search = new Array(/\[img\](.*?)\[\/img\]/, /\[url=(.*?)\](.*?)\[\/url\]/, /\[b\](.*?)\[\/b\]/, /\[size=([\d]*?)\](.*?)\[\/size\]/, /\[u\](.*?)\[\/u\]/, /\[i\](.*?)\[\/i\]/);
	replace = new Array("<img src=\"$1\" >", "<a href=\"$1\" target=\"blank\">$2</a>", "<b>$1</b>", "<span style=\"font-size:$1px\">$2</span>", "<span style=\"text-decoration: underline;\">$1</span>","<span style=\"font-style: italic;\">$1</span>");
	
	for(i = 0; i < search.length; i++) {
		text = tagReplace(text, search[i], replace[i]);
	}	
	return text;
}

function tagReplace(text, reg, repl) {
	text = text.replace(reg, repl);
	if (text.match(search[i])){
		text = tagReplace(text, reg, repl);		
	}
	return text;
}
// ---------------------------------------------------------------------------------------------------------------------

// -- Translator -------------------------------------------------------------------------------------------------------
function addTranslate() {
	if (eRAopt["news"] == false) {
		return;
	}
	
	var translated = '';
	var arrToTranslate = null;
	
	var tr = null;
	
	var langTransCountry = eRAopt["lang"]
	
	var langTransArray = {"en":"United-Kingdom", "fr":"France", "de":"Germany", "hu":"Hungary", "it":"Italy", "pt-pt":"Portugal", "ro":"Romania", "ru":"Russia", "es":"Spain", "sv":"Sweden", "pl":"Poland", "gr":"Greece", "hr":"Croatia", "bg":"Bulgaria", "sr":"Serbia", "tr":"Turkey"};
	
	$('.article .articlecontent .largepadded a').each(function(i) {
		$(this).parent().append('<a title="Translate" id="translate_news_' + i + '" href="#" style="-moz-border-radius: 5px 5px 5px 5px; border: 1px solid darkGray; float: right; margin-top: -35px; padding: 5px;"><img src="' + translateIcon + '"><div id="transLangFlag" style="margin-top: 2px; text-align: center;"><img src="http://www.erepublik.com/images/flags/S/' + langTransArray[langTransCountry] + '.gif"></div></a>');
		
		$('#translate_news_' + i).click(function() {
			$('#translate_news_' + i).attr('title', 'Undo translate');
			$('#translate_news_' + i).click(function() { location.reload(); });
			
			tr = new Translator(doTranslate);
			tr.sync = false;
			tr.traverse($("div.article div.articlecontent")[i]);
			tr.traverse($("#comments_div")[i]);
		});
	});
}

function arrSplit(strToSplit, arrToSave) {
	var arr = strToSplit.split(" ");
	var str500 = '';
	for (var i = 0; i < arr.length; i++) {
		arr[i] = encodeURIComponent(arr[i]);
		if (str500.length + arr[i].length < 497) {
			str500 += '%20'  + arr[i];
			if (i == arr.length - 1) {
				arrToSave.push(str500);
			}
		} else {
			arrToSave.push(str500);
			str500 = arr[i];
		}
	}
	return (arrToSave.length);
}

function doTranslate(text, replace) {
	var strArray = new Array();
	var arrSize = arrSplit(text, strArray);
	
	langTranslate = eRAopt["lang"]
	
	doRequest(strArray, 0, 0, replace, langTranslate);
}

function doRequest(arr, i, count, rep, lang) {
	
	if (arr[i] == undefined) {
		return;
	}
		
	GM_xmlhttpRequest({
		method: 'GET',
		url: 'http://ajax.googleapis.com/ajax/services/language/translate?v=1.0&langpair=%7C' + lang + '&q=' + arr[i],
		onload: function(response) {
			var jsonObj = eval('(' + decodeURIComponent(response.responseText.replace(/%/g, "%25")) + ')');

			if (jsonObj["responseData"] != null) {
				arr[i] = ' ' + ((jsonObj["responseData"]["translatedText"])) + ' ';
			} else {
				arr[i] = ' ';
			}
				
			count++;

			if (count < arr.length) {
				doRequest(arr, i + 1, count, rep, lang);
			} else {
				rep(decodeHTMLEntities(arr.join(' ')));
			}		
		}
	});
}

function decodeHTMLEntities(strToDecode) {
	var entities = [
		{e: /&quot;/g,	r: '"'},
		{e: /&apos;/g,	r: "'"},
		{e: /&gt;/g,	r: ">"},
		{e: /&lt;/g,	r: "<"},
		{e: /&#39;/g,	r: "'"},
		{e: /&amp;/g,	r: '&'}	];
	
	entities.forEach(function (p) {
		strToDecode = strToDecode.replace(p.e, p.r);
	});
	
	return (strToDecode);
}

/**
 * Translator
 * Copyright (c) 2008 Ariel Flesler - aflesler(at)gmail(dot)com | http://flesler.blogspot.com
 * Licensed under BSD (http://www.opensource.org/licenses/bsd-license.php)
 * Date: 5/26/2008
 *
 * @projectDescription JS Class to translate text nodes.
 * @author Ariel Flesler
 * @version 1.0.1
 */
 
/**
 * The constructor must receive the parsing function, which will get the text as parameter
 * To use it, call the method .traverse() on the starting (root) node.
 * If the parsing is asynchronous (f.e AJAX), set sync to false on the instance.
 * When doing so, the parser function receives an extra argument, which is a function
 * that must be called passing it the parsed text.
 */
function Translator( parser, filter ) {
	this.parse = parser; // function that parses the original string
	this.filter = filter; // optional filtering function that receives the node, and returns true/false
};
Translator.prototype = {
	translate:function( old ) { // translates a text node
		if( this.sync ) {
			this.replace( old, this.parse(old.nodeValue) );
		} else {
			var self = this;
			this.parse( old.nodeValue, function( text ) {
				self.replace( old, text );
			});
		}
	},
	makeNode:function( data ) {
		if( data && data.split ) { // replacing for a string
			data = document.createTextNode(data);
		}
		return data;
	},
	replace:function( old, text ) { // Replaces a text node with a new (string) text or another node
		if( text != null && text != old.nodeValue ) {
			var parent = old.parentNode;
			if ( text.splice ) { // Array
				for( var i = 0, l = text.length - 1; i < l; ) {
					parent.insertBefore( this.makeNode(text[i++]), old );
				}
				text = this.makeNode(text[l] || ''); // Last
			} else {
				text = this.makeNode(text);
			}
			parent.replaceChild( text, old );
		}
	},
	valid:/\S/, // Used to skip empty text nodes (modify at your own risk)
	sync:true, // If the parsing requires a callback, set to false
	traverse:function( root ) { // Goes (recursively) thru the text nodes of the root, translating
		var children = root.childNodes,
		l = children.length,
		c = children.length,
		node;
		
		while( l-- ) {
			node = children[c - l - 1];
			if( node.nodeType == 3 ) { // Text node
				if( this.valid.test(node.nodeValue) ) { // Skip empty text nodes
					this.translate( node );
				}
			} else if( node.nodeType == 1 && (!this.filter || this.filter(node)) ) { // Element node
				this.traverse( node );
			}
		}
	}
};
// ---------------------------------------------------------------------------------------------------------------------

// -- Better messages --------------------------------------------------------------------------------------------------
function betterMessages() {
	var oldWidth = $('#message_body').css('width');
	var oldHeight = $('#message_body').css('height');
	$('#message_body').css('margin-bottom', '0px');
	$('#message_body').attr('class', 'resizable');
	$('#message_body').css('width', oldWidth);
	$('#message_body').css('height', oldHeight);
	$('#message_body').css('font-family', 'Arial,Helvetica,sans-serif');
	$('#message_body').css('font-size', '13px');
	
	textareaAttach();
}
// ---------------------------------------------------------------------------------------------------------------------

// -- Fix dropdowns ----------------------------------------------------------------------------------------------------
function fixMarketDropdown() {
	if (eRAopt["dropdowns"] == false) {
		return;
	}
	
	var currentLink = document.location.href;
	var companLink;
	var newCompanLink;
	
	$('.onaccount_display a:gt(0)').each(function(){
		companLink = $(this).attr('onClick').split('\'')[1].split('_');
		newCompanLink = currentLink + '/' + companLink[0] + '/' + companLink[1];
		$(this).attr('onClick', '')
		$(this).attr('href', newCompanLink)
	});
}

function fixJobOfferDropdown() {
	if (eRAopt["dropdowns"] == false) {
		return;
	}
	
	$('#skill_holder').css('left', '7px');
}
// ---------------------------------------------------------------------------------------------------------------------

// -- Elections --------------------------------------------------------------------------------------------------------
function improveElections() {
	if (eRAopt["elections"] == false) {
		return;
	}
	
	var voteWinnerCount = $('.vote_block:eq(0) p').html().split('<br>');
	var voteWinnerNumber = voteWinnerCount[0].split(' ')[0];
	
	$('.vote_block').each(function() {
		$(this).find('p').css('margin-top', '9px');
		var voteCount = $(this).find('p').html().split('<br>');
		var voteNumber = voteCount[0].split(' ')[0];
		var voteDiff = parseFloat(voteNumber) - parseFloat(voteWinnerNumber);
		if (voteDiff < 0) {
			$(this).find('p').html(voteCount[0] + '<br><small>' + voteDiff + '</small><br>' + voteCount[1])
		} else {
			$(this).find('p').html(voteCount[0] + '<br><small>&mdash;</small><br>' + voteCount[1])
		}
	});
}
// ---------------------------------------------------------------------------------------------------------------------

// -- Autodonater ------------------------------------------------------------------------------------------------------
function autoDonater() {
	if (eRAopt["autodonater"] == false) {
		return;
	}
	
	readSettings('donater');
	GM_deleteValue(document.userid + '.donateStatus');
	GM_deleteValue(document.userid + '.donateOffer');
	GM_deleteValue(document.userid + '.donateOfferExist');
	GM_deleteValue(document.userid + '.donateBought');
	GM_deleteValue(document.userid + '.donateRaw');
	GM_deleteValue(document.userid + '.donateCompany');
	GM_deleteValue(document.userid + '.donateAmount');
	GM_deleteValue(document.userid + '.donateCountry');
	GM_deleteValue(document.userid + '.donateValue');
	
	var location = document.location.href.split('/');
	var LOCALE = document.location.href.split('/')[3];
	
	if (location[6] == 'donate') {
		var companyId = document.location.href.split('/')[5];
		var indId = $('#company_' + companyId + ' img').attr('src').split('/')[6];
		var ecur = country_currency[$('.flagholder a').attr('href').split('/')[5]];
		var countryCode = country_id[$('.flagholder a').attr('href').split('/')[5].toLowerCase()];
		var donStatus = eRAdon['status'];
		var donAmount = eRAdon['amount'];
		var donCompany = eRAdon['company'];
		var donBought = eRAdon['bought'];
		var rawId = eRAdon['raw'];
		var donOfferExist = eRAdon['exist'];
		
		if(indId < 10) {
			rawId = industry_id[industry_raw[id_industry[indId]]];
			$('#moveHolder3').after('<div class="moveTable"><table style="width: 100%;"><tr><td style="border-bottom: none; padding: 8px 0 8px 5px; width: 130px;"><h4>Amount </h4><input id="donateAmount_' + companyId + '" type="text" class="donateField" style="padding: 2px 2px 2px 2px; width: 70px;" value="0"></input></td><td style="border-bottom: none; padding: 8px 0 8px 5px; width: 130px;"><h4>Value </h4><input type="text" id="donateValue_' + companyId + '" class="donateField" value="0"></input><span class="donateCur">' + ecur + '</span></td><td style="border-bottom: none; padding: 8px 5px; width: 130px;"><h4>Offer ID </h4><input id="donateOffer_' + companyId + '" type="text" class="donateField" style="padding: 2px 2px 2px 2px; width: 70px; text-align: center;" value=""></input></td><td style="border-bottom: none; padding: 8px 0px;"><a id="donate_' + companyId + '" href="javascript:;" class="fluid_blue_dark_small right" title="Donate raw" style="margin-top: 0px; margin-right: 5px"><span>Donate raw</span></a></td></tr></table></div>');
			
			$('input[id*="donateAmount_"]').focus(function() {
				$('input[id*="donateValue_"]').attr('disabled', 'disabled');
			});
			$('input[id*="donateAmount_"]').blur(function() {
				$('input[id*="donateValue_"]').removeAttr("disabled");
			});
			
			$('input[id*="donateValue_"]').focus(function() {
				$('input[id*="donateAmount_"]').attr('disabled', 'disabled');
			});
			$('input[id*="donateValue_"]').blur(function() {
				$('input[id*="donateAmount_"]').removeAttr("disabled");
			});
			
			$('a[id*="donate_"]').click(function() {
				var donId = $(this).attr('id').split('_')[1];
				eRAdon['company'] = donId;
				eRAdon['raw'] = rawId;
				eRAdon['country'] = countryCode;
				var donAmount = $('#donateAmount_' + donId).val() == null ? 0 : $('#donateAmount_' + donId).val();
				var donValue = $('#donateValue_' + donId).val() == null ? 0 : $('#donateValue_' + donId).val();
				var donOffer = $('#donateOffer_' + donId).val() == null ? 0 : $('#donateOffer_' + donId).val();
				writeSettings(document.userid + '.Donater', eRAdon);
				
				if (parseFloat(donAmount) > 0 || parseFloat(donValue) > 0) {
					eRAdon['amount'] = donAmount;
					eRAdon['value'] = donValue;
					eRAdon['status'] = 'buy';
					eRAdon['offer'] = donOffer;
					writeSettings(document.userid + '.Donater', eRAdon);
					
					window.location.assign('http://economy.erepublik.com/' + LOCALE + '/market/' + countryCode + '/' + rawId + '/0/0/0/0/citizen/0/price_asc/1');
				} else {
					alert("Amount or value must be greater than 0!");
				}
			});
		}
			
		if (donStatus == 'donate') {
			eRAdon['bought'] = '0';
			if (parseFloat(donAmount) > 0) {
				eRAdon['status'] = 'buy';
				writeSettings(document.userid + '.Donater', eRAdon);
			} else {
				eRAdon['status'] = 'stop';
				writeSettings(document.userid + '.Donater', eRAdon);
			}
			
			moveFirstN(donBought);
			document.forms[1].submit();
		} else if (donStatus == 'buy') {
			window.location.assign('http://economy.erepublik.com/' + LOCALE + '/market/' + countryCode + '/' + rawId + '/0/0/0/0/citizen/0/price_asc/1');
		} else if (donStatus == 'stop') {
			eRAdon['status'] = 'done';
			eRAdon['offer'] = '0';
			eRAdon['exists'] = 'no';
			writeSettings(document.userid + '.Donater', eRAdon);
			alert("Autodonater finished!");
		} else if (donStatus == 'errorMoney') {
			eRAdon['status'] = 'done';
			eRAdon['offer'] = '0';
			eRAdon['exists'] = 'no';
			writeSettings(document.userid + '.Donater', eRAdon);
			alert("Error! Not enough money!");
		} else if (donStatus == 'errorNone') {
			eRAdon['status'] = 'done';
			eRAdon['offer'] = '0';
			eRAdon['exists'] = 'no';
			writeSettings(document.userid + '.Donater', eRAdon);
			alert("Error! No offer with that ID!");
		} else if (donStatus == 'errorCountry') {
			eRAdon['status'] = 'done';
			eRAdon['offer'] = '0';
			eRAdon['exists'] = 'no';
			writeSettings(document.userid + '.Donater', eRAdon);
			alert("Error! Buying account is not from same country as offer ID!");
		}
	}
	
	if (location[4] == 'market') {
		readSettings('accounts');
		var donStatus = eRAdon['status'];
		var donAmount = eRAdon['amount']
		var donValue = eRAdon['value']
		var donCompany = eRAdon['company']
		var buyOfferId = eRAdon['offer']
		var buyCountry = eRAdon['country']
		
		if (donStatus == 'donate' && $('.errtxt').length > 0 || donStatus == 'donate' && $('.error_message').length > 0) {
			donStatus = 'errorNone';
			eRAdon['status'] = 'errorNone';
			eRAdon['bought'] = '0';
			eRAdon['amount'] = '0';
			eRAdon['exists'] = 'no';
			writeSettings(document.userid + '.Donater', eRAdon);
			window.location.assign('http://economy.erepublik.com/' + LOCALE + '/company/' + donCompany + '/donate');
		}
		
		var buyOfferAmount = 10;
		var buyOfferAmountValue;
		var country;
		if ($('#countryId_titletext').length == 0) {
			country = $('.flagholder a').attr('href').split('/')[5];
		} else {
			country = $('#countryId_titletext img').attr('src').split('/')[6].split('.')[0];
		}
		var currency = country_currency[country];
		var currentMoney = eRAacc[currency];
		
		var initPrice = $('td[class*="m_price"]').eq(0).find('strong').eq(0).text() + $('td[class*="m_price"]').eq(0).find('sup').text();
		initPrice = initPrice.split(' ')[0];
		
		if (donValue > 0) {
			eRAdon['value'] = '0';
			writeSettings(document.userid + '.Donater', eRAdon);
			donAmount = Math.floor(parseFloat(donValue) / parseFloat(initPrice));
		}
		
		buyOfferAmountValue = parseFloat(donAmount) * parseFloat(initPrice);
		if (donStatus == 'buy' && parseFloat(buyOfferAmountValue) > parseFloat(currentMoney)) {
			donStatus = 'errorMoney';
			eRAdon['status'] = 'errorMoney';
			eRAdon['bought'] = '0';
			eRAdon['amount'] = '0';
			writeSettings(document.userid + '.Donater', eRAdon);
		}
		
		if (donStatus == 'donate' || donStatus == 'errorMoney' || donStatus == 'errorNone') {
			window.location.assign('http://economy.erepublik.com/' + LOCALE + '/company/' + donCompany + '/donate');
		} else if (donStatus == 'buy') {
			if (parseFloat(donAmount) > 0) {
				eRAdon['status'] = 'donate';
				writeSettings(document.userid + '.Donater', eRAdon);
				if (parseFloat(donAmount) < 10) {
					buyOfferAmount = parseFloat(donAmount);
				}
				if (buyOfferId == 0) {
					if (parseFloat($('.m_stock:eq(0)').text().trim()) > parseFloat(buyOfferAmount)) {
						buyOfferId = $('.m_product:eq(0)').attr('id').split('_')[1];
					} else if (parseFloat($('.m_stock:eq(1)').text().trim()) > parseFloat(buyOfferAmount)) {
						buyOfferId = $('.m_product:eq(1)').attr('id').split('_')[1];
					} else if (parseFloat($('.m_stock:eq(2)').text().trim()) > parseFloat(buyOfferAmount)) {
						buyOfferId = $('.m_product:eq(2)').attr('id').split('_')[1];
					}
				}
				
				var newDonAmount = parseFloat(donAmount) - parseFloat(buyOfferAmount);
				eRAdon['bought'] = buyOfferAmount;
				eRAdon['amount'] = newDonAmount;
				writeSettings(document.userid + '.Donater', eRAdon);
				
				$('#buyMarketOffer_amount').val(buyOfferAmount);
				$('#buyMarketOffer_offerId').val(buyOfferId);
				document.forms[1].submit();
			} else {
				eRAdon['status'] = 'done';
				writeSettings(document.userid + '.Donater', eRAdon);
			}
		}
	}
}
// ---------------------------------------------------------------------------------------------------------------------

// -- Better inventory -------------------------------------------------------------------------------------------------
function reposPosN(n) {
	var firstN = $('.owninventory.todrag.ui-sortable').children('li:eq(' + n + ')');
	var movTo = $('.owninventory.todrag.ui-sortable');
	firstN.prependTo(movTo);
}

function improveInventory() {
	if (eRAopt["donations"] == false) {
		return;
	}
	
	$('.blueborder').before('<div style="display: block; clear: both;">&nbsp;</div>');
	
	$('#cancel_save').live('mouseup', function() {
		$('#moveHolder1').remove();
	});
	
	$('#inventory_save').live('mouseup', function() {
		$('#moveHolder1').remove();
	});
	
	$('#inventory_edit').live('mouseup', function() {
		$('.blueborder').before('<div id="moveHolder1" class="moveTable"><h4 style="margin-bottom: 8px; margin-top: 8px; padding: 0 !important;">Move N&deg; </h4><table style="float: right; margin-top: -32px; width: 431px;"><tr><td id="movePos_1" class="moveCell">1</td><td id="movePos_2" class="moveCell">2</td><td id="movePos_3" class="moveCell">3</td><td id="movePos_4" class="moveCell">4</td><td id="movePos_5" class="moveCell">5</td><td id="movePos_6" class="moveCell">6</td><td id="movePos_7" class="moveCell">7</td><td id="movePos_8" class="moveCell">8</td><td id="movePos_9" class="moveCell">9</td><td id="movePos_10" class="moveCell">10</td></tr><tr><td id="movePos_11" class="moveCell">11</td><td id="movePos_12" class="moveCell">12</td><td id="movePos_13" class="moveCell">13</td><td id="movePos_14" class="moveCell">14</td><td id="movePos_15" class="moveCell">15</td><td id="movePos_16" class="moveCell">16</td><td id="movePos_17" class="moveCell">17</td><td id="movePos_18" class="moveCell">18</td><td id="movePos_19" class="moveCell">19</td><td id="movePos_20" class="moveCell">20</td></tr></table></div>');
		
		$('#moveHolder1 table tr td[id^="movePos_"]').live('click', function() {
			var movePosition = $(this).attr('id').split('_')[1];
			movePosition = movePosition - 1;
			reposPosN(movePosition);
		});
	});
}
// ---------------------------------------------------------------------------------------------------------------------

// -- Profile ----------------------------------------------------------------------------------------------------------
function improveProfile() {
	$('#company_listing .one_company').each(function() {
		$(this).css('display', 'block');
	});
	
	$('#showcompanies').toggleClass('up');
	$('#showcompanies').html('show less');
}
// ---------------------------------------------------------------------------------------------------------------------

// -- Citizen tracker --------------------------------------------------------------------------------------------------
var levelCap = [0, 5, 10, 15, 20, 30, 40, 50, 60, 70, 80, 90, 100, 120, 150, 180, 230, 300, 400, 500, 1000, 1500, 2000, 3000, 5000, 7000, 10000, 15000, 20000, 25000, 30000, 35000, 40000, 45000, 50000, 55000, 60000, 65000, 70000, 75000];

function fixAvatar(avatar) {
	avatar = avatar.replace('_55x55', '');
	return avatar;
}

function getNextExp(level, experience) {
	nextExp = parseFloat(levelCap[level]) - parseFloat(experience);
	return nextExp;
}

function citizenTracker() {
	if (eRAopt["cittrack"] == false) {
		return;
	}
	
	var location = document.location.href.split('/')
	
	if(location[4]) {
		return;
	}
	
	count2 = 0;
	
	var loadingCitizens = '<ul id="loadingCitizens" class="slideItemHolder"><li class="noItem"><img src="' + loadingImage + '" style="vertical-align: middle;"></li></ul>';
	
	$('#content').append('<div id="citSlideHolder" class="slideHolder">' +
						 	'<h4>Citizen tracker</h4>' +
						 	'<div id="citSlideBar" class="slideBar">' +
						 		'<a id="citSlideLeft" href="javascript:;" class="slideLeft"></a>' +
						 		'<div class="slideFaderLeft"></div>' +
						 		'<div id="citSlideContent" class="slideContent">' + loadingCitizens + '</div>' +
						 		'<div class="slideFaderRight"></div>' +
						 		'<a id="citSlideRight" href="javascript:;" class="slideRight"></a>' +
						 	'</div>' +
						 	'<div id="citSlideButton" class="slideButton"></div>' +
						 '</div>');
	
	var LOCALE = location[3];
	
	var citizenIdsArray = GM_getValue('mentorCitizens', null);
	
	if (citizenIdsArray != null) {
		citizenIdsArray = eval(citizenIdsArray);
	} else {
		citizenIdsArray = new Array();
		GM_setValue('mentorCitizens', uneval(citizenIdsArray));
	}
	
	var noCitizens = null;
	
	if (citizenIdsArray.length == 0) {
		noCitizens = '<li id="noCitizens" class="noItem">No citizens added yet!</li>';
		citizenIdsArray.push('000000');
	}
	
	var nCitizens = citizenIdsArray.length;
	
	var citizenList = '<ul id="citHolder" class="slideItemHolder">';
	
	for(var i = 0; i < citizenIdsArray.length; i++) {
		var Citizen = null;
		
		GM_xmlhttpRequest({
			method: 'GET',
			url: API_URL + 'citizens/' + citizenIdsArray[i] + '.json',
			onload:function(response) {
				try {
					Citizen = eval('(' + response.responseText + ')');
					
					citizenList += '<li id="citizenRow_' + Citizen.id + '">' +
						'<div style="background-color: #ffffff; border: 1px solid #B5D6E1; display: table; padding: 2px; width: 102px;">' +
							'<div style="-moz-border-radius: 0 0 0 2px; background-color: #B5D6E1; display: inline-block; height: 14px; right: -3px; position: relative; top: -3px; width: 14px; z-index:9999;">' +
								'<a id="removeCitizenId_' + Citizen.id + '" href="javascript:;" title="Remove" class="removeItem">x</a>' +
							'</div>' +
							'<div style="display: table-row-group; float: left;">' +
								'<div style="padding: 3px 1px; display: table-cell;">' +
									'<img width="30px" height="30px" src="' + fixAvatar(Citizen.avatar_link) + '">' +
								'</div>' +
								'<div style="display: table-cell; padding-left: 2px; vertical-align: top; width: 52px;">' +
									'<div style="height: 14px; overflow: hidden; width: 54px; white-space: nowrap;">' +
										'<a class="citizenName" href="http://www.erepublik.com/' + LOCALE + '/citizen/profile/' + Citizen.id + '" title="' + Citizen.name + '">' + Citizen.name + '</a>' +
									'</div>' +
									'<div style="height: 12px; width: 54px; font-size: 10px;">' + lvl. + ' Citizen.level </div>' +
									'<div style="height: 12px; width: 54px; font-size: 10px;">' + Citizen.experience_points + '/' + levelCap[Citizen.level] + '</div>' +
								'</div>' +
							'</div>' +
							'<div style="float: left; margin: 2px 0px; display: table-cell; width: 51px;">' +
								'<div style="overflow: hidden; float: left; white-space: nowrap; padding: 0px 1px; width: 49px; text-align: center;">' +
									'<img style="vertical-align: top; border: 1px solid #DDDDDD;" title="' + Citizen.residence.country.name + '" src="http://www.erepublik.com/images/flags/M/' + id_country[Citizen.residence.country.id] + '.gif" height="14px">' +
								'</div>' +
								'<div title="' + Citizen.residence.country.name + '" style="font-size: 10px; height: 12px; overflow: hidden; float: left; white-space: nowrap; padding: 0px 1px; width: 49px; text-align: center;">' + Citizen.residence.country.name + '</div>' +
								'<div title="' + Citizen.residence.region.name + '" style="font-size: 10px; height: 12px; overflow: hidden; float: left; white-space: nowrap; margin: 0 0 2px; padding: 0px 1px; width: 49px; text-align: center;">' + Citizen.residence.region.name + '</div>' +
							'</div>' +
							'<div style="float: left; margin: 2px 0px; display: table-cell; width: 51px;">' +
								'<div style="padding: 3px 1px; width: 49px;">' +
									'<img title="Health" width="15px" height="15px" src="http://www.erepublik.com/images/modules/timemanagement/wellness_small.png" style="vertical-align: bottom;">' +
									'<div style="float: right; padding-top: 1px; padding-right: 1px; font-size: 10px;">' + parseFloat(Citizen.wellness).toFixed(2) + '</div>' +
								'</div>' +
								'<div style="padding: 3px 1px; width: 49px;">' +
									'<img title="Happiness" width="15px" height="15px" src="http://www.erepublik.com/images/modules/timemanagement/happiness_small.png" style="vertical-align: bottom;">' +
									'<div style="float: right; padding-top: 1px; padding-right: 1px; font-size: 10px;">' + parseFloat(Citizen.happiness).toFixed(2) + '</div>' +
								'</div>' +
							'</div>' +
							
							'<div style="float: left; margin: 1px 0px 0px;">' +
								'<div style="padding: 3px 5px 3px 1px; display: table-cell; width: 45px; text-align: right">' +
									'<a href="http://economy.erepublik.com/' + LOCALE + '/citizen/donate/' + Citizen.id + '" target="_blank"><img width="15px" height="15px" title="Donate" src="' + iconDonate + '"></a>' +
								'</div>' +
								'<div style="padding: 3px 1px 3px 5px; display: table-cell; width: 45px;">' +
									'<a href="http://www.erepublik.com/' + LOCALE + '/messages/compose/' + Citizen.id + '" target="_blank"><img width="15px" height="15px" title="Send message" src="' + iconMessage + '"></a>' +
								'</div>' +
							'</div>' +
						'</div>' +
					'</li>';
					
				} catch(err) {
					/*
					var badCitizenId = response.finalUrl.split('/')[6].split('.')[0];
					removeArrayElement(citizenIdsArray, '000000');
					removeArrayElement(citizenIdsArray, badCitizenId);
					GM_setValue('mentorCitizens', uneval(citizenIdsArray));
					*/
				}
				if (++count3 == nCitizens) {
					if (noCitizens == null) {
						citizenList += '</ul>';
					} else {
						citizenList += noCitizens + '</ul>';
					}
					
					$('#loadingCitizens').remove();
					$('#citSlideContent').append(citizenList);
					
					$('a[id*="removeCitizenId_"]').live('click', function() {
						var thisId = $(this).attr('id').split('_')[1];
						
						removeArrayElement(citizenIdsArray, '000000');
						removeArrayElement(citizenIdsArray, thisId);
						GM_setValue('mentorCitizens', uneval(citizenIdsArray));
						
						$('li[id*="citizenRow_' + thisId + '"]').remove();
						
						if (citizenIdsArray == '') {
							$('#citHolder').html('<li id="noCitizens" class="noItem">No citizens added yet!</li>');
						}
						
						if ($('#citHolder').css('left') != '0px') {
							$('#citHolder').animate({ 'left': '+=110px' }, 'fast' );
						}
					});
					
					if ($('#addCitizen').length == 0) {
						$('#citSlideButton').append('<div id="addCitizenHolder" style="height: 23px; float: left;">' +
														'<a id="addCitizen" href="javascript:;" class="fluid_blue_dark_small left" title="Add new citizen" style="margin-top: 0px; margin-bottom: 0px; margin-left: 8px;">' +
															'<span>Add citizen</span>' +
														'</a>' +
													'</div>' +
													'<div style="float: left; overflow: hidden; height: 23px; width: 574px">' +
														'<div id="addCitizenIdPrompt" style="left: -574px; position: relative;">' +
															'<div style="float: left; margin-left: 10px; margin-top: 2px;">Enter citizen ID <input id="addCitizenIdPromptId" type="text" size="13" style="text-align: center;"></input></div>' +
															'<div>' +
																'<a id="addCitizenIdPromptSubmit" title="Submit" class="fluid_blue_dark_small left" style="margin-top: 0px; margin-bottom: 0px; margin-left: 10px;">' +
																	'<span>Submit</span>' +
																'</a>' +
															'</div>' +
															'<div id="addCitizenPresent" style="-moz-border-radius: 3px 3px 3px 3px; background-color: #FFF2F2; border: 1px solid #FFC4C4; color: #990000; float: left; font-weight: bold; line-height: 20px; margin-left: 20px; margin-top: 1px; opacity: 0; text-align: center; width: 250px;">Citizen with that ID already added!</div>' +
														'</div>' +
													'</div>');
					}
					
					$('#addCitizen').click(function() {
						if ($('#addCitizenIdPrompt').css('left') != '-574px') {
							$('#addCitizenIdPrompt').animate({ 'left': '-574px' }, 'fast' );
						} else {
							$('#addCitizenIdPrompt').animate({ 'left': '0px' }, 'fast' );
						}
					});
				
					$('#addCitizenIdPromptSubmit').live('click', function(e) {
						var thisId = null;
						
						if ($('#addCitizenIdPromptId').val() != '') {
							thisId = $('#addCitizenIdPromptId').val();
							
							var idPresent = contains(citizenIdsArray, thisId);
							
							if(idPresent == false) {
								removeArrayElement(citizenIdsArray, '000000');
								citizenIdsArray.push(thisId);
								GM_setValue('mentorCitizens', uneval(citizenIdsArray));
								
								$('#noCitizens').remove();
								$('#addCitizenIdPromptId').val('');
								
								if ($('#addCitizenIdPrompt').css('left') != '-574px') {
									$('#addCitizenIdPrompt').animate({ 'left': '-574px' }, 'fast' );
								} else {
									$('#addCitizenIdPrompt').animate({ 'left': '0px' }, 'fast' );
								}
								
								var citPos = '-' + (citizenIdsArray.length * 110 - 550) + 'px'; 
								$('#citHolder').animate({ 'left': citPos }, 'fast' );
								
								addCitizen(thisId);
							} else {
								$('#addCitizenPresent').animate({ 'opacity': '1' }, 'fast' );
								setTimeout(function() {
									$('#addCitizenPresent').animate({ 'opacity': '0' }, 'fast' );
								}, 5000);
							}
						} else {
							$('#addCitizenPresent').text('You must input citizen ID first!').animate({ 'opacity': '1' }, 'fast' );
							setTimeout(function() {
								$('#addCitizenPresent').animate({ 'opacity': '0' }, 'fast' );
								setTimeout(function() {
									$('#addCitizenPresent').text('Citizen with that ID already added!');
								}, 1100);
							}, 5000);
						}
					});
					
					var holderPos = '0px';
					
					$('#citSlideRight').live('mouseup', function() {
						var holderLength = -(citizenIdsArray.length * 110);
						if (holderLength < -643 && parseFloat($('#citHolder').css('left').replace('px', '')) > (holderLength + 643)) {
							holderPos = parseFloat($('#citHolder').css('left').replace('px', ''));
							
							if ((-holderLength - -holderPos - 550) >= 550) {
								$('#citHolder').animate({ 'left': '-=550px' }, 'fast' );
							} else {
								var newLength = '-=' + (-holderLength - -holderPos - 550) + 'px';
								$('#citHolder').animate({ 'left': newLength }, 'fast' );
							}
						}
					});
					
					$('#citSlideLeft').live('mouseup', function() {
						var holderLength = -(citizenIdsArray.length * 110);
						if (holderLength < -643 && $('#citHolder').css('left') != '0px') {
							holderPos = parseFloat($('#citHolder').css('left').replace('px', ''));
							
							if (-holderPos >= 550) {
								$('#citHolder').animate({ 'left': '+=550px' }, 'fast' );
							} else {
								var newLength = '+=' + -holderPos + 'px';
								$('#citHolder').animate({ 'left': newLength }, 'fast' );
							}
						}
					});
				}
			}
		});
	}
}

function addCitizen(id) {
	var LOCALE = document.location.href.split('/')[3];
	
	var citizenIdsArray = GM_getValue('mentorCitizens', null);
	citizenIdsArray = eval(citizenIdsArray);
	
	$('#citHolder').append('<li id="loadingCitizen" style="text-align: center; line-height: 110px;">' +
								'<div style="background-color: #ffffff; border: 1px solid #B5D6E1; display: table; padding: 2px; width: 102px;">' +
									'<img src="' + loadingImage + '" style="vertical-align: middle;">' +
								'</div>' +
							'</li>');
	
	var Citizen = null;
	
	GM_xmlhttpRequest({
		method: 'GET',
		url: API_URL + 'citizens/' + escape(id) + '.json',
		onload:function(response) {
			try {
				Citizen = eval('(' + response.responseText + ')');
				
				$('#loadingCitizen').remove();
				$('#citHolder').append('<li id="citizenRow_' + Citizen.id + '">' +
						'<div style="background-color: #ffffff; border: 1px solid #B5D6E1; display: table; padding: 2px; width: 102px;">' +
							'<div style="-moz-border-radius: 0 0 0 2px; background-color: #B5D6E1; display: inline-block; height: 14px; right: -3px; position: relative; top: -3px; width: 14px; z-index:9999;">' +
								'<a id="removeCitizenId_' + Citizen.id + '" href="javascript:;" title="Remove" class="removeItem">x</a>' +
							'</div>' +
							'<div style="display: table-row-group; float: left;">' +
								'<div style="padding: 3px 1px; display: table-cell;">' +
									'<img width="30px" height="30px" src="' + fixAvatar(Citizen.avatar_link) + '">' +
								'</div>' +
								'<div style="display: table-cell; padding-left: 2px; vertical-align: top; width: 52px;">' +
									'<div style="height: 14px; overflow: hidden; width: 54px; white-space: nowrap;">' +
										'<a class="citizenName" href="http://www.erepublik.com/' + LOCALE + '/citizen/profile/' + Citizen.id + '" title="' + Citizen.name + '">' + Citizen.name + '</a>' +
									'</div>' +
									'<div style="height: 12px; width: 54px; font-size: 10px;">' + Citizen.level + ' lvl.</div>' +
									'<div style="height: 12px; width: 54px; font-size: 10px;">' + Citizen.experience_points + '/' + levelCap[Citizen.level] + '</div>' +
								'</div>' +
							'</div>' +
							'<div style="float: left; margin: 2px 0px; display: table-cell; width: 51px;">' +
								'<div style="overflow: hidden; float: left; white-space: nowrap; padding: 0px 1px; width: 49px; text-align: center;">' +
									'<img style="vertical-align: top; border: 1px solid #DDDDDD;" title="' + Citizen.residence.country.name + '" src="http://www.erepublik.com/images/flags/M/' + id_country[Citizen.residence.country.id] + '.gif" height="14px">' +
								'</div>' +
								'<div title="' + Citizen.residence.country.name + '" style="font-size: 10px; height: 12px; overflow: hidden; float: left; white-space: nowrap; padding: 0px 1px; width: 49px; text-align: center;">' + Citizen.residence.country.name + '</div>' +
								'<div title="' + Citizen.residence.region.name + '" style="font-size: 10px; height: 12px; overflow: hidden; float: left; white-space: nowrap; margin: 0 0 2px; padding: 0px 1px; width: 49px; text-align: center;">' + Citizen.residence.region.name + '</div>' +
							'</div>' +
							'<div style="float: left; margin: 2px 0px; display: table-cell; width: 51px;">' +
								'<div style="padding: 3px 1px; width: 49px;">' +
									'<img title="Health" width="15px" height="15px" src="http://www.erepublik.com/images/modules/timemanagement/wellness_small.png" style="vertical-align: bottom;">' +
									'<div style="float: right; padding-top: 1px; padding-right: 1px; font-size: 10px;">' + parseFloat(Citizen.wellness).toFixed(2) + '</div>' +
								'</div>' +
								'<div style="padding: 3px 1px; width: 49px;">' +
									'<img title="Happiness" width="15px" height="15px" src="http://www.erepublik.com/images/modules/timemanagement/happiness_small.png" style="vertical-align: bottom;">' +
									'<div style="float: right; padding-top: 1px; padding-right: 1px; font-size: 10px;">' + parseFloat(Citizen.happiness).toFixed(2) + '</div>' +
								'</div>' +
							'</div>' +
							
							'<div style="float: left; margin: 1px 0px 0px;">' +
								'<div style="padding: 3px 5px 3px 1px; display: table-cell; width: 45px; text-align: right">' +
									'<a href="http://economy.erepublik.com/' + LOCALE + '/citizen/donate/' + Citizen.id + '" target="_blank"><img width="15px" height="15px" title="Donate" src="' + iconDonate + '"></a>' +
								'</div>' +
								'<div style="padding: 3px 1px 3px 5px; display: table-cell; width: 45px;">' +
									'<a href="http://www.erepublik.com/' + LOCALE + '/messages/compose/' + Citizen.id + '" target="_blank"><img width="15px" height="15px" title="Send message" src="' + iconMessage + '"></a>' +
								'</div>' +
							'</div>' +
						'</div>' +
					'</li>');
					
			} catch(err) {
				var badCitizenId = response.finalUrl.split('/')[6].split('.')[0];
				removeArrayElement(citizenIdsArray, '000000');
				removeArrayElement(citizenIdsArray, badCitizenId);
				GM_setValue('mentorCitizens', uneval(citizenIdsArray));
			}
		}
	});
}
// ---------------------------------------------------------------------------------------------------------------------

// -- Company tracker --------------------------------------------------------------------------------------------------
function companyTracker() {
	if (eRAopt["comtrack"] == false) {
		return;
	}
	
	var location = document.location.href.split('/')
	
	if(location[4]) {
		return;
	}
	
	count2 = 0;
	
	var loadingCompanies = '<ul id="loadingCompanies" class="slideItemHolder"><li class="noItem"><img src="' + loadingImage + '" style="vertical-align: middle;"></li></ul>';
	
	$('#content').append('<div id="compSlideHolder" class="slideHolder">' +
						 	'<h4>Company tracker</h4>' +
						 	'<div id="compSlideBar" class="slideBar">' +
						 		'<a id="compSlideLeft" href="javascript:;" class="slideLeft"></a>' +
						 		'<div class="slideFaderLeft"></div>' +
						 		'<div id="compSlideContent" class="slideContent">' + loadingCompanies + '</div>' +
						 		'<div class="slideFaderRight"></div>' +
						 		'<a id="compSlideRight" href="javascript:;" class="slideRight"></a>' +
						 	'</div>' +
						 	'<div id="compSlideButton" class="slideButton"></div>' +
						 '</div>');
	
	var LOCALE = location[3];
	
	var companyIdsArray = GM_getValue('otherCompanies', null);
	
	if (companyIdsArray != null) {
		companyIdsArray = eval(companyIdsArray);
	} else {
		companyIdsArray = new Array();
		GM_setValue('otherCompanies', uneval(companyIdsArray));
	}
	
	var noCompanies = null;
	
	if (companyIdsArray.length == 0) {
		noCompanies = '<li id="noCompanies" class="noItem">No companies added yet!</li>';
		companyIdsArray.push('000000');
	}
	
	var nCompanies = companyIdsArray.length;
	
	var companiesList = '<ul id="compHolder" class="slideItemHolder">';
	var tooltipList = '';
	
	for (var l = 0; l < companyIdsArray.length; l++) {
		var companyId = null;
		var indId = null;
		var Company = null;
		var custLevel = null;
		var workersArray = null;
		var recNum = 10;
		var employeesSection = null;
		var industrySection = null;
		var dataSection = null;
		var tooltipStat_1 = null;
		var tooltipStat_2 = null;
		var tooltipStat_3 = null;
		var tooltipStat_4 = null;
		var CompanyCustomiz_1 = null;
		var CompanyCustomiz_2 = null;
		var CompanyCustomiz_3 = null;
		var CompanyCustomiz_4 = null;
		var CompanyCustomValue_1 = null;
		var CompanyCustomValue_2 = null;
		var CompanyCustomValue_3 = null;
		var CompanyCustomValue_4 = null;
		
		GM_xmlhttpRequest({
			method: 'GET',
			url: API_URL + 'companies/' + companyIdsArray[l] + '.json',
			onload:function(response) {
				try {
					Company = eval('(' + response.responseText + ')');
					
					var indId = Company.industry.id;
					var custLevel = Company.customization_level;
					var workersArray = eval(Company.employees);
					
					if(indId >= 1 && indId <= 2 || indId >= 6) {
						recNum = 10;
					} else {
						recNum = 20;
					}
					
					if(workersArray.length < recNum || workersArray.length > recNum) {
						employeesSection = '<strong style="color: #FF0000;">' + workersArray.length + '</strong><strong>/' + recNum + '</strong>';
					} else {
						employeesSection = '<strong>' + workersArray.length + '</strong><strong>/' + recNum + '</strong>';
					}
									
					if(indId == 1) {
						CompanyCustomiz_1 = mathRound(1.17 * parseFloat(Company.customization["wellness"]), 1);
						CompanyCustomiz_2 = mathRound(1.17 * parseFloat(Company.customization["happiness"]), 1);
						
						CompanyCustomValue_1 = mathRound(parseFloat(Company.customization["wellness"]) / 10, 2);
						CompanyCustomValue_2 = mathRound(parseFloat(Company.customization["happiness"]) / 10, 2);
						
						tooltipStat_1 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/1/part_ingredients.png"><div class="tooltip_bar"><small>Ingredients<strong>' + Company.customization["wellness"] + '</strong></small><div class="bar health"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + CompanyCustomiz_1 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_health.png"><div><small title="Health">Health</small><strong title="' + CompanyCustomValue_1 + ' / day ">' + CompanyCustomValue_1 + ' / day </strong></div>';
						tooltipStat_2 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/1/part_packaging.png"><div class="tooltip_bar"><small>Packaging<strong>' + Company.customization["happiness"] + '</strong></small><div class="bar happiness"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + CompanyCustomiz_2 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_happiness.png"><div><small title="Happiness">Happiness</small><strong title="' + CompanyCustomValue_2 + ' / day ">' + CompanyCustomValue_2 + ' / day </strong></div>';
						
						industrySection = '<a id="image_' + Company.id + '" class="industryImage" href="javascript:;"><img width="40px" height="40px" src="http://www.erepublik.com/images/icons/industry/' + indId + '/q' + custLevel + '.png"></a>';
						var industryTooltip = '<div id="tooltip_' + Company.id + '" class="tooltip_marketplace"><div class="head_icon"><img width="90" height="90" alt="" src="http://www.erepublik.com/images/icons/industry/' + indId + '/q' + custLevel + '_90x90.png"></div><div class="tooltip_content"><div style="" class="tooltip_stat">' + tooltipStat_1 + '</div><div style="" class="tooltip_stat">' + tooltipStat_2 + '</div></div></div>';
						dataSection = '<div class="dataSectionDiv">Raw: <strong>' + Company.raw_materials_in_stock + '</strong></div>' +
									  '<div class="dataSectionDiv">Stock: <strong>' + Company.stock + '</strong></div>' +
									  '<div class="dataSectionDiv">Employees: ' + employeesSection + '</div>';
									
					} else if(indId == 2) {
						CompanyCustomiz_1 = mathRound(1.17 * parseFloat(Company.customization["wellness"]), 1);
						CompanyCustomiz_2 = mathRound(1.17 * parseFloat(Company.customization["happiness"]), 1);
						CompanyCustomiz_3 = mathRound(1.17 * parseFloat(Company.customization["moving-distance"]), 1);
						
						CompanyCustomValue_1 = mathRound(parseFloat(Company.customization["wellness"]) / 10, 2);
						CompanyCustomValue_2 = mathRound(parseFloat(Company.customization["happiness"]) / 10, 2);
						CompanyCustomValue_3 = mathRound(parseFloat(Company.customization["moving-distance"]) / 20, 0);
						
						tooltipStat_1 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/2/part_paper.png"><div class="tooltip_bar"><small>Paper<strong>' + Company.customization["wellness"] + '</strong></small><div class="bar health"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + CompanyCustomiz_1 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_health.png"><div><small title="Health">Health</small><strong title="' + CompanyCustomValue_1 + ' / use ">' + CompanyCustomValue_1 + ' / use </strong></div>';
						tooltipStat_2 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/2/part_packaging.png"><div class="tooltip_bar"><small>Packaging<strong>' + Company.customization["happiness"] + '</strong></small><div class="bar happiness"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + CompanyCustomiz_2 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_happiness.png"><div><small title="Happiness">Happiness</small><strong title="' + CompanyCustomValue_2 + ' / use ">' + CompanyCustomValue_2 + ' / use </strong></div>';
						tooltipStat_3 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/2/part_itinerary.png"><div class="tooltip_bar"><small>Itinerary<strong>' + Company.customization["moving-distance"] + '</strong></small><div class="bar moving_distance"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + CompanyCustomiz_3 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_moving_distance.png"><div><small title="Moving Distance">Moving Di...</small><strong title="' + CompanyCustomValue_3 + ' zone(s)">' + CompanyCustomValue_3 + ' zone(s)</strong></div>';
						
						industrySection = '<a id="image_' + Company.id + '" class="industryImage" href="javascript:;"><img width="40px" height="40px" src="http://www.erepublik.com/images/icons/industry/' + indId + '/q' + custLevel + '.png"></a>';
						var industryTooltip = '<div id="tooltip_' + Company.id + '" class="tooltip_marketplace"><div class="head_icon"><img width="90" height="90" alt="" src="http://www.erepublik.com/images/icons/industry/' + indId + '/q' + custLevel + '_90x90.png"></div><div class="tooltip_content"><div style="" class="tooltip_stat">' + tooltipStat_1 + '</div><div style="" class="tooltip_stat">' + tooltipStat_2 + '</div><div style="" class="tooltip_stat">' + tooltipStat_3 + '</div></div></div>';
						dataSection = '<div class="dataSectionDiv">Raw: <strong>' + Company.raw_materials_in_stock + '</strong></div>' +
									  '<div class="dataSectionDiv">Stock: <strong>' + Company.stock + '</strong></div>' +
									  '<div class="dataSectionDiv">Employees: ' + employeesSection + '</div>';
					
					} else if(indId == 3) {
						CompanyCustomiz_1 = mathRound(1.17 * parseFloat(Company.customization["wellness"]), 1);
						CompanyCustomiz_2 = mathRound(1.17 * parseFloat(Company.customization["happiness"]), 1);
						CompanyCustomiz_3 = mathRound(1.17 * parseFloat(Company.customization["durability"]), 1);
						
						CompanyCustomValue_1 = mathRound(parseFloat(Company.customization["wellness"]) / 2, 2);
						CompanyCustomValue_2 = mathRound(parseFloat(Company.customization["happiness"]) / 10, 2);
						CompanyCustomValue_3 = parseFloat(Company.customization["durability"]);
						
						tooltipStat_1 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/3/part_roof.png"><div class="tooltip_bar"><small>Roof<strong>' + Company.customization["wellness"] + '</strong></small><div class="bar health"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + CompanyCustomiz_1 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_health.png"><div><small title="Health">Health</small><strong title="' + CompanyCustomValue_1 + ' / day ">' + CompanyCustomValue_1 + ' / day </strong></div>';
						tooltipStat_2 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/3/part_layout.png"><div class="tooltip_bar"><small>Layout<strong>' + Company.customization["happiness"] + '</strong></small><div class="bar happiness"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + CompanyCustomiz_2 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_happiness.png"><div><small title="Happiness">Happiness</small><strong title="' + CompanyCustomValue_2 + ' / day ">' + CompanyCustomValue_2 + ' / day </strong></div>';
						tooltipStat_3 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/3/part_walls.png"><div class="tooltip_bar"><small>Walls<strong>' + Company.customization["durability"] + '</strong></small><div class="bar durability"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + CompanyCustomiz_3 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_durability.png"><div><small title="Durability">Durability</small><strong title="' + CompanyCustomValue_3 + ' day(s)">' + CompanyCustomValue_3 + ' day(s)</strong></div>';
						
						industrySection = '<a id="image_' + Company.id + '" class="industryImage" href="javascript:;"><img width="40px" height="40px" src="http://www.erepublik.com/images/icons/industry/' + indId + '/q' + custLevel + '.png"></a>';
						var industryTooltip = '<div id="tooltip_' + Company.id + '" class="tooltip_marketplace"><div class="head_icon"><img width="90" height="90" alt="" src="http://www.erepublik.com/images/icons/industry/' + indId + '/q' + custLevel + '_90x90.png"></div><div class="tooltip_content"><div style="" class="tooltip_stat">' + tooltipStat_1 + '</div><div style="" class="tooltip_stat">' + tooltipStat_2 + '</div><div style="" class="tooltip_stat">' + tooltipStat_3 + '</div></div></div>';
						dataSection = '<div class="dataSectionDiv">Raw: <strong>' + Company.raw_materials_in_stock + '</strong></div>' +
									  '<div class="dataSectionDiv">Stock: <strong>' + Company.stock + '</strong></div>' +
									  '<div class="dataSectionDiv">Employees: ' + employeesSection + '</div>';
					
					} else if(indId == 4) {
						CompanyCustomiz_1 = mathRound(1.17 * parseFloat(Company.customization["durability"]), 1);
						CompanyCustomiz_2 = mathRound(1.17 * parseFloat(Company.customization["wellness"]), 1);
						CompanyCustomiz_3 = mathRound(1.17 * parseFloat(Company.customization["area-of-effect"]), 1);
						
						CompanyCustomValue_1 = mathRound(parseFloat(Company.customization["durability"]) * 2500, 0);
						CompanyCustomValue_2 = mathRound(parseFloat(Company.customization["wellness"]) / 2, 2);
						CompanyCustomValue_3 = mathRound(parseFloat(Company.customization["area-of-effect"]) / 20, 0);
						
						tooltipStat_1 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/4/part_walls.png"><div class="tooltip_bar"><small>Walls<strong>' + Company.customization["durability"] + '</strong></small><div class="bar durability"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + CompanyCustomiz_1 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_durability.png"><div><small title="Health Budget">Health Bu...</small><strong title="' + CompanyCustomValue_1 + '">' + CompanyCustomValue_1 + '</strong></div>';
						tooltipStat_2 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/4/part_roof.png"><div class="tooltip_bar"><small>Roof<strong>' + Company.customization["wellness"] + '</strong></small><div class="bar health"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + CompanyCustomiz_2 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_health.png"><div><small title="Health/Turn/Player">Health/Tur...</small><strong title="' + CompanyCustomValue_2 + ' ">' + CompanyCustomValue_2 + ' </strong></div>';
						tooltipStat_3 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/4/part_ambulances.png"><div class="tooltip_bar"><small>Ambulances<strong>' + Company.customization["area-of-effect"] + '</strong></small><div class="bar area_of_effect"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + CompanyCustomiz_3 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_area_of_effect.png"><div><small title="Area of Effect">Area of Ef...</small><strong title="' + CompanyCustomValue_3 + ' tile(s)">' + CompanyCustomValue_3 + ' tile(s)</strong></div>';
						
						industrySection = '<a id="image_' + Company.id + '" class="industryImage" href="javascript:;"><img width="40px" height="40px" src="http://www.erepublik.com/images/icons/industry/' + indId + '/q' + custLevel + '.png"></a>';
						var industryTooltip = '<div id="tooltip_' + Company.id + '" class="tooltip_marketplace"><div class="head_icon"><img width="90" height="90" alt="" src="http://www.erepublik.com/images/icons/industry/' + indId + '/q' + custLevel + '_90x90.png"></div><div class="tooltip_content"><div style="" class="tooltip_stat">' + tooltipStat_1 + '</div><div style="" class="tooltip_stat">' + tooltipStat_2 + '</div><div style="" class="tooltip_stat">' + tooltipStat_3 + '</div></div></div>';
						dataSection = '<div class="dataSectionDiv">Raw: <strong>' + Company.raw_materials_in_stock + '</strong></div>' +
									  '<div class="dataSectionDiv">Stock: <strong>' + Company.stock + '</strong></div>' +
									  '<div class="dataSectionDiv">Employees: ' + employeesSection + '</div>';
					
					} else if(indId == 5) {
						CompanyCustomiz_1 = mathRound(1.17 * parseFloat(Company.customization["durability"]), 1);
						CompanyCustomiz_2 = mathRound(1.17 * parseFloat(Company.customization["defense"]), 1);
						CompanyCustomiz_3 = mathRound(1.17 * parseFloat(Company.customization["area-of-effect"]), 1);
						
						CompanyCustomValue_1 = mathRound(parseFloat(Company.customization["durability"]) / 2, 2);
						CompanyCustomValue_2 = mathRound(parseFloat(Company.customization["happiness"]) * 50, 2);
						CompanyCustomValue_3 = mathRound(parseFloat(Company.customization["area-of-effect"]) / 20, 0);
						
						tooltipStat_1 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/5/part_layout.png"><div class="tooltip_bar"><small>Layout<strong>' + Company.customization["durability"] + '</strong></small><div class="bar defense"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + CompanyCustomiz_1 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_defense.png"><div><small title="Defense">Defense</small><strong title="' + CompanyCustomValue_1 + '">' + CompanyCustomValue_1 + '</strong></div>';
						tooltipStat_2 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/5/part_walls.png"><div class="tooltip_bar"><small>Walls<strong>' + Company.customization["defense"] + '</strong></small><div class="bar durability"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + CompanyCustomiz_2 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_durability.png"><div><small title="Durability">Durability</small><strong title="' + CompanyCustomValue_2 + ' use(s)">' + CompanyCustomValue_2 + ' use(s)</strong></div>';
						tooltipStat_3 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/5/part_cannons.png"><div class="tooltip_bar"><small>Cannons<strong>' + Company.customization["area-of-effect"] + '</strong></small><div class="bar area_of_effect"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + CompanyCustomiz_3 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_area_of_effect.png"><div><small title="Area of Effect">Area of Ef...</small><strong title="' + CompanyCustomValue_3 + ' tile(s)">' + CompanyCustomValue_3 + ' tile(s)</strong></div>';
						
						industrySection = '<a id="image_' + Company.id + '" class="industryImage" href="javascript:;"><img width="40px" height="40px" src="http://www.erepublik.com/images/icons/industry/' + indId + '/q' + custLevel + '.png"></a>';
						var industryTooltip = '<div id="tooltip_' + Company.id + '" class="tooltip_marketplace"><div class="head_icon"><img width="90" height="90" alt="" src="http://www.erepublik.com/images/icons/industry/' + indId + '/q' + custLevel + '_90x90.png"></div><div class="tooltip_content"><div style="" class="tooltip_stat">' + tooltipStat_1 + '</div><div style="" class="tooltip_stat">' + tooltipStat_2 + '</div><div style="" class="tooltip_stat">' + tooltipStat_3 + '</div></div></div>';
						dataSection = '<div class="dataSectionDiv">Raw: <strong>' + Company.raw_materials_in_stock + '</strong></div>' +
									  '<div class="dataSectionDiv">Stock: <strong>' + Company.stock + '</strong></div>' +
									  '<div class="dataSectionDiv">Employees: ' + employeesSection + '</div>';
					
					} else if(indId == 6) {
						CompanyCustomiz_1 = mathRound(1.17 * parseFloat(Company.customization["damage"]), 1);
						CompanyCustomiz_2 = mathRound(1.17 * parseFloat(Company.customization["attack"]), 1);
						CompanyCustomiz_3 = mathRound(1.17 * parseFloat(Company.customization["defense"]), 1);
						CompanyCustomiz_4 = mathRound(1.17 * parseFloat(Company.customization["durability"]), 1);
						
						CompanyCustomValue_1 = mathRound(parseFloat(Company.customization["damage"]) / 10, 2);
						CompanyCustomValue_2 = parseFloat(Company.customization["attack"]);
						CompanyCustomValue_3 = parseFloat(Company.customization["defense"]);
						CompanyCustomValue_4 = parseFloat(Company.customization["durability"]);
						
						tooltipStat_1 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/6/part_ammunition.png"><div class="tooltip_bar"><small>Ammunition<strong>' + Company.customization["damage"] + '</strong></small><div class="bar damage"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + CompanyCustomiz_1 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_damage.png"><div><small title="Damage">Damage</small><strong title="' + CompanyCustomValue_1 + ' ">' + CompanyCustomValue_1 + ' </strong></div>';
						tooltipStat_2 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/6/part_rifle_barrel.png"><div class="tooltip_bar"><small>Rifle Barrel<strong>' + Company.customization["attack"] + '</strong></small><div class="bar attack"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + CompanyCustomiz_2 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_attack.png"><div><small title="Attack">Attack</small><strong title="' + CompanyCustomValue_2 + ' ">' + CompanyCustomValue_2 + ' </strong></div>';
						tooltipStat_3 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/6/part_frame.png"><div class="tooltip_bar"><small>Frame<strong>' + Company.customization["defense"] + '</strong></small><div class="bar defense"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + CompanyCustomiz_3 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_defense.png"><div><small title="Defense">Defense</small><strong title="' + CompanyCustomValue_3 + ' ">' + CompanyCustomValue_3 + ' </strong></div>';
						tooltipStat_4 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/6/part_rifle_butt.png"><div class="tooltip_bar"><small>Rifle Butt<strong>' + Company.customization["durability"] + '</strong></small><div class="bar durability"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + CompanyCustomiz_4 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_durability.png"><div><small title="Durability">Durability</small><strong title="' + CompanyCustomValue_4 + ' use(s)">' + CompanyCustomValue_4 + ' use(s)</strong></div>';
						
						industrySection = '<a id="image_' + Company.id + '" class="industryImage" href="javascript:;"><img width="40px" height="40px" src="http://www.erepublik.com/images/icons/industry/' + indId + '/q' + custLevel + '.png"></a>';
						var industryTooltip = '<div id="tooltip_' + Company.id + '" class="tooltip_marketplace"><div class="head_icon"><img width="90" height="90" alt="" src="http://www.erepublik.com/images/icons/industry/' + indId + '/q' + custLevel + '_90x90.png"></div><div class="tooltip_content"><div style="" class="tooltip_stat">' + tooltipStat_1 + '</div><div style="" class="tooltip_stat">' + tooltipStat_2 + '</div><div style="" class="tooltip_stat">' + tooltipStat_3 + '</div><div style="" class="tooltip_stat">' + tooltipStat_4 + '</div></div></div>';
						dataSection = '<div class="dataSectionDiv">Raw: <strong>' + Company.raw_materials_in_stock + '</strong></div>' +
									  '<div class="dataSectionDiv">Stock: <strong>' + Company.stock + '</strong></div>' +
									  '<div class="dataSectionDiv">Employees: ' + employeesSection + '</div>';
					
					} else if(indId == 7) {
						CompanyCustomiz_1 = mathRound(1.17 * parseFloat(Company.customization["damage"]), 1);
						CompanyCustomiz_2 = mathRound(1.17 * parseFloat(Company.customization["attack"]), 1);
						CompanyCustomiz_3 = mathRound(1.17 * parseFloat(Company.customization["defense"]), 1);
						CompanyCustomiz_4 = mathRound(1.17 * parseFloat(Company.customization["durability"]), 1);
						
						CompanyCustomValue_1 = mathRound(parseFloat(Company.customization["damage"]) * 0.14, 2);
						CompanyCustomValue_2 = parseFloat(Company.customization["attack"]);
						CompanyCustomValue_3 = parseFloat(Company.customization["defense"]);
						CompanyCustomValue_4 = parseFloat(Company.customization["durability"]);
						
						tooltipStat_1 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/7/part_ammunition.png"><div class="tooltip_bar"><small>Ammunition<strong>' + Company.customization["damage"] + '</strong></small><div class="bar damage"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + CompanyCustomiz_1 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_damage.png"><div><small title="Damage">Damage</small><strong title="' + CompanyCustomValue_1 + ' ">' + CompanyCustomValue_1 + ' </strong></div>';
						tooltipStat_2 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/7/part_tank_barrel.png"><div class="tooltip_bar"><small>Tank Barrel<strong>' + Company.customization["attack"] + '</strong></small><div class="bar attack"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + CompanyCustomiz_2 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_attack.png"><div><small title="Attack">Attack</small><strong title="' + CompanyCustomValue_2 + ' ">' + CompanyCustomValue_2 + ' </strong></div>';
						tooltipStat_3 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/7/part_body.png"><div class="tooltip_bar"><small>Body<strong>' + Company.customization["defense"] + '</strong></small><div class="bar defense"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + CompanyCustomiz_3 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_defense.png"><div><small title="Defense">Defense</small><strong title="' + CompanyCustomValue_3 + ' ">' + CompanyCustomValue_3 + ' </strong></div>';
						tooltipStat_4 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/7/part_engine.png"><div class="tooltip_bar"><small>Engine<strong>' + Company.customization["durability"] + '</strong></small><div class="bar durability"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + CompanyCustomiz_4 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_durability.png"><div><small title="Durability">Durability</small><strong title="' + CompanyCustomValue_4 + ' use(s)">' + CompanyCustomValue_4 + ' use(s)</strong></div>';
						
						industrySection = '<a id="image_' + Company.id + '" class="industryImage" href="javascript:;"><img width="40px" height="40px" src="http://www.erepublik.com/images/icons/industry/' + indId + '/q' + custLevel + '.png"></a>';
						var industryTooltip = '<div id="tooltip_' + Company.id + '" class="tooltip_marketplace"><div class="head_icon"><img width="90" height="90" alt="" src="http://www.erepublik.com/images/icons/industry/' + indId + '/q' + custLevel + '_90x90.png"></div><div class="tooltip_content"><div style="" class="tooltip_stat">' + tooltipStat_1 + '</div><div style="" class="tooltip_stat">' + tooltipStat_2 + '</div><div style="" class="tooltip_stat">' + tooltipStat_3 + '</div><div style="" class="tooltip_stat">' + tooltipStat_4 + '</div></div></div>';
						dataSection = '<div class="dataSectionDiv">Raw: <strong>' + Company.raw_materials_in_stock + '</strong></div>' +
									  '<div class="dataSectionDiv">Stock: <strong>' + Company.stock + '</strong></div>' +
									  '<div class="dataSectionDiv">Employees: ' + employeesSection + '</div>';
					
					} else if(indId == 8) {
						CompanyCustomiz_1 = mathRound(1.17 * parseFloat(Company.customization["damage"]), 1);
						CompanyCustomiz_2 = mathRound(1.17 * parseFloat(Company.customization["attack"]), 1);
						CompanyCustomiz_3 = mathRound(1.17 * parseFloat(Company.customization["defense"]), 1);
						CompanyCustomiz_4 = mathRound(1.17 * parseFloat(Company.customization["durability"]), 1);
						
						CompanyCustomValue_1 = mathRound(parseFloat(Company.customization["damage"]) * 0.12, 2);
						CompanyCustomValue_2 = parseFloat(Company.customization["attack"]);
						CompanyCustomValue_3 = parseFloat(Company.customization["defense"]);
						CompanyCustomValue_4 = parseFloat(Company.customization["durability"]);
						
						tooltipStat_1 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/8/part_ammunition.png"><div class="tooltip_bar"><small>Ammunition<strong>' + Company.customization["damage"] + '</strong></small><div class="bar damage"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + CompanyCustomiz_1 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_damage.png"><div><small title="Damage">Damage</small><strong title="' + CompanyCustomValue_1 + ' ">' + CompanyCustomValue_1 + ' </strong></div>';
						tooltipStat_2 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/8/part_gun_barrel.png"><div class="tooltip_bar"><small>Gun Barrel<strong>' + Company.customization["attack"] + '</strong></small><div class="bar attack"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + CompanyCustomiz_2 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_attack.png"><div><small title="Attack">Attack</small><strong title="' + CompanyCustomValue_2 + ' ">' + CompanyCustomValue_2 + ' </strong></div>';
						tooltipStat_3 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/8/part_body.png"><div class="tooltip_bar"><small>Body<strong>' + Company.customization["defense"] + '</strong></small><div class="bar defense"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + CompanyCustomiz_3 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_defense.png"><div><small title="Defense">Defense</small><strong title="' + CompanyCustomValue_3 + ' ">' + CompanyCustomValue_3 + ' </strong></div>';
						tooltipStat_4 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/8/part_engine.png"><div class="tooltip_bar"><small>Engine<strong>' + Company.customization["durability"] + '</strong></small><div class="bar durability"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + CompanyCustomiz_4 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_durability.png"><div><small title="Durability">Durability</small><strong title="' + CompanyCustomValue_4 + ' use(s)">' + CompanyCustomValue_4 + ' use(s)</strong></div>';
						
						industrySection = '<a id="image_' + Company.id + '" class="industryImage" href="javascript:;"><img width="40px" height="40px" src="http://www.erepublik.com/images/icons/industry/' + indId + '/q' + custLevel + '.png"></a>';
						var industryTooltip = '<div id="tooltip_' + Company.id + '" class="tooltip_marketplace"><div class="head_icon"><img width="90" height="90" alt="" src="http://www.erepublik.com/images/icons/industry/' + indId + '/q' + custLevel + '_90x90.png"></div><div class="tooltip_content"><div style="" class="tooltip_stat">' + tooltipStat_1 + '</div><div style="" class="tooltip_stat">' + tooltipStat_2 + '</div><div style="" class="tooltip_stat">' + tooltipStat_3 + '</div><div style="" class="tooltip_stat">' + tooltipStat_4 + '</div></div></div>';
						dataSection = '<div class="dataSectionDiv">Raw: <strong>' + Company.raw_materials_in_stock + '</strong></div>' +
									  '<div class="dataSectionDiv">Stock: <strong>' + Company.stock + '</strong></div>' +
									  '<div class="dataSectionDiv">Employees: ' + employeesSection + '</div>';
					
					} else if(indId == 9) {
						CompanyCustomiz_1 = mathRound(1.17 * parseFloat(Company.customization["damage"]), 1);
						CompanyCustomiz_2 = mathRound(1.17 * parseFloat(Company.customization["attack"]), 1);
						CompanyCustomiz_3 = mathRound(1.17 * parseFloat(Company.customization["defense"]), 1);
						CompanyCustomiz_4 = mathRound(1.17 * parseFloat(Company.customization["durability"]), 1);
						
						CompanyCustomValue_1 = mathRound(parseFloat(Company.customization["damage"]) / 10, 2);
						CompanyCustomValue_2 = parseFloat(Company.customization["attack"]);
						CompanyCustomValue_3 = parseFloat(Company.customization["defense"]);
						CompanyCustomValue_4 = parseFloat(Company.customization["durability"]);
						
						tooltipStat_1 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/9/part_ammunition.png"><div class="tooltip_bar"><small>Ammunition<strong>' + Company.customization["damage"] + '</strong></small><div class="bar damage"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + CompanyCustomiz_1 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_damage.png"><div><small title="Damage">Damage</small><strong title="' + CompanyCustomValue_1 + ' ">' + CompanyCustomValue_1 + ' </strong></div>';
						tooltipStat_2 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/9/part_missiles.png"><div class="tooltip_bar"><small>Missiles<strong>' + Company.customization["attack"] + '</strong></small><div class="bar attack"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + CompanyCustomiz_2 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_attack.png"><div><small title="Attack">Attack</small><strong title="' + CompanyCustomValue_2 + ' ">' + CompanyCustomValue_2 + ' </strong></div>';
						tooltipStat_3 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/9/part_body.png"><div class="tooltip_bar"><small>Body<strong>' + Company.customization["defense"] + '</strong></small><div class="bar defense"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + CompanyCustomiz_3 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_defense.png"><div><small title="Defense">Defense</small><strong title="' + CompanyCustomValue_3 + ' ">' + CompanyCustomValue_3 + ' </strong></div>';
						tooltipStat_4 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/9/part_engine.png"><div class="tooltip_bar"><small>Engine<strong>' + Company.customization["durability"] + '</strong></small><div class="bar durability"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + CompanyCustomiz_4 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_durability.png"><div><small title="Durability">Durability</small><strong title="' + CompanyCustomValue_4 + ' use(s)">' + CompanyCustomValue_4 + ' use(s)</strong></div>';
						
						industrySection = '<a id="image_' + Company.id + '" class="industryImage" href="javascript:;"><img width="40px" height="40px" src="http://www.erepublik.com/images/icons/industry/' + indId + '/q' + custLevel + '.png"></a>';
						var industryTooltip = '<div id="tooltip_' + Company.id + '" class="tooltip_marketplace"><div class="head_icon"><img width="90" height="90" alt="" src="http://www.erepublik.com/images/icons/industry/' + indId + '/q' + custLevel + '_90x90.png"></div><div class="tooltip_content"><div style="" class="tooltip_stat">' + tooltipStat_1 + '</div><div style="" class="tooltip_stat">' + tooltipStat_2 + '</div><div style="" class="tooltip_stat">' + tooltipStat_3 + '</div><div style="" class="tooltip_stat">' + tooltipStat_4 + '</div></div></div>';
						dataSection = '<div class="dataSectionDiv">Raw: <strong>' + Company.raw_materials_in_stock + '</strong></div>' +
									  '<div class="dataSectionDiv">Stock: <strong>' + Company.stock + '</strong></div>' +
									  '<div class="dataSectionDiv">Employees: ' + employeesSection + '</div>';
					
					} else {
						industrySection = '<img width="40px" height="40px" src="http://www.erepublik.com/images/icons/industry/' + indId + '/default.png">';
						var industryTooltip = '';
						dataSection = '<div class="dataSectionDiv">Stock: <strong>' + Company.stock + '</strong></div>' +
									  '<div class="dataSectionDiv">Employees: ' + employeesSection + '</div>';
					}
					
					companiesList += '<li id="companyRow_' + Company.id + '">' +
						'<div style="background-color: #ffffff; border: 1px solid #B5D6E1; display: table; padding: 2px; width: 102px; height: 110px;">' +
							'<div style="-moz-border-radius: 0 0 0 2px; background-color: #B5D6E1; height: 14px; margin-left: 91px; margin-top: -3px; position: absolute; width: 14px; z-index: 9999;">' +
								'<a id="removeCompanyId_' + Company.id + '" href="javascript:;" title="Remove" class="removeItem">x</a>' +
							'</div>' +
							
							'<div style="width: 102px; text-align: center;">' +
								'<div style="color: #999999; font-family: verdana; font-size: 10px; font-weight: bold; height: 12px; width: 102px;">' + Company.id + '</div>' +
								'<div style="height: 14px; overflow: hidden; width: 102px; white-space: nowrap;">' +
									'<a class="citizenName" href="http://economy.erepublik.com/' + LOCALE + '/company/' + Company.name.replace(/ /gi, '-').replace(/[^a-zA-Z 0-9-]+/g, '').toLowerCase() + '/' + Company.id + '" title="' + Company.name + '">' + Company.name + '</a>' +
								'</div>' +
							'</div>' +
							
							'<div style="width: 102px; text-align: center;">' +
								industrySection +
							'</div>' +
							
							'<div style="width: 102px; text-align: center; position: absolute; bottom: 5px;">' +
								dataSection +
							'</div>' +
						'</div>' +
					'</li>';
					
					tooltipList += industryTooltip;
					
					if (industryTooltip != null && $('#content #tooltip_' + Company.id).length == 0) {
					//	$('#content').append(industryTooltip);
					}
					
				} catch(err) {
					/*
					var badCompanyId = response.finalUrl.split('/')[6].split('.')[0];
					removeArrayElement(companyIdsArray, '000000');
					removeArrayElement(companyIdsArray, badCompanyId);
					GM_setValue('otherCompanies', uneval(companyIdsArray));
					*/
				}
				if (++count2 == nCompanies) {
					if (noCompanies == null) {
						companiesList += '</ul>';
					} else {
						companiesList += noCompanies + '</ul>';
					}
					
					$('#loadingCompanies').remove();
					$('#compSlideContent').append(companiesList);
					$('#content').append(tooltipList);
					
					$('a[id*="removeCompanyId_"]').live('click', function() {
						var thisId = $(this).attr('id').split('_')[1];
						
						removeArrayElement(companyIdsArray, '000000');
						removeArrayElement(companyIdsArray, thisId);
						GM_setValue('otherCompanies', uneval(companyIdsArray));
						
						$('li[id*="companyRow_' + thisId + '"]').remove();
						$('div[id*="tooltip_' + thisId + '"]').remove();
						
						if (companyIdsArray == '') {
							$('#compHolder').html('<li id="noCompanies" class="noItem">No companies added yet!</li>');
						}
						
						if ($('#compHolder').css('left') != '0px') {
							$('#compHolder').animate({ 'left': '+=110px' }, 'fast' );
						}
					});
					
					if ($('#addCompany').length == 0) {
						$('#compSlideButton').append('<div id="addCompanyHolder" style="height: 23px; float: left;">' +
														'<a id="addCompany" href="javascript:;" class="fluid_blue_dark_small left" title="Add new company" style="margin-top: 0px; margin-bottom: 0px; margin-left: 8px;">' +
															'<span>Add company</span>' +
														'</a>' +
													'</div>' +
													'<div style="float: left; overflow: hidden; height: 23px; width: 561px">' +
														'<div id="addCompanyIdPrompt" style="left: -561px; position: relative;">' +
															'<div style="float: left; margin-left: 10px; margin-top: 2px;">Enter company ID <input id="addCompanyIdPromptId" type="text" size="13" style="text-align: center;"></input></div>' +
															'<div>' +
																'<a id="addCompanyIdPromptSubmit" title="Submit" class="fluid_blue_dark_small left" style="margin-top: 0px; margin-bottom: 0px; margin-left: 10px;">' +
																	'<span>Submit</span>' +
																'</a>' +
															'</div>' +
															'<div id="addCompanyPresent" style="-moz-border-radius: 3px 3px 3px 3px; background-color: #FFF2F2; border: 1px solid #FFC4C4; color: #990000; float: left; font-weight: bold; line-height: 20px; margin-left: 20px; margin-top: 1px; opacity: 0; text-align: center; width: 246px;">Company with that ID already added!</div>' +
														'</div>' +
													'</div>');
					}
					
					$('#addCompany').click(function() {
						if ($('#addCompanyIdPrompt').css('left') != '-561px') {
							$('#addCompanyIdPrompt').animate({ 'left': '-561px' }, 'fast' );
						} else {
							$('#addCompanyIdPrompt').animate({ 'left': '0px' }, 'fast' );
						}
					});
				
					$('#addCompanyIdPromptSubmit').live('click', function(e) {
						var thisId = null;
						
						if ($('#addCompanyIdPromptId').val() != '') {
							thisId = $('#addCompanyIdPromptId').val();
							
							var idPresent = contains(companyIdsArray, thisId);
							
							if(idPresent == false) {
								removeArrayElement(companyIdsArray, '000000');
								companyIdsArray.push(thisId);
								GM_setValue('otherCompanies', uneval(companyIdsArray));
								
								$('#noCompanies').remove();
								$('#addCompanyIdPromptId').val('');
								
								if ($('#addCompanyIdPrompt').css('left') != '-561px') {
									$('#addCompanyIdPrompt').animate({ 'left': '-561px' }, 'fast' );
								} else {
									$('#addCompanyIdPrompt').animate({ 'left': '0px' }, 'fast' );
								}
								
								var compPos = '-' + (companyIdsArray.length * 110 - 550) + 'px'; 
								$('#compHolder').animate({ 'left': compPos }, 'fast' );
								
								addCompany(thisId);
							} else {
								$('#addCompanyPresent').animate({ 'opacity': '1' }, 'fast' );
								setTimeout(function() {
									$('#addCompanyPresent').animate({ 'opacity': '0' }, 'fast' );
								}, 5000);
							}
						} else {
							$('#addCompanyPresent').text('You must input company ID first!').animate({ 'opacity': '1' }, 'fast' );
							setTimeout(function() {
								$('#addCompanyPresent').animate({ 'opacity': '0' }, 'fast' );
								setTimeout(function() {
									$('#addCompanyPresent').text('Company with that ID already added!');
								}, 1100);
							}, 5000);
						}
					});
					
					var holdPos = '0px';
					
					$('#compSlideRight').live('mouseup', function() {
						var holdLength = -(companyIdsArray.length * 110);
						if (holdLength < -643 && parseFloat($('#compHolder').css('left').replace('px', '')) > (holdLength + 643)) {
							holdPos = parseFloat($('#compHolder').css('left').replace('px', ''));
							
							if ((-holdLength - -holdPos - 550) >= 550) {
								$('#compHolder').animate({ 'left': '-=550px' }, 'fast' );
							} else {
								var newLength = '-=' + (-holdLength - -holdPos - 550) + 'px';
								$('#compHolder').animate({ 'left': newLength }, 'fast' );
							}
						}
					});
					
					$('#compSlideLeft').live('mouseup', function() {
						var holdLength = -(companyIdsArray.length * 110);
						if (holdLength < -643 && $('#compHolder').css('left') != '0px') {
							holdPos = parseFloat($('#compHolder').css('left').replace('px', ''));
							
							if (-holdPos >= 550) {
								$('#compHolder').animate({ 'left': '+=550px' }, 'fast' );
							} else {
								var newLength = '+=' + -holdPos + 'px';
								$('#compHolder').animate({ 'left': newLength }, 'fast' );
							}
						}
					});
					
					$('a[id*="image_"]').live('mouseover', function(e) {
						var companyIdent = $(this).attr('id').split('_')[1];
						
						$('#tooltip_' + companyIdent).css('display', 'block');
						
						$('#tooltip_' + companyIdent).css('top', e.pageY + 70 );
						$('#tooltip_' + companyIdent).css('left', e.pageX + 10 );
						
						$('#tooltip_' + companyIdent).fadeIn('500');
						$('#tooltip_' + companyIdent).fadeTo('10', 1);
						
					}).live('mousemove', function(e) {
						var companyIdent = $(this).attr('id').split('_')[1];
					
						$('#tooltip_' + companyIdent).css('top', e.pageY + 70 );
						$('#tooltip_' + companyIdent).css('left', e.pageX + 10 );
						
					}).live('mouseout', function() {
						var companyIdent = $(this).attr('id').split('_')[1];
					
						$('#tooltip_' + companyIdent).css('display', 'none');
						
					});
				}
			}
		});
	}
}

function addCompany(id) {
	var LOCALE = document.location.href.split('/')[3];
	
	var companyIdsArray = GM_getValue('otherCompanies', null);
	companyIdsArray = eval(companyIdsArray);
	
	$('#compHolder').append('<li id="loadingCompany" style="text-align: center; line-height: 110px;">' +
								'<div style="background-color: #ffffff; border: 1px solid #B5D6E1; display: table; padding: 2px; width: 102px;">' +
									'<img src="' + loadingImage + '" style="vertical-align: middle;">' +
								'</div>' +
							'</li>');
	
	var indId = null;
	var Company = null;
	var custLevel = null;
	var workersArray = null;
	var recNum = 10;
	var employeesSection = null;
	var industrySection = null;
	var dataSection = null;
	var tooltipStat_1 = null;
	var tooltipStat_2 = null;
	var tooltipStat_3 = null;
	var tooltipStat_4 = null;
	var CompanyCustomiz_1 = null;
	var CompanyCustomiz_2 = null;
	var CompanyCustomiz_3 = null;
	var CompanyCustomiz_4 = null;
	var CompanyCustomValue_1 = null;
	var CompanyCustomValue_2 = null;
	var CompanyCustomValue_3 = null;
	var CompanyCustomValue_4 = null;
	
	GM_xmlhttpRequest({
		method: 'GET',
		url: API_URL + 'companies/' + escape(id) + '.json',
		onload:function(response) {
			try {
				Company = eval('(' + response.responseText + ')');
				
				var indId = Company.industry.id;
				var custLevel = Company.customization_level;
				var workersArray = eval(Company.employees);
				
				if(indId >= 1 && indId <= 2 || indId >= 6) {
					recNum = 10;
				} else {
					recNum = 20;
				}
				
				if(workersArray.length < recNum || workersArray.length > recNum) {
					employeesSection = '<strong style="color: #FF0000;">' + workersArray.length + '</strong><strong>/' + recNum + '</strong>';
				} else {
					employeesSection = '<strong>' + workersArray.length + '</strong><strong>/' + recNum + '</strong>';
				}
								
				if(indId == 1) {
					CompanyCustomiz_1 = mathRound(1.17 * parseFloat(Company.customization["wellness"]), 1);
					CompanyCustomiz_2 = mathRound(1.17 * parseFloat(Company.customization["happiness"]), 1);
					
					CompanyCustomValue_1 = mathRound(parseFloat(Company.customization["wellness"]) / 10, 2);
					CompanyCustomValue_2 = mathRound(parseFloat(Company.customization["happiness"]) / 10, 2);
					
					tooltipStat_1 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/1/part_ingredients.png"><div class="tooltip_bar"><small>Ingredients<strong>' + Company.customization["wellness"] + '</strong></small><div class="bar health"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + CompanyCustomiz_1 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_health.png"><div><small title="Health">Health</small><strong title="' + CompanyCustomValue_1 + ' / day ">' + CompanyCustomValue_1 + ' / day </strong></div>';
					tooltipStat_2 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/1/part_packaging.png"><div class="tooltip_bar"><small>Packaging<strong>' + Company.customization["happiness"] + '</strong></small><div class="bar happiness"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + CompanyCustomiz_2 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_happiness.png"><div><small title="Happiness">Happiness</small><strong title="' + CompanyCustomValue_2 + ' / day ">' + CompanyCustomValue_2 + ' / day </strong></div>';
					
					industrySection = '<a id="image_' + Company.id + '" class="industryImage" href="javascript:;"><img width="40px" height="40px" src="http://www.erepublik.com/images/icons/industry/' + indId + '/q' + custLevel + '.png"></a>';
					var industryTooltip = '<div id="tooltip_' + Company.id + '" class="tooltip_marketplace"><div class="head_icon"><img width="90" height="90" alt="" src="http://www.erepublik.com/images/icons/industry/' + indId + '/q' + custLevel + '_90x90.png"></div><div class="tooltip_content"><div style="" class="tooltip_stat">' + tooltipStat_1 + '</div><div style="" class="tooltip_stat">' + tooltipStat_2 + '</div></div></div>';
					dataSection = '<div class="dataSectionDiv">Raw: <strong>' + Company.raw_materials_in_stock + '</strong></div>' +
								  '<div class="dataSectionDiv">Stock: <strong>' + Company.stock + '</strong></div>' +
								  '<div class="dataSectionDiv">Employees: ' + employeesSection + '</div>';
									
				} else if(indId == 2) {
					CompanyCustomiz_1 = mathRound(1.17 * parseFloat(Company.customization["wellness"]), 1);
					CompanyCustomiz_2 = mathRound(1.17 * parseFloat(Company.customization["happiness"]), 1);
					CompanyCustomiz_3 = mathRound(1.17 * parseFloat(Company.customization["moving-distance"]), 1);
					
					CompanyCustomValue_1 = mathRound(parseFloat(Company.customization["wellness"]) / 10, 2);
					CompanyCustomValue_2 = mathRound(parseFloat(Company.customization["happiness"]) / 10, 2);
					CompanyCustomValue_3 = mathRound(parseFloat(Company.customization["moving-distance"]) / 20, 0);
					
					tooltipStat_1 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/2/part_paper.png"><div class="tooltip_bar"><small>Paper<strong>' + Company.customization["wellness"] + '</strong></small><div class="bar health"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + CompanyCustomiz_1 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_health.png"><div><small title="Health">Health</small><strong title="' + CompanyCustomValue_1 + ' / use ">' + CompanyCustomValue_1 + ' / use </strong></div>';
					tooltipStat_2 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/2/part_packaging.png"><div class="tooltip_bar"><small>Packaging<strong>' + Company.customization["happiness"] + '</strong></small><div class="bar happiness"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + CompanyCustomiz_2 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_happiness.png"><div><small title="Happiness">Happiness</small><strong title="' + CompanyCustomValue_2 + ' / use ">' + CompanyCustomValue_2 + ' / use </strong></div>';
					tooltipStat_3 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/2/part_itinerary.png"><div class="tooltip_bar"><small>Itinerary<strong>' + Company.customization["moving-distance"] + '</strong></small><div class="bar moving_distance"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + CompanyCustomiz_3 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_moving_distance.png"><div><small title="Moving Distance">Moving Di...</small><strong title="' + CompanyCustomValue_3 + ' zone(s)">' + CompanyCustomValue_3 + ' zone(s)</strong></div>';
					
					industrySection = '<a id="image_' + Company.id + '" class="industryImage" href="javascript:;"><img width="40px" height="40px" src="http://www.erepublik.com/images/icons/industry/' + indId + '/q' + custLevel + '.png"></a>';
					var industryTooltip = '<div id="tooltip_' + Company.id + '" class="tooltip_marketplace"><div class="head_icon"><img width="90" height="90" alt="" src="http://www.erepublik.com/images/icons/industry/' + indId + '/q' + custLevel + '_90x90.png"></div><div class="tooltip_content"><div style="" class="tooltip_stat">' + tooltipStat_1 + '</div><div style="" class="tooltip_stat">' + tooltipStat_2 + '</div><div style="" class="tooltip_stat">' + tooltipStat_3 + '</div></div></div>';
					dataSection = '<div class="dataSectionDiv">Raw: <strong>' + Company.raw_materials_in_stock + '</strong></div>' +
								  '<div class="dataSectionDiv">Stock: <strong>' + Company.stock + '</strong></div>' +
								  '<div class="dataSectionDiv">Employees: ' + employeesSection + '</div>';
					
				} else if(indId == 3) {
					CompanyCustomiz_1 = mathRound(1.17 * parseFloat(Company.customization["wellness"]), 1);
					CompanyCustomiz_2 = mathRound(1.17 * parseFloat(Company.customization["happiness"]), 1);
					CompanyCustomiz_3 = mathRound(1.17 * parseFloat(Company.customization["durability"]), 1);
					
					CompanyCustomValue_1 = mathRound(parseFloat(Company.customization["wellness"]) / 2, 2);
					CompanyCustomValue_2 = mathRound(parseFloat(Company.customization["happiness"]) / 10, 2);
					CompanyCustomValue_3 = parseFloat(Company.customization["durability"]);
					
					tooltipStat_1 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/3/part_roof.png"><div class="tooltip_bar"><small>Roof<strong>' + Company.customization["wellness"] + '</strong></small><div class="bar health"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + CompanyCustomiz_1 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_health.png"><div><small title="Health">Health</small><strong title="' + CompanyCustomValue_1 + ' / day ">' + CompanyCustomValue_1 + ' / day </strong></div>';
					tooltipStat_2 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/3/part_layout.png"><div class="tooltip_bar"><small>Layout<strong>' + Company.customization["happiness"] + '</strong></small><div class="bar happiness"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + CompanyCustomiz_2 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_happiness.png"><div><small title="Happiness">Happiness</small><strong title="' + CompanyCustomValue_2 + ' / day ">' + CompanyCustomValue_2 + ' / day </strong></div>';
					tooltipStat_3 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/3/part_walls.png"><div class="tooltip_bar"><small>Walls<strong>' + Company.customization["durability"] + '</strong></small><div class="bar durability"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + CompanyCustomiz_3 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_durability.png"><div><small title="Durability">Durability</small><strong title="' + CompanyCustomValue_3 + ' day(s)">' + CompanyCustomValue_3 + ' day(s)</strong></div>';
					
					industrySection = '<a id="image_' + Company.id + '" class="industryImage" href="javascript:;"><img width="40px" height="40px" src="http://www.erepublik.com/images/icons/industry/' + indId + '/q' + custLevel + '.png"></a>';
					var industryTooltip = '<div id="tooltip_' + Company.id + '" class="tooltip_marketplace"><div class="head_icon"><img width="90" height="90" alt="" src="http://www.erepublik.com/images/icons/industry/' + indId + '/q' + custLevel + '_90x90.png"></div><div class="tooltip_content"><div style="" class="tooltip_stat">' + tooltipStat_1 + '</div><div style="" class="tooltip_stat">' + tooltipStat_2 + '</div><div style="" class="tooltip_stat">' + tooltipStat_3 + '</div></div></div>';
					dataSection = '<div class="dataSectionDiv">Raw: <strong>' + Company.raw_materials_in_stock + '</strong></div>' +
								  '<div class="dataSectionDiv">Stock: <strong>' + Company.stock + '</strong></div>' +
								  '<div class="dataSectionDiv">Employees: ' + employeesSection + '</div>';
					
				} else if(indId == 4) {
					CompanyCustomiz_1 = mathRound(1.17 * parseFloat(Company.customization["durability"]), 1);
					CompanyCustomiz_2 = mathRound(1.17 * parseFloat(Company.customization["wellness"]), 1);
					CompanyCustomiz_3 = mathRound(1.17 * parseFloat(Company.customization["area-of-effect"]), 1);
					
					CompanyCustomValue_1 = mathRound(parseFloat(Company.customization["durability"]) * 2500, 0);
					CompanyCustomValue_2 = mathRound(parseFloat(Company.customization["wellness"]) / 2, 2);
					CompanyCustomValue_3 = mathRound(parseFloat(Company.customization["area-of-effect"]) / 20, 0);
					
					tooltipStat_1 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/4/part_walls.png"><div class="tooltip_bar"><small>Walls<strong>' + Company.customization["durability"] + '</strong></small><div class="bar durability"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + CompanyCustomiz_1 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_durability.png"><div><small title="Health Budget">Health Bu...</small><strong title="' + CompanyCustomValue_1 + '">' + CompanyCustomValue_1 + '</strong></div>';
					tooltipStat_2 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/4/part_roof.png"><div class="tooltip_bar"><small>Roof<strong>' + Company.customization["wellness"] + '</strong></small><div class="bar health"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + CompanyCustomiz_2 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_health.png"><div><small title="Health/Turn/Player">Health/Tur...</small><strong title="' + CompanyCustomValue_2 + ' ">' + CompanyCustomValue_2 + ' </strong></div>';
					tooltipStat_3 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/4/part_ambulances.png"><div class="tooltip_bar"><small>Ambulances<strong>' + Company.customization["area-of-effect"] + '</strong></small><div class="bar area_of_effect"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + CompanyCustomiz_3 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_area_of_effect.png"><div><small title="Area of Effect">Area of Ef...</small><strong title="' + CompanyCustomValue_3 + ' tile(s)">' + CompanyCustomValue_3 + ' tile(s)</strong></div>';
					
					industrySection = '<a id="image_' + Company.id + '" class="industryImage" href="javascript:;"><img width="40px" height="40px" src="http://www.erepublik.com/images/icons/industry/' + indId + '/q' + custLevel + '.png"></a>';
					var industryTooltip = '<div id="tooltip_' + Company.id + '" class="tooltip_marketplace"><div class="head_icon"><img width="90" height="90" alt="" src="http://www.erepublik.com/images/icons/industry/' + indId + '/q' + custLevel + '_90x90.png"></div><div class="tooltip_content"><div style="" class="tooltip_stat">' + tooltipStat_1 + '</div><div style="" class="tooltip_stat">' + tooltipStat_2 + '</div><div style="" class="tooltip_stat">' + tooltipStat_3 + '</div></div></div>';
					dataSection = '<div class="dataSectionDiv">Raw: <strong>' + Company.raw_materials_in_stock + '</strong></div>' +
								  '<div class="dataSectionDiv">Stock: <strong>' + Company.stock + '</strong></div>' +
								  '<div class="dataSectionDiv">Employees: ' + employeesSection + '</div>';
					
				} else if(indId == 5) {
					CompanyCustomiz_1 = mathRound(1.17 * parseFloat(Company.customization["durability"]), 1);
					CompanyCustomiz_2 = mathRound(1.17 * parseFloat(Company.customization["defense"]), 1);
					CompanyCustomiz_3 = mathRound(1.17 * parseFloat(Company.customization["area-of-effect"]), 1);
					
					CompanyCustomValue_1 = mathRound(parseFloat(Company.customization["durability"]) / 2, 2);
					CompanyCustomValue_2 = mathRound(parseFloat(Company.customization["happiness"]) * 50, 2);
					CompanyCustomValue_3 = mathRound(parseFloat(Company.customization["area-of-effect"]) / 20, 0);
					
					tooltipStat_1 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/5/part_layout.png"><div class="tooltip_bar"><small>Layout<strong>' + Company.customization["durability"] + '</strong></small><div class="bar defense"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + CompanyCustomiz_1 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_defense.png"><div><small title="Defense">Defense</small><strong title="' + CompanyCustomValue_1 + '">' + CompanyCustomValue_1 + '</strong></div>';
					tooltipStat_2 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/5/part_walls.png"><div class="tooltip_bar"><small>Walls<strong>' + Company.customization["defense"] + '</strong></small><div class="bar durability"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + CompanyCustomiz_2 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_durability.png"><div><small title="Durability">Durability</small><strong title="' + CompanyCustomValue_2 + ' use(s)">' + CompanyCustomValue_2 + ' use(s)</strong></div>';
					tooltipStat_3 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/5/part_cannons.png"><div class="tooltip_bar"><small>Cannons<strong>' + Company.customization["area-of-effect"] + '</strong></small><div class="bar area_of_effect"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + CompanyCustomiz_3 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_area_of_effect.png"><div><small title="Area of Effect">Area of Ef...</small><strong title="' + CompanyCustomValue_3 + ' tile(s)">' + CompanyCustomValue_3 + ' tile(s)</strong></div>';
					
					industrySection = '<a id="image_' + Company.id + '" class="industryImage" href="javascript:;"><img width="40px" height="40px" src="http://www.erepublik.com/images/icons/industry/' + indId + '/q' + custLevel + '.png"></a>';
					var industryTooltip = '<div id="tooltip_' + Company.id + '" class="tooltip_marketplace"><div class="head_icon"><img width="90" height="90" alt="" src="http://www.erepublik.com/images/icons/industry/' + indId + '/q' + custLevel + '_90x90.png"></div><div class="tooltip_content"><div style="" class="tooltip_stat">' + tooltipStat_1 + '</div><div style="" class="tooltip_stat">' + tooltipStat_2 + '</div><div style="" class="tooltip_stat">' + tooltipStat_3 + '</div></div></div>';
					dataSection = '<div class="dataSectionDiv">Raw: <strong>' + Company.raw_materials_in_stock + '</strong></div>' +
								  '<div class="dataSectionDiv">Stock: <strong>' + Company.stock + '</strong></div>' +
								  '<div class="dataSectionDiv">Employees: ' + employeesSection + '</div>';
					
				} else if(indId == 6) {
					CompanyCustomiz_1 = mathRound(1.17 * parseFloat(Company.customization["damage"]), 1);
					CompanyCustomiz_2 = mathRound(1.17 * parseFloat(Company.customization["attack"]), 1);
					CompanyCustomiz_3 = mathRound(1.17 * parseFloat(Company.customization["defense"]), 1);
					CompanyCustomiz_4 = mathRound(1.17 * parseFloat(Company.customization["durability"]), 1);
					
					CompanyCustomValue_1 = mathRound(parseFloat(Company.customization["damage"]) / 10, 2);
					CompanyCustomValue_2 = parseFloat(Company.customization["attack"]);
					CompanyCustomValue_3 = parseFloat(Company.customization["defense"]);
					CompanyCustomValue_4 = parseFloat(Company.customization["durability"]);
					
					tooltipStat_1 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/6/part_ammunition.png"><div class="tooltip_bar"><small>Ammunition<strong>' + Company.customization["damage"] + '</strong></small><div class="bar damage"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + CompanyCustomiz_1 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_damage.png"><div><small title="Damage">Damage</small><strong title="' + CompanyCustomValue_1 + ' ">' + CompanyCustomValue_1 + ' </strong></div>';
					tooltipStat_2 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/6/part_rifle_barrel.png"><div class="tooltip_bar"><small>Rifle Barrel<strong>' + Company.customization["attack"] + '</strong></small><div class="bar attack"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + CompanyCustomiz_2 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_attack.png"><div><small title="Attack">Attack</small><strong title="' + CompanyCustomValue_2 + ' ">' + CompanyCustomValue_2 + ' </strong></div>';
					tooltipStat_3 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/6/part_frame.png"><div class="tooltip_bar"><small>Frame<strong>' + Company.customization["defense"] + '</strong></small><div class="bar defense"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + CompanyCustomiz_3 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_defense.png"><div><small title="Defense">Defense</small><strong title="' + CompanyCustomValue_3 + ' ">' + CompanyCustomValue_3 + ' </strong></div>';
					tooltipStat_4 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/6/part_rifle_butt.png"><div class="tooltip_bar"><small>Rifle Butt<strong>' + Company.customization["durability"] + '</strong></small><div class="bar durability"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + CompanyCustomiz_4 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_durability.png"><div><small title="Durability">Durability</small><strong title="' + CompanyCustomValue_4 + ' use(s)">' + CompanyCustomValue_4 + ' use(s)</strong></div>';
					
					industrySection = '<a id="image_' + Company.id + '" class="industryImage" href="javascript:;"><img width="40px" height="40px" src="http://www.erepublik.com/images/icons/industry/' + indId + '/q' + custLevel + '.png"></a>';
					var industryTooltip = '<div id="tooltip_' + Company.id + '" class="tooltip_marketplace"><div class="head_icon"><img width="90" height="90" alt="" src="http://www.erepublik.com/images/icons/industry/' + indId + '/q' + custLevel + '_90x90.png"></div><div class="tooltip_content"><div style="" class="tooltip_stat">' + tooltipStat_1 + '</div><div style="" class="tooltip_stat">' + tooltipStat_2 + '</div><div style="" class="tooltip_stat">' + tooltipStat_3 + '</div><div style="" class="tooltip_stat">' + tooltipStat_4 + '</div></div></div>';
					dataSection = '<div class="dataSectionDiv">Raw: <strong>' + Company.raw_materials_in_stock + '</strong></div>' +
								  '<div class="dataSectionDiv">Stock: <strong>' + Company.stock + '</strong></div>' +
								  '<div class="dataSectionDiv">Employees: ' + employeesSection + '</div>';
					
				} else if(indId == 7) {
					CompanyCustomiz_1 = mathRound(1.17 * parseFloat(Company.customization["damage"]), 1);
					CompanyCustomiz_2 = mathRound(1.17 * parseFloat(Company.customization["attack"]), 1);
					CompanyCustomiz_3 = mathRound(1.17 * parseFloat(Company.customization["defense"]), 1);
					CompanyCustomiz_4 = mathRound(1.17 * parseFloat(Company.customization["durability"]), 1);
					
					CompanyCustomValue_1 = mathRound(parseFloat(Company.customization["damage"]) * 0.14, 2);
					CompanyCustomValue_2 = parseFloat(Company.customization["attack"]);
					CompanyCustomValue_3 = parseFloat(Company.customization["defense"]);
					CompanyCustomValue_4 = parseFloat(Company.customization["durability"]);
					
					tooltipStat_1 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/7/part_ammunition.png"><div class="tooltip_bar"><small>Ammunition<strong>' + Company.customization["damage"] + '</strong></small><div class="bar damage"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + CompanyCustomiz_1 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_damage.png"><div><small title="Damage">Damage</small><strong title="' + CompanyCustomValue_1 + ' ">' + CompanyCustomValue_1 + ' </strong></div>';
					tooltipStat_2 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/7/part_tank_barrel.png"><div class="tooltip_bar"><small>Tank Barrel<strong>' + Company.customization["attack"] + '</strong></small><div class="bar attack"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + CompanyCustomiz_2 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_attack.png"><div><small title="Attack">Attack</small><strong title="' + CompanyCustomValue_2 + ' ">' + CompanyCustomValue_2 + ' </strong></div>';
					tooltipStat_3 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/7/part_body.png"><div class="tooltip_bar"><small>Body<strong>' + Company.customization["defense"] + '</strong></small><div class="bar defense"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + CompanyCustomiz_3 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_defense.png"><div><small title="Defense">Defense</small><strong title="' + CompanyCustomValue_3 + ' ">' + CompanyCustomValue_3 + ' </strong></div>';
					tooltipStat_4 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/7/part_engine.png"><div class="tooltip_bar"><small>Engine<strong>' + Company.customization["durability"] + '</strong></small><div class="bar durability"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + CompanyCustomiz_4 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_durability.png"><div><small title="Durability">Durability</small><strong title="' + CompanyCustomValue_4 + ' use(s)">' + CompanyCustomValue_4 + ' use(s)</strong></div>';
					
					industrySection = '<a id="image_' + Company.id + '" class="industryImage" href="javascript:;"><img width="40px" height="40px" src="http://www.erepublik.com/images/icons/industry/' + indId + '/q' + custLevel + '.png"></a>';
					var industryTooltip = '<div id="tooltip_' + Company.id + '" class="tooltip_marketplace"><div class="head_icon"><img width="90" height="90" alt="" src="http://www.erepublik.com/images/icons/industry/' + indId + '/q' + custLevel + '_90x90.png"></div><div class="tooltip_content"><div style="" class="tooltip_stat">' + tooltipStat_1 + '</div><div style="" class="tooltip_stat">' + tooltipStat_2 + '</div><div style="" class="tooltip_stat">' + tooltipStat_3 + '</div><div style="" class="tooltip_stat">' + tooltipStat_4 + '</div></div></div>';
					dataSection = '<div class="dataSectionDiv">Raw: <strong>' + Company.raw_materials_in_stock + '</strong></div>' +
								  '<div class="dataSectionDiv">Stock: <strong>' + Company.stock + '</strong></div>' +
								  '<div class="dataSectionDiv">Employees: ' + employeesSection + '</div>';
					
				} else if(indId == 8) {
					CompanyCustomiz_1 = mathRound(1.17 * parseFloat(Company.customization["damage"]), 1);
					CompanyCustomiz_2 = mathRound(1.17 * parseFloat(Company.customization["attack"]), 1);
					CompanyCustomiz_3 = mathRound(1.17 * parseFloat(Company.customization["defense"]), 1);
					CompanyCustomiz_4 = mathRound(1.17 * parseFloat(Company.customization["durability"]), 1);
					
					CompanyCustomValue_1 = mathRound(parseFloat(Company.customization["damage"]) * 0.12, 2);
					CompanyCustomValue_2 = parseFloat(Company.customization["attack"]);
					CompanyCustomValue_3 = parseFloat(Company.customization["defense"]);
					CompanyCustomValue_4 = parseFloat(Company.customization["durability"]);
					
					tooltipStat_1 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/8/part_ammunition.png"><div class="tooltip_bar"><small>Ammunition<strong>' + Company.customization["damage"] + '</strong></small><div class="bar damage"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + CompanyCustomiz_1 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_damage.png"><div><small title="Damage">Damage</small><strong title="' + CompanyCustomValue_1 + ' ">' + CompanyCustomValue_1 + ' </strong></div>';
					tooltipStat_2 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/8/part_gun_barrel.png"><div class="tooltip_bar"><small>Gun Barrel<strong>' + Company.customization["attack"] + '</strong></small><div class="bar attack"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + CompanyCustomiz_2 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_attack.png"><div><small title="Attack">Attack</small><strong title="' + CompanyCustomValue_2 + ' ">' + CompanyCustomValue_2 + ' </strong></div>';
					tooltipStat_3 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/8/part_body.png"><div class="tooltip_bar"><small>Body<strong>' + Company.customization["defense"] + '</strong></small><div class="bar defense"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + CompanyCustomiz_3 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_defense.png"><div><small title="Defense">Defense</small><strong title="' + CompanyCustomValue_3 + ' ">' + CompanyCustomValue_3 + ' </strong></div>';
					tooltipStat_4 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/8/part_engine.png"><div class="tooltip_bar"><small>Engine<strong>' + Company.customization["durability"] + '</strong></small><div class="bar durability"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + CompanyCustomiz_4 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_durability.png"><div><small title="Durability">Durability</small><strong title="' + CompanyCustomValue_4 + ' use(s)">' + CompanyCustomValue_4 + ' use(s)</strong></div>';
					
					industrySection = '<a id="image_' + Company.id + '" class="industryImage" href="javascript:;"><img width="40px" height="40px" src="http://www.erepublik.com/images/icons/industry/' + indId + '/q' + custLevel + '.png"></a>';
					var industryTooltip = '<div id="tooltip_' + Company.id + '" class="tooltip_marketplace"><div class="head_icon"><img width="90" height="90" alt="" src="http://www.erepublik.com/images/icons/industry/' + indId + '/q' + custLevel + '_90x90.png"></div><div class="tooltip_content"><div style="" class="tooltip_stat">' + tooltipStat_1 + '</div><div style="" class="tooltip_stat">' + tooltipStat_2 + '</div><div style="" class="tooltip_stat">' + tooltipStat_3 + '</div><div style="" class="tooltip_stat">' + tooltipStat_4 + '</div></div></div>';
					dataSection = '<div class="dataSectionDiv">Raw: <strong>' + Company.raw_materials_in_stock + '</strong></div>' +
								  '<div class="dataSectionDiv">Stock: <strong>' + Company.stock + '</strong></div>' +
								  '<div class="dataSectionDiv">Employees: ' + employeesSection + '</div>';
					
				} else if(indId == 9) {
					CompanyCustomiz_1 = mathRound(1.17 * parseFloat(Company.customization["damage"]), 1);
					CompanyCustomiz_2 = mathRound(1.17 * parseFloat(Company.customization["attack"]), 1);
					CompanyCustomiz_3 = mathRound(1.17 * parseFloat(Company.customization["defense"]), 1);
					CompanyCustomiz_4 = mathRound(1.17 * parseFloat(Company.customization["durability"]), 1);
					
					CompanyCustomValue_1 = mathRound(parseFloat(Company.customization["damage"]) / 10, 2);
					CompanyCustomValue_2 = parseFloat(Company.customization["attack"]);
					CompanyCustomValue_3 = parseFloat(Company.customization["defense"]);
					CompanyCustomValue_4 = parseFloat(Company.customization["durability"]);
					
					tooltipStat_1 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/9/part_ammunition.png"><div class="tooltip_bar"><small>Ammunition<strong>' + Company.customization["damage"] + '</strong></small><div class="bar damage"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + CompanyCustomiz_1 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_damage.png"><div><small title="Damage">Damage</small><strong title="' + CompanyCustomValue_1 + ' ">' + CompanyCustomValue_1 + ' </strong></div>';
					tooltipStat_2 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/9/part_missiles.png"><div class="tooltip_bar"><small>Missiles<strong>' + Company.customization["attack"] + '</strong></small><div class="bar attack"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + CompanyCustomiz_2 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_attack.png"><div><small title="Attack">Attack</small><strong title="' + CompanyCustomValue_2 + ' ">' + CompanyCustomValue_2 + ' </strong></div>';
					tooltipStat_3 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/9/part_body.png"><div class="tooltip_bar"><small>Body<strong>' + Company.customization["defense"] + '</strong></small><div class="bar defense"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + CompanyCustomiz_3 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_defense.png"><div><small title="Defense">Defense</small><strong title="' + CompanyCustomValue_3 + ' ">' + CompanyCustomValue_3 + ' </strong></div>';
					tooltipStat_4 = '<img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/9/part_engine.png"><div class="tooltip_bar"><small>Engine<strong>' + Company.customization["durability"] + '</strong></small><div class="bar durability"><div class="border"><span class="lefts"></span><span style="width: 94%;" class="mids"></span><span class="rights"></span></div><div class="fill"><span class="lefts"></span><span style="width: ' + CompanyCustomiz_4 + 'px;" class="mids"></span><span class="rights"></span></div></div></div></div><div style="" class="tooltip_gain"><img width="28" height="28" alt="" src="http://www.erepublik.com/images/icons/industry/attribute_durability.png"><div><small title="Durability">Durability</small><strong title="' + CompanyCustomValue_4 + ' use(s)">' + CompanyCustomValue_4 + ' use(s)</strong></div>';
					
					industrySection = '<a id="image_' + Company.id + '" class="industryImage" href="javascript:;"><img width="40px" height="40px" src="http://www.erepublik.com/images/icons/industry/' + indId + '/q' + custLevel + '.png"></a>';
					var industryTooltip = '<div id="tooltip_' + Company.id + '" class="tooltip_marketplace"><div class="head_icon"><img width="90" height="90" alt="" src="http://www.erepublik.com/images/icons/industry/' + indId + '/q' + custLevel + '_90x90.png"></div><div class="tooltip_content"><div style="" class="tooltip_stat">' + tooltipStat_1 + '</div><div style="" class="tooltip_stat">' + tooltipStat_2 + '</div><div style="" class="tooltip_stat">' + tooltipStat_3 + '</div><div style="" class="tooltip_stat">' + tooltipStat_4 + '</div></div></div>';
					dataSection = '<div class="dataSectionDiv">Raw: <strong>' + Company.raw_materials_in_stock + '</strong></div>' +
								  '<div class="dataSectionDiv">Stock: <strong>' + Company.stock + '</strong></div>' +
								  '<div class="dataSectionDiv">Employees: ' + employeesSection + '</div>';
					
				} else {
					industrySection = '<img width="40px" height="40px" src="http://www.erepublik.com/images/icons/industry/' + indId + '/default.png">';
					var industryTooltip = '';
					dataSection = '<div class="dataSectionDiv">Stock: <strong>' + Company.stock + '</strong></div>' +
								  '<div class="dataSectionDiv">Employees: ' + employeesSection + '</div>';
				}
				
				$('#loadingCompany').remove();
				$('#compHolder').append('<li id="companyRow_' + Company.id + '">' +
						'<div style="background-color: #ffffff; border: 1px solid #B5D6E1; display: table; padding: 2px; width: 102px; height: 110px;">' +
							'<div style="-moz-border-radius: 0 0 0 2px; background-color: #B5D6E1; height: 14px; margin-left: 91px; margin-top: -3px; position: absolute; width: 14px; z-index: 9999;">' +
								'<a id="removeCompanyId_' + Company.id + '" href="javascript:;" title="Remove" class="removeItem">x</a>' +
							'</div>' +
							
							'<div style="width: 102px; text-align: center;">' +
								'<div style="color: #999999; font-family: verdana; font-size: 10px; font-weight: bold; height: 12px; width: 102px;">' + Company.id + '</div>' +
								'<div style="height: 14px; overflow: hidden; width: 102px; white-space: nowrap;">' +
									'<a class="citizenName" href="http://economy.erepublik.com/' + LOCALE + '/company/' + Company.name.replace(/ /gi, '-').replace(/[^a-zA-Z 0-9-]+/g, '').toLowerCase() + '/' + Company.id + '" title="' + Company.name + '">' + Company.name + '</a>' +
								'</div>' +
							'</div>' +
							
							'<div style="width: 102px; text-align: center;">' +
								industrySection +
							'</div>' +
							
							'<div style="width: 102px; text-align: center; position: absolute; bottom: 5px;">' +
								dataSection +
							'</div>' +
						'</div>' +
					'</li>');
				
				$('#content').append(industryTooltip);
				
				$('a[id*="image_"]').live('mouseover', function(e) {
					var companyIdent = $(this).attr('id').split('_')[1];
					
					$('#tooltip_' + companyIdent).css('display', 'block');
					
					$('#tooltip_' + companyIdent).css('top', e.pageY + 70 );
					$('#tooltip_' + companyIdent).css('left', e.pageX + 10 );
					
					$('#tooltip_' + companyIdent).fadeIn('500');
					$('#tooltip_' + companyIdent).fadeTo('10', 1);
					
				}).live('mousemove', function(e) {
					var companyIdent = $(this).attr('id').split('_')[1];
				
					$('#tooltip_' + companyIdent).css('top', e.pageY + 70 );
					$('#tooltip_' + companyIdent).css('left', e.pageX + 10 );
					
				}).live('mouseout', function() {
					var companyIdent = $(this).attr('id').split('_')[1];
				
					$('#tooltip_' + companyIdent).css('display', 'none');
					
				});
			} catch(err) {
				var badCompanyId = response.finalUrl.split('/')[6].split('.')[0];
				removeArrayElement(companyIdsArray, '000000');
				removeArrayElement(companyIdsArray, badCompanyId);
				GM_setValue('otherCompanies', uneval(companyIdsArray));
			}
		}
	});
}
// ---------------------------------------------------------------------------------------------------------------------

// -- Fix long shouts --------------------------------------------------------------------------------------------------
function fixShouts() {
	$('#shouts_container .shout').each(function() {
		$(this).css({'max-height': '140px', 'overflow': 'auto'});
	});
	
	$('#previouspageshout, #nextpageshout').live('mouseup', function() {
		window.setTimeout(function() {
			$('#shouts_container .shout').each(function() {
				$(this).css({'max-height': '140px', 'overflow': 'auto'});
			});
		}, 3000);
	});
}
// ---------------------------------------------------------------------------------------------------------------------

// -- Battlefield ------------------------------------------------------------------------------------------------------
function improveBattlefield() {
	if (eRAopt["battlefield"] == false) {
		return;
	}
	
	$('#blue_domination').css('opacity', '1');
	$('#red_domination').css('opacity', '1');
	
	$('.progress').each(function() {
		$(this).css({'text-align': 'center', 'overflow': 'visible'});
	});
	
	$('#player_loss').css('top', '-25px');
	$('#enemy_loss').css('top', '-25px');
	
	if($('#player_life').length) {
		var playerHealth = $('#player_life').attr('title').split(' ')[2];
		var enemyHealth = $('#enemy_life').attr('title').split(' ')[2];
		$('#player_life').after('<div id="playerHealth" class="battleHealth">' + parseFloat(playerHealth).toFixed(2) + '</div>');
		$('#enemy_life').after('<div id="enemyHealth" class="battleHealth">' + parseFloat(enemyHealth).toFixed(2) + '</div>');
		
		$('#player_life, #enemy_life').attrChange(function() {
			if($('#player_life').attr('original-title') != undefined) {
				playerHealth = $('#player_life').attr('original-title').split(' ')[2];
			} else {
				playerHealth = $('#player_life').attr('title').split(' ')[2];
			}
			if ($('#enemy_life').attr('original-title') != undefined) {
				enemyHealth = $('#enemy_life').attr('original-title').split(' ')[2];
			} else {
				enemyHealth = $('#enemy_life').attr('title').split(' ')[2];
			}
			$('#playerHealth').animate({'opacity': '0'}, 'fast').text(parseFloat(playerHealth).toFixed(2)).animate({'opacity': '1'}, 'fast');
			$('#enemyHealth').animate({'opacity': '0'}, 'fast').text(parseFloat(enemyHealth).toFixed(2)).animate({'opacity': '1'}, 'fast');
		});
	}
	
	//show exact percentages
	
	var exactDomination = parseFloat($('#domination_bar').css('width'));
	$('#blue_domination').text(mathRound(exactDomination, 2).toFixed(2) + '%');
	$('#red_domination').text(mathRound(100 - exactDomination, 2).toFixed(2) + '%');
	
	$('#domination_bar').cssChange(function(){
		exactDomination = parseFloat($('#domination_bar').css('width'));
		$('#blue_domination').animate({'opacity': '0'}, 'fast').text(mathRound(exactDomination, 2).toFixed(2) + '%');
		$('#red_domination').animate({'opacity': '0'}, 'fast').text(mathRound(100 - exactDomination, 2).toFixed(2) + '%');
		
		setTimeout(function() {
			$('#blue_domination, #red_domination').animate({'opacity': '1'}, 'fast');
		}, 1000);
	});	
}
// ---------------------------------------------------------------------------------------------------------------------

function Main() {
    if (typeof unsafeWindow == 'undefined') {
        unsafeWindow = window;
	}

    var subURL = currURL.substr(BASE_URL.length);
    LOCALE = subURL.substring(0, 2) + '/';
    BASE_URL += LOCALE;
    subURL = currURL.substr(BASE_URL.length);
	
	$('#miniprofile .avatarholder .backwhite').css('background-color', 'white');
	$('#account_validation').css('display', 'none');
	
	document.language = window.location.href.split('/')[3];
	
	fixShouts();
	createSidebar();
	createLinks();
	manageAdds();
	createMenu();
	prepareSidebarData()
	changeRankingLink();
	citizenTracker()
	companyTracker()
	
	var pagesFunctions = [
		{p: 'company/employees/', f: calcUserProfit},
		{p: 'company/', f: getCompanyData},
		{p: 'exchange', f: createMonMarketSwitch},
		{p: 'market', f: enchanceMarket},
		{p: 'market/offer/', f: fixMarketDropdown},
		{p: 'market/job/', f: fixJobOfferDropdown},
		{p: 'search/', f: searchRedirect},
		{p: 'accounts/', f: addDonationsLink},
		{p: 'accounts/', f: improveProfile},
		{p: 'citizen/profile/', f: addDonationsLink},
		{p: 'inventory', f: addDonationsLink},
		{p: 'inventory', f: improveInventory},
		{p: 'inventory', f: improveProfile},
		{p: 'citizen/donate/', f: improveDonation},
		{p: 'my-places/company/', f: enhanceMyCompanies},
		{p: 'write-article', f: AddArticleButtons},
		{p: 'write-article/', f: getNumSubs},
		{p: 'edit-article/', f: AddArticleButtons},
		{p: 'edit-article/', f: getNumSubs},
		{p: 'article/', f: changeComments},
		{p: 'article/', f: addTranslate},
		{p: 'article/', f: getNumSubs},
		{p: 'newspaper/', f: addTranslate},
		{p: 'newspaper/', f: getNumSubs},
		{p: 'messages/compose/', f: betterMessages},
		{p: 'messages/read/', f: betterMessages},
		{p: 'elections/', f: improveElections},
		{p: 'military/battlefield/', f: improveBattlefield}
	];
	
	pagesFunctions.forEach(function(v) {
		if (subURL.substr(0, v.p.length) == v.p) {
			v.f();
		}
	});
	
	var compDonateLoc = window.location.href.split('/')[6];
	if (compDonateLoc == "donate") {
		improveDonation();
	}
};

window.addEventListener('load', function() {var checker = setInterval(function() {
	if(typeof ($ = jQuery.noConflict()) != 'undefined') {
		clearInterval(checker);
		
		window.setTimeout(Main, 1000);
		
		$('#content').ajaxComplete(function(e, xhr, settings) {
			if(settings.url.indexOf('/company/addMarketOffer') >= 0) {
				window.setTimeout(getCompanyData, 4000);
			}
		});
	}
},100);}, false);

